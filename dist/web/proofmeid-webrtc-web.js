/*! For license information please see proofmeid-webrtc-web.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ProofmeId=t():e.ProofmeId=t()}(self,(function(){return(()=>{var e={945:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IProofmeDataPurpose=void 0,(n=t.IProofmeDataPurpose||(t.IProofmeDataPurpose={})).AGE_VERIFICATION="AGE_VERIFICATION",n.KYC_VERIFICATION="KYC_VERIFICATION",n.ACCESS_CONTROL="ACCESS_CONTROL",n.ONLINE_VERIFICATION="ONLINE_VERIFICATION",n.IDENTIFICATION="IDENTIFICATION"},491:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IProofmeDataStorage=void 0,(n=t.IProofmeDataStorage||(t.IProofmeDataStorage={})).DATABASE="DATABASE",n.CERTIFICATE="CERTIFICATE",n.NOT_STORED="NOT_STORED"},611:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ProofmeUtilsProvider=void 0;const s=n(810),a=i(n(9));class l{proofmeUtils=new s.ProofmeUtils;async validCredentials(e,t,n,r){return this.proofmeUtils.validCredentialsFunc(e,t,n,r)}async validCredentialsTrustedParties(e,t,n,r,o,i){return this.proofmeUtils.validCredentialsTrustedPartiesFunc(e,t,n,r,o,i)}signCredential(e,t){return this.proofmeUtils.signCredential(e,t)}signCredentialObject(e,t){return this.proofmeUtils.signCredentialObject(e,t)}signProofObject(e,t){return this.proofmeUtils.signProofObject(e,t)}static ɵfac=function(e){return new(e||l)};static ɵprov=a.ɵɵdefineInjectable({token:l,factory:l.ɵfac})}t.ProofmeUtilsProvider=l},810:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProofmeUtils=void 0;const o=r(n(519)),i=n(621);t.ProofmeUtils=class{async validCredentialsTrustedPartiesFunc(e,t,n,r,i,s){const a=new o.default(t),l=this.requestedCredentialsCorrect(e,n);if(!l.success)return l.credentials=e,l;const c=await this.validCredentialsFunc(e,t,i,s);if(!c.valid)return c;for(const e of r)a.utils.isAddress(e)||(console.error(`Trusted party did ${e} is NOT a valid address and is removed.`),r=r.filter((t=>t!==e)));if(r.length>0){const t=[];let n=0,o=0;const i=[];for(const[s]of Object.entries(e.credentials))for(const[l,c]of Object.entries(e.credentials[s].credentials)){o++;const e=c.issuer.id.split(":")[2];let s=!1,u=null,d=null,f=!0;for(const o of r){const r=t.find((t=>t.issuerDidContractAddress===e&&t.did===o));let p=null;if(r?p=r.claim:(p=await this.getClaims(e,o,a),t.push({issuerDidContractAddress:e,did:o,claim:p})),p)if(f=!1,new Date(p.expirationDate)>new Date){const e=p.keys;d=e;const t=`${c.provider}_${l}`;if(!e.includes(t)){u=t;break}if(!u){n++,s=!0;break}}else i.push({credential:c,valid:!1,code:14,message:"Claim expired."})}f?i.push({credential:c,valid:!1,code:13,message:`No claims found to check. Checked dids ${r}`}):!u||s||i.push({credential:c,valid:!1,code:12,message:`Tried to validate attribute ${u} but provider was not allowed to issue. Allowed attributes: ${d.join(", ")}`})}return n===o?{credentials:e.credentials,valid:!0,code:0,message:"Valid credential",requestedCheckResult:l}:{valid:!1,code:1,message:"Invalid credentials",invalidCredentials:i}}return{valid:!1,code:10,message:"No trusted parties to check."}}async validCredentialsFunc(e,t,n,r){"string"==typeof e&&(e=JSON.parse(e)),e=this.reOrderCredentialObject(e);const s=new o.default(t),a=[];let l=0,c=0;const u=[];for(const[o]of Object.entries(e.credentials)){const d={credentials:{[o]:JSON.parse(JSON.stringify(e.credentials[o]))}};delete d.credentials[o].proof.signature;const f=s.eth.accounts.recover(JSON.stringify(d),e.credentials[o].proof.signature);if(this.userCredentialSignatureWrong(e.credentials[o].proof.holder,f))for(const[,d]of Object.entries(e.credentials[o].credentials)){if(c++,!d.version){u.push({credential:d,code:8,message:"Incorrect credential version. Renew your credentials"});continue}const f=new Date(d.expirationDate),p=new Date;if(p>f){u.push({credential:d,code:7,message:`Your credential expired on ${f}`});continue}const h=new Date(e.credentials[o].proof.nonce);if(this.calculateMinutesDifference(p,h)>5&&n)u.push({credential:d,code:2,message:"Nonce too old"});else if(this.issuerCredentialSignatureWrong(d,s)){const n=d.proof.holder,c=d.issuer.id.split(":")[2];if(await this.didContractKeyWrong(s,t,i.claimHolderAbi,n,c,a)){const n=e.credentials[o].proof.holder,c=d.id.split(":")[2];await this.didContractKeyWrong(s,t,i.claimHolderAbi,n,c,a)?r&&void 0!==d.verified&&!0!==d.verified?u.push({credential:d,code:15,message:"Liveness check required but credential not verified"}):l++:u.push({credential:d,code:6,message:"User did incorrect"})}else u.push({credential:d,code:5,message:"Issuer did incorrect"})}else u.push({credential:d,code:4,message:"Issuer signature incorrect"})}else u.push({credential:e.credentials[o],code:3,message:"User signature incorrect"})}return c>0&&l===c?{credentials:e.credentials,valid:!0,code:0,message:"Valid credential"}:{valid:!1,code:1,message:"Invalid credential",invalidCredentials:u}}userCredentialSignatureWrong(e,t){return e===t||(console.error(`User signature of credential ${e} does not match recoveredAddress ${t}`),!1)}issuerCredentialSignatureWrong(e,t){const n=e.proof.signature,r=e.proof.holder,o=JSON.parse(JSON.stringify(e));delete o.proof.signature;const i=t.eth.accounts.recover(JSON.stringify(o),n);return r===i||(console.error(`Issuer signature of credential ${r} does not match recoveredAddress ${i}`),!1)}async didContractKeyWrong(e,t,n,r,i,s){const a=s.find((e=>e.did==i&&e.holderKey===r));if(a)return a.result;{const a=[];if(i===r)return s.push({did:i,holderKey:r,result:!0}),!0;{const l=this.getSha3Key(r,e),c=new(new o.default(t).eth.Contract)(n,i);if(!this.knownAddressesContains(a,l,i)){const e=parseInt(await this.getKeyPurpose(c,l),10);if(0===e||e>3)return s.push({did:i,holderKey:r,result:!1}),!1;a.push({sha3Key:l,didAddress:i})}return s.push({did:i,holderKey:r,result:!0}),!0}}}knownAddressesContains(e,t,n){for(const r of e)if(r.sha3Key===t&&r.didContractAddress===n)return!0}getSha3Key(e,t){return t.utils.keccak256(e)}async getKeyPurpose(e,t){return null===e.options.address?Promise.resolve("-1"):await e.methods.getKeyPurpose(t).call()}calculateMinutesDifference(e,t){let n=(e.getTime()-t.getTime())/1e3;return n/=60,Math.abs(Math.round(n))}reOrderCredentialObject(e){for(const t of Object.keys(e.credentials)){const n=[];for(const r of Object.keys(e.credentials[t].credentials))n.push(r);n.sort();const r={};for(const o of n){const n=this.reOrderCredential(e.credentials[t].credentials[o]);r[o]=n}e.credentials[t].proof=this.reOrderCredentialProof(e.credentials[t].proof),e.credentials[t]={credentials:r,proof:e.credentials[t].proof}}return e}reOrderCredential(e){return this.sortObjectAlphabetically(e)}sortObjectAlphabetically(e){const t={},n=Object.keys(e);n.sort(((e,t)=>(e=e.toLowerCase())<(t=t.toLowerCase())?-1:e>t?1:0));for(const r in n){const o=n[r];"object"!=typeof e[o]||e[o]instanceof Array?t[o]=e[o]:t[o]=this.sortObjectAlphabetically(e[o])}return t}reOrderCredentialProof(e){return{holder:e.holder,nonce:e.nonce,signature:e.signature,type:e.type}}signCredential(e,t){return"string"==typeof e&&(e=JSON.parse(e)),e=this.reOrderCredential(e),(new o.default).eth.accounts.sign(JSON.stringify(e),t).signature}signCredentialObject(e,t){return"string"==typeof e&&(e=JSON.parse(e)),e=this.reOrderCredentialObject(e),(new o.default).eth.accounts.sign(JSON.stringify(e),t).signature}async getClaims(e,t,n){const r=new n.eth.Contract(i.claimHolderAbi,t),o=await r.methods.getClaimIdsByType(e).call();if(!(o.length>0))return Promise.resolve(null);try{const e=await r.methods.getClaim(o[o.length-1]).call(),t=JSON.parse(n.utils.toAscii(e.data));return Promise.resolve(t)}catch(e){return Promise.resolve(null)}}signProofObject(e,t){return"string"==typeof e&&(e=JSON.parse(e)),e=this.reOrderProofObject(e),(new o.default).eth.accounts.sign(JSON.stringify(e),t).signature}reOrderProofObject(e){return this.sortObjectAlphabetically(e)}requestedCredentialsCorrect(e,t){const n={success:!0,missingKeys:[]};for(const r of t.credentials){let o=!1;if(t.minimumRequired&&(o=!!t.minimumRequired.data.find((e=>e===r.key))),r.required&&!o){Array.isArray(r.provider)||(r.provider=[r.provider]);let t=!1;for(const n of r.provider)e.credentials[n]&&e.credentials[n].credentials&&e.credentials[n].credentials[r.key]&&(t=!0);t||(n.success=!1,n.missingKeys.push(r))}}if(t.minimumRequired){const r=Object.keys(e.credentials),o=t.minimumRequired.data;let i=0;for(const t of r)for(const n of o)e.credentials[t]&&e.credentials[t].credentials&&e.credentials[t].credentials[n]&&i++;i<t.minimumRequired.amount&&(n.success=!1,n.missingMessage=`Check the minimumRequired array. Found ${i} items and required amount ${t.minimumRequired.amount}`)}return n}}},515:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SignalingServer=void 0;const s=i(n(352)),a=n(828),l=i(n(85));t.SignalingServer=class{wsServer;rtcConnectionConfig;setRTCConnectionConfig(e){this.rtcConnectionConfig=e}getRTCConnectionConfig(e){if(this.rtcConnectionConfig.turnEnabled){const t=`${Math.floor(Date.now()/1e3)+this.rtcConnectionConfig.turnExpiration}:${e}`,n=l.createHmac("sha1",this.rtcConnectionConfig.turnSecret).update(t.toString()).digest("base64");return{iceCandidatePoolSize:5,iceServers:[{urls:[this.rtcConnectionConfig.turnUrl],credential:n,username:t}]}}if(this.rtcConnectionConfig.stunEnabled)return{iceServers:[{urls:[this.rtcConnectionConfig.stunUrl]}]}}startSignal(e){this.wsServer=new s.Server({server:e});const t=(e,t)=>{e.send(JSON.stringify(t))};this.wsServer.on("connection",(e=>{e.uuid=(0,a.v4)(),e.did=null,e.host=!1,e.authenticated=!1,e.connected=null,e.on("error",(e=>{})),e.on("message",(n=>{let r;try{r=JSON.parse(n)}catch(e){r={}}const{type:o,token:i,host:s,offer:l,answer:c,candidate:u}=r;switch(o){case"auth":i?(e.authenticated=!0,t(e,{type:"AUTH",success:!0,message:"Authentication successful"})):t(e,{type:"auth",success:!1,message:"Could not validate token"});break;case"host":e.host=!0,t(e,{type:"host",success:!0,message:"Host initialised "+e.uuid,uuid:e.uuid,webRtcConnectionConfig:this.getRTCConnectionConfig("host")});break;case"ping":t(e,{type:"pong"});break;case"connect":{const n=[...this.wsServer.clients].filter((e=>e.uuid===s&&null===e.connected&&!0===e.host));1===n.length?(t(n[0],{type:"connected",success:!0,message:"Client connected "+e.uuid,uuid:e.uuid,webRtcConnectionConfig:this.getRTCConnectionConfig("host")}),t(e,{type:"connected",success:!0,message:"Connected to "+s,webRtcConnectionConfig:this.getRTCConnectionConfig("client")}),e.connected=n[0].uuid,n[0].connected=e.uuid):t(e,{type:"connected",success:!1,message:"Could not connect to "+s});break}case"offer":if(null!=e.connected&&this.wsServer.clients.size>0){const n=[...this.wsServer.clients].filter((t=>t.connected===e.uuid));1===n.length?(t(n[0],{type:"offer",success:!0,offer:l}),t(e,{type:"offer",success:!0,offer:l})):t(e,{type:"offer",success:!1,offer:l,message:"Connection not found."})}else t(e,{type:"offer",success:!1,offer:l,message:"Too soon..."});break;case"answer":if(null!=e.connected){const n=[...this.wsServer.clients].filter((t=>t.connected===e.uuid));1===n.length?(t(n[0],{type:"answer",success:!0,answer:c}),t(e,{type:"answer",success:!0,answer:c})):t(e,{type:"answer",success:!1,answer:c,message:"Connection not found."})}else t(e,{type:"answer",success:!1,answer:c,message:"Too soon..."});break;case"candidate":if(null!=e.connected){const n=[...this.wsServer.clients].filter((t=>t.connected===e.uuid));1===n.length?t(n[0],{type:"candidate",success:!0,candidate:u}):t(e,{type:"candidate",success:!1,candidate:u,message:"Connection not found."})}else t(e,{type:"candidate",success:!1,candidate:u,message:"Too soon..."});break;case"leave":if(null!=e.connected){const n=[...this.wsServer.clients].filter((t=>t.connected===e.uuid));e.uuid=(0,a.v4)(),1===n.length?(t(n[0],{type:"leave",success:!0,message:"Connection left on receive leave"}),n[0].connected=null,t(e,{type:"leave",success:!0,message:"Connection left.",uuid:e.uuid})):t(e,{type:"leave",success:!1,message:"Connection not found.",uuid:e.uuid}),e.connected=null}else e.uuid=(0,a.v4)(),t(e,{type:"leave",success:!1,message:"Not connected to host/client.",uuid:e.uuid});break;default:t(e,{type:"error",message:"Command not found: "+o})}})),e.on("close",((e,n,r)=>{if(null!=e.connected){const n=[...this.wsServer.clients].filter((t=>t.connected===e.uuid));1===n.length&&(t(n[0],{type:"leave",success:!0,message:"Connection left on websocket close"}),n[0].connected=null),e.connected=null}})),e.send(JSON.stringify({type:"connect",message:"Well hello there, I am the Signaling Server",success:!0}))}))}}},621:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.claimHolderAbi=void 0,t.claimHolderAbi=[{constant:!0,inputs:[{name:"_key",type:"bytes32"}],name:"getKeyPurpose",outputs:[{name:"purpose",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_key",type:"bytes32"}],name:"getKey",outputs:[{name:"purpose",type:"uint256"},{name:"keyType",type:"uint256"},{name:"key",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_key",type:"bytes32"},{name:"_purpose",type:"uint256"},{name:"_type",type:"uint256"}],name:"addKey",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_claimType",type:"uint256"}],name:"getClaimIdsByType",outputs:[{name:"claimIds",type:"bytes32[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_claimId",type:"bytes32"}],name:"removeClaim",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_id",type:"uint256"},{name:"_approve",type:"bool"}],name:"approve",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_key",type:"bytes32"}],name:"removeKey",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_purpose",type:"uint256"}],name:"getKeysByPurpose",outputs:[{name:"_keys",type:"bytes32[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_claimType",type:"uint256"},{name:"_scheme",type:"uint256"},{name:"_issuer",type:"address"},{name:"_signature",type:"bytes"},{name:"_data",type:"bytes"},{name:"_uri",type:"string"}],name:"addClaim",outputs:[{name:"claimRequestId",type:"bytes32"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"},{name:"_data",type:"bytes"}],name:"execute",outputs:[{name:"executionId",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_claimId",type:"bytes32"}],name:"getClaim",outputs:[{name:"claimType",type:"uint256"},{name:"scheme",type:"uint256"},{name:"issuer",type:"address"},{name:"signature",type:"bytes"},{name:"data",type:"bytes"},{name:"uri",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_key",type:"bytes32"},{name:"_purpose",type:"uint256"}],name:"keyHasPurpose",outputs:[{name:"result",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"claimRequestId",type:"uint256"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!1,name:"scheme",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signature",type:"bytes"},{indexed:!1,name:"data",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"claimId",type:"bytes32"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signatureType",type:"uint256"},{indexed:!1,name:"signature",type:"bytes32"},{indexed:!1,name:"claim",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"claimId",type:"bytes32"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!1,name:"scheme",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signature",type:"bytes"},{indexed:!1,name:"data",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"claimId",type:"bytes32"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!1,name:"scheme",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signature",type:"bytes"},{indexed:!1,name:"data",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"claimId",type:"bytes32"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!1,name:"scheme",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signature",type:"bytes"},{indexed:!1,name:"data",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"executionId",type:"uint256"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"value",type:"uint256"},{indexed:!1,name:"data",type:"bytes"}],name:"ExecutionFailed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"key",type:"bytes32"},{indexed:!0,name:"purpose",type:"uint256"},{indexed:!0,name:"keyType",type:"uint256"}],name:"KeyAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"key",type:"bytes32"},{indexed:!0,name:"purpose",type:"uint256"},{indexed:!0,name:"keyType",type:"uint256"}],name:"KeyRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"executionId",type:"uint256"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"value",type:"uint256"},{indexed:!1,name:"data",type:"bytes"}],name:"ExecutionRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"executionId",type:"uint256"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"value",type:"uint256"},{indexed:!1,name:"data",type:"bytes"}],name:"Executed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"executionId",type:"uint256"},{indexed:!1,name:"approved",type:"bool"}],name:"Approved",type:"event"}]},299:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WebRtcProvider=void 0;const s=n(964),a=n(904),l=n(367),c=i(n(9));class u{webRtcConfig;hostUuid;peerConnection=null;dataChannel=null;wsClient=null;receivedActions$=new s.BehaviorSubject(null);uuid$=new s.BehaviorSubject(null);websocketMessage$=new s.BehaviorSubject(null);websocketConnectionClosed$=new s.BehaviorSubject(null);websocketConnectionOpen$=new s.BehaviorSubject(null);websocketConnectionError$=new s.BehaviorSubject(null);webRtcConnectionConfig;connectionTimeout=null;pongCheckInterval=null;pingTimeout=null;WEBSOCKET_PING_ANSWER_DELAY=1e3;WEBSOCKET_PING_PONG_ALLOWED_TIME=3e3;getConfig(){return this.webRtcConfig}setHostUuid(e){this.hostUuid=e}sendData(e,t){this.dataChannel&&"open"===this.dataChannel.readyState&&this.dataChannel.send(JSON.stringify({action:e,...t}))}setUuid(e){this.uuid$.next(e)}disconnect(){clearTimeout(this.pongCheckInterval),clearTimeout(this.pingTimeout),this.peerConnection&&this.peerConnection.close(),this.dataChannel&&this.dataChannel.close(),this.wsClient&&(this.wsClient.close(),this.wsClient.onclose=null),this.peerConnection=null,this.dataChannel=null,this.wsClient=null,this.websocketConnectionClosed$.next(!0),this.websocketConnectionOpen$.next(!1)}remoteDisconnect(){this.dataChannel&&"open"===this.dataChannel.readyState&&this.dataChannel.send(JSON.stringify({action:"disconnect"})),setTimeout((()=>{this.disconnect()}),1e3)}async sendOffer(e,t){const n=await e.createOffer();await e.setLocalDescription(n),t.send(JSON.stringify({type:"offer",offer:n}))}async launchWebsocketClient(e){this.webRtcConfig=e;let t=null;this.receivedActions$=new s.BehaviorSubject(null),this.connectionTimeout&&clearTimeout(this.connectionTimeout),this.uuid$=new s.BehaviorSubject(null),this.websocketMessage$=new s.BehaviorSubject(null),this.websocketConnectionClosed$=new s.BehaviorSubject(null),this.websocketConnectionOpen$=new s.BehaviorSubject(null),this.websocketConnectionError$=new s.BehaviorSubject(null);let n=this.webRtcConfig.signalingUrl;n||(n="wss://auth.proofme.id"),console.log("Connecting to signaling server:",n),console.log("webRtcConfig.channelId:",e.channel);let r=`${n}?channel=${e.channel}`;e.data&&(r=`${r}&data=${e.data}`),this.wsClient=new l.w3cwebsocket(r),this.connectionTimeout=setTimeout((()=>{!0!==t&&(this.websocketConnectionError$.next(!0),this.wsClient.close())}),1e4),this.wsClient.onerror=e=>{t=!1,this.websocketConnectionClosed$.next(!0),this.websocketConnectionOpen$.next(!1),this.websocketConnectionError$.next(!0)},this.wsClient.onclose=()=>{this.websocketConnectionClosed$.next(!0),this.websocketConnectionOpen$.next(!1)},this.wsClient.onopen=()=>{t=!0,this.websocketConnectionClosed$.next(!1),this.websocketConnectionOpen$.next(!0)},this.wsClient.onmessage=async e=>{if(this.websocketMessage$.next(e),e.data){let t;try{t=JSON.parse(e.data)}catch(e){t={}}const{type:n,message:r,success:o,uuid:i,offer:s,answer:l,candidate:c,webRtcConnectionConfig:u}=t;switch(n){case"error":"Command not found: ping"==r&&(clearTimeout(this.pongCheckInterval),this.pongCheckInterval=setTimeout((()=>{this.disconnect()}),this.WEBSOCKET_PING_PONG_ALLOWED_TIME),this.sendPing());break;case"connect":if(o)if(this.webRtcConfig.isHost){const e=500;let t=0;const n=setInterval((()=>{this.wsClient||clearInterval(n),this.wsClient&&1===this.wsClient.readyState&&t<e&&(clearInterval(n),this.wsClient.send(JSON.stringify({type:"host"}))),t>=e&&clearInterval(n),t++}),50)}else{const e=500;let t=0;const n=setInterval((async()=>{this.wsClient||clearInterval(n),this.wsClient&&1===this.wsClient.readyState&&t<e&&(clearInterval(n),this.wsClient.send(JSON.stringify({type:"connect",host:this.hostUuid}))),t>=e&&clearInterval(n),t++}),50)}break;case"connected":clearTimeout(this.pongCheckInterval),clearTimeout(this.pingTimeout),u&&(this.webRtcConnectionConfig=u,this.webRtcConfig.isHost||await this.setupPeerconnection(this.hostUuid)),i&&this.webRtcConfig.isHost&&await this.sendOffer(this.peerConnection,this.wsClient);break;case"pong":clearTimeout(this.pongCheckInterval),this.pongCheckInterval=setTimeout((()=>{this.disconnect()}),this.WEBSOCKET_PING_PONG_ALLOWED_TIME),this.sendPing();break;case"offer":if(s&&!this.webRtcConfig.isHost){await this.peerConnection.setRemoteDescription(new a.RTCSessionDescription(s));const e=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(e),this.wsClient.send(JSON.stringify({type:"answer",answer:e}))}break;case"host":i&&this.webRtcConfig.isHost&&(this.setUuid(i),u&&(this.webRtcConnectionConfig=u),await this.setupPeerconnection(i),this.sendPing());break;case"leave":this.setUuid(null),this.disconnect();break;case"answer":l&&await this.peerConnection.setRemoteDescription(new a.RTCSessionDescription(l));break;case"candidate":if(c){const e=new a.RTCIceCandidate(c);await this.peerConnection.addIceCandidate(e)}break;case"client":u&&(this.webRtcConnectionConfig=u,this.webRtcConfig.isHost||(await this.setupPeerconnection(this.hostUuid),await this.sendOffer(this.peerConnection,this.wsClient)))}}}}sendPing(){this.pingTimeout=setTimeout((()=>{1===this.wsClient.readyState&&this.wsClient.send(JSON.stringify({type:"ping"}))}),this.WEBSOCKET_PING_ANSWER_DELAY)}async setupPeerconnection(e){this.peerConnection=new RTCPeerConnection(this.webRtcConnectionConfig),this.dataChannel=this.peerConnection.createDataChannel(e),this.peerConnection.addEventListener("datachannel",(e=>{e.channel.onmessage=async e=>{let t;try{t=JSON.parse(e.data),"disconnect"===t.action&&this.disconnect(),this.receivedActions$.next(t)}catch(e){t={}}},e.channel.onopen=()=>{this.receivedActions$.next({action:"p2pConnected",p2pConnected:!0}),this.wsClient.close()}})),this.peerConnection.addEventListener("iceconnectionstatechange",(e=>{"disconnected"===this.peerConnection.iceConnectionState&&(this.receivedActions$.next({action:"p2pConnected",p2pConnected:!1}),this.peerConnection.close(),this.wsClient.send(JSON.stringify({type:"leave"})),this.wsClient.close())})),this.peerConnection.addEventListener("icecandidate",(async e=>{if(e.candidate){try{const t=new a.RTCIceCandidate(e.candidate);await this.peerConnection.addIceCandidate(t)}catch(e){}this.wsClient.send(JSON.stringify({type:"candidate",candidate:e.candidate}))}}))}async setupClientPeerconnection(){this.peerConnection=new RTCPeerConnection(this.webRtcConnectionConfig),this.peerConnection.addEventListener("datachannel",(e=>{e.channel.onmessage=async e=>{let t;try{t=JSON.parse(e.data),"disconnect"===t.action&&this.disconnect(),this.receivedActions$.next(t)}catch(e){t={}}},e.channel.onopen=()=>{this.receivedActions$.next({action:"p2pConnected",p2pConnected:!0}),this.wsClient.close()}})),this.peerConnection.addEventListener("iceconnectionstatechange",(e=>{"disconnected"===this.peerConnection.iceConnectionState&&(this.receivedActions$.next({action:"p2pConnected",p2pConnected:!1}),this.peerConnection.close(),this.wsClient.send(JSON.stringify({type:"leave"})),this.wsClient.close())})),this.peerConnection.addEventListener("icecandidate",(async e=>{if(e.candidate){try{const t=new a.RTCIceCandidate(e.candidate);await this.peerConnection.addIceCandidate(t)}catch(e){}this.wsClient.send(JSON.stringify({type:"candidate",candidate:e.candidate}))}}))}static ɵfac=function(e){return new(e||u)};static ɵprov=c.ɵɵdefineInjectable({token:u,factory:u.ɵfac})}t.WebRtcProvider=u},964:e=>{"use strict";e.exports=require("rxjs")},828:e=>{"use strict";e.exports=require("uuid")},519:e=>{"use strict";e.exports=require("web3")},367:e=>{"use strict";e.exports=require("websocket")},904:e=>{"use strict";e.exports=require("wrtc")},352:e=>{"use strict";e.exports=require("ws")},85:()=>{},9:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ANALYZE_FOR_ENTRY_COMPONENTS:()=>fo,APP_BOOTSTRAP_LISTENER:()=>Vm,APP_ID:()=>km,APP_INITIALIZER:()=>Om,ApplicationInitStatus:()=>Sm,ApplicationModule:()=>db,ApplicationRef:()=>wv,Attribute:()=>co,COMPILER_OPTIONS:()=>Qm,CUSTOM_ELEMENTS_SCHEMA:()=>ks,ChangeDetectionStrategy:()=>Je,ChangeDetectorRef:()=>Sv,Compiler:()=>Wm,CompilerFactory:()=>Zm,Component:()=>_m,ComponentFactory:()=>sg,ComponentFactoryResolver:()=>lg,ComponentRef:()=>ig,ContentChild:()=>go,ContentChildren:()=>ho,DEFAULT_CURRENCY_CODE:()=>Hm,DebugElement:()=>Vv,DebugEventListener:()=>Pv,DebugNode:()=>Rv,DefaultIterableDiffer:()=>Zv,Directive:()=>wm,ElementRef:()=>ug,EmbeddedViewRef:()=>Nv,ErrorHandler:()=>Ss,EventEmitter:()=>iy,Host:()=>ei,HostBinding:()=>xm,HostListener:()=>Im,INJECTOR:()=>Pc,Inject:()=>Go,InjectFlags:()=>We,Injectable:()=>cd,InjectionToken:()=>uo,Injector:()=>Kc,Input:()=>Mm,IterableDiffers:()=>rb,KeyValueDiffers:()=>ib,LOCALE_ID:()=>Lm,MissingTranslationStrategy:()=>qm,ModuleWithComponentFactories:()=>zm,NO_ERRORS_SCHEMA:()=>As,NgModule:()=>Em,NgModuleFactory:()=>Eg,NgModuleRef:()=>Ig,NgProbeToken:()=>fv,NgZone:()=>Jm,Optional:()=>Jo,Output:()=>Dm,PACKAGE_ROOT_URL:()=>$m,PLATFORM_ID:()=>Rm,PLATFORM_INITIALIZER:()=>jm,Pipe:()=>Cm,PlatformRef:()=>vv,Query:()=>po,QueryList:()=>ay,ReflectiveInjector:()=>Od,ReflectiveKey:()=>hd,Renderer2:()=>pg,RendererFactory2:()=>fg,RendererStyleFlags2:()=>zs,ResolvedReflectiveFactory:()=>wd,Sanitizer:()=>hg,SecurityContext:()=>ls,Self:()=>Yo,SimpleChange:()=>tn,SkipSelf:()=>Xo,TRANSLATIONS:()=>Bm,TRANSLATIONS_FORMAT:()=>Um,TemplateRef:()=>ly,Testability:()=>ov,TestabilityRegistry:()=>iv,Type:()=>_o,VERSION:()=>yg,Version:()=>gg,ViewChild:()=>mo,ViewChildren:()=>yo,ViewContainerRef:()=>fy,ViewEncapsulation:()=>Xe,ViewRef:()=>Av,asNativeElements:()=>jv,assertPlatform:()=>gv,createNgModuleRef:()=>kg,createPlatform:()=>pv,createPlatformFactory:()=>hv,defineInjectable:()=>Ve,destroyPlatform:()=>yv,enableProdMode:()=>Iv,forwardRef:()=>ue,getDebugNode:()=>qv,getModuleFactory:()=>Ev,getNgModuleById:()=>Tv,getPlatform:()=>mv,inject:()=>Qo,isDevMode:()=>xv,platformCore:()=>ub,resolveForwardRef:()=>de,setTestabilityGetter:()=>sv,ɵALLOW_MULTIPLE_PLATFORMS:()=>dv,ɵAPP_ID_RANDOM_PROVIDER:()=>Nm,ɵChangeDetectorStatus:()=>Ye,ɵComponentFactory:()=>sg,ɵConsole:()=>Fm,ɵDEFAULT_LOCALE_ID:()=>Vp,ɵINJECTOR_SCOPE:()=>Rc,ɵLifecycleHooksFeature:()=>gu,ɵLocaleDataIndex:()=>jp,ɵNG_COMP_DEF:()=>ct,ɵNG_DIR_DEF:()=>ut,ɵNG_ELEMENT_ID:()=>ht,ɵNG_INJ_DEF:()=>Ue,ɵNG_MOD_DEF:()=>ft,ɵNG_PIPE_DEF:()=>dt,ɵNG_PROV_DEF:()=>Be,ɵNOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR:()=>mg,ɵNO_CHANGE:()=>Ha,ɵNgModuleFactory:()=>Ng,ɵNoopNgZone:()=>rv,ɵReflectionCapabilities:()=>jo,ɵRender3ComponentFactory:()=>Mg,ɵRender3ComponentRef:()=>Dg,ɵRender3NgModuleRef:()=>Ag,ɵRuntimeError:()=>pe,ɵViewRef:()=>bg,ɵ_sanitizeHtml:()=>ss,ɵ_sanitizeUrl:()=>$i,ɵallowSanitizationBypassAndThrow:()=>Ii,ɵbypassSanitizationTrustHtml:()=>Ti,ɵbypassSanitizationTrustResourceUrl:()=>Ai,ɵbypassSanitizationTrustScript:()=>Si,ɵbypassSanitizationTrustStyle:()=>Oi,ɵbypassSanitizationTrustUrl:()=>ki,ɵclearResolutionOfComponentResourcesQueue:()=>ci,ɵcompileComponent:()=>rm,ɵcompileDirective:()=>om,ɵcompileNgModule:()=>By,ɵcompileNgModuleDefs:()=>Uy,ɵcompileNgModuleFactory:()=>cv,ɵcompilePipe:()=>vm,ɵcreateInjector:()=>Hc,ɵdefaultIterableDiffers:()=>lb,ɵdefaultKeyValueDiffers:()=>cb,ɵdetectChanges:()=>Ac,ɵdevModeEqual:()=>Tu,ɵfindLocaleData:()=>Sp,ɵflushModuleScopingQueueAsMuchAsPossible:()=>Ly,ɵgetDebugNode:()=>qv,ɵgetDebugNodeR2:()=>zv,ɵgetDirectives:()=>tu,ɵgetHostElement:()=>ru,ɵgetInjectableDef:()=>Fe,ɵgetLContext:()=>vs,ɵgetLocaleCurrencyCode:()=>kp,ɵgetLocalePluralCase:()=>Ap,ɵgetSanitizationBypassType:()=>Ei,ɵglobal:()=>it,ɵinjectChangeDetectorRef:()=>kv,ɵisBoundToModule:()=>uv,ɵisDefaultChangeDetectionStrategy:()=>et,ɵisListLikeIterable:()=>Ou,ɵisObservable:()=>qd,ɵisPromise:()=>Bd,ɵisSubscribable:()=>Ud,ɵivyEnabled:()=>fb,ɵmakeDecorator:()=>io,ɵmarkDirty:()=>Nc,ɵnoSideEffects:()=>Ge,ɵpatchComponentDefWithScope:()=>Yy,ɵpublishDefaultGlobalUtils:()=>cu,ɵpublishGlobalUtil:()=>uu,ɵregisterLocaleData:()=>Op,ɵregisterNgModuleType:()=>Og,ɵrenderComponent:()=>du,ɵresetCompiledComponents:()=>Ky,ɵresetJitOptions:()=>Vy,ɵresolveComponentResources:()=>ii,ɵsetClassMetadata:()=>xg,ɵsetCurrentInjector:()=>Uo,ɵsetDocument:()=>hn,ɵsetLocaleId:()=>Bp,ɵstore:()=>rd,ɵstringify:()=>ae,ɵtransitiveScopesFor:()=>Xy,ɵunregisterLocaleData:()=>Pp,ɵunwrapSafeValue:()=>xi,ɵwhenRendered:()=>yu,ɵɵCopyDefinitionFeature:()=>xu,ɵɵFactoryTarget:()=>vo,ɵɵInheritDefinitionFeature:()=>vu,ɵɵNgOnChangesFeature:()=>nn,ɵɵProvidersFeature:()=>og,ɵɵadvance:()=>Ba,ɵɵattribute:()=>Vu,ɵɵattributeInterpolate1:()=>Qu,ɵɵattributeInterpolate2:()=>Zu,ɵɵattributeInterpolate3:()=>Ku,ɵɵattributeInterpolate4:()=>Gu,ɵɵattributeInterpolate5:()=>Ju,ɵɵattributeInterpolate6:()=>Yu,ɵɵattributeInterpolate7:()=>Xu,ɵɵattributeInterpolate8:()=>ed,ɵɵattributeInterpolateV:()=>td,ɵɵclassMap:()=>Ef,ɵɵclassMapInterpolate1:()=>Jf,ɵɵclassMapInterpolate2:()=>Yf,ɵɵclassMapInterpolate3:()=>Xf,ɵɵclassMapInterpolate4:()=>ep,ɵɵclassMapInterpolate5:()=>tp,ɵɵclassMapInterpolate6:()=>np,ɵɵclassMapInterpolate7:()=>rp,ɵɵclassMapInterpolate8:()=>op,ɵɵclassMapInterpolateV:()=>ip,ɵɵclassProp:()=>Df,ɵɵcontentQuery:()=>Oy,ɵɵdefineComponent:()=>yt,ɵɵdefineDirective:()=>Dt,ɵɵdefineInjectable:()=>Re,ɵɵdefineInjector:()=>$e,ɵɵdefineNgModule:()=>_t,ɵɵdefinePipe:()=>xt,ɵɵdirectiveInject:()=>kd,ɵɵdisableBindings:()=>Nn,ɵɵelement:()=>Vd,ɵɵelementContainer:()=>Ld,ɵɵelementContainerEnd:()=>Fd,ɵɵelementContainerStart:()=>$d,ɵɵelementEnd:()=>Rd,ɵɵelementStart:()=>jd,ɵɵenableBindings:()=>An,ɵɵgetCurrentView:()=>Hd,ɵɵgetInheritedFactory:()=>Xr,ɵɵhostProperty:()=>Dp,ɵɵi18n:()=>Wh,ɵɵi18nApply:()=>Kh,ɵɵi18nAttributes:()=>Qh,ɵɵi18nEnd:()=>zh,ɵɵi18nExp:()=>Zh,ɵɵi18nPostprocess:()=>Gh,ɵɵi18nStart:()=>qh,ɵɵinject:()=>zo,ɵɵinjectAttribute:()=>to,ɵɵinvalidFactory:()=>Ad,ɵɵinvalidFactoryDep:()=>Wo,ɵɵlistener:()=>zd,ɵɵloadQuery:()=>Sy,ɵɵnamespaceHTML:()=>gr,ɵɵnamespaceMathML:()=>hr,ɵɵnamespaceSVG:()=>pr,ɵɵnextContext:()=>Gd,ɵɵngDeclareClassMetadata:()=>hb,ɵɵngDeclareComponent:()=>gb,ɵɵngDeclareDirective:()=>pb,ɵɵngDeclareFactory:()=>yb,ɵɵngDeclareInjectable:()=>vb,ɵɵngDeclareInjector:()=>bb,ɵɵngDeclareNgModule:()=>wb,ɵɵngDeclarePipe:()=>_b,ɵɵpipe:()=>Gg,ɵɵpipeBind1:()=>Jg,ɵɵpipeBind2:()=>Yg,ɵɵpipeBind3:()=>Xg,ɵɵpipeBind4:()=>ey,ɵɵpipeBindV:()=>ty,ɵɵprojection:()=>Xd,ɵɵprojectionDef:()=>Yd,ɵɵproperty:()=>Nd,ɵɵpropertyInterpolate:()=>ef,ɵɵpropertyInterpolate1:()=>tf,ɵɵpropertyInterpolate2:()=>nf,ɵɵpropertyInterpolate3:()=>rf,ɵɵpropertyInterpolate4:()=>of,ɵɵpropertyInterpolate5:()=>sf,ɵɵpropertyInterpolate6:()=>af,ɵɵpropertyInterpolate7:()=>lf,ɵɵpropertyInterpolate8:()=>cf,ɵɵpropertyInterpolateV:()=>uf,ɵɵpureFunction0:()=>Pg,ɵɵpureFunction1:()=>jg,ɵɵpureFunction2:()=>Rg,ɵɵpureFunction3:()=>Vg,ɵɵpureFunction4:()=>$g,ɵɵpureFunction5:()=>Fg,ɵɵpureFunction6:()=>Lg,ɵɵpureFunction7:()=>Hg,ɵɵpureFunction8:()=>Bg,ɵɵpureFunctionV:()=>Ug,ɵɵqueryRefresh:()=>Ey,ɵɵreference:()=>od,ɵɵresolveBody:()=>Ls,ɵɵresolveDocument:()=>Fs,ɵɵresolveWindow:()=>$s,ɵɵrestoreView:()=>Rn,ɵɵsanitizeHtml:()=>cs,ɵɵsanitizeResourceUrl:()=>fs,ɵɵsanitizeScript:()=>ps,ɵɵsanitizeStyle:()=>us,ɵɵsanitizeUrl:()=>ds,ɵɵsanitizeUrlOrResourceUrl:()=>ys,ɵɵsetComponentScope:()=>mt,ɵɵsetNgModuleScope:()=>Ct,ɵɵstyleMap:()=>xf,ɵɵstyleMapInterpolate1:()=>sp,ɵɵstyleMapInterpolate2:()=>ap,ɵɵstyleMapInterpolate3:()=>lp,ɵɵstyleMapInterpolate4:()=>cp,ɵɵstyleMapInterpolate5:()=>up,ɵɵstyleMapInterpolate6:()=>dp,ɵɵstyleMapInterpolate7:()=>fp,ɵɵstyleMapInterpolate8:()=>pp,ɵɵstyleMapInterpolateV:()=>hp,ɵɵstyleProp:()=>Mf,ɵɵstylePropInterpolate1:()=>gp,ɵɵstylePropInterpolate2:()=>yp,ɵɵstylePropInterpolate3:()=>mp,ɵɵstylePropInterpolate4:()=>vp,ɵɵstylePropInterpolate5:()=>bp,ɵɵstylePropInterpolate6:()=>wp,ɵɵstylePropInterpolate7:()=>_p,ɵɵstylePropInterpolate8:()=>Cp,ɵɵstylePropInterpolateV:()=>Mp,ɵɵsyntheticHostListener:()=>Wd,ɵɵsyntheticHostProperty:()=>xp,ɵɵtemplate:()=>nd,ɵɵtemplateRefExtractor:()=>Py,ɵɵtext:()=>Lf,ɵɵtextInterpolate:()=>Hf,ɵɵtextInterpolate1:()=>Bf,ɵɵtextInterpolate2:()=>Uf,ɵɵtextInterpolate3:()=>qf,ɵɵtextInterpolate4:()=>zf,ɵɵtextInterpolate5:()=>Wf,ɵɵtextInterpolate6:()=>Qf,ɵɵtextInterpolate7:()=>Zf,ɵɵtextInterpolate8:()=>Kf,ɵɵtextInterpolateV:()=>Gf,ɵɵtrustConstantHtml:()=>hs,ɵɵtrustConstantResourceUrl:()=>gs,ɵɵviewQuery:()=>Ty});var r=n(964);const o=require("tslib");var i=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function s(e){return"function"==typeof e}function a(e){return s(null==e?void 0:e.then)}function l(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var c=l((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function u(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var d=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._teardowns=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var l=(0,o.__values)(a),u=l.next();!u.done;u=l.next())u.value.remove(this)}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}else a.remove(this);var d=this.initialTeardown;if(s(d))try{d()}catch(e){i=e instanceof c?e.errors:[e]}var f=this._teardowns;if(f){this._teardowns=null;try{for(var p=(0,o.__values)(f),g=p.next();!g.done;g=p.next()){var y=g.value;try{h(y)}catch(e){i=null!=i?i:[],e instanceof c?i=(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(i)),(0,o.__read)(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}}if(i)throw new c(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)h(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&u(t,e)},e.prototype.remove=function(t){var n=this._teardowns;n&&u(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),f=d.EMPTY;function p(e){return e instanceof d||e&&"closed"in e&&s(e.remove)&&s(e.add)&&s(e.unsubscribe)}function h(e){s(e)?e():e.unsubscribe()}var g=null,y=null,m=void 0,v=!1,b=!1,w={setTimeout:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=w.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e)))},clearTimeout:function(e){var t=w.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function _(e){w.setTimeout((function(){if(!g)throw e;g(e)}))}function C(){}var M=D("C",void 0,void 0);function D(e,t,n){return{kind:e,value:t,error:n}}var x=null;function I(e){if(v){var t=!x;if(t&&(x={errorThrown:!1,error:null}),e(),t){var n=x,r=n.errorThrown,o=n.error;if(x=null,r)throw o}}else e()}var E=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,p(t)&&t.add(n)):n.destination=P,n}return(0,o.__extends)(t,e),t.create=function(e,t,n){return new k(e,t,n)},t.prototype.next=function(e){this.isStopped?N(function(e){return D("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?N(D("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?N(M,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(d),T=Function.prototype.bind;function O(e,t){return T.call(e,t)}var S=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){A(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){A(e)}else A(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){A(e)}},e}(),k=function(e){function t(t,n,r){var o,i,a=e.call(this)||this;return s(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&b?((i=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},o={next:t.next&&O(t.next,i),error:t.error&&O(t.error,i),complete:t.complete&&O(t.complete,i)}):o=t,a.destination=new S(o),a}return(0,o.__extends)(t,e),t}(E);function A(e){var t;v?(t=e,v&&x&&(x.errorThrown=!0,x.error=t)):_(e)}function N(e,t){var n=y;n&&w.setTimeout((function(){return n(e,t)}))}var P={closed:!0,next:C,error:function(e){throw e},complete:C},j="function"==typeof Symbol&&Symbol.observable||"@@observable";function R(e){return e}function V(e){return 0===e.length?R:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var $=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,i=(r=e)&&r instanceof E||function(e){return e&&s(e.next)&&s(e.error)&&s(e.complete)}(r)&&p(r)?e:new k(e,t,n);return I((function(){var e=o,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?o._subscribe(i):o._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=F(t))((function(t,r){var o=new k({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[j]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return V(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=F(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function F(e){var t;return null!==(t=null!=e?e:m)&&void 0!==t?t:Promise}function L(e){return s(e[j])}function H(e){return Symbol.asyncIterator&&s(null==e?void 0:e[Symbol.asyncIterator])}function B(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var U="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function q(e){return s(null==e?void 0:e[U])}function z(e){return(0,o.__asyncGenerator)(this,arguments,(function(){var t,n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,(0,o.__await)(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,(0,o.__await)(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,(0,o.__await)(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function W(e){return s(null==e?void 0:e.getReader)}function Q(e){if(e instanceof $)return e;if(null!=e){if(L(e))return r=e,new $((function(e){var t=r[j]();if(s(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(i(e))return n=e,new $((function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()}));if(a(e))return function(e){return new $((function(t){e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,_)}))}(e);if(H(e))return Z(e);if(q(e))return t=e,new $((function(e){var n,r;try{for(var i=(0,o.__values)(t),s=i.next();!s.done;s=i.next()){var a=s.value;if(e.next(a),e.closed)return}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(W(e))return Z(z(e))}var t,n,r;throw B(e)}function Z(e){return new $((function(t){(function(e,t){var n,r,i,s;return(0,o.__awaiter)(this,void 0,void 0,(function(){var a,l;return(0,o.__generator)(this,(function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=(0,o.__asyncValues)(e),c.label=1;case 1:return[4,n.next()];case 2:if((r=c.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=c.sent(),i={error:l},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function K(e){return function(t){if(function(e){return s(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function G(e,t,n,r,o){return new J(e,t,n,r,o)}var J=function(e){function t(t,n,r,o,i,s){var a=e.call(this,t)||this;return a.onFinalize=i,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,o.__extends)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(E);var Y=new $((function(e){return e.complete()}));function X(e){return e<=0?function(){return Y}:K((function(t,n){var r=0;t.subscribe(G(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}var ee=l((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),te=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return(0,o.__extends)(t,e),t.prototype.lift=function(e){var t=new ne(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new ee},t.prototype.next=function(e){var t=this;I((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){var i=t.observers.slice();try{for(var s=(0,o.__values)(i),a=s.next();!a.done;a=s.next())a.value.next(e)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;I((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;I((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=t.hasError,r=t.isStopped,o=t.observers;return n||r?f:(o.push(e),new d((function(){return u(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,o=t.isStopped;n?e.error(r):o&&e.complete()},t.prototype.asObservable=function(){var e=new $;return e.source=this,e},t.create=function(e,t){return new ne(e,t)},t}($),ne=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return(0,o.__extends)(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:f},t}(te);function re(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new te}:t,r=e.resetOnError,o=void 0===r||r,i=e.resetOnComplete,s=void 0===i||i,a=e.resetOnRefCountZero,l=void 0===a||a;return function(e){var t=null,r=null,i=null,a=0,c=!1,u=!1,d=function(){null==r||r.unsubscribe(),r=null},f=function(){d(),t=i=null,c=u=!1},p=function(){var e=t;f(),null==e||e.unsubscribe()};return K((function(e,h){a++,u||c||d();var g,y=i=null!=i?i:n();h.add((function(){0!=--a||u||c||(r=oe(p,l))})),y.subscribe(h),t||(t=new k({next:function(e){return y.next(e)},error:function(e){u=!0,d(),r=oe(f,o,e),y.error(e)},complete:function(){c=!0,d(),r=oe(f,s),y.complete()}}),(g=e,Q(g)).subscribe(t))}))(e)}}function oe(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return!0===t?(e(),null):!1===t?null:t.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(n))).pipe(X(1)).subscribe((function(){return e()}))}function ie(e){for(let t in e)if(e[t]===ie)return t;throw Error("Could not find renamed property on target object.")}function se(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ae(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(ae).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function le(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const ce=ie({__forward_ref__:ie});function ue(e){return e.__forward_ref__=ue,e.toString=function(){return ae(this())},e}function de(e){return fe(e)?e():e}function fe(e){return"function"==typeof e&&e.hasOwnProperty(ce)&&e.__forward_ref__===ue}class pe extends Error{constructor(e,t){super(he(e,t)),this.code=e}}function he(e,t){const n=`NG0${Math.abs(e)}`;let r=`${n}${t?": "+t:""}`;return ngDevMode&&e<0&&(r=`${r}. Find more at https://angular.io/errors/${n}`),r}function ge(e){return"string"==typeof e?e:null==e?"":String(e)}function ye(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():ge(e)}function me(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new pe(-200,`Circular dependency in DI detected for ${e}${n}`)}function ve(){throw new Error("Cannot mix multi providers and regular providers")}function be(e,t){const n=t?` in ${t}`:"";throw new pe(-201,`No provider for ${ye(e)} found${n}`)}function we(e,t){"number"!=typeof e&&Ae(t,typeof e,"number","===")}function _e(e,t,n){we(e,"Expected a number"),Te(e,n,"Expected number to be less than or equal to"),Se(e,t,"Expected number to be greater than or equal to")}function Ce(e,t){"string"!=typeof e&&Ae(t,null===e?"null":typeof e,"string","===")}function Me(e,t,n){e!=t&&Ae(n,e,t,"==")}function De(e,t,n){e==t&&Ae(n,e,t,"!=")}function xe(e,t,n){e!==t&&Ae(n,e,t,"===")}function Ie(e,t,n){e===t&&Ae(n,e,t,"!==")}function Ee(e,t,n){e<t||Ae(n,e,t,"<")}function Te(e,t,n){e<=t||Ae(n,e,t,"<=")}function Oe(e,t,n){e>t||Ae(n,e,t,">")}function Se(e,t,n){e>=t||Ae(n,e,t,">=")}function ke(e,t){null==e&&Ae(t,e,null,"!=")}function Ae(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function Ne(e){"undefined"!=typeof Node&&e instanceof Node||"object"==typeof e&&null!=e&&"WebWorkerRenderNode"===e.constructor.name||Ae(`The provided value must be an instance of a DOM Node but got ${ae(e)}`)}function Pe(e,t){ke(e,"Array must be defined.");const n=e.length;(t<0||t>=n)&&Ae(`Index expected to be less than ${n} but got ${t}`)}function je(e,...t){if(-1!==t.indexOf(e))return!0;Ae(`Expected value to be one of ${JSON.stringify(t)} but was ${JSON.stringify(e)}.`)}function Re(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}const Ve=Re;function $e(e){return{providers:e.providers||[],imports:e.imports||[]}}function Fe(e){return Le(e,Be)||Le(e,qe)}function Le(e,t){return e.hasOwnProperty(t)?e[t]:null}function He(e){return e&&(e.hasOwnProperty(Ue)||e.hasOwnProperty(ze))?e[Ue]:null}const Be=ie({ɵprov:ie}),Ue=ie({ɵinj:ie}),qe=ie({ngInjectableDef:ie}),ze=ie({ngInjectorDef:ie});var We;let Qe;function Ze(e){const t=Qe;return Qe=e,t}function Ke(e,t,n){const r=Fe(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&We.Optional?null:void 0!==t?t:void be(ae(e),"Injector")}function Ge(e){return{toString:e}.toString()}var Je,Ye,Xe;function et(e){return null==e||e===Je.Default}!function(e){e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional"}(We||(We={})),function(e){e[e.OnPush=0]="OnPush",e[e.Default=1]="Default"}(Je||(Je={})),function(e){e[e.CheckOnce=0]="CheckOnce",e[e.Checked=1]="Checked",e[e.CheckAlways=2]="CheckAlways",e[e.Detached=3]="Detached",e[e.Errored=4]="Errored",e[e.Destroyed=5]="Destroyed"}(Ye||(Ye={})),function(e){e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(Xe||(Xe={}));const tt="undefined"!=typeof globalThis&&globalThis,nt="undefined"!=typeof window&&window,rt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,ot="undefined"!=typeof global&&global,it=tt||ot||nt||rt;function st(){return!("undefined"!=typeof ngDevMode&&!ngDevMode||("object"!=typeof ngDevMode&&function(){const e="undefined"!=typeof location?location.toString():"",t={namedConstructors:-1!=e.indexOf("ngDevMode=namedConstructors"),firstCreatePass:0,tNode:0,tView:0,rendererCreateTextNode:0,rendererSetText:0,rendererCreateElement:0,rendererAddEventListener:0,rendererSetAttribute:0,rendererRemoveAttribute:0,rendererSetProperty:0,rendererSetClassName:0,rendererAddClass:0,rendererRemoveClass:0,rendererSetStyle:0,rendererRemoveStyle:0,rendererDestroy:0,rendererDestroyNode:0,rendererMoveNode:0,rendererRemoveNode:0,rendererAppendChild:0,rendererInsertBefore:0,rendererCreateComment:0},n=-1===e.indexOf("ngDevMode=false");it.ngDevMode=n&&t}(),"undefined"==typeof ngDevMode||!ngDevMode))}const at={},lt=[];("undefined"==typeof ngDevMode||ngDevMode)&&st()&&(Object.freeze(at),Object.freeze(lt));const ct=ie({ɵcmp:ie}),ut=ie({ɵdir:ie}),dt=ie({ɵpipe:ie}),ft=ie({ɵmod:ie}),pt=ie({ɵfac:ie}),ht=ie({__NG_ELEMENT_ID__:ie});let gt=0;function yt(e){return Ge((()=>{("undefined"==typeof ngDevMode||ngDevMode)&&st();const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Je.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||lt,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Xe.Emulated,id:"c",styles:e.styles||lt,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,o=e.features,i=e.pipes;return n.id+=gt++,n.inputs=Mt(e.inputs,t),n.outputs=Mt(e.outputs),o&&o.forEach((e=>e(n))),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(vt):null,n.pipeDefs=i?()=>("function"==typeof i?i():i).map(bt):null,n}))}function mt(e,t,n){const r=e.ɵcmp;r.directiveDefs=()=>t.map(vt),r.pipeDefs=()=>n.map(bt)}function vt(e){const t=It(e)||Et(e);if(ngDevMode&&!t)throw new Error(`'${e.name}' is neither 'ComponentType' or 'DirectiveType'.`);return t}function bt(e){const t=Tt(e);if(ngDevMode&&!t)throw new Error(`'${e.name}' is not a 'PipeType'.`);return t}const wt={};function _t(e){return Ge((()=>{const t={type:e.type,bootstrap:e.bootstrap||lt,declarations:e.declarations||lt,imports:e.imports||lt,exports:e.exports||lt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(wt[e.id]=e.type),t}))}function Ct(e,t){return Ge((()=>{const n=Ot(e,!0);n.declarations=t.declarations||lt,n.imports=t.imports||lt,n.exports=t.exports||lt}))}function Mt(e,t){if(null==e)return at;const n={};for(const r in e)if(e.hasOwnProperty(r)){let o=e[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,t&&(t[o]=i)}return n}const Dt=yt;function xt(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function It(e){return e[ct]||null}function Et(e){return e[ut]||null}function Tt(e){return e[dt]||null}function Ot(e,t){const n=e[ft]||null;if(!n&&!0===t)throw new Error(`Type ${ae(e)} does not have 'ɵmod' property.`);return n}const St=20,kt=["Root","Component","Embedded"],At=10;function Nt(e){return Array.isArray(e)&&"object"==typeof e[1]}function Pt(e){return Array.isArray(e)&&!0===e[1]}function jt(e){return 0!=(8&e.flags)}function Rt(e){return 2==(2&e.flags)}function Vt(e){return 1==(1&e.flags)}function $t(e){return null!==e.template}function Ft(e,t){Lt(e,t[1])}function Lt(e,t){Ht(e),e.hasOwnProperty("tView_")&&Me(e.tView_,t,"This TNode does not belong to this TView.")}function Ht(e){ke(e,"TNode must be defined"),e&&"object"==typeof e&&e.hasOwnProperty("directiveStylingLast")||Ae("Not of type TNode, got: "+e)}function Bt(e){ke(e,"Expected TIcu to be defined"),"number"!=typeof e.currentCaseLViewIndex&&Ae("Object is not of TIcu type.")}function Ut(e,t="Type passed in is not ComponentType, it does not have 'ɵcmp' property."){It(e)||Ae(t)}function qt(e){ke(e,"currentTNode should exist!"),ke(e.parent,"currentTNode should have a parent")}function zt(e){ke(e,"LContainer must be defined"),Me(Pt(e),!0,"Expecting LContainer")}function Wt(e){e&&Me(Nt(e),!0,"Expecting LView or undefined or null")}function Qt(e){ke(e,"LView must be defined"),Me(Nt(e),!0,"Expecting LView")}function Zt(e,t){Me(e.firstCreatePass,!0,t||"Should only be called in first create pass.")}function Kt(e,t){Me(e.firstUpdatePass,!0,t||"Should only be called in first update pass.")}function Gt(e,t){Jt(e[1].expandoStartIndex,e.length,t)}function Jt(e,t,n){e<=n&&n<t||Ae(`Index out of range (expecting ${e} <= ${n} < ${t})`)}function Yt(e,t){ke(e,t||"Component views should always have a parent view (component's host view)")}function Xt(e,t){Gt(e,t),Gt(e,t+8),we(e[t+0],"injectorIndex should point to a bloom filter"),we(e[t+1],"injectorIndex should point to a bloom filter"),we(e[t+2],"injectorIndex should point to a bloom filter"),we(e[t+3],"injectorIndex should point to a bloom filter"),we(e[t+4],"injectorIndex should point to a bloom filter"),we(e[t+5],"injectorIndex should point to a bloom filter"),we(e[t+6],"injectorIndex should point to a bloom filter"),we(e[t+7],"injectorIndex should point to a bloom filter"),we(e[t+8],"injectorIndex should point to parent injector")}function en(e,t){const n=e.hasOwnProperty(pt);if(!n&&!0===t&&ngDevMode)throw new Error(`Type ${ae(e)} does not have 'ɵfac' property.`);return n?e[pt]:null}class tn{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function nn(){return rn}function rn(e){return e.type.prototype.ngOnChanges&&(e.setInput=sn),on}function on(){const e=an(this),t=e?.current;if(t){const n=e.previous;if(n===at)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function sn(e,t,n,r){const o=an(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:at,current:null}),i=o.current||(o.current={}),s=o.previous,a=this.declaredInputs[n],l=s[a];i[a]=new tn(l&&l.currentValue,t,s===at),e[r]=t}function an(e){return e.__ngSimpleChanges__||null}nn.ngInherit=!0;let ln=null;const cn=e=>{ln=e},un=function(e,t,n){null!=ln&&ln(e,t,n)},dn="svg",fn="math";let pn;function hn(e){pn=e}function gn(){return void 0!==pn?pn:"undefined"!=typeof document?document:void 0}var yn;function mn(e){return!!e.listen}!function(e){e[e.Important=1]="Important",e[e.DashCase=2]="DashCase"}(yn||(yn={}));const vn={createRenderer:(e,t)=>gn()};function bn(e){for(;Array.isArray(e);)e=e[0];return e}function wn(e,t){return ngDevMode&&Pe(t,e),ngDevMode&&Se(e,St,"Expected to be past HEADER_OFFSET"),bn(t[e])}function _n(e,t){ngDevMode&&Ft(e,t),ngDevMode&&Pe(t,e.index);const n=bn(t[e.index]);return ngDevMode&&!mn(t[11])&&Ne(n),n}function Cn(e,t){ngDevMode&&Oe(t,-1,"wrong index for TNode"),ngDevMode&&Ee(t,e.data.length,"wrong index for TNode");const n=e.data[t];return ngDevMode&&null!==n&&Ht(n),n}function Mn(e,t){return ngDevMode&&Pe(e,t),e[t]}function Dn(e,t){ngDevMode&&Pe(t,e);const n=t[e];return Nt(n)?n:n[0]}function xn(e){return 4==(4&e[2])}function In(e){return 128==(128&e[2])}function En(e,t){return null==t?null:(ngDevMode&&Pe(e,t),e[t])}function Tn(e){e[18]=0}function On(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const Sn={lFrame:sr(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function kn(){return Sn.bindingsEnabled}function An(){Sn.bindingsEnabled=!0}function Nn(){Sn.bindingsEnabled=!1}function Pn(){return Sn.lFrame.lView}function jn(){return Sn.lFrame.tView}function Rn(e){return Sn.lFrame.contextLView=e,e[8]}function Vn(){let e=$n();for(;null!==e&&64===e.type;)e=e.parent;return e}function $n(){return Sn.lFrame.currentTNode}function Fn(){const e=Sn.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Ln(e,t){ngDevMode&&e&&Lt(e,Sn.lFrame.tView);const n=Sn.lFrame;n.currentTNode=e,n.isParent=t}function Hn(){return Sn.lFrame.isParent}function Bn(){Sn.lFrame.isParent=!1}function Un(){return Sn.isInCheckNoChangesMode}function qn(e){Sn.isInCheckNoChangesMode=e}function zn(){const e=Sn.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Wn(){return Sn.lFrame.bindingIndex}function Qn(e){return Sn.lFrame.bindingIndex=e}function Zn(){return Sn.lFrame.bindingIndex++}function Kn(e){const t=Sn.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Gn(e){Sn.lFrame.inI18n=e}function Jn(e,t){const n=Sn.lFrame;n.bindingIndex=n.bindingRootIndex=e,Yn(t)}function Yn(e){Sn.lFrame.currentDirectiveIndex=e}function Xn(e){const t=Sn.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function er(){return Sn.lFrame.currentQueryIndex}function tr(e){Sn.lFrame.currentQueryIndex=e}function nr(e){const t=e[1];return 2===t.type?(ngDevMode&&ke(t.declTNode,"Embedded TNodes should have declaration parents."),t.declTNode):1===t.type?e[6]:null}function rr(e,t,n){if(ngDevMode&&Wt(e),n&We.SkipSelf){ngDevMode&&Lt(t,e[1]);let r=t,o=e;for(;ngDevMode&&ke(r,"Parent TNode should be defined"),r=r.parent,!(null!==r||n&We.Host||(r=nr(o),null===r)||(ngDevMode&&ke(o,"Parent LView should be defined"),o=o[15],10&r.type)););if(null===r)return!1;t=r,e=o}ngDevMode&&Ft(t,e);const r=Sn.lFrame=ir();return r.currentTNode=t,r.lView=e,!0}function or(e){ngDevMode&&De(e[0],e[1],"????"),ngDevMode&&Wt(e);const t=ir();ngDevMode&&(Me(t.isParent,!0,"Expected clean LFrame"),Me(t.lView,null,"Expected clean LFrame"),Me(t.tView,null,"Expected clean LFrame"),Me(t.selectedIndex,-1,"Expected clean LFrame"),Me(t.elementDepthCount,0,"Expected clean LFrame"),Me(t.currentDirectiveIndex,-1,"Expected clean LFrame"),Me(t.currentNamespace,null,"Expected clean LFrame"),Me(t.bindingRootIndex,-1,"Expected clean LFrame"),Me(t.currentQueryIndex,0,"Expected clean LFrame"));const n=e[1];Sn.lFrame=t,ngDevMode&&n.firstChild&&Lt(n.firstChild,n),t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ir(){const e=Sn.lFrame,t=null===e?null:e.child;return null===t?sr(e):t}function sr(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ar(){const e=Sn.lFrame;return Sn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const lr=ar;function cr(){const e=ar();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ur(){return Sn.lFrame.selectedIndex}function dr(e){ngDevMode&&-1!==e&&Se(e,St,"Index must be past HEADER_OFFSET (or -1)."),ngDevMode&&Ee(e,Sn.lFrame.lView.length,"Can't set index passed end of LView"),Sn.lFrame.selectedIndex=e}function fr(){const e=Sn.lFrame;return Cn(e.tView,e.selectedIndex)}function pr(){Sn.lFrame.currentNamespace=dn}function hr(){Sn.lFrame.currentNamespace=fn}function gr(){Sn.lFrame.currentNamespace=null}function yr(e,t){ngDevMode&&Zt(e);for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n];ngDevMode&&ke(t,"Expecting DirectiveDef");const r=t.type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:a,ngOnDestroy:l}=r;o&&(e.contentHooks||(e.contentHooks=[])).push(-n,o),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),a&&((e.viewHooks||(e.viewHooks=[])).push(n,a),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,a)),null!=l&&(e.destroyHooks||(e.destroyHooks=[])).push(n,l)}}function mr(e,t,n){wr(e,t,3,n)}function vr(e,t,n,r){ngDevMode&&De(n,3,"Init pre-order hooks should not be called more than once"),(3&e[2])===n&&wr(e,t,n,r)}function br(e,t){ngDevMode&&De(t,3,"Init hooks phase should not be incremented after all init hooks have been run.");let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function wr(e,t,n,r){ngDevMode&&Me(Un(),!1,"Hooks should never be run when in check no changes mode.");const o=void 0!==r?65535&e[18]:0,i=null!=r?r:-1,s=t.length-1;let a=0;for(let l=o;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(e[18]+=65536),(a<i||-1==i)&&(_r(e,n,t,l),e[18]=(4294901760&e[18])+l+2),l++}function _r(e,t,n,r){const o=n[r]<0,i=n[r+1],s=e[o?-n[r]:n[r]];if(o){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048,un(4,s,i);try{i.call(s)}finally{un(5,s,i)}}}else{un(4,s,i);try{i.call(s)}finally{un(5,s,i)}}}const Cr=-1;class Mr{constructor(e,t,n){this.factory=e,this.resolving=!1,ngDevMode&&ke(e,"Factory not specified"),ngDevMode&&Me(typeof e,"function","Expected factory function."),this.canSeeViewProviders=t,this.injectImpl=n}}function Dr(e){let t="";return 1&e&&(t+="|Text"),2&e&&(t+="|Element"),4&e&&(t+="|Container"),8&e&&(t+="|ElementContainer"),16&e&&(t+="|Projection"),32&e&&(t+="|IcuContainer"),64&e&&(t+="|Placeholder"),t.length>0?t.substring(1):t}function xr(e,t,n){ke(e,"should be called with a TNode"),0==(e.type&t)&&Ae(n||`Expected [${Dr(t)}] but got ${Dr(e.type)}.`)}function Ir(e,t,n){const r=mn(e);let o=0;for(;o<n.length;){const i=n[o];if("number"==typeof i){if(0!==i)break;o++;const s=n[o++],a=n[o++],l=n[o++];ngDevMode&&ngDevMode.rendererSetAttribute++,r?e.setAttribute(t,a,l,s):t.setAttributeNS(s,a,l)}else{const s=i,a=n[++o];ngDevMode&&ngDevMode.rendererSetAttribute++,Tr(s)?r&&e.setProperty(t,s,a):r?e.setAttribute(t,s,a):t.setAttribute(s,a),o++}}return o}function Er(e){return 3===e||4===e||6===e}function Tr(e){return 64===e.charCodeAt(0)}function Or(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const o=t[r];"number"==typeof o?n=o:0===n||Sr(e,n,o,null,-1===n||2===n?t[++r]:null)}}return e}function Sr(e,t,n,r,o){let i=0,s=e.length;if(-1===t)s=-1;else for(;i<e.length;){const n=e[i++];if("number"==typeof n){if(n===t){s=-1;break}if(n>t){s=i-1;break}}}for(;i<e.length;){const t=e[i];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==o&&(e[i+1]=o));if(r===e[i+1])return void(e[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),null!==r&&e.splice(i++,0,r),null!==o&&e.splice(i++,0,o)}function kr(e){return e!==Cr}function Ar(e){return ngDevMode&&we(e,"Number expected"),ngDevMode&&De(e,-1,"Not a valid state."),ngDevMode&&Oe(32767&e,St,"Parent injector must be pointing past HEADER_OFFSET."),32767&e}function Nr(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Pr=!0;function jr(e){const t=Pr;return Pr=e,t}let Rr=0;function Vr(e,t){const n=Fr(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,$r(r.data,e),$r(t,null),$r(r.blueprint,null));const o=Lr(e,t),i=e.injectorIndex;if(kr(o)){const e=Ar(o),n=Nr(o,t),r=n[1].data;for(let o=0;o<8;o++)t[i+o]=n[e+o]|r[e+o]}return t[i+8]=o,i}function $r(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Fr(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:(ngDevMode&&Pe(t,e.injectorIndex),e.injectorIndex)}function Lr(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;null!==o;){const e=o[1],t=e.type;if(2===t?(ngDevMode&&ke(e.declTNode,"Embedded TNodes should have declaration parents."),r=e.declTNode):1===t?r=o[6]:(ngDevMode&&Me(e.type,0,"Root type expected"),r=null),null===r)return Cr;if(ngDevMode&&r&&Ft(r,o[15]),n++,o=o[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Cr}function Hr(e,t,n){!function(e,t,n){let r;ngDevMode&&Me(t.firstCreatePass,!0,"expected firstCreatePass to be true"),"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ht)&&(r=n[ht]),null==r&&(r=n[ht]=Rr++);const o=255&r,i=1<<o;t.data[e+(o>>5)]|=i}(e,t,n)}function Br(e,t,n){if(n&We.Optional)return e;be(t,"NodeInjector")}function Ur(e,t,n,r){if(n&We.Optional&&void 0===r&&(r=null),0==(n&(We.Self|We.Host))){const o=e[9],i=Ze(void 0);try{return o?o.get(t,r,n&We.Optional):Ke(t,r,n&We.Optional)}finally{Ze(i)}}return Br(r,t,n)}function qr(e,t,n,r=We.Default,o){if(null!==e){const i=function(e){if(ngDevMode&&ke(e,"token must be defined"),"string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ht)?e[ht]:void 0;return"number"==typeof t?t>=0?255&t:(ngDevMode&&Me(t,-1,"Expecting to get Special Injector Id"),Wr):t}(n);if("function"==typeof i){if(!rr(t,e,r))return r&We.Host?Br(o,n,r):Ur(t,n,r,o);try{const e=i(r);if(null!=e||r&We.Optional)return e;be(n)}finally{lr()}}else if("number"==typeof i){let o=null,s=Fr(e,t),a=Cr,l=r&We.Host?t[16][6]:null;for((-1===s||r&We.SkipSelf)&&(a=-1===s?Lr(e,t):t[s+8],a!==Cr&&Jr(r,!1)?(o=t[1],s=Ar(a),t=Nr(a,t)):s=-1);-1!==s;){ngDevMode&&Xt(t,s);const e=t[1];if(ngDevMode&&Ft(e.data[s+8],t),Gr(i,s,e.data)){const e=Qr(s,t,n,o,r,l);if(e!==zr)return e}a=t[s+8],a!==Cr&&Jr(r,t[1].data[s+8]===l)&&Gr(i,s,t)?(o=e,s=Ar(a),t=Nr(a,t)):s=-1}}}return Ur(t,n,r,o)}const zr={};function Wr(){return new Yr(Vn(),Pn())}function Qr(e,t,n,r,o,i){const s=t[1],a=s.data[e+8],l=Zr(a,s,n,null==r?Rt(a)&&Pr:r!=s&&0!=(3&a.type),o&We.Host&&i===a);return null!==l?Kr(t,s,l,a):zr}function Zr(e,t,n,r,o){const i=e.providerIndexes,s=t.data,a=1048575&i,l=e.directiveStart,c=e.directiveEnd,u=i>>20,d=o?a+u:c;for(let e=r?a:a+u;e<d;e++){const t=s[e];if(e<l&&n===t||e>=l&&t.type===n)return e}if(o){const e=s[l];if(e&&$t(e)&&e.type===n)return l}return null}function Kr(e,t,n,r){let o=e[n];const i=t.data;if(o instanceof Mr){const a=o;a.resolving&&me(ye(i[n]));const l=jr(a.canSeeViewProviders);a.resolving=!0;const c=a.injectImpl?Ze(a.injectImpl):null,u=rr(e,r,We.Default);ngDevMode&&Me(u,!0,"Because flags do not contain `SkipSelf' we expect this to always succeed.");try{o=e[n]=a.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&(ngDevMode&&(void 0!==(s=i[n]).type&&null!=s.selectors&&void 0!==s.inputs||Ae("Expected a DirectiveDef/ComponentDef and this object does not seem to have the expected shape.")),function(e,t,n){ngDevMode&&Zt(n);const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){const r=rn(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,o),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i))}(n,i[n],t))}finally{null!==c&&Ze(c),jr(l),a.resolving=!1,lr()}}var s;return o}function Gr(e,t,n){const r=1<<e;return!!(n[t+(e>>5)]&r)}function Jr(e,t){return!(e&We.Self||e&We.Host&&t)}class Yr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return qr(this._tNode,this._lView,e,n,t)}}function Xr(e){return Ge((()=>{const t=e.prototype.constructor,n=t[pt]||eo(t),r=Object.prototype;let o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){const e=o[pt]||eo(o);if(e&&e!==n)return e;o=Object.getPrototypeOf(o)}return e=>new e}))}function eo(e){return fe(e)?()=>{const t=eo(de(e));return t&&t()}:en(e)}function to(e){return function(e,t){if(ngDevMode&&xr(e,15),ngDevMode&&ke(e,"expecting tNode"),"class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const o=n[r];if(Er(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(o===t)return n[r+1];r+=2}}}return null}(Vn(),e)}const no="__annotations__",ro="__parameters__",oo="__prop__metadata__";function io(e,t,n,r,o){return Ge((()=>{const i=so(t);function s(...e){if(this instanceof s)return i.call(this,...e),this;const t=new s(...e);return function(n){return o&&o(n,...e),(n.hasOwnProperty(no)?n[no]:Object.defineProperty(n,no,{value:[]})[no]).push(t),r&&r(n),n}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s}))}function so(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}function ao(e,t,n){return Ge((()=>{const r=so(t);function o(...e){if(this instanceof o)return r.apply(this,e),this;const t=new o(...e);return n.annotation=t,n;function n(e,n,r){const o=e.hasOwnProperty(ro)?e[ro]:Object.defineProperty(e,ro,{value:[]})[ro];for(;o.length<=r;)o.push(null);return(o[r]=o[r]||[]).push(t),e}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o}))}function lo(e,t,n,r){return Ge((()=>{const o=so(t);function i(...e){if(this instanceof i)return o.apply(this,e),this;const t=new i(...e);return function(n,o){const i=n.constructor,s=i.hasOwnProperty(oo)?i[oo]:Object.defineProperty(i,oo,{value:{}})[oo];s[o]=s.hasOwnProperty(o)&&s[o]||[],s[o].unshift(t),r&&r(n,o,...e)}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i}))}const co=ao("Attribute",(e=>({attributeName:e,__NG_ELEMENT_ID__:()=>to(e)})));class uo{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ɵprov=void 0,"number"==typeof t?(("undefined"==typeof ngDevMode||ngDevMode)&&Ee(t,0,"Only negative numbers are supported here"),this.__NG_ELEMENT_ID__=t):void 0!==t&&(this.ɵprov=Re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const fo=new uo("AnalyzeForEntryComponents");class po{}const ho=lo("ContentChildren",((e,t={})=>({selector:e,first:!1,isViewQuery:!1,descendants:!1,emitDistinctChangesOnly:!0,...t})),po),go=lo("ContentChild",((e,t={})=>({selector:e,first:!0,isViewQuery:!1,descendants:!0,...t})),po),yo=lo("ViewChildren",((e,t={})=>({selector:e,first:!1,isViewQuery:!0,descendants:!0,emitDistinctChangesOnly:!0,...t})),po),mo=lo("ViewChild",((e,t)=>({selector:e,first:!0,isViewQuery:!0,descendants:!0,...t})),po);var vo,bo;function wo(e){const t=it.ng;if(t&&t.ɵcompilerFacade)return t.ɵcompilerFacade;if("undefined"==typeof ngDevMode||ngDevMode){console.error(`JIT compilation failed for ${e.kind}`,e.type);let t=`The ${e.kind} '${e.type.name}' needs to be compiled using the JIT compiler, but '@angular/compiler' is not available.\n\n`;throw 1===e.usage?(t+=`The ${e.kind} is part of a library that has been partially compiled.\n`,t+="However, the Angular Linker has not processed the library such that JIT compilation is used as fallback.\n",t+="\n",t+="Ideally, the library is processed using the Angular Linker to become fully AOT compiled.\n"):t+="JIT compilation is discouraged for production use-cases! Consider using AOT mode instead.\n",t+="Alternatively, the JIT compiler should be loaded by bootstrapping using '@angular/platform-browser-dynamic' or '@angular/platform-server',\n",t+="or manually provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.",new Error(t)}throw new Error("JIT compiler unavailable")}!function(e){e[e.Directive=0]="Directive",e[e.Component=1]="Component",e[e.Injectable=2]="Injectable",e[e.Pipe=3]="Pipe",e[e.NgModule=4]="NgModule"}(vo||(vo={})),function(e){e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom"}(bo||(bo={}));const _o=Function;function Co(e){return"function"==typeof e}function Mo(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Mo(r,t)):t!==e&&t.push(r)}return t}function Do(e,t){e.forEach((e=>Array.isArray(e)?Do(e,t):t(e)))}function xo(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Io(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Eo(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function To(e,t,n){let r=So(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){ngDevMode&&Te(t,e.length,"Can't insert past array end.");let o=e.length;if(o==t)e.push(n,r);else if(1===o)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){const t=o-2;e[o]=e[t],o--}e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Oo(e,t){const n=So(e,t);if(n>=0)return e[1|n]}function So(e,t){return function(e,t,n){ngDevMode&&Me(Array.isArray(e),!0,"Expecting an array");let r=0,o=e.length>>n;for(;o!==r;){const i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}(e,t,1)}const ko=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,Ao=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,No=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Po=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class jo{constructor(e){this._reflect=e||it.Reflect}isReflectionEnabled(){return!0}factory(e){return(...t)=>new e(...t)}_zipTypesAndAnnotations(e,t){let n;n=Eo(void 0===e?t.length:e.length);for(let r=0;r<n.length;r++)void 0===e?n[r]=[]:e[r]&&e[r]!=Object?n[r]=[e[r]]:n[r]=[],t&&null!=t[r]&&(n[r]=n[r].concat(t[r]));return n}_ownParameters(e,t){if(n=e.toString(),ko.test(n)||Po.test(n)||Ao.test(n)&&!No.test(n))return null;var n;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;const r=e.ctorParameters;if(r&&r!==t.ctorParameters){const e="function"==typeof r?r():r,t=e.map((e=>e&&e.type)),n=e.map((e=>e&&Ro(e.decorators)));return this._zipTypesAndAnnotations(t,n)}const o=e.hasOwnProperty(ro)&&e[ro],i=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return i||o?this._zipTypesAndAnnotations(i,o):Eo(e.length)}parameters(e){if(!Co(e))return[];const t=Vo(e);let n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]}_ownAnnotations(e,t){if(e.annotations&&e.annotations!==t.annotations){let t=e.annotations;return"function"==typeof t&&t.annotations&&(t=t.annotations),t}return e.decorators&&e.decorators!==t.decorators?Ro(e.decorators):e.hasOwnProperty(no)?e[no]:null}annotations(e){if(!Co(e))return[];const t=Vo(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)}_ownPropMetadata(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){let t=e.propMetadata;return"function"==typeof t&&t.propMetadata&&(t=t.propMetadata),t}if(e.propDecorators&&e.propDecorators!==t.propDecorators){const t=e.propDecorators,n={};return Object.keys(t).forEach((e=>{n[e]=Ro(t[e])})),n}return e.hasOwnProperty(oo)?e[oo]:null}propMetadata(e){if(!Co(e))return{};const t=Vo(e),n={};if(t!==Object){const e=this.propMetadata(t);Object.keys(e).forEach((t=>{n[t]=e[t]}))}const r=this._ownPropMetadata(e,t);return r&&Object.keys(r).forEach((e=>{const t=[];n.hasOwnProperty(e)&&t.push(...n[e]),t.push(...r[e]),n[e]=t})),n}ownPropMetadata(e){return Co(e)&&this._ownPropMetadata(e,Vo(e))||{}}hasLifecycleHook(e,t){return e instanceof _o&&t in e.prototype}guards(e){return{}}getter(e){return new Function("o","return o."+e+";")}setter(e){return new Function("o","v","return o."+e+" = v;")}method(e){return new Function("o","args",`if (!o.${e}) throw new Error('"${e}" is undefined');\n        return o.${e}.apply(o, args);`)}importUri(e){return"object"==typeof e&&e.filePath?e.filePath:`./${ae(e)}`}resourceUri(e){return`./${ae(e)}`}resolveIdentifier(e,t,n,r){return r}resolveEnum(e,t){return e[t]}}function Ro(e){return e?e.map((e=>new(0,e.type.annotationCls)(...e.args?e.args:[]))):[]}function Vo(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}const $o={},Fo=/\n/gm,Lo="__source",Ho=ie({provide:String,useValue:ie});let Bo;function Uo(e){const t=Bo;return Bo=e,t}function qo(e,t=We.Default){if(void 0===Bo){const e="undefined"==typeof ngDevMode||ngDevMode?"inject() must be called from an injection context":"";throw new pe(203,e)}return null===Bo?Ke(e,void 0,t):Bo.get(e,t&We.Optional?null:void 0,t)}function zo(e,t=We.Default){return(Qe||qo)(de(e),t)}function Wo(e){const t=ngDevMode?`This constructor is not compatible with Angular Dependency Injection because its dependency at index ${e} of the parameter list is invalid.\nThis can happen if the dependency type is a primitive like a string or if an ancestor of this class is missing an Angular decorator.\n\nPlease check that 1) the type for the parameter at index ${e} is correct and 2) the correct Angular decorators are defined for this class and its ancestors.`:"invalid";throw new Error(t)}const Qo=zo;function Zo(e){const t=[];for(let n=0;n<e.length;n++){const r=de(e[n]);if(Array.isArray(r)){if(0===r.length){const e="undefined"==typeof ngDevMode||ngDevMode?"Arguments array must have arguments.":"";throw new pe(900,e)}let e,n=We.Default;for(let t=0;t<r.length;t++){const o=r[t],i=o.__NG_DI_FLAG__;"number"==typeof i?-1===i?e=o.token:n|=i:e=o}t.push(zo(e,n))}else t.push(zo(r))}return t}function Ko(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const Go=Ko(ao("Inject",(e=>({token:e}))),-1),Jo=Ko(ao("Optional"),8),Yo=Ko(ao("Self"),2),Xo=Ko(ao("SkipSelf"),4),ei=Ko(ao("Host"),1);let ti=null;function ni(){return ti=ti||new jo}function ri(e){return oi(ni().parameters(e))}function oi(e){return e.map((e=>function(e){const t={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(e)&&e.length>0)for(let n=0;n<e.length;n++){const r=e[n];if(void 0===r)continue;const o=Object.getPrototypeOf(r);if(r instanceof Jo||"Optional"===o.ngMetadataName)t.optional=!0;else if(r instanceof Xo||"SkipSelf"===o.ngMetadataName)t.skipSelf=!0;else if(r instanceof Yo||"Self"===o.ngMetadataName)t.self=!0;else if(r instanceof ei||"Host"===o.ngMetadataName)t.host=!0;else if(r instanceof Go)t.token=r.token;else if(r instanceof co){if(void 0===r.attributeName)throw new Error("Attribute name must be defined.");t.attribute=r.attributeName}else t.token=r}else void 0===e||Array.isArray(e)&&0===e.length?t.token=null:t.token=e;return t}(e)))}function ii(e){const t=[],n=new Map;function r(t){let r=n.get(t);if(!r){const o=e(t);n.set(t,r=o.then(ui))}return r}return si.forEach(((e,n)=>{const o=[];e.templateUrl&&o.push(r(e.templateUrl).then((t=>{e.template=t})));const i=e.styleUrls,s=e.styles||(e.styles=[]),a=e.styles.length;i&&i.forEach(((t,n)=>{s.push(""),o.push(r(t).then((r=>{s[a+n]=r,i.splice(i.indexOf(t),1),0==i.length&&(e.styleUrls=void 0)})))}));const l=Promise.all(o).then((()=>function(e){ai.delete(e)}(n)));t.push(l)})),ci(),Promise.all(t).then((()=>{}))}let si=new Map;const ai=new Set;function li(e){return!!(e.templateUrl&&!e.hasOwnProperty("template")||e.styleUrls&&e.styleUrls.length)}function ci(){const e=si;return si=new Map,e}function ui(e){return"string"==typeof e?e:e.text()}let di,fi;function pi(){if(void 0===di&&(di=null,it.trustedTypes))try{di=it.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return di}function hi(e){return pi()?.createHTML(e)||e}function gi(){if(void 0===fi&&(fi=null,it.trustedTypes))try{fi=it.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return fi}function yi(e){return gi()?.createHTML(e)||e}function mi(e){return gi()?.createScript(e)||e}function vi(e){return gi()?.createScriptURL(e)||e}class bi{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class wi extends bi{getTypeName(){return"HTML"}}class _i extends bi{getTypeName(){return"Style"}}class Ci extends bi{getTypeName(){return"Script"}}class Mi extends bi{getTypeName(){return"URL"}}class Di extends bi{getTypeName(){return"ResourceURL"}}function xi(e){return e instanceof bi?e.changingThisBreaksApplicationSecurity:e}function Ii(e,t){const n=Ei(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Ei(e){return e instanceof bi&&e.getTypeName()||null}function Ti(e){return new wi(e)}function Oi(e){return new _i(e)}function Si(e){return new Ci(e)}function ki(e){return new Mi(e)}function Ai(e){return new Di(e)}function Ni(e){const t=new ji(e);return function(){try{return!!(new window.DOMParser).parseFromString(hi(""),"text/html")}catch{return!1}}()?new Pi(t):t}class Pi{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(hi(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class ji{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=hi(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=hi(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let n=t.length-1;0<n;n--){const r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Ri=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $i(e){return(e=String(e)).match(Ri)||e.match(Vi)?e:(("undefined"==typeof ngDevMode||ngDevMode)&&console.warn(`WARNING: sanitizing unsafe URL value ${e} (see https://g.co/ng/security#xss)`),"unsafe:"+e)}function Fi(e){return(e=String(e)).split(",").map((e=>$i(e.trim()))).join(", ")}function Li(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Hi(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Bi=Li("area,br,col,hr,img,wbr"),Ui=Li("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qi=Li("rp,rt"),zi=Hi(qi,Ui),Wi=Hi(Ui,Li("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qi=Hi(qi,Li("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zi=Hi(Bi,Wi,Qi,zi),Ki=Li("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Gi=Li("srcset"),Ji=Li("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yi=Li("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Xi=Hi(Ki,Gi,Ji,Yi),es=Li("script,style,template");class ts{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Zi.hasOwnProperty(t))return this.sanitizedSomething=!0,!es.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let e=0;e<n.length;e++){const t=n.item(e),r=t.name,o=r.toLowerCase();if(!Xi.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let i=t.value;Ki[o]&&(i=$i(i)),Gi[o]&&(i=Fi(i)),this.buf.push(" ",r,'="',os(i),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Zi.hasOwnProperty(t)&&!Bi.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(os(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const ns=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rs=/([^\#-~ |!])/g;function os(e){return e.replace(/&/g,"&amp;").replace(ns,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"})).replace(rs,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let is;function ss(e,t){let n=null;try{is=is||Ni(e);let r=t?String(t):"";n=is.getInertBodyElement(r);let o=5,i=r;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable");o--,r=i,i=n.innerHTML,n=is.getInertBodyElement(r)}while(r!==i);const s=new ts,a=s.sanitizeChildren(as(n)||n);return("undefined"==typeof ngDevMode||ngDevMode)&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see https://g.co/ng/security#xss"),hi(a)}finally{if(n){const e=as(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function as(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var ls;function cs(e){const t=ms();return t?yi(t.sanitize(ls.HTML,e)||""):Ii(e,"HTML")?yi(xi(e)):ss(gn(),ge(e))}function us(e){const t=ms();return t?t.sanitize(ls.STYLE,e)||"":Ii(e,"Style")?xi(e):ge(e)}function ds(e){const t=ms();return t?t.sanitize(ls.URL,e)||"":Ii(e,"URL")?xi(e):$i(ge(e))}function fs(e){const t=ms();if(t)return vi(t.sanitize(ls.RESOURCE_URL,e)||"");if(Ii(e,"ResourceURL"))return vi(xi(e));const n="undefined"==typeof ngDevMode||ngDevMode?"unsafe value used in a resource URL context (see https://g.co/ng/security#xss)":"";throw new pe(904,n)}function ps(e){const t=ms();if(t)return mi(t.sanitize(ls.SCRIPT,e)||"");if(Ii(e,"Script"))return mi(xi(e));const n="undefined"==typeof ngDevMode||ngDevMode?"unsafe value used in a script context":"";throw new pe(905,n)}function hs(e){if(ngDevMode&&(!Array.isArray(e)||!Array.isArray(e.raw)||1!==e.length))throw new Error(`Unexpected interpolation in trusted HTML constant: ${e.join("?")}`);return hi(e[0])}function gs(e){if(ngDevMode&&(!Array.isArray(e)||!Array.isArray(e.raw)||1!==e.length))throw new Error(`Unexpected interpolation in trusted URL constant: ${e.join("?")}`);return function(e){return pi()?.createScriptURL(e)||e}(e[0])}function ys(e,t,n){return function(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?fs:ds}(t,n)(e)}function ms(){const e=Pn();return e&&e[12]}function vs(e){let t=Cs(e);if(t){if(Array.isArray(t)){const r=t;let o,i,s;if((n=e)&&n.constructor&&n.constructor.ɵcmp){if(o=Is(r,e),-1==o)throw new Error("The provided component was not found in the application");i=e}else if(function(e){return e&&e.constructor&&e.constructor.ɵdir}(e)){if(o=function(e,t){let n=e[1].firstChild;for(;n;){const r=n.directiveStart,o=n.directiveEnd;for(let i=r;i<o;i++)if(e[i]===t)return n.index;n=xs(n)}return-1}(r,e),-1==o)throw new Error("The provided directive was not found in the application");s=Es(o,r,!1)}else if(o=Ds(r,e),-1==o)return null;const a=bn(r[o]),l=Cs(a),c=l&&!Array.isArray(l)?l:bs(r,o,a);if(i&&void 0===c.component&&(c.component=i,_s(c.component,c)),s&&void 0===c.directives){c.directives=s;for(let e=0;e<s.length;e++)_s(s[e],c)}_s(c.native,c),t=c}}else{const n=e;ngDevMode&&Ne(n);let r=n;for(;r=r.parentNode;){const e=Cs(r);if(e){let r;if(r=Array.isArray(e)?e:e.lView,!r)return null;const o=Ds(r,n);if(o>=0){const e=bn(r[o]),n=bs(r,o,e);_s(e,n),t=n;break}}}}var n;return t||null}function bs(e,t,n){return{lView:e,nodeIndex:t,native:n,component:void 0,directives:void 0,localRefs:void 0}}function ws(e){let t,n=Cs(e);if(Array.isArray(n)){const r=Is(n,e);t=Dn(r,n);const o=bs(n,r,t[0]);o.component=e,_s(e,o),_s(o.native,o)}else{const e=n;t=Dn(e.nodeIndex,e.lView)}return t}function _s(e,t){ngDevMode&&ke(e,"Target expected"),e.__ngContext__=t}function Cs(e){return ngDevMode&&ke(e,"Target expected"),e.__ngContext__||null}function Ms(e){const t=Cs(e);return t?Array.isArray(t)?t:t.lView:null}function Ds(e,t){const n=e[1];for(let r=St;r<n.bindingStartIndex;r++)if(bn(e[r])===t)return r;return-1}function xs(e){if(e.child)return e.child;if(e.next)return e.next;for(;e.parent&&!e.parent.next;)e=e.parent;return e.parent&&e.parent.next}function Is(e,t){const n=e[1].components;if(n)for(let r=0;r<n.length;r++){const o=n[r];if(Dn(o,e)[8]===t)return o}else if(Dn(St,e)[8]===t)return St;return-1}function Es(e,t,n){const r=t[1].data[e];let o=r.directiveStart;if(0==o)return lt;const i=r.directiveEnd;return!n&&2&r.flags&&o++,t.slice(o,i)}function Ts(e){return e.ngOriginalError}function Os(e,...t){e.error(...t)}!function(e){e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL"}(ls||(ls={}));class Ss{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=function(e){return e&&e.ngErrorLogger||Os}(e);n(this._console,"ERROR",e),t&&n(this._console,"ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ts(e);for(;t&&Ts(t);)t=Ts(t);return t||null}}const ks={name:"custom-elements"},As={name:"no-errors-schema"},Ns=/^>|^->|<!--|-->|--!>|<!-$/g,Ps=/(<|>)/;function js(e){return e.replace(Ns,(e=>e.replace(Ps,"​$1​")))}const Rs=/([A-Z])/g,Vs=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(it);function $s(e){return e.ownerDocument.defaultView}function Fs(e){return e.ownerDocument}function Ls(e){return e.ownerDocument.body}const Hs="�";function Bs(e){return e instanceof Function?e():e}function Us(e){throw new pe(-300,`Multiple components match node with tagname ${e.value}`)}function qs(e,t,n,r,o){const[i,s,...a]=r.split(Hs);let l=s,c=s;for(let r=0;r<a.length;r++){const i=t+r;l+=`${e[i]}${a[r]}`,c+=`${i===n?o:e[i]}${a[r]}`}return{propName:i,oldValue:l,newValue:c}}var zs;let Ws;function Qs(e,t){return Ws(e,t)}function Zs(e){ngDevMode&&Qt(e);const t=e[3];return Pt(t)?t[3]:t}function Ks(e){const t=function(e){ngDevMode&&ke(e,"component");let t=Nt(e)?e:Ms(e);for(;t&&!(512&t[2]);)t=Zs(t);return ngDevMode&&Qt(t),t}(e);return ngDevMode&&ke(t[8],"RootView has no context. Perhaps it is disconnected?"),t[8]}function Gs(e){return Ys(e[13])}function Js(e){return Ys(e[4])}function Ys(e){for(;null!==e&&!Pt(e);)e=e[4];return e}function Xs(e,t,n,r,o){if(null!=r){let i,s=!1;Pt(r)?i=r:Nt(r)&&(s=!0,ngDevMode&&ke(r[0],"HOST must be defined for a component LView"),r=r[0]);const a=bn(r);ngDevMode&&!mn(t)&&Ne(a),0===e&&null!==n?null==o?da(t,n,a):ua(t,n,a,o||null,!0):1===e&&null!==n?ua(t,n,a,o||null,!0):2===e?Ma(t,a,s):3===e&&(ngDevMode&&ngDevMode.rendererDestroyNode++,t.destroyNode(a)),null!=i&&function(e,t,n,r,o){ngDevMode&&zt(n);const i=n[7];i!==bn(n)&&Xs(t,e,r,i,o);for(let o=At;o<n.length;o++){const s=n[o];xa(s[1],s,e,t,r,i)}}(t,e,i,n,o)}}function ea(e,t){return ngDevMode&&ngDevMode.rendererCreateTextNode++,ngDevMode&&ngDevMode.rendererSetText++,mn(e)?e.createText(t):e.createTextNode(t)}function ta(e,t,n){ngDevMode&&ngDevMode.rendererSetText++,mn(e)?e.setValue(t,n):t.textContent=n}function na(e,t){return ngDevMode&&ngDevMode.rendererCreateComment++,e.createComment(js(t))}function ra(e,t,n){if(ngDevMode&&ngDevMode.rendererCreateElement++,mn(e))return e.createElement(t,n);{const r=null!==n?function(e){const t=e.toLowerCase();return t===dn?"http://www.w3.org/2000/svg":t===fn?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?e.createElement(t):e.createElementNS(r,t)}}function oa(e,t){ngDevMode&&zt(e),ngDevMode&&ke(e[9],"A projected view should belong to a non-empty projected views collection");const n=e[9],r=n.indexOf(t),o=t[3];ngDevMode&&zt(o),1024&t[2]&&(t[2]&=-1025,On(o,-1)),n.splice(r,1)}function ia(e,t){if(e.length<=At)return;const n=At+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&oa(i,r),t>0&&(e[n-1][4]=r[4]);const s=Io(e,At+t);xa(r[1],o=r,o[11],2,null,null),o[0]=null,o[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var o;return r}function sa(e,t){if(!(256&t[2])){const n=t[11];mn(n)&&n.destroyNode&&xa(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return aa(e[1],e);for(;t;){let n=null;if(Nt(t))n=t[13];else{ngDevMode&&zt(t);const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)Nt(t)&&aa(t[1],t),t=t[3];null===t&&(t=e),Nt(t)&&aa(t[1],t),n=t&&t[4]}t=n}}(t)}}function aa(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let e=0;e<n.length;e+=2){const r=t[n[e]];if(!(r instanceof Mr)){const t=n[e+1];if(Array.isArray(t))for(let e=0;e<t.length;e+=2){const n=r[t[e]],o=t[e+1];un(4,n,o);try{o.call(n)}finally{un(5,n,o)}}else{un(4,r,t);try{t.call(r)}finally{un(5,r,t)}}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let o=-1;if(null!==n)for(let e=0;e<n.length-1;e+=2)if("string"==typeof n[e]){const i=n[e+1],s="function"==typeof i?i(t):bn(t[i]),a=r[o=n[e+2]],l=n[e+3];"boolean"==typeof l?s.removeEventListener(n[e],a,l):l>=0?r[o=l]():r[o=-l].unsubscribe(),e+=2}else{const t=r[o=n[e+1]];n[e].call(t)}if(null!==r){for(let e=o+1;e<r.length;e++){const t=r[e];ngDevMode&&(s="Expecting instance cleanup function.","function"!=typeof(i=t)&&Ae(s,null===i?"null":typeof i,"function","===")),t()}t[7]=null}var i,s}(e,t),1===t[1].type&&mn(t[11])&&(ngDevMode&&ngDevMode.rendererDestroy++,t[11].destroy());const n=t[17];if(null!==n&&Pt(t[3])){n!==t[3]&&oa(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function la(e,t,n){return ca(e,t.parent,n)}function ca(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(ngDevMode&&xr(r,7),2&r.flags){ngDevMode&&Ft(r,n);const t=e.data[r.directiveStart].encapsulation;if(t===Xe.None||t===Xe.Emulated)return null}return _n(r,n)}function ua(e,t,n,r,o){ngDevMode&&ngDevMode.rendererInsertBefore++,mn(e)?e.insertBefore(t,n,r,o):t.insertBefore(n,r,o)}function da(e,t,n){ngDevMode&&ngDevMode.rendererAppendChild++,ngDevMode&&ke(t,"parent node must be defined"),mn(e)?e.appendChild(t,n):t.appendChild(n)}function fa(e,t,n,r,o){null!==r?ua(e,t,n,r,o):da(e,t,n)}function pa(e,t){return mn(e)?e.parentNode(t):t.parentNode}function ha(e,t,n){return ma(e,t,n)}function ga(e,t,n){return 40&e.type?_n(e,n):null}!function(e){e[e.Important=1]="Important",e[e.DashCase=2]="DashCase"}(zs||(zs={}));let ya,ma=ga;function va(e,t){ma=e,ya=t}function ba(e,t,n,r){const o=la(e,r,t),i=t[11],s=ha(r.parent||t[6],r,t);if(null!=o)if(Array.isArray(n))for(let e=0;e<n.length;e++)fa(i,o,n[e],s,!1);else fa(i,o,n,s,!1);void 0!==ya&&ya(i,r,t,n,o)}function wa(e,t){if(null!==t){ngDevMode&&xr(t,63);const n=t.type;if(3&n)return _n(t,e);if(4&n)return Ca(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return wa(e,n);{const n=e[t.index];return Pt(n)?Ca(-1,n):bn(n)}}if(32&n)return Qs(t,e)()||bn(e[t.index]);{const n=_a(e,t);if(null!==n){if(Array.isArray(n))return n[0];const t=Zs(e[16]);return ngDevMode&&Yt(t),wa(t,n)}return wa(e,t.next)}}return null}function _a(e,t){if(null!==t){const n=e[16][6],r=t.projection;return ngDevMode&&function(e,t){ke(e[16],"Component views should exist."),ke(e[16][6].projection,"Components with projection nodes (<ng-content>) must have projection slots defined.")}(e),n.projection[r]}return null}function Ca(e,t){const n=At+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return wa(e,r)}return t[7]}function Ma(e,t,n){ngDevMode&&ngDevMode.rendererRemoveNode++;const r=pa(e,t);r&&function(e,t,n,r){mn(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}function Da(e,t,n,r,o,i,s){for(;null!=n;){ngDevMode&&Ft(n,r),ngDevMode&&xr(n,63);const a=r[n.index],l=n.type;if(s&&0===t&&(a&&_s(bn(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Da(e,t,n.child,r,o,i,!1),Xs(t,e,o,a,i);else if(32&l){const s=Qs(n,r);let l;for(;l=s();)Xs(t,e,o,l,i);Xs(t,e,o,a,i)}else 16&l?Ia(e,t,r,n,o,i):(ngDevMode&&xr(n,7),Xs(t,e,o,a,i));n=s?n.projectionNext:n.next}}function xa(e,t,n,r,o,i){Da(n,r,e.firstChild,t,o,i,!1)}function Ia(e,t,n,r,o,i){const s=n[16],a=s[6];ngDevMode&&Me(typeof r.projection,"number","expecting projection index");const l=a.projection[r.projection];if(Array.isArray(l))for(let n=0;n<l.length;n++)Xs(t,e,o,l[n],i);else Da(e,t,l,s[3],o,i,!0)}function Ea(e,t,n){ngDevMode&&Ce(n,"'newValue' should be a string"),mn(e)?e.setAttribute(t,"style",n):t.style.cssText=n,ngDevMode&&ngDevMode.rendererSetStyle++}function Ta(e,t,n){ngDevMode&&Ce(n,"'newValue' should be a string"),mn(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n,ngDevMode&&ngDevMode.rendererSetClassName++}function Oa(e,t,n){ngDevMode&&De(t,"",'can not look for "" string.');let r=e.length;for(;;){const o=e.indexOf(t,n);if(-1===o)return o;if(0===o||e.charCodeAt(o-1)<=32){const n=t.length;if(o+n===r||e.charCodeAt(o+n)<=32)return o}n=o+1}}const Sa="ng-template";function ka(e,t,n){ngDevMode&&Me(t,t.toLowerCase(),"Class name expected to be lowercase.");let r=0;for(;r<e.length;){let o=e[r++];if(n&&"class"===o){if(o=e[r],-1!==Oa(o.toLowerCase(),t,0))return!0}else if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}}return!1}function Aa(e){return 4===e.type&&e.value!==Sa}function Na(e,t,n){return t===(4!==e.type||n?e.value:Sa)}function Pa(e,t,n){ngDevMode&&ke(t[0],"Selector should have a tag name");let r=4;const o=e.attrs||[],i=function(e){for(let t=0;t<e.length;t++)if(Er(e[t]))return t;return e.length}(o);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!Na(e,l,n)||""===l&&1===t.length){if(ja(r))return!1;s=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!ka(e.attrs,c,n)){if(ja(r))return!1;s=!0}continue}const u=Ra(8&r?"class":l,o,Aa(e),n);if(-1===u){if(ja(r))return!1;s=!0;continue}if(""!==c){let e;u>i?e="":(ngDevMode&&De(o[u],0,"We do not match directives on namespaced attributes"),e=o[u+1].toLowerCase());const t=8&r?e:null;if(t&&-1!==Oa(t,c,0)||2&r&&c!==e){if(ja(r))return!1;s=!0}}}}else{if(!s&&!ja(r)&&!ja(l))return!1;if(s&&ja(l))continue;s=!1,r=l|1&r}}return ja(r)||s}function ja(e){return 0==(1&e)}function Ra(e,t,n,r){if(null===t)return-1;let o=0;if(r||!n){let n=!1;for(;o<t.length;){const r=t[o];if(r===e)return o;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++o];for(;"string"==typeof e;)e=t[++o];continue}if(4===r)break;if(0===r){o+=4;continue}}o+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Va(e,t,n=!1){for(let r=0;r<t.length;r++)if(Pa(e,t[r],n))return!0;return!1}function $a(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function Fa(e,t){return e?":not("+t.trim()+")":t}function La(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const t=e[++n];o+="["+s+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""===o||ja(s)||(t+=Fa(i,o),o=""),r=s,i=i||!ja(r);n++}return""!==o&&(t+=Fa(i,o)),t}const Ha="undefined"==typeof ngDevMode||ngDevMode?{__brand__:"NO_CHANGE"}:{};function Ba(e){ngDevMode&&Oe(e,0,"Can only advance forward"),Ua(jn(),Pn(),ur()+e,Un())}function Ua(e,t,n,r){if(ngDevMode&&function(e,t){const n=e[1];Jt(St,n.bindingStartIndex,t)}(t,n),!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&mr(t,r,n)}else{const r=e.preOrderHooks;null!==r&&vr(t,r,0,n)}dr(n)}function qa(e){if(!ngDevMode)throw new Error("Looks like we are in 'prod mode', but we are creating a named Array type, which is wrong! Check your code");try{return function(...e){if("undefined"==typeof ngDevMode)throw new Error("newTrustedFunctionForDev should never be called in production");if(!it.trustedTypes)return new Function(...e);const t=`(function anonymous(${e.slice(0,-1).join(",")}\n) { ${e[e.length-1]}\n})`,n=it.eval((r=t,pi()?.createScript(r)||r));var r;return void 0===n.bind?new Function(...e):(n.toString=()=>t,n.bind(it))}("Array",`return class ${e} extends Array{}`)(Array)}catch(e){return Array}}function za(e,t){return ngDevMode&&_e(e,0,32767),ngDevMode&&_e(t,0,32767),e<<17|t<<2}function Wa(e){return ngDevMode&&we(e,"expected number"),e>>17&32767}function Qa(e){return ngDevMode&&we(e,"expected number"),2==(2&e)}function Za(e){return ngDevMode&&we(e,"expected number"),2|e}function Ka(e){return ngDevMode&&we(e,"expected number"),(131068&e)>>2}function Ga(e,t){return ngDevMode&&we(e,"expected number"),ngDevMode&&_e(t,0,32767),-131069&e|t<<2}function Ja(e){return ngDevMode&&we(e,"expected number"),1==(1&e)}function Ya(e){return ngDevMode&&we(e,"expected number"),1|e}function Xa(e,t){if(!ngDevMode)throw new Error("This method should be guarded with `ngDevMode` so that it can be tree shaken in production!");Object.defineProperty(e,"debug",{value:t,enumerable:!1})}function el(e,t){if(!ngDevMode)throw new Error("This method should be guarded with `ngDevMode` so that it can be tree shaken in production!");Object.defineProperty(e,"debug",{get:t,enumerable:!1})}let tl,nl,rl,ol,il;class sl extends Array{}class al extends Array{}class ll extends Array{}function cl(e){if(null==e)return"";const t=e.lastIndexOf("_Template");return"_"+(-1===t?e:e.substr(0,t))}function ul(e,t){const n=e.tView_.data,r=[],o=t?e.classBindings:e.styleBindings,i=Wa(o),s=Ka(o);let a=0!==s,l=a?s:i;for(;0!==l;){const e=n[l],t=n[l+1];r.unshift({key:e,index:l,isTemplate:a,prevDuplicate:Qa(t),nextDuplicate:Ja(t),nextIndex:Ka(t),prevIndex:Wa(t)}),l===i&&(a=!1),l=Wa(t)}return r.push((t?e.residualClasses:e.residualStyles)||null),r}function dl(e,t){for(;e;)t.push(e.template_),e=e.next}class fl extends Array{}let pl;class hl extends Array{}class gl extends Array{}class yl extends Array{}class ml extends Array{}class vl extends Array{}class bl extends Array{}class wl extends Array{}function _l(e){if(e){const t=e.debug;return ke(t,"Object does not have a debug representation."),t}return e}function Cl(e,t=!1){const n=bn(e);if(n)switch(n.nodeType){case Node.TEXT_NODE:return n.textContent;case Node.COMMENT_NODE:return`\x3c!--${n.textContent}--\x3e`;case Node.ELEMENT_NODE:const e=n.outerHTML;if(t)return e;{const t=">"+n.innerHTML+"<";return e.split(t)[0]+">"}}return null}class Ml{constructor(e){this._raw_lView=e}get flags(){const e=this._raw_lView[2];return{__raw__flags__:e,initPhaseState:3&e,creationMode:!!(4&e),firstViewPass:!!(8&e),checkAlways:!!(16&e),dirty:!!(64&e),attached:!!(128&e),destroyed:!!(256&e),isRoot:!!(512&e),indexWithinInitPhase:e>>11}}get parent(){return _l(this._raw_lView[3])}get hostHTML(){return Cl(this._raw_lView[0],!0)}get html(){return(this.nodes||[]).map(Dl).join("")}get context(){return this._raw_lView[8]}get nodes(){const e=this._raw_lView;return Il(e[1].firstChild,e)}get template(){return this.tView.template_}get tView(){return this._raw_lView[1]}get cleanup(){return this._raw_lView[7]}get injector(){return this._raw_lView[9]}get rendererFactory(){return this._raw_lView[10]}get renderer(){return this._raw_lView[11]}get sanitizer(){return this._raw_lView[12]}get childHead(){return _l(this._raw_lView[13])}get next(){return _l(this._raw_lView[4])}get childTail(){return _l(this._raw_lView[14])}get declarationView(){return _l(this._raw_lView[15])}get queries(){return this._raw_lView[19]}get tHost(){return this._raw_lView[6]}get decls(){return xl(this.tView,this._raw_lView,St,this.tView.bindingStartIndex)}get vars(){return xl(this.tView,this._raw_lView,this.tView.bindingStartIndex,this.tView.expandoStartIndex)}get expando(){return xl(this.tView,this._raw_lView,this.tView.expandoStartIndex,this._raw_lView.length)}get childViews(){const e=[];let t=this.childHead;for(;t;)e.push(t),t=t.next;return e}}function Dl(e){if("ElementContainer"===e.type)return(e.children||[]).map(Dl).join("");if("IcuContainer"===e.type)throw new Error("Not implemented");return Cl(e.native,!0)||""}function xl(e,t,n,r){let o=[];for(let i=n;i<r;i++)o.push({index:i,t:e.data[i],l:t[i]});return{start:n,end:r,length:r-n,content:o}}function Il(e,t){if(e){const n=[];let r=e;for(;r;)n.push(El(r,t)),r=r.next;return n}return[]}function El(e,t){const n=bn(t[e.index]),r=[],o=[],i=t[1];for(let n=e.directiveStart;n<e.directiveEnd;n++){const e=i.data[n];r.push(e.type),o.push(t[n])}return{html:Cl(n),type:Dr(e.type),tNode:e,native:n,children:Il(e.child,t),factories:r,instances:o,injector:Tl(e,i,t),get injectorResolutionPath(){return e.debugNodeInjectorPath(t)}}}function Tl(e,t,n){const r=[];for(let n=e.providerIndexStart_;n<e.providerIndexEnd_;n++)r.push(t.data[n]);const o=[];for(let n=e.providerIndexEnd_;n<e.directiveEnd;n++)o.push(t.data[n]);return{bloom:Sl(n,e.injectorIndex),cumulativeBloom:Sl(t.data,e.injectorIndex),providers:o,viewProviders:r,parentInjectorIndex:n[e.providerIndexStart_-1]}}function Ol(e,t){const n=e[t];if("number"!=typeof n)return"????????";const r="00000000"+n.toString(2);return r.substring(r.length-8)}function Sl(e,t){return t<0?"NO_NODE_INJECTOR":`${Ol(e,t+7)}_${Ol(e,t+6)}_${Ol(e,t+5)}_${Ol(e,t+4)}_${Ol(e,t+3)}_${Ol(e,t+2)}_${Ol(e,t+1)}_${Ol(e,t+0)}`}class kl{constructor(e){this._raw_lContainer=e}get hasTransplantedViews(){return this._raw_lContainer[2]}get views(){return this._raw_lContainer.slice(At).map(_l)}get parent(){return _l(this._raw_lContainer[3])}get movedViews(){return this._raw_lContainer[9]}get host(){return this._raw_lContainer[0]}get native(){return this._raw_lContainer[7]}get next(){return _l(this._raw_lContainer[4])}}const Al=Promise.resolve(null);function Nl(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r],i=n[r+1];if(-1!==i){const n=e.data[i];ngDevMode&&ke(n,"DirectiveDef not found."),ngDevMode&&ke(n.contentQueries,"contentQueries function should be defined"),tr(o),n.contentQueries(2,t[i],i)}}}function Pl(e,t,n,r,o,i,s,a,l,c){const u=ngDevMode?function(e){return function(e,t){switch(e){case 0:return void 0===rl&&(rl=new sl),rl;case 1:if(!ngDevMode||!ngDevMode.namedConstructors)return void 0===ol&&(ol=new al),ol;void 0===tl&&(tl=new Map);let e=tl.get(t);return void 0===e&&(e=new(qa("LComponentView"+cl(t))),tl.set(t,e)),e;case 2:if(!ngDevMode||!ngDevMode.namedConstructors)return void 0===il&&(il=new ll),il;void 0===nl&&(nl=new Map);let n=nl.get(t);return void 0===n&&(n=new(qa("LEmbeddedView"+cl(t))),nl.set(t,n)),n}}(e.type,e.template&&e.template.name).concat(e.blueprint)}(t):t.blueprint.slice();return u[0]=o,u[2]=140|r,Tn(u),ngDevMode&&t.declTNode&&e&&Ft(t.declTNode,e),u[3]=u[15]=e,u[8]=n,u[10]=s||e&&e[10],ngDevMode&&ke(u[10],"RendererFactory is required"),u[11]=a||e&&e[11],ngDevMode&&ke(u[11],"Renderer is required"),u[12]=l||e&&e[12]||null,u[9]=c||e&&e[9]||null,u[6]=i,ngDevMode&&Me(2!=t.type||null!==e,!0,"Embedded views must have parentLView"),u[16]=2==t.type?e[16]:u,ngDevMode&&function(e){Xa(e,new Ml(e))}(u),u}function jl(e,t,n,r,o){ngDevMode&&0!==t&&Se(t,St,"TNodes can't be in the LView header."),ngDevMode&&function(e){2!==e&&1!==e&&4!==e&&8!==e&&32!==e&&16!==e&&64!==e&&Ae(`Expected TNodeType to have only a single type selected, but got ${Dr(e)}.`)}(n);let i=e.data[t];if(null===i)i=Rl(e,t,n,r,o),Sn.lFrame.inI18n&&(i.flags|=64);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=Fn();i.injectorIndex=null===s?-1:s.injectorIndex,ngDevMode&&Lt(i,e),ngDevMode&&Me(t,i.index,"Expecting same index")}return Ln(i,!0),i}function Rl(e,t,n,r,o){const i=$n(),s=Hn(),a=s?i:i&&i.parent,l=e.data[t]=function(e,t,n,r,o,i){ngDevMode&&0!==r&&Se(r,St,"TNodes can't be in the LView header."),ngDevMode&&Ie(i,void 0,"'undefined' is not valid value for 'attrs'"),ngDevMode&&ngDevMode.tNode++,ngDevMode&&t&&Lt(t,e);let s=t?t.injectorIndex:-1;const a=ngDevMode?new class{constructor(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m,v,b,w,_,C,M,D,x,I,E,T,O,S,k){this.tView_=e,this.type=t,this.index=n,this.insertBeforeIndex=r,this.injectorIndex=o,this.directiveStart=i,this.directiveEnd=s,this.directiveStylingLast=a,this.propertyBindings=l,this.flags=c,this.providerIndexes=u,this.value=d,this.attrs=f,this.mergedAttrs=p,this.localNames=h,this.initialInputs=g,this.inputs=y,this.outputs=m,this.tViews=v,this.next=b,this.projectionNext=w,this.child=_,this.parent=C,this.projection=M,this.styles=D,this.stylesWithoutHost=x,this.residualStyles=I,this.classes=E,this.classesWithoutHost=T,this.residualClasses=O,this.classBindings=S,this.styleBindings=k}debugNodeInjectorPath(e){const t=[];let n=Fr(this,e);if(-1===n){const t=Lr(this,e);t!==Cr&&(n=Ar(t),e=Nr(t,e))}for(;-1!==n;){ngDevMode&&Xt(e,n);const r=e[1].data[n+8];t.push(El(r,e));const o=e[n+8];o===Cr?n=-1:(n=Ar(o),e=Nr(o,e))}return t}get type_(){return Dr(this.type)||`TNodeType.?${this.type}?`}get flags_(){const e=[];return 16&this.flags&&e.push("TNodeFlags.hasClassInput"),8&this.flags&&e.push("TNodeFlags.hasContentQuery"),32&this.flags&&e.push("TNodeFlags.hasStyleInput"),128&this.flags&&e.push("TNodeFlags.hasHostBindings"),2&this.flags&&e.push("TNodeFlags.isComponentHost"),1&this.flags&&e.push("TNodeFlags.isDirectiveHost"),64&this.flags&&e.push("TNodeFlags.isDetached"),4&this.flags&&e.push("TNodeFlags.isProjected"),e.join("|")}get template_(){if(1&this.type)return this.value;const e=[],t="string"==typeof this.value&&this.value||this.type_;if(e.push("<",t),this.flags&&e.push(" ",this.flags_),this.attrs)for(let t=0;t<this.attrs.length;){const n=this.attrs[t++];if("number"==typeof n)break;const r=this.attrs[t++];e.push(" ",n,'="',r,'"')}return e.push(">"),dl(this.child,e),e.push("</",t,">"),e.join("")}get styleBindings_(){return ul(this,!1)}get classBindings_(){return ul(this,!0)}get providerIndexStart_(){return 1048575&this.providerIndexes}get providerIndexEnd_(){return this.providerIndexStart_+(this.providerIndexes>>>20)}}(e,n,r,null,s,-1,-1,-1,null,0,0,o,i,null,null,void 0,null,null,null,null,null,null,t,null,null,null,void 0,null,null,void 0,0,0):{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0};return ngDevMode&&Object.seal(a),a}(e,a,n,t,r,o);return null===e.firstChild&&(e.firstChild=l),null!==i&&(s?null==i.child&&null!==l.parent&&(i.child=l):null===i.next&&(i.next=l)),l}function Vl(e,t,n,r){if(0===n)return-1;ngDevMode&&(Zt(e),xe(e,t[1],"`LView` must be associated with `TView`!"),Me(e.data.length,t.length,"Expecting LView to be same size as TView"),Me(e.data.length,e.blueprint.length,"Expecting Blueprint to be same size as TView"),Kt(e));const o=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function $l(e,t,n){ngDevMode&&Me(xn(t),!0,"Should be run in creation mode"),or(t);try{const r=e.viewQuery;null!==r&&Cc(1,r,n);const o=e.template;null!==o&&Hl(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Nl(e,t),e.staticViewQueries&&Cc(2,e.viewQuery,n);const i=e.components;null!==i&&function(e,t){for(let n=0;n<t.length;n++)yc(e,t[n])}(t,i)}catch(t){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),t}finally{t[2]&=-5,cr()}}function Fl(e,t,n,r){ngDevMode&&Me(xn(t),!1,"Should be run in update mode");const o=t[2];if(256==(256&o))return;or(t);const i=Un();try{Tn(t),Qn(e.bindingStartIndex),null!==n&&Hl(e,t,n,2,r);const s=3==(3&o);if(!i)if(s){const n=e.preOrderCheckHooks;null!==n&&mr(t,n,null)}else{const n=e.preOrderHooks;null!==n&&vr(t,n,0,null),br(t,0)}if(function(e){for(let t=Gs(e);null!==t;t=Js(t)){if(!t[2])continue;const e=t[9];ngDevMode&&ke(e,"Transplanted View flags set but missing MOVED_VIEWS");for(let t=0;t<e.length;t++){const n=e[t],r=n[3];ngDevMode&&zt(r),0==(1024&n[2])&&On(r,1),n[2]|=1024}}}(t),function(e){for(let t=Gs(e);null!==t;t=Js(t))for(let e=At;e<t.length;e++){const n=t[e],r=n[1];ngDevMode&&ke(r,"TView must be allocated"),In(n)&&Fl(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Nl(e,t),!i)if(s){const n=e.contentCheckHooks;null!==n&&mr(t,n)}else{const n=e.contentHooks;null!==n&&vr(t,n,1),br(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)dr(~r);else{const o=r,i=n[++e],s=n[++e];Jn(i,o),s(2,t[o])}}}finally{dr(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)hc(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&Cc(2,l,r),!i)if(s){const n=e.viewCheckHooks;null!==n&&mr(t,n)}else{const n=e.viewHooks;null!==n&&vr(t,n,2),br(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),i||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,On(t[3],-1))}finally{cr()}}function Ll(e,t,n,r){const o=t[10],i=!Un(),s=xn(t);try{i&&!s&&o.begin&&o.begin(),s&&$l(e,t,r),Fl(e,t,n,r)}finally{i&&!s&&o.end&&o.end()}}function Hl(e,t,n,r,o){const i=ur(),s=2&r;try{dr(-1),s&&t.length>St&&Ua(e,t,St,Un()),un(s?2:0,o),n(r,o)}finally{dr(i),un(s?3:1,o)}}function Bl(e,t,n){if(jt(t)){const r=t.directiveStart,o=t.directiveEnd;for(let t=r;t<o;t++){const r=e.data[t];r.contentQueries&&r.contentQueries(1,n[t],t)}}}function Ul(e,t,n){kn()&&(function(e,t,n,r){const o=n.directiveStart,i=n.directiveEnd;e.firstCreatePass||Vr(n,t),_s(r,t);const s=n.initialInputs;for(let r=o;r<i;r++){const i=e.data[r],a=$t(i);a&&(ngDevMode&&xr(n,3),ac(t,n,i));const l=Kr(t,e,r,n);_s(l,t),null!==s&&uc(t,r-o,l,i,n,s),a&&(Dn(n.index,t)[8]=l)}}(e,t,n,_n(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,o=n.directiveEnd,i=(e.firstCreatePass,n.index),s=Sn.lFrame.currentDirectiveIndex;try{dr(i);for(let n=r;n<o;n++){const r=e.data[n],o=t[n];Yn(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||nc(r,o)}}finally{dr(-1),Yn(s)}}(e,t,n))}function ql(e,t,n=_n){const r=t.localNames;if(null!==r){let o=t.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?n(t,e):e[s];e[o++]=a}}}function zl(e){const t=e.tView;if(null===t||t.incompleteFirstPass){const t=null;return e.tView=Wl(1,t,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts)}return t}function Wl(e,t,n,r,o,i,s,a,l,c){ngDevMode&&ngDevMode.tView++;const u=St+r,d=u+o,f=function(e,t){const n=ngDevMode?new hl:[];for(let r=0;r<t;r++)n.push(r<e?null:Ha);return n}(u,d),p="function"==typeof c?c():c,h=f[1]=ngDevMode?new class{constructor(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m,v,b,w,_,C,M,D,x,I,E,T,O,S,k){this.type=e,this.blueprint=t,this.template=n,this.queries=r,this.viewQuery=o,this.declTNode=i,this.data=s,this.bindingStartIndex=a,this.expandoStartIndex=l,this.hostBindingOpCodes=c,this.firstCreatePass=u,this.firstUpdatePass=d,this.staticViewQueries=f,this.staticContentQueries=p,this.preOrderHooks=h,this.preOrderCheckHooks=g,this.contentHooks=y,this.contentCheckHooks=m,this.viewHooks=v,this.viewCheckHooks=b,this.destroyHooks=w,this.cleanup=_,this.contentQueries=C,this.components=M,this.directiveRegistry=D,this.pipeRegistry=x,this.firstChild=I,this.schemas=E,this.consts=T,this.incompleteFirstPass=O,this._decls=S,this._vars=k}get template_(){const e=[];return dl(this.firstChild,e),e.join("")}get type_(){return kt[this.type]||`TViewType.?${this.type}?`}}(e,f,n,null,a,t,(g=f,void 0===pl&&(pl=new fl),pl.concat(g)).fill(null,u),u,d,null,!0,!0,!1,!1,null,null,null,null,null,null,null,null,null,null,"function"==typeof i?i():i,"function"==typeof s?s():s,null,l,p,!1,r,o):{type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1};var g;return ngDevMode&&Object.seal(h),h}function Ql(e,t,n){if(mn(e)){const r=n===Xe.ShadowDom;return e.selectRootElement(t,r)}let r="string"==typeof t?e.querySelector(t):t;return ngDevMode&&function(e,t){if(!e)throw new Error(`Renderer: ${"string"==typeof t?"Host node with selector not found:":"Host node is required:"} [${ye(t)}]`)}(r,t),r.textContent="",r}function Zl(e,t,n,r){const o=xc(t);null===n?(ngDevMode&&Object.freeze(Ic(e)),o.push(r)):(o.push(n),e.firstCreatePass&&Ic(e).push(r,o.length-1))}function Kl(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){n=null===n?{}:n;const o=e[r];n.hasOwnProperty(r)?n[r].push(t,o):n[r]=[t,o]}return n}function Gl(e,t,n,r,o,i,s,a){ngDevMode&&Ie(o,Ha,"Incoming value should never be NO_CHANGE.");const l=_n(t,n);let c,u=t.inputs;if(!a&&null!=u&&(c=u[r]))Oc(e,n,c,r,o),Rt(t)&&function(e,t){ngDevMode&&Qt(e);const n=Dn(t,e);16&n[2]||(n[2]|=64)}(n,t.index),ngDevMode&&function(e,t,n,r,o){if(7&n)for(let i=0;i<r.length;i+=2)Jl(e,t,n,r[i+1],o)}(n,l,t.type,c,o);else if(3&t.type){if(r="class"===(d=r)?"className":"for"===d?"htmlFor":"formaction"===d?"formAction":"innerHtml"===d?"innerHTML":"readonly"===d?"readOnly":"tabindex"===d?"tabIndex":d,ngDevMode){if(function(e){if(e.toLowerCase().startsWith("on")){const t=`Binding to event property '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...\nIf '${e}' is a directive input, make sure the directive is imported by the current module.`;throw new pe(306,t)}}(r),!function(e,t,n,r){return null===e.schemas||(!!(Yl(e,r.value)||n in t||Tr(n))||("undefined"==typeof Node||null===Node||!(t instanceof Node)))}(e,l,r,t))return void Xl(r,t);ngDevMode.rendererSetProperty++}o=null!=s?s(o,t.value||"",r):o,mn(i)?i.setProperty(l,r,o):Tr(r)||(l.setProperty?l.setProperty(r,o):l[r]=o)}else 12&t.type&&ngDevMode&&!Yl(e,t.value)&&Xl(r,t);var d}function Jl(e,t,n,r,o){const i=e[11];var s;s=r.replace(/[$@]/g,"_"),r=`ng-reflect-${s.replace(Rs,((...e)=>"-"+e[1].toLowerCase()))}`;const a=function(e){try{return null!=e?e.toString().slice(0,30):e}catch(e){return"[ERROR] Exception while trying to serialize the value"}}(o);if(3&n)null==o?mn(i)?i.removeAttribute(t,r):t.removeAttribute(r):mn(i)?i.setAttribute(t,r,a):t.setAttribute(r,a);else{const e=js(`bindings=${JSON.stringify({[r]:a},null,2)}`);mn(i)?i.setValue(t,e):t.textContent=e}}function Yl(e,t){const n=e.schemas;if(null!==n)for(let e=0;e<n.length;e++){const r=n[e];if(r===As||r===ks&&t&&t.indexOf("-")>-1)return!0}return!1}function Xl(e,t){let n=`Can't bind to '${e}' since it isn't a known property of '${t.value}'.`;console.error(he(303,n))}function ec(e,t,n,r){ngDevMode&&Zt(e);let o=!1;if(kn()){const i=function(e,t,n){ngDevMode&&Zt(e),ngDevMode&&xr(n,15);const r=e.directiveRegistry;let o=null;if(r)for(let i=0;i<r.length;i++){const s=r[i];Va(n,s.selectors,!1)&&(o||(o=ngDevMode?new gl:[]),Hr(Vr(n,t),e,s.type),$t(s)?(ngDevMode&&(xr(n,2,`"${n.value}" tags cannot be used as component hosts. Please use a different tag to activate the ${ae(s.type)} component.`),2&n.flags&&Us(n)),rc(e,n),o.unshift(s)):o.push(s))}return o}(e,t,n),s=null===r?null:{"":-1};if(null!==i){o=!0,ic(n,e.data.length,i.length);for(let e=0;e<i.length;e++){const t=i[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,l=Vl(e,t,i.length,null);ngDevMode&&xe(l,n.directiveStart,"TNode.directiveStart should point to just allocated space");for(let o=0;o<i.length;o++){const c=i[o];n.mergedAttrs=Or(n.mergedAttrs,c.hostAttrs),sc(e,n,t,l,c),oc(l,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(e,t){ngDevMode&&Zt(e);const n=t.directiveStart,r=t.directiveEnd,o=e.data,i=t.attrs,s=ngDevMode?new vl:[];let a=null,l=null;for(let e=n;e<r;e++){const n=o[e],r=n.inputs,c=null===i||Aa(t)?null:dc(r,i);s.push(c),a=Kl(r,e,a),l=Kl(n.outputs,e,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=l}(e,n)}s&&function(e,t,n){if(t){const r=e.localNames=ngDevMode?new ml:[];for(let e=0;e<t.length;e+=2){const o=n[t[e+1]];if(null==o)throw new pe(-301,ngDevMode&&`Export of name '${t[e+1]}' not found!`);r.push(t[e],o)}}}(n,r,s)}return n.mergedAttrs=Or(n.mergedAttrs,n.attrs),o}function tc(e,t,n,r,o,i){ngDevMode&&Zt(e);const s=i.hostBindings;if(s){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const i=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=i&&n.push(i),n.push(r,o,s)}}function nc(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function rc(e,t){ngDevMode&&Zt(e),t.flags|=2,(e.components||(e.components=ngDevMode?new yl:[])).push(t.index)}function oc(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;$t(t)&&(n[""]=e)}}function ic(e,t,n){ngDevMode&&De(n,e.directiveEnd-e.directiveStart,"Reached the max number of directives"),e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function sc(e,t,n,r,o){ngDevMode&&Se(r,St,"Must be in Expando section"),e.data[r]=o;const i=o.factory||(o.factory=en(o.type,!0)),s=new Mr(i,$t(o),null);e.blueprint[r]=s,n[r]=s,tc(e,t,0,r,Vl(e,n,o.hostVars,Ha),o)}function ac(e,t,n){const r=_n(t,e),o=zl(n),i=e[10],s=mc(e,Pl(e,o,null,n.onPush?64:16,r,t,i,i.createRenderer(r,n),null,null));e[t.index]=s}function lc(e,t,n,r,o,i){ngDevMode&&(Ie(r,Ha,"Incoming value should never be NO_CHANGE."),function(e){if(e.toLowerCase().startsWith("on")){const t=`Binding to event attribute '${e}' is disallowed for security reasons, please use (${e.slice(2)})=...`;throw new pe(306,t)}}(n),xr(e,2,`Attempted to set attribute \`${n}\` on a container node. Host bindings are not valid on ng-container or ng-template.`));const s=_n(e,t);cc(t[11],s,i,e.value,n,r,o)}function cc(e,t,n,r,o,i,s){if(null==i)ngDevMode&&ngDevMode.rendererRemoveAttribute++,mn(e)?e.removeAttribute(t,o,n):t.removeAttribute(o);else{ngDevMode&&ngDevMode.rendererSetAttribute++;const a=null==s?ge(i):s(i,r||"",o);mn(e)?e.setAttribute(t,o,a,n):n?t.setAttributeNS(n,o,a):t.setAttribute(o,a)}}function uc(e,t,n,r,o,i){const s=i[t];if(null!==s){const t=r.setInput;for(let i=0;i<s.length;){const a=s[i++],l=s[i++],c=s[i++];null!==t?r.setInput(n,c,a,l):n[l]=c,ngDevMode&&Jl(e,_n(o,e),o.type,l,c)}}}function dc(e,t){let n=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;e.hasOwnProperty(o)&&(null===n&&(n=[]),n.push(o,e[o],t[r+1])),r+=2}else r+=2;else r+=4}return n}const fc=class extends Array{};function pc(e,t,n,r){ngDevMode&&Qt(t),ngDevMode&&!mn(t[11])&&Ne(n);const o=new(ngDevMode?fc:Array)(e,!0,!1,t,null,0,r,n,null,null);return ngDevMode&&Me(o.length,At,"Should allocate correct number of slots for LContainer header."),ngDevMode&&function(e){Xa(e,new kl(e))}(o),o}function hc(e,t){ngDevMode&&Me(xn(e),!1,"Should be run in update mode");const n=Dn(t,e);if(In(n)){const e=n[1];80&n[2]?Fl(e,n,e.template,n[8]):n[5]>0&&gc(n)}}function gc(e){for(let t=Gs(e);null!==t;t=Js(t))for(let e=At;e<t.length;e++){const n=t[e];if(1024&n[2]){const e=n[1];ngDevMode&&ke(e,"TView must be allocated"),Fl(e,n,e.template,n[8])}else n[5]>0&&gc(n)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Dn(t[n],e);In(r)&&r[5]>0&&gc(r)}}function yc(e,t){ngDevMode&&Me(xn(e),!0,"Should be run in creation mode");const n=Dn(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),$l(r,n,n[8])}function mc(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function vc(e){for(;e;){e[2]|=64;const t=Zs(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function bc(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Ms(n),o=r[1];Ll(o,r,o.template,n)}}function wc(e,t,n){const r=t[10];r.begin&&r.begin();try{Fl(e,t,e.template,n)}catch(e){throw Tc(t,e),e}finally{r.end&&r.end()}}function _c(e){bc(e[8])}function Cc(e,t,n){ngDevMode&&ke(t,"View queries function to execute must be defined."),tr(0),t(e,n)}function Mc(e,t,n,r,...o){if(null===e[r]&&(null==t.inputs||!t.inputs[n])){(t.propertyBindings||(t.propertyBindings=[])).push(r);let i=n;o.length>0&&(i+=Hs+o.join(Hs)),e[r]=i}}const Dc=Al;function xc(e){return e[7]||(e[7]=ngDevMode?new bl:[])}function Ic(e){return e.cleanup||(e.cleanup=ngDevMode?new wl:[])}function Ec(e,t,n){return(null===e||$t(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}function Tc(e,t){const n=e[9],r=n?n.get(Ss,null):null;r&&r.handleError(t)}function Oc(e,t,n,r,o){for(let i=0;i<n.length;){const s=n[i++],a=n[i++],l=t[s];ngDevMode&&Pe(t,s);const c=e.data[s];null!==c.setInput?c.setInput(l,o,r,a):l[a]=o}}function Sc(e,t,n){ngDevMode&&Ce(n,"Value should be a string"),ngDevMode&&Ie(n,Ha,"value should not be NO_CHANGE"),ngDevMode&&Pe(e,t);const r=wn(t,e);ngDevMode&&ke(r,"native element should exist"),ta(e[11],r,n)}function kc(e,t,n){ngDevMode&&Zt(jn(),"Expecting to be called in first template pass only");let r=n?e.styles:null,o=n?e.classes:null,i=0;if(null!==t)for(let e=0;e<t.length;e++){const n=t[e];"number"==typeof n?i=n:1==i?o=le(o,n):2==i&&(r=le(r,n+": "+t[++e]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}function Ac(e){const t=ws(e);wc(t[1],t,e)}function Nc(e){ngDevMode&&ke(e,"component");const t=vc(ws(e));ngDevMode&&ke(t[8],"rootContext should be defined"),function(e,t){if(0===e.flags&&e.clean==Al){let t;e.flags|=1,e.clean=new Promise((e=>t=e)),e.scheduler((()=>{if(1&e.flags&&(e.flags&=-2,bc(e)),2&e.flags){e.flags&=-3;const t=e.playerHandler;t&&t.flushPlayers()}e.clean=Al,t(null)}))}}(t[8])}const Pc=new uo("INJECTOR",-1);class jc{get(e,t=$o){if(t===$o){const t=new Error(`NullInjectorError: No provider for ${ae(e)}!`);throw t.name="NullInjectorError",t}return t}}const Rc=new uo("Set Injector scope."),Vc={},$c={};let Fc;function Lc(){return void 0===Fc&&(Fc=new jc),Fc}function Hc(e,t=null,n=null,r){const o=Bc(e,t,n,r);return o._resolveInjectorDefTypes(),o}function Bc(e,t=null,n=null,r){return new Uc(e,n,t||Lc(),r)}class Uc{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];t&&Do(t,(n=>this.processProvider(n,e,t))),Do([e],(e=>this.processInjectorType(e,[],o))),this.records.set(Pc,Wc(void 0,this));const i=this.records.get(Rc);this.scope=null!=i?i.value:null,this.source=r||("object"==typeof e?null:ae(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach((e=>e.ngOnDestroy()))}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=$o,n=We.Default){this.assertNotDestroyed();const r=Uo(this),o=Ze(void 0);try{if(!(n&We.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(i=e)||"object"==typeof i&&i instanceof uo)&&Fe(e);t=n&&this.injectableDefInScope(n)?Wc(qc(e),Vc):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}const s=n&We.Self?Lc():this.parent;return t=n&We.Optional&&t===$o?null:t,s.get(e,t)}catch(t){if("NullInjectorError"===t.name){if((t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(ae(e)),r)throw t;return function(e,t,n,r){const o=e.ngTempTokenPath;throw t[Lo]&&o.unshift(t[Lo]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"ɵ"==e.charAt(1)?e.substr(2):e;let o=ae(t);if(Array.isArray(t))o=t.map(ae).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):ae(r)))}o=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${e.replace(Fo,"\n  ")}`}("\n"+e.message,o,n,r),e.ngTokenPath=o,e.ngTempTokenPath=null,e}(t,e,"R3InjectorError",this.source)}throw t}finally{Ze(o),Uo(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach((e=>this.get(e)))}toString(){const e=[];return this.records.forEach(((t,n)=>e.push(ae(n)))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,ngDevMode&&"Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=de(e)))return!1;let r=He(e);const o=null==r&&e.ngModule||void 0,i=void 0===o?e:o;ngDevMode&&-1!==t.indexOf(i)&&me(ae(i),t.map(ae));const s=-1!==n.indexOf(i);if(void 0!==o&&(r=He(o)),null==r)return!1;if(null!=r.imports&&!s){let e;ngDevMode&&t.push(i),n.push(i);try{Do(r.imports,(r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))}))}finally{ngDevMode&&t.pop()}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];Do(r,(e=>this.processProvider(e,n,r||lt)))}}this.injectorDefTypes.add(i);const a=en(i)||(()=>new i);this.records.set(i,Wc(a,Vc));const l=r.providers;if(null!=l&&!s){const t=e;Do(l,(e=>this.processProvider(e,t,l)))}return void 0!==o&&void 0!==e.providers}processProvider(e,t,n){let r=Zc(e=de(e))?e:de(e&&e.provide);const o=function(e,t,n){return Qc(e)?Wc(void 0,e.useValue):Wc(zc(e,t,n),Vc)}(e,t,n);if(Zc(e)||!0!==e.multi){const e=this.records.get(r);ngDevMode&&e&&void 0!==e.multi&&ve()}else{let t=this.records.get(r);t?ngDevMode&&void 0===t.multi&&ve():(t=Wc(void 0,Vc,!0),t.factory=()=>Zo(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,o)}hydrate(e,t){var n;return ngDevMode&&t.value===$c?me(ae(e)):t.value===Vc&&(t.value=$c,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=de(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function qc(e){const t=Fe(e),n=null!==t?t.factory:en(e);if(null!==n)return n;if(e instanceof uo)throw new pe(204,ngDevMode&&`Token ${ae(e)} is missing a ɵprov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=Eo(t,"?");throw new pe(204,ngDevMode&&`Can't resolve all parameters for ${ae(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[Be]||e[qe]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new pe(204,ngDevMode&&"unreachable")}function zc(e,t,n){let r;if(Zc(e)){const t=de(e);return en(t)||qc(t)}if(Qc(e))r=()=>de(e.useValue);else if((o=e)&&o.useFactory)r=()=>e.useFactory(...Zo(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>zo(de(e.useExisting));else{const o=de(e&&(e.useClass||e.provide));if(ngDevMode&&!o&&function(e,t,n){let r="";throw e&&t&&(r=` - only instances of Provider and Type are allowed, got: [${t.map((e=>e==n?"?"+n+"?":"...")).join(", ")}]`),new Error(`Invalid provider for the NgModule '${ae(e)}'`+r)}(t,n,e),!function(e){return!!e.deps}(e))return en(o)||qc(o);r=()=>new o(...Zo(e.deps))}var o;return r}function Wc(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Qc(e){return null!==e&&"object"==typeof e&&Ho in e}function Zc(e){return"function"==typeof e}class Kc{static create(e,t){if(Array.isArray(e))return Hc({name:""},t,e,"");{const t=e.name??"";return Hc({name:t},e.parent,e.providers,t)}}}function Gc(e){su(e);const t=vs(e);return null===t?null:(void 0===t.component&&(t.component=function(e,t){const n=t[1].data[e];let r=n.directiveStart;return 2&n.flags?t[r]:null}(t.nodeIndex,t.lView)),t.component)}function Jc(e){su(e);const t=vs(e);return null===t?null:t.lView[8]}function Yc(e){const t=vs(e);if(null===t)return null;let n,r=t.lView;for(ngDevMode&&Qt(r);2===r[1].type&&(n=Zs(r));)r=n;return 512&r[2]?null:r[8]}function Xc(e){return[...Ks(e).components]}function eu(e){const t=vs(e);if(null===t)return Kc.NULL;const n=t.lView[1].data[t.nodeIndex];return new Yr(n,t.lView)}function tu(e){if(e instanceof Text)return[];const t=vs(e);if(null===t)return[];const n=t.lView,r=n[1],o=t.nodeIndex;return r?.data[o]?(void 0===t.directives&&(t.directives=Es(o,n,!1)),null===t.directives?[]:[...t.directives]):[]}function nu(e){const{constructor:t}=e;if(!t)throw new Error("Unable to find the instance constructor");const n=It(t);if(n)return{inputs:n.inputs,outputs:n.outputs,encapsulation:n.encapsulation,changeDetection:n.onPush?Je.OnPush:Je.Default};const r=Et(t);return r?{inputs:r.inputs,outputs:r.outputs}:null}function ru(e){return vs(e).native}function ou(e){su(e);const t=vs(e);if(null===t)return[];const n=t.lView,r=n[1],o=n[7],i=r.cleanup,s=[];if(i&&o)for(let t=0;t<i.length;){const r=i[t++],a=i[t++];if("string"==typeof r){const l=r,c=bn(n[a]),u=o[i[t++]],d=i[t++],f="boolean"==typeof d||d>=0?"dom":"output",p="boolean"==typeof d&&d;e==c&&s.push({element:e,name:l,callback:u,useCapture:p,type:f})}}return s.sort(iu),s}function iu(e,t){return e.name==t.name?0:e.name<t.name?-1:1}function su(e){if("undefined"!=typeof Element&&!(e instanceof Element))throw new Error("Expecting instance of DOM Element")}function au(e){Nc(e),Xc(e).forEach((e=>Ac(e)))}Kc.THROW_IF_NOT_FOUND=$o,Kc.NULL=new jc,Kc.ɵprov=Re({token:Kc,providedIn:"any",factory:()=>zo(Pc)}),Kc.__NG_ELEMENT_ID__=-1;let lu=!1;function cu(){lu||(lu=!0,uu("ɵsetProfiler",cn),uu("getDirectiveMetadata",nu),uu("getComponent",Gc),uu("getContext",Jc),uu("getListeners",ou),uu("getOwningComponent",Yc),uu("getHostElement",ru),uu("getInjector",eu),uu("getRootComponents",Xc),uu("getDirectives",tu),uu("applyChanges",au))}function uu(e,t){if("undefined"==typeof COMPILED||!COMPILED){const n=it;if(ngDevMode&&ke(t,"function not defined"),n){let r=n.ng;r||(r=n.ng={}),r[e]=t}}}function du(e,t={}){ngDevMode&&cu(),ngDevMode&&Ut(e);const n=t.rendererFactory||vn,r=t.sanitizer||null,o=It(e);o.type!=e&&(o.type=e);const i=o.selectors[0][0],s=Ql(n.createRenderer(null,null),t.host||i,o.encapsulation),a=o.onPush?576:528,l=hu(t.scheduler,t.playerHandler),c=n.createRenderer(s,o),u=Wl(0,null,null,1,0,null,null,null,null,null),d=Pl(null,u,l,a,null,null,n,c,null,t.injector||null);let f;or(d);try{n.begin&&n.begin(),f=pu(fu(s,o,d,n,c,r),o,d,l,t.hostFeatures||null),$l(u,d,null),Fl(u,d,null,null)}finally{cr(),n.end&&n.end()}return f}function fu(e,t,n,r,o,i){const s=n[1];ngDevMode&&Pe(n,20),n[20]=e;const a=jl(s,20,2,"#host",null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(kc(a,l,!0),null!==e&&(Ir(o,e,l),null!==a.classes&&Ta(o,e,a.classes),null!==a.styles&&Ea(o,e,a.styles)));const c=r.createRenderer(e,t),u=Pl(n,zl(t),null,t.onPush?64:16,n[20],a,r,c,i||null,null);return s.firstCreatePass&&(Hr(Vr(a,n),s,t.type),rc(s,a),ic(a,n.length,1)),mc(n,u),n[20]=u}function pu(e,t,n,r,o){const i=n[1],s=function(e,t,n){const r=Vn();if(e.firstCreatePass){n.providersResolver&&n.providersResolver(n);const o=Vl(e,t,1,null);ngDevMode&&Me(o,r.directiveStart,"Because this is a root component the allocated expando should match the TNode component."),sc(e,r,t,o,n)}const o=Kr(t,e,r.directiveStart,r);_s(o,t);const i=_n(r,t);return i&&_s(i,t),o}(i,n,t);if(r.components.push(s),e[8]=s,o&&o.forEach((e=>e(s,t))),t.contentQueries){const e=Vn();ngDevMode&&ke(e,"TNode expected"),t.contentQueries(1,s,e.directiveStart)}const a=Vn();return ngDevMode&&ke(a,"tNode should have been already created"),!i.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(dr(a.index),tc(n[1],a,0,a.directiveStart,a.directiveEnd,t),nc(t,s)),s}function hu(e,t){return{components:[],scheduler:e||Vs,clean:Dc,playerHandler:t||null,flags:0}}function gu(e,t){const n=Ms(e);ngDevMode&&ke(n,"LView is required");const r=n[1],o=Vn();ngDevMode&&ke(o,"TNode is required"),yr(r,o)}function yu(e){return Ks(e).clean}function mu(e){return Object.getPrototypeOf(e.prototype).constructor}function vu(e){let t=mu(e.type),n=!0;const r=[e];for(;t;){let o;if($t(e))o=t.ɵcmp||t.ɵdir;else{if(t.ɵcmp){const e="undefined"==typeof ngDevMode||ngDevMode?"Directives cannot inherit Components":"";throw new pe(903,e)}o=t.ɵdir}if(o){if(n){r.push(o);const t=e;t.inputs=bu(e.inputs),t.declaredInputs=bu(e.declaredInputs),t.outputs=bu(e.outputs);const n=o.hostBindings;n&&Cu(e,n);const i=o.viewQuery,s=o.contentQueries;if(i&&wu(e,i),s&&_u(e,s),se(e.inputs,o.inputs),se(e.declaredInputs,o.declaredInputs),se(e.outputs,o.outputs),$t(o)&&o.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(o.data.animation)}}const t=o.features;if(t)for(let r=0;r<t.length;r++){const o=t[r];o&&o.ngInherit&&o(e),o===vu&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const o=e[r];o.hostVars=t+=o.hostVars,o.hostAttrs=Or(o.hostAttrs,n=Or(n,o.hostAttrs))}}(r)}function bu(e){return e===at?{}:e===lt?[]:e}function wu(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function _u(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,o)=>{t(e,r,o),n(e,r,o)}:t}function Cu(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}const Mu=["providersResolver"],Du=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function xu(e){let t,n=mu(e.type);t=$t(e)?n.ɵcmp:n.ɵdir;const r=e;for(const e of Mu)r[e]=t[e];if($t(t))for(const e of Du)r[e]=t[e]}let Iu=null;function Eu(){if(!Iu){const e=it.Symbol;if(e&&e.iterator)Iu=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Iu=n)}}}return Iu}function Tu(e,t){const n=Ou(e),r=Ou(t);if(n&&r)return function(e,t,n){const r=e[Eu()](),o=t[Eu()]();for(;;){const e=r.next(),t=o.next();if(e.done&&t.done)return!0;if(e.done||t.done)return!1;if(!n(e.value,t.value))return!1}}(e,t,Tu);{const o=e&&("object"==typeof e||"function"==typeof e),i=t&&("object"==typeof t||"function"==typeof t);return!(n||!o||r||!i)||Object.is(e,t)}}function Ou(e){return!!Su(e)&&(Array.isArray(e)||!(e instanceof Map)&&Eu()in e)}function Su(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function ku(e,t,n){return e[t]=n}function Au(e,t){return ngDevMode&&Pe(e,t),ngDevMode&&Ie(e[t],Ha,"Stored value should never be NO_CHANGE."),e[t]}function Nu(e,t,n){ngDevMode&&Ie(n,Ha,"Incoming value should never be NO_CHANGE."),ngDevMode&&Ee(t,e.length,"Slot should have been initialized to NO_CHANGE");const r=e[t];if(Object.is(r,n))return!1;if(ngDevMode&&Un()){const o=r!==Ha?r:void 0;if(!Tu(o,n)){const i=function(e,t,n,r){const o=e[1].data,i=o[t];if("string"==typeof i)return i.indexOf(Hs)>-1?qs(e,t,t,i,r):{propName:i,oldValue:n,newValue:r};if(null===i){let n=t-1;for(;"string"!=typeof o[n]&&null===o[n+1];)n--;const i=o[n];if("string"==typeof i){const o=i.match(new RegExp(Hs,"g"));if(o&&o.length-1>t-n)return qs(e,n,t,i,r)}}return{propName:void 0,oldValue:n,newValue:r}}(e,t,o,n);!function(e,t,n,r){let o=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value${r?` for '${r}'`:""}: '${t}'. Current value: '${n}'.`;throw e&&(o+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook?"),new pe(-100,o)}(r===Ha,i.oldValue,i.newValue,i.propName)}return!1}return e[t]=n,!0}function Pu(e,t,n,r){const o=Nu(e,t,n);return Nu(e,t+1,r)||o}function ju(e,t,n,r,o){const i=Pu(e,t,n,r);return Nu(e,t+2,o)||i}function Ru(e,t,n,r,o,i){const s=Pu(e,t,n,r);return Pu(e,t+2,o,i)||s}function Vu(e,t,n,r){const o=Pn(),i=Zn();if(Nu(o,i,t)){const s=jn(),a=fr();lc(a,o,e,t,n,r),ngDevMode&&Mc(s.data,a,"attr."+e,i)}return Vu}function $u(e,t){ngDevMode&&Ee(2,t.length,"should have at least 3 values"),ngDevMode&&Me(t.length%2,1,"should have an odd number of values");let n=!1,r=Wn();for(let o=1;o<t.length;o+=2)n=Nu(e,r++,t[o])||n;if(Qn(r),!n)return Ha;let o=t[0];for(let e=1;e<t.length;e+=2)o+=ge(t[e])+t[e+1];return o}function Fu(e,t,n,r){return Nu(e,Zn(),n)?t+ge(n)+r:Ha}function Lu(e,t,n,r,o,i){const s=Pu(e,Wn(),n,o);return Kn(2),s?t+ge(n)+r+ge(o)+i:Ha}function Hu(e,t,n,r,o,i,s,a){const l=ju(e,Wn(),n,o,s);return Kn(3),l?t+ge(n)+r+ge(o)+i+ge(s)+a:Ha}function Bu(e,t,n,r,o,i,s,a,l,c){const u=Ru(e,Wn(),n,o,s,l);return Kn(4),u?t+ge(n)+r+ge(o)+i+ge(s)+a+ge(l)+c:Ha}function Uu(e,t,n,r,o,i,s,a,l,c,u,d){const f=Wn();let p=Ru(e,f,n,o,s,l);return p=Nu(e,f+4,u)||p,Kn(5),p?t+ge(n)+r+ge(o)+i+ge(s)+a+ge(l)+c+ge(u)+d:Ha}function qu(e,t,n,r,o,i,s,a,l,c,u,d,f,p){const h=Wn();let g=Ru(e,h,n,o,s,l);return g=Pu(e,h+4,u,f)||g,Kn(6),g?t+ge(n)+r+ge(o)+i+ge(s)+a+ge(l)+c+ge(u)+d+ge(f)+p:Ha}function zu(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g){const y=Wn();let m=Ru(e,y,n,o,s,l);return m=ju(e,y+4,u,f,h)||m,Kn(7),m?t+ge(n)+r+ge(o)+i+ge(s)+a+ge(l)+c+ge(u)+d+ge(f)+p+ge(h)+g:Ha}function Wu(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m){const v=Wn();let b=Ru(e,v,n,o,s,l);return b=Ru(e,v+4,u,f,h,y)||b,Kn(8),b?t+ge(n)+r+ge(o)+i+ge(s)+a+ge(l)+c+ge(u)+d+ge(f)+p+ge(h)+g+ge(y)+m:Ha}function Qu(e,t,n,r,o,i){const s=Pn(),a=Fu(s,t,n,r);if(a!==Ha){const n=fr();lc(n,s,e,a,o,i),ngDevMode&&Mc(jn().data,n,"attr."+e,Wn()-1,t,r)}return Qu}function Zu(e,t,n,r,o,i,s,a){const l=Pn(),c=Lu(l,t,n,r,o,i);if(c!==Ha){const n=fr();lc(n,l,e,c,s,a),ngDevMode&&Mc(jn().data,n,"attr."+e,Wn()-2,t,r,i)}return Zu}function Ku(e,t,n,r,o,i,s,a,l,c){const u=Pn(),d=Hu(u,t,n,r,o,i,s,a);if(d!==Ha){const n=fr();lc(n,u,e,d,l,c),ngDevMode&&Mc(jn().data,n,"attr."+e,Wn()-3,t,r,i,a)}return Ku}function Gu(e,t,n,r,o,i,s,a,l,c,u,d){const f=Pn(),p=Bu(f,t,n,r,o,i,s,a,l,c);if(p!==Ha){const n=fr();lc(n,f,e,p,u,d),ngDevMode&&Mc(jn().data,n,"attr."+e,Wn()-4,t,r,i,a,c)}return Gu}function Ju(e,t,n,r,o,i,s,a,l,c,u,d,f,p){const h=Pn(),g=Uu(h,t,n,r,o,i,s,a,l,c,u,d);if(g!==Ha){const n=fr();lc(n,h,e,g,f,p),ngDevMode&&Mc(jn().data,n,"attr."+e,Wn()-5,t,r,i,a,c,d)}return Ju}function Yu(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g){const y=Pn(),m=qu(y,t,n,r,o,i,s,a,l,c,u,d,f,p);if(m!==Ha){const n=fr();lc(n,y,e,m,h,g),ngDevMode&&Mc(jn().data,n,"attr."+e,Wn()-6,t,r,i,a,c,d,p)}return Yu}function Xu(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m){const v=Pn(),b=zu(v,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g);if(b!==Ha){const n=fr();lc(n,v,e,b,y,m),ngDevMode&&Mc(jn().data,n,"attr."+e,Wn()-7,t,r,i,a,c,d,p,g)}return Xu}function ed(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m,v,b){const w=Pn(),_=Wu(w,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m);if(_!==Ha){const n=fr();lc(n,w,e,_,v,b),ngDevMode&&Mc(jn().data,n,"attr."+e,Wn()-8,t,r,i,a,c,d,p,g,m)}return ed}function td(e,t,n,r){const o=Pn(),i=$u(o,t);if(i!==Ha){const s=fr();if(lc(s,o,e,i,n,r),ngDevMode){const n=[t[0]];for(let e=2;e<t.length;e+=2)n.push(t[e]);Mc(jn().data,s,"attr."+e,Wn()-n.length+1,...n)}}return td}function nd(e,t,n,r,o,i,s,a){const l=Pn(),c=jn(),u=e+St,d=c.firstCreatePass?function(e,t,n,r,o,i,s,a,l){ngDevMode&&Zt(t),ngDevMode&&ngDevMode.firstCreatePass++;const c=t.consts,u=jl(t,e,4,s||null,En(c,a));ec(t,n,u,En(c,l)),yr(t,u);const d=u.tViews=Wl(2,u,r,o,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,n,r,o,i,s):c.data[u];Ln(d,!1);const f=l[11].createComment(ngDevMode?"container":"");ba(c,l,f,d),_s(f,l),mc(l,l[u]=pc(f,l,f,d)),Vt(d)&&Ul(c,l,d),null!=s&&ql(l,d,a)}function rd(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}function od(e){return Mn(Sn.lFrame.contextLView,St+e)}const id={ɵɵdefineInjectable:Re,ɵɵdefineInjector:$e,ɵɵinject:zo,ɵɵinvalidFactoryDep:Wo,resolveForwardRef:de};const sd=ie({provide:String,useValue:ie});function ad(e){return void 0!==e.useClass}function ld(e){return void 0!==e.useFactory}const cd=io("Injectable",void 0,void 0,void 0,((e,t)=>function(e,t){let n=null,r=null;e.hasOwnProperty(Be)||Object.defineProperty(e,Be,{get:()=>{if(null===n){const r=wo({usage:0,kind:"injectable",type:e});n=r.compileInjectable(id,`ng:///${e.name}/ɵprov.js`,function(e,t){const n=t||{providedIn:null},r={name:e.name,type:e,typeArgumentCount:0,providedIn:n.providedIn};return(ad(n)||ld(n))&&void 0!==n.deps&&(r.deps=oi(n.deps)),ad(n)?r.useClass=n.useClass:function(e){return sd in e}(n)?r.useValue=n.useValue:ld(n)?r.useFactory=n.useFactory:function(e){return void 0!==e.useExisting}(n)&&(r.useExisting=n.useExisting),r}(e,t))}return n}}),e.hasOwnProperty(pt)||Object.defineProperty(e,pt,{get:()=>{if(null===r){const t=wo({usage:0,kind:"injectable",type:e});r=t.compileFactory(id,`ng:///${e.name}/ɵfac.js`,{name:e.name,type:e,typeArgumentCount:0,deps:ri(e),target:t.FactoryTarget.Injectable})}return r},configurable:!0})}(e,t)));function ud(e){return e.length>1?" ("+function(e){const t=[];for(let n=0;n<e.length;++n){if(t.indexOf(e[n])>-1)return t.push(e[n]),t;t.push(e[n])}return t}(e.slice().reverse()).map((e=>ae(e.token))).join(" -> ")+")":""}function dd(e,t,n,r){const o=[t],i=n(o),s=r?function(e,t){const n=`${e} caused by: ${t instanceof Error?t.message:t}`,r=Error(n);return r.ngOriginalError=t,r}(i,r):Error(i);return s.addKey=fd,s.keys=o,s.injectors=[e],s.constructResolvingMessage=n,s.ngOriginalError=r,s}function fd(e,t){this.injectors.push(e),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)}function pd(e,t){const n=[];for(let e=0,r=t.length;e<r;e++){const r=t[e];r&&0!=r.length?n.push(r.map(ae).join(" ")):n.push("?")}return Error("Cannot resolve all parameters for '"+ae(e)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+ae(e)+"' is decorated with Injectable.")}class hd{constructor(e,t){if(this.token=e,this.id=t,!e)throw new Error("Token must be defined!");this.displayName=ae(this.token)}static get(e){return gd.get(de(e))}static get numberOfKeys(){return gd.numberOfKeys}}const gd=new class{constructor(){this._allKeys=new Map}get(e){if(e instanceof hd)return e;if(this._allKeys.has(e))return this._allKeys.get(e);const t=new hd(e,hd.numberOfKeys);return this._allKeys.set(e,t),t}get numberOfKeys(){return this._allKeys.size}},yd=new class{constructor(e){this.reflectionCapabilities=e}updateCapabilities(e){this.reflectionCapabilities=e}factory(e){return this.reflectionCapabilities.factory(e)}parameters(e){return this.reflectionCapabilities.parameters(e)}annotations(e){return this.reflectionCapabilities.annotations(e)}propMetadata(e){return this.reflectionCapabilities.propMetadata(e)}hasLifecycleHook(e,t){return this.reflectionCapabilities.hasLifecycleHook(e,t)}getter(e){return this.reflectionCapabilities.getter(e)}setter(e){return this.reflectionCapabilities.setter(e)}method(e){return this.reflectionCapabilities.method(e)}importUri(e){return this.reflectionCapabilities.importUri(e)}resourceUri(e){return this.reflectionCapabilities.resourceUri(e)}resolveIdentifier(e,t,n,r){return this.reflectionCapabilities.resolveIdentifier(e,t,n,r)}resolveEnum(e,t){return this.reflectionCapabilities.resolveEnum(e,t)}}(new jo);class md{constructor(e,t,n){this.key=e,this.optional=t,this.visibility=n}static fromKey(e){return new md(e,!1,null)}}const vd=[];class bd{constructor(e,t,n){this.key=e,this.resolvedFactories=t,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}class wd{constructor(e,t){this.factory=e,this.dependencies=t}}function _d(e){let t,n;if(e.useClass){const r=de(e.useClass);t=yd.factory(r),n=xd(r)}else e.useExisting?(t=e=>e,n=[md.fromKey(hd.get(e.useExisting))]):e.useFactory?(t=e.useFactory,n=function(e,t){if(t){const n=t.map((e=>[e]));return t.map((t=>Id(e,t,n)))}return xd(e)}(e.useFactory,e.deps)):(t=()=>e.useValue,n=vd);return new wd(t,n)}function Cd(e){return new bd(hd.get(e.provide),[_d(e)],e.multi||!1)}function Md(e){const t=function(e,t){for(let n=0;n<e.length;n++){const r=e[n],o=t.get(r.key.id);if(o){if(r.multiProvider!==o.multiProvider)throw Error(`Cannot mix multi providers and regular providers, got: ${o} ${r}`);if(r.multiProvider)for(let e=0;e<r.resolvedFactories.length;e++)o.resolvedFactories.push(r.resolvedFactories[e]);else t.set(r.key.id,r)}else{let e;e=r.multiProvider?new bd(r.key,r.resolvedFactories.slice(),r.multiProvider):r,t.set(r.key.id,e)}}return t}(Dd(e,[]).map(Cd),new Map);return Array.from(t.values())}function Dd(e,t){return e.forEach((e=>{if(e instanceof _o)t.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)t.push(e);else{if(!Array.isArray(e))throw Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${e}`);Dd(e,t)}})),t}function xd(e){const t=yd.parameters(e);if(!t)return[];if(t.some((e=>null==e)))throw pd(e,t);return t.map((n=>Id(e,n,t)))}function Id(e,t,n){let r=null,o=!1;if(!Array.isArray(t))return Ed(t instanceof Go?t.token:t,o,null);let i=null;for(let e=0;e<t.length;++e){const n=t[e];n instanceof _o?r=n:n instanceof Go?r=n.token:n instanceof Jo?o=!0:n instanceof Yo||n instanceof Xo?i=n:n instanceof uo&&(r=n)}if(r=de(r),null!=r)return Ed(r,o,i);throw pd(e,n)}function Ed(e,t,n){return new md(hd.get(e),t,n)}const Td={};class Od{static resolve(e){return Md(e)}static resolveAndCreate(e,t){const n=Od.resolve(e);return Od.fromResolvedProviders(n,t)}static fromResolvedProviders(e,t){return new Sd(e,t)}}class Sd{constructor(e,t){this._constructionCounter=0,this._providers=e,this.parent=t||null;const n=e.length;this.keyIds=[],this.objs=[];for(let t=0;t<n;t++)this.keyIds[t]=e[t].key.id,this.objs[t]=Td}get(e,t=$o){return this._getByKey(hd.get(e),null,t)}resolveAndCreateChild(e){const t=Od.resolve(e);return this.createChildFromResolved(t)}createChildFromResolved(e){const t=new Sd(e);return t.parent=this,t}resolveAndInstantiate(e){return this.instantiateResolved(Od.resolve([e])[0])}instantiateResolved(e){return this._instantiateProvider(e)}getProviderAtIndex(e){if(e<0||e>=this._providers.length)throw function(e){return Error(`Index ${e} is out-of-bounds.`)}(e);return this._providers[e]}_new(e){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw this,dd(this,e.key,(function(e){return`Cannot instantiate cyclic dependency!${ud(e)}`}));return this._instantiateProvider(e)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(e){if(e.multiProvider){const t=[];for(let n=0;n<e.resolvedFactories.length;++n)t[n]=this._instantiate(e,e.resolvedFactories[n]);return t}return this._instantiate(e,e.resolvedFactories[0])}_instantiate(e,t){const n=t.factory;let r,o;try{r=t.dependencies.map((e=>this._getByReflectiveDependency(e)))}catch(t){throw t.addKey&&t.addKey(this,e.key),t}try{o=n(...r)}catch(t){throw this,i=t,t.stack,dd(this,e.key,(function(e){const t=ae(e[0].token);return`${i.message}: Error during instantiation of ${t}!${ud(e)}.`}),i)}var i;return o}_getByReflectiveDependency(e){return this._getByKey(e.key,e.visibility,e.optional?null:$o)}_getByKey(e,t,n){return e===Sd.INJECTOR_KEY?this:t instanceof Yo?this._getByKeySelf(e,n):this._getByKeyDefault(e,n,t)}_getObjByKeyId(e){for(let t=0;t<this.keyIds.length;t++)if(this.keyIds[t]===e)return this.objs[t]===Td&&(this.objs[t]=this._new(this._providers[t])),this.objs[t];return Td}_throwOrNull(e,t){if(t!==$o)return t;throw function(e,t){return dd(e,t,(function(e){return`No provider for ${ae(e[0].token)}!${ud(e)}`}))}(this,e)}_getByKeySelf(e,t){const n=this._getObjByKeyId(e.id);return n!==Td?n:this._throwOrNull(e,t)}_getByKeyDefault(e,t,n){let r;for(r=n instanceof Xo?this.parent:this;r instanceof Sd;){const t=r,n=t._getObjByKeyId(e.id);if(n!==Td)return n;r=t.parent}return null!==r?r.get(e.token,t):this._throwOrNull(e,t)}get displayName(){return`ReflectiveInjector(providers: [${function(e,t){const n=[];for(let t=0;t<e._providers.length;++t)n[t]=' "'+e.getProviderAtIndex(t).key.displayName+'" ';return n}(this).join(", ")}])`}toString(){return this.displayName}}function kd(e,t=We.Default){const n=Pn();return null===n?(ngDevMode&&(ngDevMode&&De(Qe,kd,"Calling ɵɵinject would cause infinite recursion")),zo(e,t)):qr(Vn(),n,de(e),t)}function Ad(){const e=ngDevMode?"This constructor was not compatible with Dependency Injection.":"invalid";throw new Error(e)}function Nd(e,t,n){const r=Pn(),o=Zn();if(Nu(r,o,t)){const i=jn(),s=fr();Gl(i,s,r,e,t,r[11],n,!1),ngDevMode&&Mc(i.data,s,e,o)}return Nd}function Pd(e,t,n,r,o){const i=o?"class":"style";Oc(e,n,t.inputs[i],i,r)}function jd(e,t,n,r){const o=Pn(),i=jn(),s=St+e;ngDevMode&&Me(Wn(),i.bindingStartIndex,"elements should be created before any bindings"),ngDevMode&&Pe(o,s);const a=o[11],l=o[s]=ra(a,t,Sn.lFrame.currentNamespace),c=i.firstCreatePass?function(e,t,n,r,o,i,s){ngDevMode&&Zt(t),ngDevMode&&ngDevMode.firstCreatePass++;const a=t.consts,l=jl(t,e,2,o,En(a,i)),c=ec(t,n,l,En(a,s));return ngDevMode&&function(e,t,n,r){if(null===e.schemas)return;const o=n.value;if(!r&&null!==o&&("undefined"!=typeof HTMLUnknownElement&&HTMLUnknownElement&&t instanceof HTMLUnknownElement||"undefined"!=typeof customElements&&o.indexOf("-")>-1&&!customElements.get(o))&&!Yl(e,o)){let e=`'${o}' is not a known element:\n`;e+=`1. If '${o}' is an Angular component, then verify that it is part of this module.\n`,o&&o.indexOf("-")>-1?e+=`2. If '${o}' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.`:e+="2. To allow any element add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.",console.error(he(304,e))}}(t,r,l,c),null!==l.attrs&&kc(l,l.attrs,!1),null!==l.mergedAttrs&&kc(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,i,o,l,t,n,r):i.data[s];Ln(c,!0);const u=c.mergedAttrs;null!==u&&Ir(a,l,u);const d=c.classes;null!==d&&Ta(a,l,d);const f=c.styles;return null!==f&&Ea(a,l,f),64!=(64&c.flags)&&ba(i,o,l,c),0===Sn.lFrame.elementDepthCount&&_s(l,o),Sn.lFrame.elementDepthCount++,Vt(c)&&(Ul(i,o,c),Bl(i,c,o)),null!==r&&ql(o,c),jd}function Rd(){let e=Vn();ngDevMode&&ke(e,"No parent node to close."),Hn()?Bn():(ngDevMode&&qt(Vn()),e=e.parent,Ln(e,!1));const t=e;ngDevMode&&xr(t,3),Sn.lFrame.elementDepthCount--;const n=jn();return n.firstCreatePass&&(yr(n,e),jt(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Pd(n,t,Pn(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Pd(n,t,Pn(),t.stylesWithoutHost,!1),Rd}function Vd(e,t,n,r){return jd(e,t,n,r),Rd(),Vd}function $d(e,t,n){const r=Pn(),o=jn(),i=e+St;ngDevMode&&Pe(r,i),ngDevMode&&Me(Wn(),o.bindingStartIndex,"element containers should be created before any bindings");const s=o.firstCreatePass?function(e,t,n,r,o){ngDevMode&&ngDevMode.firstCreatePass++;const i=t.consts,s=En(i,r),a=jl(t,e,8,"ng-container",s);return null!==s&&kc(a,s,!0),ec(t,n,a,En(i,o)),null!==t.queries&&t.queries.elementStart(t,a),a}(i,o,r,t,n):o.data[i];Ln(s,!0),ngDevMode&&ngDevMode.rendererCreateComment++;const a=r[i]=r[11].createComment(ngDevMode?"ng-container":"");return ba(o,r,a,s),_s(a,r),Vt(s)&&(Ul(o,r,s),Bl(o,s,r)),null!=n&&ql(r,s),$d}function Fd(){let e=Vn();const t=jn();return Hn()?Bn():(ngDevMode&&qt(e),e=e.parent,Ln(e,!1)),ngDevMode&&xr(e,8),t.firstCreatePass&&(yr(t,e),jt(e)&&t.queries.elementEnd(e)),Fd}function Ld(e,t,n){return $d(e,t,n),Fd(),Ld}function Hd(){return Pn()}function Bd(e){return!!e&&"function"==typeof e.then}function Ud(e){return!!e&&"function"==typeof e.subscribe}Sd.INJECTOR_KEY=hd.get(Kc);const qd=Ud;function zd(e,t,n,r){const o=Pn(),i=jn(),s=Vn();return Qd(i,o,o[11],s,e,t,!!n,r),zd}function Wd(e,t){const n=Vn(),r=Pn(),o=jn();return Qd(o,r,Ec(Xn(o.data),n,r),n,e,t,!1),Wd}function Qd(e,t,n,r,o,i,s,a){const l=Vt(r),c=e.firstCreatePass&&Ic(e),u=t[8],d=xc(t);ngDevMode&&xr(r,15);let f=!0;if(3&r.type||a){const p=_n(r,t),h=a?a(p):p,g=d.length,y=a?e=>a(bn(e[r.index])):r.index;if(mn(n)){let s=null;if(!a&&l&&(s=function(e,t,n,r){const o=e.cleanup;if(null!=o)for(let e=0;e<o.length-1;e+=2){const i=o[e];if(i===n&&o[e+1]===r){const n=t[7],r=o[e+2];return n.length>r?n[r]:null}"string"==typeof i&&(e+=2)}return null}(e,t,o,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=i,s.__ngLastListenerFn__=i,f=!1;else{i=Kd(r,t,u,i,!1);const e=n.listen(h,o,i);ngDevMode&&ngDevMode.rendererAddEventListener++,d.push(i,e),c&&c.push(o,y,g,g+1)}}else i=Kd(r,t,u,i,!0),h.addEventListener(o,i,s),ngDevMode&&ngDevMode.rendererAddEventListener++,d.push(i),c&&c.push(o,y,g,s)}else i=Kd(r,t,u,i,!1);const p=r.outputs;let h;if(f&&null!==p&&(h=p[o])){const e=h.length;if(e)for(let n=0;n<e;n+=2){const e=h[n];ngDevMode&&Pe(t,e);const s=h[n+1],a=t[e],l=a[s];if(ngDevMode&&!qd(l))throw new Error(`@Output ${s} not initialized in '${a.constructor.name}'.`);const u=l.subscribe(i),f=d.length;d.push(i,u),c&&c.push(o,r.index,f,-(f+1))}}}function Zd(e,t,n,r){try{return un(6,t,n),!1!==n(r)}catch(t){return Tc(e,t),!1}finally{un(7,t,n)}}function Kd(e,t,n,r,o){return function i(s){if(s===Function)return r;const a=2&e.flags?Dn(e.index,t):t;0==(32&t[2])&&vc(a);let l=Zd(t,n,r,s),c=i.__ngNextListenerFn__;for(;c;)l=Zd(t,n,c,s)&&l,c=c.__ngNextListenerFn__;return o&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function Gd(e=1){return function(e){return(Sn.lFrame.contextLView=function(e,t){for(;e>0;)ngDevMode&&ke(t[15],"Declaration view should be defined if nesting level is greater than 0."),t=t[15],e--;return t}(e,Sn.lFrame.contextLView))[8]}(e)}function Jd(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let o=0;o<t.length;o++){const i=t[o];if("*"!==i){if(null===r?Va(e,i,!0):$a(r,i))return o}else n=o}return n}function Yd(e){const t=Pn()[16][6];if(!t.projection){const n=e?e.length:1,r=t.projection=Eo(n,null),o=r.slice();let i=t.child;for(;null!==i;){const t=e?Jd(i,e):0;null!==t&&(o[t]?o[t].projectionNext=i:r[t]=i,o[t]=i),i=i.next}}}function Xd(e,t=0,n){const r=Pn(),o=jn(),i=jl(o,St+e,16,null,n||null);null===i.projection&&(i.projection=t),Bn(),64!=(64&i.flags)&&function(e,t,n){Ia(t[11],0,t,n,la(e,n,t),ha(n.parent||t[6],n,t))}(o,r,i)}function ef(e,t,n){return tf(e,"",t,"",n),ef}function tf(e,t,n,r,o){const i=Pn(),s=Fu(i,t,n,r);if(s!==Ha){const n=jn(),a=fr();Gl(n,a,i,e,s,i[11],o,!1),ngDevMode&&Mc(n.data,a,e,Wn()-1,t,r)}return tf}function nf(e,t,n,r,o,i,s){const a=Pn(),l=Lu(a,t,n,r,o,i);if(l!==Ha){const n=jn(),o=fr();Gl(n,o,a,e,l,a[11],s,!1),ngDevMode&&Mc(n.data,o,e,Wn()-2,t,r,i)}return nf}function rf(e,t,n,r,o,i,s,a,l){const c=Pn(),u=Hu(c,t,n,r,o,i,s,a);if(u!==Ha){const n=jn(),o=fr();Gl(n,o,c,e,u,c[11],l,!1),ngDevMode&&Mc(n.data,o,e,Wn()-3,t,r,i,a)}return rf}function of(e,t,n,r,o,i,s,a,l,c,u){const d=Pn(),f=Bu(d,t,n,r,o,i,s,a,l,c);if(f!==Ha){const n=jn(),o=fr();Gl(n,o,d,e,f,d[11],u,!1),ngDevMode&&Mc(n.data,o,e,Wn()-4,t,r,i,a,c)}return of}function sf(e,t,n,r,o,i,s,a,l,c,u,d,f){const p=Pn(),h=Uu(p,t,n,r,o,i,s,a,l,c,u,d);if(h!==Ha){const n=jn(),o=fr();Gl(n,o,p,e,h,p[11],f,!1),ngDevMode&&Mc(n.data,o,e,Wn()-5,t,r,i,a,c,d)}return sf}function af(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h){const g=Pn(),y=qu(g,t,n,r,o,i,s,a,l,c,u,d,f,p);if(y!==Ha){const n=jn(),o=fr();Gl(n,o,g,e,y,g[11],h,!1),ngDevMode&&Mc(n.data,o,e,Wn()-6,t,r,i,a,c,d,p)}return af}function lf(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y){const m=Pn(),v=zu(m,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g);if(v!==Ha){const n=jn(),o=fr();Gl(n,o,m,e,v,m[11],y,!1),ngDevMode&&Mc(n.data,o,e,Wn()-7,t,r,i,a,c,d,p,g)}return lf}function cf(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m,v){const b=Pn(),w=Wu(b,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m);if(w!==Ha){const n=jn(),o=fr();Gl(n,o,b,e,w,b[11],v,!1),ngDevMode&&Mc(n.data,o,e,Wn()-8,t,r,i,a,c,d,p,g,m)}return cf}function uf(e,t,n){const r=Pn(),o=$u(r,t);if(o!==Ha){const i=jn(),s=fr();if(Gl(i,s,r,e,o,r[11],n,!1),ngDevMode){const n=[t[0]];for(let e=2;e<t.length;e+=2)n.push(t[e]);Mc(i.data,s,e,Wn()-n.length+1,...n)}}return uf}function df(e,t,n,r,o){const i=e[n+1],s=null===t;let a=r?Wa(i):Ka(i),l=!1;for(;0!==a&&(!1===l||s);){ngDevMode&&Pe(e,a);const n=e[a],o=e[a+1];ff(n,t)&&(l=!0,e[a+1]=r?Ya(o):Za(o)),a=r?Wa(o):Ka(o)}l&&(e[n+1]=r?Za(i):Ya(i))}function ff(e,t){return ngDevMode&&De(Array.isArray(t),!0,"Expected that 'tStylingKey' has been unwrapped"),null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&So(e,t)>=0}const pf={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function hf(e){return e.substring(pf.key,pf.keyEnd)}function gf(e){return e.substring(pf.value,pf.valueEnd)}function yf(e,t){const n=pf.textEnd;return n===t?-1:(t=pf.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,pf.key=t,n),bf(e,t,n))}function mf(e,t){const n=pf.textEnd;let r=pf.key=bf(e,t,n);return n===r?-1:(r=pf.keyEnd=function(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=wf(e,r,n,58),r=pf.value=bf(e,r,n),r=pf.valueEnd=function(e,t,n){let r=-1,o=-1,i=-1,s=t,a=s;for(;s<n;){const l=e.charCodeAt(s++);if(59===l)return a;34===l||39===l?a=s=_f(e,l,s,n):t===s-4&&85===i&&82===o&&76===r&&40===l?a=s=_f(e,41,s,n):l>32&&(a=s),i=o,o=r,r=-33&l}return a}(e,r,n),wf(e,r,n,59))}function vf(e){pf.key=0,pf.keyEnd=0,pf.value=0,pf.valueEnd=0,pf.textEnd=e.length}function bf(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function wf(e,t,n,r){return(t=bf(e,t,n))<n&&(ngDevMode&&e.charCodeAt(t)!==r&&Cf(e,String.fromCharCode(r),t),t++),t}function _f(e,t,n,r){let o=-1,i=n;for(;i<r;){const n=e.charCodeAt(i++);if(n==t&&92!==o)return i;o=92==n&&92===o?0:n}throw ngDevMode?Cf(e,String.fromCharCode(t),r):new Error}function Cf(e,t,n){throw ngDevMode&&Me("string"==typeof e,!0,"String expected here"),Ae(`Malformed style at location ${n} in string '`+e.substring(0,n)+"[>>"+e.substring(n,n+1)+"<<]"+e.substr(n+1)+`'. Expecting '${t}'.`)}function Mf(e,t,n){return Of(e,t,n,!1),Mf}function Df(e,t){return Of(e,t,null,!0),Df}function xf(e){Sf(jf,If,e,!1)}function If(e,t){for(let n=function(e){return vf(e),mf(e,bf(e,0,pf.textEnd))}(t);n>=0;n=mf(t,n))jf(e,hf(t),gf(t))}function Ef(e){Sf(To,Tf,e,!0)}function Tf(e,t){for(let n=function(e){return vf(e),yf(e,bf(e,0,pf.textEnd))}(t);n>=0;n=yf(t,n))To(e,hf(t),!0)}function Of(e,t,n,r){const o=Pn(),i=jn(),s=Kn(2);i.firstUpdatePass&&Af(i,e,s,r),t!==Ha&&Nu(o,s,t)&&Rf(i,i.data[ur()],o,o[11],e,o[s+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=ae(xi(e)))),e}(t,n),r,s)}function Sf(e,t,n,r){const o=jn(),i=Kn(2);o.firstUpdatePass&&Af(o,null,i,r);const s=Pn();if(n!==Ha&&Nu(s,i,n)){const a=o.data[ur()];if(Ff(a,r)&&!kf(o,i)){if(ngDevMode){const e=o.data[i];Me(Array.isArray(e)?e[1]:e,!1,"Styling linked list shadow input should be marked as 'false'")}let e=r?a.classesWithoutHost:a.stylesWithoutHost;ngDevMode&&!1===r&&null!==e&&Me(e.endsWith(";"),!0,"Expecting static portion to end with ';'"),null!==e&&(n=le(e,n||"")),Pd(o,a,s,n,r)}else!function(e,t,n,r,o,i,s,a){o===Ha&&(o=lt);let l=0,c=0,u=0<o.length?o[0]:null,d=0<i.length?i[0]:null;for(;null!==u||null!==d;){ngDevMode&&Ee(l,999,"Are we stuck in infinite loop?"),ngDevMode&&Ee(c,999,"Are we stuck in infinite loop?");const f=l<o.length?o[l+1]:void 0,p=c<i.length?i[c+1]:void 0;let h,g=null;u===d?(l+=2,c+=2,f!==p&&(g=d,h=p)):null===d||null!==u&&u<d?(l+=2,g=u):(ngDevMode&&ke(d,"Expecting to have a valid key"),c+=2,g=d,h=p),null!==g&&Rf(e,t,n,r,g,h,s,a),u=l<o.length?o[l]:null,d=c<i.length?i[c]:null}}(o,a,s,s[11],s[i+1],s[i+1]=function(e,t,n){if(null==n||""===n)return lt;const r=[],o=xi(n);if(Array.isArray(o))for(let t=0;t<o.length;t++)e(r,o[t],!0);else if("object"==typeof o)for(const t in o)o.hasOwnProperty(t)&&e(r,t,o[t]);else"string"==typeof o?t(r,o):ngDevMode&&Ae("Unsupported styling type "+typeof o+": "+o);return r}(e,t,n),r,i)}}function kf(e,t){return t>=e.expandoStartIndex}function Af(e,t,n,r){ngDevMode&&Kt(e);const o=e.data;if(null===o[n+1]){const i=o[ur()];ngDevMode&&ke(i,"TNode expected");const s=kf(e,n);Ff(i,r)&&null===t&&!s&&(t=!1),t=function(e,t,n,r){const o=Xn(e);let i=r?t.residualClasses:t.residualStyles;if(null===o)0===(r?t.classBindings:t.styleBindings)&&(n=Pf(n=Nf(null,e,t,n,r),t.attrs,r),i=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==o)if(n=Nf(o,e,t,n,r),null===i){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Ka(r))return e[Wa(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=Nf(null,e,t,n[1],r),n=Pf(n,t.attrs,r),function(e,t,n,r){const o=n?t.classBindings:t.styleBindings;ngDevMode&&De(Ka(o),0,"Expecting to have at least one template styling binding."),e[Wa(o)]=r}(e,t,r,n))}else i=function(e,t,n){let r;const o=t.directiveEnd;ngDevMode&&De(t.directiveStylingLast,-1,"By the time this function gets called at least one hostBindings-node styling instruction must have executed.");for(let i=1+t.directiveStylingLast;i<o;i++)r=Pf(r,e[i].hostAttrs,n);return Pf(r,t.attrs,n)}(e,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),n}(o,i,t,r),function(e,t,n,r,o,i){ngDevMode&&Kt(jn());let s=i?t.classBindings:t.styleBindings,a=Wa(s),l=Ka(s);e[r]=n;let c,u=!1;if(Array.isArray(n)){const e=n;c=e[1],(null===c||So(e,c)>0)&&(u=!0)}else c=n;if(o)if(0!==l){const t=Wa(e[a+1]);e[r+1]=za(t,a),0!==t&&(e[t+1]=Ga(e[t+1],r)),e[a+1]=(d=e[a+1],f=r,ngDevMode&&we(d,"expected number"),ngDevMode&&_e(f,0,32767),131071&d|f<<17)}else e[r+1]=za(a,0),0!==a&&(e[a+1]=Ga(e[a+1],r)),a=r;else e[r+1]=za(l,0),ngDevMode&&Me(0!==a&&0===l,!1,"Adding template bindings after hostBindings is not allowed."),0===a?a=r:e[l+1]=Ga(e[l+1],r),l=r;var d,f;u&&(e[r+1]=Za(e[r+1])),df(e,c,r,!0),df(e,c,r,!1),function(e,t,n,r,o){const i=o?e.residualClasses:e.residualStyles;null!=i&&"string"==typeof t&&So(i,t)>=0&&(n[r+1]=Ya(n[r+1]))}(t,c,e,r,i),s=za(a,l),i?t.classBindings=s:t.styleBindings=s}(o,i,t,n,s,r)}}function Nf(e,t,n,r,o){let i=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(i=t[a],ngDevMode&&ke(i,"expected to be defined"),r=Pf(r,i.hostAttrs,o),i!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Pf(e,t,n){const r=n?1:2;let o=-1;if(null!==t)for(let i=0;i<t.length;i++){const s=t[i];"number"==typeof s?o=s:o===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),To(e,s,!!n||t[++i]))}return void 0===e?null:e}function jf(e,t,n){To(e,t,xi(n))}function Rf(e,t,n,r,o,i,s,a){if(!(3&t.type))return;const l=e.data,c=l[a+1];$f(Ja(c)?Vf(l,t,n,o,Ka(c),s):void 0)||($f(i)||Qa(c)&&(i=Vf(l,null,n,o,a,s)),function(e,t,n,r,o){const i=mn(e);if(t)o?(ngDevMode&&ngDevMode.rendererAddClass++,i?e.addClass(n,r):(ngDevMode&&ke(n.classList,"HTMLElement expected"),n.classList.add(r))):(ngDevMode&&ngDevMode.rendererRemoveClass++,i?e.removeClass(n,r):n.classList.remove(r));else{let t=-1===r.indexOf("-")?void 0:zs.DashCase;if(null==o)ngDevMode&&ngDevMode.rendererRemoveStyle++,i?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const s="string"==typeof o&&o.endsWith("!important");s&&(o=o.slice(0,-10),t|=zs.Important),ngDevMode&&ngDevMode.rendererSetStyle++,i?e.setStyle(n,r,o,t):(ngDevMode&&ke(n.style,"HTMLElement expected"),n.style.setProperty(r,o,s?"important":""))}}}(r,s,wn(ur(),n),o,i))}function Vf(e,t,n,r,o,i){const s=null===t;let a;for(;o>0;){const t=e[o],i=Array.isArray(t),l=i?t[1]:t,c=null===l;let u=n[o+1];u===Ha&&(u=c?lt:void 0);let d=c?Oo(u,r):l===r?u:void 0;if(i&&!$f(d)&&(d=Oo(t,r)),$f(d)&&(a=d,s))return a;const f=e[o+1];o=s?Wa(f):Ka(f)}if(null!==t){let e=i?t.residualClasses:t.residualStyles;null!=e&&(a=Oo(e,r))}return a}function $f(e){return void 0!==e}function Ff(e,t){return 0!=(e.flags&(t?16:32))}function Lf(e,t=""){const n=Pn(),r=jn(),o=e+St;ngDevMode&&Me(Wn(),r.bindingStartIndex,"text nodes should be created before any bindings"),ngDevMode&&Pe(n,o);const i=r.firstCreatePass?jl(r,o,1,t,null):r.data[o],s=n[o]=ea(n[11],t);ba(r,n,s,i),Ln(i,!1)}function Hf(e){return Bf("",e,""),Hf}function Bf(e,t,n){const r=Pn(),o=Fu(r,e,t,n);return o!==Ha&&Sc(r,ur(),o),Bf}function Uf(e,t,n,r,o){const i=Pn(),s=Lu(i,e,t,n,r,o);return s!==Ha&&Sc(i,ur(),s),Uf}function qf(e,t,n,r,o,i,s){const a=Pn(),l=Hu(a,e,t,n,r,o,i,s);return l!==Ha&&Sc(a,ur(),l),qf}function zf(e,t,n,r,o,i,s,a,l){const c=Pn(),u=Bu(c,e,t,n,r,o,i,s,a,l);return u!==Ha&&Sc(c,ur(),u),zf}function Wf(e,t,n,r,o,i,s,a,l,c,u){const d=Pn(),f=Uu(d,e,t,n,r,o,i,s,a,l,c,u);return f!==Ha&&Sc(d,ur(),f),Wf}function Qf(e,t,n,r,o,i,s,a,l,c,u,d,f){const p=Pn(),h=qu(p,e,t,n,r,o,i,s,a,l,c,u,d,f);return h!==Ha&&Sc(p,ur(),h),Qf}function Zf(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h){const g=Pn(),y=zu(g,e,t,n,r,o,i,s,a,l,c,u,d,f,p,h);return y!==Ha&&Sc(g,ur(),y),Zf}function Kf(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y){const m=Pn(),v=Wu(m,e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y);return v!==Ha&&Sc(m,ur(),v),Kf}function Gf(e){const t=Pn(),n=$u(t,e);return n!==Ha&&Sc(t,ur(),n),Gf}function Jf(e,t,n){Sf(To,Tf,Fu(Pn(),e,t,n),!0)}function Yf(e,t,n,r,o){Sf(To,Tf,Lu(Pn(),e,t,n,r,o),!0)}function Xf(e,t,n,r,o,i,s){Sf(To,Tf,Hu(Pn(),e,t,n,r,o,i,s),!0)}function ep(e,t,n,r,o,i,s,a,l){Sf(To,Tf,Bu(Pn(),e,t,n,r,o,i,s,a,l),!0)}function tp(e,t,n,r,o,i,s,a,l,c,u){Sf(To,Tf,Uu(Pn(),e,t,n,r,o,i,s,a,l,c,u),!0)}function np(e,t,n,r,o,i,s,a,l,c,u,d,f){Sf(To,Tf,qu(Pn(),e,t,n,r,o,i,s,a,l,c,u,d,f),!0)}function rp(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h){Sf(To,Tf,zu(Pn(),e,t,n,r,o,i,s,a,l,c,u,d,f,p,h),!0)}function op(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y){Sf(To,Tf,Wu(Pn(),e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y),!0)}function ip(e){Sf(To,Tf,$u(Pn(),e),!0)}function sp(e,t,n){xf(Fu(Pn(),e,t,n))}function ap(e,t,n,r,o){xf(Lu(Pn(),e,t,n,r,o))}function lp(e,t,n,r,o,i,s){xf(Hu(Pn(),e,t,n,r,o,i,s))}function cp(e,t,n,r,o,i,s,a,l){xf(Bu(Pn(),e,t,n,r,o,i,s,a,l))}function up(e,t,n,r,o,i,s,a,l,c,u){xf(Uu(Pn(),e,t,n,r,o,i,s,a,l,c,u))}function dp(e,t,n,r,o,i,s,a,l,c,u,d,f){xf(qu(Pn(),e,t,n,r,o,i,s,a,l,c,u,d,f))}function fp(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h){xf(zu(Pn(),e,t,n,r,o,i,s,a,l,c,u,d,f,p,h))}function pp(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y){xf(Wu(Pn(),e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y))}function hp(e){xf($u(Pn(),e))}function gp(e,t,n,r,o){return Of(e,Fu(Pn(),t,n,r),o,!1),gp}function yp(e,t,n,r,o,i,s){return Of(e,Lu(Pn(),t,n,r,o,i),s,!1),yp}function mp(e,t,n,r,o,i,s,a,l){return Of(e,Hu(Pn(),t,n,r,o,i,s,a),l,!1),mp}function vp(e,t,n,r,o,i,s,a,l,c,u){return Of(e,Bu(Pn(),t,n,r,o,i,s,a,l,c),u,!1),vp}function bp(e,t,n,r,o,i,s,a,l,c,u,d,f){return Of(e,Uu(Pn(),t,n,r,o,i,s,a,l,c,u,d),f,!1),bp}function wp(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h){return Of(e,qu(Pn(),t,n,r,o,i,s,a,l,c,u,d,f,p),h,!1),wp}function _p(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y){return Of(e,zu(Pn(),t,n,r,o,i,s,a,l,c,u,d,f,p,h,g),y,!1),_p}function Cp(e,t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m,v){return Of(e,Wu(Pn(),t,n,r,o,i,s,a,l,c,u,d,f,p,h,g,y,m),v,!1),Cp}function Mp(e,t,n){return Of(e,$u(Pn(),t),n,!1),Mp}function Dp(e,t,n){const r=Pn(),o=Zn();if(Nu(r,o,t)){const i=jn(),s=fr();Gl(i,s,r,e,t,r[11],n,!0),ngDevMode&&Mc(i.data,s,e,o)}return Dp}function xp(e,t,n){const r=Pn(),o=Zn();if(Nu(r,o,t)){const i=jn(),s=fr();Gl(i,s,r,e,t,Ec(Xn(i.data),s,r),n,!0),ngDevMode&&Mc(i.data,s,e,o)}return xp}"undefined"==typeof ngI18nClosureMode&&(it.ngI18nClosureMode="undefined"!=typeof goog&&"function"==typeof goog.getMsg);const Ip=void 0;var Ep=["en",[["a","p"],["AM","PM"],Ip],[["AM","PM"],Ip,Ip],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ip,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ip,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ip,"{1} 'at' {0}",Ip],[".",",",";","%","+","-","E","×","‰","∞","NaN",":"],["#,##0.###","#,##0%","¤#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Tp={};function Op(e,t,n){"string"!=typeof t&&(n=t,t=e[jp.LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),Tp[t]=e,n&&(Tp[t][jp.ExtraData]=n)}function Sp(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Np(t);if(n)return n;const r=t.split("-")[0];if(n=Np(r),n)return n;if("en"===r)return Ep;throw new Error(`Missing locale data for the locale "${e}".`)}function kp(e){return Sp(e)[jp.CurrencyCode]||null}function Ap(e){return Sp(e)[jp.PluralCase]}function Np(e){return e in Tp||(Tp[e]=it.ng&&it.ng.common&&it.ng.common.locales&&it.ng.common.locales[e]),Tp[e]}function Pp(){Tp={}}var jp;!function(e){e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData"}(jp||(jp={}));const Rp=["zero","one","two","few","many"],Vp="en-US",$p={marker:"element"},Fp={marker:"ICU"};var Lp;!function(e){e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT"}(Lp||(Lp={}));let Hp=Vp;function Bp(e){ke(e,"Expected localeId to be defined"),"string"==typeof e&&(Hp=e.toLowerCase().replace(/_/g,"-"))}function Up(e,t,n){const r=t.insertBeforeIndex,o=Array.isArray(r)?r[0]:r;return null===o?ga(e,0,n):(ngDevMode&&Pe(n,o),bn(n[o]))}function qp(e,t,n,r,o){const i=t.insertBeforeIndex;if(Array.isArray(i)){ngDevMode&&Ne(r);let s=r,a=null;if(3&t.type||(a=s,s=o),null!==s&&0==(2&t.flags))for(let t=1;t<i.length;t++)ua(e,s,n[i[t]],a,!1)}}function zp(e,t){if(ngDevMode&&Me(t.insertBeforeIndex,null,"We expect that insertBeforeIndex is not set"),e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];Wp(r)||Qp(r,t)&&null===Zp(r)&&Kp(r,t.index)}}function Wp(e){return!(64&e.type)}function Qp(e,t){return Wp(t)||e.index>t.index}function Zp(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function Kp(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(va(Up,qp),e.insertBeforeIndex=t)}function Gp(e,t){const n=e.data[t];if(null===n||"string"==typeof n)return null;!ngDevMode||n.hasOwnProperty("tViews")||n.hasOwnProperty("currentCaseLViewIndex")||Ae("We expect to get 'null'|'TIcu'|'TIcuContainer', but got: "+n);const r=n.hasOwnProperty("currentCaseLViewIndex")?n:n.value;return ngDevMode&&Bt(r),r}function Jp(e,t,n){const r=Rl(e,n,64,null,null);return zp(t,r),r}function Yp(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}function Xp(e){return e>>>17}function eh(e){return(131070&e)>>>1}function th(e){return 1&e}let nh=0,rh=0;function oh(e,t,n,r){ngDevMode&&Ne(r);const o=n[11];let i,s=null;for(let a=0;a<t.length;a++){const l=t[a];if("string"==typeof l){const e=t[++a];null===n[e]&&(ngDevMode&&ngDevMode.rendererCreateTextNode++,ngDevMode&&Pe(n,e),n[e]=ea(o,l))}else if("number"==typeof l)switch(1&l){case 0:const c=Xp(l);let u,d;if(null===s&&(s=c,i=pa(o,r)),c===s?(u=r,d=i):(u=null,d=bn(n[c])),null!==d){ngDevMode&&Ne(d);const t=eh(l);ngDevMode&&Oe(t,St,"Missing ref");const r=n[t];ngDevMode&&Ne(r),ua(o,d,r,u,!1);const i=Gp(e,t);if(null!==i&&"object"==typeof i){ngDevMode&&Bt(i);const t=Yp(i,n);null!==t&&oh(e,i.create[t],n,n[i.anchorIdx])}}break;case 1:const f=l>>>1,p=t[++a],h=t[++a];cc(o,wn(f,n),null,null,p,h,null);break;default:if(ngDevMode)throw new pe(700,`Unable to determine the type of mutate operation for "${l}"`)}else switch(l){case Fp:const e=t[++a],r=t[++a];null===n[r]&&(ngDevMode&&Me(typeof e,"string",`Expected "${e}" to be a comment node value`),ngDevMode&&ngDevMode.rendererCreateComment++,ngDevMode&&Gt(n,r),_s(n[r]=na(o,e),n));break;case $p:const i=t[++a],s=t[++a];null===n[s]&&(ngDevMode&&Me(typeof i,"string",`Expected "${i}" to be an element node tag name`),ngDevMode&&ngDevMode.rendererCreateElement++,ngDevMode&&Gt(n,s),_s(n[s]=ra(o,i,null),n));break;default:ngDevMode&&Ae(`Unable to determine the type of mutate operation for "${l}"`)}}}function ih(e,t,n,r,o){for(let i=0;i<n.length;i++){const s=n[i],a=n[++i];if(s&o){let o="";for(let s=i+1;s<=i+a;s++){const i=n[s];if("string"==typeof i)o+=i;else if("number"==typeof i)if(i<0)o+=ge(t[r-i]);else{const a=i>>>2;switch(3&i){case 1:const i=n[++s],l=n[++s],c=e.data[a];ngDevMode&&ke(c,"Experting TNode or string"),"string"==typeof c?cc(t[11],t[a],null,c,i,o,l):Gl(e,c,t,i,o,t[11],l,!1);break;case 0:const u=t[a];null!==u&&ta(t[11],u,o);break;case 2:ah(e,Gp(e,a),t,o);break;case 3:sh(e,Gp(e,a),r,t)}}}}else{const o=n[i+1];if(o>0&&3==(3&o)){const n=Gp(e,o>>>2);t[n.currentCaseLViewIndex]<0&&sh(e,n,r,t)}}i+=a}}function sh(e,t,n,r){ngDevMode&&Pe(r,t.currentCaseLViewIndex);let o=r[t.currentCaseLViewIndex];if(null!==o){let i=nh;o<0&&(o=r[t.currentCaseLViewIndex]=~o,i=-1),ih(e,r,t.update[o],n,i)}}function ah(e,t,n,r){const o=function(e,t){let n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:{const r=function(e,t){const n=Ap(t)(parseInt(e,10)),r=Rp[n];return void 0!==r?r:"other"}(t,Hp);n=e.cases.indexOf(r),-1===n&&"other"!==r&&(n=e.cases.indexOf("other"));break}case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(Yp(t,n)!==o&&(lh(e,t,n),n[t.currentCaseLViewIndex]=null===o?null:~o,null!==o)){const r=n[t.anchorIdx];r&&(ngDevMode&&Ne(r),oh(e,t.create[o],n,r))}}function lh(e,t,n){let r=Yp(t,n);if(null!==r){const o=t.remove[r];for(let t=0;t<o.length;t++){const r=o[t];if(r>0){const e=wn(r,n);null!==e&&Ma(n[11],e)}else lh(e,Gp(e,~r),n)}}}function ch(){const e=[];let t,n,r=-1;function o(e,t){r=0;const o=Yp(e,t);null!==o?(ngDevMode&&_e(o,0,e.cases.length-1),n=e.remove[o]):n=lt}function i(){if(r<n.length){const s=n[r++];if(ngDevMode&&we(s,"Expecting OpCode number"),s>0){const e=t[s];return ngDevMode&&Ne(e),e}{e.push(r,n);const a=~s,l=t[1].data[a];return ngDevMode&&Bt(l),o(l,t),i()}}return 0===e.length?null:(n=e.pop(),r=e.pop(),i())}return function(n,r){for(t=r;e.length;)e.pop();return ngDevMode&&Ft(n,r),o(n.value,r),i}}function uh(e){const t=e||(Array.isArray(this)?this:[]);let n=[];for(let e=0;e<t.length;e++){const r=t[e++],o=t[e],i=(r&Lp.COMMENT)===Lp.COMMENT,s=(r&Lp.APPEND_EAGERLY)===Lp.APPEND_EAGERLY,a=r>>>Lp.SHIFT;n.push(`lView[${a}] = document.${i?"createComment":"createText"}(${JSON.stringify(o)});`),s&&n.push(`parent.appendChild(lView[${a}]);`)}return n}function dh(e){const t=new hh(e||(Array.isArray(this)?this:[]));let n=[];function r(e){const n=e>>>2;switch(3&e){case 0:return`(lView[${n}] as Text).textContent = $$$`;case 1:const e=t.consumeString(),r=t.consumeFunction();return`(lView[${n}] as Element).setAttribute('${e}', ${r?`(${r})($$$)`:"$$$"})`;case 2:return`icuSwitchCase(${n}, $$$)`;case 3:return`icuUpdateCase(${n})`}throw new Error("unexpected OpCode")}for(;t.hasMore();){let e=t.consumeNumber(),o=t.consumeNumber();const i=t.i+o,s=[];let a="";for(;t.i<i;){let e=t.consumeNumberOrString();if("string"==typeof e)a+=e;else if(e<0)a+="${lView[i"+e+"]}";else{const t=r(e);s.push(t.replace("$$$","`"+a+"`")+";"),a=""}}n.push(`if (mask & 0b${e.toString(2)}) { ${s.join(" ")} }`)}return n}function fh(e){const t=new hh(e||(Array.isArray(this)?this:[]));let n=[];function r(e){const n=Xp(e),r=eh(e);switch(th(e)){case 0:return`(lView[${n}] as Element).appendChild(lView[${o}])`;case 1:return`(lView[${r}] as Element).setAttribute("${t.consumeString()}", "${t.consumeString()}")`}throw new Error("Unexpected OpCode: "+th(e))}let o=-1;for(;t.hasMore();){let e=t.consumeNumberStringOrMarker();if(e===Fp){const e=t.consumeString();o=t.consumeNumber(),n.push(`lView[${o}] = document.createComment("${e}")`)}else if(e===$p){const e=t.consumeString();o=t.consumeNumber(),n.push(`lView[${o}] = document.createElement("${e}")`)}else if("string"==typeof e)o=t.consumeNumber(),n.push(`lView[${o}] = document.createTextNode("${e}")`);else{if("number"!=typeof e)throw new Error("Unexpected value");{const t=r(e);t&&n.push(t)}}}return n}function ph(e){const t=e||(Array.isArray(this)?this:[]);let n=[];for(let e=0;e<t.length;e++){const r=t[e];r>0?n.push(`remove(lView[${r}])`):n.push(`removeNestedICU(${~r})`)}return n}class hh{constructor(e){this.i=0,this.codes=e}hasMore(){return this.i<this.codes.length}consumeNumber(){let e=this.codes[this.i++];return we(e,"expecting number in OpCode"),e}consumeString(){let e=this.codes[this.i++];return Ce(e,"expecting string in OpCode"),e}consumeFunction(){let e=this.codes[this.i++];if(null===e||"function"==typeof e)return e;throw new Error("expecting function in OpCode")}consumeNumberOrString(){let e=this.codes[this.i++];return"string"==typeof e||we(e,"expecting number or string in OpCode"),e}consumeNumberStringOrMarker(){let e=this.codes[this.i++];return"string"==typeof e||"number"==typeof e||e==Fp||e==$p||we(e,"expecting number, string, ICU_MARKER or ELEMENT_MARKER in OpCode"),e}}const gh=/�(\d+):?\d*�/gi,yh=/({\s*�\d+:?\d*�\s*,\s*\S{6}\s*,[\s\S]*})/gi,mh=/�(\d+)�/,vh=/^\s*(�\d+:?\d*�)\s*,\s*(select|plural)\s*,/,bh=/�\/?\*(\d+:\d+)�/gi,wh=/�(\/?[#*]\d+):?\d*�/gi,_h=/\uE500/g;function Ch(e,t,n,r,o,i,s){const a=Vl(e,r,1,null);let l=a<<Lp.SHIFT,c=Fn();t===c&&(c=null),null===c&&(l|=Lp.APPEND_EAGERLY),s&&(l|=Lp.COMMENT,void 0===Ws&&(Ws=ch())),o.push(l,null===i?"":i);const u=Rl(e,a,s?32:1,null===i?ngDevMode?"{{?}}":"":i,null);zp(n,u);const d=u.index;return Ln(u,!1),null!==c&&t!==c&&function(e,t){ngDevMode&&Ht(e);let n=e.insertBeforeIndex;null===n?(va(Up,qp),n=e.insertBeforeIndex=[null,t]):(Me(Array.isArray(n),!0,"Expecting array here"),n.push(t))}(c,d),u}function Mh(e,t,n,r,o,i,s){const a=s.match(gh),l=Ch(e,t,n,i,r,a?null:s,!1);a&&Dh(o,s,l.index,null,0,null)}function Dh(e,t,n,r,o,i){ngDevMode&&Se(n,St,"Index must be in absolute LView offset");const s=e.length,a=s+1;e.push(null,null);const l=s+2;ngDevMode&&el(e,dh);const c=t.split(gh);let u=0;for(let t=0;t<c.length;t++){const n=c[t];if(1&t){const t=o+parseInt(n,10);e.push(-1-t),u|=Ih(t)}else""!==n&&e.push(n)}return e.push(n<<2|(r?1:0)),r&&e.push(r,i),e[s]=u,e[a]=e.length-l,u}function xh(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r&&r<0&&t++}return t}function Ih(e){return 1<<Math.min(e,31)}function Eh(e){let t,n,r="",o=0,i=!1;for(;null!==(t=bh.exec(e));)i?t[0]===`�/*${n}�`&&(o=t.index,i=!1):(r+=e.substring(o,t.index+t[0].length),n=t[1],i=!0);return ngDevMode&&Me(i,!1,`Tag mismatch: unable to find the end of the sub-template in the translation "${e}"`),r+=e.substr(o),r}function Th(e,t,n,r,o,i){ngDevMode&&ke(o,"ICU expression must be defined");let s=0;const a={type:o.type,currentCaseLViewIndex:Vl(e,t,1,null),anchorIdx:i,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(Ih(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,o,i),function(e,t,n){const r=e.data[t];ngDevMode&&Me(null===r||r.hasOwnProperty("tViews"),!0,"We expect to get 'null'|'TIcuContainer'"),null===r?e.data[t]=n:(ngDevMode&&xr(r,32),r.value=n)}(e,i,a);const l=o.values;for(let i=0;i<l.length;i++){const c=l[i],u=[];for(let e=0;e<c.length;e++){const t=c[e];if("string"!=typeof t){const n=u.push(t)-1;c[e]=`\x3c!--�${n}�--\x3e`}}s=kh(e,a,t,n,r,o.cases[i],c.join(""),u)|s}s&&function(e,t,n){e.push(t,1,n<<2|3)}(n,s,i)}function Oh(e){const t=[],n=[];let r=1,o=0;const i=Sh(e=e.replace(vh,(function(e,t,n){return r="select"===n?0:1,o=parseInt(t.substr(1),10),""})));for(let e=0;e<i.length;){let o=i[e++].trim();1===r&&(o=o.replace(/\s*(?:=)?(\w+)\s*/,"$1")),o.length&&t.push(o);const s=Sh(i[e++]);t.length>n.length&&n.push(s)}return{type:r,mainBinding:o,cases:t,values:n}}function Sh(e){if(!e)return[];let t=0;const n=[],r=[],o=/[{}]/g;let i;for(o.lastIndex=0;i=o.exec(e);){const o=i.index;if("}"==i[0]){if(n.pop(),0==n.length){const n=e.substring(t,o);vh.test(n)?r.push(Oh(n)):r.push(n),t=o+1}}else{if(0==n.length){const n=e.substring(t,o);r.push(n),t=o+1}n.push("{")}}const s=e.substring(t);return r.push(s),r}function kh(e,t,n,r,o,i,s,a){const l=[],c=[],u=[];ngDevMode&&(el(l,fh),el(c,ph),el(u,dh)),t.cases.push(i),t.create.push(l),t.remove.push(c),t.update.push(u);const d=Ni(gn()).getInertBodyElement(s);ngDevMode&&ke(d,"Unable to generate inert body element");const f=as(d)||d;return f?Ah(e,t,n,r,l,c,u,f,o,a,0):0}function Ah(e,t,n,r,o,i,s,a,l,c,u){let d=0,f=a.firstChild;for(;f;){const a=Vl(e,n,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:const p=f,h=p.tagName.toLowerCase();if(Zi.hasOwnProperty(h)){jh(o,$p,h,l,a),e.data[a]=h;const g=p.attributes;for(let e=0;e<g.length;e++){const t=g.item(e),n=t.name.toLowerCase();t.value.match(gh)?Xi.hasOwnProperty(n)?Ki[n]?Dh(s,t.value,a,t.name,0,$i):Gi[n]?Dh(s,t.value,a,t.name,0,Fi):Dh(s,t.value,a,t.name,0,null):ngDevMode&&console.warn(`WARNING: ignoring unsafe attribute value ${n} on element ${h} (see https://g.co/ng/security#xss)`):Rh(o,a,t)}d=Ah(e,t,n,r,o,i,s,f,a,c,u+1)|d,Nh(i,a,u)}break;case Node.TEXT_NODE:const g=f.textContent||"",y=g.match(gh);jh(o,null,y?"":g,l,a),Nh(i,a,u),y&&(d=Dh(s,g,a,null,0,null)|d);break;case Node.COMMENT_NODE:const m=mh.exec(f.textContent||"");if(m){const t=parseInt(m[1],10),s=c[t];jh(o,Fp,ngDevMode?`nested ICU ${t}`:"",l,a),Th(e,n,r,l,s,a),Ph(i,a,u)}}f=f.nextSibling}return d}function Nh(e,t,n){0===n&&e.push(t)}function Ph(e,t,n){0===n&&(e.push(~t),e.push(t))}function jh(e,t,n,r,o){var i,s;null!==t&&e.push(t),e.push(n,o,(0,i=r,s=o,ngDevMode&&Se(i,0,"Missing parent index"),ngDevMode&&Oe(s,0,"Missing ref index"),0|i<<17|s<<1))}function Rh(e,t,n){e.push(t<<1|1,n.name,n.value)}const Vh=/\[(�.+?�?)\]/,$h=/\[(�.+?�?)\]|(�\/?\*\d+:\d+�)/g,Fh=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,Lh=/{([A-Z0-9_]+)}/g,Hh=/�I18N_EXP_(ICU(_\d+)?)�/g,Bh=/\/\*/,Uh=/\d+\:(\d+)/;function qh(e,t,n=-1){const r=jn(),o=Pn(),i=St+e;ngDevMode&&ke(r,"tView should be defined");const s=En(r.consts,t),a=Fn();r.firstCreatePass&&function(e,t,n,r,o,i){const s=Fn(),a=[],l=[],c=[[]];ngDevMode&&(el(a,uh),el(l,dh)),o=function(e,t){if(function(e){return-1===e}(t))return Eh(e);{const n=e.indexOf(`:${t}�`)+2+t.toString().length,r=e.search(new RegExp(`�\\/\\*\\d+:${t}�`));return Eh(e.substring(n,r))}}(o,i);const u=(d=o,d.replace(_h," ")).split(wh);var d;for(let i=0;i<u.length;i++){let d=u[i];if(0==(1&i)){const i=Sh(d);for(let u=0;u<i.length;u++){let d=i[u];if(0==(1&u)){const t=d;ngDevMode&&Ce(t,"Parsed ICU part should be string"),""!==t&&Mh(e,s,c[0],a,l,n,t)}else{const i=d;if("object"!=typeof i)throw new Error(`Unable to parse ICU expression in "${o}" message.`);const u=Ch(e,s,c[0],n,a,ngDevMode?`ICU ${r}:${i.mainBinding}`:"",!0).index;ngDevMode&&Se(u,St,"Index must be in absolute LView offset"),Th(e,n,l,t,i,u)}}}else{const t=47===d.charCodeAt(0),n=d.charCodeAt(t?1:0);ngDevMode&&je(n,42,35);const r=St+Number.parseInt(d.substring(t?2:1));if(t)c.shift(),Ln(Fn(),!1);else{const t=Jp(e,c[0],r);c.unshift([]),Ln(t,!0)}}}e.data[r]={create:a,update:l}}(r,null===a?0:a.index,o,i,s,n);const l=r.data[i],c=ca(r,a===o[6]?null:a,o),u=a&&8&a.type?o[a.index]:null;!function(e,t,n,r){const o=e[11];for(let i=0;i<t.length;i++){const s=t[i++],a=t[i],l=(s&Lp.COMMENT)===Lp.COMMENT,c=(s&Lp.APPEND_EAGERLY)===Lp.APPEND_EAGERLY,u=s>>>Lp.SHIFT;let d=e[u];null===d&&(d=e[u]=l?o.createComment(a):ea(o,a)),c&&null!==n&&ua(o,n,d,r,!1)}}(o,l.create,c,u),Gn(!0)}function zh(){Gn(!1)}function Wh(e,t,n){qh(e,t,n),zh()}function Qh(e,t){const n=jn();ngDevMode&&ke(n,"tView should be defined");const r=En(n.consts,t);!function(e,t,n){const r=Vn().index,o=[];if(ngDevMode&&el(o,dh),e.firstCreatePass&&null===e.data[t]){for(let e=0;e<n.length;e+=2){const t=n[e],i=n[e+1];if(""!==i){if(yh.test(i))throw new Error(`ICU expressions are not supported in attributes. Message: "${i}".`);Dh(o,i,r,t,xh(o),null)}}e.data[t]=o}}(n,e+St,r)}function Zh(e){return Nu(Pn(),Zn(),e)&&(nh|=1<<Math.min(rh,31)),rh++,Zh}function Kh(e){!function(e,t,n){if(rh>0){ngDevMode&&ke(e,"tView should be defined");const r=e.data[n];ih(e,t,Array.isArray(r)?r:r.update,Wn()-rh-1,nh)}nh=0,rh=0}(jn(),Pn(),e+St)}function Gh(e,t={}){return function(e,t={}){let n=e;if(Vh.test(e)){const e={},t=[0];n=n.replace($h,((n,r,o)=>{const i=r||o,s=e[i]||[];if(s.length||(i.split("|").forEach((e=>{const t=e.match(Uh),n=t?parseInt(t[1],10):0,r=Bh.test(e);s.push([n,r,e])})),e[i]=s),!s.length)throw new Error(`i18n postprocess: unmatched placeholder - ${i}`);const a=t[t.length-1];let l=0;for(let e=0;e<s.length;e++)if(s[e][0]===a){l=e;break}const[c,u,d]=s[l];return u?t.pop():a!==c&&t.push(c),s.splice(l,1),d}))}return Object.keys(t).length?(n=n.replace(Fh,((e,n,r,o,i,s)=>t.hasOwnProperty(r)?`${n}${t[r]}${s}`:e)),n=n.replace(Lh,((e,n)=>t.hasOwnProperty(n)?t[n]:e)),n=n.replace(Hh,((e,n)=>{if(t.hasOwnProperty(n)){const r=t[n];if(!r.length)throw new Error(`i18n postprocess: unmatched ICU - ${e} with key: ${n}`);return r.shift()}return e})),n):n}(e,t)}function Jh(e,t,n,r,o){if(e=de(e),Array.isArray(e))for(let i=0;i<e.length;i++)Jh(e[i],t,n,r,o);else{const i=jn(),s=Pn();let a=Zc(e)?e:de(e.provide),l=zc(e);const c=Vn(),u=1048575&c.providerIndexes,d=c.directiveStart,f=c.providerIndexes>>20;if(Zc(e)||!e.multi){const r=new Mr(l,o,kd),p=eg(a,t,o?u:u+f,d);-1===p?(Hr(Vr(c,s),i,a),Yh(i,e,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[p]=r,s[p]=r)}else{const p=eg(a,t,u+f,d),h=eg(a,t,u,u+f),g=p>=0&&n[p],y=h>=0&&n[h];if(o&&!y||!o&&!g){Hr(Vr(c,s),i,a);const u=function(e,t,n,r,o){const i=new Mr(e,n,kd);return i.multi=[],i.index=t,i.componentProviders=0,Xh(i,o,r&&!n),i}(o?ng:tg,n.length,o,r,l);!o&&y&&(n[h].providerFactory=u),Yh(i,e,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,o&&(c.providerIndexes+=1048576),n.push(u),s.push(u)}else Yh(i,e,p>-1?p:h,Xh(n[o?h:p],l,!o&&r));!o&&r&&y&&n[h].componentProviders++}}}function Yh(e,t,n,r){const o=Zc(t),i=!!t.useClass;if(o||i){const s=(i?de(t.useClass):t).prototype.ngOnDestroy;if(s){const i=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){ngDevMode&&ke(r,"indexInFactory when registering multi factory destroy hook");const e=i.indexOf(n);-1===e?i.push(n,[r,s]):i[e+1].push(r,s)}else i.push(n,s)}}}function Xh(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function eg(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function tg(e,t,n,r){return rg(this.multi,[])}function ng(e,t,n,r){const o=this.multi;let i;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Kr(n,n[1],this.providerFactory.index,r);i=t.slice(0,e),rg(o,i);for(let n=e;n<t.length;n++)i.push(t[n])}else i=[],rg(o,i);return i}function rg(e,t){for(let n=0;n<e.length;n++){const r=e[n];t.push(r())}return t}function og(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=jn();if(r.firstCreatePass){const o=$t(e);Jh(n,r.data,r.blueprint,o,!0),Jh(t,r.data,r.blueprint,o,!1)}}(n,r?r(e):e,t)}}class ig{}class sg{}class ag{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${ae(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class lg{}function cg(e,t){return new ug(_n(e,t))}lg.NULL=new ag;class ug{constructor(e){this.nativeElement=e}}function dg(e){return e instanceof ug?e.nativeElement:e}ug.__NG_ELEMENT_ID__=function(){return cg(Vn(),Pn())},new uo("Renderer2Interceptor");class fg{}class pg{}pg.__NG_ELEMENT_ID__=()=>function(){const e=Pn(),t=Dn(Vn().index,e);return function(e){const t=e[11];if(ngDevMode&&!mn(t))throw new Error("Cannot inject Renderer2 when the application uses Renderer3!");return t}(Nt(t)?t:e)}();class hg{}hg.ɵprov=Re({token:hg,providedIn:"root",factory:()=>null});class gg{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const yg=new gg("13.2.6"),mg={};function vg(e,t,n,r,o=!1){for(;null!==n;){ngDevMode&&xr(n,63);const i=t[n.index];if(null!==i&&r.push(bn(i)),Pt(i))for(let e=At;e<i.length;e++){const t=i[e],n=t[1].firstChild;null!==n&&vg(t[1],t,n,r)}const s=n.type;if(8&s)vg(e,t,n.child,r);else if(32&s){const e=Qs(n,t);let o;for(;o=e();)r.push(o)}else if(16&s){const e=_a(t,n);if(Array.isArray(e))r.push(...e);else{const n=Zs(t[16]);ngDevMode&&Yt(n),vg(n[1],n,e,r,!0)}}n=o?n.projectionNext:n.next}return r}class bg{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return vg(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Pt(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(ngDevMode&&Me(n,e.indexOf(this._lView)-At,"An attached view should be in the same position within its container as its ViewRef in the VIEW_REFS array."),ia(e,n),Io(t,n))}this._attachedToViewContainer=!1}sa(this._lView[1],this._lView)}onDestroy(e){Zl(this._lView[1],this._lView,null,e)}markForCheck(){vc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){wc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){qn(!0);try{wc(e,t,n)}finally{qn(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef){const e=ngDevMode?"This view is already attached directly to the ApplicationRef!":"";throw new pe(902,e)}this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,xa(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer){const e=ngDevMode?"This view is already attached to a ViewContainer!":"";throw new pe(902,e)}this._appRef=e}}class wg extends bg{constructor(e){super(e),this._view=e}detectChanges(){_c(this._view)}checkNoChanges(){!function(e){qn(!0);try{_c(e)}finally{qn(!1)}}(this._view)}get context(){return null}}class _g extends lg{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){ngDevMode&&Ut(e);const t=It(e);return new Mg(t,this.ngModule)}}function Cg(e){const t=[];for(let n in e)if(e.hasOwnProperty(n)){const r=e[n];t.push({propName:r,templateName:n})}return t}class Mg extends sg{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(La).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Cg(this.componentDef.inputs)}get outputs(){return Cg(this.componentDef.outputs)}create(e,t,n,r){const o=(r=r||this.ngModule)?function(e,t){return{get:(n,r,o)=>{const i=e.get(n,mg,o);return i!==mg||r===mg?i:t.get(n,r,o)}}}(e,r.injector):e,i=o.get(fg,vn),s=o.get(hg,null),a=i.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?Ql(a,n,this.componentDef.encapsulation):ra(i.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?dn:"math"===t?fn:null}(l)),u=this.componentDef.onPush?576:528,d=hu(),f=Wl(0,null,null,1,0,null,null,null,null,null),p=Pl(null,f,d,u,null,null,i,a,s,o);let h,g;or(p);try{const e=fu(c,this.componentDef,p,i,a);if(c)if(n)Ir(a,c,["ng-version",yg.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,o=2;for(;r<e.length;){let i=e[r];if("string"==typeof i)2===o?""!==i&&t.push(i,e[++r]):8===o&&n.push(i);else{if(!ja(o))break;o=i}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Ir(a,c,e),t&&t.length>0&&Ta(a,c,t.join(" "))}if(g=Cn(f,St),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}h=pu(e,this.componentDef,p,d,[gu]),$l(f,p,null)}finally{cr()}return new Dg(this.componentType,h,cg(g,p),p,g)}}new _g;class Dg extends ig{constructor(e,t,n,r,o){super(),this.location=n,this._rootLView=r,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new wg(r),this.componentType=e}get injector(){return new Yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function xg(e,t,n,r){return Ge((()=>{const o=e;null!==t&&(o.hasOwnProperty("decorators")&&void 0!==o.decorators?o.decorators.push(...t):o.decorators=t),null!==n&&(o.ctorParameters=n),null!==r&&(o.hasOwnProperty("propDecorators")&&void 0!==o.propDecorators?o.propDecorators={...o.propDecorators,...r}:o.propDecorators=r)}))}class Ig{}class Eg{}const Tg=new Map;function Og(e){const t=new Set;!function e(n){const r=Ot(n,!0),o=r.id;if(null!==o){(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${ae(t)} vs ${ae(t.name)}`)})(o,Tg.get(o),n),Tg.set(o,n)}const i=Bs(r.imports);for(const n of i)t.has(n)||(t.add(n),e(n))}(e)}function Sg(e){return Tg.get(e)||wt[e]}function kg(e,t){return new Ag(e,t??null)}class Ag extends Ig{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new _g(this);const n=Ot(e);ngDevMode&&ke(n,`NgModule '${ae(e)}' is not a subtype of 'NgModuleType'.`),this._bootstrapComponents=Bs(n.bootstrap),this._r3Injector=Bc(e,t,[{provide:Ig,useValue:this},{provide:lg,useValue:this.componentFactoryResolver}],ae(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Kc.THROW_IF_NOT_FOUND,n=We.Default){return e===Kc||e===Ig||e===Pc?this:this._r3Injector.get(e,t,n)}destroy(){ngDevMode&&ke(this.destroyCbs,"NgModule already destroyed");const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach((e=>e())),this.destroyCbs=null}onDestroy(e){ngDevMode&&ke(this.destroyCbs,"NgModule already destroyed"),this.destroyCbs.push(e)}}class Ng extends Eg{constructor(e){super(),this.moduleType=e,null!==Ot(e)&&Og(e)}create(e){return new Ag(this.moduleType,e)}}function Pg(e,t,n){const r=zn()+e,o=Pn();return o[r]===Ha?ku(o,r,n?t.call(n):t()):Au(o,r)}function jg(e,t,n,r){return zg(Pn(),zn(),e,t,n,r)}function Rg(e,t,n,r,o){return Wg(Pn(),zn(),e,t,n,r,o)}function Vg(e,t,n,r,o,i){return Qg(Pn(),zn(),e,t,n,r,o,i)}function $g(e,t,n,r,o,i,s){return Zg(Pn(),zn(),e,t,n,r,o,i,s)}function Fg(e,t,n,r,o,i,s,a){const l=zn()+e,c=Pn(),u=Ru(c,l,n,r,o,i);return Nu(c,l+4,s)||u?ku(c,l+5,a?t.call(a,n,r,o,i,s):t(n,r,o,i,s)):Au(c,l+5)}function Lg(e,t,n,r,o,i,s,a,l){const c=zn()+e,u=Pn(),d=Ru(u,c,n,r,o,i);return Pu(u,c+4,s,a)||d?ku(u,c+6,l?t.call(l,n,r,o,i,s,a):t(n,r,o,i,s,a)):Au(u,c+6)}function Hg(e,t,n,r,o,i,s,a,l,c){const u=zn()+e,d=Pn();let f=Ru(d,u,n,r,o,i);return ju(d,u+4,s,a,l)||f?ku(d,u+7,c?t.call(c,n,r,o,i,s,a,l):t(n,r,o,i,s,a,l)):Au(d,u+7)}function Bg(e,t,n,r,o,i,s,a,l,c,u){const d=zn()+e,f=Pn(),p=Ru(f,d,n,r,o,i);return Ru(f,d+4,s,a,l,c)||p?ku(f,d+8,u?t.call(u,n,r,o,i,s,a,l,c):t(n,r,o,i,s,a,l,c)):Au(f,d+8)}function Ug(e,t,n,r){return Kg(Pn(),zn(),e,t,n,r)}function qg(e,t){ngDevMode&&Pe(e,t);const n=e[t];return n===Ha?void 0:n}function zg(e,t,n,r,o,i){const s=t+n;return Nu(e,s,o)?ku(e,s+1,i?r.call(i,o):r(o)):qg(e,s+1)}function Wg(e,t,n,r,o,i,s){const a=t+n;return Pu(e,a,o,i)?ku(e,a+2,s?r.call(s,o,i):r(o,i)):qg(e,a+2)}function Qg(e,t,n,r,o,i,s,a){const l=t+n;return ju(e,l,o,i,s)?ku(e,l+3,a?r.call(a,o,i,s):r(o,i,s)):qg(e,l+3)}function Zg(e,t,n,r,o,i,s,a,l){const c=t+n;return Ru(e,c,o,i,s,a)?ku(e,c+4,l?r.call(l,o,i,s,a):r(o,i,s,a)):qg(e,c+4)}function Kg(e,t,n,r,o,i){let s=t+n,a=!1;for(let t=0;t<o.length;t++)Nu(e,s++,o[t])&&(a=!0);return a?ku(e,s,r.apply(i,o)):qg(e,s)}function Gg(e,t){const n=jn();let r;const o=e+St;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}if(ngDevMode){const t=Pn()[16][8],n=t?` in the '${t.constructor.name}' component`:"";throw new pe(-302,`The pipe '${e}' could not be found${n}!`)}}(t,n.pipeRegistry),n.data[o]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(o,r.onDestroy)):r=n.data[o];const i=r.factory||(r.factory=en(r.type,!0)),s=Ze(kd);try{const e=jr(!1),t=i();return jr(e),rd(n,Pn(),o,t),t}finally{Ze(s)}}function Jg(e,t,n){const r=e+St,o=Pn(),i=Mn(o,r);return ny(o,r)?zg(o,zn(),t,i.transform,n,i):i.transform(n)}function Yg(e,t,n,r){const o=e+St,i=Pn(),s=Mn(i,o);return ny(i,o)?Wg(i,zn(),t,s.transform,n,r,s):s.transform(n,r)}function Xg(e,t,n,r,o){const i=e+St,s=Pn(),a=Mn(s,i);return ny(s,i)?Qg(s,zn(),t,a.transform,n,r,o,a):a.transform(n,r,o)}function ey(e,t,n,r,o,i){const s=e+St,a=Pn(),l=Mn(a,s);return ny(a,s)?Zg(a,zn(),t,l.transform,n,r,o,i,l):l.transform(n,r,o,i)}function ty(e,t,n){const r=e+St,o=Pn(),i=Mn(o,r);return ny(o,r)?Kg(o,zn(),t,i.transform,n,i):i.transform.apply(i,n)}function ny(e,t){return e[1].data[t].pure}class ry extends r.Subject{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let o=e,i=t||(()=>null),s=n;if(e&&"object"==typeof e){const t=e;o=t.next?.bind(t),i=t.error?.bind(t),s=t.complete?.bind(t)}this.__isAsync&&(i=oy(i),o&&(o=oy(o)),s&&(s=oy(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof r.Subscription&&e.add(a),a}}function oy(e){return t=>{setTimeout(e,void 0,t)}}const iy=ry;function sy(){return this._results[Eu()]()}class ay{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Eu(),n=ay.prototype;n[t]||(n[t]=sy)}get changes(){return this._changes||(this._changes=new iy)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=Mo(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol.iterator;class ly{}ly.__NG_ELEMENT_ID__=function(){return dy(Vn(),Pn())};const cy=ly,uy=class extends cy{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Pl(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null),r=this._declarationLView[this._declarationTContainer.index];ngDevMode&&zt(r),n[17]=r;const o=this._declarationLView[19];return null!==o&&(n[19]=o.createEmbeddedView(t)),$l(t,n,e),new bg(n)}};function dy(e,t){return 4&e.type?(ngDevMode&&ke(e.tViews,"TView must be allocated"),new uy(t,e,cg(e,t))):null}class fy{}fy.__NG_ELEMENT_ID__=function(){return my(Vn(),Pn())};const py=fy,hy=class extends py{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return cg(this._hostTNode,this._hostLView)}get injector(){return new Yr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Lr(this._hostTNode,this._hostLView);if(kr(e)){const t=Nr(e,this._hostLView),n=Ar(e);ngDevMode&&Xt(t,n);const r=t[1].data[n+8];return new Yr(r,t)}return new Yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=gy(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-At}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,o){const i=e&&!Co(e);let s;if(i)ngDevMode&&Me("object"!=typeof t,!0,"It looks like Component factory was provided as the first argument and an options object as the second argument. This combination of arguments is incompatible. You can either change the first argument to provide Component type or change the second argument to be a number (representing an index at which to insert the new component's host view into this container)"),s=t;else{ngDevMode&&(ke(It(e),"Provided Component class doesn't contain Component definition. Please check whether provided class has @Component decorator."),Me("number"!=typeof t,!0,"It looks like Component type was provided as the first argument and a number (representing an index at which to insert the new component's host view into this container as the second argument. This combination of arguments is incompatible. Please use an object as the second argument instead."));const i=t||{};s=i.index,n=i.injector,r=i.projectableNodes,o=i.ngModuleRef}const a=i?e:new Mg(It(e)),l=n||this.parentInjector;if(!o&&null==a.ngModule){const e=(i?l:this.parentInjector).get(Ig,null);e&&(o=e)}const c=a.create(l,r,void 0,o);return this.insert(c.hostView,s),c}insert(e,t){const n=e._lView,r=n[1];if(ngDevMode&&e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(Pt(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3];ngDevMode&&Me(Pt(t),!0,"An attached view should have its PARENT point to a container.");const r=new hy(t,t[6],t[3]);r.detach(r.indexOf(e))}}const o=this._adjustIndex(t),i=this._lContainer;!function(e,t,n,r){ngDevMode&&Qt(t),ngDevMode&&zt(n);const o=At+r,i=n.length;r>0&&(n[o-1][4]=t),r<i-At?(t[4]=n[o],xo(n,At+r,t)):(n.push(t),t[4]=null),t[3]=n;const s=t[17];null!==s&&n!==s&&function(e,t){ngDevMode&&ke(t,"LView required"),ngDevMode&&zt(e);const n=e[9],r=t[3];ngDevMode&&zt(r);const o=r[3][16];ngDevMode&&ke(o,"Missing insertedComponentLView");const i=t[16];ngDevMode&&ke(i,"Missing declaredComponentLView"),i!==o&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,i,o);const s=Ca(o,i),a=n[11],l=pa(a,i[7]);return null!==l&&function(e,t,n,r,o,i){r[0]=o,r[6]=t,xa(e,r,n,1,o,i)}(r,i[6],a,n,l,s),e.attachToViewContainerRef(),xo(yy(i),o,e),e}move(e,t){if(ngDevMode&&e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(e,t)}indexOf(e){const t=gy(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=ia(this._lContainer,t);n&&(Io(yy(this._lContainer),t),sa(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=ia(this._lContainer,t);return n&&null!=Io(yy(this._lContainer),t)?new bg(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:(ngDevMode&&(Oe(e,-1,`ViewRef index must be positive, got ${e}`),Ee(e,this.length+1+t,"index")),e)}};function gy(e){return e[8]}function yy(e){return e[8]||(e[8]=[])}function my(e,t){let n;ngDevMode&&xr(e,15);const r=t[e.index];if(Pt(r))n=r;else{let o;if(8&e.type)o=bn(r);else{const n=t[11];ngDevMode&&ngDevMode.rendererCreateComment++,o=n.createComment(ngDevMode?"container":"");const r=_n(e,t);ua(n,pa(n,r),o,function(e,t){return mn(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=pc(r,t,o,e),mc(t,n)}return new hy(n,e,t)}class vy{constructor(e){this.queryList=e,this.matches=null}clone(){return new vy(this.queryList)}setDirty(){this.queryList.setDirty()}}class by{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e),o=this.queries[n.indexInDeclarationView];r.push(o.clone())}return new by(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Ny(e,t).matches&&this.queries[t].setDirty()}}class wy{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class _y{constructor(e=[]){this.queries=e}elementStart(e,t){ngDevMode&&Zt(e,"Queries should collect results on the first template pass only");for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,o=this.getByIndex(n).embeddedTView(e,r);o&&(o.indexInDeclarationView=n,null!==t?t.push(o):t=[o])}return null!==t?new _y(t):null}template(e,t){ngDevMode&&Zt(e,"Queries should collect results on the first template pass only");for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return ngDevMode&&Pe(this.queries,e),this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Cy{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Cy(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const o=n[r];this.matchTNodeWithReadOption(e,t,My(t,o)),this.matchTNodeWithReadOption(e,t,Zr(t,e,o,!1,!1))}else n===ly?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Zr(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ug||r===fy||r===ly&&4&t.type)this.addMatch(t.index,-2);else{const n=Zr(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function My(e,t){const n=e.localNames;if(null!==n)for(let e=0;e<n.length;e+=2)if(n[e]===t)return n[e+1];return null}function Dy(e,t,n,r){return-1===n?function(e,t){return 11&e.type?cg(e,t):4&e.type?dy(e,t):null}(t,e):-2===n?function(e,t,n){return n===ug?cg(t,e):n===ly?dy(t,e):n===fy?(ngDevMode&&xr(t,15),my(t,e)):void(ngDevMode&&Ae(`Special token to read should be one of ElementRef, TemplateRef or ViewContainerRef but got ${ae(n)}.`))}(e,t,r):Kr(e,e[1],n,t)}function xy(e,t,n,r){const o=t[19].queries[r];if(null===o.matches){const r=e.data,i=n.matches,s=[];for(let e=0;e<i.length;e+=2){const o=i[e];if(o<0)s.push(null);else{ngDevMode&&Pe(r,o);const a=r[o];s.push(Dy(t,a,i[e+1],n.metadata.read))}}o.matches=s}return o.matches}function Iy(e,t,n,r){const o=e.queries.getByIndex(n),i=o.matches;if(null!==i){const s=xy(e,t,o,n);for(let e=0;e<i.length;e+=2){const n=i[e];if(n>0)r.push(s[e/2]);else{const o=i[e+1],s=t[-n];ngDevMode&&zt(s);for(let e=At;e<s.length;e++){const t=s[e];t[17]===t[3]&&Iy(t[1],t,o,r)}if(null!==s[9]){const e=s[9];for(let t=0;t<e.length;t++){const n=e[t];Iy(n[1],n,o,r)}}}}}return r}function Ey(e){const t=Pn(),n=jn(),r=er();tr(r+1);const o=Ny(n,r);if(e.dirty&&xn(t)===(2==(2&o.metadata.flags))){if(null===o.matches)e.reset([]);else{const i=o.crossesNgTemplate?Iy(n,t,r,[]):xy(n,t,o,r);e.reset(i,dg),e.notifyOnChanges()}return!0}return!1}function Ty(e,t,n){ngDevMode&&we(t,"Expecting flags");const r=jn();r.firstCreatePass&&(Ay(r,new wy(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),ky(r,Pn(),t)}function Oy(e,t,n,r){ngDevMode&&we(n,"Expecting flags");const o=jn();if(o.firstCreatePass){const i=Vn();Ay(o,new wy(t,n,r),i.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(o,e),2==(2&n)&&(o.staticContentQueries=!0)}ky(o,Pn(),n)}function Sy(){return e=Pn(),t=er(),ngDevMode&&ke(e[19],"LQueries should be defined when trying to load a query"),ngDevMode&&Pe(e[19].queries,t),e[19].queries[t].queryList;var e,t}function ky(e,t,n){const r=new ay(4==(4&n));Zl(e,t,r,r.destroy),null===t[19]&&(t[19]=new by),t[19].queries.push(new vy(r))}function Ay(e,t,n){null===e.queries&&(e.queries=new _y),e.queries.track(new Cy(t,n))}function Ny(e,t){return ngDevMode&&ke(e.queries,"TQueries must be defined to retrieve a TQuery"),e.queries.getByIndex(t)}function Py(e,t){return dy(e,t)}const jy={ɵɵattribute:Vu,ɵɵattributeInterpolate1:Qu,ɵɵattributeInterpolate2:Zu,ɵɵattributeInterpolate3:Ku,ɵɵattributeInterpolate4:Gu,ɵɵattributeInterpolate5:Ju,ɵɵattributeInterpolate6:Yu,ɵɵattributeInterpolate7:Xu,ɵɵattributeInterpolate8:ed,ɵɵattributeInterpolateV:td,ɵɵdefineComponent:yt,ɵɵdefineDirective:Dt,ɵɵdefineInjectable:Re,ɵɵdefineInjector:$e,ɵɵdefineNgModule:_t,ɵɵdefinePipe:xt,ɵɵdirectiveInject:kd,ɵɵgetInheritedFactory:Xr,ɵɵinject:zo,ɵɵinjectAttribute:to,ɵɵinvalidFactory:Ad,ɵɵinvalidFactoryDep:Wo,ɵɵtemplateRefExtractor:Py,ɵɵNgOnChangesFeature:nn,ɵɵProvidersFeature:og,ɵɵCopyDefinitionFeature:xu,ɵɵInheritDefinitionFeature:vu,ɵɵnextContext:Gd,ɵɵnamespaceHTML:gr,ɵɵnamespaceMathML:hr,ɵɵnamespaceSVG:pr,ɵɵenableBindings:An,ɵɵdisableBindings:Nn,ɵɵelementStart:jd,ɵɵelementEnd:Rd,ɵɵelement:Vd,ɵɵelementContainerStart:$d,ɵɵelementContainerEnd:Fd,ɵɵelementContainer:Ld,ɵɵpureFunction0:Pg,ɵɵpureFunction1:jg,ɵɵpureFunction2:Rg,ɵɵpureFunction3:Vg,ɵɵpureFunction4:$g,ɵɵpureFunction5:Fg,ɵɵpureFunction6:Lg,ɵɵpureFunction7:Hg,ɵɵpureFunction8:Bg,ɵɵpureFunctionV:Ug,ɵɵgetCurrentView:Hd,ɵɵrestoreView:Rn,ɵɵlistener:zd,ɵɵprojection:Xd,ɵɵsyntheticHostProperty:xp,ɵɵsyntheticHostListener:Wd,ɵɵpipeBind1:Jg,ɵɵpipeBind2:Yg,ɵɵpipeBind3:Xg,ɵɵpipeBind4:ey,ɵɵpipeBindV:ty,ɵɵprojectionDef:Yd,ɵɵhostProperty:Dp,ɵɵproperty:Nd,ɵɵpropertyInterpolate:ef,ɵɵpropertyInterpolate1:tf,ɵɵpropertyInterpolate2:nf,ɵɵpropertyInterpolate3:rf,ɵɵpropertyInterpolate4:of,ɵɵpropertyInterpolate5:sf,ɵɵpropertyInterpolate6:af,ɵɵpropertyInterpolate7:lf,ɵɵpropertyInterpolate8:cf,ɵɵpropertyInterpolateV:uf,ɵɵpipe:Gg,ɵɵqueryRefresh:Ey,ɵɵviewQuery:Ty,ɵɵloadQuery:Sy,ɵɵcontentQuery:Oy,ɵɵreference:od,ɵɵclassMap:Ef,ɵɵclassMapInterpolate1:Jf,ɵɵclassMapInterpolate2:Yf,ɵɵclassMapInterpolate3:Xf,ɵɵclassMapInterpolate4:ep,ɵɵclassMapInterpolate5:tp,ɵɵclassMapInterpolate6:np,ɵɵclassMapInterpolate7:rp,ɵɵclassMapInterpolate8:op,ɵɵclassMapInterpolateV:ip,ɵɵstyleMap:xf,ɵɵstyleMapInterpolate1:sp,ɵɵstyleMapInterpolate2:ap,ɵɵstyleMapInterpolate3:lp,ɵɵstyleMapInterpolate4:cp,ɵɵstyleMapInterpolate5:up,ɵɵstyleMapInterpolate6:dp,ɵɵstyleMapInterpolate7:fp,ɵɵstyleMapInterpolate8:pp,ɵɵstyleMapInterpolateV:hp,ɵɵstyleProp:Mf,ɵɵstylePropInterpolate1:gp,ɵɵstylePropInterpolate2:yp,ɵɵstylePropInterpolate3:mp,ɵɵstylePropInterpolate4:vp,ɵɵstylePropInterpolate5:bp,ɵɵstylePropInterpolate6:wp,ɵɵstylePropInterpolate7:_p,ɵɵstylePropInterpolate8:Cp,ɵɵstylePropInterpolateV:Mp,ɵɵclassProp:Df,ɵɵadvance:Ba,ɵɵtemplate:nd,ɵɵtext:Lf,ɵɵtextInterpolate:Hf,ɵɵtextInterpolate1:Bf,ɵɵtextInterpolate2:Uf,ɵɵtextInterpolate3:qf,ɵɵtextInterpolate4:zf,ɵɵtextInterpolate5:Wf,ɵɵtextInterpolate6:Qf,ɵɵtextInterpolate7:Zf,ɵɵtextInterpolate8:Kf,ɵɵtextInterpolateV:Gf,ɵɵi18n:Wh,ɵɵi18nAttributes:Qh,ɵɵi18nExp:Zh,ɵɵi18nStart:qh,ɵɵi18nEnd:zh,ɵɵi18nApply:Kh,ɵɵi18nPostprocess:Gh,ɵɵresolveWindow:$s,ɵɵresolveDocument:Fs,ɵɵresolveBody:Ls,ɵɵsetComponentScope:mt,ɵɵsetNgModuleScope:Ct,ɵɵsanitizeHtml:cs,ɵɵsanitizeStyle:us,ɵɵsanitizeResourceUrl:fs,ɵɵsanitizeScript:ps,ɵɵsanitizeUrl:ds,ɵɵsanitizeUrlOrResourceUrl:ys,ɵɵtrustConstantHtml:hs,ɵɵtrustConstantResourceUrl:gs,forwardRef:ue,resolveForwardRef:de};let Ry=null;function Vy(){Ry=null}const $y=[];let Fy=!1;function Ly(){if(!Fy){Fy=!0;try{for(let e=$y.length-1;e>=0;e--){const{moduleType:t,ngModule:n}=$y[e];n.declarations&&n.declarations.every(Hy)&&($y.splice(e,1),Jy(t,n))}}finally{Fy=!1}}}function Hy(e){return Array.isArray(e)?e.every(Hy):!!de(e)}function By(e,t={}){Uy(e,t),function(e,t){$y.push({moduleType:e,ngModule:t})}(e,t)}function Uy(e,t,n=!1){ngDevMode&&ke(e,"Required value moduleType"),ngDevMode&&ke(t,"Required value ngModule");const r=Mo(t.declarations||lt);let o=null;Object.defineProperty(e,ft,{configurable:!0,get:()=>{if(null===o){if(ngDevMode&&t.imports&&t.imports.indexOf(e)>-1)throw new Error(`'${ye(e)}' module can't import itself`);const n=wo({usage:0,kind:"NgModule",type:e});o=n.compileNgModule(jy,`ng:///${e.name}/ɵmod.js`,{type:e,bootstrap:Mo(t.bootstrap||lt).map(de),declarations:r.map(de),imports:Mo(t.imports||lt).map(de).map(em),exports:Mo(t.exports||lt).map(de).map(em),schemas:t.schemas?Mo(t.schemas):null,id:t.id||null}),o.schemas||(o.schemas=[])}return o}});let i=null;Object.defineProperty(e,pt,{get:()=>{if(null===i){const t=wo({usage:0,kind:"NgModule",type:e});i=t.compileFactory(jy,`ng:///${e.name}/ɵfac.js`,{name:e.name,type:e,deps:ri(e),target:t.FactoryTarget.NgModule,typeArgumentCount:0})}return i},configurable:!!ngDevMode});let s=null;Object.defineProperty(e,Ue,{get:()=>{if(null===s){ngDevMode&&qy(e,n);const r={name:e.name,type:e,providers:t.providers||lt,imports:[(t.imports||lt).map(de),(t.exports||lt).map(de)]},o=wo({usage:0,kind:"NgModule",type:e});s=o.compileInjector(jy,`ng:///${e.name}/ɵinj.js`,r)}return s},configurable:!!ngDevMode})}function qy(e,t,n){if(Zy.get(e))return;let r;if(Zy.set(e,!0),e=de(e),n){if(r=Ot(e),!r)throw new Error(`Unexpected value '${e.name}' imported by the module '${n.name}'. Please add an @NgModule annotation.`)}else r=Ot(e,!0);const o=[],i=Bs(r.declarations),s=Bs(r.imports);Mo(s).map(zy).forEach((t=>{d(t,e),qy(t,!1,e)}));const a=Bs(r.exports);i.forEach((function(t){It(t=de(t))||Et(t)||Tt(t)||o.push(`Unexpected value '${ye(t)}' declared by the module '${ye(e)}'. Please add a @Pipe/@Directive/@Component annotation.`)})),i.forEach((function(e){const t=Et(e=de(e));!It(e)&&t&&0==t.selectors.length&&o.push(`Directive ${ye(e)} has no selector, please add it!`)}));const l=[...i.map(de),...Mo(s.map(Gy)).map(de)];a.forEach((function(t){const n=(It(t=de(t))?"component":Et(t)&&"directive")||Tt(t)&&"pipe";n&&-1===l.lastIndexOf(t)&&o.push(`Can't export ${n} ${ye(t)} from ${ye(e)} as it was neither declared nor imported!`)})),i.forEach((n=>function(t,n){t=de(t);const r=Qy.get(t);if(r&&r!==e){if(!n){const n=[r,e].map(ye).sort();o.push(`Type ${ye(t)} is part of the declarations of 2 modules: ${n[0]} and ${n[1]}! Please consider moving ${ye(t)} to a higher module that imports ${n[0]} and ${n[1]}. You can also create a new NgModule that exports and includes ${ye(t)} then import that NgModule in ${n[0]} and ${n[1]}.`)}}else Qy.set(t,e)}(n,t))),i.forEach((function(e){if(It(e=de(e))){const t=Wy(e,"Component");t&&t.entryComponents&&Do(t.entryComponents,u)}}));const c=Wy(e,"NgModule");if(c&&(c.imports&&Mo(c.imports).map(zy).forEach((t=>{d(t,e),qy(t,!1,e)})),c.bootstrap&&Do(c.bootstrap,(function(e){It(e=de(e))||o.push(`${ye(e)} cannot be used as an entry component.`)})),c.bootstrap&&Do(c.bootstrap,u),c.entryComponents&&Do(c.entryComponents,u)),o.length)throw new Error(o.join("\n"));function u(e){e=de(e),Qy.get(e)||o.push(`Component ${ye(e)} is not part of any NgModule or the module has not been imported into your module.`)}function d(e,t){if(It(e=de(e))||Et(e))throw new Error(`Unexpected directive '${e.name}' imported by the module '${t.name}'. Please add an @NgModule annotation.`);if(Tt(e))throw new Error(`Unexpected pipe '${e.name}' imported by the module '${t.name}'. Please add an @NgModule annotation.`)}}function zy(e){return(e=de(e)).ngModule||e}function Wy(e,t){let n=null;return r(e.__annotations__),r(e.decorators),n;function r(e){e&&e.forEach(o)}function o(e){n||(Object.getPrototypeOf(e).ngMetadataName==t?n=e:e.type&&Object.getPrototypeOf(e.type).ngMetadataName==t&&(n=e.args[0]))}}let Qy=new WeakMap,Zy=new WeakMap;function Ky(){Qy=new WeakMap,Zy=new WeakMap,$y.length=0}function Gy(e){return[...Mo(Bs(Ot(e=de(e),!0).exports).map((e=>Ot(e)?(qy(e,!1),Gy(e)):e)))]}function Jy(e,t){const n=Mo(t.declarations||lt),r=Xy(e);n.forEach((t=>{t.hasOwnProperty(ct)?Yy(It(t),r):t.hasOwnProperty(ut)||t.hasOwnProperty(dt)||(t.ngSelectorScope=e)}))}function Yy(e,t){e.directiveDefs=()=>Array.from(t.compilation.directives).map((e=>e.hasOwnProperty(ct)?It(e):Et(e))).filter((e=>!!e)),e.pipeDefs=()=>Array.from(t.compilation.pipes).map((e=>Tt(e))),e.schemas=t.schemas,e.tView=null}function Xy(e){if(!tm(e))throw new Error(`${e.name} does not have a module def (ɵmod property)`);const t=Ot(e);if(null!==t.transitiveCompileScopes)return t.transitiveCompileScopes;const n={schemas:t.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return Bs(t.imports).forEach((e=>{const t=e;if(!tm(t))throw new Error(`Importing ${t.name} which does not have a ɵmod property`);const r=Xy(t);r.exported.directives.forEach((e=>n.compilation.directives.add(e))),r.exported.pipes.forEach((e=>n.compilation.pipes.add(e)))})),Bs(t.declarations).forEach((e=>{Tt(e)?n.compilation.pipes.add(e):n.compilation.directives.add(e)})),Bs(t.exports).forEach((e=>{const t=e;if(tm(t)){const e=Xy(t);e.exported.directives.forEach((e=>{n.compilation.directives.add(e),n.exported.directives.add(e)})),e.exported.pipes.forEach((e=>{n.compilation.pipes.add(e),n.exported.pipes.add(e)}))}else Tt(t)?n.exported.pipes.add(t):n.exported.directives.add(t)})),t.transitiveCompileScopes=n,n}function em(e){return function(e){return void 0!==e.ngModule}(e)?e.ngModule:e}function tm(e){return!!Ot(e)}let nm=0;function rm(e,t){("undefined"==typeof ngDevMode||ngDevMode)&&st();let n=null;!function(e,t){li(t)&&(si.set(e,t),ai.add(e))}(e,t),sm(e,t),Object.defineProperty(e,ct,{get:()=>{if(null===n){const r=wo({usage:0,kind:"component",type:e});if(li(t)){const n=[`Component '${e.name}' is not resolved:`];throw t.templateUrl&&n.push(` - templateUrl: ${t.templateUrl}`),t.styleUrls&&t.styleUrls.length&&n.push(` - styleUrls: ${JSON.stringify(t.styleUrls)}`),n.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(n.join("\n"))}const o=Ry;let i=t.preserveWhitespaces;void 0===i&&(i=null!==o&&void 0!==o.preserveWhitespaces&&o.preserveWhitespaces);let s=t.encapsulation;void 0===s&&(s=null!==o&&void 0!==o.defaultEncapsulation?o.defaultEncapsulation:Xe.Emulated);const a=t.templateUrl||`ng:///${e.name}/template.html`,l={...lm(e,t),typeSourceSpan:r.createParseSourceSpan("Component",e.name,a),template:t.template||"",preserveWhitespaces:i,styles:t.styles||lt,animations:t.animations,directives:[],changeDetection:t.changeDetection,pipes:new Map,encapsulation:s,interpolation:t.interpolation,viewProviders:t.viewProviders||null};nm++;try{l.usesInheritance&&cm(e),n=r.compileComponent(jy,a,l)}finally{nm--}if(0===nm&&Ly(),void 0!==e.ngSelectorScope){const t=Xy(e.ngSelectorScope);Yy(n,t)}}return n},configurable:!!ngDevMode})}function om(e,t){let n=null;sm(e,t||{}),Object.defineProperty(e,ut,{get:()=>{if(null===n){const r=im(e,t||{}),o=wo({usage:0,kind:"directive",type:e});n=o.compileDirective(jy,r.sourceMapUrl,r.metadata)}return n},configurable:!!ngDevMode})}function im(e,t){const n=e&&e.name,r=`ng:///${n}/ɵdir.js`,o=wo({usage:0,kind:"directive",type:e}),i=lm(e,t);return i.typeSourceSpan=o.createParseSourceSpan("Directive",n,r),i.usesInheritance&&cm(e),{metadata:i,sourceMapUrl:r}}function sm(e,t){let n=null;Object.defineProperty(e,pt,{get:()=>{if(null===n){const r=im(e,t),o=wo({usage:0,kind:"directive",type:e});n=o.compileFactory(jy,`ng:///${e.name}/ɵfac.js`,{name:r.metadata.name,type:r.metadata.type,typeArgumentCount:0,deps:ri(e),target:o.FactoryTarget.Directive})}return n},configurable:!!ngDevMode})}function am(e){return Object.getPrototypeOf(e.prototype)===Object.prototype}function lm(e,t){const n=ni(),r=n.ownPropMetadata(e);return{name:e.name,type:e,selector:void 0!==t.selector?t.selector:null,host:t.host||at,propMetadata:r,inputs:t.inputs||lt,outputs:t.outputs||lt,queries:dm(e,r,fm),lifecycle:{usesOnChanges:n.hasLifecycleHook(e,"ngOnChanges")},typeSourceSpan:null,usesInheritance:!am(e),exportAs:(o=t.exportAs,void 0===o?null:gm(o)),providers:t.providers||null,viewQueries:dm(e,r,pm)};var o}function cm(e){const t=Object.prototype;let n=Object.getPrototypeOf(e.prototype).constructor;for(;n&&n!==t;)Et(n)||It(n)||!mm(n)||om(n,null),n=Object.getPrototypeOf(n)}function um(e,t){return{propertyName:e,predicate:(n=t.selector,"string"==typeof n?gm(n):de(n)),descendants:t.descendants,first:t.first,read:t.read?t.read:null,static:!!t.static,emitDistinctChangesOnly:!!t.emitDistinctChangesOnly};var n}function dm(e,t,n){const r=[];for(const o in t)if(t.hasOwnProperty(o)){const i=t[o];i.forEach((t=>{if(n(t)){if(!t.selector)throw new Error(`Can't construct a query for the property "${o}" of "${ye(e)}" since the query selector wasn't defined.`);if(i.some(hm))throw new Error("Cannot combine @Input decorators with query decorators");r.push(um(o,t))}}))}return r}function fm(e){const t=e.ngMetadataName;return"ContentChild"===t||"ContentChildren"===t}function pm(e){const t=e.ngMetadataName;return"ViewChild"===t||"ViewChildren"===t}function hm(e){return"Input"===e.ngMetadataName}function gm(e){return e.split(",").map((e=>e.trim()))}const ym=["ngOnChanges","ngOnInit","ngOnDestroy","ngDoCheck","ngAfterViewInit","ngAfterViewChecked","ngAfterContentInit","ngAfterContentChecked"];function mm(e){const t=ni();if(ym.some((n=>t.hasLifecycleHook(e,n))))return!0;const n=t.propMetadata(e);for(const e in n){const t=n[e];for(let e=0;e<t.length;e++){const n=t[e],r=n.ngMetadataName;if(hm(n)||fm(n)||pm(n)||"Output"===r||"HostBinding"===r||"HostListener"===r)return!0}}return!1}function vm(e,t){let n=null,r=null;Object.defineProperty(e,pt,{get:()=>{if(null===r){const n=bm(e,t),o=wo({usage:0,kind:"pipe",type:n.type});r=o.compileFactory(jy,`ng:///${n.name}/ɵfac.js`,{name:n.name,type:n.type,typeArgumentCount:0,deps:ri(e),target:o.FactoryTarget.Pipe})}return r},configurable:!!ngDevMode}),Object.defineProperty(e,dt,{get:()=>{if(null===n){const r=bm(e,t),o=wo({usage:0,kind:"pipe",type:r.type});n=o.compilePipe(jy,`ng:///${r.name}/ɵpipe.js`,r)}return n},configurable:!!ngDevMode})}function bm(e,t){return{type:e,name:e.name,pipeName:t.name,pure:void 0===t.pure||t.pure}}const wm=io("Directive",((e={})=>e),void 0,void 0,((e,t)=>om(e,t))),_m=io("Component",((e={})=>({changeDetection:Je.Default,...e})),wm,void 0,((e,t)=>rm(e,t))),Cm=io("Pipe",(e=>({pure:!0,...e})),void 0,void 0,((e,t)=>vm(e,t))),Mm=lo("Input",(e=>({bindingPropertyName:e}))),Dm=lo("Output",(e=>({bindingPropertyName:e}))),xm=lo("HostBinding",(e=>({hostPropertyName:e}))),Im=lo("HostListener",((e,t)=>({eventName:e,args:t}))),Em=io("NgModule",(e=>e),void 0,void 0,((e,t)=>By(e,t)));function Tm(...e){}const Om=new uo("Application Initializer");class Sm{constructor(e){this.appInits=e,this.resolve=Tm,this.reject=Tm,this.initialized=!1,this.done=!1,this.donePromise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let t=0;t<this.appInits.length;t++){const n=this.appInits[t]();if(Bd(n))e.push(n);else if(qd(n)){const t=new Promise(((e,t)=>{n.subscribe({complete:e,error:t})}));e.push(t)}}Promise.all(e).then((()=>{t()})).catch((e=>{this.reject(e)})),0===e.length&&t(),this.initialized=!0}}Sm.ɵfac=function(e){return new(e||Sm)(zo(Om,8))},Sm.ɵprov=Re({token:Sm,factory:Sm.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&xg(Sm,[{type:cd,args:[{providedIn:"root"}]}],(function(){return[{type:void 0,decorators:[{type:Go,args:[Om]},{type:Jo}]}]}),null);const km=new uo("AppId",{providedIn:"root",factory:Am});function Am(){return`${Pm()}${Pm()}${Pm()}`}const Nm={provide:km,useFactory:Am,deps:[]};function Pm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const jm=new uo("Platform Initializer"),Rm=new uo("Platform ID"),Vm=new uo("appBootstrapListener"),$m=new uo("Application Packages Root URL");class Fm{log(e){console.log(e)}warn(e){console.warn(e)}}Fm.ɵfac=function(e){return new(e||Fm)},Fm.ɵprov=Re({token:Fm,factory:Fm.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&xg(Fm,[{type:cd}],null,null);const Lm=new uo("LocaleId",{providedIn:"root",factory:()=>Qo(Lm,We.Optional|We.SkipSelf)||("undefined"!=typeof ngI18nClosureMode&&ngI18nClosureMode&&"undefined"!=typeof goog&&"en"!==goog.getLocale()?goog.getLocale():"undefined"!=typeof $localize&&$localize.locale||Vp)}),Hm=new uo("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),Bm=new uo("Translations"),Um=new uo("TranslationsFormat");var qm;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Ignore=2]="Ignore"}(qm||(qm={}));class zm{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}class Wm{compileModuleSync(e){return new Ng(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const t=this.compileModuleSync(e),n=Bs(Ot(e).declarations).reduce(((e,t)=>{const n=It(t);return n&&e.push(new Mg(n)),e}),[]);return new zm(t,n)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}Wm.ɵfac=function(e){return new(e||Wm)},Wm.ɵprov=Re({token:Wm,factory:Wm.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&xg(Wm,[{type:cd,args:[{providedIn:"root"}]}],null,null);const Qm=new uo("compilerOptions");class Zm{}const Km=Promise.resolve(0);function Gm(e){"undefined"==typeof Zone?Km.then((()=>{e&&e.apply(null,null)})):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Jm{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new iy(!1),this.onMicrotaskEmpty=new iy(!1),this.onStable=new iy(!1),this.onError=new iy(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=it.requestAnimationFrame,t=it.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(it,(()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",(()=>{e.lastRequestAnimationFrameId=-1,ev(e),e.isCheckStableRunning=!0,Xm(e),e.isCheckStableRunning=!1}),void 0,(()=>{}),(()=>{}))),e.fakeTopEventTask.invoke()})),ev(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{try{return tv(e),n.invokeTask(o,i,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||e.shouldCoalesceRunChangeDetection)&&t(),nv(e)}},onInvoke:(n,r,o,i,s,a,l)=>{try{return tv(e),n.invoke(o,i,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),nv(e)}},onHasTask:(t,n,r,o)=>{t.hasTask(r,o),n===r&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,ev(e),Xm(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,n,r,o)=>(t.handleError(r,o),e.runOutsideAngular((()=>e.onError.emit(o))),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Jm.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Jm.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const o=this._inner,i=o.scheduleEventTask("NgZoneEvent: "+r,e,Ym,Tm,Tm);try{return o.runTask(i,t,n)}finally{o.cancelTask(i)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Ym={};function Xm(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular((()=>e.onStable.emit(null)))}finally{e.isStable=!0}}}function ev(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function tv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function nv(e){e._nesting--,Xm(e)}class rv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new iy,this.onMicrotaskEmpty=new iy,this.onStable=new iy,this.onError=new iy}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}class ov{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run((()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")}))}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular((()=>{this._ngZone.onStable.subscribe({next:()=>{Jm.assertNotInAngularZone(),Gm((()=>{this._isZoneStable=!0,this._runCallbacksIfReady()}))}})}))}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gm((()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1}));else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter((t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1))),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map((e=>({source:e.source,creationLocation:e.creationLocation,data:e.data}))):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout((()=>{this._callbacks=this._callbacks.filter((e=>e.timeoutId!==r)),e(this._didWork,this.getPendingTasks())}),t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}ov.ɵfac=function(e){return new(e||ov)(zo(Jm))},ov.ɵprov=Re({token:ov,factory:ov.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&xg(ov,[{type:cd}],(function(){return[{type:Jm}]}),null);class iv{constructor(){this._applications=new Map,lv.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return lv.findTestabilityInTree(this,e,t)}}function sv(e){lv=e}iv.ɵfac=function(e){return new(e||iv)},iv.ɵprov=Re({token:iv,factory:iv.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&xg(iv,[{type:cd}],(function(){return[]}),null);let av,lv=new class{addToWindow(e){}findTestabilityInTree(e,t,n){return null}};function cv(e,t,n){ngDevMode&&function(e,t="Type passed in is not NgModuleType, it does not have 'ɵmod' property."){Ot(e)||Ae(t)}(n);const r=new Ng(n);if("undefined"!=typeof ngJitMode&&!ngJitMode)return Promise.resolve(r);const o=e.get(Qm,[]).concat(t);if(function(e){if(null!==Ry){if(e.defaultEncapsulation!==Ry.defaultEncapsulation)return void(ngDevMode&&console.error("Provided value for `defaultEncapsulation` can not be changed once it has been set."));if(e.preserveWhitespaces!==Ry.preserveWhitespaces)return void(ngDevMode&&console.error("Provided value for `preserveWhitespaces` can not be changed once it has been set."))}Ry=e}({defaultEncapsulation:Cv(o.map((e=>e.defaultEncapsulation))),preserveWhitespaces:Cv(o.map((e=>e.preserveWhitespaces)))}),0===si.size)return Promise.resolve(r);const i=function(e){const t=[];return e.forEach((e=>e&&t.push(...e))),t}(o.map((e=>e.providers)));if(0===i.length)return Promise.resolve(r);const s=wo({usage:0,kind:"NgModule",type:n}),a=Kc.create({providers:i}).get(s.ResourceLoader);return ii((e=>Promise.resolve(a.get(e)))).then((()=>r))}function uv(e){return e.isBoundToModule}const dv=new uo("AllowMultipleToken");class fv{constructor(e,t){this.name=e,this.token=t}}function pv(e){if(av&&!av.destroyed&&!av.injector.get(dv,!1)){const e="undefined"==typeof ngDevMode||ngDevMode?"There can be only one platform. Destroy the previous one to create a new one.":"";throw new pe(400,e)}ngDevMode&&cu(),av=e.get(vv);const t=e.get(jm,null);return t&&t.forEach((e=>e())),av}function hv(e,t,n=[]){const r=`Platform: ${t}`,o=new uo(r);return(t=[])=>{let i=mv();if(!i||i.injector.get(dv,!1))if(e)e(n.concat(t).concat({provide:o,useValue:!0}));else{const e=n.concat(t).concat({provide:o,useValue:!0},{provide:Rc,useValue:"platform"});pv(Kc.create({providers:e,name:r}))}return gv(o)}}function gv(e){const t=mv();if(!t){const e="undefined"==typeof ngDevMode||ngDevMode?"No platform exists!":"";throw new pe(401,e)}if(("undefined"==typeof ngDevMode||ngDevMode)&&!t.injector.get(e,null))throw new pe(400,"A platform with a different configuration has been created. Please destroy it first.");return t}function yv(){av&&!av.destroyed&&av.destroy()}function mv(){return av&&!av.destroyed?av:null}class vv{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new rv:("zone.js"===e?void 0:e)||new Jm({enableLongStackTrace:"undefined"!=typeof ngDevMode&&!!ngDevMode,shouldCoalesceEventChangeDetection:!!t?.ngZoneEventCoalescing,shouldCoalesceRunChangeDetection:!!t?.ngZoneRunCoalescing}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Jm,useValue:n}];return n.run((()=>{const t=Kc.create({providers:r,parent:this.injector,name:e.moduleType.name}),o=e.create(t),i=o.injector.get(Ss,null);if(!i){const e="undefined"==typeof ngDevMode||ngDevMode?"No ErrorHandler. Is platform module (BrowserModule) included?":"";throw new pe(402,e)}return n.runOutsideAngular((()=>{const e=n.onError.subscribe({next:e=>{i.handleError(e)}});o.onDestroy((()=>{_v(this._modules,o),e.unsubscribe()}))})),function(e,t,n){try{const r=n();return Bd(r)?r.catch((n=>{throw t.runOutsideAngular((()=>e.handleError(n))),n})):r}catch(n){throw t.runOutsideAngular((()=>e.handleError(n))),n}}(i,n,(()=>{const e=o.injector.get(Sm);return e.runInitializers(),e.donePromise.then((()=>(Bp(o.injector.get(Lm,Vp)||Vp),this._moduleDoBootstrap(o),o)))}))}))}bootstrapModule(e,t=[]){const n=bv({},t);return cv(this.injector,n,e).then((e=>this.bootstrapModuleFactory(e,n)))}_moduleDoBootstrap(e){const t=e.injector.get(wv);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach((e=>t.bootstrap(e)));else{if(!e.instance.ngDoBootstrap){const t="undefined"==typeof ngDevMode||ngDevMode?`The module ${ae(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`:"";throw new pe(403,t)}e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed){const e="undefined"==typeof ngDevMode||ngDevMode?"The platform has already been destroyed!":"";throw new pe(404,e)}this._modules.slice().forEach((e=>e.destroy())),this._destroyListeners.forEach((e=>e())),this._destroyed=!0}get destroyed(){return this._destroyed}}function bv(e,t){return Array.isArray(t)?t.reduce(bv,e):{...e,...t}}vv.ɵfac=function(e){return new(e||vv)(zo(Kc))},vv.ɵprov=Re({token:vv,factory:vv.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&xg(vv,[{type:cd}],(function(){return[{type:Kc}]}),null);class wv{constructor(e,t,n,o,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=o,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run((()=>{this.tick()}))}});const s=new r.Observable((e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular((()=>{e.next(this._stable),e.complete()}))})),a=new r.Observable((e=>{let t;this._zone.runOutsideAngular((()=>{t=this._zone.onStable.subscribe((()=>{Jm.assertNotInAngularZone(),Gm((()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))}))}))}));const n=this._zone.onUnstable.subscribe((()=>{Jm.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular((()=>{e.next(!1)})))}));return()=>{t.unsubscribe(),n.unsubscribe()}}));this.isStable=(0,r.merge)(s,a.pipe(re()))}bootstrap(e,t){if(!this._initStatus.done){const e="undefined"==typeof ngDevMode||ngDevMode?"Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.":"";throw new pe(405,e)}let n;n=e instanceof sg?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=uv(n)?void 0:this._injector.get(Ig),o=t||n.selector,i=n.create(Kc.NULL,[],o,r),s=i.location.nativeElement,a=i.injector.get(ov,null),l=a&&i.injector.get(iv);return a&&l&&l.registerApplication(s,a),i.onDestroy((()=>{this.detachView(i.hostView),_v(this.components,i),l&&l.unregisterApplication(s)})),this._loadComponent(i),("undefined"==typeof ngDevMode||ngDevMode)&&this._injector.get(Fm).log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick){const e="undefined"==typeof ngDevMode||ngDevMode?"ApplicationRef.tick is called recursively":"";throw new pe(101,e)}try{this._runningTick=!0;for(let e of this._views)e.detectChanges();if("undefined"==typeof ngDevMode||ngDevMode)for(let e of this._views)e.checkNoChanges()}catch(e){this._zone.runOutsideAngular((()=>this._exceptionHandler.handleError(e)))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;_v(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Vm,[]).concat(this._bootstrapListeners).forEach((t=>t(e)))}ngOnDestroy(){this._views.slice().forEach((e=>e.destroy())),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}function _v(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Cv(e){for(let t=e.length-1;t>=0;t--)if(void 0!==e[t])return e[t]}wv.ɵfac=function(e){return new(e||wv)(zo(Jm),zo(Kc),zo(Ss),zo(lg),zo(Sm))},wv.ɵprov=Re({token:wv,factory:wv.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&xg(wv,[{type:cd,args:[{providedIn:"root"}]}],(function(){return[{type:Jm},{type:Kc},{type:Ss},{type:lg},{type:Sm}]}),null);let Mv=!0,Dv=!1;function xv(){return Dv=!0,Mv}function Iv(){if(Dv)throw new Error("Cannot enable prod mode after platform setup.");(void 0===typeof ngDevMode||ngDevMode)&&(it.ngDevMode=!1),Mv=!1}function Ev(e){const t=Sg(e);if(!t)throw Ov(e);return new Ng(t)}function Tv(e){const t=Sg(e);if(!t)throw Ov(e);return t}function Ov(e){return new Error(`No module with ID ${e} loaded`)}class Sv{}function kv(e){return function(e,t,n){if(Rt(e)&&!n){const n=Dn(e.index,t);return new bg(n,n)}if(47&e.type){const e=t[16];return new bg(e,t)}return null}(Vn(),Pn(),16==(16&e))}Sv.__NG_ELEMENT_ID__=kv;class Av extends Sv{}class Nv extends Av{}class Pv{constructor(e,t){this.name=e,this.callback=t}}function jv(e){return e.map((e=>e.nativeElement))}class Rv{constructor(e){this.nativeNode=e}get parent(){const e=this.nativeNode.parentNode;return e?new Vv(e):null}get injector(){return eu(this.nativeNode)}get componentInstance(){const e=this.nativeNode;return e&&(Gc(e)||Yc(e))}get context(){return Gc(this.nativeNode)||Jc(this.nativeNode)}get listeners(){return ou(this.nativeNode).filter((e=>"dom"===e.type))}get references(){return function(e){const t=vs(e);return null===t?{}:(void 0===t.localRefs&&(t.localRefs=function(e,t){const n=e[1].data[t];if(n&&n.localNames){const t={};let r=n.index+1;for(let o=0;o<n.localNames.length;o+=2)t[n.localNames[o]]=e[r],r++;return t}return null}(t.lView,t.nodeIndex)),t.localRefs||{})}(this.nativeNode)}get providerTokens(){return function(e){const t=vs(e);if(null===t)return[];const n=t.lView[1],r=n.data[t.nodeIndex],o=[],i=1048575&r.providerIndexes,s=r.directiveEnd;for(let e=i;e<s;e++){let t=n.data[e];void 0!==(a=t).type&&void 0!==a.template&&void 0!==a.declaredInputs&&(t=t.type),o.push(t)}var a;return o}(this.nativeNode)}}class Vv extends Rv{constructor(e){ngDevMode&&Ne(e),super(e)}get nativeElement(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null}get name(){const e=vs(this.nativeNode);return null!==e?e.lView[1].data[e.nodeIndex].value:this.nativeNode.nodeName}get properties(){const e=vs(this.nativeNode);if(null===e)return{};const t=e.lView,n=t[1].data,r=n[e.nodeIndex],o={};return function(e,t){if(e){let n=Object.getPrototypeOf(e);const r=Node.prototype;for(;null!==n&&n!==r;){const r=Object.getOwnPropertyDescriptors(n);for(let n in r)if(!n.startsWith("__")&&!n.startsWith("on")){const r=e[n];$v(r)&&(t[n]=r)}n=Object.getPrototypeOf(n)}}}(this.nativeElement,o),function(e,t,n,r){let o=t.propertyBindings;if(null!==o)for(let t=0;t<o.length;t++){const i=o[t],s=r[i].split(Hs),a=s[0];if(s.length>1){let t=s[1];for(let e=1;e<s.length-1;e++)t+=ge(n[i+e-1])+s[e+1];e[a]=t}else e[a]=n[i]}}(o,r,t,n),o}get attributes(){const e={},t=this.nativeElement;if(!t)return e;const n=vs(t);if(null===n)return{};const r=n.lView[1].data[n.nodeIndex].attrs,o=[];if(r){let t=0;for(;t<r.length;){const n=r[t];if("string"!=typeof n)break;const i=r[t+1];e[n]=i,o.push(n.toLowerCase()),t+=2}}const i=t.attributes;for(let t=0;t<i.length;t++){const n=i[t],r=n.name.toLowerCase();-1===o.indexOf(r)&&(e[r]=n.value)}return e}get styles(){return this.nativeElement&&this.nativeElement.style?this.nativeElement.style:{}}get classes(){const e={},t=this.nativeElement.className;return("string"!=typeof t?t.baseVal.split(" "):t.split(" ")).forEach((t=>e[t]=!0)),e}get childNodes(){const e=this.nativeNode.childNodes,t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(qv(r))}return t}get children(){const e=this.nativeElement;if(!e)return[];const t=e.children,n=[];for(let e=0;e<t.length;e++){const r=t[e];n.push(qv(r))}return n}query(e){return this.queryAll(e)[0]||null}queryAll(e){const t=[];return Fv(this,e,t,!0),t}queryAllNodes(e){const t=[];return Fv(this,e,t,!1),t}triggerEventHandler(e,t){const n=this.nativeNode,r=[];this.listeners.forEach((o=>{if(o.name===e){const e=o.callback;e.call(n,t),r.push(e)}})),"function"==typeof n.eventListeners&&n.eventListeners(e).forEach((e=>{if(-1!==e.toString().indexOf("__ngUnwrap__")){const o=e("__ngUnwrap__");return-1===r.indexOf(o)&&o.call(n,t)}}))}}function $v(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e||null===e}function Fv(e,t,n,r){const o=vs(e.nativeNode);null!==o?Lv(o.lView[1].data[o.nodeIndex],o.lView,t,n,r,e.nativeNode):Uv(e.nativeNode,t,n,r)}function Lv(e,t,n,r,o,i){ngDevMode&&Ft(e,t);const s=function(e,t){const n=null===e?-1:e.index;if(-1!==n){ngDevMode&&Ft(e,t);const r=bn(t[n]);return ngDevMode&&null!==r&&!mn(t[11])&&Ne(r),r}return null}(e,t);if(11&e.type){if(Bv(s,n,r,o,i),Rt(e)){const s=Dn(e.index,t);s&&s[1].firstChild&&Lv(s[1].firstChild,s,n,r,o,i)}else e.child&&Lv(e.child,t,n,r,o,i),s&&Uv(s,n,r,o);const a=t[e.index];Pt(a)&&Hv(a,n,r,o,i)}else if(4&e.type){const s=t[e.index];Bv(s[7],n,r,o,i),Hv(s,n,r,o,i)}else if(16&e.type){const s=t[16],a=s[6].projection[e.projection];if(Array.isArray(a))for(let e of a)Bv(e,n,r,o,i);else if(a){const e=s[3];Lv(e[1].data[a.index],e,n,r,o,i)}}else e.child&&Lv(e.child,t,n,r,o,i);if(i!==s){const s=4&e.flags?e.projectionNext:e.next;s&&Lv(s,t,n,r,o,i)}}function Hv(e,t,n,r,o){for(let i=At;i<e.length;i++){const s=e[i],a=s[1].firstChild;a&&Lv(a,s,t,n,r,o)}}function Bv(e,t,n,r,o){if(o!==e){const o=qv(e);if(!o)return;(r&&o instanceof Vv&&t(o)&&-1===n.indexOf(o)||!r&&t(o)&&-1===n.indexOf(o))&&n.push(o)}}function Uv(e,t,n,r){const o=e.childNodes,i=o.length;for(let e=0;e<i;e++){const i=o[e],s=qv(i);s&&((r&&s instanceof Vv&&t(s)&&-1===n.indexOf(s)||!r&&t(s)&&-1===n.indexOf(s))&&n.push(s),Uv(i,t,n,r))}}new Map;function qv(e){return e instanceof Node?(e.hasOwnProperty("__ng_debug__")||(e.__ng_debug__=e.nodeType==Node.ELEMENT_NODE?new Vv(e):new Rv(e)),e.__ng_debug__):null}function zv(e){return null}class Wv{constructor(){}supports(e){return Ou(e)}create(e){return new Zv(e)}}const Qv=(e,t)=>t;class Zv{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Qv}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,o=null;for(;t||n;){const i=!n||t&&t.currentIndex<Yv(n,r,o)?t:n,s=Yv(i,r,o),a=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(t=t._next,null==i.previousIndex)r++;else{o||(o=[]);const e=s-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<o.length?o[n]:o[n]=0,i=r+n;t<=i&&i<e&&(o[n]=r+1)}o[i.previousIndex]=t-e}}s!==a&&e(i,s,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ou(e)){const t="undefined"==typeof ngDevMode||ngDevMode?`Error trying to diff '${ae(e)}'. Only arrays and iterables are allowed`:"";throw new pe(900,t)}return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,o=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==o&&Object.is(o.trackById,r)?(i&&(o=this._verifyReinsertion(o,n,r,t)),Object.is(o.item,n)||this._addIdentityChange(o,n)):(o=this._mismatch(o,n,r,t),i=!0),o=o._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Eu()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,(e=>{r=this._trackByFn(t,e),null!==o&&Object.is(o.trackById,r)?(i&&(o=this._verifyReinsertion(o,e,r,t)),Object.is(o.item,e)||this._addIdentityChange(o,e)):(o=this._mismatch(o,e,r,t),i=!0),o=o._next,t++})),this.length=t;return this._truncate(o),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new Kv(t,n),o,r),e}_verifyReinsertion(e,t,n,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),null===this._additionsTail?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Jv),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(null===this._movesTail?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Jv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,null===this._identityChangesTail?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}}class Kv{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Gv{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Jv{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Gv,this.map.set(t,n)),n.add(e)}get(e,t){const n=e,r=this.map.get(n);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yv(e,t,n){const r=e.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+t+o}class Xv{constructor(){}supports(e){return e instanceof Map||Su(e)}create(){return new eb}}class eb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Su(e))){const t="undefined"==typeof ngDevMode||ngDevMode?`Error trying to diff '${ae(e)}'. Only maps and objects are allowed`:"";throw new pe(900,t)}}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,((e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}})),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,o=n._next;return r&&(r._next=o),o&&(o._prev=r),n._next=null,n._prev=null,n}const n=new tb(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach((n=>t(e[n],n)))}}class tb{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nb(){return new rb([new Wv])}class rb{constructor(e){this.factories=e}static create(e,t){if(null!=t){const n=t.factories.slice();e=e.concat(n)}return new rb(e)}static extend(e){return{provide:rb,useFactory:t=>rb.create(e,t||nb()),deps:[[rb,new Xo,new Jo]]}}find(e){const t=this.factories.find((t=>t.supports(e)));if(null!=t)return t;{const t="undefined"==typeof ngDevMode||ngDevMode?`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`:"";throw new pe(901,t)}var n}}function ob(){return new ib([new Xv])}rb.ɵprov=Re({token:rb,providedIn:"root",factory:nb});class ib{constructor(e){this.factories=e}static create(e,t){if(t){const n=t.factories.slice();e=e.concat(n)}return new ib(e)}static extend(e){return{provide:ib,useFactory:t=>ib.create(e,t||ob()),deps:[[ib,new Xo,new Jo]]}}find(e){const t=this.factories.find((t=>t.supports(e)));if(t)return t;const n="undefined"==typeof ngDevMode||ngDevMode?`Cannot find a differ supporting object '${e}'`:"";throw new pe(901,n)}}ib.ɵprov=Re({token:ib,providedIn:"root",factory:ob});const sb=[new Xv],ab=[new Wv],lb=new rb(ab),cb=new ib(sb),ub=hv(null,"core",[{provide:Rm,useValue:"unknown"},{provide:vv,deps:[Kc]},{provide:iv,deps:[]},{provide:Fm,deps:[]}]);class db{constructor(e){}}db.ɵfac=function(e){return new(e||db)(zo(wv))},db.ɵmod=_t({type:db}),db.ɵinj=$e({}),("undefined"==typeof ngDevMode||ngDevMode)&&xg(db,[{type:Em}],(function(){return[{type:wv}]}),null);const fb=!0;function pb(e){return wo({usage:1,kind:"directive",type:e.type}).compileDirectiveDeclaration(jy,`ng:///${e.type.name}/ɵfac.js`,e)}function hb(e){xg(e.type,e.decorators,e.ctorParameters??null,e.propDecorators??null)}function gb(e){return wo({usage:1,kind:"component",type:e.type}).compileComponentDeclaration(jy,`ng:///${e.type.name}/ɵcmp.js`,e)}function yb(e){return wo({usage:1,kind:mb(e.target),type:e.type}).compileFactoryDeclaration(jy,`ng:///${e.type.name}/ɵfac.js`,e)}function mb(e){switch(e){case vo.Directive:return"directive";case vo.Component:return"component";case vo.Injectable:return"injectable";case vo.Pipe:return"pipe";case vo.NgModule:return"NgModule"}}function vb(e){return wo({usage:1,kind:"injectable",type:e.type}).compileInjectableDeclaration(jy,`ng:///${e.type.name}/ɵprov.js`,e)}function bb(e){return wo({usage:1,kind:"NgModule",type:e.type}).compileInjectorDeclaration(jy,`ng:///${e.type.name}/ɵinj.js`,e)}function wb(e){return wo({usage:1,kind:"NgModule",type:e.type}).compileNgModuleDeclaration(jy,`ng:///${e.type.name}/ɵmod.js`,e)}function _b(e){return wo({usage:1,kind:"pipe",type:e.type}).compilePipeDeclaration(jy,`ng:///${e.type.name}/ɵpipe.js`,e)}"undefined"!=typeof ngDevMode&&ngDevMode&&(it.$localize=it.$localize||function(){throw new Error("It looks like your application or one of its dependencies is using i18n.\nAngular 9 introduced a global `$localize()` function that needs to be loaded.\nPlease run `ng add @angular/localize` from the Angular CLI.\n(For non-CLI projects, add `import '@angular/localize/init';` to your `polyfills.ts` file.\nFor server-side rendering applications add the import to your `main.server.ts` file.)")})}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.IProofmeDataStorage=e.IProofmeDataPurpose=e.ProofmeUtils=e.ProofmeUtilsProvider=e.WebRtcProvider=e.SignalingServer=void 0;var t=n(515);Object.defineProperty(e,"SignalingServer",{enumerable:!0,get:function(){return t.SignalingServer}});var o=n(299);Object.defineProperty(e,"WebRtcProvider",{enumerable:!0,get:function(){return o.WebRtcProvider}});var i=n(611);Object.defineProperty(e,"ProofmeUtilsProvider",{enumerable:!0,get:function(){return i.ProofmeUtilsProvider}});var s=n(810);Object.defineProperty(e,"ProofmeUtils",{enumerable:!0,get:function(){return s.ProofmeUtils}});var a=n(945);Object.defineProperty(e,"IProofmeDataPurpose",{enumerable:!0,get:function(){return a.IProofmeDataPurpose}});var l=n(491);Object.defineProperty(e,"IProofmeDataStorage",{enumerable:!0,get:function(){return l.IProofmeDataStorage}})})(),r})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YixZQUFBQSxFQUFBRCxJQUFBQSxXQUFBLFNBQUEweEYsZ0JBWVQsYUFBU250RyxPQUFBQSxlQUFBQSxFQUFBQSxzQkFBQUEsQ0FBQTBiLFlBQUFBLEVBQUFELElBQUFBLFdBQUEsU0FBQWxlLHVCQUNULGFBQVN5QyxPQUFBQSxlQUFBQSxFQUFBQSxzQkFBQUEsQ0FBQTBiLFlBQUFBLEVBQUFELElBQUFBLFdBQUEsU0FBQWplIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vUHJvb2ZtZUlkL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvLi9zcmMvZW51bXMvcHJvb2ZtZURhdGFQdXJwb3NlLnRzIiwid2VicGFjazovL1Byb29mbWVJZC8uL3NyYy9lbnVtcy9wcm9vZm1lRGF0YVN0b3JhZ2UudHMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vc3JjL3Byb29mbWUtdXRpbHMucHJvdmlkZXIudHMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vc3JjL3Byb29mbWUtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vc3JjL3NpZ25hbGluZ1NlcnZlci50cyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvLi9zcmMvc21hcnRjb250cmFjdHMvY2xhaW1Ib2xkZXJBYmkudHMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vc3JjL3dlYlJ0Yy5wcm92aWRlci50cyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvZXh0ZXJuYWwgY29tbW9uanMgXCJyeGpzXCIiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkL2V4dGVybmFsIGNvbW1vbmpzIFwidXVpZFwiIiwid2VicGFjazovL1Byb29mbWVJZC9leHRlcm5hbCBjb21tb25qcyBcIndlYjNcIiIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvZXh0ZXJuYWwgY29tbW9uanMgXCJ3ZWJzb2NrZXRcIiIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvZXh0ZXJuYWwgY29tbW9uanMgXCJ3cnRjXCIiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkL2V4dGVybmFsIGNvbW1vbmpzIFwid3NcIiIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvZXh0ZXJuYWwgY29tbW9uanMgXCJ0c2xpYlwiIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2lzQXJyYXlMaWtlLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvaXNQcm9taXNlLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2NyZWF0ZUVycm9yQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvci5qcyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9hcnJSZW1vdmUuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL1N1YnNjcmlwdGlvbi5qcyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvY29uZmlnLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9zY2hlZHVsZXIvdGltZW91dFByb3ZpZGVyLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL3JlcG9ydFVuaGFuZGxlZEVycm9yLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL25vb3AuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL05vdGlmaWNhdGlvbkZhY3Rvcmllcy5qcyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9lcnJvckNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL1N1YnNjcmliZXIuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2lkZW50aXR5LmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL3BpcGUuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL09ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvaXNJbnRlcm9wT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvdXRpbC9pc0FzeW5jSXRlcmFibGUuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvdGhyb3dVbm9ic2VydmFibGVFcnJvci5qcyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvLi9ub2RlX21vZHVsZXMvcnhqcy9kaXN0L2VzbTUvaW50ZXJuYWwvc3ltYm9sL2l0ZXJhdG9yLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2lzSXRlcmFibGUuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL3V0aWwvaXNSZWFkYWJsZVN0cmVhbUxpa2UuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29ic2VydmFibGUvaW5uZXJGcm9tLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL2xpZnQuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29wZXJhdG9ycy9PcGVyYXRvclN1YnNjcmliZXIuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29ic2VydmFibGUvZW1wdHkuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29wZXJhdG9ycy90YWtlLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yLmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9TdWJqZWN0LmpzIiwid2VicGFjazovL1Byb29mbWVJZC8uL25vZGVfbW9kdWxlcy9yeGpzL2Rpc3QvZXNtNS9pbnRlcm5hbC9vcGVyYXRvcnMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkLy4vbm9kZV9tb2R1bGVzL3J4anMvZGlzdC9lc201L2ludGVybmFsL29ic2VydmFibGUvZnJvbS5qcyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvLi9ub2RlX21vZHVsZXMvQGFuZ3VsYXIvY29yZS9mZXNtMjAyMC9jb3JlLm1qcyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vUHJvb2ZtZUlkL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9Qcm9vZm1lSWQvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiUHJvb2ZtZUlkXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlByb29mbWVJZFwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsImV4cG9ydCBlbnVtIElQcm9vZm1lRGF0YVB1cnBvc2Uge1xuICAgIEFHRV9WRVJJRklDQVRJT04gPSBcIkFHRV9WRVJJRklDQVRJT05cIixcbiAgICBLWUNfVkVSSUZJQ0FUSU9OID0gXCJLWUNfVkVSSUZJQ0FUSU9OXCIsXG4gICAgQUNDRVNTX0NPTlRST0wgPSBcIkFDQ0VTU19DT05UUk9MXCIsXG4gICAgT05MSU5FX1ZFUklGSUNBVElPTiA9IFwiT05MSU5FX1ZFUklGSUNBVElPTlwiLFxuICAgIElERU5USUZJQ0FUSU9OID0gXCJJREVOVElGSUNBVElPTlwiXG59IiwiZXhwb3J0IGVudW0gSVByb29mbWVEYXRhU3RvcmFnZSB7XG4gICAgREFUQUJBU0UgPSBcIkRBVEFCQVNFXCIsXG4gICAgQ0VSVElGSUNBVEUgPSBcIkNFUlRJRklDQVRFXCIsXG4gICAgTk9UX1NUT1JFRCA9IFwiTk9UX1NUT1JFRFwiXG59IiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBJVmFsaWRhdGVkQ3JlZGVudGlhbHMgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3ZhbGlkYXRlZENyZWRlbnRpYWxzLmludGVyZmFjZVwiO1xuaW1wb3J0IHsgSUNyZWRlbnRpYWxPYmplY3QgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL2NyZWRlbnRpYWxzT2JqZWN0LmludGVyZmFjZVwiO1xuaW1wb3J0IHsgSUNyZWRlbnRpYWwgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL2NyZWRlbnRpYWwuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBJUHJvb2ZPYmplY3QgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3Byb29mLW9iamVjdC5pbnRlcmZhY2VcIjtcbmltcG9ydCB7IElSZXF1ZXN0ZWRDcmVkZW50aWFscyB9IGZyb20gXCIuL2ludGVyZmFjZXMvcmVxdWVzdGVkQ3JlZGVudGlhbHMuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBJUmVxdWVzdGVkQ3JlZGVudGlhbHNDaGVja1Jlc3VsdCB9IGZyb20gXCIuL2ludGVyZmFjZXMvcmVxdWVzdGVkQ3JlZGVudGlhbHNDaGVja1Jlc3VsdFwiO1xuaW1wb3J0IHsgUHJvb2ZtZVV0aWxzIH0gZnJvbSBcIi4vcHJvb2ZtZS11dGlsc1wiO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgUHJvb2ZtZVV0aWxzUHJvdmlkZXIge1xuXG4gICAgcHJvb2ZtZVV0aWxzID0gbmV3IFByb29mbWVVdGlscygpO1xuXG5cdGFzeW5jIHZhbGlkQ3JlZGVudGlhbHMoY3JlZGVudGlhbE9iamVjdDogSUNyZWRlbnRpYWxPYmplY3QsIHdlYjNVcmw6IHN0cmluZywgY2hlY2tVc2VyTm9uY2U6IGJvb2xlYW4sIGxpdmVuZXNzQ2hlY2tSZXF1aXJlZD86IGJvb2xlYW4pOiBQcm9taXNlPElWYWxpZGF0ZWRDcmVkZW50aWFscz4gIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvb2ZtZVV0aWxzLnZhbGlkQ3JlZGVudGlhbHNGdW5jKGNyZWRlbnRpYWxPYmplY3QsIHdlYjNVcmwsIGNoZWNrVXNlck5vbmNlLCBsaXZlbmVzc0NoZWNrUmVxdWlyZWQpO1xuICAgIH1cblxuXHRhc3luYyB2YWxpZENyZWRlbnRpYWxzVHJ1c3RlZFBhcnRpZXMoY3JlZGVudGlhbE9iamVjdDogSUNyZWRlbnRpYWxPYmplY3QsIHdlYjNVcmw6IHN0cmluZywgcmVxdWVzdGVkQ3JlZGVudGlhbHM6IElSZXF1ZXN0ZWRDcmVkZW50aWFscywgdHJ1c3RlZERpZHM6IHN0cmluZ1tdLCBjaGVja1VzZXJOb25jZTogYm9vbGVhbiwgbGl2ZW5lc3NDaGVja1JlcXVpcmVkPzogYm9vbGVhbik6IFByb21pc2U8SVZhbGlkYXRlZENyZWRlbnRpYWxzIHwgSVJlcXVlc3RlZENyZWRlbnRpYWxzQ2hlY2tSZXN1bHQ+ICB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb29mbWVVdGlscy52YWxpZENyZWRlbnRpYWxzVHJ1c3RlZFBhcnRpZXNGdW5jKGNyZWRlbnRpYWxPYmplY3QsIHdlYjNVcmwsIHJlcXVlc3RlZENyZWRlbnRpYWxzLCB0cnVzdGVkRGlkcywgY2hlY2tVc2VyTm9uY2UsIGxpdmVuZXNzQ2hlY2tSZXF1aXJlZCk7XG4gICAgfVxuXG4gICAgc2lnbkNyZWRlbnRpYWwoY3JlZGVudGlhbDogSUNyZWRlbnRpYWwsIHByaXZhdGVLZXk6IHN0cmluZyk6IHN0cmluZyAge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9vZm1lVXRpbHMuc2lnbkNyZWRlbnRpYWwoY3JlZGVudGlhbCwgcHJpdmF0ZUtleSk7XG4gICAgfVxuXG4gICAgc2lnbkNyZWRlbnRpYWxPYmplY3QoY3JlZGVudGlhbDogSUNyZWRlbnRpYWxPYmplY3QsIHByaXZhdGVLZXk6IHN0cmluZyk6IHN0cmluZyAge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9vZm1lVXRpbHMuc2lnbkNyZWRlbnRpYWxPYmplY3QoY3JlZGVudGlhbCwgcHJpdmF0ZUtleSk7XG4gICAgfVxuXG4gICAgc2lnblByb29mT2JqZWN0KHByb29mT2JqZWN0OiBJUHJvb2ZPYmplY3QsIHByaXZhdGVLZXk6IHN0cmluZyk6IHN0cmluZyAge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9vZm1lVXRpbHMuc2lnblByb29mT2JqZWN0KHByb29mT2JqZWN0LCBwcml2YXRlS2V5KTtcbiAgICB9XG59IiwiaW1wb3J0IFdlYjMgZnJvbSBcIndlYjNcIjtcbmltcG9ydCB7IElDaGVja2VkRGlkIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9jaGVja2VkRGlkLmludGVyZmFjZVwiO1xuaW1wb3J0IHsgSUNyZWRlbnRpYWwgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL2NyZWRlbnRpYWwuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBJQ3JlZGVudGlhbE9iamVjdCB9IGZyb20gXCIuL2ludGVyZmFjZXMvY3JlZGVudGlhbHNPYmplY3QuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBJUHJvb2ZPYmplY3QgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3Byb29mLW9iamVjdC5pbnRlcmZhY2VcIjtcbmltcG9ydCB7IElQcm9vZiB9IGZyb20gXCIuL2ludGVyZmFjZXMvcHJvb2YuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBJUmVxdWVzdGVkQ3JlZGVudGlhbHMgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3JlcXVlc3RlZENyZWRlbnRpYWxzLmludGVyZmFjZVwiO1xuaW1wb3J0IHsgSVJlcXVlc3RlZENyZWRlbnRpYWxzQ2hlY2tSZXN1bHQgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3JlcXVlc3RlZENyZWRlbnRpYWxzQ2hlY2tSZXN1bHRcIjtcbmltcG9ydCB7IElWYWxpZGF0ZWRDcmVkZW50aWFscyB9IGZyb20gXCIuL2ludGVyZmFjZXMvdmFsaWRhdGVkQ3JlZGVudGlhbHMuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBjbGFpbUhvbGRlckFiaSB9IGZyb20gXCIuL3NtYXJ0Y29udHJhY3RzL2NsYWltSG9sZGVyQWJpXCI7XG5cbmV4cG9ydCBjbGFzcyBQcm9vZm1lVXRpbHMge1xuICAgIFxuICAgIGFzeW5jIHZhbGlkQ3JlZGVudGlhbHNUcnVzdGVkUGFydGllc0Z1bmMoXG4gICAgICAgIGNyZWRlbnRpYWxPYmplY3Q6IElDcmVkZW50aWFsT2JqZWN0LFxuICAgICAgICB3ZWIzVXJsOiBzdHJpbmcsXG4gICAgICAgIHJlcXVlc3RlZENyZWRlbnRpYWxzOiBJUmVxdWVzdGVkQ3JlZGVudGlhbHMsXG4gICAgICAgIHRydXN0ZWREaWRzOiBzdHJpbmdbXSxcbiAgICAgICAgY2hlY2tVc2VyTm9uY2U6IGJvb2xlYW4sXG4gICAgICAgIGxpdmVuZXNzQ2hlY2tSZXF1aXJlZD86IGJvb2xlYW5cbiAgICApOiBQcm9taXNlPElWYWxpZGF0ZWRDcmVkZW50aWFscyB8IElSZXF1ZXN0ZWRDcmVkZW50aWFsc0NoZWNrUmVzdWx0PiB7XG4gICAgICAgIGNvbnN0IHdlYjMgPSBuZXcgV2ViMyh3ZWIzVXJsKTtcbiAgICAgICAgY29uc3QgcmVxdWVzdGVkQ2hlY2tSZXN1bHQgPSB0aGlzLnJlcXVlc3RlZENyZWRlbnRpYWxzQ29ycmVjdChjcmVkZW50aWFsT2JqZWN0LCByZXF1ZXN0ZWRDcmVkZW50aWFscyk7XG4gICAgICAgIGlmICghcmVxdWVzdGVkQ2hlY2tSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmVxdWVzdGVkQ2hlY2tSZXN1bHQuY3JlZGVudGlhbHMgPSBjcmVkZW50aWFsT2JqZWN0O1xuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RlZENoZWNrUmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudmFsaWRDcmVkZW50aWFsc0Z1bmMoY3JlZGVudGlhbE9iamVjdCwgd2ViM1VybCwgY2hlY2tVc2VyTm9uY2UsIGxpdmVuZXNzQ2hlY2tSZXF1aXJlZCk7XG4gICAgICAgIC8vIElmIHRoZSBcIm5vcm1hbFwiIGNoZWNrIHdhcyBub3QgdmFsaWQsIGRvbid0IGNoZWNrIHRoZSB0cnVzdGVkIHBhcnRpZXMgYnV0IHJldHVybiB0aGUgcmVzdWx0XG4gICAgICAgIGlmICghcmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSB0cnVzdGVkIGFkZHJlc3NlcyBhcmUgYWRkcmVzc2VkXG4gICAgICAgIGZvciAoY29uc3QgZGlkIG9mIHRydXN0ZWREaWRzKSB7XG4gICAgICAgICAgICBpZiAoIXdlYjMudXRpbHMuaXNBZGRyZXNzKGRpZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBUcnVzdGVkIHBhcnR5IGRpZCAke2RpZH0gaXMgTk9UIGEgdmFsaWQgYWRkcmVzcyBhbmQgaXMgcmVtb3ZlZC5gKTtcbiAgICAgICAgICAgICAgICB0cnVzdGVkRGlkcyA9IHRydXN0ZWREaWRzLmZpbHRlcih4ID0+IHggIT09IGRpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRydXN0ZWREaWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWREaWQgPSBbXTtcbiAgICAgICAgICAgIGxldCB2YWxpZENyZWRlbnRpYWxzQW1vdW50ID0gMDtcbiAgICAgICAgICAgIGxldCBjcmVkZW50aWFsc0Ftb3VudCA9IDA7XG4gICAgICAgICAgICBjb25zdCBpbnZhbGlkQ3JlZGVudGlhbHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3Byb3ZpZGVyLF0gb2YgT2JqZWN0LmVudHJpZXMoY3JlZGVudGlhbE9iamVjdC5jcmVkZW50aWFscykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtjdXJyZW50Q3JlZGVudGlhbEtleSwgY3JlZGVudGlhbF0gb2YgT2JqZWN0LmVudHJpZXMoY3JlZGVudGlhbE9iamVjdC5jcmVkZW50aWFsc1twcm92aWRlcl0uY3JlZGVudGlhbHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzQW1vdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzc3VlckRpZENvbnRyYWN0QWRkcmVzcyA9IGNyZWRlbnRpYWwuaXNzdWVyLmlkLnNwbGl0KFwiOlwiKVsyXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kVmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGludmFsaWRLZXlQcm92aWRlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnZhbGlkS2V5UHJvdmlkZXJBbGxvd2VkS2V5cyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGxldCBub1RydXN0ZWRDbGFpbUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkaWQgb2YgdHJ1c3RlZERpZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kRW50cnkgPSBjaGVja2VkRGlkLmZpbmQoeCA9PiB4Lmlzc3VlckRpZENvbnRyYWN0QWRkcmVzcyA9PT0gaXNzdWVyRGlkQ29udHJhY3RBZGRyZXNzICYmIHguZGlkID09PSBkaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNsYWltID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZEVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhaW0gPSBmb3VuZEVudHJ5LmNsYWltO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFpbSA9IGF3YWl0IHRoaXMuZ2V0Q2xhaW1zKGlzc3VlckRpZENvbnRyYWN0QWRkcmVzcywgZGlkLCB3ZWIzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkRGlkLnB1c2goeyBpc3N1ZXJEaWRDb250cmFjdEFkZHJlc3MsIGRpZCwgY2xhaW0gfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGFpbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vVHJ1c3RlZENsYWltRm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGFpbUV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUoY2xhaW0uZXhwaXJhdGlvbkRhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGFpbUV4cGlyYXRpb25EYXRlID4gbmV3IERhdGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGFpbUFsbG93ZWRDcmVkZW50aWFsS2V5cyA9IGNsYWltLmtleXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRLZXlQcm92aWRlckFsbG93ZWRLZXlzID0gY2xhaW1BbGxvd2VkQ3JlZGVudGlhbEtleXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyQ3JlZGVudGlhbEtleSA9IGAke2NyZWRlbnRpYWwucHJvdmlkZXJ9XyR7Y3VycmVudENyZWRlbnRpYWxLZXl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjbGFpbUFsbG93ZWRDcmVkZW50aWFsS2V5cy5pbmNsdWRlcyhwcm92aWRlckNyZWRlbnRpYWxLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkS2V5UHJvdmlkZXIgPSBwcm92aWRlckNyZWRlbnRpYWxLZXk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgUHJvdmlkZXIgJHtkaWR9IHdhcyBub3QgYWxsb3dlZCB0byBpc3N1ZSBrZXkgJHtwcm92aWRlckNyZWRlbnRpYWxLZXl9LiBTa2lwcGluZyB0aGlzIG9uZWApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWludmFsaWRLZXlQcm92aWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRDcmVkZW50aWFsc0Ftb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRWYWxpZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRDcmVkZW50aWFscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAxNCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ2xhaW0gZXhwaXJlZC5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vVHJ1c3RlZENsYWltRm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRDcmVkZW50aWFscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAxMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgTm8gY2xhaW1zIGZvdW5kIHRvIGNoZWNrLiBDaGVja2VkIGRpZHMgJHt0cnVzdGVkRGlkc31gXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnZhbGlkS2V5UHJvdmlkZXIgJiYgIWZvdW5kVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRDcmVkZW50aWFscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAxMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVHJpZWQgdG8gdmFsaWRhdGUgYXR0cmlidXRlICR7aW52YWxpZEtleVByb3ZpZGVyfSBidXQgcHJvdmlkZXIgd2FzIG5vdCBhbGxvd2VkIHRvIGlzc3VlLiBBbGxvd2VkIGF0dHJpYnV0ZXM6ICR7aW52YWxpZEtleVByb3ZpZGVyQWxsb3dlZEtleXMuam9pbihcIiwgXCIpfWBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRydXN0ZWQgY2hlY2sgdmFsaWRDcmVkZW50aWFsc0Ftb3VudDpcIiwgdmFsaWRDcmVkZW50aWFsc0Ftb3VudCk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRydXN0ZWQgY2hlY2sgY3JlZGVudGlhbHNBbW91bnQ6XCIsIGNyZWRlbnRpYWxzQW1vdW50KTtcbiAgICAgICAgICAgIGlmICh2YWxpZENyZWRlbnRpYWxzQW1vdW50ID09PSBjcmVkZW50aWFsc0Ftb3VudCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBjcmVkZW50aWFsT2JqZWN0LmNyZWRlbnRpYWxzIGFzIGFueSxcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IDAsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVmFsaWQgY3JlZGVudGlhbFwiLFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRDaGVja1Jlc3VsdFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsaWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAxLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgY3JlZGVudGlhbHNcIixcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZENyZWRlbnRpYWxzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWxpZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29kZTogMTAsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJObyB0cnVzdGVkIHBhcnRpZXMgdG8gY2hlY2suXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgYXN5bmMgdmFsaWRDcmVkZW50aWFsc0Z1bmMoY3JlZGVudGlhbE9iamVjdDogSUNyZWRlbnRpYWxPYmplY3QsIHdlYjNVcmw6IHN0cmluZywgY2hlY2tVc2VyTm9uY2U6IGJvb2xlYW4sIGxpdmVuZXNzQ2hlY2tSZXF1aXJlZD86IGJvb2xlYW4pOiBQcm9taXNlPElWYWxpZGF0ZWRDcmVkZW50aWFscz4ge1xuICAgICAgICAvLyBJZiB0aGUgb2JqZWN0IGlzIHN0cmluZ2lmaWVkXG4gICAgICAgIGlmICh0eXBlb2YgY3JlZGVudGlhbE9iamVjdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY3JlZGVudGlhbE9iamVjdCA9IEpTT04ucGFyc2UoY3JlZGVudGlhbE9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgY3JlZGVudGlhbE9iamVjdCA9IHRoaXMucmVPcmRlckNyZWRlbnRpYWxPYmplY3QoY3JlZGVudGlhbE9iamVjdCk7XG4gICAgICAgIGNvbnN0IHdlYjNOb2RlID0gbmV3IFdlYjMod2ViM1VybCk7XG4gICAgICAgIGNvbnN0IGNoZWNrZWREaWQ6IElDaGVja2VkRGlkW10gPSBbXTtcbiAgICAgICAgbGV0IHZhbGlkQ3JlZGVudGlhbHNBbW91bnQgPSAwO1xuICAgICAgICBsZXQgY3JlZGVudGlhbHNBbW91bnQgPSAwO1xuICAgICAgICBjb25zdCBpbnZhbGlkQ3JlZGVudGlhbHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBbcHJvdmlkZXIsXSBvZiBPYmplY3QuZW50cmllcyhjcmVkZW50aWFsT2JqZWN0LmNyZWRlbnRpYWxzKSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgdGhlIHVzZXIgY3JlZGVudGlhbHMgKGZvciBlYWNoIHByb3ZpZGVyKTogUmVjb25zdHJ1Y3QgaXQgc28gd2Ugb25seSBoYXZlIHRoZSBjcmVkZW50aWFsT2JqZWN0IG9mIFxuICAgICAgICAgICAgLy8gdGhhdCBzcGVjaWZpYyBwcm92aWRlciAod2hpY2ggd2UgZ2VuZXJhdGVkIHRoZSBzaWduYXR1cmUgb3ZlcilcbiAgICAgICAgICAgIGNvbnN0IGNyZWRlbnRpYWxPYmplY3RXaXRob3V0UHJvb2ZTaWduYXR1cmU6IElDcmVkZW50aWFsT2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIFtwcm92aWRlcl06IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbE9iamVjdC5jcmVkZW50aWFsc1twcm92aWRlcl0pKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlbGV0ZSBjcmVkZW50aWFsT2JqZWN0V2l0aG91dFByb29mU2lnbmF0dXJlLmNyZWRlbnRpYWxzW3Byb3ZpZGVyXS5wcm9vZi5zaWduYXR1cmU7XG4gICAgICAgICAgICBjb25zdCB1c2VyUmVjb3ZlcmVkQWRkcmVzcyA9IHdlYjNOb2RlLmV0aC5hY2NvdW50cy5yZWNvdmVyKEpTT04uc3RyaW5naWZ5KGNyZWRlbnRpYWxPYmplY3RXaXRob3V0UHJvb2ZTaWduYXR1cmUpLCBjcmVkZW50aWFsT2JqZWN0LmNyZWRlbnRpYWxzW3Byb3ZpZGVyXS5wcm9vZi5zaWduYXR1cmUpO1xuICAgICAgICAgICAgY29uc3QgY29ycmVjdFVzZXJTaWduYXR1cmUgPSB0aGlzLnVzZXJDcmVkZW50aWFsU2lnbmF0dXJlV3JvbmcoY3JlZGVudGlhbE9iamVjdC5jcmVkZW50aWFsc1twcm92aWRlcl0ucHJvb2YuaG9sZGVyLCB1c2VyUmVjb3ZlcmVkQWRkcmVzcyk7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgdXNlciAoSWRlbnRpdHkgQXBwKSBkaWQgc2lnbiBpdCBjb3JyZWN0OyBvdGhlcndoaXNlIHNraXAgdGhpcyBwcm92aWRlclxuICAgICAgICAgICAgaWYgKGNvcnJlY3RVc2VyU2lnbmF0dXJlKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBbLCBjcmVkZW50aWFsXSBvZiBPYmplY3QuZW50cmllcyhjcmVkZW50aWFsT2JqZWN0LmNyZWRlbnRpYWxzW3Byb3ZpZGVyXS5jcmVkZW50aWFscykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHNBbW91bnQrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjcmVkZW50aWFsLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRDcmVkZW50aWFscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbmNvcnJlY3QgY3JlZGVudGlhbCB2ZXJzaW9uLiBSZW5ldyB5b3VyIGNyZWRlbnRpYWxzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3JlZGVudGlhbEV4cGlyYXRpb25EYXRlID0gbmV3IERhdGUoY3JlZGVudGlhbC5leHBpcmF0aW9uRGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3cgPiBjcmVkZW50aWFsRXhwaXJhdGlvbkRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRDcmVkZW50aWFscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYFlvdXIgY3JlZGVudGlhbCBleHBpcmVkIG9uICR7Y3JlZGVudGlhbEV4cGlyYXRpb25EYXRlfWBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGhlbiA9IG5ldyBEYXRlKGNyZWRlbnRpYWxPYmplY3QuY3JlZGVudGlhbHNbcHJvdmlkZXJdLnByb29mLm5vbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWludXRlc0RpZmZlcmVuY2UgPSB0aGlzLmNhbGN1bGF0ZU1pbnV0ZXNEaWZmZXJlbmNlKG5vdywgdGhlbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtaW51dGVzRGlmZmVyZW5jZSA+IDUgJiYgY2hlY2tVc2VyTm9uY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRDcmVkZW50aWFscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOb25jZSB0b28gb2xkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNlbnQgY3JlZGVudGlhbHMgd2VyZSBwcm92aWRlZCBieSB0aGUgZGlkIG9mIHRoZSBjcmVkZW50aWFsIChjaGVjayB0aGUgc2lnbmF0dXJlIG9mIGVhY2ggY3JlZGVudGlhbClcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29ycmVjdElzc3VlclNpZ25hdHVyZSA9IHRoaXMuaXNzdWVyQ3JlZGVudGlhbFNpZ25hdHVyZVdyb25nKGNyZWRlbnRpYWwsIHdlYjNOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvcnJlY3RJc3N1ZXJTaWduYXR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGV2ZXJ5IGNyZWRlbnRpYWwgRElEIGNvbnRyYWN0IGlmIHRoZSBob2xkZXIgYmVsb25ncyB0byB0aGF0IERJRFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNzdWVySG9sZGVyS2V5ID0gY3JlZGVudGlhbC5wcm9vZi5ob2xkZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc3N1ZXJEaWRDb250cmFjdEFkZHJlc3MgPSBjcmVkZW50aWFsLmlzc3Vlci5pZC5zcGxpdChcIjpcIilbMl07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc3N1ZXJDb3JyZWN0RGlkID0gYXdhaXQgdGhpcy5kaWRDb250cmFjdEtleVdyb25nKHdlYjNOb2RlLCB3ZWIzVXJsLCBjbGFpbUhvbGRlckFiaSwgaXNzdWVySG9sZGVyS2V5LCBpc3N1ZXJEaWRDb250cmFjdEFkZHJlc3MsIGNoZWNrZWREaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzc3VlckNvcnJlY3REaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VySG9sZGVyS2V5ID0gY3JlZGVudGlhbE9iamVjdC5jcmVkZW50aWFsc1twcm92aWRlcl0ucHJvb2YuaG9sZGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJEaWRDb250cmFjdEFkZHJlc3MgPSBjcmVkZW50aWFsLmlkLnNwbGl0KFwiOlwiKVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ29ycmVjdERpZCA9IGF3YWl0IHRoaXMuZGlkQ29udHJhY3RLZXlXcm9uZyh3ZWIzTm9kZSwgd2ViM1VybCwgY2xhaW1Ib2xkZXJBYmksIHVzZXJIb2xkZXJLZXksIHVzZXJEaWRDb250cmFjdEFkZHJlc3MsIGNoZWNrZWREaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1c2VyQ29ycmVjdERpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpdmVuZXNzQ2hlY2tSZXF1aXJlZCB8fCAoY3JlZGVudGlhbC52ZXJpZmllZCA9PT0gdW5kZWZpbmVkIHx8IGNyZWRlbnRpYWwudmVyaWZpZWQgPT09IHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZENyZWRlbnRpYWxzQW1vdW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkQ3JlZGVudGlhbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAxNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkxpdmVuZXNzIGNoZWNrIHJlcXVpcmVkIGJ1dCBjcmVkZW50aWFsIG5vdCB2ZXJpZmllZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRDcmVkZW50aWFscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiA2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJVc2VyIGRpZCBpbmNvcnJlY3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRDcmVkZW50aWFscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJc3N1ZXIgZGlkIGluY29ycmVjdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkQ3JlZGVudGlhbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiA0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSXNzdWVyIHNpZ25hdHVyZSBpbmNvcnJlY3RcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW52YWxpZENyZWRlbnRpYWxzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiBjcmVkZW50aWFsT2JqZWN0LmNyZWRlbnRpYWxzW3Byb3ZpZGVyXSxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogMyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJVc2VyIHNpZ25hdHVyZSBpbmNvcnJlY3RcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwib25seSBjcmVkIHZhbGlkQ3JlZGVudGlhbHNBbW91bnQ6XCIsIHZhbGlkQ3JlZGVudGlhbHNBbW91bnQpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIm9ubHkgY3JlZCBjcmVkZW50aWFsc0Ftb3VudDpcIiwgY3JlZGVudGlhbHNBbW91bnQpO1xuICAgICAgICAvLyBXaGVuIHRoZSB1c2VyIHNpZ25hdHVyZSBpcyBpbmNvcnJlY3Qgd2UgZG9uJ3QgdmFsaWRhdGUgYW55IG1vcmUgd2hlbiB0aGVyZSBpcyAxIHByb3ZpZGVyIHNvIGNyZWRlbnRpYWxzYW1vdW50IHNob3VsZCBiZSBtb3JlIHRoYW4gMFxuICAgICAgICBpZiAoY3JlZGVudGlhbHNBbW91bnQgPiAwICYmIHZhbGlkQ3JlZGVudGlhbHNBbW91bnQgPT09IGNyZWRlbnRpYWxzQW1vdW50KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBjcmVkZW50aWFsT2JqZWN0LmNyZWRlbnRpYWxzIGFzIGFueSxcbiAgICAgICAgICAgICAgICB2YWxpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb2RlOiAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVmFsaWQgY3JlZGVudGlhbFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb2RlOiAxLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBjcmVkZW50aWFsXCIsXG4gICAgICAgICAgICAgICAgaW52YWxpZENyZWRlbnRpYWxzXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlc1xuICAgIHVzZXJDcmVkZW50aWFsU2lnbmF0dXJlV3JvbmcoaG9sZGVyS2V5OiBhbnksIHJlY292ZXJlZEFkZHJlc3M6IHN0cmluZykge1xuICAgICAgICBpZiAoaG9sZGVyS2V5ICE9PSByZWNvdmVyZWRBZGRyZXNzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBVc2VyIHNpZ25hdHVyZSBvZiBjcmVkZW50aWFsICR7aG9sZGVyS2V5fSBkb2VzIG5vdCBtYXRjaCByZWNvdmVyZWRBZGRyZXNzICR7cmVjb3ZlcmVkQWRkcmVzc31gKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlc1xuICAgIGlzc3VlckNyZWRlbnRpYWxTaWduYXR1cmVXcm9uZyhjcmVkZW50aWFsOiBhbnksIHdlYjNOb2RlOiBhbnkpIHtcbiAgICAgICAgY29uc3QgaXNzdWVyU2lnbmF0dXJlID0gY3JlZGVudGlhbC5wcm9vZi5zaWduYXR1cmU7XG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWxJc3N1ZXJLZXkgPSBjcmVkZW50aWFsLnByb29mLmhvbGRlcjtcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbFdpdGhvdXRJc3N1ZXJQcm9vZiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3JlZGVudGlhbCkpO1xuICAgICAgICBkZWxldGUgY3JlZGVudGlhbFdpdGhvdXRJc3N1ZXJQcm9vZi5wcm9vZi5zaWduYXR1cmU7XG4gICAgICAgIGNvbnN0IHJlY292ZXJlZEFkZHJlc3MgPSB3ZWIzTm9kZS5ldGguYWNjb3VudHMucmVjb3ZlcihKU09OLnN0cmluZ2lmeShjcmVkZW50aWFsV2l0aG91dElzc3VlclByb29mKSwgaXNzdWVyU2lnbmF0dXJlKTtcbiAgICAgICAgaWYgKGNyZWRlbnRpYWxJc3N1ZXJLZXkgIT09IHJlY292ZXJlZEFkZHJlc3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYElzc3VlciBzaWduYXR1cmUgb2YgY3JlZGVudGlhbCAke2NyZWRlbnRpYWxJc3N1ZXJLZXl9IGRvZXMgbm90IG1hdGNoIHJlY292ZXJlZEFkZHJlc3MgJHtyZWNvdmVyZWRBZGRyZXNzfWApO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGFzeW5jIGRpZENvbnRyYWN0S2V5V3Jvbmcod2ViM05vZGU6IGFueSwgd2ViM1VybDogc3RyaW5nLCBjbGFpbUhvbGRlckFiaTogYW55LCBob2xkZXJLZXk6IHN0cmluZywgZGlkQWRkcmVzczogc3RyaW5nLCBjaGVja2VkRGlkOiBJQ2hlY2tlZERpZFtdKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIGNvbnN0IGZvdW5kRW50cnkgPSBjaGVja2VkRGlkLmZpbmQoeCA9PiB4LmRpZCA9PSBkaWRBZGRyZXNzICYmIHguaG9sZGVyS2V5ID09PSBob2xkZXJLZXkpO1xuICAgICAgICBpZiAoZm91bmRFbnRyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGZvdW5kRW50cnkucmVzdWx0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qga25vd25BZGRyZXNzZXMgPSBbXTtcblxuICAgICAgICAgICAgaWYgKGRpZEFkZHJlc3MgPT09IGhvbGRlcktleSkge1xuICAgICAgICAgICAgICAgIGNoZWNrZWREaWQucHVzaCh7IGRpZDogZGlkQWRkcmVzcywgaG9sZGVyS2V5LCByZXN1bHQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNoYTNLZXkgPSB0aGlzLmdldFNoYTNLZXkoaG9sZGVyS2V5LCB3ZWIzTm9kZSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2ViMyA9IG5ldyBXZWIzKHdlYjNVcmwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleU1hbmFnZXJDb250cmFjdCA9IG5ldyB3ZWIzLmV0aC5Db250cmFjdChcbiAgICAgICAgICAgICAgICAgICAgY2xhaW1Ib2xkZXJBYmksXG4gICAgICAgICAgICAgICAgICAgIGRpZEFkZHJlc3NcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5rbm93bkFkZHJlc3Nlc0NvbnRhaW5zKGtub3duQWRkcmVzc2VzLCBzaGEzS2V5LCBkaWRBZGRyZXNzKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXlQdXJwb3NlID0gcGFyc2VJbnQoYXdhaXQgdGhpcy5nZXRLZXlQdXJwb3NlKGtleU1hbmFnZXJDb250cmFjdCwgc2hhM0tleSksIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgLy8ga2V5UHVycG9zZSAxID0gT3duZXJcbiAgICAgICAgICAgICAgICAgICAgLy8ga2V5UHVycG9zZSAyID0gQWN0aW9uIEtleVxuICAgICAgICAgICAgICAgICAgICAvLyBrZXlQdXJwb3NlIDMgPSBDbGFpbSBTaWduZXIgS2V5IFxuICAgICAgICAgICAgICAgICAgICAvLyBrZXlQdXJwb3NlIDQgPSBFbmNyeXB0aW9uIGtleVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5UHVycG9zZSA9PT0gMCB8fCBrZXlQdXJwb3NlID4gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZERpZC5wdXNoKHsgZGlkOiBkaWRBZGRyZXNzLCBob2xkZXJLZXksIHJlc3VsdDogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAga25vd25BZGRyZXNzZXMucHVzaCh7IHNoYTNLZXksIGRpZEFkZHJlc3MgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoZWNrZWREaWQucHVzaCh7IGRpZDogZGlkQWRkcmVzcywgaG9sZGVyS2V5LCByZXN1bHQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBrbm93bkFkZHJlc3Nlc0NvbnRhaW5zKGxpc3Q6IGFueVtdLCBzaGEzS2V5OiBzdHJpbmcsIGRpZENvbnRyYWN0QWRkcmVzczogc3RyaW5nKSB7XG4gICAgICAgIGZvciAoY29uc3QgbGlzdEl0ZW0gb2YgbGlzdCkge1xuICAgICAgICAgICAgaWYgKGxpc3RJdGVtLnNoYTNLZXkgPT09IHNoYTNLZXkgJiYgbGlzdEl0ZW0uZGlkQ29udHJhY3RBZGRyZXNzID09PSBkaWRDb250cmFjdEFkZHJlc3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFNoYTNLZXkoa2V5OiBzdHJpbmcsIHdlYjNOb2RlOiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIHdlYjNOb2RlLnV0aWxzLmtlY2NhazI1NihrZXkpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEtleVB1cnBvc2Uoa2V5TWFuYWdlckNvbnRyYWN0OiBhbnksIGtleTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgLy8gR2V0IEV2ZW50c1xuICAgICAgICBpZiAoa2V5TWFuYWdlckNvbnRyYWN0Lm9wdGlvbnMuYWRkcmVzcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShcIi0xXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGtleU1hbmFnZXJDb250cmFjdC5tZXRob2RzLmdldEtleVB1cnBvc2Uoa2V5KS5jYWxsKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjYWxjdWxhdGVNaW51dGVzRGlmZmVyZW5jZShkdDI6IERhdGUsIGR0MTogRGF0ZSk6IG51bWJlciB7XG4gICAgICAgIGxldCBkaWZmID0gKGR0Mi5nZXRUaW1lKCkgLSBkdDEuZ2V0VGltZSgpKSAvIDEwMDA7XG4gICAgICAgIGRpZmYgLz0gNjA7XG4gICAgICAgIHJldHVybiBNYXRoLmFicyhNYXRoLnJvdW5kKGRpZmYpKTtcbiAgICB9XG5cbiAgICByZU9yZGVyQ3JlZGVudGlhbE9iamVjdChjcmVkZW50aWFsT2JqZWN0OiBJQ3JlZGVudGlhbE9iamVjdCk6IElDcmVkZW50aWFsT2JqZWN0IHtcbiAgICAgICAgLy8gTG9vcCBldmVyeSBwcm92aWRlclxuICAgICAgICBmb3IgKGNvbnN0IHByb3ZpZGVyIG9mIE9iamVjdC5rZXlzKGNyZWRlbnRpYWxPYmplY3QuY3JlZGVudGlhbHMpKSB7XG4gICAgICAgICAgICBjb25zdCBjcmVkZW50aWFsS2V5cyA9IFtdO1xuICAgICAgICAgICAgLy8gR2V0IGFsbCBjcmVkZW50aWFsIGtleXNcbiAgICAgICAgICAgIGZvciAoY29uc3QgY3JlZGVudGlhbEtleSBvZiBPYmplY3Qua2V5cyhjcmVkZW50aWFsT2JqZWN0LmNyZWRlbnRpYWxzW3Byb3ZpZGVyXS5jcmVkZW50aWFscykpIHtcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsS2V5cy5wdXNoKGNyZWRlbnRpYWxLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3JlZGVudGlhbEtleXMuc29ydCgpO1xuICAgICAgICAgICAgY29uc3QgcmVPcmRlcmVkQ3JlZGVudGlhbHMgPSB7fTtcbiAgICAgICAgICAgIC8vIExvb3AgdGhlIGNyZWRlbnRpYWwga2V5cyBvbmUgYnkgb25lIGFuZCByZSBvcmRlciB0aGUgY3JlZGVudGlhbHMgc28gaXRzIGFscGhhYmV0aWNhbFxuICAgICAgICAgICAgZm9yIChjb25zdCBjcmVkZW50aWFsS2V5IG9mIGNyZWRlbnRpYWxLZXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVPcmRlcmVkQ3JlZGVudGlhbCA9IHRoaXMucmVPcmRlckNyZWRlbnRpYWwoY3JlZGVudGlhbE9iamVjdC5jcmVkZW50aWFsc1twcm92aWRlcl0uY3JlZGVudGlhbHNbY3JlZGVudGlhbEtleV0pO1xuICAgICAgICAgICAgICAgIHJlT3JkZXJlZENyZWRlbnRpYWxzW2NyZWRlbnRpYWxLZXldID0gcmVPcmRlcmVkQ3JlZGVudGlhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNyZWRlbnRpYWxPYmplY3QuY3JlZGVudGlhbHNbcHJvdmlkZXJdLnByb29mID0gdGhpcy5yZU9yZGVyQ3JlZGVudGlhbFByb29mKGNyZWRlbnRpYWxPYmplY3QuY3JlZGVudGlhbHNbcHJvdmlkZXJdLnByb29mKTtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxPYmplY3QuY3JlZGVudGlhbHNbcHJvdmlkZXJdID0ge1xuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiByZU9yZGVyZWRDcmVkZW50aWFscyxcbiAgICAgICAgICAgICAgICBwcm9vZjogY3JlZGVudGlhbE9iamVjdC5jcmVkZW50aWFsc1twcm92aWRlcl0ucHJvb2ZcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JlZGVudGlhbE9iamVjdDtcbiAgICB9XG5cbiAgICByZU9yZGVyQ3JlZGVudGlhbChjcmVkZW50aWFsOiBJQ3JlZGVudGlhbCk6IElDcmVkZW50aWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydE9iamVjdEFscGhhYmV0aWNhbGx5KGNyZWRlbnRpYWwpO1xuICAgIH1cblxuICAgIHNvcnRPYmplY3RBbHBoYWJldGljYWxseShvYmplY3Q6IGFueSk6IGFueSB7XG4gICAgICAgIGNvbnN0IHNvcnRlZE9iaiA9IHt9O1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICAgICAgICBrZXlzLnNvcnQoKGtleTEsIGtleTIpID0+IHtcbiAgICAgICAgICAgIGtleTEgPSBrZXkxLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICBrZXkyID0ga2V5Mi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKGtleTEgPCBrZXkyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtleTEgPiBrZXkyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBpdCdzIHRoZSBzYW1lXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZm9yIChjb25zdCBpbmRleCBpbiBrZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbmVzdGVkIG9iamVjdHMsIHdlIG5lZWQgdG8gZGlnIGRlZXBlclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Rba2V5XSA9PSBcIm9iamVjdFwiICYmICEob2JqZWN0W2tleV0gaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgICAgICBzb3J0ZWRPYmpba2V5XSA9IHRoaXMuc29ydE9iamVjdEFscGhhYmV0aWNhbGx5KG9iamVjdFtrZXldKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc29ydGVkT2JqW2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzb3J0ZWRPYmo7XG4gICAgfVxuXG4gICAgcmVPcmRlckNyZWRlbnRpYWxQcm9vZihwcm9vZjogSVByb29mKTogSVByb29mIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGhvbGRlcjogcHJvb2YuaG9sZGVyLFxuICAgICAgICAgICAgbm9uY2U6IHByb29mLm5vbmNlLFxuICAgICAgICAgICAgc2lnbmF0dXJlOiBwcm9vZi5zaWduYXR1cmUsXG4gICAgICAgICAgICB0eXBlOiBwcm9vZi50eXBlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2lnbkNyZWRlbnRpYWwoY3JlZGVudGlhbDogSUNyZWRlbnRpYWwsIHByaXZhdGVLZXk6IHN0cmluZykge1xuICAgICAgICAvLyBJZiB0aGUgb2JqZWN0IGlzIHN0cmluZ2lmaWVkXG4gICAgICAgIGlmICh0eXBlb2YgY3JlZGVudGlhbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY3JlZGVudGlhbCA9IEpTT04ucGFyc2UoY3JlZGVudGlhbCk7XG4gICAgICAgIH1cbiAgICAgICAgY3JlZGVudGlhbCA9IHRoaXMucmVPcmRlckNyZWRlbnRpYWwoY3JlZGVudGlhbCk7XG4gICAgICAgIGNvbnN0IHdlYjMgPSBuZXcgV2ViMygpO1xuICAgICAgICByZXR1cm4gd2ViMy5ldGguYWNjb3VudHMuc2lnbihKU09OLnN0cmluZ2lmeShjcmVkZW50aWFsKSwgcHJpdmF0ZUtleSkuc2lnbmF0dXJlXG4gICAgfVxuXG4gICAgc2lnbkNyZWRlbnRpYWxPYmplY3QoY3JlZGVudGlhbE9iamVjdDogSUNyZWRlbnRpYWxPYmplY3QsIHByaXZhdGVLZXk6IHN0cmluZykge1xuICAgICAgICAvLyBJZiB0aGUgb2JqZWN0IGlzIHN0cmluZ2lmaWVkXG4gICAgICAgIGlmICh0eXBlb2YgY3JlZGVudGlhbE9iamVjdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY3JlZGVudGlhbE9iamVjdCA9IEpTT04ucGFyc2UoY3JlZGVudGlhbE9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgY3JlZGVudGlhbE9iamVjdCA9IHRoaXMucmVPcmRlckNyZWRlbnRpYWxPYmplY3QoY3JlZGVudGlhbE9iamVjdCk7XG4gICAgICAgIGNvbnN0IHdlYjMgPSBuZXcgV2ViMygpO1xuICAgICAgICByZXR1cm4gd2ViMy5ldGguYWNjb3VudHMuc2lnbihKU09OLnN0cmluZ2lmeShjcmVkZW50aWFsT2JqZWN0KSwgcHJpdmF0ZUtleSkuc2lnbmF0dXJlXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Q2xhaW1zKGNsYWltVHlwZTogbnVtYmVyIHwgc3RyaW5nLCBjb250cmFjdEFkZHJlc3M6IHN0cmluZywgd2ViMzogV2ViMyk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIGNvbnN0IGNvbnRyYWN0ID0gbmV3IHdlYjMuZXRoLkNvbnRyYWN0KGNsYWltSG9sZGVyQWJpLCBjb250cmFjdEFkZHJlc3MpO1xuICAgICAgICBjb25zdCBjbGFpbUlkcyA9IGF3YWl0IGNvbnRyYWN0Lm1ldGhvZHMuZ2V0Q2xhaW1JZHNCeVR5cGUoY2xhaW1UeXBlKS5jYWxsKCk7XG4gICAgICAgIGlmIChjbGFpbUlkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIEdldCBhbGwgcmF3IGNsYWltc1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhd0NsYWltcyA9IGF3YWl0IGNvbnRyYWN0Lm1ldGhvZHMuZ2V0Q2xhaW0oY2xhaW1JZHNbY2xhaW1JZHMubGVuZ3RoIC0gMV0pLmNhbGwoKTtcbiAgICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgZGF0YVxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZENsYWltcyA9IEpTT04ucGFyc2Uod2ViMy51dGlscy50b0FzY2lpKHJhd0NsYWltcy5kYXRhKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwYXJzZWRDbGFpbXMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNpZ25Qcm9vZk9iamVjdChwcm9vZk9iamVjdDogSVByb29mT2JqZWN0LCBwcml2YXRlS2V5OiBzdHJpbmcpIHtcbiAgICAgICAgLy8gSWYgdGhlIG9iamVjdCBpcyBzdHJpbmdpZmllZFxuICAgICAgICBpZiAodHlwZW9mIHByb29mT2JqZWN0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBwcm9vZk9iamVjdCA9IEpTT04ucGFyc2UocHJvb2ZPYmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIHByb29mT2JqZWN0ID0gdGhpcy5yZU9yZGVyUHJvb2ZPYmplY3QocHJvb2ZPYmplY3QpO1xuICAgICAgICBjb25zdCB3ZWIzID0gbmV3IFdlYjMoKTtcbiAgICAgICAgcmV0dXJuIHdlYjMuZXRoLmFjY291bnRzLnNpZ24oSlNPTi5zdHJpbmdpZnkocHJvb2ZPYmplY3QpLCBwcml2YXRlS2V5KS5zaWduYXR1cmVcbiAgICB9XG5cbiAgICByZU9yZGVyUHJvb2ZPYmplY3QocHJvb2ZPYmplY3Q6IElQcm9vZk9iamVjdCk6IElQcm9vZk9iamVjdCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRPYmplY3RBbHBoYWJldGljYWxseShwcm9vZk9iamVjdCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdGVkQ3JlZGVudGlhbHNDb3JyZWN0KGNyZWRlbnRpYWxzOiBJQ3JlZGVudGlhbE9iamVjdCwgcmVxdWVzdGVkQ3JlZGVudGlhbHM6IElSZXF1ZXN0ZWRDcmVkZW50aWFscyk6IElSZXF1ZXN0ZWRDcmVkZW50aWFsc0NoZWNrUmVzdWx0IHtcbiAgICAgICAgY29uc3QgY2hlY2tSZXN1bHQ6IElSZXF1ZXN0ZWRDcmVkZW50aWFsc0NoZWNrUmVzdWx0ID0ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1pc3NpbmdLZXlzOiBbXVxuICAgICAgICB9XG4gICAgICAgIC8vIExvb3AgYWxsIHJlcXVlc3RlZCBjcmVkZW50aWFsc1xuICAgICAgICBmb3IgKGNvbnN0IHJlcXVlc3RlZENyZWRlbnRpYWwgb2YgcmVxdWVzdGVkQ3JlZGVudGlhbHMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIGxldCBpc0luc2lkZU1pbmltdW1SZXF1aXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHJlcXVlc3RlZENyZWRlbnRpYWxzLm1pbmltdW1SZXF1aXJlZCkge1xuICAgICAgICAgICAgICAgIGlzSW5zaWRlTWluaW11bVJlcXVpcmVkID0gISFyZXF1ZXN0ZWRDcmVkZW50aWFscy5taW5pbXVtUmVxdWlyZWQuZGF0YS5maW5kKHggPT4geCA9PT0gcmVxdWVzdGVkQ3JlZGVudGlhbC5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2hlY2sgb25seSByZXF1aXJlZCBrZXlzXG4gICAgICAgICAgICBpZiAocmVxdWVzdGVkQ3JlZGVudGlhbC5yZXF1aXJlZCAmJiAhaXNJbnNpZGVNaW5pbXVtUmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVxdWVzdGVkQ3JlZGVudGlhbC5wcm92aWRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkQ3JlZGVudGlhbC5wcm92aWRlciA9IFtyZXF1ZXN0ZWRDcmVkZW50aWFsLnByb3ZpZGVyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwcm92aWRlciBvZiByZXF1ZXN0ZWRDcmVkZW50aWFsLnByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjcmVkZW50aWFscy5jcmVkZW50aWFsc1twcm92aWRlcl0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzLmNyZWRlbnRpYWxzW3Byb3ZpZGVyXS5jcmVkZW50aWFscyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHMuY3JlZGVudGlhbHNbcHJvdmlkZXJdLmNyZWRlbnRpYWxzW3JlcXVlc3RlZENyZWRlbnRpYWwua2V5XVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsbCBnb29kLCBmb3VuZCFcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrUmVzdWx0LnN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tSZXN1bHQubWlzc2luZ0tleXMucHVzaChyZXF1ZXN0ZWRDcmVkZW50aWFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG1pbmltdW0gcmVxdWlyZWQgYW1vdW50IGhhcyBiZWVuIHJlYWNoZWRcbiAgICAgICAgaWYgKHJlcXVlc3RlZENyZWRlbnRpYWxzLm1pbmltdW1SZXF1aXJlZCkge1xuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gT2JqZWN0LmtleXMoY3JlZGVudGlhbHMuY3JlZGVudGlhbHMpO1xuICAgICAgICAgICAgY29uc3QgY3JlZGVudGlhbEtleXMgPSByZXF1ZXN0ZWRDcmVkZW50aWFscy5taW5pbXVtUmVxdWlyZWQuZGF0YTtcbiAgICAgICAgICAgIGxldCBmb3VuZENyZWRlbnRpYWxzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvdmlkZXIgb2YgcHJvdmlkZXJzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjcmVkZW50aWFsS2V5IG9mIGNyZWRlbnRpYWxLZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjcmVkZW50aWFscy5jcmVkZW50aWFsc1twcm92aWRlcl0gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzLmNyZWRlbnRpYWxzW3Byb3ZpZGVyXS5jcmVkZW50aWFscyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHMuY3JlZGVudGlhbHNbcHJvdmlkZXJdLmNyZWRlbnRpYWxzW2NyZWRlbnRpYWxLZXldXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxsIGdvb2QsIGZvdW5kIVxuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRDcmVkZW50aWFscysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvdW5kQ3JlZGVudGlhbHMgPCByZXF1ZXN0ZWRDcmVkZW50aWFscy5taW5pbXVtUmVxdWlyZWQuYW1vdW50KSB7XG4gICAgICAgICAgICAgICAgY2hlY2tSZXN1bHQuc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNoZWNrUmVzdWx0Lm1pc3NpbmdNZXNzYWdlID0gYENoZWNrIHRoZSBtaW5pbXVtUmVxdWlyZWQgYXJyYXkuIEZvdW5kICR7Zm91bmRDcmVkZW50aWFsc30gaXRlbXMgYW5kIHJlcXVpcmVkIGFtb3VudCAke3JlcXVlc3RlZENyZWRlbnRpYWxzLm1pbmltdW1SZXF1aXJlZC5hbW91bnR9YFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGVja1Jlc3VsdDtcbiAgICB9XG59IiwiaW1wb3J0ICogYXMgV2ViU29ja2V0IGZyb20gXCJ3c1wiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCAqIGFzIGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBJUlRDQ29ubmVjdGlvbkNvbmZpZyB9IGZyb20gXCIuL2ludGVyZmFjZXMvcnRjQ29ubmVjdGlvbkNvbmZpZy5pbnRlcmZhY2VcIjtcbmltcG9ydCAqIGFzIGh0dHAgZnJvbSBcImh0dHBcIjtcblxuZXhwb3J0IGNsYXNzIFNpZ25hbGluZ1NlcnZlciB7XG4gICAgd3NTZXJ2ZXI6IGFueTtcbiAgICBydGNDb25uZWN0aW9uQ29uZmlnOiBJUlRDQ29ubmVjdGlvbkNvbmZpZzsgXG5cbiAgICAvKipcbiAgICAgKiBXZWIgUlRDIGNvbm5lY3Rpb24gY29uZmlnXG4gICAgICogQHBhcmFtIHJ0Y0Nvbm5lY3Rpb25Db25maWcgXG4gICAgICovXG4gICAgc2V0UlRDQ29ubmVjdGlvbkNvbmZpZyhydGNDb25uZWN0aW9uQ29uZmlnOiBJUlRDQ29ubmVjdGlvbkNvbmZpZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnJ0Y0Nvbm5lY3Rpb25Db25maWcgPSBydGNDb25uZWN0aW9uQ29uZmlnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBSVEMgcGVlcmNvbm5lY3Rpb25cbiAgICAgKi9cbiAgICBnZXRSVENDb25uZWN0aW9uQ29uZmlnKHR5cGU6IHN0cmluZyk6IFJUQ0NvbmZpZ3VyYXRpb24ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImdldFJUQ0Nvbm5lY3Rpb25Db25maWcgdHVybkVuYWJsZWQ6XCIsIHRoaXMucnRjQ29ubmVjdGlvbkNvbmZpZy50dXJuRW5hYmxlZCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZ2V0UlRDQ29ubmVjdGlvbkNvbmZpZyBzdHVuRW5hYmxlZDpcIiwgdGhpcy5ydGNDb25uZWN0aW9uQ29uZmlnLnN0dW5FbmFibGVkKTtcbiAgICAgICAgaWYgKHRoaXMucnRjQ29ubmVjdGlvbkNvbmZpZy50dXJuRW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJVU0UgVFVSTlwiKTtcbiAgICAgICAgICAgIGNvbnN0IHRpbWUgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGlyYXRpb24gPSB0aGlzLnJ0Y0Nvbm5lY3Rpb25Db25maWcudHVybkV4cGlyYXRpb247XG4gICAgICAgICAgICBjb25zdCB1c2VybmFtZSA9IGAke3RpbWUgKyBleHBpcmF0aW9ufToke3R5cGV9YDtcbiAgICAgICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBjcnlwdG8uY3JlYXRlSG1hYyhcInNoYTFcIiwgdGhpcy5ydGNDb25uZWN0aW9uQ29uZmlnLnR1cm5TZWNyZXQpLnVwZGF0ZSh1c2VybmFtZS50b1N0cmluZygpKS5kaWdlc3QoXCJiYXNlNjRcIik7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInVzZXJuYW1lOlwiLCB1c2VybmFtZSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImNyZWRlbnRpYWw6XCIsIGNyZWRlbnRpYWwpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpY2VDYW5kaWRhdGVQb29sU2l6ZTogNSxcbiAgICAgICAgICAgICAgICBpY2VTZXJ2ZXJzOiBbe1xuICAgICAgICAgICAgICAgICAgICB1cmxzOiBbdGhpcy5ydGNDb25uZWN0aW9uQ29uZmlnLnR1cm5VcmxdLFxuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsLFxuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIH0gYXMgUlRDQ29uZmlndXJhdGlvbjtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJ0Y0Nvbm5lY3Rpb25Db25maWcuc3R1bkVuYWJsZWQpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiVVNFIFNUVU5cIik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGljZVNlcnZlcnM6IFt7XG4gICAgICAgICAgICAgICAgICAgIHVybHM6IFt0aGlzLnJ0Y0Nvbm5lY3Rpb25Db25maWcuc3R1blVybF0sXG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICB9IGFzIFJUQ0NvbmZpZ3VyYXRpb247XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gc2VydmVyIFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGFydFNpZ25hbChzZXJ2ZXI6IGh0dHAuU2VydmVyKTogdm9pZCB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgU2lnbmFsaW5nIHNlcnZlci5cIik7XG4gICAgICAgIHRoaXMud3NTZXJ2ZXIgPSBuZXcgV2ViU29ja2V0LlNlcnZlcih7IHNlcnZlciB9KTtcblxuICAgICAgICBjb25zdCBzZW5kVG8gPSAoZGF0YWNoYW5uZWw6IFJUQ0RhdGFDaGFubmVsLCBtZXNzYWdlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGRhdGFjaGFubmVsLnNlbmQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMud3NTZXJ2ZXIub24oXCJjb25uZWN0aW9uXCIsICh3czogYW55KSA9PiB7XG4gICAgICAgICAgICB3cy51dWlkID0gdXVpZHY0KCk7IC8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY2xpZW50XG4gICAgICAgICAgICB3cy5kaWQgPSBudWxsOyAvLyBXaGVuIGF1dGhlbnRpY2F0ZWQ6IHB1YmxpY0tleSBvciBkaWRBZGRyZXNzXG4gICAgICAgICAgICB3cy5ob3N0ID0gZmFsc2U7IC8vIElzIGEgaG9zdCwgdHJ1ZSBvciBmYWxzZVxuICAgICAgICAgICAgd3MuYXV0aGVudGljYXRlZCA9IGZhbHNlOyAvLyB0cnVlIG9yIGZhbHNlXG4gICAgICAgICAgICB3cy5jb25uZWN0ZWQgPSBudWxsOyAvLyBudWxsIG9yIGNsaWVudC51dWlkIGNvbm5lY3RlZCB0b1xuXG4gICAgICAgICAgICB3cy5vbihcImVycm9yXCIsIChlcnI6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEVDT05OUkVTRVQgY2FuIGdldCB0aHJvd24gd2hlbiB0aGUgY2xpZW50IGRpc2Nvbm5lY3RzLiBUaGlzIGFwcGxpY2F0aW9uXG4gICAgICAgICAgICAgICAgLy8gd2lsbCBjcmFzaC4gSWdub3JlIHRoaXMgZXJyb3IuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgd3Mub24oXCJtZXNzYWdlXCIsIChtc2c6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBkYXRhOiBhbnk7XG5cbiAgICAgICAgICAgICAgICAvLyBhY2NlcHRpbmcgb25seSBKU09OIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UobXNnKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiSW52YWxpZCBKU09OXCIpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHsgdHlwZSwgdG9rZW4sIGhvc3QsIG9mZmVyLCBhbnN3ZXIsIGNhbmRpZGF0ZSB9ID0gZGF0YTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiBhIHVzZXIgdHJpZXMgdG8gbG9naW5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImF1dGhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHVzZXJuYW1lIGlzIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUbyh3cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImF1dGhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ291bGQgbm90IHZhbGlkYXRlIHRva2VuXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmFsaWRhdGUgdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cy5hdXRoZW50aWNhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kVG8od3MsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJBVVRIXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQXV0aGVudGljYXRpb24gc3VjY2Vzc2Z1bFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImhvc3RcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldHVwIGEgY2hhbm5lbCAoSG9zdClcbiAgICAgICAgICAgICAgICAgICAgICAgIHdzLmhvc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKHdzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJob3N0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkhvc3QgaW5pdGlhbGlzZWQgXCIgKyB3cy51dWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IHdzLnV1aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2ViUnRjQ29ubmVjdGlvbkNvbmZpZzogdGhpcy5nZXRSVENDb25uZWN0aW9uQ29uZmlnKFwiaG9zdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBpbmdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldHVwIGEgY2hhbm5lbCAoSG9zdClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiSG9zdCByZWNlaXZlZCBwaW5nLCBzZW5kaW5nIHBvbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kVG8od3MsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInBvbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbm5lY3RcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ubmVjdCB0byBhIGNoYW5uZWwgKEhvc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBob3N0cyA9IFsuLi50aGlzLndzU2VydmVyLmNsaWVudHNdLmZpbHRlcigoY2xpZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC51dWlkID09PSBob3N0ICYmIGNsaWVudC5jb25uZWN0ZWQgPT09IG51bGwgJiYgY2xpZW50Lmhvc3QgPT09IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhvc3RzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kVG8oaG9zdHNbMF0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjb25uZWN0ZWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJDbGllbnQgY29ubmVjdGVkIFwiICsgd3MudXVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZDogd3MudXVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2ViUnRjQ29ubmVjdGlvbkNvbmZpZzogdGhpcy5nZXRSVENDb25uZWN0aW9uQ29uZmlnKFwiaG9zdFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xpZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKHdzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY29ubmVjdGVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ29ubmVjdGVkIHRvIFwiICsgaG9zdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2ViUnRjQ29ubmVjdGlvbkNvbmZpZzogdGhpcy5nZXRSVENDb25uZWN0aW9uQ29uZmlnKFwiY2xpZW50XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMaW5rIHRoZW0gdG9nZXRoZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cy5jb25uZWN0ZWQgPSBob3N0c1swXS51dWlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RzWzBdLmNvbm5lY3RlZCA9IHdzLnV1aWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUbyh3cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNvbm5lY3RlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJDb3VsZCBub3QgY29ubmVjdCB0byBcIiArIGhvc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwib2ZmZXJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIENsaWVudCBleGlzdHMgdGhlbiBzZW5kIGhpbSBvZmZlciBkZXRhaWxzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod3MuY29ubmVjdGVkICE9IG51bGwgJiYgdGhpcy53c1NlcnZlci5jbGllbnRzLnNpemUgPiAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBob3N0c09mZmVyID0gWy4uLnRoaXMud3NTZXJ2ZXIuY2xpZW50c10uZmlsdGVyKChjbGllbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5jb25uZWN0ZWQgPT09IHdzLnV1aWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG9zdHNPZmZlci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKGhvc3RzT2ZmZXJbMF0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwib2ZmZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKHdzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9mZmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKHdzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9mZmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJDb25uZWN0aW9uIG5vdCBmb3VuZC5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUbyh3cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm9mZmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUb28gc29vbi4uLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFuc3dlclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgQ2xpZW50IHJlc3BvbnNlIHRvIGFuIG9mZmVyIHdpdGggYW4gYW5zd2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod3MuY29ubmVjdGVkICE9IG51bGwpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhvc3RzT2ZmZXIgPSBbLi4udGhpcy53c1NlcnZlci5jbGllbnRzXS5maWx0ZXIoKGNsaWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50LmNvbm5lY3RlZCA9PT0gd3MudXVpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChob3N0c09mZmVyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kVG8oaG9zdHNPZmZlclswXSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhbnN3ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUbyh3cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhbnN3ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKHdzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFuc3dlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkNvbm5lY3Rpb24gbm90IGZvdW5kLlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKHdzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYW5zd2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbnN3ZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVG9vIHNvb24uLi5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjYW5kaWRhdGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIENsaWVudCByZXNwb25zZSB0byBhbiBvZmZlciB3aXRoIGFuIGFuc3dlclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdzLmNvbm5lY3RlZCAhPSBudWxsKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBob3N0c09mZmVyID0gWy4uLnRoaXMud3NTZXJ2ZXIuY2xpZW50c10uZmlsdGVyKChjbGllbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsaWVudC5jb25uZWN0ZWQgPT09IHdzLnV1aWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaG9zdHNPZmZlci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKGhvc3RzT2ZmZXJbMF0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiY2FuZGlkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUbyh3cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjYW5kaWRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJDb25uZWN0aW9uIG5vdCBmb3VuZC5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUbyh3cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNhbmRpZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuZGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRvbyBzb29uLi4uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVhdmVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3cy5jb25uZWN0ZWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsaWVudHMgPSBbLi4udGhpcy53c1NlcnZlci5jbGllbnRzXS5maWx0ZXIoKGNsaWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xpZW50LmNvbm5lY3RlZCA9PT0gd3MudXVpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdzLnV1aWQgPSB1dWlkdjQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbGllbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kVG8oY2xpZW50c1swXSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsZWF2ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ29ubmVjdGlvbiBsZWZ0IG9uIHJlY2VpdmUgbGVhdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGllbnRzWzBdLmNvbm5lY3RlZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKHdzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxlYXZlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJDb25uZWN0aW9uIGxlZnQuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkOiB3cy51dWlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUbyh3cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsZWF2ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkNvbm5lY3Rpb24gbm90IGZvdW5kLlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZDogd3MudXVpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3MuY29ubmVjdGVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3MudXVpZCA9IHV1aWR2NCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUbyh3cywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImxlYXZlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIk5vdCBjb25uZWN0ZWQgdG8gaG9zdC9jbGllbnQuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IHdzLnV1aWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VuZFRvKHdzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQ29tbWFuZCBub3QgZm91bmQ6IFwiICsgdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgd3Mub24oXCJjbG9zZVwiLCAod3NBcmc6IGFueSwgcmVxdWVzdDogYW55LCBjbGllbnQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh3c0FyZy5jb25uZWN0ZWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGllbnRzID0gWy4uLnRoaXMud3NTZXJ2ZXIuY2xpZW50c10uZmlsdGVyKChjbGllbnRBcmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGllbnRBcmcuY29ubmVjdGVkID09PSB3c0FyZy51dWlkO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xpZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRUbyhjbGllbnRzWzBdLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJsZWF2ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJDb25uZWN0aW9uIGxlZnQgb24gd2Vic29ja2V0IGNsb3NlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50c1swXS5jb25uZWN0ZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHdzQXJnLmNvbm5lY3RlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBzZW5kIGltbWVkaWF0ZWx5IGEgZmVlZGJhY2sgdG8gdGhlIGluY29taW5nIGNvbm5lY3Rpb25cbiAgICAgICAgICAgIHdzLnNlbmQoXG4gICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNvbm5lY3RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJXZWxsIGhlbGxvIHRoZXJlLCBJIGFtIHRoZSBTaWduYWxpbmcgU2VydmVyXCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkNvbm5lY3Rpb24gcmVjZWl2ZWQgZnJvbTpcIiwgd3MudXVpZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IEFiaUl0ZW0gfSBmcm9tIFwid2ViMy11dGlscy90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgY2xhaW1Ib2xkZXJBYmk6IEFiaUl0ZW1bXSA9IFtcbiAgICB7XG4gICAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9rZXlcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzMzJcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBuYW1lOiBcImdldEtleVB1cnBvc2VcIixcbiAgICAgICAgb3V0cHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwicHVycG9zZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHBheWFibGU6IGZhbHNlLFxuICAgICAgICBzdGF0ZU11dGFiaWxpdHk6IFwidmlld1wiLFxuICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgY29uc3RhbnQ6IHRydWUsXG4gICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiX2tleVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXMzMlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIG5hbWU6IFwiZ2V0S2V5XCIsXG4gICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInB1cnBvc2VcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImtleVR5cGVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImtleVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXMzMlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHBheWFibGU6IGZhbHNlLFxuICAgICAgICBzdGF0ZU11dGFiaWxpdHk6IFwidmlld1wiLFxuICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgY29uc3RhbnQ6IGZhbHNlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9rZXlcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzMzJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9wdXJwb3NlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJfdHlwZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIG5hbWU6IFwiYWRkS2V5XCIsXG4gICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInN1Y2Nlc3NcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBwYXlhYmxlOiBmYWxzZSxcbiAgICAgICAgc3RhdGVNdXRhYmlsaXR5OiBcIm5vbnBheWFibGVcIixcbiAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9jbGFpbVR5cGVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBuYW1lOiBcImdldENsYWltSWRzQnlUeXBlXCIsXG4gICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNsYWltSWRzXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlczMyW11cIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBwYXlhYmxlOiBmYWxzZSxcbiAgICAgICAgc3RhdGVNdXRhYmlsaXR5OiBcInZpZXdcIixcbiAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGNvbnN0YW50OiBmYWxzZSxcbiAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJfY2xhaW1JZFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXMzMlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIG5hbWU6IFwicmVtb3ZlQ2xhaW1cIixcbiAgICAgICAgb3V0cHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHBheWFibGU6IGZhbHNlLFxuICAgICAgICBzdGF0ZU11dGFiaWxpdHk6IFwibm9ucGF5YWJsZVwiLFxuICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgY29uc3RhbnQ6IGZhbHNlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9pZFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiX2FwcHJvdmVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJvb2xcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBuYW1lOiBcImFwcHJvdmVcIixcbiAgICAgICAgb3V0cHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwic3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHBheWFibGU6IGZhbHNlLFxuICAgICAgICBzdGF0ZU11dGFiaWxpdHk6IFwibm9ucGF5YWJsZVwiLFxuICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgY29uc3RhbnQ6IGZhbHNlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9rZXlcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzMzJcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBuYW1lOiBcInJlbW92ZUtleVwiLFxuICAgICAgICBvdXRwdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJib29sXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgcGF5YWJsZTogZmFsc2UsXG4gICAgICAgIHN0YXRlTXV0YWJpbGl0eTogXCJub25wYXlhYmxlXCIsXG4gICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIlxuICAgIH0sXG4gICAge1xuICAgICAgICBjb25zdGFudDogdHJ1ZSxcbiAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJfcHVycG9zZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIG5hbWU6IFwiZ2V0S2V5c0J5UHVycG9zZVwiLFxuICAgICAgICBvdXRwdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJfa2V5c1wiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXMzMltdXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgcGF5YWJsZTogZmFsc2UsXG4gICAgICAgIHN0YXRlTXV0YWJpbGl0eTogXCJ2aWV3XCIsXG4gICAgICAgIHR5cGU6IFwiZnVuY3Rpb25cIlxuICAgIH0sXG4gICAge1xuICAgICAgICBjb25zdGFudDogZmFsc2UsXG4gICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiX2NsYWltVHlwZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiX3NjaGVtZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiX2lzc3VlclwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkcmVzc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiX3NpZ25hdHVyZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXNcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9kYXRhXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiX3VyaVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgbmFtZTogXCJhZGRDbGFpbVwiLFxuICAgICAgICBvdXRwdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJjbGFpbVJlcXVlc3RJZFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXMzMlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHBheWFibGU6IGZhbHNlLFxuICAgICAgICBzdGF0ZU11dGFiaWxpdHk6IFwibm9ucGF5YWJsZVwiLFxuICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgY29uc3RhbnQ6IGZhbHNlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl90b1wiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkcmVzc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiX3ZhbHVlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJfZGF0YVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXNcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBuYW1lOiBcImV4ZWN1dGVcIixcbiAgICAgICAgb3V0cHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiZXhlY3V0aW9uSWRcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBwYXlhYmxlOiBmYWxzZSxcbiAgICAgICAgc3RhdGVNdXRhYmlsaXR5OiBcIm5vbnBheWFibGVcIixcbiAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9jbGFpbUlkXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlczMyXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgbmFtZTogXCJnZXRDbGFpbVwiLFxuICAgICAgICBvdXRwdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJjbGFpbVR5cGVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInNjaGVtZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiaXNzdWVyXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhZGRyZXNzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJzaWduYXR1cmVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJkYXRhXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwidXJpXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBwYXlhYmxlOiBmYWxzZSxcbiAgICAgICAgc3RhdGVNdXRhYmlsaXR5OiBcInZpZXdcIixcbiAgICAgICAgdHlwZTogXCJmdW5jdGlvblwiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGNvbnN0YW50OiB0cnVlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9rZXlcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzMzJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcIl9wdXJwb3NlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgbmFtZTogXCJrZXlIYXNQdXJwb3NlXCIsXG4gICAgICAgIG91dHB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBcInJlc3VsdFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYm9vbFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHBheWFibGU6IGZhbHNlLFxuICAgICAgICBzdGF0ZU11dGFiaWxpdHk6IFwidmlld1wiLFxuICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgYW5vbnltb3VzOiBmYWxzZSxcbiAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNsYWltUmVxdWVzdElkXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNsYWltVHlwZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwic2NoZW1lXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImlzc3VlclwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkcmVzc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwic2lnbmF0dXJlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiZGF0YVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXNcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcInVyaVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgbmFtZTogXCJDbGFpbVJlcXVlc3RlZFwiLFxuICAgICAgICB0eXBlOiBcImV2ZW50XCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgYW5vbnltb3VzOiBmYWxzZSxcbiAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNsYWltSWRcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzMzJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY2xhaW1UeXBlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImlzc3VlclwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkcmVzc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwic2lnbmF0dXJlVHlwZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwic2lnbmF0dXJlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlczMyXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjbGFpbVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXNcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcInVyaVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgbmFtZTogXCJDbGFpbUFkZGVkXCIsXG4gICAgICAgIHR5cGU6IFwiZXZlbnRcIlxuICAgIH0sXG4gICAge1xuICAgICAgICBhbm9ueW1vdXM6IGZhbHNlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY2xhaW1JZFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXMzMlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJjbGFpbVR5cGVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcInNjaGVtZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJpc3N1ZXJcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFkZHJlc3NcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcInNpZ25hdHVyZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXNcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImRhdGFcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJ1cmlcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIG5hbWU6IFwiQ2xhaW1BZGRlZFwiLFxuICAgICAgICB0eXBlOiBcImV2ZW50XCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgYW5vbnltb3VzOiBmYWxzZSxcbiAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNsYWltSWRcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzMzJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY2xhaW1UeXBlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJzY2hlbWVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiaXNzdWVyXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhZGRyZXNzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJzaWduYXR1cmVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJkYXRhXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwidXJpXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBuYW1lOiBcIkNsYWltUmVtb3ZlZFwiLFxuICAgICAgICB0eXBlOiBcImV2ZW50XCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgYW5vbnltb3VzOiBmYWxzZSxcbiAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImNsYWltSWRcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzMzJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiY2xhaW1UeXBlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJzY2hlbWVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiaXNzdWVyXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhZGRyZXNzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJzaWduYXR1cmVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJkYXRhXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwidXJpXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBuYW1lOiBcIkNsYWltQ2hhbmdlZFwiLFxuICAgICAgICB0eXBlOiBcImV2ZW50XCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgYW5vbnltb3VzOiBmYWxzZSxcbiAgICAgICAgaW5wdXRzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImV4ZWN1dGlvbklkXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcInRvXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhZGRyZXNzXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcInZhbHVlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJkYXRhXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlc1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIG5hbWU6IFwiRXhlY3V0aW9uRmFpbGVkXCIsXG4gICAgICAgIHR5cGU6IFwiZXZlbnRcIlxuICAgIH0sXG4gICAge1xuICAgICAgICBhbm9ueW1vdXM6IGZhbHNlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwia2V5XCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJieXRlczMyXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaW5kZXhlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcInB1cnBvc2VcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwia2V5VHlwZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIG5hbWU6IFwiS2V5QWRkZWRcIixcbiAgICAgICAgdHlwZTogXCJldmVudFwiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGFub255bW91czogZmFsc2UsXG4gICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJrZXlcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzMzJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwicHVycG9zZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJrZXlUeXBlXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJ1aW50MjU2XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgbmFtZTogXCJLZXlSZW1vdmVkXCIsXG4gICAgICAgIHR5cGU6IFwiZXZlbnRcIlxuICAgIH0sXG4gICAge1xuICAgICAgICBhbm9ueW1vdXM6IGZhbHNlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiZXhlY3V0aW9uSWRcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwidG9cIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFkZHJlc3NcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwidmFsdWVcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImRhdGFcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5dGVzXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgbmFtZTogXCJFeGVjdXRpb25SZXF1ZXN0ZWRcIixcbiAgICAgICAgdHlwZTogXCJldmVudFwiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGFub255bW91czogZmFsc2UsXG4gICAgICAgIGlucHV0czogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJleGVjdXRpb25JZFwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJ0b1wiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkcmVzc1wiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJ2YWx1ZVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwidWludDI1NlwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGluZGV4ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiZGF0YVwiLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYnl0ZXNcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBuYW1lOiBcIkV4ZWN1dGVkXCIsXG4gICAgICAgIHR5cGU6IFwiZXZlbnRcIlxuICAgIH0sXG4gICAge1xuICAgICAgICBhbm9ueW1vdXM6IGZhbHNlLFxuICAgICAgICBpbnB1dHM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiZXhlY3V0aW9uSWRcIixcbiAgICAgICAgICAgICAgICB0eXBlOiBcInVpbnQyNTZcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmRleGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBcImFwcHJvdmVkXCIsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJib29sXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgbmFtZTogXCJBcHByb3ZlZFwiLFxuICAgICAgICB0eXBlOiBcImV2ZW50XCJcbiAgICB9XG5dO1xuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgSVdlYlJUQ0NvbmZpZyB9IGZyb20gXCIuL2ludGVyZmFjZXMvd2ViUnRjQ29uZmlnLmludGVyZmFjZVwiO1xuaW1wb3J0IHsgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLCBSVENJY2VDYW5kaWRhdGUgfSBmcm9tIFwid3J0Y1wiO1xuaW1wb3J0IHsgdzNjd2Vic29ja2V0IH0gZnJvbSBcIndlYnNvY2tldFwiO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgV2ViUnRjUHJvdmlkZXIge1xuICAgIHdlYlJ0Y0NvbmZpZzogSVdlYlJUQ0NvbmZpZztcbiAgICBob3N0VXVpZDogc3RyaW5nOyAvLyBUaGUgaG9zdCBVVUlEIHRvIGNvbm5lY3QgdG8gZnJvbSB0aGUgY2xpZW50XG4gICAgcGVlckNvbm5lY3Rpb246IFJUQ1BlZXJDb25uZWN0aW9uID0gbnVsbDsgLy8gVGhlIHBlZXIgY29ubmVjdGlvbiBiZXR3ZWVuIGNsaWVudCBhbmQgaG9zdFxuICAgIGRhdGFDaGFubmVsOiBSVENEYXRhQ2hhbm5lbCA9IG51bGw7IC8vIFRoZSBkYXRhIGNoYW5uZWwgYmV0d2VlbiBjbGllbnQgYW5kIGhvc3RcbiAgICB3c0NsaWVudDogdzNjd2Vic29ja2V0ID0gbnVsbDsgLy8gVGhlIHdlYnNvY2tldCBjb25uZWN0aW9uIGJldHdlZW4gY2xpZW50IGFuZCBzaWduYWxpbmcgc2VydmVyIG9yIGhvc3QgYW5kIHNpZ25hbGluZyBzZXJ2ZXJcbiAgICByZWNlaXZlZEFjdGlvbnMkID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTsgLy8gV2hlbmV2ZXIgYW4gYWN0aW9uIGlzIHJlY2VpdmVkLCB0aGlzIG9ic2VydmFibGUgd2lsbCBlbWl0IGFuIGV2ZW50XG4gICAgdXVpZCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PHN0cmluZz4obnVsbCk7IC8vIFdoZW5ldmVyIHRoZSBVVUlEIGlzIHNldCwgaXQgd2lsbCBlbWl0IGFuIGV2ZW50IChzbyB0aGF0IHRoZSBob3N0IGNhbiBzZXQgaXQgc29tZXdoZXJlIGluIGxpa2UgYSBRUilcbiAgICB3ZWJzb2NrZXRNZXNzYWdlJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8YW55PihudWxsKTsgLy8gV2hlbmV2ZXIgdGhlcmUgaXMgYW4gZXZlbnQgb24gdGhlIHdlYnNvY2tldCwgdGhpcyBvYnNlcnZhYmxlIHdpbGwgZW1pdFxuICAgIHdlYnNvY2tldENvbm5lY3Rpb25DbG9zZWQkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPihudWxsKTsgLy8gV2hlbmV2ZXIgdGhlcmUgaXMgYW4gZXZlbnQgb24gdGhlIHdlYnNvY2tldCwgdGhpcyBvYnNlcnZhYmxlIHdpbGwgZW1pdFxuICAgIHdlYnNvY2tldENvbm5lY3Rpb25PcGVuJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4obnVsbCk7IC8vIFdoZW5ldmVyIHRoZXJlIGlzIGFuIGV2ZW50IG9uIHRoZSB3ZWJzb2NrZXQsIHRoaXMgb2JzZXJ2YWJsZSB3aWxsIGVtaXRcbiAgICB3ZWJzb2NrZXRDb25uZWN0aW9uRXJyb3IkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPihudWxsKTsgLy8gV2hlbmV2ZXIgdGhlcmUgaXMgYW4gZXJyb3IgZXZlbnQgb24gdGhlIHdlYnNvY2tldCwgdGhpcyBvYnNlcnZhYmxlIHdpbGwgZW1pdFxuICAgIHdlYlJ0Y0Nvbm5lY3Rpb25Db25maWc6IFJUQ0NvbmZpZ3VyYXRpb247XG4gICAgY29ubmVjdGlvblRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0ID0gbnVsbDtcbiAgICBwb25nQ2hlY2tJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgPSBudWxsO1xuICAgIHBpbmdUaW1lb3V0OiBOb2RlSlMuVGltZW91dCA9IG51bGw7XG4gICAgV0VCU09DS0VUX1BJTkdfQU5TV0VSX0RFTEFZID0gMTAwMDtcbiAgICAvLyBUaGUgYWxsb3dlZCB0aW1lIGJlZm9yZSBhIHBpbmcgcG9uZyBpcyBtaXNzaW5nIGFuZCB0aHVzIGRpc2Nvbm5lY3RpbmcgdGhlIGNvbm5lY3Rpb25cbiAgICBXRUJTT0NLRVRfUElOR19QT05HX0FMTE9XRURfVElNRSA9IDMwMDA7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBXZWJSVEMgY29uZmlndXJhdGlvblxuICAgICAqL1xuICAgIGdldENvbmZpZygpOiBJV2ViUlRDQ29uZmlnIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2ViUnRjQ29uZmlnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBjbGllbnQgbmVlZHMgdG8gc2V0IHRoZSBob3N0IFVVSUQgdG8gY29ubmVjdCB0byBiZWZvcmUgc2V0dGluZyB1cCB0aGUgd2Vic29ja2V0IGNvbm5lY3Rpb25cbiAgICAgKiBAcGFyYW0gaG9zdFV1aWQgVGhlIFVVSUQgb2YgdGhlIGhvc3RcbiAgICAgKi9cbiAgICBzZXRIb3N0VXVpZChob3N0VXVpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaG9zdFV1aWQgPSBob3N0VXVpZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZW5kIGRhdGEgb3ZlciB0aGUgZGF0YSBjaGFubmVsXG4gICAgICogQHBhcmFtIGFjdGlvbiBBcyBhIHN0cmluZywgd2hpY2ggYWN0aW9uIHR5cGUgZG8geW91IHdhbnQgdG8gc2VuZD9cbiAgICAgKiBAcGFyYW0gZGF0YSBUaGUgZGF0YSB0byBzZW5kIGFzIGFuIG9iamVjdFxuICAgICAqL1xuICAgIHNlbmREYXRhKGFjdGlvbjogc3RyaW5nLCBkYXRhOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YUNoYW5uZWwgJiYgdGhpcy5kYXRhQ2hhbm5lbC5yZWFkeVN0YXRlID09PSBcIm9wZW5cIikge1xuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgYWN0aW9uLCAuLi5kYXRhIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBBdHRlbXB0ZWQgdG8gc2VuZCBkYXRhIHdpdGggYWN0aW9uICR7YWN0aW9ufSBidXQgZGF0YSBjaGFubmVsIGlzIG5vdCBvcGVuYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXaGVuZXZlciB0aGUgVVVJRCBpcyBzZXQgZnJvbSB0aGUgaG9zdCB0aGlzIG9ic2VydmFibGUgZW1pdHNcbiAgICAgKiBAcGFyYW0gdXVpZCBUaGUgVVVJRCB0byBhbGxvdyBjbGllbnRzIGNvbm5lYyB0b1xuICAgICAqL1xuICAgIHNldFV1aWQodXVpZDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMudXVpZCQubmV4dCh1dWlkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPbmx5IGRpc2Nvbm5lY3Qgb24gdGhpcyBhcHBsaWNhdGlvbiBhbmQgc2VuZCBubyBkaXNjb25uZWN0IG92ZXIgdGhlIGRhdGEgY2hhbm5lbFxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3QoKTogdm9pZCB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbmdDaGVja0ludGVydmFsKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGluZ1RpbWVvdXQpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkRpc2Nvbm5lY3RcIik7XG4gICAgICAgIGlmICh0aGlzLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlBlZXJjb25uZWN0aW9uIGNsb3NlZFwiKTtcbiAgICAgICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kYXRhQ2hhbm5lbCkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJkYXRhQ2hhbm5lbCBjbG9zZWRcIik7XG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFubmVsLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud3NDbGllbnQpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiV2Vic29ja2V0IGNsb3NlZFwiKTtcbiAgICAgICAgICAgIHRoaXMud3NDbGllbnQuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMud3NDbGllbnQub25jbG9zZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuZGF0YUNoYW5uZWwgPSBudWxsO1xuICAgICAgICB0aGlzLndzQ2xpZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0aW9uQ2xvc2VkJC5uZXh0KHRydWUpO1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3Rpb25PcGVuJC5uZXh0KGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNjb25uZWN0IG9uIHRoaXMgYXBwbGljYXRpb24gYW5kIHNlbmQgYSBkaXNjb25uZWN0IGV2ZW50IG92ZXIgdGhlIGRhdGFjaGFubmVsXG4gICAgICovXG4gICAgcmVtb3RlRGlzY29ubmVjdCgpOiB2b2lkIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJkYXRhY2hhbm5lbDpcIiwgdGhpcy5kYXRhQ2hhbm5lbCk7XG4gICAgICAgIGlmICh0aGlzLmRhdGFDaGFubmVsICYmIHRoaXMuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZSA9PT0gXCJvcGVuXCIpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiRGF0YSBjaGFubmVsIHNlbmRpbmcgZGlzY29ubmVjdFwiKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5uZWwuc2VuZChKU09OLnN0cmluZ2lmeSh7IGFjdGlvbjogXCJkaXNjb25uZWN0XCIgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiV2FpdGluZyAxIHNlY29uZCBmb3IgY2xpZW50IGRpc2Nvbm5lY3RcIik7XG4gICAgICAgIC8vIFRPRE86IElzIG9uZSBzZWNvbmQgZW5vdWdoP1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQ2xpZW50IGRpc2Nvbm5lY3RcIik7XG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgfSwgMTAwMClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaG9zdCB3aWxsIHNlbmQgYW4gb2ZmZXIgd2hlbiBhIGNsaWVudCBjb25uZWN0cyB0byBoaXMgVVVJRFxuICAgICAqIEBwYXJhbSBwZWVyQ29ubmVjdGlvbiBUaGUgcGVlciBjb25uZWN0aW9uIHRvIHNldCB0aGUgbG9jYWwgZGVzY3JpcHRpb25cbiAgICAgKiBAcGFyYW0gd3NDbGllbnQgVGhlIHdlYnNvY2tldCB0byBzZW5kIHRoZSBvZmZlciB0b1xuICAgICAqL1xuICAgIGFzeW5jIHNlbmRPZmZlcihwZWVyQ29ubmVjdGlvbjogUlRDUGVlckNvbm5lY3Rpb24sIHdzQ2xpZW50OiB3M2N3ZWJzb2NrZXQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBwZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpO1xuICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKG9mZmVyKTtcbiAgICAgICAgd3NDbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB0eXBlOiBcIm9mZmVyXCIsXG4gICAgICAgICAgICBvZmZlclxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBsYXVuY2ggdGhlIHdlYnNvY2tldCBhbmQgbGlzdGVuIHRvIGV2ZW50c1xuICAgICAqL1xuICAgIGFzeW5jIGxhdW5jaFdlYnNvY2tldENsaWVudCh3ZWJSdGNDb25maWc6IElXZWJSVENDb25maWcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdGhpcy53ZWJSdGNDb25maWcgPSB3ZWJSdGNDb25maWc7XG5cbiAgICAgICAgbGV0IGNvbm5lY3Rpb25TdWNjZXNzID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZWNlaXZlZEFjdGlvbnMkID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvblRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNvbm5lY3Rpb25UaW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnV1aWQkID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcbiAgICAgICAgdGhpcy53ZWJzb2NrZXRNZXNzYWdlJCA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGlvbkNsb3NlZCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KG51bGwpO1xuICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3Rpb25PcGVuJCA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7XG4gICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGlvbkVycm9yJCA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7XG5cbiAgICAgICAgbGV0IHNpZ25hbGluZ1VybCA9IHRoaXMud2ViUnRjQ29uZmlnLnNpZ25hbGluZ1VybDtcbiAgICAgICAgaWYgKCFzaWduYWxpbmdVcmwpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic2lnbmFsaW5nVXJsIHVuZGVmaW5lZCwgZmFsbGluZyBiYWNrIHRvIGRlZmF1bHRcIik7XG4gICAgICAgICAgICBzaWduYWxpbmdVcmwgPSBcIndzczovL2F1dGgucHJvb2ZtZS5pZFwiO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ29ubmVjdGluZyB0byBzaWduYWxpbmcgc2VydmVyOlwiLCBzaWduYWxpbmdVcmwpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIndlYlJ0Y0NvbmZpZy5jaGFubmVsSWQ6XCIsIHdlYlJ0Y0NvbmZpZy5jaGFubmVsKTtcbiAgICAgICAgbGV0IHVybCA9IGAke3NpZ25hbGluZ1VybH0/Y2hhbm5lbD0ke3dlYlJ0Y0NvbmZpZy5jaGFubmVsfWA7XG4gICAgICAgIGlmICh3ZWJSdGNDb25maWcuZGF0YSkge1xuICAgICAgICAgICAgdXJsID0gYCR7dXJsfSZkYXRhPSR7d2ViUnRjQ29uZmlnLmRhdGF9YDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndzQ2xpZW50ID0gbmV3IHczY3dlYnNvY2tldCh1cmwpO1xuICAgICAgICAvLyBTbyBpZiB0aGVyZSBpcyBub3QgYSBzdWNjZXNzIGNvbm5lY3Rpb24gYWZ0ZXIgMTAgc2Vjb25kcywgY2xvc2UgdGhlIHNvY2tldCBhbmQgc2VuZCBhbiBlcnJvclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvblN1Y2Nlc3MgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3Rpb25FcnJvciQubmV4dCh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLndzQ2xpZW50LmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMDAwKTtcbiAgICAgICAgdGhpcy53c0NsaWVudC5vbmVycm9yID0gKGVycm9yID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiV2Vic29ja2V0IGVycm9yOiBcIiArIGVycm9yLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgY29ubmVjdGlvblN1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGlvbkNsb3NlZCQubmV4dCh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGlvbk9wZW4kLm5leHQoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy53ZWJzb2NrZXRDb25uZWN0aW9uRXJyb3IkLm5leHQodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLndzQ2xpZW50Lm9uY2xvc2UgPSAoKCkgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJXZWJzb2NrZXQgY29ubmVjdGlvbiBjbG9zZWRcIik7XG4gICAgICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3Rpb25DbG9zZWQkLm5leHQodHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3Rpb25PcGVuJC5uZXh0KGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMud3NDbGllbnQub25vcGVuID0gKCgpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiV2Vic29ja2V0IGNvbm5lY3Rpb24gb3BlblwiKTtcbiAgICAgICAgICAgIGNvbm5lY3Rpb25TdWNjZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMud2Vic29ja2V0Q29ubmVjdGlvbkNsb3NlZCQubmV4dChmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLndlYnNvY2tldENvbm5lY3Rpb25PcGVuJC5uZXh0KHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy53c0NsaWVudC5vbm1lc3NhZ2UgPSAoYXN5bmMgbXNnID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiV2ViUlRDIGxpYnJhcnkgcmVjZWl2ZWQgbXNnOlwiLCBtc2cpO1xuICAgICAgICAgICAgdGhpcy53ZWJzb2NrZXRNZXNzYWdlJC5uZXh0KG1zZyk7XG4gICAgICAgICAgICBpZiAobXNnLmRhdGEpIHtcblxuICAgICAgICAgICAgICAgIGxldCBkYXRhOiBhbnk7XG4gICAgICAgICAgICAgICAgLy8gYWNjZXB0aW5nIG9ubHkgSlNPTiBtZXNzYWdlc1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKG1zZy5kYXRhIGFzIHN0cmluZyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIldlYnNvY2tldCBvbm1lc3NhZ2UgRVJST1I6IEludmFsaWQgSlNPTlwiKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IHR5cGUsIG1lc3NhZ2UsIHN1Y2Nlc3MsIHV1aWQsIG9mZmVyLCBhbnN3ZXIsIGNhbmRpZGF0ZSwgd2ViUnRjQ29ubmVjdGlvbkNvbmZpZyB9ID0gZGF0YTtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZXJyb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uIGFuIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIldlYnNvY2tldCBvbm1lc3NhZ2UgZXJyb3I6IFwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlID09IFwiQ29tbWFuZCBub3QgZm91bmQ6IHBpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbmdDaGVja0ludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbmdDaGVja0ludGVydmFsID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBQaW5nIHBvbmcgdG9vayBtb3JlIHRoYW4gJHt0aGlzLldFQlNPQ0tFVF9QSU5HX1BPTkdfQUxMT1dFRF9USU1FfW1zLiBEaXNjb25uZWN0aW5nYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuV0VCU09DS0VUX1BJTkdfUE9OR19BTExPV0VEX1RJTUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZFBpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29ubmVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJXZWJzb2NrZXQgY29ubmVjdCBzdWNjZXNzOlwiLCBzdWNjZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gY29ubmVjdGVkIHRvIHRoZSBTaWduYWxpbmcgc2VydmljZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53ZWJSdGNDb25maWcuaXNIb3N0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiV2Vic29ja2V0IGNvbm5lY3QgaXMgaG9zdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4VHJpZXMgPSA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmllcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLndzQ2xpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53c0NsaWVudCAmJiB0aGlzLndzQ2xpZW50LnJlYWR5U3RhdGUgPT09IDEgJiYgdHJpZXMgPCBtYXhUcmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBhcHBsaWNhdGlvbiBpcyB0aGUgaG9zdCwgc2VuZCBhIGhvc3QgcmVxdWVzdCB0byByZWNlaXZlIGEgVVVJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud3NDbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6IFwiaG9zdFwiIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmllcyA+PSBtYXhUcmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZXMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJXZWJzb2NrZXQgY29ubmVjdCBpcyBub3QgaG9zdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4VHJpZXMgPSA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmllcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLndzQ2xpZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53c0NsaWVudCAmJiB0aGlzLndzQ2xpZW50LnJlYWR5U3RhdGUgPT09IDEgJiYgdHJpZXMgPCBtYXhUcmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBhcHBsaWNhdGlvbiBpcyBub3QgdGhlIGhvc3QsIHNlbmQgYSBjb25uZWN0IHJlcXVlc3Qgd2l0aCB0aGUgaG9zdCBVVUlEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53c0NsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJjb25uZWN0XCIsIGhvc3Q6IHRoaXMuaG9zdFV1aWQgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyaWVzID49IG1heFRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmllcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiV2Vic29ja2V0IG9ubWVzc2FnZSBjb25uZWN0IGZhaWx1cmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvbm5lY3RlZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJDb25uZWN0ZWQgd2l0aCB3ZWJSdGNDb25uZWN0aW9uQ29uZmlnOlwiLCB3ZWJSdGNDb25uZWN0aW9uQ29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHN1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgc28gbm8gbmVlZCB0byBjaGVjayBvbiB0aGUgcGluZyBwb25nIGFueW1vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBvbmdDaGVja0ludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3ZWJSdGNDb25uZWN0aW9uQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53ZWJSdGNDb25uZWN0aW9uQ29uZmlnID0gd2ViUnRjQ29ubmVjdGlvbkNvbmZpZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMud2ViUnRjQ29uZmlnLmlzSG9zdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldHVwUGVlcmNvbm5lY3Rpb24odGhpcy5ob3N0VXVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgaG9zdCByZWNlaXZlZCBhbiBVVUlEXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXVpZCAmJiB0aGlzLndlYlJ0Y0NvbmZpZy5pc0hvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIldlYnNvY2tldCBvbm1lc3NhZ2UgY29ubmVjdGVkIHN1Y2Nlc3Mgd2l0aCBjbGllbnQgdXVpZDpcIiwgdXVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kT2ZmZXIodGhpcy5wZWVyQ29ubmVjdGlvbiwgdGhpcy53c0NsaWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBvbmdcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY2xpZW50IHJlY2VpdmVkIHBvbmdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wb25nQ2hlY2tJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvbmdDaGVja0ludGVydmFsID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFBpbmcgcG9uZyB0b29rIG1vcmUgdGhhbiAke3RoaXMuV0VCU09DS0VUX1BJTkdfUE9OR19BTExPV0VEX1RJTUV9bXMuIERpc2Nvbm5lY3RpbmdgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuV0VCU09DS0VUX1BJTkdfUE9OR19BTExPV0VEX1RJTUUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kUGluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvZmZlclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGFwcGxpY2F0aW9uIGlzIG5vdCB0aGUgaG9zdCwgaXQgcmVjZWl2ZXMgYW4gb2ZmZXIgd2hlbmV2ZXIgYSBjbGllbnQgY29ubmVjdHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY2xpZW50IHdpbGwgc2VuZCBhbiBhbnN3ZXIgYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJSZWNlaXZlZCBvZmZlcjpcIiwgb2ZmZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0aGlzLnBlZXJDb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZTpcIiwgdGhpcy5wZWVyQ29ubmVjdGlvbi5jb25uZWN0aW9uU3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9mZmVyICYmICF0aGlzLndlYlJ0Y0NvbmZpZy5pc0hvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24ob2ZmZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBob3N0QW5zd2VyID0gYXdhaXQgdGhpcy5wZWVyQ29ubmVjdGlvbi5jcmVhdGVBbnN3ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oaG9zdEFuc3dlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53c0NsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhbnN3ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5zd2VyOiBob3N0QW5zd2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJob3N0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlJlY2VpdmVkIGhvc3RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuZXZlciB0aGUgaG9zdCByZWNlaXZlcyBhIGhvc3QgcmVxdWVzdCBiYWNrLCBzZXQgdGhlIFVVSUQgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1dWlkICYmIHRoaXMud2ViUnRjQ29uZmlnLmlzSG9zdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQWN0aW5nIGFzIGhvc3QsIHdhaXRpbmcgZm9yIHNvbWVvbmUgdG8gY29ubmVjdCB0byB1dWlkIFwiICsgdXVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRVdWlkKHV1aWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3ZWJSdGNDb25uZWN0aW9uQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2ViUnRjQ29ubmVjdGlvbkNvbmZpZyA9IHdlYlJ0Y0Nvbm5lY3Rpb25Db25maWc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dXBQZWVyY29ubmVjdGlvbih1dWlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmRQaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxlYXZlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuZXZlciB0aGUgaG9zdCBvciBjbGllbnQgbGVhdmVzIHNldHVwIGEgbmV3IGNvbm5lY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiV2Vic29ja2V0IG9ubWVzc2FnZSBsZWF2ZSBob3N0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRVdWlkKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFuc3dlclwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJSZWNlaXZlZCBhbnN3ZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRoaXMucGVlckNvbm5lY3Rpb24uY29ubmVjdGlvblN0YXRlOlwiLCB0aGlzLnBlZXJDb25uZWN0aW9uLmNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgY2xpZW50IHdpbGwgc2VuZCBhbiBhbnN3ZXIgYW5kIHRoZSBob3N0IHdpbGwgc2V0IGl0IGFzIGEgZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbnN3ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24oYW5zd2VyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNhbmRpZGF0ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJSZWNlaXZlZCBjYW5kaWRhdGUgZnJvbSBjbGllbnQhXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImNhbmRpZGF0ZTpcIiwgY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uIHJlY2VpdmluZyBhbiBjYW5kaWRhdGUgZnJvbSB0aGUgY2xpZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xpZW50Q2FuZGlkYXRlID0gbmV3IFJUQ0ljZUNhbmRpZGF0ZShjYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGVlckNvbm5lY3Rpb24uYWRkSWNlQ2FuZGlkYXRlKGNsaWVudENhbmRpZGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNsaWVudFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJDbGllbnQgYWN0aW9uIHJlY2VpdmVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2ViUnRjQ29ubmVjdGlvbkNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2ViUnRjQ29ubmVjdGlvbkNvbmZpZyA9IHdlYlJ0Y0Nvbm5lY3Rpb25Db25maWc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLndlYlJ0Y0NvbmZpZy5pc0hvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJJcyBub3QgaG9zdCBzbyBzZW5kaW5nIG9mZmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldHVwUGVlcmNvbm5lY3Rpb24odGhpcy5ob3N0VXVpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZE9mZmVyKHRoaXMucGVlckNvbm5lY3Rpb24sIHRoaXMud3NDbGllbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiRG9pbmcgbm90aGluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBkZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmVycm9yKFwiV2Vic29ja2V0IG9ubWVzc2FnZSBkZWZhdWx0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZW5kUGluZygpOiB2b2lkIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJhYm91dCB0byBzZW5kIHBpbmcgdG8gc2VydmVyXCIpO1xuICAgICAgICB0aGlzLnBpbmdUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBSZWFkeSBzdGF0ZSAxID0gb3BlblxuICAgICAgICAgICAgaWYgKHRoaXMud3NDbGllbnQucmVhZHlTdGF0ZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYWN0dWFsbHkgc2VuZGluZyBwaW5nIHRvIHNlcnZlclwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLndzQ2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInBpbmdcIlxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJXZWJzb2NrZXQgY2xvc2VkIGluIHRoZSBtZWFudGltZS4uLiBOb3Qgc2VuZGluZyBwaW5nXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLldFQlNPQ0tFVF9QSU5HX0FOU1dFUl9ERUxBWSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2Qgd2lsbCBzZXR1cCB0aGUgcGVlcmNvbm5lY3Rpb24gYW5kIGRhdGFjaGFubmVsXG4gICAgICogSXQgd2lsbCBhbHNvIGVtaXQgcmVjZWl2ZWQgYWN0aW9ucyBvdmVyIGFuIG9ic2VydmFibGVcbiAgICAgKiBAcGFyYW0gdXVpZCBUaGUgVVVJRCB0byBjb25uZWN0IHRvXG4gICAgICovXG4gICAgYXN5bmMgc2V0dXBQZWVyY29ubmVjdGlvbih1dWlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJzZXR1cFBlZXJjb25uZWN0aW9uIDIgd2l0aCB1dWlkOlwiLCB1dWlkKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0aGlzLndlYlJ0Y0Nvbm5lY3Rpb25Db25maWc6XCIsIHRoaXMud2ViUnRjQ29ubmVjdGlvbkNvbmZpZyk7XG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24gPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24odGhpcy53ZWJSdGNDb25uZWN0aW9uQ29uZmlnKTtcbiAgICAgICAgdGhpcy5kYXRhQ2hhbm5lbCA9IHRoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlRGF0YUNoYW5uZWwodXVpZCk7XG5cbiAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiZGF0YWNoYW5uZWxcIiwgZXZlbnQgPT4ge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInNldHVwUGVlcmNvbm5lY3Rpb24gZXZlbnQ6XCIsIGV2ZW50KTtcblxuICAgICAgICAgICAgZXZlbnQuY2hhbm5lbC5vbm1lc3NhZ2UgPSAoYXN5bmMgZXZlbnRNZXNzYWdlID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YTogYW55O1xuXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJldmVudE1lc3NhZ2U6XCIsIGV2ZW50TWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBhY2NlcHRpbmcgb25seSBKU09OIG1lc3NhZ2VzXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnRNZXNzYWdlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAvLyBCeSBkZWZhdWx0IHRoaXMgY2xhc3Mgd2lsbCBvbmx5IGhhbmRsZSB0aGUgZGlzY29ubmVjdCBldmVudC4gQ2xvc2UgdGhlIHdlYnNvY2tldCBvbiB0aGlzIHNpZGUuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkaXNjb25uZWN0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJwZWVyQ29ubmVjdGlvbiBkaXNjb25uZWN0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZWRBY3Rpb25zJC5uZXh0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJwZWVyQ29ubmVjdGlvbiBFUlJPUjogSW52YWxpZCBKU09OXCIpO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBldmVudC5jaGFubmVsLm9ub3BlbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIlNlbmRpbmcgcDJwIGNvbm5lY3RlZCFcIik7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlZEFjdGlvbnMkLm5leHQoeyBhY3Rpb246IFwicDJwQ29ubmVjdGVkXCIsIHAycENvbm5lY3RlZDogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInAycCBjb25uZWN0ZWQgc28gY2xvc2UgdGhlIHdlYnNvY2tldCBjb25uZWN0aW9uXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMud3NDbGllbnQuY2xvc2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcihcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLCBldmVudCA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImV2ZW50OlwiLCBldmVudCk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRoaXMucGVlckNvbm5lY3Rpb24uaWNlQ29ubmVjdGlvblN0YXRlOlwiLCB0aGlzLnBlZXJDb25uZWN0aW9uLmljZUNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICBpZiAodGhpcy5wZWVyQ29ubmVjdGlvbi5pY2VDb25uZWN0aW9uU3RhdGUgPT09IFwiZGlzY29ubmVjdGVkXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlY2VpdmVkQWN0aW9ucyQubmV4dCh7IGFjdGlvbjogXCJwMnBDb25uZWN0ZWRcIiwgcDJwQ29ubmVjdGVkOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy53c0NsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJsZWF2ZVwiIH0pKTtcbiAgICAgICAgICAgICAgICB0aGlzLndzQ2xpZW50LmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcihcImljZWNhbmRpZGF0ZVwiLCBhc3luYyBldmVudCA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCIqKioqKioqKioqKioqKioqIFJlY2VpdmVkIGNhbmRpZGF0ZSBvdmVyIHBlZXIsIHNlbmRpbmcgdG8gc2lnbmFsbGVyXCIpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQ2FuZGlkYXRlXCIsIGV2ZW50LmNhbmRpZGF0ZSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gbmV3IFJUQ0ljZUNhbmRpZGF0ZShldmVudC5jYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBlZXJDb25uZWN0aW9uLmFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJvb29wc1wiLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy53c0NsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJjYW5kaWRhdGVcIiwgY2FuZGlkYXRlOiBldmVudC5jYW5kaWRhdGUgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCB3aWxsIHNldHVwIHRoZSBwZWVyY29ubmVjdGlvbiBhbmQgZGF0YWNoYW5uZWxcbiAgICAgKiBJdCB3aWxsIGFsc28gZW1pdCByZWNlaXZlZCBhY3Rpb25zIG92ZXIgYW4gb2JzZXJ2YWJsZVxuICAgICAqIEBwYXJhbSB1dWlkIFRoZSBVVUlEIHRvIGNvbm5lY3QgdG9cbiAgICAgKi9cbiAgICBhc3luYyBzZXR1cENsaWVudFBlZXJjb25uZWN0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInNldHVwQ2xpZW50UGVlcmNvbm5lY3Rpb25cIik7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGhpcy53ZWJSdGNDb25uZWN0aW9uQ29uZmlnOlwiLCB0aGlzLndlYlJ0Y0Nvbm5lY3Rpb25Db25maWcpO1xuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKHRoaXMud2ViUnRjQ29ubmVjdGlvbkNvbmZpZyk7XG4gICAgICAgIC8vIHRoaXMuZGF0YUNoYW5uZWwgPSB0aGlzLnBlZXJDb25uZWN0aW9uLmNyZWF0ZURhdGFDaGFubmVsKHV1aWQpO1xuXG4gICAgICAgIHRoaXMucGVlckNvbm5lY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcihcImRhdGFjaGFubmVsXCIsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiQ2xpZW50IHBlZXJjb25uZWN0aW9uIHJlY2VpdmVkIGV2ZW50OiBcIiwgZXZlbnQpO1xuICAgICAgICAgICAgZXZlbnQuY2hhbm5lbC5vbm1lc3NhZ2UgPSAoYXN5bmMgZXZlbnRNZXNzYWdlID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YTogYW55O1xuXG4gICAgICAgICAgICAgICAgLy8gYWNjZXB0aW5nIG9ubHkgSlNPTiBtZXNzYWdlc1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50TWVzc2FnZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQnkgZGVmYXVsdCB0aGlzIGNsYXNzIHdpbGwgb25seSBoYW5kbGUgdGhlIGRpc2Nvbm5lY3QgZXZlbnQuIENsb3NlIHRoZSB3ZWJzb2NrZXQgb24gdGhpcyBzaWRlLlxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGlzY29ubmVjdFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwicGVlckNvbm5lY3Rpb24gZGlzY29ubmVjdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY2VpdmVkQWN0aW9ucyQubmV4dChkYXRhKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwicGVlckNvbm5lY3Rpb24gRVJST1I6IEludmFsaWQgSlNPTlwiKTtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXZlbnQuY2hhbm5lbC5vbm9wZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJTZW5kaW5nIHAycCBjb25uZWN0ZWQhXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVjZWl2ZWRBY3Rpb25zJC5uZXh0KHsgYWN0aW9uOiBcInAycENvbm5lY3RlZFwiLCBwMnBDb25uZWN0ZWQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJwMnAgY29ubmVjdGVkIHNvIGNsb3NlIHRoZSB3ZWJzb2NrZXQgY29ubmVjdGlvblwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLndzQ2xpZW50LmNsb3NlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIiwgZXZlbnQgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJldmVudDpcIiwgZXZlbnQpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0aGlzLnBlZXJDb25uZWN0aW9uLmljZUNvbm5lY3Rpb25TdGF0ZTpcIiwgdGhpcy5wZWVyQ29ubmVjdGlvbi5pY2VDb25uZWN0aW9uU3RhdGUpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGVlckNvbm5lY3Rpb24uaWNlQ29ubmVjdGlvblN0YXRlID09PSBcImRpc2Nvbm5lY3RlZFwiKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNlaXZlZEFjdGlvbnMkLm5leHQoeyBhY3Rpb246IFwicDJwQ29ubmVjdGVkXCIsIHAycENvbm5lY3RlZDogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMud3NDbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6IFwibGVhdmVcIiB9KSk7XG4gICAgICAgICAgICAgICAgdGhpcy53c0NsaWVudC5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnBlZXJDb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJpY2VjYW5kaWRhdGVcIiwgYXN5bmMgZXZlbnQgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiKioqKioqKioqKioqKioqKiBSZWNlaXZlZCBjYW5kaWRhdGUgb3ZlciBwZWVyLCBzZW5kaW5nIHRvIHNpZ25hbGxlclwiKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkNhbmRpZGF0ZVwiLCBldmVudC5jYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IG5ldyBSVENJY2VDYW5kaWRhdGUoZXZlbnQuY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRJY2VDYW5kaWRhdGUoY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwib29vcHNcIiwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMud3NDbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6IFwiY2FuZGlkYXRlXCIsIGNhbmRpZGF0ZTogZXZlbnQuY2FuZGlkYXRlIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicnhqc1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ1dWlkXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIndlYjNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwid2Vic29ja2V0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIndydGNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwid3NcIik7IiwiY29uc3QgX19XRUJQQUNLX05BTUVTUEFDRV9PQkpFQ1RfXyA9IHJlcXVpcmUoXCJ0c2xpYlwiKTsiLCJleHBvcnQgdmFyIGlzQXJyYXlMaWtlID0gKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHggIT09ICdmdW5jdGlvbic7IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNBcnJheUxpa2UuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNGdW5jdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSBcIi4vaXNGdW5jdGlvblwiO1xuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvbWlzZSh2YWx1ZSkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWx1ZS50aGVuKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUHJvbWlzZS5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlRXJyb3JDbGFzcyhjcmVhdGVJbXBsKSB7XG4gICAgdmFyIF9zdXBlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICBFcnJvci5jYWxsKGluc3RhbmNlKTtcbiAgICAgICAgaW5zdGFuY2Uuc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjaztcbiAgICB9O1xuICAgIHZhciBjdG9yRnVuYyA9IGNyZWF0ZUltcGwoX3N1cGVyKTtcbiAgICBjdG9yRnVuYy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gICAgY3RvckZ1bmMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvckZ1bmM7XG4gICAgcmV0dXJuIGN0b3JGdW5jO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3JlYXRlRXJyb3JDbGFzcy5qcy5tYXAiLCJpbXBvcnQgeyBjcmVhdGVFcnJvckNsYXNzIH0gZnJvbSAnLi9jcmVhdGVFcnJvckNsYXNzJztcbmV4cG9ydCB2YXIgVW5zdWJzY3JpcHRpb25FcnJvciA9IGNyZWF0ZUVycm9yQ2xhc3MoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbChlcnJvcnMpIHtcbiAgICAgICAgX3N1cGVyKHRoaXMpO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvcnNcbiAgICAgICAgICAgID8gZXJyb3JzLmxlbmd0aCArIFwiIGVycm9ycyBvY2N1cnJlZCBkdXJpbmcgdW5zdWJzY3JpcHRpb246XFxuXCIgKyBlcnJvcnMubWFwKGZ1bmN0aW9uIChlcnIsIGkpIHsgcmV0dXJuIGkgKyAxICsgXCIpIFwiICsgZXJyLnRvU3RyaW5nKCk7IH0pLmpvaW4oJ1xcbiAgJylcbiAgICAgICAgICAgIDogJyc7XG4gICAgICAgIHRoaXMubmFtZSA9ICdVbnN1YnNjcmlwdGlvbkVycm9yJztcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgfTtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5zdWJzY3JpcHRpb25FcnJvci5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYXJyUmVtb3ZlKGFyciwgaXRlbSkge1xuICAgIGlmIChhcnIpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG4gICAgICAgIDAgPD0gaW5kZXggJiYgYXJyLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyUmVtb3ZlLmpzLm1hcCIsImltcG9ydCB7IF9fcmVhZCwgX19zcHJlYWRBcnJheSwgX192YWx1ZXMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBVbnN1YnNjcmlwdGlvbkVycm9yIH0gZnJvbSAnLi91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3InO1xuaW1wb3J0IHsgYXJyUmVtb3ZlIH0gZnJvbSAnLi91dGlsL2FyclJlbW92ZSc7XG52YXIgU3Vic2NyaXB0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb24oaW5pdGlhbFRlYXJkb3duKSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbFRlYXJkb3duID0gaW5pdGlhbFRlYXJkb3duO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnRhZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLl90ZWFyZG93bnMgPSBudWxsO1xuICAgIH1cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjtcbiAgICAgICAgdmFyIGVycm9ycztcbiAgICAgICAgaWYgKCF0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRhZ2UgPSB0aGlzLl9wYXJlbnRhZ2U7XG4gICAgICAgICAgICBpZiAoX3BhcmVudGFnZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudGFnZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoX3BhcmVudGFnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9wYXJlbnRhZ2VfMSA9IF9fdmFsdWVzKF9wYXJlbnRhZ2UpLCBfcGFyZW50YWdlXzFfMSA9IF9wYXJlbnRhZ2VfMS5uZXh0KCk7ICFfcGFyZW50YWdlXzFfMS5kb25lOyBfcGFyZW50YWdlXzFfMSA9IF9wYXJlbnRhZ2VfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzEgPSBfcGFyZW50YWdlXzFfMS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRfMS5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfcGFyZW50YWdlXzFfMSAmJiAhX3BhcmVudGFnZV8xXzEuZG9uZSAmJiAoX2EgPSBfcGFyZW50YWdlXzEucmV0dXJuKSkgX2EuY2FsbChfcGFyZW50YWdlXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfcGFyZW50YWdlLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW5pdGlhbFRlYXJkb3duID0gdGhpcy5pbml0aWFsVGVhcmRvd247XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihpbml0aWFsVGVhcmRvd24pKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFRlYXJkb3duKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yID8gZS5lcnJvcnMgOiBbZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIF90ZWFyZG93bnMgPSB0aGlzLl90ZWFyZG93bnM7XG4gICAgICAgICAgICBpZiAoX3RlYXJkb3ducykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RlYXJkb3ducyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX3RlYXJkb3duc18xID0gX192YWx1ZXMoX3RlYXJkb3ducyksIF90ZWFyZG93bnNfMV8xID0gX3RlYXJkb3duc18xLm5leHQoKTsgIV90ZWFyZG93bnNfMV8xLmRvbmU7IF90ZWFyZG93bnNfMV8xID0gX3RlYXJkb3duc18xLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlYXJkb3duXzEgPSBfdGVhcmRvd25zXzFfMS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY1RlYXJkb3duKHRlYXJkb3duXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyAhPT0gbnVsbCAmJiBlcnJvcnMgIT09IHZvaWQgMCA/IGVycm9ycyA6IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgX19yZWFkKGVycm9ycykpLCBfX3JlYWQoZXJyLmVycm9ycykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVfMl8xKSB7IGVfMiA9IHsgZXJyb3I6IGVfMl8xIH07IH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGVhcmRvd25zXzFfMSAmJiAhX3RlYXJkb3duc18xXzEuZG9uZSAmJiAoX2IgPSBfdGVhcmRvd25zXzEucmV0dXJuKSkgX2IuY2FsbChfdGVhcmRvd25zXzEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXJyb3JzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vic2NyaXB0aW9uRXJyb3IoZXJyb3JzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVhcmRvd24pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGVhcmRvd24gJiYgdGVhcmRvd24gIT09IHRoaXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIGV4ZWNUZWFyZG93bih0ZWFyZG93bik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGVhcmRvd24gaW5zdGFuY2VvZiBTdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRlYXJkb3duLmNsb3NlZCB8fCB0ZWFyZG93bi5faGFzUGFyZW50KHRoaXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGVhcmRvd24uX2FkZFBhcmVudCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKHRoaXMuX3RlYXJkb3ducyA9IChfYSA9IHRoaXMuX3RlYXJkb3ducykgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW10pLnB1c2godGVhcmRvd24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9oYXNQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHZhciBfcGFyZW50YWdlID0gdGhpcy5fcGFyZW50YWdlO1xuICAgICAgICByZXR1cm4gX3BhcmVudGFnZSA9PT0gcGFyZW50IHx8IChBcnJheS5pc0FycmF5KF9wYXJlbnRhZ2UpICYmIF9wYXJlbnRhZ2UuaW5jbHVkZXMocGFyZW50KSk7XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9hZGRQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHZhciBfcGFyZW50YWdlID0gdGhpcy5fcGFyZW50YWdlO1xuICAgICAgICB0aGlzLl9wYXJlbnRhZ2UgPSBBcnJheS5pc0FycmF5KF9wYXJlbnRhZ2UpID8gKF9wYXJlbnRhZ2UucHVzaChwYXJlbnQpLCBfcGFyZW50YWdlKSA6IF9wYXJlbnRhZ2UgPyBbX3BhcmVudGFnZSwgcGFyZW50XSA6IHBhcmVudDtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX3JlbW92ZVBhcmVudCA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgdmFyIF9wYXJlbnRhZ2UgPSB0aGlzLl9wYXJlbnRhZ2U7XG4gICAgICAgIGlmIChfcGFyZW50YWdlID09PSBwYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudGFnZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShfcGFyZW50YWdlKSkge1xuICAgICAgICAgICAgYXJyUmVtb3ZlKF9wYXJlbnRhZ2UsIHBhcmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHRlYXJkb3duKSB7XG4gICAgICAgIHZhciBfdGVhcmRvd25zID0gdGhpcy5fdGVhcmRvd25zO1xuICAgICAgICBfdGVhcmRvd25zICYmIGFyclJlbW92ZShfdGVhcmRvd25zLCB0ZWFyZG93bik7XG4gICAgICAgIGlmICh0ZWFyZG93biBpbnN0YW5jZW9mIFN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgdGVhcmRvd24uX3JlbW92ZVBhcmVudCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLkVNUFRZID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVtcHR5ID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICBlbXB0eS5jbG9zZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgfSkoKTtcbiAgICByZXR1cm4gU3Vic2NyaXB0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFN1YnNjcmlwdGlvbiB9O1xuZXhwb3J0IHZhciBFTVBUWV9TVUJTQ1JJUFRJT04gPSBTdWJzY3JpcHRpb24uRU1QVFk7XG5leHBvcnQgZnVuY3Rpb24gaXNTdWJzY3JpcHRpb24odmFsdWUpIHtcbiAgICByZXR1cm4gKHZhbHVlIGluc3RhbmNlb2YgU3Vic2NyaXB0aW9uIHx8XG4gICAgICAgICh2YWx1ZSAmJiAnY2xvc2VkJyBpbiB2YWx1ZSAmJiBpc0Z1bmN0aW9uKHZhbHVlLnJlbW92ZSkgJiYgaXNGdW5jdGlvbih2YWx1ZS5hZGQpICYmIGlzRnVuY3Rpb24odmFsdWUudW5zdWJzY3JpYmUpKSk7XG59XG5mdW5jdGlvbiBleGVjVGVhcmRvd24odGVhcmRvd24pIHtcbiAgICBpZiAoaXNGdW5jdGlvbih0ZWFyZG93bikpIHtcbiAgICAgICAgdGVhcmRvd24oKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRlYXJkb3duLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaXB0aW9uLmpzLm1hcCIsImV4cG9ydCB2YXIgY29uZmlnID0ge1xuICAgIG9uVW5oYW5kbGVkRXJyb3I6IG51bGwsXG4gICAgb25TdG9wcGVkTm90aWZpY2F0aW9uOiBudWxsLFxuICAgIFByb21pc2U6IHVuZGVmaW5lZCxcbiAgICB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nOiBmYWxzZSxcbiAgICB1c2VEZXByZWNhdGVkTmV4dENvbnRleHQ6IGZhbHNlLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5qcy5tYXAiLCJpbXBvcnQgeyBfX3JlYWQsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmV4cG9ydCB2YXIgdGltZW91dFByb3ZpZGVyID0ge1xuICAgIHNldFRpbWVvdXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsZWdhdGUgPSB0aW1lb3V0UHJvdmlkZXIuZGVsZWdhdGU7XG4gICAgICAgIHJldHVybiAoKGRlbGVnYXRlID09PSBudWxsIHx8IGRlbGVnYXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZWxlZ2F0ZS5zZXRUaW1lb3V0KSB8fCBzZXRUaW1lb3V0KS5hcHBseSh2b2lkIDAsIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmdzKSkpO1xuICAgIH0sXG4gICAgY2xlYXJUaW1lb3V0OiBmdW5jdGlvbiAoaGFuZGxlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IHRpbWVvdXRQcm92aWRlci5kZWxlZ2F0ZTtcbiAgICAgICAgcmV0dXJuICgoZGVsZWdhdGUgPT09IG51bGwgfHwgZGVsZWdhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlbGVnYXRlLmNsZWFyVGltZW91dCkgfHwgY2xlYXJUaW1lb3V0KShoYW5kbGUpO1xuICAgIH0sXG4gICAgZGVsZWdhdGU6IHVuZGVmaW5lZCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aW1lb3V0UHJvdmlkZXIuanMubWFwIiwiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCB7IHRpbWVvdXRQcm92aWRlciB9IGZyb20gJy4uL3NjaGVkdWxlci90aW1lb3V0UHJvdmlkZXInO1xuZXhwb3J0IGZ1bmN0aW9uIHJlcG9ydFVuaGFuZGxlZEVycm9yKGVycikge1xuICAgIHRpbWVvdXRQcm92aWRlci5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9uVW5oYW5kbGVkRXJyb3IgPSBjb25maWcub25VbmhhbmRsZWRFcnJvcjtcbiAgICAgICAgaWYgKG9uVW5oYW5kbGVkRXJyb3IpIHtcbiAgICAgICAgICAgIG9uVW5oYW5kbGVkRXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVwb3J0VW5oYW5kbGVkRXJyb3IuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIG5vb3AoKSB7IH1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vb3AuanMubWFwIiwiZXhwb3J0IHZhciBDT01QTEVURV9OT1RJRklDQVRJT04gPSAoZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlTm90aWZpY2F0aW9uKCdDJywgdW5kZWZpbmVkLCB1bmRlZmluZWQpOyB9KSgpO1xuZXhwb3J0IGZ1bmN0aW9uIGVycm9yTm90aWZpY2F0aW9uKGVycm9yKSB7XG4gICAgcmV0dXJuIGNyZWF0ZU5vdGlmaWNhdGlvbignRScsIHVuZGVmaW5lZCwgZXJyb3IpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5leHROb3RpZmljYXRpb24odmFsdWUpIHtcbiAgICByZXR1cm4gY3JlYXRlTm90aWZpY2F0aW9uKCdOJywgdmFsdWUsIHVuZGVmaW5lZCk7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTm90aWZpY2F0aW9uKGtpbmQsIHZhbHVlLCBlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6IGtpbmQsXG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Ob3RpZmljYXRpb25GYWN0b3JpZXMuanMubWFwIiwiaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi4vY29uZmlnJztcbnZhciBjb250ZXh0ID0gbnVsbDtcbmV4cG9ydCBmdW5jdGlvbiBlcnJvckNvbnRleHQoY2IpIHtcbiAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgdmFyIGlzUm9vdCA9ICFjb250ZXh0O1xuICAgICAgICBpZiAoaXNSb290KSB7XG4gICAgICAgICAgICBjb250ZXh0ID0geyBlcnJvclRocm93bjogZmFsc2UsIGVycm9yOiBudWxsIH07XG4gICAgICAgIH1cbiAgICAgICAgY2IoKTtcbiAgICAgICAgaWYgKGlzUm9vdCkge1xuICAgICAgICAgICAgdmFyIF9hID0gY29udGV4dCwgZXJyb3JUaHJvd24gPSBfYS5lcnJvclRocm93biwgZXJyb3IgPSBfYS5lcnJvcjtcbiAgICAgICAgICAgIGNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNiKCk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNhcHR1cmVFcnJvcihlcnIpIHtcbiAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgJiYgY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LmVycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgY29udGV4dC5lcnJvciA9IGVycjtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvckNvbnRleHQuanMubWFwIiwiaW1wb3J0IHsgX19leHRlbmRzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgaXNTdWJzY3JpcHRpb24sIFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IHJlcG9ydFVuaGFuZGxlZEVycm9yIH0gZnJvbSAnLi91dGlsL3JlcG9ydFVuaGFuZGxlZEVycm9yJztcbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuL3V0aWwvbm9vcCc7XG5pbXBvcnQgeyBuZXh0Tm90aWZpY2F0aW9uLCBlcnJvck5vdGlmaWNhdGlvbiwgQ09NUExFVEVfTk9USUZJQ0FUSU9OIH0gZnJvbSAnLi9Ob3RpZmljYXRpb25GYWN0b3JpZXMnO1xuaW1wb3J0IHsgdGltZW91dFByb3ZpZGVyIH0gZnJvbSAnLi9zY2hlZHVsZXIvdGltZW91dFByb3ZpZGVyJztcbmltcG9ydCB7IGNhcHR1cmVFcnJvciB9IGZyb20gJy4vdXRpbC9lcnJvckNvbnRleHQnO1xudmFyIFN1YnNjcmliZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgICAgIGlmIChpc1N1YnNjcmlwdGlvbihkZXN0aW5hdGlvbikpIHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbi5hZGQoX3RoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBFTVBUWV9PQlNFUlZFUjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YnNjcmliZXIuY3JlYXRlID0gZnVuY3Rpb24gKG5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFNhZmVTdWJzY3JpYmVyKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgaGFuZGxlU3RvcHBlZE5vdGlmaWNhdGlvbihuZXh0Tm90aWZpY2F0aW9uKHZhbHVlKSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgaGFuZGxlU3RvcHBlZE5vdGlmaWNhdGlvbihlcnJvck5vdGlmaWNhdGlvbihlcnIpLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIGhhbmRsZVN0b3BwZWROb3RpZmljYXRpb24oQ09NUExFVEVfTk9USUZJQ0FUSU9OLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3Vic2NyaWJlcjtcbn0oU3Vic2NyaXB0aW9uKSk7XG5leHBvcnQgeyBTdWJzY3JpYmVyIH07XG52YXIgX2JpbmQgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZDtcbmZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gX2JpbmQuY2FsbChmbiwgdGhpc0FyZyk7XG59XG52YXIgQ29uc3VtZXJPYnNlcnZlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29uc3VtZXJPYnNlcnZlcihwYXJ0aWFsT2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5wYXJ0aWFsT2JzZXJ2ZXIgPSBwYXJ0aWFsT2JzZXJ2ZXI7XG4gICAgfVxuICAgIENvbnN1bWVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIHBhcnRpYWxPYnNlcnZlciA9IHRoaXMucGFydGlhbE9ic2VydmVyO1xuICAgICAgICBpZiAocGFydGlhbE9ic2VydmVyLm5leHQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGFydGlhbE9ic2VydmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlVW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDb25zdW1lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIHBhcnRpYWxPYnNlcnZlciA9IHRoaXMucGFydGlhbE9ic2VydmVyO1xuICAgICAgICBpZiAocGFydGlhbE9ic2VydmVyLmVycm9yKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHBhcnRpYWxPYnNlcnZlci5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlVW5oYW5kbGVkRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGFuZGxlVW5oYW5kbGVkRXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29uc3VtZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXJ0aWFsT2JzZXJ2ZXIgPSB0aGlzLnBhcnRpYWxPYnNlcnZlcjtcbiAgICAgICAgaWYgKHBhcnRpYWxPYnNlcnZlci5jb21wbGV0ZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwYXJ0aWFsT2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGhhbmRsZVVuaGFuZGxlZEVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIENvbnN1bWVyT2JzZXJ2ZXI7XG59KCkpO1xudmFyIFNhZmVTdWJzY3JpYmVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2FmZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FmZVN1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgcGFydGlhbE9ic2VydmVyO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihvYnNlcnZlck9yTmV4dCkgfHwgIW9ic2VydmVyT3JOZXh0KSB7XG4gICAgICAgICAgICBwYXJ0aWFsT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICAgICAgbmV4dDogb2JzZXJ2ZXJPck5leHQgIT09IG51bGwgJiYgb2JzZXJ2ZXJPck5leHQgIT09IHZvaWQgMCA/IG9ic2VydmVyT3JOZXh0IDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvciAhPT0gbnVsbCAmJiBlcnJvciAhPT0gdm9pZCAwID8gZXJyb3IgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGNvbXBsZXRlICE9PSBudWxsICYmIGNvbXBsZXRlICE9PSB2b2lkIDAgPyBjb21wbGV0ZSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgY29udGV4dF8xO1xuICAgICAgICAgICAgaWYgKF90aGlzICYmIGNvbmZpZy51c2VEZXByZWNhdGVkTmV4dENvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0XzEgPSBPYmplY3QuY3JlYXRlKG9ic2VydmVyT3JOZXh0KTtcbiAgICAgICAgICAgICAgICBjb250ZXh0XzEudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy51bnN1YnNjcmliZSgpOyB9O1xuICAgICAgICAgICAgICAgIHBhcnRpYWxPYnNlcnZlciA9IHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dDogb2JzZXJ2ZXJPck5leHQubmV4dCAmJiBiaW5kKG9ic2VydmVyT3JOZXh0Lm5leHQsIGNvbnRleHRfMSksXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBvYnNlcnZlck9yTmV4dC5lcnJvciAmJiBiaW5kKG9ic2VydmVyT3JOZXh0LmVycm9yLCBjb250ZXh0XzEpLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogb2JzZXJ2ZXJPck5leHQuY29tcGxldGUgJiYgYmluZChvYnNlcnZlck9yTmV4dC5jb21wbGV0ZSwgY29udGV4dF8xKSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFydGlhbE9ic2VydmVyID0gb2JzZXJ2ZXJPck5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBuZXcgQ29uc3VtZXJPYnNlcnZlcihwYXJ0aWFsT2JzZXJ2ZXIpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBTYWZlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgU2FmZVN1YnNjcmliZXIgfTtcbmZ1bmN0aW9uIGhhbmRsZVVuaGFuZGxlZEVycm9yKGVycm9yKSB7XG4gICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgIGNhcHR1cmVFcnJvcihlcnJvcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXBvcnRVbmhhbmRsZWRFcnJvcihlcnJvcik7XG4gICAgfVxufVxuZnVuY3Rpb24gZGVmYXVsdEVycm9ySGFuZGxlcihlcnIpIHtcbiAgICB0aHJvdyBlcnI7XG59XG5mdW5jdGlvbiBoYW5kbGVTdG9wcGVkTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbiwgc3Vic2NyaWJlcikge1xuICAgIHZhciBvblN0b3BwZWROb3RpZmljYXRpb24gPSBjb25maWcub25TdG9wcGVkTm90aWZpY2F0aW9uO1xuICAgIG9uU3RvcHBlZE5vdGlmaWNhdGlvbiAmJiB0aW1lb3V0UHJvdmlkZXIuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBvblN0b3BwZWROb3RpZmljYXRpb24obm90aWZpY2F0aW9uLCBzdWJzY3JpYmVyKTsgfSk7XG59XG5leHBvcnQgdmFyIEVNUFRZX09CU0VSVkVSID0ge1xuICAgIGNsb3NlZDogdHJ1ZSxcbiAgICBuZXh0OiBub29wLFxuICAgIGVycm9yOiBkZWZhdWx0RXJyb3JIYW5kbGVyLFxuICAgIGNvbXBsZXRlOiBub29wLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmliZXIuanMubWFwIiwiZXhwb3J0IHZhciBvYnNlcnZhYmxlID0gKGZ1bmN0aW9uICgpIHsgcmV0dXJuICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5vYnNlcnZhYmxlKSB8fCAnQEBvYnNlcnZhYmxlJzsgfSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmFibGUuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5KHgpIHtcbiAgICByZXR1cm4geDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlkZW50aXR5LmpzLm1hcCIsImltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnLi9pZGVudGl0eSc7XG5leHBvcnQgZnVuY3Rpb24gcGlwZSgpIHtcbiAgICB2YXIgZm5zID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgZm5zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBwaXBlRnJvbUFycmF5KGZucyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGlwZUZyb21BcnJheShmbnMpIHtcbiAgICBpZiAoZm5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gaWRlbnRpdHk7XG4gICAgfVxuICAgIGlmIChmbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBmbnNbMF07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiBwaXBlZChpbnB1dCkge1xuICAgICAgICByZXR1cm4gZm5zLnJlZHVjZShmdW5jdGlvbiAocHJldiwgZm4pIHsgcmV0dXJuIGZuKHByZXYpOyB9LCBpbnB1dCk7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcGUuanMubWFwIiwiaW1wb3J0IHsgU2FmZVN1YnNjcmliZXIsIFN1YnNjcmliZXIgfSBmcm9tICcuL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgaXNTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi9zeW1ib2wvb2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBwaXBlRnJvbUFycmF5IH0gZnJvbSAnLi91dGlsL3BpcGUnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IGVycm9yQ29udGV4dCB9IGZyb20gJy4vdXRpbC9lcnJvckNvbnRleHQnO1xudmFyIE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgIGlmIChzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICBvYnNlcnZhYmxlLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBpc1N1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQpID8gb2JzZXJ2ZXJPck5leHQgOiBuZXcgU2FmZVN1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIGVycm9yQ29udGV4dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2EgPSBfdGhpcywgb3BlcmF0b3IgPSBfYS5vcGVyYXRvciwgc291cmNlID0gX2Euc291cmNlO1xuICAgICAgICAgICAgc3Vic2NyaWJlci5hZGQob3BlcmF0b3JcbiAgICAgICAgICAgICAgICA/XG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yLmNhbGwoc3Vic2NyaWJlciwgc291cmNlKVxuICAgICAgICAgICAgICAgIDogc291cmNlXG4gICAgICAgICAgICAgICAgICAgID9cbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9zdWJzY3JpYmUoc3Vic2NyaWJlcilcbiAgICAgICAgICAgICAgICAgICAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3RyeVN1YnNjcmliZShzdWJzY3JpYmVyKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc2luaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShzaW5rKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBzaW5rLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAobmV4dCwgcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG4gICAgICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBuZXcgU2FmZVN1YnNjcmliZXIoe1xuICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiByZWplY3QsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IHJlc29sdmUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gKF9hID0gdGhpcy5zb3VyY2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZVtTeW1ib2xfb2JzZXJ2YWJsZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9wZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZUZyb21BcnJheShvcGVyYXRpb25zKSh0aGlzKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICh2YWx1ZSA9IHgpOyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiByZWplY3QoZXJyKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZSh2YWx1ZSk7IH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlKTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZhYmxlO1xufSgpKTtcbmV4cG9ydCB7IE9ic2VydmFibGUgfTtcbmZ1bmN0aW9uIGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiAoX2EgPSBwcm9taXNlQ3RvciAhPT0gbnVsbCAmJiBwcm9taXNlQ3RvciAhPT0gdm9pZCAwID8gcHJvbWlzZUN0b3IgOiBjb25maWcuUHJvbWlzZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogUHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGlzT2JzZXJ2ZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgaXNGdW5jdGlvbih2YWx1ZS5uZXh0KSAmJiBpc0Z1bmN0aW9uKHZhbHVlLmVycm9yKSAmJiBpc0Z1bmN0aW9uKHZhbHVlLmNvbXBsZXRlKTtcbn1cbmZ1bmN0aW9uIGlzU3Vic2NyaWJlcih2YWx1ZSkge1xuICAgIHJldHVybiAodmFsdWUgJiYgdmFsdWUgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB8fCAoaXNPYnNlcnZlcih2YWx1ZSkgJiYgaXNTdWJzY3JpcHRpb24odmFsdWUpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwIiwiaW1wb3J0IHsgb2JzZXJ2YWJsZSBhcyBTeW1ib2xfb2JzZXJ2YWJsZSB9IGZyb20gJy4uL3N5bWJvbC9vYnNlcnZhYmxlJztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL2lzRnVuY3Rpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGlzSW50ZXJvcE9ic2VydmFibGUoaW5wdXQpIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihpbnB1dFtTeW1ib2xfb2JzZXJ2YWJsZV0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNJbnRlcm9wT2JzZXJ2YWJsZS5qcy5tYXAiLCJpbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi9pc0Z1bmN0aW9uJztcbmV4cG9ydCBmdW5jdGlvbiBpc0FzeW5jSXRlcmFibGUob2JqKSB7XG4gICAgcmV0dXJuIFN5bWJvbC5hc3luY0l0ZXJhdG9yICYmIGlzRnVuY3Rpb24ob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogb2JqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0FzeW5jSXRlcmFibGUuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUludmFsaWRPYnNlcnZhYmxlVHlwZUVycm9yKGlucHV0KSB7XG4gICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgcHJvdmlkZWQgXCIgKyAoaW5wdXQgIT09IG51bGwgJiYgdHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyA/ICdhbiBpbnZhbGlkIG9iamVjdCcgOiBcIidcIiArIGlucHV0ICsgXCInXCIpICsgXCIgd2hlcmUgYSBzdHJlYW0gd2FzIGV4cGVjdGVkLiBZb3UgY2FuIHByb3ZpZGUgYW4gT2JzZXJ2YWJsZSwgUHJvbWlzZSwgUmVhZGFibGVTdHJlYW0sIEFycmF5LCBBc3luY0l0ZXJhYmxlLCBvciBJdGVyYWJsZS5cIik7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aHJvd1Vub2JzZXJ2YWJsZUVycm9yLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBnZXRTeW1ib2xJdGVyYXRvcigpIHtcbiAgICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ2Z1bmN0aW9uJyB8fCAhU3ltYm9sLml0ZXJhdG9yKSB7XG4gICAgICAgIHJldHVybiAnQEBpdGVyYXRvcic7XG4gICAgfVxuICAgIHJldHVybiBTeW1ib2wuaXRlcmF0b3I7XG59XG5leHBvcnQgdmFyIGl0ZXJhdG9yID0gZ2V0U3ltYm9sSXRlcmF0b3IoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWl0ZXJhdG9yLmpzLm1hcCIsImltcG9ydCB7IGl0ZXJhdG9yIGFzIFN5bWJvbF9pdGVyYXRvciB9IGZyb20gJy4uL3N5bWJvbC9pdGVyYXRvcic7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi9pc0Z1bmN0aW9uJztcbmV4cG9ydCBmdW5jdGlvbiBpc0l0ZXJhYmxlKGlucHV0KSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0W1N5bWJvbF9pdGVyYXRvcl0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNJdGVyYWJsZS5qcy5tYXAiLCJpbXBvcnQgeyBfX2FzeW5jR2VuZXJhdG9yLCBfX2F3YWl0LCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vaXNGdW5jdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gcmVhZGFibGVTdHJlYW1MaWtlVG9Bc3luY0dlbmVyYXRvcihyZWFkYWJsZVN0cmVhbSkge1xuICAgIHJldHVybiBfX2FzeW5jR2VuZXJhdG9yKHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24gcmVhZGFibGVTdHJlYW1MaWtlVG9Bc3luY0dlbmVyYXRvcl8xKCkge1xuICAgICAgICB2YXIgcmVhZGVyLCBfYSwgdmFsdWUsIGRvbmU7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IHJlYWRhYmxlU3RyZWFtLmdldFJlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBfYi50cnlzLnB1c2goWzEsICwgOSwgMTBdKTtcbiAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cnVlKSByZXR1cm4gWzMsIDhdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIF9fYXdhaXQocmVhZGVyLnJlYWQoKSldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCksIHZhbHVlID0gX2EudmFsdWUsIGRvbmUgPSBfYS5kb25lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRvbmUpIHJldHVybiBbMywgNV07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgX19hd2FpdCh2b2lkIDApXTtcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiwgX2Iuc2VudCgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IHJldHVybiBbNCwgX19hd2FpdCh2YWx1ZSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFs0LCBfYi5zZW50KCldO1xuICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMsIDJdO1xuICAgICAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIFszLCAxMF07XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs3XTtcbiAgICAgICAgICAgICAgICBjYXNlIDEwOiByZXR1cm4gWzJdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1JlYWRhYmxlU3RyZWFtTGlrZShvYmopIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmouZ2V0UmVhZGVyKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzUmVhZGFibGVTdHJlYW1MaWtlLmpzLm1hcCIsImltcG9ydCB7IF9fYXN5bmNWYWx1ZXMsIF9fYXdhaXRlciwgX19nZW5lcmF0b3IsIF9fdmFsdWVzIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc0FycmF5TGlrZSB9IGZyb20gJy4uL3V0aWwvaXNBcnJheUxpa2UnO1xuaW1wb3J0IHsgaXNQcm9taXNlIH0gZnJvbSAnLi4vdXRpbC9pc1Byb21pc2UnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uL09ic2VydmFibGUnO1xuaW1wb3J0IHsgaXNJbnRlcm9wT2JzZXJ2YWJsZSB9IGZyb20gJy4uL3V0aWwvaXNJbnRlcm9wT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBpc0FzeW5jSXRlcmFibGUgfSBmcm9tICcuLi91dGlsL2lzQXN5bmNJdGVyYWJsZSc7XG5pbXBvcnQgeyBjcmVhdGVJbnZhbGlkT2JzZXJ2YWJsZVR5cGVFcnJvciB9IGZyb20gJy4uL3V0aWwvdGhyb3dVbm9ic2VydmFibGVFcnJvcic7XG5pbXBvcnQgeyBpc0l0ZXJhYmxlIH0gZnJvbSAnLi4vdXRpbC9pc0l0ZXJhYmxlJztcbmltcG9ydCB7IGlzUmVhZGFibGVTdHJlYW1MaWtlLCByZWFkYWJsZVN0cmVhbUxpa2VUb0FzeW5jR2VuZXJhdG9yIH0gZnJvbSAnLi4vdXRpbC9pc1JlYWRhYmxlU3RyZWFtTGlrZSc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IHJlcG9ydFVuaGFuZGxlZEVycm9yIH0gZnJvbSAnLi4vdXRpbC9yZXBvcnRVbmhhbmRsZWRFcnJvcic7XG5pbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi4vc3ltYm9sL29ic2VydmFibGUnO1xuZXhwb3J0IGZ1bmN0aW9uIGlubmVyRnJvbShpbnB1dCkge1xuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIE9ic2VydmFibGUpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbiAgICBpZiAoaW5wdXQgIT0gbnVsbCkge1xuICAgICAgICBpZiAoaXNJbnRlcm9wT2JzZXJ2YWJsZShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmcm9tSW50ZXJvcE9ic2VydmFibGUoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5TGlrZShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcm9taXNlKGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZyb21Qcm9taXNlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBc3luY0l0ZXJhYmxlKGlucHV0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZyb21Bc3luY0l0ZXJhYmxlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNJdGVyYWJsZShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmcm9tSXRlcmFibGUoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlYWRhYmxlU3RyZWFtTGlrZShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmcm9tUmVhZGFibGVTdHJlYW1MaWtlKGlucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBjcmVhdGVJbnZhbGlkT2JzZXJ2YWJsZVR5cGVFcnJvcihpbnB1dCk7XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbUludGVyb3BPYnNlcnZhYmxlKG9iaikge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgb2JzID0gb2JqW1N5bWJvbF9vYnNlcnZhYmxlXSgpO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihvYnMuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG9icy5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignUHJvdmlkZWQgb2JqZWN0IGRvZXMgbm90IGNvcnJlY3RseSBpbXBsZW1lbnQgU3ltYm9sLm9ic2VydmFibGUnKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQXJyYXlMaWtlKGFycmF5KSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoICYmICFzdWJzY3JpYmVyLmNsb3NlZDsgaSsrKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQoYXJyYXlbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUHJvbWlzZShwcm9taXNlKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHByb21pc2VcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCFzdWJzY3JpYmVyLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiBzdWJzY3JpYmVyLmVycm9yKGVycik7IH0pXG4gICAgICAgICAgICAudGhlbihudWxsLCByZXBvcnRVbmhhbmRsZWRFcnJvcik7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZnJvbUl0ZXJhYmxlKGl0ZXJhYmxlKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBlXzEsIF9hO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlcmFibGVfMSA9IF9fdmFsdWVzKGl0ZXJhYmxlKSwgaXRlcmFibGVfMV8xID0gaXRlcmFibGVfMS5uZXh0KCk7ICFpdGVyYWJsZV8xXzEuZG9uZTsgaXRlcmFibGVfMV8xID0gaXRlcmFibGVfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpdGVyYWJsZV8xXzEudmFsdWU7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaWJlci5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZXJhYmxlXzFfMSAmJiAhaXRlcmFibGVfMV8xLmRvbmUgJiYgKF9hID0gaXRlcmFibGVfMS5yZXR1cm4pKSBfYS5jYWxsKGl0ZXJhYmxlXzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQXN5bmNJdGVyYWJsZShhc3luY0l0ZXJhYmxlKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHByb2Nlc3MoYXN5bmNJdGVyYWJsZSwgc3Vic2NyaWJlcikuY2F0Y2goZnVuY3Rpb24gKGVycikgeyByZXR1cm4gc3Vic2NyaWJlci5lcnJvcihlcnIpOyB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUmVhZGFibGVTdHJlYW1MaWtlKHJlYWRhYmxlU3RyZWFtKSB7XG4gICAgcmV0dXJuIGZyb21Bc3luY0l0ZXJhYmxlKHJlYWRhYmxlU3RyZWFtTGlrZVRvQXN5bmNHZW5lcmF0b3IocmVhZGFibGVTdHJlYW0pKTtcbn1cbmZ1bmN0aW9uIHByb2Nlc3MoYXN5bmNJdGVyYWJsZSwgc3Vic2NyaWJlcikge1xuICAgIHZhciBhc3luY0l0ZXJhYmxlXzEsIGFzeW5jSXRlcmFibGVfMV8xO1xuICAgIHZhciBlXzIsIF9hO1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlLCBlXzJfMTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2IudHJ5cy5wdXNoKFswLCA1LCA2LCAxMV0pO1xuICAgICAgICAgICAgICAgICAgICBhc3luY0l0ZXJhYmxlXzEgPSBfX2FzeW5jVmFsdWVzKGFzeW5jSXRlcmFibGUpO1xuICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzQsIGFzeW5jSXRlcmFibGVfMS5uZXh0KCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoYXN5bmNJdGVyYWJsZV8xXzEgPSBfYi5zZW50KCksICFhc3luY0l0ZXJhYmxlXzFfMS5kb25lKSkgcmV0dXJuIFszLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhc3luY0l0ZXJhYmxlXzFfMS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmliZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzJdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gMztcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMywgMV07XG4gICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzMsIDExXTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIGVfMl8xID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICBlXzIgPSB7IGVycm9yOiBlXzJfMSB9O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMsIDExXTtcbiAgICAgICAgICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICAgICAgICAgIF9iLnRyeXMucHVzaChbNiwgLCA5LCAxMF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShhc3luY0l0ZXJhYmxlXzFfMSAmJiAhYXN5bmNJdGVyYWJsZV8xXzEuZG9uZSAmJiAoX2EgPSBhc3luY0l0ZXJhYmxlXzEucmV0dXJuKSkpIHJldHVybiBbMywgOF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCwgX2EuY2FsbChhc3luY0l0ZXJhYmxlXzEpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA4O1xuICAgICAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIFszLCAxMF07XG4gICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbN107XG4gICAgICAgICAgICAgICAgY2FzZSAxMDogcmV0dXJuIFs3XTtcbiAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5uZXJGcm9tLmpzLm1hcCIsImltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL2lzRnVuY3Rpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0xpZnQoc291cmNlKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oc291cmNlID09PSBudWxsIHx8IHNvdXJjZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc291cmNlLmxpZnQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG9wZXJhdGUoaW5pdCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIGlmIChoYXNMaWZ0KHNvdXJjZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2UubGlmdChmdW5jdGlvbiAobGlmdGVkU291cmNlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGluaXQobGlmdGVkU291cmNlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5hYmxlIHRvIGxpZnQgdW5rbm93biBPYnNlcnZhYmxlIHR5cGUnKTtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGlmdC5qcy5tYXAiLCJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIoZGVzdGluYXRpb24sIG9uTmV4dCwgb25Db21wbGV0ZSwgb25FcnJvciwgb25GaW5hbGl6ZSkge1xuICAgIHJldHVybiBuZXcgT3BlcmF0b3JTdWJzY3JpYmVyKGRlc3RpbmF0aW9uLCBvbk5leHQsIG9uQ29tcGxldGUsIG9uRXJyb3IsIG9uRmluYWxpemUpO1xufVxudmFyIE9wZXJhdG9yU3Vic2NyaWJlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9wZXJhdG9yU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPcGVyYXRvclN1YnNjcmliZXIoZGVzdGluYXRpb24sIG9uTmV4dCwgb25Db21wbGV0ZSwgb25FcnJvciwgb25GaW5hbGl6ZSwgc2hvdWxkVW5zdWJzY3JpYmUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9uRmluYWxpemUgPSBvbkZpbmFsaXplO1xuICAgICAgICBfdGhpcy5zaG91bGRVbnN1YnNjcmliZSA9IHNob3VsZFVuc3Vic2NyaWJlO1xuICAgICAgICBfdGhpcy5fbmV4dCA9IG9uTmV4dFxuICAgICAgICAgICAgPyBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvbk5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBfc3VwZXIucHJvdG90eXBlLl9uZXh0O1xuICAgICAgICBfdGhpcy5fZXJyb3IgPSBvbkVycm9yXG4gICAgICAgICAgICA/IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IF9zdXBlci5wcm90b3R5cGUuX2Vycm9yO1xuICAgICAgICBfdGhpcy5fY29tcGxldGUgPSBvbkNvbXBsZXRlXG4gICAgICAgICAgICA/IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IF9zdXBlci5wcm90b3R5cGUuX2NvbXBsZXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9wZXJhdG9yU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCF0aGlzLnNob3VsZFVuc3Vic2NyaWJlIHx8IHRoaXMuc2hvdWxkVW5zdWJzY3JpYmUoKSkge1xuICAgICAgICAgICAgdmFyIGNsb3NlZF8xID0gdGhpcy5jbG9zZWQ7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAhY2xvc2VkXzEgJiYgKChfYSA9IHRoaXMub25GaW5hbGl6ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gT3BlcmF0b3JTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG5leHBvcnQgeyBPcGVyYXRvclN1YnNjcmliZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9wZXJhdG9yU3Vic2NyaWJlci5qcy5tYXAiLCJpbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi4vT2JzZXJ2YWJsZSc7XG5leHBvcnQgdmFyIEVNUFRZID0gbmV3IE9ic2VydmFibGUoZnVuY3Rpb24gKHN1YnNjcmliZXIpIHsgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTsgfSk7XG5leHBvcnQgZnVuY3Rpb24gZW1wdHkoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIHNjaGVkdWxlciA/IGVtcHR5U2NoZWR1bGVkKHNjaGVkdWxlcikgOiBFTVBUWTtcbn1cbmZ1bmN0aW9uIGVtcHR5U2NoZWR1bGVkKHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShmdW5jdGlvbiAoc3Vic2NyaWJlcikgeyByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN1YnNjcmliZXIuY29tcGxldGUoKTsgfSk7IH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1wdHkuanMubWFwIiwiaW1wb3J0IHsgRU1QVFkgfSBmcm9tICcuLi9vYnNlcnZhYmxlL2VtcHR5JztcbmltcG9ydCB7IG9wZXJhdGUgfSBmcm9tICcuLi91dGlsL2xpZnQnO1xuaW1wb3J0IHsgY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyIH0gZnJvbSAnLi9PcGVyYXRvclN1YnNjcmliZXInO1xuZXhwb3J0IGZ1bmN0aW9uIHRha2UoY291bnQpIHtcbiAgICByZXR1cm4gY291bnQgPD0gMFxuICAgICAgICA/XG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7IHJldHVybiBFTVBUWTsgfVxuICAgICAgICA6IG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgdmFyIHNlZW4gPSAwO1xuICAgICAgICAgICAgc291cmNlLnN1YnNjcmliZShjcmVhdGVPcGVyYXRvclN1YnNjcmliZXIoc3Vic2NyaWJlciwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCsrc2VlbiA8PSBjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpYmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPD0gc2Vlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRha2UuanMubWFwIiwiaW1wb3J0IHsgY3JlYXRlRXJyb3JDbGFzcyB9IGZyb20gJy4vY3JlYXRlRXJyb3JDbGFzcyc7XG5leHBvcnQgdmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yID0gY3JlYXRlRXJyb3JDbGFzcyhmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIE9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbCgpIHtcbiAgICAgICAgX3N1cGVyKHRoaXMpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnb2JqZWN0IHVuc3Vic2NyaWJlZCc7XG4gICAgfTtcbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMubWFwIiwiaW1wb3J0IHsgX19leHRlbmRzLCBfX3ZhbHVlcyB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24sIEVNUFRZX1NVQlNDUklQVElPTiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yIH0gZnJvbSAnLi91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbmltcG9ydCB7IGFyclJlbW92ZSB9IGZyb20gJy4vdXRpbC9hcnJSZW1vdmUnO1xuaW1wb3J0IHsgZXJyb3JDb250ZXh0IH0gZnJvbSAnLi91dGlsL2Vycm9yQ29udGV4dCc7XG52YXIgU3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLm9ic2VydmVycyA9IFtdO1xuICAgICAgICBfdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMudGhyb3duRXJyb3IgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YmplY3QucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIHN1YmplY3QgPSBuZXcgQW5vbnltb3VzU3ViamVjdCh0aGlzLCB0aGlzKTtcbiAgICAgICAgc3ViamVjdC5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICByZXR1cm4gc3ViamVjdDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl90aHJvd0lmQ2xvc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGVycm9yQ29udGV4dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZV8xLCBfYTtcbiAgICAgICAgICAgIF90aGlzLl90aHJvd0lmQ2xvc2VkKCk7XG4gICAgICAgICAgICBpZiAoIV90aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIHZhciBjb3B5ID0gX3RoaXMub2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY29weV8xID0gX192YWx1ZXMoY29weSksIGNvcHlfMV8xID0gY29weV8xLm5leHQoKTsgIWNvcHlfMV8xLmRvbmU7IGNvcHlfMV8xID0gY29weV8xLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gY29weV8xXzEudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvcHlfMV8xICYmICFjb3B5XzFfMS5kb25lICYmIChfYSA9IGNvcHlfMS5yZXR1cm4pKSBfYS5jYWxsKGNvcHlfMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgZXJyb3JDb250ZXh0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLl90aHJvd0lmQ2xvc2VkKCk7XG4gICAgICAgICAgICBpZiAoIV90aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgIF90aGlzLmhhc0Vycm9yID0gX3RoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy50aHJvd25FcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gX3RoaXMub2JzZXJ2ZXJzO1xuICAgICAgICAgICAgICAgIHdoaWxlIChvYnNlcnZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVycy5zaGlmdCgpLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBlcnJvckNvbnRleHQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuX3Rocm93SWZDbG9zZWQoKTtcbiAgICAgICAgICAgIGlmICghX3RoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gX3RoaXMub2JzZXJ2ZXJzO1xuICAgICAgICAgICAgICAgIHdoaWxlIChvYnNlcnZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVycy5zaGlmdCgpLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN1YmplY3QucHJvdG90eXBlLCBcIm9ic2VydmVkXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMub2JzZXJ2ZXJzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSA+IDA7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5fdGhyb3dJZkNsb3NlZCgpO1xuICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5fdGhyb3dJZkNsb3NlZCgpO1xuICAgICAgICB0aGlzLl9jaGVja0ZpbmFsaXplZFN0YXR1c2VzKHN1YnNjcmliZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5faW5uZXJTdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5faW5uZXJTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBoYXNFcnJvciA9IF9hLmhhc0Vycm9yLCBpc1N0b3BwZWQgPSBfYS5pc1N0b3BwZWQsIG9ic2VydmVycyA9IF9hLm9ic2VydmVycztcbiAgICAgICAgcmV0dXJuIGhhc0Vycm9yIHx8IGlzU3RvcHBlZFxuICAgICAgICAgICAgPyBFTVBUWV9TVUJTQ1JJUFRJT05cbiAgICAgICAgICAgIDogKG9ic2VydmVycy5wdXNoKHN1YnNjcmliZXIpLCBuZXcgU3Vic2NyaXB0aW9uKGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFyclJlbW92ZShvYnNlcnZlcnMsIHN1YnNjcmliZXIpOyB9KSk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fY2hlY2tGaW5hbGl6ZWRTdGF0dXNlcyA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIGhhc0Vycm9yID0gX2EuaGFzRXJyb3IsIHRocm93bkVycm9yID0gX2EudGhyb3duRXJyb3IsIGlzU3RvcHBlZCA9IF9hLmlzU3RvcHBlZDtcbiAgICAgICAgaWYgKGhhc0Vycm9yKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHRocm93bkVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuYXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIG9ic2VydmFibGUuc291cmNlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBTdWJqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKTtcbiAgICB9O1xuICAgIHJldHVybiBTdWJqZWN0O1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgeyBTdWJqZWN0IH07XG52YXIgQW5vbnltb3VzU3ViamVjdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFub255bW91c1N1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIF90aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIChfYiA9IChfYSA9IHRoaXMuZGVzdGluYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5uZXh0KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgdmFsdWUpO1xuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIChfYiA9IChfYSA9IHRoaXMuZGVzdGluYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lcnJvcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIGVycik7XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgKF9iID0gKF9hID0gdGhpcy5kZXN0aW5hdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbXBsZXRlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSk7XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IHRoaXMuc291cmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3Vic2NyaWJlKHN1YnNjcmliZXIpKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBFTVBUWV9TVUJTQ1JJUFRJT047XG4gICAgfTtcbiAgICByZXR1cm4gQW5vbnltb3VzU3ViamVjdDtcbn0oU3ViamVjdCkpO1xuZXhwb3J0IHsgQW5vbnltb3VzU3ViamVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdC5qcy5tYXAiLCJpbXBvcnQgeyBfX3JlYWQsIF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGZyb20gfSBmcm9tICcuLi9vYnNlcnZhYmxlL2Zyb20nO1xuaW1wb3J0IHsgdGFrZSB9IGZyb20gJy4uL29wZXJhdG9ycy90YWtlJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICcuLi9TdWJqZWN0JztcbmltcG9ydCB7IFNhZmVTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBvcGVyYXRlIH0gZnJvbSAnLi4vdXRpbC9saWZ0JztcbmV4cG9ydCBmdW5jdGlvbiBzaGFyZShvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cbiAgICB2YXIgX2EgPSBvcHRpb25zLmNvbm5lY3RvciwgY29ubmVjdG9yID0gX2EgPT09IHZvaWQgMCA/IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBTdWJqZWN0KCk7IH0gOiBfYSwgX2IgPSBvcHRpb25zLnJlc2V0T25FcnJvciwgcmVzZXRPbkVycm9yID0gX2IgPT09IHZvaWQgMCA/IHRydWUgOiBfYiwgX2MgPSBvcHRpb25zLnJlc2V0T25Db21wbGV0ZSwgcmVzZXRPbkNvbXBsZXRlID0gX2MgPT09IHZvaWQgMCA/IHRydWUgOiBfYywgX2QgPSBvcHRpb25zLnJlc2V0T25SZWZDb3VudFplcm8sIHJlc2V0T25SZWZDb3VudFplcm8gPSBfZCA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9kO1xuICAgIHJldHVybiBmdW5jdGlvbiAod3JhcHBlclNvdXJjZSkge1xuICAgICAgICB2YXIgY29ubmVjdGlvbiA9IG51bGw7XG4gICAgICAgIHZhciByZXNldENvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICB2YXIgc3ViamVjdCA9IG51bGw7XG4gICAgICAgIHZhciByZWZDb3VudCA9IDA7XG4gICAgICAgIHZhciBoYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGhhc0Vycm9yZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGNhbmNlbFJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzZXRDb25uZWN0aW9uID09PSBudWxsIHx8IHJlc2V0Q29ubmVjdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzZXRDb25uZWN0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICByZXNldENvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYW5jZWxSZXNldCgpO1xuICAgICAgICAgICAgY29ubmVjdGlvbiA9IHN1YmplY3QgPSBudWxsO1xuICAgICAgICAgICAgaGFzQ29tcGxldGVkID0gaGFzRXJyb3JlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcmVzZXRBbmRVbnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb25uID0gY29ubmVjdGlvbjtcbiAgICAgICAgICAgIHJlc2V0KCk7XG4gICAgICAgICAgICBjb25uID09PSBudWxsIHx8IGNvbm4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbm4udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG9wZXJhdGUoZnVuY3Rpb24gKHNvdXJjZSwgc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgcmVmQ291bnQrKztcbiAgICAgICAgICAgIGlmICghaGFzRXJyb3JlZCAmJiAhaGFzQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsUmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkZXN0ID0gKHN1YmplY3QgPSBzdWJqZWN0ICE9PSBudWxsICYmIHN1YmplY3QgIT09IHZvaWQgMCA/IHN1YmplY3QgOiBjb25uZWN0b3IoKSk7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVmQ291bnQtLTtcbiAgICAgICAgICAgICAgICBpZiAocmVmQ291bnQgPT09IDAgJiYgIWhhc0Vycm9yZWQgJiYgIWhhc0NvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXNldENvbm5lY3Rpb24gPSBoYW5kbGVSZXNldChyZXNldEFuZFVuc3Vic2NyaWJlLCByZXNldE9uUmVmQ291bnRaZXJvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlc3Quc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbiA9IG5ldyBTYWZlU3Vic2NyaWJlcih7XG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gZGVzdC5uZXh0KHZhbHVlKTsgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0Vycm9yZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsUmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q29ubmVjdGlvbiA9IGhhbmRsZVJlc2V0KHJlc2V0LCByZXNldE9uRXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0LmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsUmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Q29ubmVjdGlvbiA9IGhhbmRsZVJlc2V0KHJlc2V0LCByZXNldE9uQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdC5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZyb20oc291cmNlKS5zdWJzY3JpYmUoY29ubmVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKHdyYXBwZXJTb3VyY2UpO1xuICAgIH07XG59XG5mdW5jdGlvbiBoYW5kbGVSZXNldChyZXNldCwgb24pIHtcbiAgICB2YXIgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMjsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGFyZ3NbX2kgLSAyXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIGlmIChvbiA9PT0gdHJ1ZSkge1xuICAgICAgICByZXNldCgpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKG9uID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG9uLmFwcGx5KHZvaWQgMCwgX19zcHJlYWRBcnJheShbXSwgX19yZWFkKGFyZ3MpKSkucGlwZSh0YWtlKDEpKVxuICAgICAgICAuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc2V0KCk7IH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhcmUuanMubWFwIiwiaW1wb3J0IHsgc2NoZWR1bGVkIH0gZnJvbSAnLi4vc2NoZWR1bGVkL3NjaGVkdWxlZCc7XG5pbXBvcnQgeyBpbm5lckZyb20gfSBmcm9tICcuL2lubmVyRnJvbSc7XG5leHBvcnQgZnVuY3Rpb24gZnJvbShpbnB1dCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIHNjaGVkdWxlciA/IHNjaGVkdWxlZChpbnB1dCwgc2NoZWR1bGVyKSA6IGlubmVyRnJvbShpbnB1dCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mcm9tLmpzLm1hcCIsIi8qKlxuICogQGxpY2Vuc2UgQW5ndWxhciB2MTMuMi42XG4gKiAoYykgMjAxMC0yMDIyIEdvb2dsZSBMTEMuIGh0dHBzOi8vYW5ndWxhci5pby9cbiAqIExpY2Vuc2U6IE1JVFxuICovXG5cbmltcG9ydCB7IFN1YmplY3QsIFN1YnNjcmlwdGlvbiwgT2JzZXJ2YWJsZSwgbWVyZ2UgYXMgbWVyZ2UkMSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc2hhcmUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eShvYmpXaXRoUHJvcGVydHlUb0V4dHJhY3QpIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gb2JqV2l0aFByb3BlcnR5VG9FeHRyYWN0KSB7XG4gICAgICAgIGlmIChvYmpXaXRoUHJvcGVydHlUb0V4dHJhY3Rba2V5XSA9PT0gZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIGtleTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBFcnJvcignQ291bGQgbm90IGZpbmQgcmVuYW1lZCBwcm9wZXJ0eSBvbiB0YXJnZXQgb2JqZWN0LicpO1xufVxuLyoqXG4gKiBTZXRzIHByb3BlcnRpZXMgb24gYSB0YXJnZXQgb2JqZWN0IGZyb20gYSBzb3VyY2Ugb2JqZWN0LCBidXQgb25seSBpZlxuICogdGhlIHByb3BlcnR5IGRvZXNuJ3QgYWxyZWFkeSBleGlzdCBvbiB0aGUgdGFyZ2V0IG9iamVjdC5cbiAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCB0byBzZXQgcHJvcGVydGllcyBvblxuICogQHBhcmFtIHNvdXJjZSBUaGUgc291cmNlIG9mIHRoZSBwcm9wZXJ0eSBrZXlzIGFuZCB2YWx1ZXMgdG8gc2V0XG4gKi9cbmZ1bmN0aW9uIGZpbGxQcm9wZXJ0aWVzKHRhcmdldCwgc291cmNlKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAhdGFyZ2V0Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gc3RyaW5naWZ5KHRva2VuKSB7XG4gICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0b2tlbikpIHtcbiAgICAgICAgcmV0dXJuICdbJyArIHRva2VuLm1hcChzdHJpbmdpZnkpLmpvaW4oJywgJykgKyAnXSc7XG4gICAgfVxuICAgIGlmICh0b2tlbiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnJyArIHRva2VuO1xuICAgIH1cbiAgICBpZiAodG9rZW4ub3ZlcnJpZGRlbk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGAke3Rva2VuLm92ZXJyaWRkZW5OYW1lfWA7XG4gICAgfVxuICAgIGlmICh0b2tlbi5uYW1lKSB7XG4gICAgICAgIHJldHVybiBgJHt0b2tlbi5uYW1lfWA7XG4gICAgfVxuICAgIGNvbnN0IHJlcyA9IHRva2VuLnRvU3RyaW5nKCk7XG4gICAgaWYgKHJlcyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnJyArIHJlcztcbiAgICB9XG4gICAgY29uc3QgbmV3TGluZUluZGV4ID0gcmVzLmluZGV4T2YoJ1xcbicpO1xuICAgIHJldHVybiBuZXdMaW5lSW5kZXggPT09IC0xID8gcmVzIDogcmVzLnN1YnN0cmluZygwLCBuZXdMaW5lSW5kZXgpO1xufVxuLyoqXG4gKiBDb25jYXRlbmF0ZXMgdHdvIHN0cmluZ3Mgd2l0aCBzZXBhcmF0b3IsIGFsbG9jYXRpbmcgbmV3IHN0cmluZ3Mgb25seSB3aGVuIG5lY2Vzc2FyeS5cbiAqXG4gKiBAcGFyYW0gYmVmb3JlIGJlZm9yZSBzdHJpbmcuXG4gKiBAcGFyYW0gc2VwYXJhdG9yIHNlcGFyYXRvciBzdHJpbmcuXG4gKiBAcGFyYW0gYWZ0ZXIgYWZ0ZXIgc3RyaW5nLlxuICogQHJldHVybnMgY29uY2F0ZW5hdGVkIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gY29uY2F0U3RyaW5nc1dpdGhTcGFjZShiZWZvcmUsIGFmdGVyKSB7XG4gICAgcmV0dXJuIChiZWZvcmUgPT0gbnVsbCB8fCBiZWZvcmUgPT09ICcnKSA/XG4gICAgICAgIChhZnRlciA9PT0gbnVsbCA/ICcnIDogYWZ0ZXIpIDpcbiAgICAgICAgKChhZnRlciA9PSBudWxsIHx8IGFmdGVyID09PSAnJykgPyBiZWZvcmUgOiBiZWZvcmUgKyAnICcgKyBhZnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuY29uc3QgX19mb3J3YXJkX3JlZl9fID0gZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSh7IF9fZm9yd2FyZF9yZWZfXzogZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSB9KTtcbi8qKlxuICogQWxsb3dzIHRvIHJlZmVyIHRvIHJlZmVyZW5jZXMgd2hpY2ggYXJlIG5vdCB5ZXQgZGVmaW5lZC5cbiAqXG4gKiBGb3IgaW5zdGFuY2UsIGBmb3J3YXJkUmVmYCBpcyB1c2VkIHdoZW4gdGhlIGB0b2tlbmAgd2hpY2ggd2UgbmVlZCB0byByZWZlciB0byBmb3IgdGhlIHB1cnBvc2VzIG9mXG4gKiBESSBpcyBkZWNsYXJlZCwgYnV0IG5vdCB5ZXQgZGVmaW5lZC4gSXQgaXMgYWxzbyB1c2VkIHdoZW4gdGhlIGB0b2tlbmAgd2hpY2ggd2UgdXNlIHdoZW4gY3JlYXRpbmdcbiAqIGEgcXVlcnkgaXMgbm90IHlldCBkZWZpbmVkLlxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKiAjIyMgRXhhbXBsZVxuICoge0BleGFtcGxlIGNvcmUvZGkvdHMvZm9yd2FyZF9yZWYvZm9yd2FyZF9yZWZfc3BlYy50cyByZWdpb249J2ZvcndhcmRfcmVmJ31cbiAqIEBwdWJsaWNBcGlcbiAqL1xuZnVuY3Rpb24gZm9yd2FyZFJlZihmb3J3YXJkUmVmRm4pIHtcbiAgICBmb3J3YXJkUmVmRm4uX19mb3J3YXJkX3JlZl9fID0gZm9yd2FyZFJlZjtcbiAgICBmb3J3YXJkUmVmRm4udG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdpZnkodGhpcygpKTtcbiAgICB9O1xuICAgIHJldHVybiBmb3J3YXJkUmVmRm47XG59XG4vKipcbiAqIExhemlseSByZXRyaWV2ZXMgdGhlIHJlZmVyZW5jZSB2YWx1ZSBmcm9tIGEgZm9yd2FyZFJlZi5cbiAqXG4gKiBBY3RzIGFzIHRoZSBpZGVudGl0eSBmdW5jdGlvbiB3aGVuIGdpdmVuIGEgbm9uLWZvcndhcmQtcmVmIHZhbHVlLlxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKiAjIyMgRXhhbXBsZVxuICpcbiAqIHtAZXhhbXBsZSBjb3JlL2RpL3RzL2ZvcndhcmRfcmVmL2ZvcndhcmRfcmVmX3NwZWMudHMgcmVnaW9uPSdyZXNvbHZlX2ZvcndhcmRfcmVmJ31cbiAqXG4gKiBAc2VlIGBmb3J3YXJkUmVmYFxuICogQHB1YmxpY0FwaVxuICovXG5mdW5jdGlvbiByZXNvbHZlRm9yd2FyZFJlZih0eXBlKSB7XG4gICAgcmV0dXJuIGlzRm9yd2FyZFJlZih0eXBlKSA/IHR5cGUoKSA6IHR5cGU7XG59XG4vKiogQ2hlY2tzIHdoZXRoZXIgYSBmdW5jdGlvbiBpcyB3cmFwcGVkIGJ5IGEgYGZvcndhcmRSZWZgLiAqL1xuZnVuY3Rpb24gaXNGb3J3YXJkUmVmKGZuKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiBmbi5oYXNPd25Qcm9wZXJ0eShfX2ZvcndhcmRfcmVmX18pICYmXG4gICAgICAgIGZuLl9fZm9yd2FyZF9yZWZfXyA9PT0gZm9yd2FyZFJlZjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEJhc2UgVVJMIGZvciB0aGUgZXJyb3IgZGV0YWlscyBwYWdlLlxuICpcbiAqIEtlZXAgdGhlIGZpbGVzIGJlbG93IGluIGZ1bGwgc3luYzpcbiAqICAtIHBhY2thZ2VzL2NvbXBpbGVyLWNsaS9zcmMvbmd0c2MvZGlhZ25vc3RpY3Mvc3JjL2Vycm9yX2RldGFpbHNfYmFzZV91cmwudHNcbiAqICAtIHBhY2thZ2VzL2NvcmUvc3JjL2Vycm9yX2RldGFpbHNfYmFzZV91cmwudHNcbiAqL1xuY29uc3QgRVJST1JfREVUQUlMU19QQUdFX0JBU0VfVVJMID0gJ2h0dHBzOi8vYW5ndWxhci5pby9lcnJvcnMnO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgcnVudGltZSBlcnJvci5cbiAqIEZvcm1hdHMgYW5kIG91dHB1dHMgdGhlIGVycm9yIG1lc3NhZ2UgaW4gYSBjb25zaXN0ZW50IHdheS5cbiAqXG4gKiBFeGFtcGxlOlxuICogYGBgXG4gKiAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcihcbiAqICAgIFJ1bnRpbWVFcnJvckNvZGUuSU5KRUNUT1JfQUxSRUFEWV9ERVNUUk9ZRUQsXG4gKiAgICBuZ0Rldk1vZGUgJiYgJ0luamVjdG9yIGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkLicpO1xuICogYGBgXG4gKlxuICogTm90ZTogdGhlIGBtZXNzYWdlYCBhcmd1bWVudCBjb250YWlucyBhIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2UgYXMgYSBzdHJpbmcgaW4gZGV2ZWxvcG1lbnRcbiAqIG1vZGUgKHdoZW4gdGhlIGBuZ0Rldk1vZGVgIGlzIGRlZmluZWQpLiBJbiBwcm9kdWN0aW9uIG1vZGUgKGFmdGVyIHRyZWUtc2hha2luZyBwYXNzKSwgdGhlXG4gKiBgbWVzc2FnZWAgYXJndW1lbnQgYmVjb21lcyBgZmFsc2VgLCB0aHVzIHdlIGFjY291bnQgZm9yIGl0IGluIHRoZSB0eXBpbmdzIGFuZCB0aGUgcnVudGltZSBsb2dpYy5cbiAqL1xuY2xhc3MgUnVudGltZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvZGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIoZm9ybWF0UnVudGltZUVycm9yKGNvZGUsIG1lc3NhZ2UpKTtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB9XG59XG4vKipcbiAqIENhbGxlZCB0byBmb3JtYXQgYSBydW50aW1lIGVycm9yLlxuICogU2VlIGFkZGl0aW9uYWwgaW5mbyBvbiB0aGUgYG1lc3NhZ2VgIGFyZ3VtZW50IHR5cGUgaW4gdGhlIGBSdW50aW1lRXJyb3JgIGNsYXNzIGRlc2NyaXB0aW9uLlxuICovXG5mdW5jdGlvbiBmb3JtYXRSdW50aW1lRXJyb3IoY29kZSwgbWVzc2FnZSkge1xuICAgIC8vIEVycm9yIGNvZGUgbWlnaHQgYmUgYSBuZWdhdGl2ZSBudW1iZXIsIHdoaWNoIGlzIGEgc3BlY2lhbCBtYXJrZXIgdGhhdCBpbnN0cnVjdHMgdGhlIGxvZ2ljIHRvXG4gICAgLy8gZ2VuZXJhdGUgYSBsaW5rIHRvIHRoZSBlcnJvciBkZXRhaWxzIHBhZ2Ugb24gYW5ndWxhci5pby5cbiAgICBjb25zdCBmdWxsQ29kZSA9IGBORzAke01hdGguYWJzKGNvZGUpfWA7XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9IGAke2Z1bGxDb2RlfSR7bWVzc2FnZSA/ICc6ICcgKyBtZXNzYWdlIDogJyd9YDtcbiAgICBpZiAobmdEZXZNb2RlICYmIGNvZGUgPCAwKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IGAke2Vycm9yTWVzc2FnZX0uIEZpbmQgbW9yZSBhdCAke0VSUk9SX0RFVEFJTFNfUEFHRV9CQVNFX1VSTH0vJHtmdWxsQ29kZX1gO1xuICAgIH1cbiAgICByZXR1cm4gZXJyb3JNZXNzYWdlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVXNlZCBmb3Igc3RyaW5naWZ5IHJlbmRlciBvdXRwdXQgaW4gSXZ5LlxuICogSW1wb3J0YW50ISBUaGlzIGZ1bmN0aW9uIGlzIHZlcnkgcGVyZm9ybWFuY2Utc2Vuc2l0aXZlIGFuZCB3ZSBzaG91bGRcbiAqIGJlIGV4dHJhIGNhcmVmdWwgbm90IHRvIGludHJvZHVjZSBtZWdhbW9ycGhpYyByZWFkcyBpbiBpdC5cbiAqIENoZWNrIGBjb3JlL3Rlc3QvcmVuZGVyMy9wZXJmL3JlbmRlcl9zdHJpbmdpZnlgIGZvciBiZW5jaG1hcmtzIGFuZCBhbHRlcm5hdGUgaW1wbGVtZW50YXRpb25zLlxuICovXG5mdW5jdGlvbiByZW5kZXJTdHJpbmdpZnkodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgLy8gVXNlIGBTdHJpbmdgIHNvIHRoYXQgaXQgaW52b2tlcyB0aGUgYHRvU3RyaW5nYCBtZXRob2Qgb2YgdGhlIHZhbHVlLiBOb3RlIHRoYXQgdGhpc1xuICAgIC8vIGFwcGVhcnMgdG8gYmUgZmFzdGVyIHRoYW4gY2FsbGluZyBgdmFsdWUudG9TdHJpbmdgIChzZWUgYHJlbmRlcl9zdHJpbmdpZnlgIGJlbmNobWFyaykuXG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG59XG4vKipcbiAqIFVzZWQgdG8gc3RyaW5naWZ5IGEgdmFsdWUgc28gdGhhdCBpdCBjYW4gYmUgZGlzcGxheWVkIGluIGFuIGVycm9yIG1lc3NhZ2UuXG4gKiBJbXBvcnRhbnQhIFRoaXMgZnVuY3Rpb24gY29udGFpbnMgYSBtZWdhbW9ycGhpYyByZWFkIGFuZCBzaG91bGQgb25seSBiZVxuICogdXNlZCBmb3IgZXJyb3IgbWVzc2FnZXMuXG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeUZvckVycm9yKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHZhbHVlLm5hbWUgfHwgdmFsdWUudG9TdHJpbmcoKTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS50eXBlLm5hbWUgfHwgdmFsdWUudHlwZS50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gcmVuZGVyU3RyaW5naWZ5KHZhbHVlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKiogQ2FsbGVkIHdoZW4gZGlyZWN0aXZlcyBpbmplY3QgZWFjaCBvdGhlciAoY3JlYXRpbmcgYSBjaXJjdWxhciBkZXBlbmRlbmN5KSAqL1xuZnVuY3Rpb24gdGhyb3dDeWNsaWNEZXBlbmRlbmN5RXJyb3IodG9rZW4sIHBhdGgpIHtcbiAgICBjb25zdCBkZXBQYXRoID0gcGF0aCA/IGAuIERlcGVuZGVuY3kgcGF0aDogJHtwYXRoLmpvaW4oJyA+ICcpfSA+ICR7dG9rZW59YCA6ICcnO1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoLTIwMCAvKiBDWUNMSUNfRElfREVQRU5ERU5DWSAqLywgYENpcmN1bGFyIGRlcGVuZGVuY3kgaW4gREkgZGV0ZWN0ZWQgZm9yICR7dG9rZW59JHtkZXBQYXRofWApO1xufVxuZnVuY3Rpb24gdGhyb3dNaXhlZE11bHRpUHJvdmlkZXJFcnJvcigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBtaXggbXVsdGkgcHJvdmlkZXJzIGFuZCByZWd1bGFyIHByb3ZpZGVyc2ApO1xufVxuZnVuY3Rpb24gdGhyb3dJbnZhbGlkUHJvdmlkZXJFcnJvcihuZ01vZHVsZVR5cGUsIHByb3ZpZGVycywgcHJvdmlkZXIpIHtcbiAgICBsZXQgbmdNb2R1bGVEZXRhaWwgPSAnJztcbiAgICBpZiAobmdNb2R1bGVUeXBlICYmIHByb3ZpZGVycykge1xuICAgICAgICBjb25zdCBwcm92aWRlckRldGFpbCA9IHByb3ZpZGVycy5tYXAodiA9PiB2ID09IHByb3ZpZGVyID8gJz8nICsgcHJvdmlkZXIgKyAnPycgOiAnLi4uJyk7XG4gICAgICAgIG5nTW9kdWxlRGV0YWlsID1cbiAgICAgICAgICAgIGAgLSBvbmx5IGluc3RhbmNlcyBvZiBQcm92aWRlciBhbmQgVHlwZSBhcmUgYWxsb3dlZCwgZ290OiBbJHtwcm92aWRlckRldGFpbC5qb2luKCcsICcpfV1gO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcHJvdmlkZXIgZm9yIHRoZSBOZ01vZHVsZSAnJHtzdHJpbmdpZnkobmdNb2R1bGVUeXBlKX0nYCArIG5nTW9kdWxlRGV0YWlsKTtcbn1cbi8qKiBUaHJvd3MgYW4gZXJyb3Igd2hlbiBhIHRva2VuIGlzIG5vdCBmb3VuZCBpbiBESS4gKi9cbmZ1bmN0aW9uIHRocm93UHJvdmlkZXJOb3RGb3VuZEVycm9yKHRva2VuLCBpbmplY3Rvck5hbWUpIHtcbiAgICBjb25zdCBpbmplY3RvckRldGFpbHMgPSBpbmplY3Rvck5hbWUgPyBgIGluICR7aW5qZWN0b3JOYW1lfWAgOiAnJztcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKC0yMDEgLyogUFJPVklERVJfTk9UX0ZPVU5EICovLCBgTm8gcHJvdmlkZXIgZm9yICR7c3RyaW5naWZ5Rm9yRXJyb3IodG9rZW4pfSBmb3VuZCR7aW5qZWN0b3JEZXRhaWxzfWApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmZ1bmN0aW9uIGFzc2VydE51bWJlcihhY3R1YWwsIG1zZykge1xuICAgIGlmICghKHR5cGVvZiBhY3R1YWwgPT09ICdudW1iZXInKSkge1xuICAgICAgICB0aHJvd0Vycm9yKG1zZywgdHlwZW9mIGFjdHVhbCwgJ251bWJlcicsICc9PT0nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhc3NlcnROdW1iZXJJblJhbmdlKGFjdHVhbCwgbWluSW5jbHVzaXZlLCBtYXhJbmNsdXNpdmUpIHtcbiAgICBhc3NlcnROdW1iZXIoYWN0dWFsLCAnRXhwZWN0ZWQgYSBudW1iZXInKTtcbiAgICBhc3NlcnRMZXNzVGhhbk9yRXF1YWwoYWN0dWFsLCBtYXhJbmNsdXNpdmUsICdFeHBlY3RlZCBudW1iZXIgdG8gYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvJyk7XG4gICAgYXNzZXJ0R3JlYXRlclRoYW5PckVxdWFsKGFjdHVhbCwgbWluSW5jbHVzaXZlLCAnRXhwZWN0ZWQgbnVtYmVyIHRvIGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0bycpO1xufVxuZnVuY3Rpb24gYXNzZXJ0U3RyaW5nKGFjdHVhbCwgbXNnKSB7XG4gICAgaWYgKCEodHlwZW9mIGFjdHVhbCA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIHRocm93RXJyb3IobXNnLCBhY3R1YWwgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgYWN0dWFsLCAnc3RyaW5nJywgJz09PScpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydEZ1bmN0aW9uKGFjdHVhbCwgbXNnKSB7XG4gICAgaWYgKCEodHlwZW9mIGFjdHVhbCA9PT0gJ2Z1bmN0aW9uJykpIHtcbiAgICAgICAgdGhyb3dFcnJvcihtc2csIGFjdHVhbCA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBhY3R1YWwsICdmdW5jdGlvbicsICc9PT0nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhc3NlcnRFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtc2cpIHtcbiAgICBpZiAoIShhY3R1YWwgPT0gZXhwZWN0ZWQpKSB7XG4gICAgICAgIHRocm93RXJyb3IobXNnLCBhY3R1YWwsIGV4cGVjdGVkLCAnPT0nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhc3NlcnROb3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtc2cpIHtcbiAgICBpZiAoIShhY3R1YWwgIT0gZXhwZWN0ZWQpKSB7XG4gICAgICAgIHRocm93RXJyb3IobXNnLCBhY3R1YWwsIGV4cGVjdGVkLCAnIT0nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhc3NlcnRTYW1lKGFjdHVhbCwgZXhwZWN0ZWQsIG1zZykge1xuICAgIGlmICghKGFjdHVhbCA9PT0gZXhwZWN0ZWQpKSB7XG4gICAgICAgIHRocm93RXJyb3IobXNnLCBhY3R1YWwsIGV4cGVjdGVkLCAnPT09Jyk7XG4gICAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0Tm90U2FtZShhY3R1YWwsIGV4cGVjdGVkLCBtc2cpIHtcbiAgICBpZiAoIShhY3R1YWwgIT09IGV4cGVjdGVkKSkge1xuICAgICAgICB0aHJvd0Vycm9yKG1zZywgYWN0dWFsLCBleHBlY3RlZCwgJyE9PScpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydExlc3NUaGFuKGFjdHVhbCwgZXhwZWN0ZWQsIG1zZykge1xuICAgIGlmICghKGFjdHVhbCA8IGV4cGVjdGVkKSkge1xuICAgICAgICB0aHJvd0Vycm9yKG1zZywgYWN0dWFsLCBleHBlY3RlZCwgJzwnKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhc3NlcnRMZXNzVGhhbk9yRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbXNnKSB7XG4gICAgaWYgKCEoYWN0dWFsIDw9IGV4cGVjdGVkKSkge1xuICAgICAgICB0aHJvd0Vycm9yKG1zZywgYWN0dWFsLCBleHBlY3RlZCwgJzw9Jyk7XG4gICAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0R3JlYXRlclRoYW4oYWN0dWFsLCBleHBlY3RlZCwgbXNnKSB7XG4gICAgaWYgKCEoYWN0dWFsID4gZXhwZWN0ZWQpKSB7XG4gICAgICAgIHRocm93RXJyb3IobXNnLCBhY3R1YWwsIGV4cGVjdGVkLCAnPicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydEdyZWF0ZXJUaGFuT3JFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtc2cpIHtcbiAgICBpZiAoIShhY3R1YWwgPj0gZXhwZWN0ZWQpKSB7XG4gICAgICAgIHRocm93RXJyb3IobXNnLCBhY3R1YWwsIGV4cGVjdGVkLCAnPj0nKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhc3NlcnROb3REZWZpbmVkKGFjdHVhbCwgbXNnKSB7XG4gICAgaWYgKGFjdHVhbCAhPSBudWxsKSB7XG4gICAgICAgIHRocm93RXJyb3IobXNnLCBhY3R1YWwsIG51bGwsICc9PScpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydERlZmluZWQoYWN0dWFsLCBtc2cpIHtcbiAgICBpZiAoYWN0dWFsID09IG51bGwpIHtcbiAgICAgICAgdGhyb3dFcnJvcihtc2csIGFjdHVhbCwgbnVsbCwgJyE9Jyk7XG4gICAgfVxufVxuZnVuY3Rpb24gdGhyb3dFcnJvcihtc2csIGFjdHVhbCwgZXhwZWN0ZWQsIGNvbXBhcmlzb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEFTU0VSVElPTiBFUlJPUjogJHttc2d9YCArXG4gICAgICAgIChjb21wYXJpc29uID09IG51bGwgPyAnJyA6IGAgW0V4cGVjdGVkPT4gJHtleHBlY3RlZH0gJHtjb21wYXJpc29ufSAke2FjdHVhbH0gPD1BY3R1YWxdYCkpO1xufVxuZnVuY3Rpb24gYXNzZXJ0RG9tTm9kZShub2RlKSB7XG4gICAgLy8gSWYgd2UncmUgaW4gYSB3b3JrZXIsIGBOb2RlYCB3aWxsIG5vdCBiZSBkZWZpbmVkLlxuICAgIGlmICghKHR5cGVvZiBOb2RlICE9PSAndW5kZWZpbmVkJyAmJiBub2RlIGluc3RhbmNlb2YgTm9kZSkgJiZcbiAgICAgICAgISh0eXBlb2Ygbm9kZSA9PT0gJ29iamVjdCcgJiYgbm9kZSAhPSBudWxsICYmXG4gICAgICAgICAgICBub2RlLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdXZWJXb3JrZXJSZW5kZXJOb2RlJykpIHtcbiAgICAgICAgdGhyb3dFcnJvcihgVGhlIHByb3ZpZGVkIHZhbHVlIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgYSBET00gTm9kZSBidXQgZ290ICR7c3RyaW5naWZ5KG5vZGUpfWApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydEluZGV4SW5SYW5nZShhcnIsIGluZGV4KSB7XG4gICAgYXNzZXJ0RGVmaW5lZChhcnIsICdBcnJheSBtdXN0IGJlIGRlZmluZWQuJyk7XG4gICAgY29uc3QgbWF4TGVuID0gYXJyLmxlbmd0aDtcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IG1heExlbikge1xuICAgICAgICB0aHJvd0Vycm9yKGBJbmRleCBleHBlY3RlZCB0byBiZSBsZXNzIHRoYW4gJHttYXhMZW59IGJ1dCBnb3QgJHtpbmRleH1gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhc3NlcnRPbmVPZih2YWx1ZSwgLi4udmFsaWRWYWx1ZXMpIHtcbiAgICBpZiAodmFsaWRWYWx1ZXMuaW5kZXhPZih2YWx1ZSkgIT09IC0xKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB0aHJvd0Vycm9yKGBFeHBlY3RlZCB2YWx1ZSB0byBiZSBvbmUgb2YgJHtKU09OLnN0cmluZ2lmeSh2YWxpZFZhbHVlcyl9IGJ1dCB3YXMgJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9LmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQ29uc3RydWN0IGFuIGluamVjdGFibGUgZGVmaW5pdGlvbiB3aGljaCBkZWZpbmVzIGhvdyBhIHRva2VuIHdpbGwgYmUgY29uc3RydWN0ZWQgYnkgdGhlIERJXG4gKiBzeXN0ZW0sIGFuZCBpbiB3aGljaCBpbmplY3RvcnMgKGlmIGFueSkgaXQgd2lsbCBiZSBhdmFpbGFibGUuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgYXNzaWduZWQgdG8gYSBzdGF0aWMgYMm1cHJvdmAgZmllbGQgb24gYSB0eXBlLCB3aGljaCB3aWxsIHRoZW4gYmUgYW5cbiAqIGBJbmplY3RhYmxlVHlwZWAuXG4gKlxuICogT3B0aW9uczpcbiAqICogYHByb3ZpZGVkSW5gIGRldGVybWluZXMgd2hpY2ggaW5qZWN0b3JzIHdpbGwgaW5jbHVkZSB0aGUgaW5qZWN0YWJsZSwgYnkgZWl0aGVyIGFzc29jaWF0aW5nIGl0XG4gKiAgIHdpdGggYW4gYEBOZ01vZHVsZWAgb3Igb3RoZXIgYEluamVjdG9yVHlwZWAsIG9yIGJ5IHNwZWNpZnlpbmcgdGhhdCB0aGlzIGluamVjdGFibGUgc2hvdWxkIGJlXG4gKiAgIHByb3ZpZGVkIGluIHRoZSBgJ3Jvb3QnYCBpbmplY3Rvciwgd2hpY2ggd2lsbCBiZSB0aGUgYXBwbGljYXRpb24tbGV2ZWwgaW5qZWN0b3IgaW4gbW9zdCBhcHBzLlxuICogKiBgZmFjdG9yeWAgZ2l2ZXMgdGhlIHplcm8gYXJndW1lbnQgZnVuY3Rpb24gd2hpY2ggd2lsbCBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIGluamVjdGFibGUuXG4gKiAgIFRoZSBmYWN0b3J5IGNhbiBjYWxsIGBpbmplY3RgIHRvIGFjY2VzcyB0aGUgYEluamVjdG9yYCBhbmQgcmVxdWVzdCBpbmplY3Rpb24gb2YgZGVwZW5kZW5jaWVzLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKiBAcHVibGljQXBpIFRoaXMgaW5zdHJ1Y3Rpb24gaGFzIGJlZW4gZW1pdHRlZCBieSBWaWV3RW5naW5lIGZvciBzb21lIHRpbWUgYW5kIGlzIGRlcGxveWVkIHRvIG5wbS5cbiAqL1xuZnVuY3Rpb24gybXJtWRlZmluZUluamVjdGFibGUob3B0cykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRva2VuOiBvcHRzLnRva2VuLFxuICAgICAgICBwcm92aWRlZEluOiBvcHRzLnByb3ZpZGVkSW4gfHwgbnVsbCxcbiAgICAgICAgZmFjdG9yeTogb3B0cy5mYWN0b3J5LFxuICAgICAgICB2YWx1ZTogdW5kZWZpbmVkLFxuICAgIH07XG59XG4vKipcbiAqIEBkZXByZWNhdGVkIGluIHY4LCBkZWxldGUgYWZ0ZXIgdjEwLiBUaGlzIEFQSSBzaG91bGQgYmUgdXNlZCBvbmx5IGJ5IGdlbmVyYXRlZCBjb2RlLCBhbmQgdGhhdFxuICogY29kZSBzaG91bGQgbm93IHVzZSDJtcm1ZGVmaW5lSW5qZWN0YWJsZSBpbnN0ZWFkLlxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBkZWZpbmVJbmplY3RhYmxlID0gybXJtWRlZmluZUluamVjdGFibGU7XG4vKipcbiAqIENvbnN0cnVjdCBhbiBgSW5qZWN0b3JEZWZgIHdoaWNoIGNvbmZpZ3VyZXMgYW4gaW5qZWN0b3IuXG4gKlxuICogVGhpcyBzaG91bGQgYmUgYXNzaWduZWQgdG8gYSBzdGF0aWMgaW5qZWN0b3IgZGVmIChgybVpbmpgKSBmaWVsZCBvbiBhIHR5cGUsIHdoaWNoIHdpbGwgdGhlbiBiZSBhblxuICogYEluamVjdG9yVHlwZWAuXG4gKlxuICogT3B0aW9uczpcbiAqXG4gKiAqIGBwcm92aWRlcnNgOiBhbiBvcHRpb25hbCBhcnJheSBvZiBwcm92aWRlcnMgdG8gYWRkIHRvIHRoZSBpbmplY3Rvci4gRWFjaCBwcm92aWRlciBtdXN0XG4gKiAgIGVpdGhlciBoYXZlIGEgZmFjdG9yeSBvciBwb2ludCB0byBhIHR5cGUgd2hpY2ggaGFzIGEgYMm1cHJvdmAgc3RhdGljIHByb3BlcnR5ICh0aGVcbiAqICAgdHlwZSBtdXN0IGJlIGFuIGBJbmplY3RhYmxlVHlwZWApLlxuICogKiBgaW1wb3J0c2A6IGFuIG9wdGlvbmFsIGFycmF5IG9mIGltcG9ydHMgb2Ygb3RoZXIgYEluamVjdG9yVHlwZWBzIG9yIGBJbmplY3RvclR5cGVXaXRoTW9kdWxlYHNcbiAqICAgd2hvc2UgcHJvdmlkZXJzIHdpbGwgYWxzbyBiZSBhZGRlZCB0byB0aGUgaW5qZWN0b3IuIExvY2FsbHkgcHJvdmlkZWQgdHlwZXMgd2lsbCBvdmVycmlkZVxuICogICBwcm92aWRlcnMgZnJvbSBpbXBvcnRzLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVkZWZpbmVJbmplY3RvcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIHsgcHJvdmlkZXJzOiBvcHRpb25zLnByb3ZpZGVycyB8fCBbXSwgaW1wb3J0czogb3B0aW9ucy5pbXBvcnRzIHx8IFtdIH07XG59XG4vKipcbiAqIFJlYWQgdGhlIGluamVjdGFibGUgZGVmIChgybVwcm92YCkgZm9yIGB0eXBlYCBpbiBhIHdheSB3aGljaCBpcyBpbW11bmUgdG8gYWNjaWRlbnRhbGx5IHJlYWRpbmdcbiAqIGluaGVyaXRlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gdHlwZSBBIHR5cGUgd2hpY2ggbWF5IGhhdmUgaXRzIG93biAobm9uLWluaGVyaXRlZCkgYMm1cHJvdmAuXG4gKi9cbmZ1bmN0aW9uIGdldEluamVjdGFibGVEZWYodHlwZSkge1xuICAgIHJldHVybiBnZXRPd25EZWZpbml0aW9uKHR5cGUsIE5HX1BST1ZfREVGKSB8fCBnZXRPd25EZWZpbml0aW9uKHR5cGUsIE5HX0lOSkVDVEFCTEVfREVGKTtcbn1cbi8qKlxuICogUmV0dXJuIGRlZmluaXRpb24gb25seSBpZiBpdCBpcyBkZWZpbmVkIGRpcmVjdGx5IG9uIGB0eXBlYCBhbmQgaXMgbm90IGluaGVyaXRlZCBmcm9tIGEgYmFzZVxuICogY2xhc3Mgb2YgYHR5cGVgLlxuICovXG5mdW5jdGlvbiBnZXRPd25EZWZpbml0aW9uKHR5cGUsIGZpZWxkKSB7XG4gICAgcmV0dXJuIHR5cGUuaGFzT3duUHJvcGVydHkoZmllbGQpID8gdHlwZVtmaWVsZF0gOiBudWxsO1xufVxuLyoqXG4gKiBSZWFkIHRoZSBpbmplY3RhYmxlIGRlZiAoYMm1cHJvdmApIGZvciBgdHlwZWAgb3IgcmVhZCB0aGUgYMm1cHJvdmAgZnJvbSBvbmUgb2YgaXRzIGFuY2VzdG9ycy5cbiAqXG4gKiBAcGFyYW0gdHlwZSBBIHR5cGUgd2hpY2ggbWF5IGhhdmUgYMm1cHJvdmAsIHZpYSBpbmhlcml0YW5jZS5cbiAqXG4gKiBAZGVwcmVjYXRlZCBXaWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBBbmd1bGFyLCB3aGVyZSBhbiBlcnJvciB3aWxsIG9jY3VyIGluIHRoZVxuICogICAgIHNjZW5hcmlvIGlmIHdlIGZpbmQgdGhlIGDJtXByb3ZgIG9uIGFuIGFuY2VzdG9yIG9ubHkuXG4gKi9cbmZ1bmN0aW9uIGdldEluaGVyaXRlZEluamVjdGFibGVEZWYodHlwZSkge1xuICAgIGNvbnN0IGRlZiA9IHR5cGUgJiYgKHR5cGVbTkdfUFJPVl9ERUZdIHx8IHR5cGVbTkdfSU5KRUNUQUJMRV9ERUZdKTtcbiAgICBpZiAoZGVmKSB7XG4gICAgICAgIGNvbnN0IHR5cGVOYW1lID0gZ2V0VHlwZU5hbWUodHlwZSk7XG4gICAgICAgIC8vIFRPRE8oRlctMTMwNyk6IFJlLWFkZCBuZ0Rldk1vZGUgd2hlbiBjbG9zdXJlIGNhbiBoYW5kbGUgaXRcbiAgICAgICAgLy8gbmdEZXZNb2RlICYmXG4gICAgICAgIGNvbnNvbGUud2FybihgREVQUkVDQVRFRDogREkgaXMgaW5zdGFudGlhdGluZyBhIHRva2VuIFwiJHt0eXBlTmFtZX1cIiB0aGF0IGluaGVyaXRzIGl0cyBASW5qZWN0YWJsZSBkZWNvcmF0b3IgYnV0IGRvZXMgbm90IHByb3ZpZGUgb25lIGl0c2VsZi5cXG5gICtcbiAgICAgICAgICAgIGBUaGlzIHdpbGwgYmVjb21lIGFuIGVycm9yIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgQW5ndWxhci4gUGxlYXNlIGFkZCBASW5qZWN0YWJsZSgpIHRvIHRoZSBcIiR7dHlwZU5hbWV9XCIgY2xhc3MuYCk7XG4gICAgICAgIHJldHVybiBkZWY7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vKiogR2V0cyB0aGUgbmFtZSBvZiBhIHR5cGUsIGFjY291bnRpbmcgZm9yIHNvbWUgY3Jvc3MtYnJvd3NlciBkaWZmZXJlbmNlcy4gKi9cbmZ1bmN0aW9uIGdldFR5cGVOYW1lKHR5cGUpIHtcbiAgICAvLyBgRnVuY3Rpb24ucHJvdG90eXBlLm5hbWVgIGJlaGF2ZXMgZGlmZmVyZW50bHkgYmV0d2VlbiBJRSBhbmQgb3RoZXIgYnJvd3NlcnMuIEluIG1vc3QgYnJvd3NlcnNcbiAgICAvLyBpdCdsbCBhbHdheXMgcmV0dXJuIHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiBpdHNlbGYsIG5vIG1hdHRlciBob3cgbWFueSBvdGhlciBmdW5jdGlvbnMgaXRcbiAgICAvLyBpbmhlcml0cyBmcm9tLiBPbiBJRSB0aGUgZnVuY3Rpb24gZG9lc24ndCBoYXZlIGl0cyBvd24gYG5hbWVgIHByb3BlcnR5LCBidXQgaXQgdGFrZXMgaXQgZnJvbVxuICAgIC8vIHRoZSBsb3dlc3QgbGV2ZWwgaW4gdGhlIHByb3RvdHlwZSBjaGFpbi4gRS5nLiBpZiB3ZSBoYXZlIGBjbGFzcyBGb28gZXh0ZW5kcyBQYXJlbnRgIG1vc3RcbiAgICAvLyBicm93c2VycyB3aWxsIGV2YWx1YXRlIGBGb28ubmFtZWAgdG8gYEZvb2Agd2hpbGUgSUUgd2lsbCByZXR1cm4gYFBhcmVudGAuIFdlIHdvcmsgYXJvdW5kXG4gICAgLy8gdGhlIGlzc3VlIGJ5IGNvbnZlcnRpbmcgdGhlIGZ1bmN0aW9uIHRvIGEgc3RyaW5nIGFuZCBwYXJzaW5nIGl0cyBuYW1lIG91dCB0aGF0IHdheSB2aWEgYSByZWdleC5cbiAgICBpZiAodHlwZS5oYXNPd25Qcm9wZXJ0eSgnbmFtZScpKSB7XG4gICAgICAgIHJldHVybiB0eXBlLm5hbWU7XG4gICAgfVxuICAgIGNvbnN0IG1hdGNoID0gKCcnICsgdHlwZSkubWF0Y2goL15mdW5jdGlvblxccyooW15cXHMoXSspLyk7XG4gICAgcmV0dXJuIG1hdGNoID09PSBudWxsID8gJycgOiBtYXRjaFsxXTtcbn1cbi8qKlxuICogUmVhZCB0aGUgaW5qZWN0b3IgZGVmIHR5cGUgaW4gYSB3YXkgd2hpY2ggaXMgaW1tdW5lIHRvIGFjY2lkZW50YWxseSByZWFkaW5nIGluaGVyaXRlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gdHlwZSB0eXBlIHdoaWNoIG1heSBoYXZlIGFuIGluamVjdG9yIGRlZiAoYMm1aW5qYClcbiAqL1xuZnVuY3Rpb24gZ2V0SW5qZWN0b3JEZWYodHlwZSkge1xuICAgIHJldHVybiB0eXBlICYmICh0eXBlLmhhc093blByb3BlcnR5KE5HX0lOSl9ERUYpIHx8IHR5cGUuaGFzT3duUHJvcGVydHkoTkdfSU5KRUNUT1JfREVGKSkgP1xuICAgICAgICB0eXBlW05HX0lOSl9ERUZdIDpcbiAgICAgICAgbnVsbDtcbn1cbmNvbnN0IE5HX1BST1ZfREVGID0gZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSh7IMm1cHJvdjogZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSB9KTtcbmNvbnN0IE5HX0lOSl9ERUYgPSBnZXRDbG9zdXJlU2FmZVByb3BlcnR5KHsgybVpbmo6IGdldENsb3N1cmVTYWZlUHJvcGVydHkgfSk7XG4vLyBXZSBuZWVkIHRvIGtlZXAgdGhlc2UgYXJvdW5kIHNvIHdlIGNhbiByZWFkIG9mZiBvbGQgZGVmcyBpZiBuZXcgZGVmcyBhcmUgdW5hdmFpbGFibGVcbmNvbnN0IE5HX0lOSkVDVEFCTEVfREVGID0gZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSh7IG5nSW5qZWN0YWJsZURlZjogZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSB9KTtcbmNvbnN0IE5HX0lOSkVDVE9SX0RFRiA9IGdldENsb3N1cmVTYWZlUHJvcGVydHkoeyBuZ0luamVjdG9yRGVmOiBnZXRDbG9zdXJlU2FmZVByb3BlcnR5IH0pO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogSW5qZWN0aW9uIGZsYWdzIGZvciBESS5cbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbnZhciBJbmplY3RGbGFncztcbihmdW5jdGlvbiAoSW5qZWN0RmxhZ3MpIHtcbiAgICAvLyBUT0RPKGFseGh1Yik6IG1ha2UgdGhpcyAnY29uc3QnIChhbmQgcmVtb3ZlIGBJbnRlcm5hbEluamVjdEZsYWdzYCBlbnVtKSB3aGVuIG5nYyBubyBsb25nZXJcbiAgICAvLyB3cml0ZXMgZXhwb3J0cyBvZiBpdCBpbnRvIG5nZmFjdG9yeSBmaWxlcy5cbiAgICAvKiogQ2hlY2sgc2VsZiBhbmQgY2hlY2sgcGFyZW50IGluamVjdG9yIGlmIG5lZWRlZCAqL1xuICAgIEluamVjdEZsYWdzW0luamVjdEZsYWdzW1wiRGVmYXVsdFwiXSA9IDBdID0gXCJEZWZhdWx0XCI7XG4gICAgLyoqXG4gICAgICogU3BlY2lmaWVzIHRoYXQgYW4gaW5qZWN0b3Igc2hvdWxkIHJldHJpZXZlIGEgZGVwZW5kZW5jeSBmcm9tIGFueSBpbmplY3RvciB1bnRpbCByZWFjaGluZyB0aGVcbiAgICAgKiBob3N0IGVsZW1lbnQgb2YgdGhlIGN1cnJlbnQgY29tcG9uZW50LiAoT25seSB1c2VkIHdpdGggRWxlbWVudCBJbmplY3RvcilcbiAgICAgKi9cbiAgICBJbmplY3RGbGFnc1tJbmplY3RGbGFnc1tcIkhvc3RcIl0gPSAxXSA9IFwiSG9zdFwiO1xuICAgIC8qKiBEb24ndCBhc2NlbmQgdG8gYW5jZXN0b3JzIG9mIHRoZSBub2RlIHJlcXVlc3RpbmcgaW5qZWN0aW9uLiAqL1xuICAgIEluamVjdEZsYWdzW0luamVjdEZsYWdzW1wiU2VsZlwiXSA9IDJdID0gXCJTZWxmXCI7XG4gICAgLyoqIFNraXAgdGhlIG5vZGUgdGhhdCBpcyByZXF1ZXN0aW5nIGluamVjdGlvbi4gKi9cbiAgICBJbmplY3RGbGFnc1tJbmplY3RGbGFnc1tcIlNraXBTZWxmXCJdID0gNF0gPSBcIlNraXBTZWxmXCI7XG4gICAgLyoqIEluamVjdCBgZGVmYXVsdFZhbHVlYCBpbnN0ZWFkIGlmIHRva2VuIG5vdCBmb3VuZC4gKi9cbiAgICBJbmplY3RGbGFnc1tJbmplY3RGbGFnc1tcIk9wdGlvbmFsXCJdID0gOF0gPSBcIk9wdGlvbmFsXCI7XG59KShJbmplY3RGbGFncyB8fCAoSW5qZWN0RmxhZ3MgPSB7fSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQ3VycmVudCBpbXBsZW1lbnRhdGlvbiBvZiBpbmplY3QuXG4gKlxuICogQnkgZGVmYXVsdCwgaXQgaXMgYGluamVjdEluamVjdG9yT25seWAsIHdoaWNoIG1ha2VzIGl0IGBJbmplY3RvcmAtb25seSBhd2FyZS4gSXQgY2FuIGJlIGNoYW5nZWRcbiAqIHRvIGBkaXJlY3RpdmVJbmplY3RgLCB3aGljaCBicmluZ3MgaW4gdGhlIGBOb2RlSW5qZWN0b3JgIHN5c3RlbSBvZiBpdnkuIEl0IGlzIGRlc2lnbmVkIHRoaXNcbiAqIHdheSBmb3IgdHdvIHJlYXNvbnM6XG4gKiAgMS4gYEluamVjdG9yYCBzaG91bGQgbm90IGRlcGVuZCBvbiBpdnkgbG9naWMuXG4gKiAgMi4gVG8gbWFpbnRhaW4gdHJlZSBzaGFrZS1hYmlsaXR5IHdlIGRvbid0IHdhbnQgdG8gYnJpbmcgaW4gdW5uZWNlc3NhcnkgY29kZS5cbiAqL1xubGV0IF9pbmplY3RJbXBsZW1lbnRhdGlvbjtcbmZ1bmN0aW9uIGdldEluamVjdEltcGxlbWVudGF0aW9uKCkge1xuICAgIHJldHVybiBfaW5qZWN0SW1wbGVtZW50YXRpb247XG59XG4vKipcbiAqIFNldHMgdGhlIGN1cnJlbnQgaW5qZWN0IGltcGxlbWVudGF0aW9uLlxuICovXG5mdW5jdGlvbiBzZXRJbmplY3RJbXBsZW1lbnRhdGlvbihpbXBsKSB7XG4gICAgY29uc3QgcHJldmlvdXMgPSBfaW5qZWN0SW1wbGVtZW50YXRpb247XG4gICAgX2luamVjdEltcGxlbWVudGF0aW9uID0gaW1wbDtcbiAgICByZXR1cm4gcHJldmlvdXM7XG59XG4vKipcbiAqIEluamVjdHMgYHJvb3RgIHRva2VucyBpbiBsaW1wIG1vZGUuXG4gKlxuICogSWYgbm8gaW5qZWN0b3IgZXhpc3RzLCB3ZSBjYW4gc3RpbGwgaW5qZWN0IHRyZWUtc2hha2FibGUgcHJvdmlkZXJzIHdoaWNoIGhhdmUgYHByb3ZpZGVkSW5gIHNldCB0b1xuICogYFwicm9vdFwiYC4gVGhpcyBpcyBrbm93biBhcyB0aGUgbGltcCBtb2RlIGluamVjdGlvbi4gSW4gc3VjaCBjYXNlIHRoZSB2YWx1ZSBpcyBzdG9yZWQgaW4gdGhlXG4gKiBpbmplY3RhYmxlIGRlZmluaXRpb24uXG4gKi9cbmZ1bmN0aW9uIGluamVjdFJvb3RMaW1wTW9kZSh0b2tlbiwgbm90Rm91bmRWYWx1ZSwgZmxhZ3MpIHtcbiAgICBjb25zdCBpbmplY3RhYmxlRGVmID0gZ2V0SW5qZWN0YWJsZURlZih0b2tlbik7XG4gICAgaWYgKGluamVjdGFibGVEZWYgJiYgaW5qZWN0YWJsZURlZi5wcm92aWRlZEluID09ICdyb290Jykge1xuICAgICAgICByZXR1cm4gaW5qZWN0YWJsZURlZi52YWx1ZSA9PT0gdW5kZWZpbmVkID8gaW5qZWN0YWJsZURlZi52YWx1ZSA9IGluamVjdGFibGVEZWYuZmFjdG9yeSgpIDpcbiAgICAgICAgICAgIGluamVjdGFibGVEZWYudmFsdWU7XG4gICAgfVxuICAgIGlmIChmbGFncyAmIEluamVjdEZsYWdzLk9wdGlvbmFsKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAobm90Rm91bmRWYWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gbm90Rm91bmRWYWx1ZTtcbiAgICB0aHJvd1Byb3ZpZGVyTm90Rm91bmRFcnJvcihzdHJpbmdpZnkodG9rZW4pLCAnSW5qZWN0b3InKTtcbn1cbi8qKlxuICogQXNzZXJ0IHRoYXQgYF9pbmplY3RJbXBsZW1lbnRhdGlvbmAgaXMgbm90IGBmbmAuXG4gKlxuICogVGhpcyBpcyB1c2VmdWwsIHRvIHByZXZlbnQgaW5maW5pdGUgcmVjdXJzaW9uLlxuICpcbiAqIEBwYXJhbSBmbiBGdW5jdGlvbiB3aGljaCBpdCBzaG91bGQgbm90IGVxdWFsIHRvXG4gKi9cbmZ1bmN0aW9uIGFzc2VydEluamVjdEltcGxlbWVudGF0aW9uTm90RXF1YWwoZm4pIHtcbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0Tm90RXF1YWwoX2luamVjdEltcGxlbWVudGF0aW9uLCBmbiwgJ0NhbGxpbmcgybXJtWluamVjdCB3b3VsZCBjYXVzZSBpbmZpbml0ZSByZWN1cnNpb24nKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIENvbnZpbmNlIGNsb3N1cmUgY29tcGlsZXIgdGhhdCB0aGUgd3JhcHBlZCBmdW5jdGlvbiBoYXMgbm8gc2lkZS1lZmZlY3RzLlxuICpcbiAqIENsb3N1cmUgY29tcGlsZXIgYWx3YXlzIGFzc3VtZXMgdGhhdCBgdG9TdHJpbmdgIGhhcyBubyBzaWRlLWVmZmVjdHMuIFdlIHVzZSB0aGlzIHF1aXJrIHRvXG4gKiBhbGxvdyB1cyB0byBleGVjdXRlIGEgZnVuY3Rpb24gYnV0IGhhdmUgY2xvc3VyZSBjb21waWxlciBtYXJrIHRoZSBjYWxsIGFzIG5vLXNpZGUtZWZmZWN0cy5cbiAqIEl0IGlzIGltcG9ydGFudCB0aGF0IHRoZSByZXR1cm4gdmFsdWUgZm9yIHRoZSBgbm9TaWRlRWZmZWN0c2AgZnVuY3Rpb24gYmUgYXNzaWduZWRcbiAqIHRvIHNvbWV0aGluZyB3aGljaCBpcyByZXRhaW5lZCBvdGhlcndpc2UgdGhlIGNhbGwgdG8gYG5vU2lkZUVmZmVjdHNgIHdpbGwgYmUgcmVtb3ZlZCBieSBjbG9zdXJlXG4gKiBjb21waWxlci5cbiAqL1xuZnVuY3Rpb24gbm9TaWRlRWZmZWN0cyhmbikge1xuICAgIHJldHVybiB7IHRvU3RyaW5nOiBmbiB9LnRvU3RyaW5nKCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBUaGUgc3RyYXRlZ3kgdGhhdCB0aGUgZGVmYXVsdCBjaGFuZ2UgZGV0ZWN0b3IgdXNlcyB0byBkZXRlY3QgY2hhbmdlcy5cbiAqIFdoZW4gc2V0LCB0YWtlcyBlZmZlY3QgdGhlIG5leHQgdGltZSBjaGFuZ2UgZGV0ZWN0aW9uIGlzIHRyaWdnZXJlZC5cbiAqXG4gKiBAc2VlIHtAbGluayBDaGFuZ2VEZXRlY3RvclJlZiN1c2FnZS1ub3RlcyBDaGFuZ2UgZGV0ZWN0aW9uIHVzYWdlfVxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xudmFyIENoYW5nZURldGVjdGlvblN0cmF0ZWd5O1xuKGZ1bmN0aW9uIChDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSkge1xuICAgIC8qKlxuICAgICAqIFVzZSB0aGUgYENoZWNrT25jZWAgc3RyYXRlZ3ksIG1lYW5pbmcgdGhhdCBhdXRvbWF0aWMgY2hhbmdlIGRldGVjdGlvbiBpcyBkZWFjdGl2YXRlZFxuICAgICAqIHVudGlsIHJlYWN0aXZhdGVkIGJ5IHNldHRpbmcgdGhlIHN0cmF0ZWd5IHRvIGBEZWZhdWx0YCAoYENoZWNrQWx3YXlzYCkuXG4gICAgICogQ2hhbmdlIGRldGVjdGlvbiBjYW4gc3RpbGwgYmUgZXhwbGljaXRseSBpbnZva2VkLlxuICAgICAqIFRoaXMgc3RyYXRlZ3kgYXBwbGllcyB0byBhbGwgY2hpbGQgZGlyZWN0aXZlcyBhbmQgY2Fubm90IGJlIG92ZXJyaWRkZW4uXG4gICAgICovXG4gICAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3lbQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3lbXCJPblB1c2hcIl0gPSAwXSA9IFwiT25QdXNoXCI7XG4gICAgLyoqXG4gICAgICogVXNlIHRoZSBkZWZhdWx0IGBDaGVja0Fsd2F5c2Agc3RyYXRlZ3ksIGluIHdoaWNoIGNoYW5nZSBkZXRlY3Rpb24gaXMgYXV0b21hdGljIHVudGlsXG4gICAgICogZXhwbGljaXRseSBkZWFjdGl2YXRlZC5cbiAgICAgKi9cbiAgICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneVtDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneVtcIkRlZmF1bHRcIl0gPSAxXSA9IFwiRGVmYXVsdFwiO1xufSkoQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kgfHwgKENoYW5nZURldGVjdGlvblN0cmF0ZWd5ID0ge30pKTtcbi8qKlxuICogRGVmaW5lcyB0aGUgcG9zc2libGUgc3RhdGVzIG9mIHRoZSBkZWZhdWx0IGNoYW5nZSBkZXRlY3Rvci5cbiAqIEBzZWUgYENoYW5nZURldGVjdG9yUmVmYFxuICovXG52YXIgQ2hhbmdlRGV0ZWN0b3JTdGF0dXM7XG4oZnVuY3Rpb24gKENoYW5nZURldGVjdG9yU3RhdHVzKSB7XG4gICAgLyoqXG4gICAgICogQSBzdGF0ZSBpbiB3aGljaCwgYWZ0ZXIgY2FsbGluZyBgZGV0ZWN0Q2hhbmdlcygpYCwgdGhlIGNoYW5nZSBkZXRlY3RvclxuICAgICAqIHN0YXRlIGJlY29tZXMgYENoZWNrZWRgLCBhbmQgbXVzdCBiZSBleHBsaWNpdGx5IGludm9rZWQgb3IgcmVhY3RpdmF0ZWQuXG4gICAgICovXG4gICAgQ2hhbmdlRGV0ZWN0b3JTdGF0dXNbQ2hhbmdlRGV0ZWN0b3JTdGF0dXNbXCJDaGVja09uY2VcIl0gPSAwXSA9IFwiQ2hlY2tPbmNlXCI7XG4gICAgLyoqXG4gICAgICogQSBzdGF0ZSBpbiB3aGljaCBjaGFuZ2UgZGV0ZWN0aW9uIGlzIHNraXBwZWQgdW50aWwgdGhlIGNoYW5nZSBkZXRlY3RvciBtb2RlXG4gICAgICogYmVjb21lcyBgQ2hlY2tPbmNlYC5cbiAgICAgKi9cbiAgICBDaGFuZ2VEZXRlY3RvclN0YXR1c1tDaGFuZ2VEZXRlY3RvclN0YXR1c1tcIkNoZWNrZWRcIl0gPSAxXSA9IFwiQ2hlY2tlZFwiO1xuICAgIC8qKlxuICAgICAqIEEgc3RhdGUgaW4gd2hpY2ggY2hhbmdlIGRldGVjdGlvbiBjb250aW51ZXMgYXV0b21hdGljYWxseSB1bnRpbCBleHBsaWNpdGx5XG4gICAgICogZGVhY3RpdmF0ZWQuXG4gICAgICovXG4gICAgQ2hhbmdlRGV0ZWN0b3JTdGF0dXNbQ2hhbmdlRGV0ZWN0b3JTdGF0dXNbXCJDaGVja0Fsd2F5c1wiXSA9IDJdID0gXCJDaGVja0Fsd2F5c1wiO1xuICAgIC8qKlxuICAgICAqIEEgc3RhdGUgaW4gd2hpY2ggYSBjaGFuZ2UgZGV0ZWN0b3Igc3ViIHRyZWUgaXMgbm90IGEgcGFydCBvZiB0aGUgbWFpbiB0cmVlIGFuZFxuICAgICAqIHNob3VsZCBiZSBza2lwcGVkLlxuICAgICAqL1xuICAgIENoYW5nZURldGVjdG9yU3RhdHVzW0NoYW5nZURldGVjdG9yU3RhdHVzW1wiRGV0YWNoZWRcIl0gPSAzXSA9IFwiRGV0YWNoZWRcIjtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgY2hhbmdlIGRldGVjdG9yIGVuY291bnRlcmVkIGFuIGVycm9yIGNoZWNraW5nIGEgYmluZGluZ1xuICAgICAqIG9yIGNhbGxpbmcgYSBkaXJlY3RpdmUgbGlmZWN5Y2xlIG1ldGhvZCBhbmQgaXMgbm93IGluIGFuIGluY29uc2lzdGVudCBzdGF0ZS4gQ2hhbmdlXG4gICAgICogZGV0ZWN0b3JzIGluIHRoaXMgc3RhdGUgZG8gbm90IGRldGVjdCBjaGFuZ2VzLlxuICAgICAqL1xuICAgIENoYW5nZURldGVjdG9yU3RhdHVzW0NoYW5nZURldGVjdG9yU3RhdHVzW1wiRXJyb3JlZFwiXSA9IDRdID0gXCJFcnJvcmVkXCI7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIGNoYW5nZSBkZXRlY3RvciBoYXMgYmVlbiBkZXN0cm95ZWQuXG4gICAgICovXG4gICAgQ2hhbmdlRGV0ZWN0b3JTdGF0dXNbQ2hhbmdlRGV0ZWN0b3JTdGF0dXNbXCJEZXN0cm95ZWRcIl0gPSA1XSA9IFwiRGVzdHJveWVkXCI7XG59KShDaGFuZ2VEZXRlY3RvclN0YXR1cyB8fCAoQ2hhbmdlRGV0ZWN0b3JTdGF0dXMgPSB7fSkpO1xuLyoqXG4gKiBSZXBvcnRzIHdoZXRoZXIgYSBnaXZlbiBzdHJhdGVneSBpcyBjdXJyZW50bHkgdGhlIGRlZmF1bHQgZm9yIGNoYW5nZSBkZXRlY3Rpb24uXG4gKiBAcGFyYW0gY2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kgVGhlIHN0cmF0ZWd5IHRvIGNoZWNrLlxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZ2l2ZW4gc3RyYXRlZ3kgaXMgdGhlIGN1cnJlbnQgZGVmYXVsdCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICogQHNlZSBgQ2hhbmdlRGV0ZWN0b3JTdGF0dXNgXG4gKiBAc2VlIGBDaGFuZ2VEZXRlY3RvclJlZmBcbiAqL1xuZnVuY3Rpb24gaXNEZWZhdWx0Q2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3koY2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kpIHtcbiAgICByZXR1cm4gY2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kgPT0gbnVsbCB8fFxuICAgICAgICBjaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSA9PT0gQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuRGVmYXVsdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIERlZmluZXMgdGhlIENTUyBzdHlsZXMgZW5jYXBzdWxhdGlvbiBwb2xpY2llcyBmb3IgdGhlIHtAbGluayBDb21wb25lbnR9IGRlY29yYXRvcidzXG4gKiBgZW5jYXBzdWxhdGlvbmAgb3B0aW9uLlxuICpcbiAqIFNlZSB7QGxpbmsgQ29tcG9uZW50I2VuY2Fwc3VsYXRpb24gZW5jYXBzdWxhdGlvbn0uXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqICMjIyBFeGFtcGxlXG4gKlxuICoge0BleGFtcGxlIGNvcmUvdHMvbWV0YWRhdGEvZW5jYXBzdWxhdGlvbi50cyByZWdpb249J2xvbmdmb3JtJ31cbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbnZhciBWaWV3RW5jYXBzdWxhdGlvbiQxO1xuKGZ1bmN0aW9uIChWaWV3RW5jYXBzdWxhdGlvbikge1xuICAgIC8vIFRPRE86IGNvbnNpZGVyIG1ha2luZyBgVmlld0VuY2Fwc3VsYXRpb25gIGEgYGNvbnN0IGVudW1gIGluc3RlYWQuIFNlZVxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvaXNzdWVzLzQ0MTE5IGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLlxuICAgIC8qKlxuICAgICAqIEVtdWxhdGVzIGEgbmF0aXZlIFNoYWRvdyBET00gZW5jYXBzdWxhdGlvbiBiZWhhdmlvciBieSBhZGRpbmcgYSBzcGVjaWZpYyBhdHRyaWJ1dGUgdG8gdGhlXG4gICAgICogY29tcG9uZW50J3MgaG9zdCBlbGVtZW50IGFuZCBhcHBseWluZyB0aGUgc2FtZSBhdHRyaWJ1dGUgdG8gYWxsIHRoZSBDU1Mgc2VsZWN0b3JzIHByb3ZpZGVkXG4gICAgICogdmlhIHtAbGluayBDb21wb25lbnQjc3R5bGVzIHN0eWxlc30gb3Ige0BsaW5rIENvbXBvbmVudCNzdHlsZVVybHMgc3R5bGVVcmxzfS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdGhlIGRlZmF1bHQgb3B0aW9uLlxuICAgICAqL1xuICAgIFZpZXdFbmNhcHN1bGF0aW9uW1ZpZXdFbmNhcHN1bGF0aW9uW1wiRW11bGF0ZWRcIl0gPSAwXSA9IFwiRW11bGF0ZWRcIjtcbiAgICAvLyBIaXN0b3JpY2FsbHkgdGhlIDEgdmFsdWUgd2FzIGZvciBgTmF0aXZlYCBlbmNhcHN1bGF0aW9uIHdoaWNoIGhhcyBiZWVuIHJlbW92ZWQgYXMgb2YgdjExLlxuICAgIC8qKlxuICAgICAqIERvZXNuJ3QgcHJvdmlkZSBhbnkgc29ydCBvZiBDU1Mgc3R5bGUgZW5jYXBzdWxhdGlvbiwgbWVhbmluZyB0aGF0IGFsbCB0aGUgc3R5bGVzIHByb3ZpZGVkXG4gICAgICogdmlhIHtAbGluayBDb21wb25lbnQjc3R5bGVzIHN0eWxlc30gb3Ige0BsaW5rIENvbXBvbmVudCNzdHlsZVVybHMgc3R5bGVVcmxzfSBhcmUgYXBwbGljYWJsZVxuICAgICAqIHRvIGFueSBIVE1MIGVsZW1lbnQgb2YgdGhlIGFwcGxpY2F0aW9uIHJlZ2FyZGxlc3Mgb2YgdGhlaXIgaG9zdCBDb21wb25lbnQuXG4gICAgICovXG4gICAgVmlld0VuY2Fwc3VsYXRpb25bVmlld0VuY2Fwc3VsYXRpb25bXCJOb25lXCJdID0gMl0gPSBcIk5vbmVcIjtcbiAgICAvKipcbiAgICAgKiBVc2VzIHRoZSBicm93c2VyJ3MgbmF0aXZlIFNoYWRvdyBET00gQVBJIHRvIGVuY2Fwc3VsYXRlIENTUyBzdHlsZXMsIG1lYW5pbmcgdGhhdCBpdCBjcmVhdGVzXG4gICAgICogYSBTaGFkb3dSb290IGZvciB0aGUgY29tcG9uZW50J3MgaG9zdCBlbGVtZW50IHdoaWNoIGlzIHRoZW4gdXNlZCB0byBlbmNhcHN1bGF0ZVxuICAgICAqIGFsbCB0aGUgQ29tcG9uZW50J3Mgc3R5bGluZy5cbiAgICAgKi9cbiAgICBWaWV3RW5jYXBzdWxhdGlvbltWaWV3RW5jYXBzdWxhdGlvbltcIlNoYWRvd0RvbVwiXSA9IDNdID0gXCJTaGFkb3dEb21cIjtcbn0pKFZpZXdFbmNhcHN1bGF0aW9uJDEgfHwgKFZpZXdFbmNhcHN1bGF0aW9uJDEgPSB7fSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IF9fZ2xvYmFsVGhpcyA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWxUaGlzO1xuY29uc3QgX193aW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3c7XG5jb25zdCBfX3NlbGYgPSB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSAmJiBzZWxmO1xuY29uc3QgX19nbG9iYWwgPSB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJiBnbG9iYWw7XG4vLyBBbHdheXMgdXNlIF9fZ2xvYmFsVGhpcyBpZiBhdmFpbGFibGUsIHdoaWNoIGlzIHRoZSBzcGVjLWRlZmluZWQgZ2xvYmFsIHZhcmlhYmxlIGFjcm9zcyBhbGxcbi8vIGVudmlyb25tZW50cywgdGhlbiBmYWxsYmFjayB0byBfX2dsb2JhbCBmaXJzdCwgYmVjYXVzZSBpbiBOb2RlIHRlc3RzIGJvdGggX19nbG9iYWwgYW5kXG4vLyBfX3dpbmRvdyBtYXkgYmUgZGVmaW5lZCBhbmQgX2dsb2JhbCBzaG91bGQgYmUgX19nbG9iYWwgaW4gdGhhdCBjYXNlLlxuY29uc3QgX2dsb2JhbCA9IF9fZ2xvYmFsVGhpcyB8fCBfX2dsb2JhbCB8fCBfX3dpbmRvdyB8fCBfX3NlbGY7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gbmdEZXZNb2RlUmVzZXRQZXJmQ291bnRlcnMoKSB7XG4gICAgY29uc3QgbG9jYXRpb25TdHJpbmcgPSB0eXBlb2YgbG9jYXRpb24gIT09ICd1bmRlZmluZWQnID8gbG9jYXRpb24udG9TdHJpbmcoKSA6ICcnO1xuICAgIGNvbnN0IG5ld0NvdW50ZXJzID0ge1xuICAgICAgICBuYW1lZENvbnN0cnVjdG9yczogbG9jYXRpb25TdHJpbmcuaW5kZXhPZignbmdEZXZNb2RlPW5hbWVkQ29uc3RydWN0b3JzJykgIT0gLTEsXG4gICAgICAgIGZpcnN0Q3JlYXRlUGFzczogMCxcbiAgICAgICAgdE5vZGU6IDAsXG4gICAgICAgIHRWaWV3OiAwLFxuICAgICAgICByZW5kZXJlckNyZWF0ZVRleHROb2RlOiAwLFxuICAgICAgICByZW5kZXJlclNldFRleHQ6IDAsXG4gICAgICAgIHJlbmRlcmVyQ3JlYXRlRWxlbWVudDogMCxcbiAgICAgICAgcmVuZGVyZXJBZGRFdmVudExpc3RlbmVyOiAwLFxuICAgICAgICByZW5kZXJlclNldEF0dHJpYnV0ZTogMCxcbiAgICAgICAgcmVuZGVyZXJSZW1vdmVBdHRyaWJ1dGU6IDAsXG4gICAgICAgIHJlbmRlcmVyU2V0UHJvcGVydHk6IDAsXG4gICAgICAgIHJlbmRlcmVyU2V0Q2xhc3NOYW1lOiAwLFxuICAgICAgICByZW5kZXJlckFkZENsYXNzOiAwLFxuICAgICAgICByZW5kZXJlclJlbW92ZUNsYXNzOiAwLFxuICAgICAgICByZW5kZXJlclNldFN0eWxlOiAwLFxuICAgICAgICByZW5kZXJlclJlbW92ZVN0eWxlOiAwLFxuICAgICAgICByZW5kZXJlckRlc3Ryb3k6IDAsXG4gICAgICAgIHJlbmRlcmVyRGVzdHJveU5vZGU6IDAsXG4gICAgICAgIHJlbmRlcmVyTW92ZU5vZGU6IDAsXG4gICAgICAgIHJlbmRlcmVyUmVtb3ZlTm9kZTogMCxcbiAgICAgICAgcmVuZGVyZXJBcHBlbmRDaGlsZDogMCxcbiAgICAgICAgcmVuZGVyZXJJbnNlcnRCZWZvcmU6IDAsXG4gICAgICAgIHJlbmRlcmVyQ3JlYXRlQ29tbWVudDogMCxcbiAgICB9O1xuICAgIC8vIE1ha2Ugc3VyZSB0byByZWZlciB0byBuZ0Rldk1vZGUgYXMgWyduZ0Rldk1vZGUnXSBmb3IgY2xvc3VyZS5cbiAgICBjb25zdCBhbGxvd05nRGV2TW9kZVRydWUgPSBsb2NhdGlvblN0cmluZy5pbmRleE9mKCduZ0Rldk1vZGU9ZmFsc2UnKSA9PT0gLTE7XG4gICAgX2dsb2JhbFsnbmdEZXZNb2RlJ10gPSBhbGxvd05nRGV2TW9kZVRydWUgJiYgbmV3Q291bnRlcnM7XG4gICAgcmV0dXJuIG5ld0NvdW50ZXJzO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNoZWNrcyB0byBzZWUgaWYgdGhlIGBuZ0Rldk1vZGVgIGhhcyBiZWVuIHNldC4gSWYgeWVzLFxuICogdGhlbiB3ZSBob25vciBpdCwgb3RoZXJ3aXNlIHdlIGRlZmF1bHQgdG8gZGV2IG1vZGUgd2l0aCBhZGRpdGlvbmFsIGNoZWNrcy5cbiAqXG4gKiBUaGUgaWRlYSBpcyB0aGF0IHVubGVzcyB3ZSBhcmUgZG9pbmcgcHJvZHVjdGlvbiBidWlsZCB3aGVyZSB3ZSBleHBsaWNpdGx5XG4gKiBzZXQgYG5nRGV2TW9kZSA9PSBmYWxzZWAgd2Ugc2hvdWxkIGJlIGhlbHBpbmcgdGhlIGRldmVsb3BlciBieSBwcm92aWRpbmdcbiAqIGFzIG11Y2ggZWFybHkgd2FybmluZyBhbmQgZXJyb3JzIGFzIHBvc3NpYmxlLlxuICpcbiAqIGDJtcm1ZGVmaW5lQ29tcG9uZW50YCBpcyBndWFyYW50ZWVkIHRvIGhhdmUgYmVlbiBjYWxsZWQgYmVmb3JlIGFueSBjb21wb25lbnQgdGVtcGxhdGUgZnVuY3Rpb25zXG4gKiAoYW5kIHRodXMgSXZ5IGluc3RydWN0aW9ucyksIHNvIGEgc2luZ2xlIGluaXRpYWxpemF0aW9uIHRoZXJlIGlzIHN1ZmZpY2llbnQgdG8gZW5zdXJlIG5nRGV2TW9kZVxuICogaXMgZGVmaW5lZCBmb3IgdGhlIGVudGlyZSBpbnN0cnVjdGlvbiBzZXQuXG4gKlxuICogV2hlbiBjaGVja2luZyBgbmdEZXZNb2RlYCBvbiB0b3BsZXZlbCwgYWx3YXlzIGluaXQgaXQgYmVmb3JlIHJlZmVyZW5jaW5nIGl0XG4gKiAoZS5nLiBgKCh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpICYmIGluaXROZ0Rldk1vZGUoKSlgKSwgb3RoZXJ3aXNlIHlvdSBjYW5cbiAqICBnZXQgYSBgUmVmZXJlbmNlRXJyb3JgIGxpa2UgaW4gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci9pc3N1ZXMvMzE1OTUuXG4gKlxuICogRGV0YWlscyBvbiBwb3NzaWJsZSB2YWx1ZXMgZm9yIGBuZ0Rldk1vZGVgIGNhbiBiZSBmb3VuZCBvbiBpdHMgZG9jc3RyaW5nLlxuICpcbiAqIE5PVEU6XG4gKiAtIGNoYW5nZXMgdG8gdGhlIGBuZ0Rldk1vZGVgIG5hbWUgbXVzdCBiZSBzeW5jZWQgd2l0aCBgY29tcGlsZXItY2xpL3NyYy90b29saW5nLnRzYC5cbiAqL1xuZnVuY3Rpb24gaW5pdE5nRGV2TW9kZSgpIHtcbiAgICAvLyBUaGUgYmVsb3cgY2hlY2tzIGFyZSB0byBlbnN1cmUgdGhhdCBjYWxsaW5nIGBpbml0TmdEZXZNb2RlYCBtdWx0aXBsZSB0aW1lcyBkb2VzIG5vdFxuICAgIC8vIHJlc2V0IHRoZSBjb3VudGVycy5cbiAgICAvLyBJZiB0aGUgYG5nRGV2TW9kZWAgaXMgbm90IGFuIG9iamVjdCwgdGhlbiBpdCBtZWFucyB3ZSBoYXZlIG5vdCBjcmVhdGVkIHRoZSBwZXJmIGNvdW50ZXJzXG4gICAgLy8geWV0LlxuICAgIGlmICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBuZ0Rldk1vZGUgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBuZ0Rldk1vZGVSZXNldFBlcmZDb3VudGVycygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0eXBlb2YgbmdEZXZNb2RlICE9PSAndW5kZWZpbmVkJyAmJiAhIW5nRGV2TW9kZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHJldXNlYWJsZSBcImVtcHR5XCIgc3ltYm9scyB0aGF0IGNhbiBiZSB1c2VkIGFzIGRlZmF1bHQgcmV0dXJuIHZhbHVlc1xuICogaW4gZGlmZmVyZW50IHBhcnRzIG9mIHRoZSByZW5kZXJpbmcgY29kZS4gQmVjYXVzZSB0aGUgc2FtZSBzeW1ib2xzIGFyZSByZXR1cm5lZCwgdGhpc1xuICogYWxsb3dzIGZvciBpZGVudGl0eSBjaGVja3MgYWdhaW5zdCB0aGVzZSB2YWx1ZXMgdG8gYmUgY29uc2lzdGVudGx5IHVzZWQgYnkgdGhlIGZyYW1ld29ya1xuICogY29kZS5cbiAqL1xuY29uc3QgRU1QVFlfT0JKID0ge307XG5jb25zdCBFTVBUWV9BUlJBWSA9IFtdO1xuLy8gZnJlZXppbmcgdGhlIHZhbHVlcyBwcmV2ZW50cyBhbnkgY29kZSBmcm9tIGFjY2lkZW50YWxseSBpbnNlcnRpbmcgbmV3IHZhbHVlcyBpblxuaWYgKCh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpICYmIGluaXROZ0Rldk1vZGUoKSkge1xuICAgIC8vIFRoZXNlIHByb3BlcnR5IGFjY2Vzc2VzIGNhbiBiZSBpZ25vcmVkIGJlY2F1c2UgbmdEZXZNb2RlIHdpbGwgYmUgc2V0IHRvIGZhbHNlXG4gICAgLy8gd2hlbiBvcHRpbWl6aW5nIGNvZGUgYW5kIHRoZSB3aG9sZSBpZiBzdGF0ZW1lbnQgd2lsbCBiZSBkcm9wcGVkLlxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby10b3BsZXZlbC1wcm9wZXJ0eS1hY2Nlc3NcbiAgICBPYmplY3QuZnJlZXplKEVNUFRZX09CSik7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXRvcGxldmVsLXByb3BlcnR5LWFjY2Vzc1xuICAgIE9iamVjdC5mcmVlemUoRU1QVFlfQVJSQVkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IE5HX0NPTVBfREVGID0gZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSh7IMm1Y21wOiBnZXRDbG9zdXJlU2FmZVByb3BlcnR5IH0pO1xuY29uc3QgTkdfRElSX0RFRiA9IGdldENsb3N1cmVTYWZlUHJvcGVydHkoeyDJtWRpcjogZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSB9KTtcbmNvbnN0IE5HX1BJUEVfREVGID0gZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSh7IMm1cGlwZTogZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSB9KTtcbmNvbnN0IE5HX01PRF9ERUYgPSBnZXRDbG9zdXJlU2FmZVByb3BlcnR5KHsgybVtb2Q6IGdldENsb3N1cmVTYWZlUHJvcGVydHkgfSk7XG5jb25zdCBOR19GQUNUT1JZX0RFRiA9IGdldENsb3N1cmVTYWZlUHJvcGVydHkoeyDJtWZhYzogZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSB9KTtcbi8qKlxuICogSWYgYSBkaXJlY3RpdmUgaXMgZGlQdWJsaWMsIGJsb29tQWRkIHNldHMgYSBwcm9wZXJ0eSBvbiB0aGUgdHlwZSB3aXRoIHRoaXMgY29uc3RhbnQgYXNcbiAqIHRoZSBrZXkgYW5kIHRoZSBkaXJlY3RpdmUncyB1bmlxdWUgSUQgYXMgdGhlIHZhbHVlLiBUaGlzIGFsbG93cyB1cyB0byBtYXAgZGlyZWN0aXZlcyB0byB0aGVpclxuICogYmxvb20gZmlsdGVyIGJpdCBmb3IgREkuXG4gKi9cbi8vIFRPRE8obWlza28pOiBUaGlzIGlzIHdyb25nLiBUaGUgTkdfRUxFTUVOVF9JRCBzaG91bGQgbmV2ZXIgYmUgbWluaWZpZWQuXG5jb25zdCBOR19FTEVNRU5UX0lEID0gZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSh7IF9fTkdfRUxFTUVOVF9JRF9fOiBnZXRDbG9zdXJlU2FmZVByb3BlcnR5IH0pO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmxldCBfcmVuZGVyQ29tcENvdW50ID0gMDtcbi8qKlxuICogQ3JlYXRlIGEgY29tcG9uZW50IGRlZmluaXRpb24gb2JqZWN0LlxuICpcbiAqXG4gKiAjIEV4YW1wbGVcbiAqIGBgYFxuICogY2xhc3MgTXlEaXJlY3RpdmUge1xuICogICAvLyBHZW5lcmF0ZWQgYnkgQW5ndWxhciBUZW1wbGF0ZSBDb21waWxlclxuICogICAvLyBbU3ltYm9sXSBzeW50YXggd2lsbCBub3QgYmUgc3VwcG9ydGVkIGJ5IFR5cGVTY3JpcHQgdW50aWwgdjIuN1xuICogICBzdGF0aWMgybVjbXAgPSBkZWZpbmVDb21wb25lbnQoe1xuICogICAgIC4uLlxuICogICB9KTtcbiAqIH1cbiAqIGBgYFxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWRlZmluZUNvbXBvbmVudChjb21wb25lbnREZWZpbml0aW9uKSB7XG4gICAgcmV0dXJuIG5vU2lkZUVmZmVjdHMoKCkgPT4ge1xuICAgICAgICAvLyBJbml0aWFsaXplIG5nRGV2TW9kZS4gVGhpcyBtdXN0IGJlIHRoZSBmaXJzdCBzdGF0ZW1lbnQgaW4gybXJtWRlZmluZUNvbXBvbmVudC5cbiAgICAgICAgLy8gU2VlIHRoZSBgaW5pdE5nRGV2TW9kZWAgZG9jc3RyaW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAgICAodHlwZW9mIG5nRGV2TW9kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmdEZXZNb2RlKSAmJiBpbml0TmdEZXZNb2RlKCk7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBjb21wb25lbnREZWZpbml0aW9uLnR5cGU7XG4gICAgICAgIGNvbnN0IGRlY2xhcmVkSW5wdXRzID0ge307XG4gICAgICAgIGNvbnN0IGRlZiA9IHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBwcm92aWRlcnNSZXNvbHZlcjogbnVsbCxcbiAgICAgICAgICAgIGRlY2xzOiBjb21wb25lbnREZWZpbml0aW9uLmRlY2xzLFxuICAgICAgICAgICAgdmFyczogY29tcG9uZW50RGVmaW5pdGlvbi52YXJzLFxuICAgICAgICAgICAgZmFjdG9yeTogbnVsbCxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBjb21wb25lbnREZWZpbml0aW9uLnRlbXBsYXRlIHx8IG51bGwsXG4gICAgICAgICAgICBjb25zdHM6IGNvbXBvbmVudERlZmluaXRpb24uY29uc3RzIHx8IG51bGwsXG4gICAgICAgICAgICBuZ0NvbnRlbnRTZWxlY3RvcnM6IGNvbXBvbmVudERlZmluaXRpb24ubmdDb250ZW50U2VsZWN0b3JzLFxuICAgICAgICAgICAgaG9zdEJpbmRpbmdzOiBjb21wb25lbnREZWZpbml0aW9uLmhvc3RCaW5kaW5ncyB8fCBudWxsLFxuICAgICAgICAgICAgaG9zdFZhcnM6IGNvbXBvbmVudERlZmluaXRpb24uaG9zdFZhcnMgfHwgMCxcbiAgICAgICAgICAgIGhvc3RBdHRyczogY29tcG9uZW50RGVmaW5pdGlvbi5ob3N0QXR0cnMgfHwgbnVsbCxcbiAgICAgICAgICAgIGNvbnRlbnRRdWVyaWVzOiBjb21wb25lbnREZWZpbml0aW9uLmNvbnRlbnRRdWVyaWVzIHx8IG51bGwsXG4gICAgICAgICAgICBkZWNsYXJlZElucHV0czogZGVjbGFyZWRJbnB1dHMsXG4gICAgICAgICAgICBpbnB1dHM6IG51bGwsXG4gICAgICAgICAgICBvdXRwdXRzOiBudWxsLFxuICAgICAgICAgICAgZXhwb3J0QXM6IGNvbXBvbmVudERlZmluaXRpb24uZXhwb3J0QXMgfHwgbnVsbCxcbiAgICAgICAgICAgIG9uUHVzaDogY29tcG9uZW50RGVmaW5pdGlvbi5jaGFuZ2VEZXRlY3Rpb24gPT09IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgIGRpcmVjdGl2ZURlZnM6IG51bGwsXG4gICAgICAgICAgICBwaXBlRGVmczogbnVsbCxcbiAgICAgICAgICAgIHNlbGVjdG9yczogY29tcG9uZW50RGVmaW5pdGlvbi5zZWxlY3RvcnMgfHwgRU1QVFlfQVJSQVksXG4gICAgICAgICAgICB2aWV3UXVlcnk6IGNvbXBvbmVudERlZmluaXRpb24udmlld1F1ZXJ5IHx8IG51bGwsXG4gICAgICAgICAgICBmZWF0dXJlczogY29tcG9uZW50RGVmaW5pdGlvbi5mZWF0dXJlcyB8fCBudWxsLFxuICAgICAgICAgICAgZGF0YTogY29tcG9uZW50RGVmaW5pdGlvbi5kYXRhIHx8IHt9LFxuICAgICAgICAgICAgZW5jYXBzdWxhdGlvbjogY29tcG9uZW50RGVmaW5pdGlvbi5lbmNhcHN1bGF0aW9uIHx8IFZpZXdFbmNhcHN1bGF0aW9uJDEuRW11bGF0ZWQsXG4gICAgICAgICAgICBpZDogJ2MnLFxuICAgICAgICAgICAgc3R5bGVzOiBjb21wb25lbnREZWZpbml0aW9uLnN0eWxlcyB8fCBFTVBUWV9BUlJBWSxcbiAgICAgICAgICAgIF86IG51bGwsXG4gICAgICAgICAgICBzZXRJbnB1dDogbnVsbCxcbiAgICAgICAgICAgIHNjaGVtYXM6IGNvbXBvbmVudERlZmluaXRpb24uc2NoZW1hcyB8fCBudWxsLFxuICAgICAgICAgICAgdFZpZXc6IG51bGwsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGRpcmVjdGl2ZVR5cGVzID0gY29tcG9uZW50RGVmaW5pdGlvbi5kaXJlY3RpdmVzO1xuICAgICAgICBjb25zdCBmZWF0dXJlID0gY29tcG9uZW50RGVmaW5pdGlvbi5mZWF0dXJlcztcbiAgICAgICAgY29uc3QgcGlwZVR5cGVzID0gY29tcG9uZW50RGVmaW5pdGlvbi5waXBlcztcbiAgICAgICAgZGVmLmlkICs9IF9yZW5kZXJDb21wQ291bnQrKztcbiAgICAgICAgZGVmLmlucHV0cyA9IGludmVydE9iamVjdChjb21wb25lbnREZWZpbml0aW9uLmlucHV0cywgZGVjbGFyZWRJbnB1dHMpLFxuICAgICAgICAgICAgZGVmLm91dHB1dHMgPSBpbnZlcnRPYmplY3QoY29tcG9uZW50RGVmaW5pdGlvbi5vdXRwdXRzKSxcbiAgICAgICAgICAgIGZlYXR1cmUgJiYgZmVhdHVyZS5mb3JFYWNoKChmbikgPT4gZm4oZGVmKSk7XG4gICAgICAgIGRlZi5kaXJlY3RpdmVEZWZzID0gZGlyZWN0aXZlVHlwZXMgP1xuICAgICAgICAgICAgKCkgPT4gKHR5cGVvZiBkaXJlY3RpdmVUeXBlcyA9PT0gJ2Z1bmN0aW9uJyA/IGRpcmVjdGl2ZVR5cGVzKCkgOiBkaXJlY3RpdmVUeXBlcylcbiAgICAgICAgICAgICAgICAubWFwKGV4dHJhY3REaXJlY3RpdmVEZWYpIDpcbiAgICAgICAgICAgIG51bGw7XG4gICAgICAgIGRlZi5waXBlRGVmcyA9IHBpcGVUeXBlcyA/XG4gICAgICAgICAgICAoKSA9PiAodHlwZW9mIHBpcGVUeXBlcyA9PT0gJ2Z1bmN0aW9uJyA/IHBpcGVUeXBlcygpIDogcGlwZVR5cGVzKS5tYXAoZXh0cmFjdFBpcGVEZWYpIDpcbiAgICAgICAgICAgIG51bGw7XG4gICAgICAgIHJldHVybiBkZWY7XG4gICAgfSk7XG59XG4vKipcbiAqIEdlbmVyYXRlZCBuZXh0IHRvIE5nTW9kdWxlcyB0byBtb25rZXktcGF0Y2ggZGlyZWN0aXZlIGFuZCBwaXBlIHJlZmVyZW5jZXMgb250byBhIGNvbXBvbmVudCdzXG4gKiBkZWZpbml0aW9uLCB3aGVuIGdlbmVyYXRpbmcgYSBkaXJlY3QgcmVmZXJlbmNlIGluIHRoZSBjb21wb25lbnQgZmlsZSB3b3VsZCBvdGhlcndpc2UgY3JlYXRlIGFuXG4gKiBpbXBvcnQgY3ljbGUuXG4gKlxuICogU2VlIFt0aGlzIGV4cGxhbmF0aW9uXShodHRwczovL2hhY2ttZC5pby9PZHc4MEQwcFI2eWZzT2pnXzdYQ0pnP3ZpZXcpIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXNldENvbXBvbmVudFNjb3BlKHR5cGUsIGRpcmVjdGl2ZXMsIHBpcGVzKSB7XG4gICAgY29uc3QgZGVmID0gdHlwZS7JtWNtcDtcbiAgICBkZWYuZGlyZWN0aXZlRGVmcyA9ICgpID0+IGRpcmVjdGl2ZXMubWFwKGV4dHJhY3REaXJlY3RpdmVEZWYpO1xuICAgIGRlZi5waXBlRGVmcyA9ICgpID0+IHBpcGVzLm1hcChleHRyYWN0UGlwZURlZik7XG59XG5mdW5jdGlvbiBleHRyYWN0RGlyZWN0aXZlRGVmKHR5cGUpIHtcbiAgICBjb25zdCBkZWYgPSBnZXRDb21wb25lbnREZWYodHlwZSkgfHwgZ2V0RGlyZWN0aXZlRGVmKHR5cGUpO1xuICAgIGlmIChuZ0Rldk1vZGUgJiYgIWRlZikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke3R5cGUubmFtZX0nIGlzIG5laXRoZXIgJ0NvbXBvbmVudFR5cGUnIG9yICdEaXJlY3RpdmVUeXBlJy5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZjtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RQaXBlRGVmKHR5cGUpIHtcbiAgICBjb25zdCBkZWYgPSBnZXRQaXBlRGVmJDEodHlwZSk7XG4gICAgaWYgKG5nRGV2TW9kZSAmJiAhZGVmKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJyR7dHlwZS5uYW1lfScgaXMgbm90IGEgJ1BpcGVUeXBlJy5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGRlZjtcbn1cbmNvbnN0IGF1dG9SZWdpc3Rlck1vZHVsZUJ5SWQgPSB7fTtcbi8qKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWRlZmluZU5nTW9kdWxlKGRlZikge1xuICAgIHJldHVybiBub1NpZGVFZmZlY3RzKCgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0ge1xuICAgICAgICAgICAgdHlwZTogZGVmLnR5cGUsXG4gICAgICAgICAgICBib290c3RyYXA6IGRlZi5ib290c3RyYXAgfHwgRU1QVFlfQVJSQVksXG4gICAgICAgICAgICBkZWNsYXJhdGlvbnM6IGRlZi5kZWNsYXJhdGlvbnMgfHwgRU1QVFlfQVJSQVksXG4gICAgICAgICAgICBpbXBvcnRzOiBkZWYuaW1wb3J0cyB8fCBFTVBUWV9BUlJBWSxcbiAgICAgICAgICAgIGV4cG9ydHM6IGRlZi5leHBvcnRzIHx8IEVNUFRZX0FSUkFZLFxuICAgICAgICAgICAgdHJhbnNpdGl2ZUNvbXBpbGVTY29wZXM6IG51bGwsXG4gICAgICAgICAgICBzY2hlbWFzOiBkZWYuc2NoZW1hcyB8fCBudWxsLFxuICAgICAgICAgICAgaWQ6IGRlZi5pZCB8fCBudWxsLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZGVmLmlkICE9IG51bGwpIHtcbiAgICAgICAgICAgIGF1dG9SZWdpc3Rlck1vZHVsZUJ5SWRbZGVmLmlkXSA9IGRlZi50eXBlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfSk7XG59XG4vKipcbiAqIEFkZHMgdGhlIG1vZHVsZSBtZXRhZGF0YSB0aGF0IGlzIG5lY2Vzc2FyeSB0byBjb21wdXRlIHRoZSBtb2R1bGUncyB0cmFuc2l0aXZlIHNjb3BlIHRvIGFuXG4gKiBleGlzdGluZyBtb2R1bGUgZGVmaW5pdGlvbi5cbiAqXG4gKiBTY29wZSBtZXRhZGF0YSBvZiBtb2R1bGVzIGlzIG5vdCB1c2VkIGluIHByb2R1Y3Rpb24gYnVpbGRzLCBzbyBjYWxscyB0byB0aGlzIGZ1bmN0aW9uIGNhbiBiZVxuICogbWFya2VkIHB1cmUgdG8gdHJlZS1zaGFrZSBpdCBmcm9tIHRoZSBidW5kbGUsIGFsbG93aW5nIGZvciBhbGwgcmVmZXJlbmNlZCBkZWNsYXJhdGlvbnNcbiAqIHRvIGJlY29tZSBlbGlnaWJsZSBmb3IgdHJlZS1zaGFraW5nIGFzIHdlbGwuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXNldE5nTW9kdWxlU2NvcGUodHlwZSwgc2NvcGUpIHtcbiAgICByZXR1cm4gbm9TaWRlRWZmZWN0cygoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5nTW9kdWxlRGVmID0gZ2V0TmdNb2R1bGVEZWYodHlwZSwgdHJ1ZSk7XG4gICAgICAgIG5nTW9kdWxlRGVmLmRlY2xhcmF0aW9ucyA9IHNjb3BlLmRlY2xhcmF0aW9ucyB8fCBFTVBUWV9BUlJBWTtcbiAgICAgICAgbmdNb2R1bGVEZWYuaW1wb3J0cyA9IHNjb3BlLmltcG9ydHMgfHwgRU1QVFlfQVJSQVk7XG4gICAgICAgIG5nTW9kdWxlRGVmLmV4cG9ydHMgPSBzY29wZS5leHBvcnRzIHx8IEVNUFRZX0FSUkFZO1xuICAgIH0pO1xufVxuLyoqXG4gKiBJbnZlcnRzIGFuIGlucHV0cyBvciBvdXRwdXRzIGxvb2t1cCBzdWNoIHRoYXQgdGhlIGtleXMsIHdoaWNoIHdlcmUgdGhlXG4gKiBtaW5pZmllZCBrZXlzLCBhcmUgcGFydCBvZiB0aGUgdmFsdWVzLCBhbmQgdGhlIHZhbHVlcyBhcmUgcGFyc2VkIHNvIHRoYXRcbiAqIHRoZSBwdWJsaWNOYW1lIG9mIHRoZSBwcm9wZXJ0eSBpcyB0aGUgbmV3IGtleVxuICpcbiAqIGUuZy4gZm9yXG4gKlxuICogYGBgXG4gKiBjbGFzcyBDb21wIHtcbiAqICAgQElucHV0KClcbiAqICAgcHJvcE5hbWUxOiBzdHJpbmc7XG4gKlxuICogICBASW5wdXQoJ3B1YmxpY05hbWUyJylcbiAqICAgZGVjbGFyZWRQcm9wTmFtZTI6IG51bWJlcjtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIHdpbGwgYmUgc2VyaWFsaXplZCBhc1xuICpcbiAqIGBgYFxuICoge1xuICogICBwcm9wTmFtZTE6ICdwcm9wTmFtZTEnLFxuICogICBkZWNsYXJlZFByb3BOYW1lMjogWydwdWJsaWNOYW1lMicsICdkZWNsYXJlZFByb3BOYW1lMiddLFxuICogfVxuICogYGBgXG4gKlxuICogd2hpY2ggaXMgdGhhbiB0cmFuc2xhdGVkIGJ5IHRoZSBtaW5pZmllciBhczpcbiAqXG4gKiBgYGBcbiAqIHtcbiAqICAgbWluaWZpZWRQcm9wTmFtZTE6ICdwcm9wTmFtZTEnLFxuICogICBtaW5pZmllZFByb3BOYW1lMjogWydwdWJsaWNOYW1lMicsICdkZWNsYXJlZFByb3BOYW1lMiddLFxuICogfVxuICogYGBgXG4gKlxuICogYmVjb21lczogKHB1YmxpYyBuYW1lID0+IG1pbmlmaWVkTmFtZSlcbiAqXG4gKiBgYGBcbiAqIHtcbiAqICAncHJvcE5hbWUxJzogJ21pbmlmaWVkUHJvcE5hbWUxJyxcbiAqICAncHVibGljTmFtZTInOiAnbWluaWZpZWRQcm9wTmFtZTInLFxuICogfVxuICogYGBgXG4gKlxuICogT3B0aW9uYWxseSB0aGUgZnVuY3Rpb24gY2FuIHRha2UgYHNlY29uZGFyeWAgd2hpY2ggd2lsbCByZXN1bHQgaW46IChwdWJsaWMgbmFtZSA9PiBkZWNsYXJlZCBuYW1lKVxuICpcbiAqIGBgYFxuICoge1xuICogICdwcm9wTmFtZTEnOiAncHJvcE5hbWUxJyxcbiAqICAncHVibGljTmFtZTInOiAnZGVjbGFyZWRQcm9wTmFtZTInLFxuICogfVxuICogYGBgXG4gKlxuXG4gKi9cbmZ1bmN0aW9uIGludmVydE9iamVjdChvYmosIHNlY29uZGFyeSkge1xuICAgIGlmIChvYmogPT0gbnVsbClcbiAgICAgICAgcmV0dXJuIEVNUFRZX09CSjtcbiAgICBjb25zdCBuZXdMb29rdXAgPSB7fTtcbiAgICBmb3IgKGNvbnN0IG1pbmlmaWVkS2V5IGluIG9iaikge1xuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KG1pbmlmaWVkS2V5KSkge1xuICAgICAgICAgICAgbGV0IHB1YmxpY05hbWUgPSBvYmpbbWluaWZpZWRLZXldO1xuICAgICAgICAgICAgbGV0IGRlY2xhcmVkTmFtZSA9IHB1YmxpY05hbWU7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwdWJsaWNOYW1lKSkge1xuICAgICAgICAgICAgICAgIGRlY2xhcmVkTmFtZSA9IHB1YmxpY05hbWVbMV07XG4gICAgICAgICAgICAgICAgcHVibGljTmFtZSA9IHB1YmxpY05hbWVbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdMb29rdXBbcHVibGljTmFtZV0gPSBtaW5pZmllZEtleTtcbiAgICAgICAgICAgIGlmIChzZWNvbmRhcnkpIHtcbiAgICAgICAgICAgICAgICAoc2Vjb25kYXJ5W3B1YmxpY05hbWVdID0gZGVjbGFyZWROYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3TG9va3VwO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3QuXG4gKlxuICogIyBFeGFtcGxlXG4gKiBgYGB0c1xuICogY2xhc3MgTXlEaXJlY3RpdmUge1xuICogICAvLyBHZW5lcmF0ZWQgYnkgQW5ndWxhciBUZW1wbGF0ZSBDb21waWxlclxuICogICAvLyBbU3ltYm9sXSBzeW50YXggd2lsbCBub3QgYmUgc3VwcG9ydGVkIGJ5IFR5cGVTY3JpcHQgdW50aWwgdjIuN1xuICogICBzdGF0aWMgybVkaXIgPSDJtcm1ZGVmaW5lRGlyZWN0aXZlKHtcbiAqICAgICAuLi5cbiAqICAgfSk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5jb25zdCDJtcm1ZGVmaW5lRGlyZWN0aXZlID0gybXJtWRlZmluZUNvbXBvbmVudDtcbi8qKlxuICogQ3JlYXRlIGEgcGlwZSBkZWZpbml0aW9uIG9iamVjdC5cbiAqXG4gKiAjIEV4YW1wbGVcbiAqIGBgYFxuICogY2xhc3MgTXlQaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XG4gKiAgIC8vIEdlbmVyYXRlZCBieSBBbmd1bGFyIFRlbXBsYXRlIENvbXBpbGVyXG4gKiAgIHN0YXRpYyDJtXBpcGUgPSBkZWZpbmVQaXBlKHtcbiAqICAgICAuLi5cbiAqICAgfSk7XG4gKiB9XG4gKiBgYGBcbiAqIEBwYXJhbSBwaXBlRGVmIFBpcGUgZGVmaW5pdGlvbiBnZW5lcmF0ZWQgYnkgdGhlIGNvbXBpbGVyXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWRlZmluZVBpcGUocGlwZURlZikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHBpcGVEZWYudHlwZSxcbiAgICAgICAgbmFtZTogcGlwZURlZi5uYW1lLFxuICAgICAgICBmYWN0b3J5OiBudWxsLFxuICAgICAgICBwdXJlOiBwaXBlRGVmLnB1cmUgIT09IGZhbHNlLFxuICAgICAgICBvbkRlc3Ryb3k6IHBpcGVEZWYudHlwZS5wcm90b3R5cGUubmdPbkRlc3Ryb3kgfHwgbnVsbFxuICAgIH07XG59XG4vKipcbiAqIFRoZSBmb2xsb3dpbmcgZ2V0dGVyIG1ldGhvZHMgcmV0cmlldmUgdGhlIGRlZmluaXRpb24gZnJvbSB0aGUgdHlwZS4gQ3VycmVudGx5IHRoZSByZXRyaWV2YWxcbiAqIGhvbm9ycyBpbmhlcml0YW5jZSwgYnV0IGluIHRoZSBmdXR1cmUgd2UgbWF5IGNoYW5nZSB0aGUgcnVsZSB0byByZXF1aXJlIHRoYXQgZGVmaW5pdGlvbnMgYXJlXG4gKiBleHBsaWNpdC4gVGhpcyB3b3VsZCByZXF1aXJlIHNvbWUgc29ydCBvZiBtaWdyYXRpb24gc3RyYXRlZ3kuXG4gKi9cbmZ1bmN0aW9uIGdldENvbXBvbmVudERlZih0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGVbTkdfQ09NUF9ERUZdIHx8IG51bGw7XG59XG5mdW5jdGlvbiBnZXREaXJlY3RpdmVEZWYodHlwZSkge1xuICAgIHJldHVybiB0eXBlW05HX0RJUl9ERUZdIHx8IG51bGw7XG59XG5mdW5jdGlvbiBnZXRQaXBlRGVmJDEodHlwZSkge1xuICAgIHJldHVybiB0eXBlW05HX1BJUEVfREVGXSB8fCBudWxsO1xufVxuZnVuY3Rpb24gZ2V0TmdNb2R1bGVEZWYodHlwZSwgdGhyb3dOb3RGb3VuZCkge1xuICAgIGNvbnN0IG5nTW9kdWxlRGVmID0gdHlwZVtOR19NT0RfREVGXSB8fCBudWxsO1xuICAgIGlmICghbmdNb2R1bGVEZWYgJiYgdGhyb3dOb3RGb3VuZCA9PT0gdHJ1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFR5cGUgJHtzdHJpbmdpZnkodHlwZSl9IGRvZXMgbm90IGhhdmUgJ8m1bW9kJyBwcm9wZXJ0eS5gKTtcbiAgICB9XG4gICAgcmV0dXJuIG5nTW9kdWxlRGVmO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8vIEJlbG93IGFyZSBjb25zdGFudHMgZm9yIExWaWV3IGluZGljZXMgdG8gaGVscCB1cyBsb29rIHVwIExWaWV3IG1lbWJlcnNcbi8vIHdpdGhvdXQgaGF2aW5nIHRvIHJlbWVtYmVyIHRoZSBzcGVjaWZpYyBpbmRpY2VzLlxuLy8gVWdsaWZ5IHdpbGwgaW5saW5lIHRoZXNlIHdoZW4gbWluaWZ5aW5nIHNvIHRoZXJlIHNob3VsZG4ndCBiZSBhIGNvc3QuXG5jb25zdCBIT1NUID0gMDtcbmNvbnN0IFRWSUVXID0gMTtcbmNvbnN0IEZMQUdTID0gMjtcbmNvbnN0IFBBUkVOVCA9IDM7XG5jb25zdCBORVhUID0gNDtcbmNvbnN0IFRSQU5TUExBTlRFRF9WSUVXU19UT19SRUZSRVNIID0gNTtcbmNvbnN0IFRfSE9TVCA9IDY7XG5jb25zdCBDTEVBTlVQID0gNztcbmNvbnN0IENPTlRFWFQgPSA4O1xuY29uc3QgSU5KRUNUT1IkMSA9IDk7XG5jb25zdCBSRU5ERVJFUl9GQUNUT1JZID0gMTA7XG5jb25zdCBSRU5ERVJFUiA9IDExO1xuY29uc3QgU0FOSVRJWkVSID0gMTI7XG5jb25zdCBDSElMRF9IRUFEID0gMTM7XG5jb25zdCBDSElMRF9UQUlMID0gMTQ7XG4vLyBGSVhNRShtaXNrbyk6IEludmVzdGlnYXRlIGlmIHRoZSB0aHJlZSBkZWNsYXJhdGlvbnMgYXJlbid0IGFsbCBzYW1lIHRoaW5nLlxuY29uc3QgREVDTEFSQVRJT05fVklFVyA9IDE1O1xuY29uc3QgREVDTEFSQVRJT05fQ09NUE9ORU5UX1ZJRVcgPSAxNjtcbmNvbnN0IERFQ0xBUkFUSU9OX0xDT05UQUlORVIgPSAxNztcbmNvbnN0IFBSRU9SREVSX0hPT0tfRkxBR1MgPSAxODtcbmNvbnN0IFFVRVJJRVMgPSAxOTtcbi8qKlxuICogU2l6ZSBvZiBMVmlldydzIGhlYWRlci4gTmVjZXNzYXJ5IHRvIGFkanVzdCBmb3IgaXQgd2hlbiBzZXR0aW5nIHNsb3RzLlxuICpcbiAqIElNUE9SVEFOVDogYEhFQURFUl9PRkZTRVRgIHNob3VsZCBvbmx5IGJlIHJlZmVycmVkIHRvIHRoZSBpbiB0aGUgYMm1ybUqYCBpbnN0cnVjdGlvbnMgdG8gdHJhbnNsYXRlXG4gKiBpbnN0cnVjdGlvbiBpbmRleCBpbnRvIGBMVmlld2AgaW5kZXguIEFsbCBvdGhlciBpbmRleGVzIHNob3VsZCBiZSBpbiB0aGUgYExWaWV3YCBpbmRleCBzcGFjZSBhbmRcbiAqIHRoZXJlIHNob3VsZCBiZSBubyBuZWVkIHRvIHJlZmVyIHRvIGBIRUFERVJfT0ZGU0VUYCBhbnl3aGVyZSBlbHNlLlxuICovXG5jb25zdCBIRUFERVJfT0ZGU0VUID0gMjA7XG4vKipcbiAqIENvbnZlcnRzIGBUVmlld1R5cGVgIGludG8gaHVtYW4gcmVhZGFibGUgdGV4dC5cbiAqIE1ha2Ugc3VyZSB0aGlzIG1hdGNoZXMgd2l0aCBgVFZpZXdUeXBlYFxuICovXG5jb25zdCBUVmlld1R5cGVBc1N0cmluZyA9IFtcbiAgICAnUm9vdCcsXG4gICAgJ0NvbXBvbmVudCcsXG4gICAgJ0VtYmVkZGVkJywgLy8gMlxuXTtcbi8vIE5vdGU6IFRoaXMgaGFjayBpcyBuZWNlc3Nhcnkgc28gd2UgZG9uJ3QgZXJyb25lb3VzbHkgZ2V0IGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuLy8gZmFpbHVyZSBiYXNlZCBvbiB0eXBlcy5cbmNvbnN0IHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkJDggPSAxO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogU3BlY2lhbCBsb2NhdGlvbiB3aGljaCBhbGxvd3MgZWFzeSBpZGVudGlmaWNhdGlvbiBvZiB0eXBlLiBJZiB3ZSBoYXZlIGFuIGFycmF5IHdoaWNoIHdhc1xuICogcmV0cmlldmVkIGZyb20gdGhlIGBMVmlld2AgYW5kIHRoYXQgYXJyYXkgaGFzIGB0cnVlYCBhdCBgVFlQRWAgbG9jYXRpb24sIHdlIGtub3cgaXQgaXNcbiAqIGBMQ29udGFpbmVyYC5cbiAqL1xuY29uc3QgVFlQRSA9IDE7XG4vKipcbiAqIEJlbG93IGFyZSBjb25zdGFudHMgZm9yIExDb250YWluZXIgaW5kaWNlcyB0byBoZWxwIHVzIGxvb2sgdXAgTENvbnRhaW5lciBtZW1iZXJzXG4gKiB3aXRob3V0IGhhdmluZyB0byByZW1lbWJlciB0aGUgc3BlY2lmaWMgaW5kaWNlcy5cbiAqIFVnbGlmeSB3aWxsIGlubGluZSB0aGVzZSB3aGVuIG1pbmlmeWluZyBzbyB0aGVyZSBzaG91bGRuJ3QgYmUgYSBjb3N0LlxuICovXG4vKipcbiAqIEZsYWcgdG8gc2lnbmlmeSB0aGF0IHRoaXMgYExDb250YWluZXJgIG1heSBoYXZlIHRyYW5zcGxhbnRlZCB2aWV3cyB3aGljaCBuZWVkIHRvIGJlIGNoYW5nZVxuICogZGV0ZWN0ZWQuIChzZWU6IGBMVmlld1tERUNMQVJBVElPTl9DT01QT05FTlRfVklFV10pYC5cbiAqXG4gKiBUaGlzIGZsYWcsIG9uY2Ugc2V0LCBpcyBuZXZlciB1bnNldCBmb3IgdGhlIGBMQ29udGFpbmVyYC4gVGhpcyBtZWFucyB0aGF0IHdoZW4gdW5zZXQgd2UgY2FuIHNraXBcbiAqIGEgbG90IG9mIHdvcmsgaW4gYHJlZnJlc2hFbWJlZGRlZFZpZXdzYC4gQnV0IHdoZW4gc2V0IHdlIHN0aWxsIG5lZWQgdG8gdmVyaWZ5XG4gKiB0aGF0IHRoZSBgTU9WRURfVklFV1NgIGFyZSB0cmFuc3BsYW50ZWQgYW5kIG9uLXB1c2guXG4gKi9cbmNvbnN0IEhBU19UUkFOU1BMQU5URURfVklFV1MgPSAyO1xuLy8gUEFSRU5ULCBORVhULCBUUkFOU1BMQU5URURfVklFV1NfVE9fUkVGUkVTSCBhcmUgaW5kaWNlcyAzLCA0LCBhbmQgNVxuLy8gQXMgd2UgYWxyZWFkeSBoYXZlIHRoZXNlIGNvbnN0YW50cyBpbiBMVmlldywgd2UgZG9uJ3QgbmVlZCB0byByZS1jcmVhdGUgdGhlbS5cbi8vIFRfSE9TVCBpcyBpbmRleCA2XG4vLyBXZSBhbHJlYWR5IGhhdmUgdGhpcyBjb25zdGFudHMgaW4gTFZpZXcsIHdlIGRvbid0IG5lZWQgdG8gcmUtY3JlYXRlIGl0LlxuY29uc3QgTkFUSVZFID0gNztcbmNvbnN0IFZJRVdfUkVGUyA9IDg7XG5jb25zdCBNT1ZFRF9WSUVXUyA9IDk7XG4vKipcbiAqIFNpemUgb2YgTENvbnRhaW5lcidzIGhlYWRlci4gUmVwcmVzZW50cyB0aGUgaW5kZXggYWZ0ZXIgd2hpY2ggYWxsIHZpZXdzIGluIHRoZVxuICogY29udGFpbmVyIHdpbGwgYmUgaW5zZXJ0ZWQuIFdlIG5lZWQgdG8ga2VlcCBhIHJlY29yZCBvZiBjdXJyZW50IHZpZXdzIHNvIHdlIGtub3dcbiAqIHdoaWNoIHZpZXdzIGFyZSBhbHJlYWR5IGluIHRoZSBET00gKGFuZCBkb24ndCBuZWVkIHRvIGJlIHJlLWFkZGVkKSBhbmQgc28gd2UgY2FuXG4gKiByZW1vdmUgdmlld3MgZnJvbSB0aGUgRE9NIHdoZW4gdGhleSBhcmUgbm8gbG9uZ2VyIHJlcXVpcmVkLlxuICovXG5jb25zdCBDT05UQUlORVJfSEVBREVSX09GRlNFVCA9IDEwO1xuLy8gTm90ZTogVGhpcyBoYWNrIGlzIG5lY2Vzc2FyeSBzbyB3ZSBkb24ndCBlcnJvbmVvdXNseSBnZXQgYSBjaXJjdWxhciBkZXBlbmRlbmN5XG4vLyBmYWlsdXJlIGJhc2VkIG9uIHR5cGVzLlxuY29uc3QgdW51c2VkVmFsdWVFeHBvcnRUb1BsYWNhdGVBamQkNyA9IDE7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBUcnVlIGlmIGB2YWx1ZWAgaXMgYExWaWV3YC5cbiAqIEBwYXJhbSB2YWx1ZSB3cmFwcGVkIHZhbHVlIG9mIGBSTm9kZWAsIGBMVmlld2AsIGBMQ29udGFpbmVyYFxuICovXG5mdW5jdGlvbiBpc0xWaWV3KHZhbHVlKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHR5cGVvZiB2YWx1ZVtUWVBFXSA9PT0gJ29iamVjdCc7XG59XG4vKipcbiAqIFRydWUgaWYgYHZhbHVlYCBpcyBgTENvbnRhaW5lcmAuXG4gKiBAcGFyYW0gdmFsdWUgd3JhcHBlZCB2YWx1ZSBvZiBgUk5vZGVgLCBgTFZpZXdgLCBgTENvbnRhaW5lcmBcbiAqL1xuZnVuY3Rpb24gaXNMQ29udGFpbmVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpICYmIHZhbHVlW1RZUEVdID09PSB0cnVlO1xufVxuZnVuY3Rpb24gaXNDb250ZW50UXVlcnlIb3N0KHROb2RlKSB7XG4gICAgcmV0dXJuICh0Tm9kZS5mbGFncyAmIDggLyogaGFzQ29udGVudFF1ZXJ5ICovKSAhPT0gMDtcbn1cbmZ1bmN0aW9uIGlzQ29tcG9uZW50SG9zdCh0Tm9kZSkge1xuICAgIHJldHVybiAodE5vZGUuZmxhZ3MgJiAyIC8qIGlzQ29tcG9uZW50SG9zdCAqLykgPT09IDIgLyogaXNDb21wb25lbnRIb3N0ICovO1xufVxuZnVuY3Rpb24gaXNEaXJlY3RpdmVIb3N0KHROb2RlKSB7XG4gICAgcmV0dXJuICh0Tm9kZS5mbGFncyAmIDEgLyogaXNEaXJlY3RpdmVIb3N0ICovKSA9PT0gMSAvKiBpc0RpcmVjdGl2ZUhvc3QgKi87XG59XG5mdW5jdGlvbiBpc0NvbXBvbmVudERlZihkZWYpIHtcbiAgICByZXR1cm4gZGVmLnRlbXBsYXRlICE9PSBudWxsO1xufVxuZnVuY3Rpb24gaXNSb290Vmlldyh0YXJnZXQpIHtcbiAgICByZXR1cm4gKHRhcmdldFtGTEFHU10gJiA1MTIgLyogSXNSb290ICovKSAhPT0gMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vLyBbQXNzZXJ0IGZ1bmN0aW9ucyBkbyBub3QgY29uc3RyYWludCB0eXBlIHdoZW4gdGhleSBhcmUgZ3VhcmRlZCBieSBhIHRydXRoeVxuLy8gZXhwcmVzc2lvbi5dKGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMzcyOTUpXG5mdW5jdGlvbiBhc3NlcnRUTm9kZUZvckxWaWV3KHROb2RlLCBsVmlldykge1xuICAgIGFzc2VydFROb2RlRm9yVFZpZXcodE5vZGUsIGxWaWV3W1RWSUVXXSk7XG59XG5mdW5jdGlvbiBhc3NlcnRUTm9kZUZvclRWaWV3KHROb2RlLCB0Vmlldykge1xuICAgIGFzc2VydFROb2RlKHROb2RlKTtcbiAgICB0Tm9kZS5oYXNPd25Qcm9wZXJ0eSgndFZpZXdfJykgJiZcbiAgICAgICAgYXNzZXJ0RXF1YWwodE5vZGUudFZpZXdfLCB0VmlldywgJ1RoaXMgVE5vZGUgZG9lcyBub3QgYmVsb25nIHRvIHRoaXMgVFZpZXcuJyk7XG59XG5mdW5jdGlvbiBhc3NlcnRUTm9kZSh0Tm9kZSkge1xuICAgIGFzc2VydERlZmluZWQodE5vZGUsICdUTm9kZSBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICBpZiAoISh0Tm9kZSAmJiB0eXBlb2YgdE5vZGUgPT09ICdvYmplY3QnICYmIHROb2RlLmhhc093blByb3BlcnR5KCdkaXJlY3RpdmVTdHlsaW5nTGFzdCcpKSkge1xuICAgICAgICB0aHJvd0Vycm9yKCdOb3Qgb2YgdHlwZSBUTm9kZSwgZ290OiAnICsgdE5vZGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydFRJY3UodEljdSkge1xuICAgIGFzc2VydERlZmluZWQodEljdSwgJ0V4cGVjdGVkIFRJY3UgdG8gYmUgZGVmaW5lZCcpO1xuICAgIGlmICghKHR5cGVvZiB0SWN1LmN1cnJlbnRDYXNlTFZpZXdJbmRleCA9PT0gJ251bWJlcicpKSB7XG4gICAgICAgIHRocm93RXJyb3IoJ09iamVjdCBpcyBub3Qgb2YgVEljdSB0eXBlLicpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydENvbXBvbmVudFR5cGUoYWN0dWFsLCBtc2cgPSAnVHlwZSBwYXNzZWQgaW4gaXMgbm90IENvbXBvbmVudFR5cGUsIGl0IGRvZXMgbm90IGhhdmUgXFwnybVjbXBcXCcgcHJvcGVydHkuJykge1xuICAgIGlmICghZ2V0Q29tcG9uZW50RGVmKGFjdHVhbCkpIHtcbiAgICAgICAgdGhyb3dFcnJvcihtc2cpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydE5nTW9kdWxlVHlwZShhY3R1YWwsIG1zZyA9ICdUeXBlIHBhc3NlZCBpbiBpcyBub3QgTmdNb2R1bGVUeXBlLCBpdCBkb2VzIG5vdCBoYXZlIFxcJ8m1bW9kXFwnIHByb3BlcnR5LicpIHtcbiAgICBpZiAoIWdldE5nTW9kdWxlRGVmKGFjdHVhbCkpIHtcbiAgICAgICAgdGhyb3dFcnJvcihtc2cpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydEN1cnJlbnRUTm9kZUlzUGFyZW50KGlzUGFyZW50KSB7XG4gICAgYXNzZXJ0RXF1YWwoaXNQYXJlbnQsIHRydWUsICdjdXJyZW50VE5vZGUgc2hvdWxkIGJlIGEgcGFyZW50Jyk7XG59XG5mdW5jdGlvbiBhc3NlcnRIYXNQYXJlbnQodE5vZGUpIHtcbiAgICBhc3NlcnREZWZpbmVkKHROb2RlLCAnY3VycmVudFROb2RlIHNob3VsZCBleGlzdCEnKTtcbiAgICBhc3NlcnREZWZpbmVkKHROb2RlLnBhcmVudCwgJ2N1cnJlbnRUTm9kZSBzaG91bGQgaGF2ZSBhIHBhcmVudCcpO1xufVxuZnVuY3Rpb24gYXNzZXJ0RGF0YU5leHQobFZpZXcsIGluZGV4LCBhcnIpIHtcbiAgICBpZiAoYXJyID09IG51bGwpXG4gICAgICAgIGFyciA9IGxWaWV3O1xuICAgIGFzc2VydEVxdWFsKGFyci5sZW5ndGgsIGluZGV4LCBgaW5kZXggJHtpbmRleH0gZXhwZWN0ZWQgdG8gYmUgYXQgdGhlIGVuZCBvZiBhcnIgKGxlbmd0aCAke2Fyci5sZW5ndGh9KWApO1xufVxuZnVuY3Rpb24gYXNzZXJ0TENvbnRhaW5lcih2YWx1ZSkge1xuICAgIGFzc2VydERlZmluZWQodmFsdWUsICdMQ29udGFpbmVyIG11c3QgYmUgZGVmaW5lZCcpO1xuICAgIGFzc2VydEVxdWFsKGlzTENvbnRhaW5lcih2YWx1ZSksIHRydWUsICdFeHBlY3RpbmcgTENvbnRhaW5lcicpO1xufVxuZnVuY3Rpb24gYXNzZXJ0TFZpZXdPclVuZGVmaW5lZCh2YWx1ZSkge1xuICAgIHZhbHVlICYmIGFzc2VydEVxdWFsKGlzTFZpZXcodmFsdWUpLCB0cnVlLCAnRXhwZWN0aW5nIExWaWV3IG9yIHVuZGVmaW5lZCBvciBudWxsJyk7XG59XG5mdW5jdGlvbiBhc3NlcnRMVmlldyh2YWx1ZSkge1xuICAgIGFzc2VydERlZmluZWQodmFsdWUsICdMVmlldyBtdXN0IGJlIGRlZmluZWQnKTtcbiAgICBhc3NlcnRFcXVhbChpc0xWaWV3KHZhbHVlKSwgdHJ1ZSwgJ0V4cGVjdGluZyBMVmlldycpO1xufVxuZnVuY3Rpb24gYXNzZXJ0Rmlyc3RDcmVhdGVQYXNzKHRWaWV3LCBlcnJNZXNzYWdlKSB7XG4gICAgYXNzZXJ0RXF1YWwodFZpZXcuZmlyc3RDcmVhdGVQYXNzLCB0cnVlLCBlcnJNZXNzYWdlIHx8ICdTaG91bGQgb25seSBiZSBjYWxsZWQgaW4gZmlyc3QgY3JlYXRlIHBhc3MuJyk7XG59XG5mdW5jdGlvbiBhc3NlcnRGaXJzdFVwZGF0ZVBhc3ModFZpZXcsIGVyck1lc3NhZ2UpIHtcbiAgICBhc3NlcnRFcXVhbCh0Vmlldy5maXJzdFVwZGF0ZVBhc3MsIHRydWUsIGVyck1lc3NhZ2UgfHwgJ1Nob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiBmaXJzdCB1cGRhdGUgcGFzcy4nKTtcbn1cbi8qKlxuICogVGhpcyBpcyBhIGJhc2ljIHNhbml0eSBjaGVjayB0aGF0IGFuIG9iamVjdCBpcyBwcm9iYWJseSBhIGRpcmVjdGl2ZSBkZWYuIERpcmVjdGl2ZURlZiBpc1xuICogYW4gaW50ZXJmYWNlLCBzbyB3ZSBjYW4ndCBkbyBhIGRpcmVjdCBpbnN0YW5jZW9mIGNoZWNrLlxuICovXG5mdW5jdGlvbiBhc3NlcnREaXJlY3RpdmVEZWYob2JqKSB7XG4gICAgaWYgKG9iai50eXBlID09PSB1bmRlZmluZWQgfHwgb2JqLnNlbGVjdG9ycyA9PSB1bmRlZmluZWQgfHwgb2JqLmlucHV0cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93RXJyb3IoYEV4cGVjdGVkIGEgRGlyZWN0aXZlRGVmL0NvbXBvbmVudERlZiBhbmQgdGhpcyBvYmplY3QgZG9lcyBub3Qgc2VlbSB0byBoYXZlIHRoZSBleHBlY3RlZCBzaGFwZS5gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBhc3NlcnRJbmRleEluRGVjbFJhbmdlKGxWaWV3LCBpbmRleCkge1xuICAgIGNvbnN0IHRWaWV3ID0gbFZpZXdbMV07XG4gICAgYXNzZXJ0QmV0d2VlbihIRUFERVJfT0ZGU0VULCB0Vmlldy5iaW5kaW5nU3RhcnRJbmRleCwgaW5kZXgpO1xufVxuZnVuY3Rpb24gYXNzZXJ0SW5kZXhJblZhcnNSYW5nZShsVmlldywgaW5kZXgpIHtcbiAgICBjb25zdCB0VmlldyA9IGxWaWV3WzFdO1xuICAgIGFzc2VydEJldHdlZW4odFZpZXcuYmluZGluZ1N0YXJ0SW5kZXgsIHRWaWV3LmV4cGFuZG9TdGFydEluZGV4LCBpbmRleCk7XG59XG5mdW5jdGlvbiBhc3NlcnRJbmRleEluRXhwYW5kb1JhbmdlKGxWaWV3LCBpbmRleCkge1xuICAgIGNvbnN0IHRWaWV3ID0gbFZpZXdbMV07XG4gICAgYXNzZXJ0QmV0d2Vlbih0Vmlldy5leHBhbmRvU3RhcnRJbmRleCwgbFZpZXcubGVuZ3RoLCBpbmRleCk7XG59XG5mdW5jdGlvbiBhc3NlcnRCZXR3ZWVuKGxvd2VyLCB1cHBlciwgaW5kZXgpIHtcbiAgICBpZiAoIShsb3dlciA8PSBpbmRleCAmJiBpbmRleCA8IHVwcGVyKSkge1xuICAgICAgICB0aHJvd0Vycm9yKGBJbmRleCBvdXQgb2YgcmFuZ2UgKGV4cGVjdGluZyAke2xvd2VyfSA8PSAke2luZGV4fSA8ICR7dXBwZXJ9KWApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFzc2VydFByb2plY3Rpb25TbG90cyhsVmlldywgZXJyTWVzc2FnZSkge1xuICAgIGFzc2VydERlZmluZWQobFZpZXdbREVDTEFSQVRJT05fQ09NUE9ORU5UX1ZJRVddLCAnQ29tcG9uZW50IHZpZXdzIHNob3VsZCBleGlzdC4nKTtcbiAgICBhc3NlcnREZWZpbmVkKGxWaWV3W0RFQ0xBUkFUSU9OX0NPTVBPTkVOVF9WSUVXXVtUX0hPU1RdLnByb2plY3Rpb24sIGVyck1lc3NhZ2UgfHxcbiAgICAgICAgJ0NvbXBvbmVudHMgd2l0aCBwcm9qZWN0aW9uIG5vZGVzICg8bmctY29udGVudD4pIG11c3QgaGF2ZSBwcm9qZWN0aW9uIHNsb3RzIGRlZmluZWQuJyk7XG59XG5mdW5jdGlvbiBhc3NlcnRQYXJlbnRWaWV3KGxWaWV3LCBlcnJNZXNzYWdlKSB7XG4gICAgYXNzZXJ0RGVmaW5lZChsVmlldywgZXJyTWVzc2FnZSB8fCAnQ29tcG9uZW50IHZpZXdzIHNob3VsZCBhbHdheXMgaGF2ZSBhIHBhcmVudCB2aWV3IChjb21wb25lbnRcXCdzIGhvc3QgdmlldyknKTtcbn1cbi8qKlxuICogVGhpcyBpcyBhIGJhc2ljIHNhbml0eSBjaGVjayB0aGF0IHRoZSBgaW5qZWN0b3JJbmRleGAgc2VlbXMgdG8gcG9pbnQgdG8gd2hhdCBsb29rcyBsaWtlIGFcbiAqIE5vZGVJbmplY3RvciBkYXRhIHN0cnVjdHVyZS5cbiAqXG4gKiBAcGFyYW0gbFZpZXcgYExWaWV3YCB3aGljaCBzaG91bGQgYmUgY2hlY2tlZC5cbiAqIEBwYXJhbSBpbmplY3RvckluZGV4IGluZGV4IGludG8gdGhlIGBMVmlld2Agd2hlcmUgdGhlIGBOb2RlSW5qZWN0b3JgIGlzIGV4cGVjdGVkLlxuICovXG5mdW5jdGlvbiBhc3NlcnROb2RlSW5qZWN0b3IobFZpZXcsIGluamVjdG9ySW5kZXgpIHtcbiAgICBhc3NlcnRJbmRleEluRXhwYW5kb1JhbmdlKGxWaWV3LCBpbmplY3RvckluZGV4KTtcbiAgICBhc3NlcnRJbmRleEluRXhwYW5kb1JhbmdlKGxWaWV3LCBpbmplY3RvckluZGV4ICsgOCAvKiBQQVJFTlQgKi8pO1xuICAgIGFzc2VydE51bWJlcihsVmlld1tpbmplY3RvckluZGV4ICsgMF0sICdpbmplY3RvckluZGV4IHNob3VsZCBwb2ludCB0byBhIGJsb29tIGZpbHRlcicpO1xuICAgIGFzc2VydE51bWJlcihsVmlld1tpbmplY3RvckluZGV4ICsgMV0sICdpbmplY3RvckluZGV4IHNob3VsZCBwb2ludCB0byBhIGJsb29tIGZpbHRlcicpO1xuICAgIGFzc2VydE51bWJlcihsVmlld1tpbmplY3RvckluZGV4ICsgMl0sICdpbmplY3RvckluZGV4IHNob3VsZCBwb2ludCB0byBhIGJsb29tIGZpbHRlcicpO1xuICAgIGFzc2VydE51bWJlcihsVmlld1tpbmplY3RvckluZGV4ICsgM10sICdpbmplY3RvckluZGV4IHNob3VsZCBwb2ludCB0byBhIGJsb29tIGZpbHRlcicpO1xuICAgIGFzc2VydE51bWJlcihsVmlld1tpbmplY3RvckluZGV4ICsgNF0sICdpbmplY3RvckluZGV4IHNob3VsZCBwb2ludCB0byBhIGJsb29tIGZpbHRlcicpO1xuICAgIGFzc2VydE51bWJlcihsVmlld1tpbmplY3RvckluZGV4ICsgNV0sICdpbmplY3RvckluZGV4IHNob3VsZCBwb2ludCB0byBhIGJsb29tIGZpbHRlcicpO1xuICAgIGFzc2VydE51bWJlcihsVmlld1tpbmplY3RvckluZGV4ICsgNl0sICdpbmplY3RvckluZGV4IHNob3VsZCBwb2ludCB0byBhIGJsb29tIGZpbHRlcicpO1xuICAgIGFzc2VydE51bWJlcihsVmlld1tpbmplY3RvckluZGV4ICsgN10sICdpbmplY3RvckluZGV4IHNob3VsZCBwb2ludCB0byBhIGJsb29tIGZpbHRlcicpO1xuICAgIGFzc2VydE51bWJlcihsVmlld1tpbmplY3RvckluZGV4ICsgOCAvKiBQQVJFTlQgKi9dLCAnaW5qZWN0b3JJbmRleCBzaG91bGQgcG9pbnQgdG8gcGFyZW50IGluamVjdG9yJyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gZ2V0RmFjdG9yeURlZih0eXBlLCB0aHJvd05vdEZvdW5kKSB7XG4gICAgY29uc3QgaGFzRmFjdG9yeURlZiA9IHR5cGUuaGFzT3duUHJvcGVydHkoTkdfRkFDVE9SWV9ERUYpO1xuICAgIGlmICghaGFzRmFjdG9yeURlZiAmJiB0aHJvd05vdEZvdW5kID09PSB0cnVlICYmIG5nRGV2TW9kZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFR5cGUgJHtzdHJpbmdpZnkodHlwZSl9IGRvZXMgbm90IGhhdmUgJ8m1ZmFjJyBwcm9wZXJ0eS5gKTtcbiAgICB9XG4gICAgcmV0dXJuIGhhc0ZhY3RvcnlEZWYgPyB0eXBlW05HX0ZBQ1RPUllfREVGXSA6IG51bGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgYmFzaWMgY2hhbmdlIGZyb20gYSBwcmV2aW91cyB0byBhIG5ldyB2YWx1ZSBmb3IgYSBzaW5nbGVcbiAqIHByb3BlcnR5IG9uIGEgZGlyZWN0aXZlIGluc3RhbmNlLiBQYXNzZWQgYXMgYSB2YWx1ZSBpbiBhXG4gKiB7QGxpbmsgU2ltcGxlQ2hhbmdlc30gb2JqZWN0IHRvIHRoZSBgbmdPbkNoYW5nZXNgIGhvb2suXG4gKlxuICogQHNlZSBgT25DaGFuZ2VzYFxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgU2ltcGxlQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUsIGZpcnN0Q2hhbmdlKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHByZXZpb3VzVmFsdWU7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gY3VycmVudFZhbHVlO1xuICAgICAgICB0aGlzLmZpcnN0Q2hhbmdlID0gZmlyc3RDaGFuZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIHdoZXRoZXIgdGhlIG5ldyB2YWx1ZSBpcyB0aGUgZmlyc3QgdmFsdWUgYXNzaWduZWQuXG4gICAgICovXG4gICAgaXNGaXJzdENoYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RDaGFuZ2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVGhlIE5nT25DaGFuZ2VzRmVhdHVyZSBkZWNvcmF0ZXMgYSBjb21wb25lbnQgd2l0aCBzdXBwb3J0IGZvciB0aGUgbmdPbkNoYW5nZXNcbiAqIGxpZmVjeWNsZSBob29rLCBzbyBpdCBzaG91bGQgYmUgaW5jbHVkZWQgaW4gYW55IGNvbXBvbmVudCB0aGF0IGltcGxlbWVudHNcbiAqIHRoYXQgaG9vay5cbiAqXG4gKiBJZiB0aGUgY29tcG9uZW50IG9yIGRpcmVjdGl2ZSB1c2VzIGluaGVyaXRhbmNlLCB0aGUgTmdPbkNoYW5nZXNGZWF0dXJlIE1VU1RcbiAqIGJlIGluY2x1ZGVkIGFzIGEgZmVhdHVyZSBBRlRFUiB7QGxpbmsgSW5oZXJpdERlZmluaXRpb25GZWF0dXJlfSwgb3RoZXJ3aXNlXG4gKiBpbmhlcml0ZWQgcHJvcGVydGllcyB3aWxsIG5vdCBiZSBwcm9wYWdhdGVkIHRvIHRoZSBuZ09uQ2hhbmdlcyBsaWZlY3ljbGVcbiAqIGhvb2suXG4gKlxuICogRXhhbXBsZSB1c2FnZTpcbiAqXG4gKiBgYGBcbiAqIHN0YXRpYyDJtWNtcCA9IGRlZmluZUNvbXBvbmVudCh7XG4gKiAgIC4uLlxuICogICBpbnB1dHM6IHtuYW1lOiAncHVibGljTmFtZSd9LFxuICogICBmZWF0dXJlczogW05nT25DaGFuZ2VzRmVhdHVyZV1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtU5nT25DaGFuZ2VzRmVhdHVyZSgpIHtcbiAgICByZXR1cm4gTmdPbkNoYW5nZXNGZWF0dXJlSW1wbDtcbn1cbmZ1bmN0aW9uIE5nT25DaGFuZ2VzRmVhdHVyZUltcGwoZGVmaW5pdGlvbikge1xuICAgIGlmIChkZWZpbml0aW9uLnR5cGUucHJvdG90eXBlLm5nT25DaGFuZ2VzKSB7XG4gICAgICAgIGRlZmluaXRpb24uc2V0SW5wdXQgPSBuZ09uQ2hhbmdlc1NldElucHV0O1xuICAgIH1cbiAgICByZXR1cm4gcmVtZW1iZXJDaGFuZ2VIaXN0b3J5QW5kSW52b2tlT25DaGFuZ2VzSG9vaztcbn1cbi8vIFRoaXMgb3B0aW9uIGVuc3VyZXMgdGhhdCB0aGUgbmdPbkNoYW5nZXMgbGlmZWN5Y2xlIGhvb2sgd2lsbCBiZSBpbmhlcml0ZWRcbi8vIGZyb20gc3VwZXJjbGFzc2VzIChpbiBJbmhlcml0RGVmaW5pdGlvbkZlYXR1cmUpLlxuLyoqIEBub2NvbGxhcHNlICovXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tdG9wbGV2ZWwtcHJvcGVydHktYWNjZXNzXG7Jtcm1TmdPbkNoYW5nZXNGZWF0dXJlLm5nSW5oZXJpdCA9IHRydWU7XG4vKipcbiAqIFRoaXMgaXMgYSBzeW50aGV0aWMgbGlmZWN5Y2xlIGhvb2sgd2hpY2ggZ2V0cyBpbnNlcnRlZCBpbnRvIGBUVmlldy5wcmVPcmRlckhvb2tzYCB0byBzaW11bGF0ZVxuICogYG5nT25DaGFuZ2VzYC5cbiAqXG4gKiBUaGUgaG9vayByZWFkcyB0aGUgYE5nU2ltcGxlQ2hhbmdlc1N0b3JlYCBkYXRhIGZyb20gdGhlIGNvbXBvbmVudCBpbnN0YW5jZSBhbmQgaWYgY2hhbmdlcyBhcmVcbiAqIGZvdW5kIGl0IGludm9rZXMgYG5nT25DaGFuZ2VzYCBvbiB0aGUgY29tcG9uZW50IGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB0aGlzIENvbXBvbmVudCBpbnN0YW5jZS4gQmVjYXVzZSB0aGlzIGZ1bmN0aW9uIGdldHMgaW5zZXJ0ZWQgaW50byBgVFZpZXcucHJlT3JkZXJIb29rc2AsXG4gKiAgICAgaXQgaXMgZ3VhcmFudGVlZCB0byBiZSBjYWxsZWQgd2l0aCBjb21wb25lbnQgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIHJlbWVtYmVyQ2hhbmdlSGlzdG9yeUFuZEludm9rZU9uQ2hhbmdlc0hvb2soKSB7XG4gICAgY29uc3Qgc2ltcGxlQ2hhbmdlc1N0b3JlID0gZ2V0U2ltcGxlQ2hhbmdlc1N0b3JlKHRoaXMpO1xuICAgIGNvbnN0IGN1cnJlbnQgPSBzaW1wbGVDaGFuZ2VzU3RvcmU/LmN1cnJlbnQ7XG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXMgPSBzaW1wbGVDaGFuZ2VzU3RvcmUucHJldmlvdXM7XG4gICAgICAgIGlmIChwcmV2aW91cyA9PT0gRU1QVFlfT0JKKSB7XG4gICAgICAgICAgICBzaW1wbGVDaGFuZ2VzU3RvcmUucHJldmlvdXMgPSBjdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTmV3IGNoYW5nZXMgYXJlIGNvcGllZCB0byB0aGUgcHJldmlvdXMgc3RvcmUsIHNvIHRoYXQgd2UgZG9uJ3QgbG9zZSBoaXN0b3J5IGZvciBpbnB1dHNcbiAgICAgICAgICAgIC8vIHdoaWNoIHdlcmUgbm90IGNoYW5nZWQgdGhpcyB0aW1lXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gY3VycmVudCkge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzW2tleV0gPSBjdXJyZW50W2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2ltcGxlQ2hhbmdlc1N0b3JlLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLm5nT25DaGFuZ2VzKGN1cnJlbnQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5nT25DaGFuZ2VzU2V0SW5wdXQoaW5zdGFuY2UsIHZhbHVlLCBwdWJsaWNOYW1lLCBwcml2YXRlTmFtZSkge1xuICAgIGNvbnN0IHNpbXBsZUNoYW5nZXNTdG9yZSA9IGdldFNpbXBsZUNoYW5nZXNTdG9yZShpbnN0YW5jZSkgfHxcbiAgICAgICAgc2V0U2ltcGxlQ2hhbmdlc1N0b3JlKGluc3RhbmNlLCB7IHByZXZpb3VzOiBFTVBUWV9PQkosIGN1cnJlbnQ6IG51bGwgfSk7XG4gICAgY29uc3QgY3VycmVudCA9IHNpbXBsZUNoYW5nZXNTdG9yZS5jdXJyZW50IHx8IChzaW1wbGVDaGFuZ2VzU3RvcmUuY3VycmVudCA9IHt9KTtcbiAgICBjb25zdCBwcmV2aW91cyA9IHNpbXBsZUNoYW5nZXNTdG9yZS5wcmV2aW91cztcbiAgICBjb25zdCBkZWNsYXJlZE5hbWUgPSB0aGlzLmRlY2xhcmVkSW5wdXRzW3B1YmxpY05hbWVdO1xuICAgIGNvbnN0IHByZXZpb3VzQ2hhbmdlID0gcHJldmlvdXNbZGVjbGFyZWROYW1lXTtcbiAgICBjdXJyZW50W2RlY2xhcmVkTmFtZV0gPSBuZXcgU2ltcGxlQ2hhbmdlKHByZXZpb3VzQ2hhbmdlICYmIHByZXZpb3VzQ2hhbmdlLmN1cnJlbnRWYWx1ZSwgdmFsdWUsIHByZXZpb3VzID09PSBFTVBUWV9PQkopO1xuICAgIGluc3RhbmNlW3ByaXZhdGVOYW1lXSA9IHZhbHVlO1xufVxuY29uc3QgU0lNUExFX0NIQU5HRVNfU1RPUkUgPSAnX19uZ1NpbXBsZUNoYW5nZXNfXyc7XG5mdW5jdGlvbiBnZXRTaW1wbGVDaGFuZ2VzU3RvcmUoaW5zdGFuY2UpIHtcbiAgICByZXR1cm4gaW5zdGFuY2VbU0lNUExFX0NIQU5HRVNfU1RPUkVdIHx8IG51bGw7XG59XG5mdW5jdGlvbiBzZXRTaW1wbGVDaGFuZ2VzU3RvcmUoaW5zdGFuY2UsIHN0b3JlKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlW1NJTVBMRV9DSEFOR0VTX1NUT1JFXSA9IHN0b3JlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmxldCBwcm9maWxlckNhbGxiYWNrID0gbnVsbDtcbi8qKlxuICogU2V0cyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hpY2ggd2lsbCBiZSBpbnZva2VkIGJlZm9yZSBhbmQgYWZ0ZXIgcGVyZm9ybWluZyBjZXJ0YWluIGFjdGlvbnMgYXRcbiAqIHJ1bnRpbWUgKGZvciBleGFtcGxlLCBiZWZvcmUgYW5kIGFmdGVyIHJ1bm5pbmcgY2hhbmdlIGRldGVjdGlvbikuXG4gKlxuICogV2FybmluZzogdGhpcyBmdW5jdGlvbiBpcyAqSU5URVJOQUwqIGFuZCBzaG91bGQgbm90IGJlIHJlbGllZCB1cG9uIGluIGFwcGxpY2F0aW9uJ3MgY29kZS5cbiAqIFRoZSBjb250cmFjdCBvZiB0aGUgZnVuY3Rpb24gbWlnaHQgYmUgY2hhbmdlZCBpbiBhbnkgcmVsZWFzZSBhbmQvb3IgdGhlIGZ1bmN0aW9uIGNhbiBiZSByZW1vdmVkXG4gKiBjb21wbGV0ZWx5LlxuICpcbiAqIEBwYXJhbSBwcm9maWxlciBmdW5jdGlvbiBwcm92aWRlZCBieSB0aGUgY2FsbGVyIG9yIG51bGwgdmFsdWUgdG8gZGlzYWJsZSBwcm9maWxpbmcuXG4gKi9cbmNvbnN0IHNldFByb2ZpbGVyID0gKHByb2ZpbGVyKSA9PiB7XG4gICAgcHJvZmlsZXJDYWxsYmFjayA9IHByb2ZpbGVyO1xufTtcbi8qKlxuICogUHJvZmlsZXIgZnVuY3Rpb24gd2hpY2ggd3JhcHMgdXNlciBjb2RlIGV4ZWN1dGVkIGJ5IHRoZSBydW50aW1lLlxuICpcbiAqIEBwYXJhbSBldmVudCBQcm9maWxlckV2ZW50IGNvcnJlc3BvbmRpbmcgdG8gdGhlIGV4ZWN1dGlvbiBjb250ZXh0XG4gKiBAcGFyYW0gaW5zdGFuY2UgY29tcG9uZW50IGluc3RhbmNlXG4gKiBAcGFyYW0gaG9va09yTGlzdGVuZXIgbGlmZWN5Y2xlIGhvb2sgZnVuY3Rpb24gb3Igb3V0cHV0IGxpc3RlbmVyLiBUaGUgdmFsdWUgZGVwZW5kcyBvbiB0aGVcbiAqICBleGVjdXRpb24gY29udGV4dFxuICogQHJldHVybnNcbiAqL1xuY29uc3QgcHJvZmlsZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGluc3RhbmNlLCBob29rT3JMaXN0ZW5lcikge1xuICAgIGlmIChwcm9maWxlckNhbGxiYWNrICE9IG51bGwgLyogYm90aCBgbnVsbGAgYW5kIGB1bmRlZmluZWRgICovKSB7XG4gICAgICAgIHByb2ZpbGVyQ2FsbGJhY2soZXZlbnQsIGluc3RhbmNlLCBob29rT3JMaXN0ZW5lcik7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5jb25zdCBTVkdfTkFNRVNQQUNFID0gJ3N2Zyc7XG5jb25zdCBTVkdfTkFNRVNQQUNFX1VSSSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG5jb25zdCBNQVRIX01MX05BTUVTUEFDRSA9ICdtYXRoJztcbmNvbnN0IE1BVEhfTUxfTkFNRVNQQUNFX1VSSSA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk4L01hdGhNTC8nO1xuZnVuY3Rpb24gZ2V0TmFtZXNwYWNlVXJpKG5hbWVzcGFjZSkge1xuICAgIGNvbnN0IG5hbWUgPSBuYW1lc3BhY2UudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbmFtZSA9PT0gU1ZHX05BTUVTUEFDRSA/IFNWR19OQU1FU1BBQ0VfVVJJIDpcbiAgICAgICAgKG5hbWUgPT09IE1BVEhfTUxfTkFNRVNQQUNFID8gTUFUSF9NTF9OQU1FU1BBQ0VfVVJJIDogbnVsbCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBNb3N0IG9mIHRoZSB1c2Ugb2YgYGRvY3VtZW50YCBpbiBBbmd1bGFyIGlzIGZyb20gd2l0aGluIHRoZSBESSBzeXN0ZW0gc28gaXQgaXMgcG9zc2libGUgdG8gc2ltcGx5XG4gKiBpbmplY3QgdGhlIGBET0NVTUVOVGAgdG9rZW4gYW5kIGFyZSBkb25lLlxuICpcbiAqIEl2eSBpcyBzcGVjaWFsIGJlY2F1c2UgaXQgZG9lcyBub3QgcmVseSB1cG9uIHRoZSBESSBhbmQgbXVzdCBnZXQgaG9sZCBvZiB0aGUgZG9jdW1lbnQgc29tZSBvdGhlclxuICogd2F5LlxuICpcbiAqIFRoZSBzb2x1dGlvbiBpcyB0byBkZWZpbmUgYGdldERvY3VtZW50KClgIGFuZCBgc2V0RG9jdW1lbnQoKWAgdG9wLWxldmVsIGZ1bmN0aW9ucyBmb3IgaXZ5LlxuICogV2hlcmV2ZXIgaXZ5IG5lZWRzIHRoZSBnbG9iYWwgZG9jdW1lbnQsIGl0IGNhbGxzIGBnZXREb2N1bWVudCgpYCBpbnN0ZWFkLlxuICpcbiAqIFdoZW4gcnVubmluZyBpdnkgb3V0c2lkZSBvZiBhIGJyb3dzZXIgZW52aXJvbm1lbnQsIGl0IGlzIG5lY2Vzc2FyeSB0byBjYWxsIGBzZXREb2N1bWVudCgpYCB0b1xuICogdGVsbCBpdnkgd2hhdCB0aGUgZ2xvYmFsIGBkb2N1bWVudGAgaXMuXG4gKlxuICogQW5ndWxhciBkb2VzIHRoaXMgZm9yIHVzIGluIGVhY2ggb2YgdGhlIHN0YW5kYXJkIHBsYXRmb3JtcyAoYEJyb3dzZXJgLCBgU2VydmVyYCwgYW5kIGBXZWJXb3JrZXJgKVxuICogYnkgY2FsbGluZyBgc2V0RG9jdW1lbnQoKWAgd2hlbiBwcm92aWRpbmcgdGhlIGBET0NVTUVOVGAgdG9rZW4uXG4gKi9cbmxldCBET0NVTUVOVCA9IHVuZGVmaW5lZDtcbi8qKlxuICogVGVsbCBpdnkgd2hhdCB0aGUgYGRvY3VtZW50YCBpcyBmb3IgdGhpcyBwbGF0Zm9ybS5cbiAqXG4gKiBJdCBpcyBvbmx5IG5lY2Vzc2FyeSB0byBjYWxsIHRoaXMgaWYgdGhlIGN1cnJlbnQgcGxhdGZvcm0gaXMgbm90IGEgYnJvd3Nlci5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGdsb2JhbCBgZG9jdW1lbnRgIGluIHRoaXMgZW52aXJvbm1lbnQuXG4gKi9cbmZ1bmN0aW9uIHNldERvY3VtZW50KGRvY3VtZW50KSB7XG4gICAgRE9DVU1FTlQgPSBkb2N1bWVudDtcbn1cbi8qKlxuICogQWNjZXNzIHRoZSBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSBgZG9jdW1lbnRgIGZvciB0aGlzIHBsYXRmb3JtLlxuICpcbiAqIEl2eSBjYWxscyB0aGlzIHdoZW5ldmVyIGl0IG5lZWRzIHRvIGFjY2VzcyB0aGUgYGRvY3VtZW50YCBvYmplY3QuXG4gKiBGb3IgZXhhbXBsZSB0byBjcmVhdGUgdGhlIHJlbmRlcmVyIG9yIHRvIGRvIHNhbml0aXphdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0RG9jdW1lbnQoKSB7XG4gICAgaWYgKERPQ1VNRU5UICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIERPQ1VNRU5UO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9XG4gICAgLy8gTm8gXCJkb2N1bWVudFwiIGNhbiBiZSBmb3VuZC4gVGhpcyBzaG91bGQgb25seSBoYXBwZW4gaWYgd2UgYXJlIHJ1bm5pbmcgaXZ5IG91dHNpZGUgQW5ndWxhciBhbmRcbiAgICAvLyB0aGUgY3VycmVudCBwbGF0Zm9ybSBpcyBub3QgYSBicm93c2VyLiBTaW5jZSB0aGlzIGlzIG5vdCBhIHN1cHBvcnRlZCBzY2VuYXJpbyBhdCB0aGUgbW9tZW50XG4gICAgLy8gdGhpcyBzaG91bGQgbm90IGhhcHBlbiBpbiBBbmd1bGFyIGFwcHMuXG4gICAgLy8gT25jZSB3ZSBzdXBwb3J0IHJ1bm5pbmcgaXZ5IG91dHNpZGUgb2YgQW5ndWxhciB3ZSB3aWxsIG5lZWQgdG8gcHVibGlzaCBgc2V0RG9jdW1lbnQoKWAgYXMgYVxuICAgIC8vIHB1YmxpYyBBUEkuIE1lYW53aGlsZSB3ZSBqdXN0IHJldHVybiBgdW5kZWZpbmVkYCBhbmQgbGV0IHRoZSBhcHBsaWNhdGlvbiBmYWlsLlxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLy8gVE9ETzogY2xlYW51cCBvbmNlIHRoZSBjb2RlIGlzIG1lcmdlZCBpbiBhbmd1bGFyL2FuZ3VsYXJcbnZhciBSZW5kZXJlclN0eWxlRmxhZ3MzO1xuKGZ1bmN0aW9uIChSZW5kZXJlclN0eWxlRmxhZ3MzKSB7XG4gICAgUmVuZGVyZXJTdHlsZUZsYWdzM1tSZW5kZXJlclN0eWxlRmxhZ3MzW1wiSW1wb3J0YW50XCJdID0gMV0gPSBcIkltcG9ydGFudFwiO1xuICAgIFJlbmRlcmVyU3R5bGVGbGFnczNbUmVuZGVyZXJTdHlsZUZsYWdzM1tcIkRhc2hDYXNlXCJdID0gMl0gPSBcIkRhc2hDYXNlXCI7XG59KShSZW5kZXJlclN0eWxlRmxhZ3MzIHx8IChSZW5kZXJlclN0eWxlRmxhZ3MzID0ge30pKTtcbi8qKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGByZW5kZXJlcmAgaXMgYSBgUHJvY2VkdXJhbFJlbmRlcmVyM2AgKi9cbmZ1bmN0aW9uIGlzUHJvY2VkdXJhbFJlbmRlcmVyKHJlbmRlcmVyKSB7XG4gICAgcmV0dXJuICEhKHJlbmRlcmVyLmxpc3Rlbik7XG59XG5jb25zdCBkb21SZW5kZXJlckZhY3RvcnkzID0ge1xuICAgIGNyZWF0ZVJlbmRlcmVyOiAoaG9zdEVsZW1lbnQsIHJlbmRlcmVyVHlwZSkgPT4ge1xuICAgICAgICByZXR1cm4gZ2V0RG9jdW1lbnQoKTtcbiAgICB9XG59O1xuLy8gTm90ZTogVGhpcyBoYWNrIGlzIG5lY2Vzc2FyeSBzbyB3ZSBkb24ndCBlcnJvbmVvdXNseSBnZXQgYSBjaXJjdWxhciBkZXBlbmRlbmN5XG4vLyBmYWlsdXJlIGJhc2VkIG9uIHR5cGVzLlxuY29uc3QgdW51c2VkVmFsdWVFeHBvcnRUb1BsYWNhdGVBamQkNiA9IDE7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBGb3IgZWZmaWNpZW5jeSByZWFzb25zIHdlIG9mdGVuIHB1dCBzZXZlcmFsIGRpZmZlcmVudCBkYXRhIHR5cGVzIChgUk5vZGVgLCBgTFZpZXdgLCBgTENvbnRhaW5lcmApXG4gKiBpbiBzYW1lIGxvY2F0aW9uIGluIGBMVmlld2AuIFRoaXMgaXMgYmVjYXVzZSB3ZSBkb24ndCB3YW50IHRvIHByZS1hbGxvY2F0ZSBzcGFjZSBmb3IgaXRcbiAqIGJlY2F1c2UgdGhlIHN0b3JhZ2UgaXMgc3BhcnNlLiBUaGlzIGZpbGUgY29udGFpbnMgdXRpbGl0aWVzIGZvciBkZWFsaW5nIHdpdGggc3VjaCBkYXRhIHR5cGVzLlxuICpcbiAqIEhvdyBkbyB3ZSBrbm93IHdoYXQgaXMgc3RvcmVkIGF0IGEgZ2l2ZW4gbG9jYXRpb24gaW4gYExWaWV3YC5cbiAqIC0gYEFycmF5LmlzQXJyYXkodmFsdWUpID09PSBmYWxzZWAgPT4gYFJOb2RlYCAoVGhlIG5vcm1hbCBzdG9yYWdlIHZhbHVlKVxuICogLSBgQXJyYXkuaXNBcnJheSh2YWx1ZSkgPT09IHRydWVgID0+IHRoZW4gdGhlIGB2YWx1ZVswXWAgcmVwcmVzZW50cyB0aGUgd3JhcHBlZCB2YWx1ZS5cbiAqICAgLSBgdHlwZW9mIHZhbHVlW1RZUEVdID09PSAnb2JqZWN0J2AgPT4gYExWaWV3YFxuICogICAgICAtIFRoaXMgaGFwcGVucyB3aGVuIHdlIGhhdmUgYSBjb21wb25lbnQgYXQgYSBnaXZlbiBsb2NhdGlvblxuICogICAtIGB0eXBlb2YgdmFsdWVbVFlQRV0gPT09IHRydWVgID0+IGBMQ29udGFpbmVyYFxuICogICAgICAtIFRoaXMgaGFwcGVucyB3aGVuIHdlIGhhdmUgYExDb250YWluZXJgIGJpbmRpbmcgYXQgYSBnaXZlbiBsb2NhdGlvbi5cbiAqXG4gKlxuICogTk9URTogaXQgaXMgYXNzdW1lZCB0aGF0IGBBcnJheS5pc0FycmF5YCBhbmQgYHR5cGVvZmAgb3BlcmF0aW9ucyBhcmUgdmVyeSBlZmZpY2llbnQuXG4gKi9cbi8qKlxuICogUmV0dXJucyBgUk5vZGVgLlxuICogQHBhcmFtIHZhbHVlIHdyYXBwZWQgdmFsdWUgb2YgYFJOb2RlYCwgYExWaWV3YCwgYExDb250YWluZXJgXG4gKi9cbmZ1bmN0aW9uIHVud3JhcFJOb2RlKHZhbHVlKSB7XG4gICAgd2hpbGUgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWVbSE9TVF07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbi8qKlxuICogUmV0dXJucyBgTFZpZXdgIG9yIGBudWxsYCBpZiBub3QgZm91bmQuXG4gKiBAcGFyYW0gdmFsdWUgd3JhcHBlZCB2YWx1ZSBvZiBgUk5vZGVgLCBgTFZpZXdgLCBgTENvbnRhaW5lcmBcbiAqL1xuZnVuY3Rpb24gdW53cmFwTFZpZXcodmFsdWUpIHtcbiAgICB3aGlsZSAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgLy8gVGhpcyBjaGVjayBpcyBzYW1lIGFzIGBpc0xWaWV3KClgIGJ1dCB3ZSBkb24ndCBjYWxsIGF0IGFzIHdlIGRvbid0IHdhbnQgdG8gY2FsbFxuICAgICAgICAvLyBgQXJyYXkuaXNBcnJheSgpYCB0d2ljZSBhbmQgZ2l2ZSBKSVRlciBtb3JlIHdvcmsgZm9yIGlubGluaW5nLlxuICAgICAgICBpZiAodHlwZW9mIHZhbHVlW1RZUEVdID09PSAnb2JqZWN0JylcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZVtIT1NUXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIFJldHVybnMgYExDb250YWluZXJgIG9yIGBudWxsYCBpZiBub3QgZm91bmQuXG4gKiBAcGFyYW0gdmFsdWUgd3JhcHBlZCB2YWx1ZSBvZiBgUk5vZGVgLCBgTFZpZXdgLCBgTENvbnRhaW5lcmBcbiAqL1xuZnVuY3Rpb24gdW53cmFwTENvbnRhaW5lcih2YWx1ZSkge1xuICAgIHdoaWxlIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAvLyBUaGlzIGNoZWNrIGlzIHNhbWUgYXMgYGlzTENvbnRhaW5lcigpYCBidXQgd2UgZG9uJ3QgY2FsbCBhdCBhcyB3ZSBkb24ndCB3YW50IHRvIGNhbGxcbiAgICAgICAgLy8gYEFycmF5LmlzQXJyYXkoKWAgdHdpY2UgYW5kIGdpdmUgSklUZXIgbW9yZSB3b3JrIGZvciBpbmxpbmluZy5cbiAgICAgICAgaWYgKHZhbHVlW1RZUEVdID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB2YWx1ZSA9IHZhbHVlW0hPU1RdO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogUmV0cmlldmVzIGFuIGVsZW1lbnQgdmFsdWUgZnJvbSB0aGUgcHJvdmlkZWQgYHZpZXdEYXRhYCwgYnkgdW53cmFwcGluZ1xuICogZnJvbSBhbnkgY29udGFpbmVycywgY29tcG9uZW50IHZpZXdzLCBvciBzdHlsZSBjb250ZXh0cy5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlQnlJbmRleChpbmRleCwgbFZpZXcpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0SW5kZXhJblJhbmdlKGxWaWV3LCBpbmRleCk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEdyZWF0ZXJUaGFuT3JFcXVhbChpbmRleCwgSEVBREVSX09GRlNFVCwgJ0V4cGVjdGVkIHRvIGJlIHBhc3QgSEVBREVSX09GRlNFVCcpO1xuICAgIHJldHVybiB1bndyYXBSTm9kZShsVmlld1tpbmRleF0pO1xufVxuLyoqXG4gKiBSZXRyaWV2ZSBhbiBgUk5vZGVgIGZvciBhIGdpdmVuIGBUTm9kZWAgYW5kIGBMVmlld2AuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBndWFyYW50ZWVzIGluIGRldiBtb2RlIHRvIHJldHJpZXZlIGEgbm9uLW51bGwgYFJOb2RlYC5cbiAqXG4gKiBAcGFyYW0gdE5vZGVcbiAqIEBwYXJhbSBsVmlld1xuICovXG5mdW5jdGlvbiBnZXROYXRpdmVCeVROb2RlKHROb2RlLCBsVmlldykge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUTm9kZUZvckxWaWV3KHROb2RlLCBsVmlldyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShsVmlldywgdE5vZGUuaW5kZXgpO1xuICAgIGNvbnN0IG5vZGUgPSB1bndyYXBSTm9kZShsVmlld1t0Tm9kZS5pbmRleF0pO1xuICAgIG5nRGV2TW9kZSAmJiAhaXNQcm9jZWR1cmFsUmVuZGVyZXIobFZpZXdbUkVOREVSRVJdKSAmJiBhc3NlcnREb21Ob2RlKG5vZGUpO1xuICAgIHJldHVybiBub2RlO1xufVxuLyoqXG4gKiBSZXRyaWV2ZSBhbiBgUk5vZGVgIG9yIGBudWxsYCBmb3IgYSBnaXZlbiBgVE5vZGVgIGFuZCBgTFZpZXdgLlxuICpcbiAqIFNvbWUgYFROb2RlYHMgZG9uJ3QgaGF2ZSBhc3NvY2lhdGVkIGBSTm9kZWBzLiBGb3IgZXhhbXBsZSBgUHJvamVjdGlvbmBcbiAqXG4gKiBAcGFyYW0gdE5vZGVcbiAqIEBwYXJhbSBsVmlld1xuICovXG5mdW5jdGlvbiBnZXROYXRpdmVCeVROb2RlT3JOdWxsKHROb2RlLCBsVmlldykge1xuICAgIGNvbnN0IGluZGV4ID0gdE5vZGUgPT09IG51bGwgPyAtMSA6IHROb2RlLmluZGV4O1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydFROb2RlRm9yTFZpZXcodE5vZGUsIGxWaWV3KTtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHVud3JhcFJOb2RlKGxWaWV3W2luZGV4XSk7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBub2RlICE9PSBudWxsICYmICFpc1Byb2NlZHVyYWxSZW5kZXJlcihsVmlld1tSRU5ERVJFUl0pICYmIGFzc2VydERvbU5vZGUobm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8vIGZpeG1lKG1pc2tvKTogVGhlIHJldHVybiBUeXBlIHNob3VsZCBiZSBgVE5vZGV8bnVsbGBcbmZ1bmN0aW9uIGdldFROb2RlKHRWaWV3LCBpbmRleCkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRHcmVhdGVyVGhhbihpbmRleCwgLTEsICd3cm9uZyBpbmRleCBmb3IgVE5vZGUnKTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TGVzc1RoYW4oaW5kZXgsIHRWaWV3LmRhdGEubGVuZ3RoLCAnd3JvbmcgaW5kZXggZm9yIFROb2RlJyk7XG4gICAgY29uc3QgdE5vZGUgPSB0Vmlldy5kYXRhW2luZGV4XTtcbiAgICBuZ0Rldk1vZGUgJiYgdE5vZGUgIT09IG51bGwgJiYgYXNzZXJ0VE5vZGUodE5vZGUpO1xuICAgIHJldHVybiB0Tm9kZTtcbn1cbi8qKiBSZXRyaWV2ZXMgYSB2YWx1ZSBmcm9tIGFueSBgTFZpZXdgIG9yIGBURGF0YWAuICovXG5mdW5jdGlvbiBsb2FkKHZpZXcsIGluZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZSh2aWV3LCBpbmRleCk7XG4gICAgcmV0dXJuIHZpZXdbaW5kZXhdO1xufVxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50TFZpZXdCeUluZGV4KG5vZGVJbmRleCwgaG9zdFZpZXcpIHtcbiAgICAvLyBDb3VsZCBiZSBhbiBMVmlldyBvciBhbiBMQ29udGFpbmVyLiBJZiBMQ29udGFpbmVyLCB1bndyYXAgdG8gZmluZCBMVmlldy5cbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0SW5kZXhJblJhbmdlKGhvc3RWaWV3LCBub2RlSW5kZXgpO1xuICAgIGNvbnN0IHNsb3RWYWx1ZSA9IGhvc3RWaWV3W25vZGVJbmRleF07XG4gICAgY29uc3QgbFZpZXcgPSBpc0xWaWV3KHNsb3RWYWx1ZSkgPyBzbG90VmFsdWUgOiBzbG90VmFsdWVbSE9TVF07XG4gICAgcmV0dXJuIGxWaWV3O1xufVxuLyoqIENoZWNrcyB3aGV0aGVyIGEgZ2l2ZW4gdmlldyBpcyBpbiBjcmVhdGlvbiBtb2RlICovXG5mdW5jdGlvbiBpc0NyZWF0aW9uTW9kZSh2aWV3KSB7XG4gICAgcmV0dXJuICh2aWV3W0ZMQUdTXSAmIDQgLyogQ3JlYXRpb25Nb2RlICovKSA9PT0gNCAvKiBDcmVhdGlvbk1vZGUgKi87XG59XG4vKipcbiAqIFJldHVybnMgYSBib29sZWFuIGZvciB3aGV0aGVyIHRoZSB2aWV3IGlzIGF0dGFjaGVkIHRvIHRoZSBjaGFuZ2UgZGV0ZWN0aW9uIHRyZWUuXG4gKlxuICogTm90ZTogVGhpcyBkZXRlcm1pbmVzIHdoZXRoZXIgYSB2aWV3IHNob3VsZCBiZSBjaGVja2VkLCBub3Qgd2hldGhlciBpdCdzIGluc2VydGVkXG4gKiBpbnRvIGEgY29udGFpbmVyLiBGb3IgdGhhdCwgeW91J2xsIHdhbnQgYHZpZXdBdHRhY2hlZFRvQ29udGFpbmVyYCBiZWxvdy5cbiAqL1xuZnVuY3Rpb24gdmlld0F0dGFjaGVkVG9DaGFuZ2VEZXRlY3Rvcih2aWV3KSB7XG4gICAgcmV0dXJuICh2aWV3W0ZMQUdTXSAmIDEyOCAvKiBBdHRhY2hlZCAqLykgPT09IDEyOCAvKiBBdHRhY2hlZCAqLztcbn1cbi8qKiBSZXR1cm5zIGEgYm9vbGVhbiBmb3Igd2hldGhlciB0aGUgdmlldyBpcyBhdHRhY2hlZCB0byBhIGNvbnRhaW5lci4gKi9cbmZ1bmN0aW9uIHZpZXdBdHRhY2hlZFRvQ29udGFpbmVyKHZpZXcpIHtcbiAgICByZXR1cm4gaXNMQ29udGFpbmVyKHZpZXdbUEFSRU5UXSk7XG59XG5mdW5jdGlvbiBnZXRDb25zdGFudChjb25zdHMsIGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID09PSBudWxsIHx8IGluZGV4ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRJbmRleEluUmFuZ2UoY29uc3RzLCBpbmRleCk7XG4gICAgcmV0dXJuIGNvbnN0c1tpbmRleF07XG59XG4vKipcbiAqIFJlc2V0cyB0aGUgcHJlLW9yZGVyIGhvb2sgZmxhZ3Mgb2YgdGhlIHZpZXcuXG4gKiBAcGFyYW0gbFZpZXcgdGhlIExWaWV3IG9uIHdoaWNoIHRoZSBmbGFncyBhcmUgcmVzZXRcbiAqL1xuZnVuY3Rpb24gcmVzZXRQcmVPcmRlckhvb2tGbGFncyhsVmlldykge1xuICAgIGxWaWV3W1BSRU9SREVSX0hPT0tfRkxBR1NdID0gMDtcbn1cbi8qKlxuICogVXBkYXRlcyB0aGUgYFRSQU5TUExBTlRFRF9WSUVXU19UT19SRUZSRVNIYCBjb3VudGVyIG9uIHRoZSBgTENvbnRhaW5lcmAgYXMgd2VsbCBhcyB0aGUgcGFyZW50c1xuICogd2hvc2VcbiAqICAxLiBjb3VudGVyIGdvZXMgZnJvbSAwIHRvIDEsIGluZGljYXRpbmcgdGhhdCB0aGVyZSBpcyBhIG5ldyBjaGlsZCB0aGF0IGhhcyBhIHZpZXcgdG8gcmVmcmVzaFxuICogIG9yXG4gKiAgMi4gY291bnRlciBnb2VzIGZyb20gMSB0byAwLCBpbmRpY2F0aW5nIHRoZXJlIGFyZSBubyBtb3JlIGRlc2NlbmRhbnQgdmlld3MgdG8gcmVmcmVzaFxuICovXG5mdW5jdGlvbiB1cGRhdGVUcmFuc3BsYW50ZWRWaWV3Q291bnQobENvbnRhaW5lciwgYW1vdW50KSB7XG4gICAgbENvbnRhaW5lcltUUkFOU1BMQU5URURfVklFV1NfVE9fUkVGUkVTSF0gKz0gYW1vdW50O1xuICAgIGxldCB2aWV3T3JDb250YWluZXIgPSBsQ29udGFpbmVyO1xuICAgIGxldCBwYXJlbnQgPSBsQ29udGFpbmVyW1BBUkVOVF07XG4gICAgd2hpbGUgKHBhcmVudCAhPT0gbnVsbCAmJlxuICAgICAgICAoKGFtb3VudCA9PT0gMSAmJiB2aWV3T3JDb250YWluZXJbVFJBTlNQTEFOVEVEX1ZJRVdTX1RPX1JFRlJFU0hdID09PSAxKSB8fFxuICAgICAgICAgICAgKGFtb3VudCA9PT0gLTEgJiYgdmlld09yQ29udGFpbmVyW1RSQU5TUExBTlRFRF9WSUVXU19UT19SRUZSRVNIXSA9PT0gMCkpKSB7XG4gICAgICAgIHBhcmVudFtUUkFOU1BMQU5URURfVklFV1NfVE9fUkVGUkVTSF0gKz0gYW1vdW50O1xuICAgICAgICB2aWV3T3JDb250YWluZXIgPSBwYXJlbnQ7XG4gICAgICAgIHBhcmVudCA9IHBhcmVudFtQQVJFTlRdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5jb25zdCBpbnN0cnVjdGlvblN0YXRlID0ge1xuICAgIGxGcmFtZTogY3JlYXRlTEZyYW1lKG51bGwpLFxuICAgIGJpbmRpbmdzRW5hYmxlZDogdHJ1ZSxcbiAgICBpc0luQ2hlY2tOb0NoYW5nZXNNb2RlOiBmYWxzZSxcbn07XG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgaW5zdHJ1Y3Rpb24gc3RhdGUgc3RhY2sgaXMgZW1wdHkuXG4gKlxuICogSW50ZW5kZWQgdG8gYmUgY2FsbGVkIGZyb20gdGVzdHMgb25seSAodHJlZSBzaGFrZW4gb3RoZXJ3aXNlKS5cbiAqL1xuZnVuY3Rpb24gc3BlY09ubHlJc0luc3RydWN0aW9uU3RhdGVFbXB0eSgpIHtcbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUucGFyZW50ID09PSBudWxsO1xufVxuZnVuY3Rpb24gZ2V0RWxlbWVudERlcHRoQ291bnQoKSB7XG4gICAgcmV0dXJuIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLmVsZW1lbnREZXB0aENvdW50O1xufVxuZnVuY3Rpb24gaW5jcmVhc2VFbGVtZW50RGVwdGhDb3VudCgpIHtcbiAgICBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5lbGVtZW50RGVwdGhDb3VudCsrO1xufVxuZnVuY3Rpb24gZGVjcmVhc2VFbGVtZW50RGVwdGhDb3VudCgpIHtcbiAgICBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5lbGVtZW50RGVwdGhDb3VudC0tO1xufVxuZnVuY3Rpb24gZ2V0QmluZGluZ3NFbmFibGVkKCkge1xuICAgIHJldHVybiBpbnN0cnVjdGlvblN0YXRlLmJpbmRpbmdzRW5hYmxlZDtcbn1cbi8qKlxuICogRW5hYmxlcyBkaXJlY3RpdmUgbWF0Y2hpbmcgb24gZWxlbWVudHMuXG4gKlxuICogICogRXhhbXBsZTpcbiAqIGBgYFxuICogPG15LWNvbXAgbXktZGlyZWN0aXZlPlxuICogICBTaG91bGQgbWF0Y2ggY29tcG9uZW50IC8gZGlyZWN0aXZlLlxuICogPC9teS1jb21wPlxuICogPGRpdiBuZ05vbkJpbmRhYmxlPlxuICogICA8IS0tIMm1ybVkaXNhYmxlQmluZGluZ3MoKSAtLT5cbiAqICAgPG15LWNvbXAgbXktZGlyZWN0aXZlPlxuICogICAgIFNob3VsZCBub3QgbWF0Y2ggY29tcG9uZW50IC8gZGlyZWN0aXZlIGJlY2F1c2Ugd2UgYXJlIGluIG5nTm9uQmluZGFibGUuXG4gKiAgIDwvbXktY29tcD5cbiAqICAgPCEtLSDJtcm1ZW5hYmxlQmluZGluZ3MoKSAtLT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWVuYWJsZUJpbmRpbmdzKCkge1xuICAgIGluc3RydWN0aW9uU3RhdGUuYmluZGluZ3NFbmFibGVkID0gdHJ1ZTtcbn1cbi8qKlxuICogRGlzYWJsZXMgZGlyZWN0aXZlIG1hdGNoaW5nIG9uIGVsZW1lbnQuXG4gKlxuICogICogRXhhbXBsZTpcbiAqIGBgYFxuICogPG15LWNvbXAgbXktZGlyZWN0aXZlPlxuICogICBTaG91bGQgbWF0Y2ggY29tcG9uZW50IC8gZGlyZWN0aXZlLlxuICogPC9teS1jb21wPlxuICogPGRpdiBuZ05vbkJpbmRhYmxlPlxuICogICA8IS0tIMm1ybVkaXNhYmxlQmluZGluZ3MoKSAtLT5cbiAqICAgPG15LWNvbXAgbXktZGlyZWN0aXZlPlxuICogICAgIFNob3VsZCBub3QgbWF0Y2ggY29tcG9uZW50IC8gZGlyZWN0aXZlIGJlY2F1c2Ugd2UgYXJlIGluIG5nTm9uQmluZGFibGUuXG4gKiAgIDwvbXktY29tcD5cbiAqICAgPCEtLSDJtcm1ZW5hYmxlQmluZGluZ3MoKSAtLT5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWRpc2FibGVCaW5kaW5ncygpIHtcbiAgICBpbnN0cnVjdGlvblN0YXRlLmJpbmRpbmdzRW5hYmxlZCA9IGZhbHNlO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIGN1cnJlbnQgYExWaWV3YC5cbiAqL1xuZnVuY3Rpb24gZ2V0TFZpZXcoKSB7XG4gICAgcmV0dXJuIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLmxWaWV3O1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIGN1cnJlbnQgYFRWaWV3YC5cbiAqL1xuZnVuY3Rpb24gZ2V0VFZpZXcoKSB7XG4gICAgcmV0dXJuIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLnRWaWV3O1xufVxuLyoqXG4gKiBSZXN0b3JlcyBgY29udGV4dFZpZXdEYXRhYCB0byB0aGUgZ2l2ZW4gT3BhcXVlVmlld1N0YXRlIGluc3RhbmNlLlxuICpcbiAqIFVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZ2V0Q3VycmVudFZpZXcoKSBpbnN0cnVjdGlvbiB0byBzYXZlIGEgc25hcHNob3RcbiAqIG9mIHRoZSBjdXJyZW50IHZpZXcgYW5kIHJlc3RvcmUgaXQgd2hlbiBsaXN0ZW5lcnMgYXJlIGludm9rZWQuIFRoaXMgYWxsb3dzXG4gKiB3YWxraW5nIHRoZSBkZWNsYXJhdGlvbiB2aWV3IHRyZWUgaW4gbGlzdGVuZXJzIHRvIGdldCB2YXJzIGZyb20gcGFyZW50IHZpZXdzLlxuICpcbiAqIEBwYXJhbSB2aWV3VG9SZXN0b3JlIFRoZSBPcGFxdWVWaWV3U3RhdGUgaW5zdGFuY2UgdG8gcmVzdG9yZS5cbiAqIEByZXR1cm5zIENvbnRleHQgb2YgdGhlIHJlc3RvcmVkIE9wYXF1ZVZpZXdTdGF0ZSBpbnN0YW5jZS5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cmVzdG9yZVZpZXcodmlld1RvUmVzdG9yZSkge1xuICAgIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLmNvbnRleHRMVmlldyA9IHZpZXdUb1Jlc3RvcmU7XG4gICAgcmV0dXJuIHZpZXdUb1Jlc3RvcmVbQ09OVEVYVF07XG59XG5mdW5jdGlvbiBnZXRDdXJyZW50VE5vZGUoKSB7XG4gICAgbGV0IGN1cnJlbnRUTm9kZSA9IGdldEN1cnJlbnRUTm9kZVBsYWNlaG9sZGVyT2soKTtcbiAgICB3aGlsZSAoY3VycmVudFROb2RlICE9PSBudWxsICYmIGN1cnJlbnRUTm9kZS50eXBlID09PSA2NCAvKiBQbGFjZWhvbGRlciAqLykge1xuICAgICAgICBjdXJyZW50VE5vZGUgPSBjdXJyZW50VE5vZGUucGFyZW50O1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudFROb2RlO1xufVxuZnVuY3Rpb24gZ2V0Q3VycmVudFROb2RlUGxhY2Vob2xkZXJPaygpIHtcbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUuY3VycmVudFROb2RlO1xufVxuZnVuY3Rpb24gZ2V0Q3VycmVudFBhcmVudFROb2RlKCkge1xuICAgIGNvbnN0IGxGcmFtZSA9IGluc3RydWN0aW9uU3RhdGUubEZyYW1lO1xuICAgIGNvbnN0IGN1cnJlbnRUTm9kZSA9IGxGcmFtZS5jdXJyZW50VE5vZGU7XG4gICAgcmV0dXJuIGxGcmFtZS5pc1BhcmVudCA/IGN1cnJlbnRUTm9kZSA6IGN1cnJlbnRUTm9kZS5wYXJlbnQ7XG59XG5mdW5jdGlvbiBzZXRDdXJyZW50VE5vZGUodE5vZGUsIGlzUGFyZW50KSB7XG4gICAgbmdEZXZNb2RlICYmIHROb2RlICYmIGFzc2VydFROb2RlRm9yVFZpZXcodE5vZGUsIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLnRWaWV3KTtcbiAgICBjb25zdCBsRnJhbWUgPSBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZTtcbiAgICBsRnJhbWUuY3VycmVudFROb2RlID0gdE5vZGU7XG4gICAgbEZyYW1lLmlzUGFyZW50ID0gaXNQYXJlbnQ7XG59XG5mdW5jdGlvbiBpc0N1cnJlbnRUTm9kZVBhcmVudCgpIHtcbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUuaXNQYXJlbnQ7XG59XG5mdW5jdGlvbiBzZXRDdXJyZW50VE5vZGVBc05vdFBhcmVudCgpIHtcbiAgICBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5pc1BhcmVudCA9IGZhbHNlO1xufVxuZnVuY3Rpb24gc2V0Q3VycmVudFROb2RlQXNQYXJlbnQoKSB7XG4gICAgaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUuaXNQYXJlbnQgPSB0cnVlO1xufVxuZnVuY3Rpb24gZ2V0Q29udGV4dExWaWV3KCkge1xuICAgIHJldHVybiBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5jb250ZXh0TFZpZXc7XG59XG5mdW5jdGlvbiBpc0luQ2hlY2tOb0NoYW5nZXNNb2RlKCkge1xuICAgIC8vIFRPRE8obWlza28pOiByZW1vdmUgdGhpcyBmcm9tIHRoZSBMVmlldyBzaW5jZSBpdCBpcyBuZ0Rldk1vZGU9dHJ1ZSBtb2RlIG9ubHkuXG4gICAgcmV0dXJuIGluc3RydWN0aW9uU3RhdGUuaXNJbkNoZWNrTm9DaGFuZ2VzTW9kZTtcbn1cbmZ1bmN0aW9uIHNldElzSW5DaGVja05vQ2hhbmdlc01vZGUobW9kZSkge1xuICAgIGluc3RydWN0aW9uU3RhdGUuaXNJbkNoZWNrTm9DaGFuZ2VzTW9kZSA9IG1vZGU7XG59XG4vLyB0b3AgbGV2ZWwgdmFyaWFibGVzIHNob3VsZCBub3QgYmUgZXhwb3J0ZWQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgKFBFUkZfTk9URVMubWQpXG5mdW5jdGlvbiBnZXRCaW5kaW5nUm9vdCgpIHtcbiAgICBjb25zdCBsRnJhbWUgPSBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZTtcbiAgICBsZXQgaW5kZXggPSBsRnJhbWUuYmluZGluZ1Jvb3RJbmRleDtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIGluZGV4ID0gbEZyYW1lLmJpbmRpbmdSb290SW5kZXggPSBsRnJhbWUudFZpZXcuYmluZGluZ1N0YXJ0SW5kZXg7XG4gICAgfVxuICAgIHJldHVybiBpbmRleDtcbn1cbmZ1bmN0aW9uIGdldEJpbmRpbmdJbmRleCgpIHtcbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUuYmluZGluZ0luZGV4O1xufVxuZnVuY3Rpb24gc2V0QmluZGluZ0luZGV4KHZhbHVlKSB7XG4gICAgcmV0dXJuIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLmJpbmRpbmdJbmRleCA9IHZhbHVlO1xufVxuZnVuY3Rpb24gbmV4dEJpbmRpbmdJbmRleCgpIHtcbiAgICByZXR1cm4gaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUuYmluZGluZ0luZGV4Kys7XG59XG5mdW5jdGlvbiBpbmNyZW1lbnRCaW5kaW5nSW5kZXgoY291bnQpIHtcbiAgICBjb25zdCBsRnJhbWUgPSBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZTtcbiAgICBjb25zdCBpbmRleCA9IGxGcmFtZS5iaW5kaW5nSW5kZXg7XG4gICAgbEZyYW1lLmJpbmRpbmdJbmRleCA9IGxGcmFtZS5iaW5kaW5nSW5kZXggKyBjb3VudDtcbiAgICByZXR1cm4gaW5kZXg7XG59XG5mdW5jdGlvbiBpc0luSTE4bkJsb2NrKCkge1xuICAgIHJldHVybiBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5pbkkxOG47XG59XG5mdW5jdGlvbiBzZXRJbkkxOG5CbG9jayhpc0luSTE4bkJsb2NrKSB7XG4gICAgaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUuaW5JMThuID0gaXNJbkkxOG5CbG9jaztcbn1cbi8qKlxuICogU2V0IGEgbmV3IGJpbmRpbmcgcm9vdCBpbmRleCBzbyB0aGF0IGhvc3QgdGVtcGxhdGUgZnVuY3Rpb25zIGNhbiBleGVjdXRlLlxuICpcbiAqIEJpbmRpbmdzIGluc2lkZSB0aGUgaG9zdCB0ZW1wbGF0ZSBhcmUgMCBpbmRleC4gQnV0IGJlY2F1c2Ugd2UgZG9uJ3Qga25vdyBhaGVhZCBvZiB0aW1lXG4gKiBob3cgbWFueSBob3N0IGJpbmRpbmdzIHdlIGhhdmUgd2UgY2FuJ3QgcHJlLWNvbXB1dGUgdGhlbS4gRm9yIHRoaXMgcmVhc29uIHRoZXkgYXJlIGFsbFxuICogMCBpbmRleCBhbmQgd2UganVzdCBzaGlmdCB0aGUgcm9vdCBzbyB0aGF0IHRoZXkgbWF0Y2ggbmV4dCBhdmFpbGFibGUgbG9jYXRpb24gaW4gdGhlIExWaWV3LlxuICpcbiAqIEBwYXJhbSBiaW5kaW5nUm9vdEluZGV4IFJvb3QgaW5kZXggZm9yIGBob3N0QmluZGluZ3NgXG4gKiBAcGFyYW0gY3VycmVudERpcmVjdGl2ZUluZGV4IGBURGF0YVtjdXJyZW50RGlyZWN0aXZlSW5kZXhdYCB3aWxsIHBvaW50IHRvIHRoZSBjdXJyZW50IGRpcmVjdGl2ZVxuICogICAgICAgIHdob3NlIGBob3N0QmluZGluZ3NgIGFyZSBiZWluZyBwcm9jZXNzZWQuXG4gKi9cbmZ1bmN0aW9uIHNldEJpbmRpbmdSb290Rm9ySG9zdEJpbmRpbmdzKGJpbmRpbmdSb290SW5kZXgsIGN1cnJlbnREaXJlY3RpdmVJbmRleCkge1xuICAgIGNvbnN0IGxGcmFtZSA9IGluc3RydWN0aW9uU3RhdGUubEZyYW1lO1xuICAgIGxGcmFtZS5iaW5kaW5nSW5kZXggPSBsRnJhbWUuYmluZGluZ1Jvb3RJbmRleCA9IGJpbmRpbmdSb290SW5kZXg7XG4gICAgc2V0Q3VycmVudERpcmVjdGl2ZUluZGV4KGN1cnJlbnREaXJlY3RpdmVJbmRleCk7XG59XG4vKipcbiAqIFdoZW4gaG9zdCBiaW5kaW5nIGlzIGV4ZWN1dGluZyB0aGlzIHBvaW50cyB0byB0aGUgZGlyZWN0aXZlIGluZGV4LlxuICogYFRWaWV3LmRhdGFbZ2V0Q3VycmVudERpcmVjdGl2ZUluZGV4KCldYCBpcyBgRGlyZWN0aXZlRGVmYFxuICogYExWaWV3W2dldEN1cnJlbnREaXJlY3RpdmVJbmRleCgpXWAgaXMgZGlyZWN0aXZlIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBnZXRDdXJyZW50RGlyZWN0aXZlSW5kZXgoKSB7XG4gICAgcmV0dXJuIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLmN1cnJlbnREaXJlY3RpdmVJbmRleDtcbn1cbi8qKlxuICogU2V0cyBhbiBpbmRleCBvZiBhIGRpcmVjdGl2ZSB3aG9zZSBgaG9zdEJpbmRpbmdzYCBhcmUgYmVpbmcgcHJvY2Vzc2VkLlxuICpcbiAqIEBwYXJhbSBjdXJyZW50RGlyZWN0aXZlSW5kZXggYFREYXRhYCBpbmRleCB3aGVyZSBjdXJyZW50IGRpcmVjdGl2ZSBpbnN0YW5jZSBjYW4gYmUgZm91bmQuXG4gKi9cbmZ1bmN0aW9uIHNldEN1cnJlbnREaXJlY3RpdmVJbmRleChjdXJyZW50RGlyZWN0aXZlSW5kZXgpIHtcbiAgICBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5jdXJyZW50RGlyZWN0aXZlSW5kZXggPSBjdXJyZW50RGlyZWN0aXZlSW5kZXg7XG59XG4vKipcbiAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGBEaXJlY3RpdmVEZWZgIHdoaWNoIGlzIGFjdGl2ZSB3aGVuIGBob3N0QmluZGluZ3NgIGluc3RydWN0aW9uIGlzIGJlaW5nXG4gKiBleGVjdXRlZC5cbiAqXG4gKiBAcGFyYW0gdERhdGEgQ3VycmVudCBgVERhdGFgIHdoZXJlIHRoZSBgRGlyZWN0aXZlRGVmYCB3aWxsIGJlIGxvb2tlZCB1cCBhdC5cbiAqL1xuZnVuY3Rpb24gZ2V0Q3VycmVudERpcmVjdGl2ZURlZih0RGF0YSkge1xuICAgIGNvbnN0IGN1cnJlbnREaXJlY3RpdmVJbmRleCA9IGluc3RydWN0aW9uU3RhdGUubEZyYW1lLmN1cnJlbnREaXJlY3RpdmVJbmRleDtcbiAgICByZXR1cm4gY3VycmVudERpcmVjdGl2ZUluZGV4ID09PSAtMSA/IG51bGwgOiB0RGF0YVtjdXJyZW50RGlyZWN0aXZlSW5kZXhdO1xufVxuZnVuY3Rpb24gZ2V0Q3VycmVudFF1ZXJ5SW5kZXgoKSB7XG4gICAgcmV0dXJuIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLmN1cnJlbnRRdWVyeUluZGV4O1xufVxuZnVuY3Rpb24gc2V0Q3VycmVudFF1ZXJ5SW5kZXgodmFsdWUpIHtcbiAgICBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5jdXJyZW50UXVlcnlJbmRleCA9IHZhbHVlO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgYFROb2RlYCBvZiB0aGUgbG9jYXRpb24gd2hlcmUgdGhlIGN1cnJlbnQgYExWaWV3YCBpcyBkZWNsYXJlZCBhdC5cbiAqXG4gKiBAcGFyYW0gbFZpZXcgYW4gYExWaWV3YCB0aGF0IHdlIHdhbnQgdG8gZmluZCBwYXJlbnQgYFROb2RlYCBmb3IuXG4gKi9cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uVE5vZGUobFZpZXcpIHtcbiAgICBjb25zdCB0VmlldyA9IGxWaWV3W1RWSUVXXTtcbiAgICAvLyBSZXR1cm4gdGhlIGRlY2xhcmF0aW9uIHBhcmVudCBmb3IgZW1iZWRkZWQgdmlld3NcbiAgICBpZiAodFZpZXcudHlwZSA9PT0gMiAvKiBFbWJlZGRlZCAqLykge1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0Vmlldy5kZWNsVE5vZGUsICdFbWJlZGRlZCBUTm9kZXMgc2hvdWxkIGhhdmUgZGVjbGFyYXRpb24gcGFyZW50cy4nKTtcbiAgICAgICAgcmV0dXJuIHRWaWV3LmRlY2xUTm9kZTtcbiAgICB9XG4gICAgLy8gQ29tcG9uZW50cyBkb24ndCBoYXZlIGBUVmlldy5kZWNsVE5vZGVgIGJlY2F1c2UgZWFjaCBpbnN0YW5jZSBvZiBjb21wb25lbnQgY291bGQgYmVcbiAgICAvLyBpbnNlcnRlZCBpbiBkaWZmZXJlbnQgbG9jYXRpb24sIGhlbmNlIGBUVmlldy5kZWNsVE5vZGVgIGlzIG1lYW5pbmdsZXNzLlxuICAgIC8vIEZhbGxpbmcgYmFjayB0byBgVF9IT1NUYCBpbiBjYXNlIHdlIGNyb3NzIGNvbXBvbmVudCBib3VuZGFyeS5cbiAgICBpZiAodFZpZXcudHlwZSA9PT0gMSAvKiBDb21wb25lbnQgKi8pIHtcbiAgICAgICAgcmV0dXJuIGxWaWV3W1RfSE9TVF07XG4gICAgfVxuICAgIC8vIFJlbWFpbmluZyBUTm9kZSB0eXBlIGlzIGBUVmlld1R5cGUuUm9vdGAgd2hpY2ggZG9lc24ndCBoYXZlIGEgcGFyZW50IFROb2RlLlxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBUaGlzIGlzIGEgbGlnaHQgd2VpZ2h0IHZlcnNpb24gb2YgdGhlIGBlbnRlclZpZXdgIHdoaWNoIGlzIG5lZWRlZCBieSB0aGUgREkgc3lzdGVtLlxuICpcbiAqIEBwYXJhbSBsVmlldyBgTFZpZXdgIGxvY2F0aW9uIG9mIHRoZSBESSBjb250ZXh0LlxuICogQHBhcmFtIHROb2RlIGBUTm9kZWAgZm9yIERJIGNvbnRleHRcbiAqIEBwYXJhbSBmbGFncyBESSBjb250ZXh0IGZsYWdzLiBpZiBgU2tpcFNlbGZgIGZsYWcgaXMgc2V0IHRoYW4gd2Ugd2FsayB1cCB0aGUgZGVjbGFyYXRpb25cbiAqICAgICB0cmVlIGZyb20gYHROb2RlYCAgdW50aWwgd2UgZmluZCBwYXJlbnQgZGVjbGFyZWQgYFRFbGVtZW50Tm9kZWAuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgd2UgaGF2ZSBzdWNjZXNzZnVsbHkgZW50ZXJlZCBESSBhc3NvY2lhdGVkIHdpdGggYHROb2RlYCAob3Igd2l0aCBkZWNsYXJlZFxuICogICAgIGBUTm9kZWAgaWYgYGZsYWdzYCBoYXMgIGBTa2lwU2VsZmApLiBGYWlsaW5nIHRvIGVudGVyIERJIGltcGxpZXMgdGhhdCBubyBhc3NvY2lhdGVkXG4gKiAgICAgYE5vZGVJbmplY3RvcmAgY2FuIGJlIGZvdW5kIGFuZCB3ZSBzaG91bGQgaW5zdGVhZCB1c2UgYE1vZHVsZUluamVjdG9yYC5cbiAqICAgICAtIElmIGB0cnVlYCB0aGFuIHRoaXMgY2FsbCBtdXN0IGJlIGZhbGxvd2VkIGJ5IGBsZWF2ZURJYFxuICogICAgIC0gSWYgYGZhbHNlYCB0aGFuIHRoaXMgY2FsbCBmYWlsZWQgYW5kIHdlIHNob3VsZCBOT1QgY2FsbCBgbGVhdmVESWBcbiAqL1xuZnVuY3Rpb24gZW50ZXJESShsVmlldywgdE5vZGUsIGZsYWdzKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExWaWV3T3JVbmRlZmluZWQobFZpZXcpO1xuICAgIGlmIChmbGFncyAmIEluamVjdEZsYWdzLlNraXBTZWxmKSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUTm9kZUZvclRWaWV3KHROb2RlLCBsVmlld1tUVklFV10pO1xuICAgICAgICBsZXQgcGFyZW50VE5vZGUgPSB0Tm9kZTtcbiAgICAgICAgbGV0IHBhcmVudExWaWV3ID0gbFZpZXc7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChwYXJlbnRUTm9kZSwgJ1BhcmVudCBUTm9kZSBzaG91bGQgYmUgZGVmaW5lZCcpO1xuICAgICAgICAgICAgcGFyZW50VE5vZGUgPSBwYXJlbnRUTm9kZS5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAocGFyZW50VE5vZGUgPT09IG51bGwgJiYgIShmbGFncyAmIEluamVjdEZsYWdzLkhvc3QpKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50VE5vZGUgPSBnZXREZWNsYXJhdGlvblROb2RlKHBhcmVudExWaWV3KTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50VE5vZGUgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vIEluIHRoaXMgY2FzZSwgYSBwYXJlbnQgZXhpc3RzIGFuZCBpcyBkZWZpbml0ZWx5IGFuIGVsZW1lbnQuIFNvIGl0IHdpbGwgZGVmaW5pdGVseVxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYW4gZXhpc3RpbmcgbFZpZXcgYXMgdGhlIGRlY2xhcmF0aW9uIHZpZXcsIHdoaWNoIGlzIHdoeSB3ZSBjYW4gYXNzdW1lIGl0J3MgZGVmaW5lZC5cbiAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChwYXJlbnRMVmlldywgJ1BhcmVudCBMVmlldyBzaG91bGQgYmUgZGVmaW5lZCcpO1xuICAgICAgICAgICAgICAgIHBhcmVudExWaWV3ID0gcGFyZW50TFZpZXdbREVDTEFSQVRJT05fVklFV107XG4gICAgICAgICAgICAgICAgLy8gSW4gSXZ5IHRoZXJlIGFyZSBDb21tZW50IG5vZGVzIHRoYXQgY29ycmVzcG9uZCB0byBuZ0lmIGFuZCBOZ0ZvciBlbWJlZGRlZCBkaXJlY3RpdmVzXG4gICAgICAgICAgICAgICAgLy8gV2Ugd2FudCB0byBza2lwIHRob3NlIGFuZCBsb29rIG9ubHkgYXQgRWxlbWVudHMgYW5kIEVsZW1lbnRDb250YWluZXJzIHRvIGVuc3VyZVxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGxvb2tpbmcgYXQgdHJ1ZSBwYXJlbnQgbm9kZXMsIGFuZCBub3QgY29udGVudCBvciBvdGhlciB0eXBlcy5cbiAgICAgICAgICAgICAgICBpZiAocGFyZW50VE5vZGUudHlwZSAmICgyIC8qIEVsZW1lbnQgKi8gfCA4IC8qIEVsZW1lbnRDb250YWluZXIgKi8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnRUTm9kZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gSWYgd2UgZmFpbGVkIHRvIGZpbmQgYSBwYXJlbnQgVE5vZGUgdGhpcyBtZWFucyB0aGF0IHdlIHNob3VsZCB1c2UgbW9kdWxlIGluamVjdG9yLlxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdE5vZGUgPSBwYXJlbnRUTm9kZTtcbiAgICAgICAgICAgIGxWaWV3ID0gcGFyZW50TFZpZXc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydFROb2RlRm9yTFZpZXcodE5vZGUsIGxWaWV3KTtcbiAgICBjb25zdCBsRnJhbWUgPSBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZSA9IGFsbG9jTEZyYW1lKCk7XG4gICAgbEZyYW1lLmN1cnJlbnRUTm9kZSA9IHROb2RlO1xuICAgIGxGcmFtZS5sVmlldyA9IGxWaWV3O1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBTd2FwIHRoZSBjdXJyZW50IGxWaWV3IHdpdGggYSBuZXcgbFZpZXcuXG4gKlxuICogRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgd2Ugc3RvcmUgdGhlIGxWaWV3IGluIHRoZSB0b3AgbGV2ZWwgb2YgdGhlIG1vZHVsZS5cbiAqIFRoaXMgd2F5IHdlIG1pbmltaXplIHRoZSBudW1iZXIgb2YgcHJvcGVydGllcyB0byByZWFkLiBXaGVuZXZlciBhIG5ldyB2aWV3XG4gKiBpcyBlbnRlcmVkIHdlIGhhdmUgdG8gc3RvcmUgdGhlIGxWaWV3IGZvciBsYXRlciwgYW5kIHdoZW4gdGhlIHZpZXcgaXNcbiAqIGV4aXRlZCB0aGUgc3RhdGUgaGFzIHRvIGJlIHJlc3RvcmVkXG4gKlxuICogQHBhcmFtIG5ld1ZpZXcgTmV3IGxWaWV3IHRvIGJlY29tZSBhY3RpdmVcbiAqIEByZXR1cm5zIHRoZSBwcmV2aW91c2x5IGFjdGl2ZSBsVmlldztcbiAqL1xuZnVuY3Rpb24gZW50ZXJWaWV3KG5ld1ZpZXcpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Tm90RXF1YWwobmV3Vmlld1swXSwgbmV3Vmlld1sxXSwgJz8/Pz8nKTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TFZpZXdPclVuZGVmaW5lZChuZXdWaWV3KTtcbiAgICBjb25zdCBuZXdMRnJhbWUgPSBhbGxvY0xGcmFtZSgpO1xuICAgIGlmIChuZ0Rldk1vZGUpIHtcbiAgICAgICAgYXNzZXJ0RXF1YWwobmV3TEZyYW1lLmlzUGFyZW50LCB0cnVlLCAnRXhwZWN0ZWQgY2xlYW4gTEZyYW1lJyk7XG4gICAgICAgIGFzc2VydEVxdWFsKG5ld0xGcmFtZS5sVmlldywgbnVsbCwgJ0V4cGVjdGVkIGNsZWFuIExGcmFtZScpO1xuICAgICAgICBhc3NlcnRFcXVhbChuZXdMRnJhbWUudFZpZXcsIG51bGwsICdFeHBlY3RlZCBjbGVhbiBMRnJhbWUnKTtcbiAgICAgICAgYXNzZXJ0RXF1YWwobmV3TEZyYW1lLnNlbGVjdGVkSW5kZXgsIC0xLCAnRXhwZWN0ZWQgY2xlYW4gTEZyYW1lJyk7XG4gICAgICAgIGFzc2VydEVxdWFsKG5ld0xGcmFtZS5lbGVtZW50RGVwdGhDb3VudCwgMCwgJ0V4cGVjdGVkIGNsZWFuIExGcmFtZScpO1xuICAgICAgICBhc3NlcnRFcXVhbChuZXdMRnJhbWUuY3VycmVudERpcmVjdGl2ZUluZGV4LCAtMSwgJ0V4cGVjdGVkIGNsZWFuIExGcmFtZScpO1xuICAgICAgICBhc3NlcnRFcXVhbChuZXdMRnJhbWUuY3VycmVudE5hbWVzcGFjZSwgbnVsbCwgJ0V4cGVjdGVkIGNsZWFuIExGcmFtZScpO1xuICAgICAgICBhc3NlcnRFcXVhbChuZXdMRnJhbWUuYmluZGluZ1Jvb3RJbmRleCwgLTEsICdFeHBlY3RlZCBjbGVhbiBMRnJhbWUnKTtcbiAgICAgICAgYXNzZXJ0RXF1YWwobmV3TEZyYW1lLmN1cnJlbnRRdWVyeUluZGV4LCAwLCAnRXhwZWN0ZWQgY2xlYW4gTEZyYW1lJyk7XG4gICAgfVxuICAgIGNvbnN0IHRWaWV3ID0gbmV3Vmlld1tUVklFV107XG4gICAgaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUgPSBuZXdMRnJhbWU7XG4gICAgbmdEZXZNb2RlICYmIHRWaWV3LmZpcnN0Q2hpbGQgJiYgYXNzZXJ0VE5vZGVGb3JUVmlldyh0Vmlldy5maXJzdENoaWxkLCB0Vmlldyk7XG4gICAgbmV3TEZyYW1lLmN1cnJlbnRUTm9kZSA9IHRWaWV3LmZpcnN0Q2hpbGQ7XG4gICAgbmV3TEZyYW1lLmxWaWV3ID0gbmV3VmlldztcbiAgICBuZXdMRnJhbWUudFZpZXcgPSB0VmlldztcbiAgICBuZXdMRnJhbWUuY29udGV4dExWaWV3ID0gbmV3VmlldztcbiAgICBuZXdMRnJhbWUuYmluZGluZ0luZGV4ID0gdFZpZXcuYmluZGluZ1N0YXJ0SW5kZXg7XG4gICAgbmV3TEZyYW1lLmluSTE4biA9IGZhbHNlO1xufVxuLyoqXG4gKiBBbGxvY2F0ZXMgbmV4dCBmcmVlIExGcmFtZS4gVGhpcyBmdW5jdGlvbiB0cmllcyB0byByZXVzZSB0aGUgYExGcmFtZWBzIHRvIGxvd2VyIG1lbW9yeSBwcmVzc3VyZS5cbiAqL1xuZnVuY3Rpb24gYWxsb2NMRnJhbWUoKSB7XG4gICAgY29uc3QgY3VycmVudExGcmFtZSA9IGluc3RydWN0aW9uU3RhdGUubEZyYW1lO1xuICAgIGNvbnN0IGNoaWxkTEZyYW1lID0gY3VycmVudExGcmFtZSA9PT0gbnVsbCA/IG51bGwgOiBjdXJyZW50TEZyYW1lLmNoaWxkO1xuICAgIGNvbnN0IG5ld0xGcmFtZSA9IGNoaWxkTEZyYW1lID09PSBudWxsID8gY3JlYXRlTEZyYW1lKGN1cnJlbnRMRnJhbWUpIDogY2hpbGRMRnJhbWU7XG4gICAgcmV0dXJuIG5ld0xGcmFtZTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUxGcmFtZShwYXJlbnQpIHtcbiAgICBjb25zdCBsRnJhbWUgPSB7XG4gICAgICAgIGN1cnJlbnRUTm9kZTogbnVsbCxcbiAgICAgICAgaXNQYXJlbnQ6IHRydWUsXG4gICAgICAgIGxWaWV3OiBudWxsLFxuICAgICAgICB0VmlldzogbnVsbCxcbiAgICAgICAgc2VsZWN0ZWRJbmRleDogLTEsXG4gICAgICAgIGNvbnRleHRMVmlldzogbnVsbCxcbiAgICAgICAgZWxlbWVudERlcHRoQ291bnQ6IDAsXG4gICAgICAgIGN1cnJlbnROYW1lc3BhY2U6IG51bGwsXG4gICAgICAgIGN1cnJlbnREaXJlY3RpdmVJbmRleDogLTEsXG4gICAgICAgIGJpbmRpbmdSb290SW5kZXg6IC0xLFxuICAgICAgICBiaW5kaW5nSW5kZXg6IC0xLFxuICAgICAgICBjdXJyZW50UXVlcnlJbmRleDogMCxcbiAgICAgICAgcGFyZW50OiBwYXJlbnQsXG4gICAgICAgIGNoaWxkOiBudWxsLFxuICAgICAgICBpbkkxOG46IGZhbHNlLFxuICAgIH07XG4gICAgcGFyZW50ICE9PSBudWxsICYmIChwYXJlbnQuY2hpbGQgPSBsRnJhbWUpOyAvLyBsaW5rIHRoZSBuZXcgTEZyYW1lIGZvciByZXVzZS5cbiAgICByZXR1cm4gbEZyYW1lO1xufVxuLyoqXG4gKiBBIGxpZ2h0d2VpZ2h0IHZlcnNpb24gb2YgbGVhdmUgd2hpY2ggaXMgdXNlZCB3aXRoIERJLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gb25seSByZXNldHMgYGN1cnJlbnRUTm9kZWAgYW5kIGBMVmlld2AgYXMgdGhvc2UgYXJlIHRoZSBvbmx5IHByb3BlcnRpZXNcbiAqIHVzZWQgd2l0aCBESSAoYGVudGVyREkoKWApLlxuICpcbiAqIE5PVEU6IFRoaXMgZnVuY3Rpb24gaXMgcmVleHBvcnRlZCBhcyBgbGVhdmVESWAuIEhvd2V2ZXIgYGxlYXZlRElgIGhhcyByZXR1cm4gdHlwZSBvZiBgdm9pZGAgd2hlcmVcbiAqIGFzIGBsZWF2ZVZpZXdMaWdodGAgaGFzIGBMRnJhbWVgLiBUaGlzIGlzIHNvIHRoYXQgYGxlYXZlVmlld0xpZ2h0YCBjYW4gYmUgdXNlZCBpbiBgbGVhdmVWaWV3YC5cbiAqL1xuZnVuY3Rpb24gbGVhdmVWaWV3TGlnaHQoKSB7XG4gICAgY29uc3Qgb2xkTEZyYW1lID0gaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWU7XG4gICAgaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUgPSBvbGRMRnJhbWUucGFyZW50O1xuICAgIG9sZExGcmFtZS5jdXJyZW50VE5vZGUgPSBudWxsO1xuICAgIG9sZExGcmFtZS5sVmlldyA9IG51bGw7XG4gICAgcmV0dXJuIG9sZExGcmFtZTtcbn1cbi8qKlxuICogVGhpcyBpcyBhIGxpZ2h0d2VpZ2h0IHZlcnNpb24gb2YgdGhlIGBsZWF2ZVZpZXdgIHdoaWNoIGlzIG5lZWRlZCBieSB0aGUgREkgc3lzdGVtLlxuICpcbiAqIE5PVEU6IHRoaXMgZnVuY3Rpb24gaXMgYW4gYWxpYXMgc28gdGhhdCB3ZSBjYW4gY2hhbmdlIHRoZSB0eXBlIG9mIHRoZSBmdW5jdGlvbiB0byBoYXZlIGB2b2lkYFxuICogcmV0dXJuIHR5cGUuXG4gKi9cbmNvbnN0IGxlYXZlREkgPSBsZWF2ZVZpZXdMaWdodDtcbi8qKlxuICogTGVhdmUgdGhlIGN1cnJlbnQgYExWaWV3YFxuICpcbiAqIFRoaXMgcG9wcyB0aGUgYExGcmFtZWAgd2l0aCB0aGUgYXNzb2NpYXRlZCBgTFZpZXdgIGZyb20gdGhlIHN0YWNrLlxuICpcbiAqIElNUE9SVEFOVDogV2UgbXVzdCB6ZXJvIG91dCB0aGUgYExGcmFtZWAgdmFsdWVzIGhlcmUgb3RoZXJ3aXNlIHRoZXkgd2lsbCBiZSByZXRhaW5lZC4gVGhpcyBpc1xuICogYmVjYXVzZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucyB3ZSBkb24ndCByZWxlYXNlIGBMRnJhbWVgIGJ1dCByYXRoZXIga2VlcCBpdCBmb3IgbmV4dCB1c2UuXG4gKi9cbmZ1bmN0aW9uIGxlYXZlVmlldygpIHtcbiAgICBjb25zdCBvbGRMRnJhbWUgPSBsZWF2ZVZpZXdMaWdodCgpO1xuICAgIG9sZExGcmFtZS5pc1BhcmVudCA9IHRydWU7XG4gICAgb2xkTEZyYW1lLnRWaWV3ID0gbnVsbDtcbiAgICBvbGRMRnJhbWUuc2VsZWN0ZWRJbmRleCA9IC0xO1xuICAgIG9sZExGcmFtZS5jb250ZXh0TFZpZXcgPSBudWxsO1xuICAgIG9sZExGcmFtZS5lbGVtZW50RGVwdGhDb3VudCA9IDA7XG4gICAgb2xkTEZyYW1lLmN1cnJlbnREaXJlY3RpdmVJbmRleCA9IC0xO1xuICAgIG9sZExGcmFtZS5jdXJyZW50TmFtZXNwYWNlID0gbnVsbDtcbiAgICBvbGRMRnJhbWUuYmluZGluZ1Jvb3RJbmRleCA9IC0xO1xuICAgIG9sZExGcmFtZS5iaW5kaW5nSW5kZXggPSAtMTtcbiAgICBvbGRMRnJhbWUuY3VycmVudFF1ZXJ5SW5kZXggPSAwO1xufVxuZnVuY3Rpb24gbmV4dENvbnRleHRJbXBsKGxldmVsKSB7XG4gICAgY29uc3QgY29udGV4dExWaWV3ID0gaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUuY29udGV4dExWaWV3ID1cbiAgICAgICAgd2Fsa1VwVmlld3MobGV2ZWwsIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLmNvbnRleHRMVmlldyk7XG4gICAgcmV0dXJuIGNvbnRleHRMVmlld1tDT05URVhUXTtcbn1cbmZ1bmN0aW9uIHdhbGtVcFZpZXdzKG5lc3RpbmdMZXZlbCwgY3VycmVudFZpZXcpIHtcbiAgICB3aGlsZSAobmVzdGluZ0xldmVsID4gMCkge1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIGFzc2VydERlZmluZWQoY3VycmVudFZpZXdbREVDTEFSQVRJT05fVklFV10sICdEZWNsYXJhdGlvbiB2aWV3IHNob3VsZCBiZSBkZWZpbmVkIGlmIG5lc3RpbmcgbGV2ZWwgaXMgZ3JlYXRlciB0aGFuIDAuJyk7XG4gICAgICAgIGN1cnJlbnRWaWV3ID0gY3VycmVudFZpZXdbREVDTEFSQVRJT05fVklFV107XG4gICAgICAgIG5lc3RpbmdMZXZlbC0tO1xuICAgIH1cbiAgICByZXR1cm4gY3VycmVudFZpZXc7XG59XG4vKipcbiAqIEdldHMgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBlbGVtZW50IGluZGV4LlxuICpcbiAqIFVzZWQgd2l0aCB7QGxpbmsgcHJvcGVydHl9IGluc3RydWN0aW9uIChhbmQgbW9yZSBpbiB0aGUgZnV0dXJlKSB0byBpZGVudGlmeSB0aGUgaW5kZXggaW4gdGhlXG4gKiBjdXJyZW50IGBMVmlld2AgdG8gYWN0IG9uLlxuICovXG5mdW5jdGlvbiBnZXRTZWxlY3RlZEluZGV4KCkge1xuICAgIHJldHVybiBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5zZWxlY3RlZEluZGV4O1xufVxuLyoqXG4gKiBTZXRzIHRoZSBtb3N0IHJlY2VudCBpbmRleCBwYXNzZWQgdG8ge0BsaW5rIHNlbGVjdH1cbiAqXG4gKiBVc2VkIHdpdGgge0BsaW5rIHByb3BlcnR5fSBpbnN0cnVjdGlvbiAoYW5kIG1vcmUgaW4gdGhlIGZ1dHVyZSkgdG8gaWRlbnRpZnkgdGhlIGluZGV4IGluIHRoZVxuICogY3VycmVudCBgTFZpZXdgIHRvIGFjdCBvbi5cbiAqXG4gKiAoTm90ZSB0aGF0IGlmIGFuIFwiZXhpdCBmdW5jdGlvblwiIHdhcyBzZXQgZWFybGllciAodmlhIGBzZXRFbGVtZW50RXhpdEZuKClgKSB0aGVuIHRoYXQgd2lsbCBiZVxuICogcnVuIGlmIGFuZCB3aGVuIHRoZSBwcm92aWRlZCBgaW5kZXhgIHZhbHVlIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBjdXJyZW50IHNlbGVjdGVkIGluZGV4IHZhbHVlLilcbiAqL1xuZnVuY3Rpb24gc2V0U2VsZWN0ZWRJbmRleChpbmRleCkge1xuICAgIG5nRGV2TW9kZSAmJiBpbmRleCAhPT0gLTEgJiZcbiAgICAgICAgYXNzZXJ0R3JlYXRlclRoYW5PckVxdWFsKGluZGV4LCBIRUFERVJfT0ZGU0VULCAnSW5kZXggbXVzdCBiZSBwYXN0IEhFQURFUl9PRkZTRVQgKG9yIC0xKS4nKTtcbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0TGVzc1RoYW4oaW5kZXgsIGluc3RydWN0aW9uU3RhdGUubEZyYW1lLmxWaWV3Lmxlbmd0aCwgJ0NhblxcJ3Qgc2V0IGluZGV4IHBhc3NlZCBlbmQgb2YgTFZpZXcnKTtcbiAgICBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5zZWxlY3RlZEluZGV4ID0gaW5kZXg7XG59XG4vKipcbiAqIEdldHMgdGhlIGB0Tm9kZWAgdGhhdCByZXByZXNlbnRzIGN1cnJlbnRseSBzZWxlY3RlZCBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBnZXRTZWxlY3RlZFROb2RlKCkge1xuICAgIGNvbnN0IGxGcmFtZSA9IGluc3RydWN0aW9uU3RhdGUubEZyYW1lO1xuICAgIHJldHVybiBnZXRUTm9kZShsRnJhbWUudFZpZXcsIGxGcmFtZS5zZWxlY3RlZEluZGV4KTtcbn1cbi8qKlxuICogU2V0cyB0aGUgbmFtZXNwYWNlIHVzZWQgdG8gY3JlYXRlIGVsZW1lbnRzIHRvIGAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnYCBpbiBnbG9iYWwgc3RhdGUuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtW5hbWVzcGFjZVNWRygpIHtcbiAgICBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5jdXJyZW50TmFtZXNwYWNlID0gU1ZHX05BTUVTUEFDRTtcbn1cbi8qKlxuICogU2V0cyB0aGUgbmFtZXNwYWNlIHVzZWQgdG8gY3JlYXRlIGVsZW1lbnRzIHRvIGAnaHR0cDovL3d3dy53My5vcmcvMTk5OC9NYXRoTUwvJ2AgaW4gZ2xvYmFsIHN0YXRlLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVuYW1lc3BhY2VNYXRoTUwoKSB7XG4gICAgaW5zdHJ1Y3Rpb25TdGF0ZS5sRnJhbWUuY3VycmVudE5hbWVzcGFjZSA9IE1BVEhfTUxfTkFNRVNQQUNFO1xufVxuLyoqXG4gKiBTZXRzIHRoZSBuYW1lc3BhY2UgdXNlZCB0byBjcmVhdGUgZWxlbWVudHMgdG8gYG51bGxgLCB3aGljaCBmb3JjZXMgZWxlbWVudCBjcmVhdGlvbiB0byB1c2VcbiAqIGBjcmVhdGVFbGVtZW50YCByYXRoZXIgdGhhbiBgY3JlYXRlRWxlbWVudE5TYC5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1bmFtZXNwYWNlSFRNTCgpIHtcbiAgICBuYW1lc3BhY2VIVE1MSW50ZXJuYWwoKTtcbn1cbi8qKlxuICogU2V0cyB0aGUgbmFtZXNwYWNlIHVzZWQgdG8gY3JlYXRlIGVsZW1lbnRzIHRvIGBudWxsYCwgd2hpY2ggZm9yY2VzIGVsZW1lbnQgY3JlYXRpb24gdG8gdXNlXG4gKiBgY3JlYXRlRWxlbWVudGAgcmF0aGVyIHRoYW4gYGNyZWF0ZUVsZW1lbnROU2AuXG4gKi9cbmZ1bmN0aW9uIG5hbWVzcGFjZUhUTUxJbnRlcm5hbCgpIHtcbiAgICBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5jdXJyZW50TmFtZXNwYWNlID0gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldE5hbWVzcGFjZSQxKCkge1xuICAgIHJldHVybiBpbnN0cnVjdGlvblN0YXRlLmxGcmFtZS5jdXJyZW50TmFtZXNwYWNlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQWRkcyBhbGwgZGlyZWN0aXZlIGxpZmVjeWNsZSBob29rcyBmcm9tIHRoZSBnaXZlbiBgRGlyZWN0aXZlRGVmYCB0byB0aGUgZ2l2ZW4gYFRWaWV3YC5cbiAqXG4gKiBNdXN0IGJlIHJ1biAqb25seSogb24gdGhlIGZpcnN0IHRlbXBsYXRlIHBhc3MuXG4gKlxuICogU2V0cyB1cCB0aGUgcHJlLW9yZGVyIGhvb2tzIG9uIHRoZSBwcm92aWRlZCBgdFZpZXdgLFxuICogc2VlIHtAbGluayBIb29rRGF0YX0gZm9yIGRldGFpbHMgYWJvdXQgdGhlIGRhdGEgc3RydWN0dXJlLlxuICpcbiAqIEBwYXJhbSBkaXJlY3RpdmVJbmRleCBUaGUgaW5kZXggb2YgdGhlIGRpcmVjdGl2ZSBpbiBMVmlld1xuICogQHBhcmFtIGRpcmVjdGl2ZURlZiBUaGUgZGVmaW5pdGlvbiBjb250YWluaW5nIHRoZSBob29rcyB0byBzZXR1cCBpbiB0Vmlld1xuICogQHBhcmFtIHRWaWV3IFRoZSBjdXJyZW50IFRWaWV3XG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyUHJlT3JkZXJIb29rcyhkaXJlY3RpdmVJbmRleCwgZGlyZWN0aXZlRGVmLCB0Vmlldykge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRGaXJzdENyZWF0ZVBhc3ModFZpZXcpO1xuICAgIGNvbnN0IHsgbmdPbkNoYW5nZXMsIG5nT25Jbml0LCBuZ0RvQ2hlY2sgfSA9IGRpcmVjdGl2ZURlZi50eXBlLnByb3RvdHlwZTtcbiAgICBpZiAobmdPbkNoYW5nZXMpIHtcbiAgICAgICAgY29uc3Qgd3JhcHBlZE9uQ2hhbmdlcyA9IE5nT25DaGFuZ2VzRmVhdHVyZUltcGwoZGlyZWN0aXZlRGVmKTtcbiAgICAgICAgKHRWaWV3LnByZU9yZGVySG9va3MgfHwgKHRWaWV3LnByZU9yZGVySG9va3MgPSBbXSkpLnB1c2goZGlyZWN0aXZlSW5kZXgsIHdyYXBwZWRPbkNoYW5nZXMpO1xuICAgICAgICAodFZpZXcucHJlT3JkZXJDaGVja0hvb2tzIHx8ICh0Vmlldy5wcmVPcmRlckNoZWNrSG9va3MgPSBbXSkpXG4gICAgICAgICAgICAucHVzaChkaXJlY3RpdmVJbmRleCwgd3JhcHBlZE9uQ2hhbmdlcyk7XG4gICAgfVxuICAgIGlmIChuZ09uSW5pdCkge1xuICAgICAgICAodFZpZXcucHJlT3JkZXJIb29rcyB8fCAodFZpZXcucHJlT3JkZXJIb29rcyA9IFtdKSkucHVzaCgwIC0gZGlyZWN0aXZlSW5kZXgsIG5nT25Jbml0KTtcbiAgICB9XG4gICAgaWYgKG5nRG9DaGVjaykge1xuICAgICAgICAodFZpZXcucHJlT3JkZXJIb29rcyB8fCAodFZpZXcucHJlT3JkZXJIb29rcyA9IFtdKSkucHVzaChkaXJlY3RpdmVJbmRleCwgbmdEb0NoZWNrKTtcbiAgICAgICAgKHRWaWV3LnByZU9yZGVyQ2hlY2tIb29rcyB8fCAodFZpZXcucHJlT3JkZXJDaGVja0hvb2tzID0gW10pKS5wdXNoKGRpcmVjdGl2ZUluZGV4LCBuZ0RvQ2hlY2spO1xuICAgIH1cbn1cbi8qKlxuICpcbiAqIExvb3BzIHRocm91Z2ggdGhlIGRpcmVjdGl2ZXMgb24gdGhlIHByb3ZpZGVkIGB0Tm9kZWAgYW5kIHF1ZXVlcyBob29rcyB0byBiZVxuICogcnVuIHRoYXQgYXJlIG5vdCBpbml0aWFsaXphdGlvbiBob29rcy5cbiAqXG4gKiBTaG91bGQgYmUgZXhlY3V0ZWQgZHVyaW5nIGBlbGVtZW50RW5kKClgIGFuZCBzaW1pbGFyIHRvXG4gKiBwcmVzZXJ2ZSBob29rIGV4ZWN1dGlvbiBvcmRlci4gQ29udGVudCwgdmlldywgYW5kIGRlc3Ryb3kgaG9va3MgZm9yIHByb2plY3RlZFxuICogY29tcG9uZW50cyBhbmQgZGlyZWN0aXZlcyBtdXN0IGJlIGNhbGxlZCAqYmVmb3JlKiB0aGVpciBob3N0cy5cbiAqXG4gKiBTZXRzIHVwIHRoZSBjb250ZW50LCB2aWV3LCBhbmQgZGVzdHJveSBob29rcyBvbiB0aGUgcHJvdmlkZWQgYHRWaWV3YCxcbiAqIHNlZSB7QGxpbmsgSG9va0RhdGF9IGZvciBkZXRhaWxzIGFib3V0IHRoZSBkYXRhIHN0cnVjdHVyZS5cbiAqXG4gKiBOT1RFOiBUaGlzIGRvZXMgbm90IHNldCB1cCBgb25DaGFuZ2VzYCwgYG9uSW5pdGAgb3IgYGRvQ2hlY2tgLCB0aG9zZSBhcmUgc2V0IHVwXG4gKiBzZXBhcmF0ZWx5IGF0IGBlbGVtZW50U3RhcnRgLlxuICpcbiAqIEBwYXJhbSB0VmlldyBUaGUgY3VycmVudCBUVmlld1xuICogQHBhcmFtIHROb2RlIFRoZSBUTm9kZSB3aG9zZSBkaXJlY3RpdmVzIGFyZSB0byBiZSBzZWFyY2hlZCBmb3IgaG9va3MgdG8gcXVldWVcbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJQb3N0T3JkZXJIb29rcyh0VmlldywgdE5vZGUpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Rmlyc3RDcmVhdGVQYXNzKHRWaWV3KTtcbiAgICAvLyBJdCdzIG5lY2Vzc2FyeSB0byBsb29wIHRocm91Z2ggdGhlIGRpcmVjdGl2ZXMgYXQgZWxlbWVudEVuZCgpIChyYXRoZXIgdGhhbiBwcm9jZXNzaW5nIGluXG4gICAgLy8gZGlyZWN0aXZlQ3JlYXRlKSBzbyB3ZSBjYW4gcHJlc2VydmUgdGhlIGN1cnJlbnQgaG9vayBvcmRlci4gQ29udGVudCwgdmlldywgYW5kIGRlc3Ryb3lcbiAgICAvLyBob29rcyBmb3IgcHJvamVjdGVkIGNvbXBvbmVudHMgYW5kIGRpcmVjdGl2ZXMgbXVzdCBiZSBjYWxsZWQgKmJlZm9yZSogdGhlaXIgaG9zdHMuXG4gICAgZm9yIChsZXQgaSA9IHROb2RlLmRpcmVjdGl2ZVN0YXJ0LCBlbmQgPSB0Tm9kZS5kaXJlY3RpdmVFbmQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICBjb25zdCBkaXJlY3RpdmVEZWYgPSB0Vmlldy5kYXRhW2ldO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChkaXJlY3RpdmVEZWYsICdFeHBlY3RpbmcgRGlyZWN0aXZlRGVmJyk7XG4gICAgICAgIGNvbnN0IGxpZmVjeWNsZUhvb2tzID0gZGlyZWN0aXZlRGVmLnR5cGUucHJvdG90eXBlO1xuICAgICAgICBjb25zdCB7IG5nQWZ0ZXJDb250ZW50SW5pdCwgbmdBZnRlckNvbnRlbnRDaGVja2VkLCBuZ0FmdGVyVmlld0luaXQsIG5nQWZ0ZXJWaWV3Q2hlY2tlZCwgbmdPbkRlc3Ryb3kgfSA9IGxpZmVjeWNsZUhvb2tzO1xuICAgICAgICBpZiAobmdBZnRlckNvbnRlbnRJbml0KSB7XG4gICAgICAgICAgICAodFZpZXcuY29udGVudEhvb2tzIHx8ICh0Vmlldy5jb250ZW50SG9va3MgPSBbXSkpLnB1c2goLWksIG5nQWZ0ZXJDb250ZW50SW5pdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCkge1xuICAgICAgICAgICAgKHRWaWV3LmNvbnRlbnRIb29rcyB8fCAodFZpZXcuY29udGVudEhvb2tzID0gW10pKS5wdXNoKGksIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCk7XG4gICAgICAgICAgICAodFZpZXcuY29udGVudENoZWNrSG9va3MgfHwgKHRWaWV3LmNvbnRlbnRDaGVja0hvb2tzID0gW10pKS5wdXNoKGksIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5nQWZ0ZXJWaWV3SW5pdCkge1xuICAgICAgICAgICAgKHRWaWV3LnZpZXdIb29rcyB8fCAodFZpZXcudmlld0hvb2tzID0gW10pKS5wdXNoKC1pLCBuZ0FmdGVyVmlld0luaXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZ0FmdGVyVmlld0NoZWNrZWQpIHtcbiAgICAgICAgICAgICh0Vmlldy52aWV3SG9va3MgfHwgKHRWaWV3LnZpZXdIb29rcyA9IFtdKSkucHVzaChpLCBuZ0FmdGVyVmlld0NoZWNrZWQpO1xuICAgICAgICAgICAgKHRWaWV3LnZpZXdDaGVja0hvb2tzIHx8ICh0Vmlldy52aWV3Q2hlY2tIb29rcyA9IFtdKSkucHVzaChpLCBuZ0FmdGVyVmlld0NoZWNrZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZ09uRGVzdHJveSAhPSBudWxsKSB7XG4gICAgICAgICAgICAodFZpZXcuZGVzdHJveUhvb2tzIHx8ICh0Vmlldy5kZXN0cm95SG9va3MgPSBbXSkpLnB1c2goaSwgbmdPbkRlc3Ryb3kpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBFeGVjdXRpbmcgaG9va3MgcmVxdWlyZXMgY29tcGxleCBsb2dpYyBhcyB3ZSBuZWVkIHRvIGRlYWwgd2l0aCAyIGNvbnN0cmFpbnRzLlxuICpcbiAqIDEuIEluaXQgaG9va3MgKG5nT25Jbml0LCBuZ0FmdGVyQ29udGVudEluaXQsIG5nQWZ0ZXJWaWV3SW5pdCkgbXVzdCBhbGwgYmUgZXhlY3V0ZWQgb25jZSBhbmQgb25seVxuICogb25jZSwgYWNyb3NzIG1hbnkgY2hhbmdlIGRldGVjdGlvbiBjeWNsZXMuIFRoaXMgbXVzdCBiZSB0cnVlIGV2ZW4gaWYgc29tZSBob29rcyB0aHJvdywgb3IgaWZcbiAqIHNvbWUgcmVjdXJzaXZlbHkgdHJpZ2dlciBhIGNoYW5nZSBkZXRlY3Rpb24gY3ljbGUuXG4gKiBUbyBzb2x2ZSB0aGF0LCBpdCBpcyByZXF1aXJlZCB0byB0cmFjayB0aGUgc3RhdGUgb2YgdGhlIGV4ZWN1dGlvbiBvZiB0aGVzZSBpbml0IGhvb2tzLlxuICogVGhpcyBpcyBkb25lIGJ5IHN0b3JpbmcgYW5kIG1haW50YWluaW5nIGZsYWdzIGluIHRoZSB2aWV3OiB0aGUge0BsaW5rIEluaXRQaGFzZVN0YXRlfSxcbiAqIGFuZCB0aGUgaW5kZXggd2l0aGluIHRoYXQgcGhhc2UuIFRoZXkgY2FuIGJlIHNlZW4gYXMgYSBjdXJzb3IgaW4gdGhlIGZvbGxvd2luZyBzdHJ1Y3R1cmU6XG4gKiBbW29uSW5pdDEsIG9uSW5pdDJdLCBbYWZ0ZXJDb250ZW50SW5pdDFdLCBbYWZ0ZXJWaWV3SW5pdDEsIGFmdGVyVmlld0luaXQyLCBhZnRlclZpZXdJbml0M11dXG4gKiBUaGV5IGFyZSBhcmUgc3RvcmVkIGFzIGZsYWdzIGluIExWaWV3W0ZMQUdTXS5cbiAqXG4gKiAyLiBQcmUtb3JkZXIgaG9va3MgY2FuIGJlIGV4ZWN1dGVkIGluIGJhdGNoZXMsIGJlY2F1c2Ugb2YgdGhlIHNlbGVjdCBpbnN0cnVjdGlvbi5cbiAqIFRvIGJlIGFibGUgdG8gcGF1c2UgYW5kIHJlc3VtZSB0aGVpciBleGVjdXRpb24sIHdlIGFsc28gbmVlZCBzb21lIHN0YXRlIGFib3V0IHRoZSBob29rJ3MgYXJyYXlcbiAqIHRoYXQgaXMgYmVpbmcgcHJvY2Vzc2VkOlxuICogLSB0aGUgaW5kZXggb2YgdGhlIG5leHQgaG9vayB0byBiZSBleGVjdXRlZFxuICogLSB0aGUgbnVtYmVyIG9mIGluaXQgaG9va3MgYWxyZWFkeSBmb3VuZCBpbiB0aGUgcHJvY2Vzc2VkIHBhcnQgb2YgdGhlICBhcnJheVxuICogVGhleSBhcmUgYXJlIHN0b3JlZCBhcyBmbGFncyBpbiBMVmlld1tQUkVPUkRFUl9IT09LX0ZMQUdTXS5cbiAqL1xuLyoqXG4gKiBFeGVjdXRlcyBwcmUtb3JkZXIgY2hlY2sgaG9va3MgKCBPbkNoYW5nZXMsIERvQ2hhbmdlcykgZ2l2ZW4gYSB2aWV3IHdoZXJlIGFsbCB0aGUgaW5pdCBob29rcyB3ZXJlXG4gKiBleGVjdXRlZCBvbmNlLiBUaGlzIGlzIGEgbGlnaHQgdmVyc2lvbiBvZiBleGVjdXRlSW5pdEFuZENoZWNrUHJlT3JkZXJIb29rcyB3aGVyZSB3ZSBjYW4gc2tpcCByZWFkXG4gKiAvIHdyaXRlIG9mIHRoZSBpbml0LWhvb2tzIHJlbGF0ZWQgZmxhZ3MuXG4gKiBAcGFyYW0gbFZpZXcgVGhlIExWaWV3IHdoZXJlIGhvb2tzIGFyZSBkZWZpbmVkXG4gKiBAcGFyYW0gaG9va3MgSG9va3MgdG8gYmUgcnVuXG4gKiBAcGFyYW0gbm9kZUluZGV4IDMgY2FzZXMgZGVwZW5kaW5nIG9uIHRoZSB2YWx1ZTpcbiAqIC0gdW5kZWZpbmVkOiBhbGwgaG9va3MgZnJvbSB0aGUgYXJyYXkgc2hvdWxkIGJlIGV4ZWN1dGVkIChwb3N0LW9yZGVyIGNhc2UpXG4gKiAtIG51bGw6IGV4ZWN1dGUgaG9va3Mgb25seSBmcm9tIHRoZSBzYXZlZCBpbmRleCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBhcnJheSAocHJlLW9yZGVyIGNhc2UsIHdoZW5cbiAqIGZsdXNoaW5nIHRoZSByZW1haW5pbmcgaG9va3MpXG4gKiAtIG51bWJlcjogZXhlY3V0ZSBob29rcyBvbmx5IGZyb20gdGhlIHNhdmVkIGluZGV4IHVudGlsIHRoYXQgbm9kZSBpbmRleCBleGNsdXNpdmUgKHByZS1vcmRlclxuICogY2FzZSwgd2hlbiBleGVjdXRpbmcgc2VsZWN0KG51bWJlcikpXG4gKi9cbmZ1bmN0aW9uIGV4ZWN1dGVDaGVja0hvb2tzKGxWaWV3LCBob29rcywgbm9kZUluZGV4KSB7XG4gICAgY2FsbEhvb2tzKGxWaWV3LCBob29rcywgMyAvKiBJbml0UGhhc2VDb21wbGV0ZWQgKi8sIG5vZGVJbmRleCk7XG59XG4vKipcbiAqIEV4ZWN1dGVzIHBvc3Qtb3JkZXIgaW5pdCBhbmQgY2hlY2sgaG9va3MgKG9uZSBvZiBBZnRlckNvbnRlbnRJbml0LCBBZnRlckNvbnRlbnRDaGVja2VkLFxuICogQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCkgZ2l2ZW4gYSB2aWV3IHdoZXJlIHRoZXJlIGFyZSBwZW5kaW5nIGluaXQgaG9va3MgdG8gYmUgZXhlY3V0ZWQuXG4gKiBAcGFyYW0gbFZpZXcgVGhlIExWaWV3IHdoZXJlIGhvb2tzIGFyZSBkZWZpbmVkXG4gKiBAcGFyYW0gaG9va3MgSG9va3MgdG8gYmUgcnVuXG4gKiBAcGFyYW0gaW5pdFBoYXNlIEEgcGhhc2UgZm9yIHdoaWNoIGhvb2tzIHNob3VsZCBiZSBydW5cbiAqIEBwYXJhbSBub2RlSW5kZXggMyBjYXNlcyBkZXBlbmRpbmcgb24gdGhlIHZhbHVlOlxuICogLSB1bmRlZmluZWQ6IGFsbCBob29rcyBmcm9tIHRoZSBhcnJheSBzaG91bGQgYmUgZXhlY3V0ZWQgKHBvc3Qtb3JkZXIgY2FzZSlcbiAqIC0gbnVsbDogZXhlY3V0ZSBob29rcyBvbmx5IGZyb20gdGhlIHNhdmVkIGluZGV4IHVudGlsIHRoZSBlbmQgb2YgdGhlIGFycmF5IChwcmUtb3JkZXIgY2FzZSwgd2hlblxuICogZmx1c2hpbmcgdGhlIHJlbWFpbmluZyBob29rcylcbiAqIC0gbnVtYmVyOiBleGVjdXRlIGhvb2tzIG9ubHkgZnJvbSB0aGUgc2F2ZWQgaW5kZXggdW50aWwgdGhhdCBub2RlIGluZGV4IGV4Y2x1c2l2ZSAocHJlLW9yZGVyXG4gKiBjYXNlLCB3aGVuIGV4ZWN1dGluZyBzZWxlY3QobnVtYmVyKSlcbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZUluaXRBbmRDaGVja0hvb2tzKGxWaWV3LCBob29rcywgaW5pdFBoYXNlLCBub2RlSW5kZXgpIHtcbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0Tm90RXF1YWwoaW5pdFBoYXNlLCAzIC8qIEluaXRQaGFzZUNvbXBsZXRlZCAqLywgJ0luaXQgcHJlLW9yZGVyIGhvb2tzIHNob3VsZCBub3QgYmUgY2FsbGVkIG1vcmUgdGhhbiBvbmNlJyk7XG4gICAgaWYgKChsVmlld1tGTEFHU10gJiAzIC8qIEluaXRQaGFzZVN0YXRlTWFzayAqLykgPT09IGluaXRQaGFzZSkge1xuICAgICAgICBjYWxsSG9va3MobFZpZXcsIGhvb2tzLCBpbml0UGhhc2UsIG5vZGVJbmRleCk7XG4gICAgfVxufVxuZnVuY3Rpb24gaW5jcmVtZW50SW5pdFBoYXNlRmxhZ3MobFZpZXcsIGluaXRQaGFzZSkge1xuICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICBhc3NlcnROb3RFcXVhbChpbml0UGhhc2UsIDMgLyogSW5pdFBoYXNlQ29tcGxldGVkICovLCAnSW5pdCBob29rcyBwaGFzZSBzaG91bGQgbm90IGJlIGluY3JlbWVudGVkIGFmdGVyIGFsbCBpbml0IGhvb2tzIGhhdmUgYmVlbiBydW4uJyk7XG4gICAgbGV0IGZsYWdzID0gbFZpZXdbRkxBR1NdO1xuICAgIGlmICgoZmxhZ3MgJiAzIC8qIEluaXRQaGFzZVN0YXRlTWFzayAqLykgPT09IGluaXRQaGFzZSkge1xuICAgICAgICBmbGFncyAmPSAyMDQ3IC8qIEluZGV4V2l0aGluSW5pdFBoYXNlUmVzZXQgKi87XG4gICAgICAgIGZsYWdzICs9IDEgLyogSW5pdFBoYXNlU3RhdGVJbmNyZW1lbnRlciAqLztcbiAgICAgICAgbFZpZXdbRkxBR1NdID0gZmxhZ3M7XG4gICAgfVxufVxuLyoqXG4gKiBDYWxscyBsaWZlY3ljbGUgaG9va3Mgd2l0aCB0aGVpciBjb250ZXh0cywgc2tpcHBpbmcgaW5pdCBob29rcyBpZiBpdCdzIG5vdFxuICogdGhlIGZpcnN0IExWaWV3IHBhc3NcbiAqXG4gKiBAcGFyYW0gY3VycmVudFZpZXcgVGhlIGN1cnJlbnQgdmlld1xuICogQHBhcmFtIGFyciBUaGUgYXJyYXkgaW4gd2hpY2ggdGhlIGhvb2tzIGFyZSBmb3VuZFxuICogQHBhcmFtIGluaXRQaGFzZVN0YXRlIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBpbml0IHBoYXNlXG4gKiBAcGFyYW0gY3VycmVudE5vZGVJbmRleCAzIGNhc2VzIGRlcGVuZGluZyBvbiB0aGUgdmFsdWU6XG4gKiAtIHVuZGVmaW5lZDogYWxsIGhvb2tzIGZyb20gdGhlIGFycmF5IHNob3VsZCBiZSBleGVjdXRlZCAocG9zdC1vcmRlciBjYXNlKVxuICogLSBudWxsOiBleGVjdXRlIGhvb2tzIG9ubHkgZnJvbSB0aGUgc2F2ZWQgaW5kZXggdW50aWwgdGhlIGVuZCBvZiB0aGUgYXJyYXkgKHByZS1vcmRlciBjYXNlLCB3aGVuXG4gKiBmbHVzaGluZyB0aGUgcmVtYWluaW5nIGhvb2tzKVxuICogLSBudW1iZXI6IGV4ZWN1dGUgaG9va3Mgb25seSBmcm9tIHRoZSBzYXZlZCBpbmRleCB1bnRpbCB0aGF0IG5vZGUgaW5kZXggZXhjbHVzaXZlIChwcmUtb3JkZXJcbiAqIGNhc2UsIHdoZW4gZXhlY3V0aW5nIHNlbGVjdChudW1iZXIpKVxuICovXG5mdW5jdGlvbiBjYWxsSG9va3MoY3VycmVudFZpZXcsIGFyciwgaW5pdFBoYXNlLCBjdXJyZW50Tm9kZUluZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmXG4gICAgICAgIGFzc2VydEVxdWFsKGlzSW5DaGVja05vQ2hhbmdlc01vZGUoKSwgZmFsc2UsICdIb29rcyBzaG91bGQgbmV2ZXIgYmUgcnVuIHdoZW4gaW4gY2hlY2sgbm8gY2hhbmdlcyBtb2RlLicpO1xuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBjdXJyZW50Tm9kZUluZGV4ICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAoY3VycmVudFZpZXdbUFJFT1JERVJfSE9PS19GTEFHU10gJiA2NTUzNSAvKiBJbmRleE9mVGhlTmV4dFByZU9yZGVySG9va01hc2tNYXNrICovKSA6XG4gICAgICAgIDA7XG4gICAgY29uc3Qgbm9kZUluZGV4TGltaXQgPSBjdXJyZW50Tm9kZUluZGV4ICE9IG51bGwgPyBjdXJyZW50Tm9kZUluZGV4IDogLTE7XG4gICAgY29uc3QgbWF4ID0gYXJyLmxlbmd0aCAtIDE7IC8vIFN0b3AgdGhlIGxvb3AgYXQgbGVuZ3RoIC0gMSwgYmVjYXVzZSB3ZSBsb29rIGZvciB0aGUgaG9vayBhdCBpICsgMVxuICAgIGxldCBsYXN0Tm9kZUluZGV4Rm91bmQgPSAwO1xuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpIDwgbWF4OyBpKyspIHtcbiAgICAgICAgY29uc3QgaG9vayA9IGFycltpICsgMV07XG4gICAgICAgIGlmICh0eXBlb2YgaG9vayA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGxhc3ROb2RlSW5kZXhGb3VuZCA9IGFycltpXTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZUluZGV4ICE9IG51bGwgJiYgbGFzdE5vZGVJbmRleEZvdW5kID49IGN1cnJlbnROb2RlSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGlzSW5pdEhvb2sgPSBhcnJbaV0gPCAwO1xuICAgICAgICAgICAgaWYgKGlzSW5pdEhvb2spXG4gICAgICAgICAgICAgICAgY3VycmVudFZpZXdbUFJFT1JERVJfSE9PS19GTEFHU10gKz0gNjU1MzYgLyogTnVtYmVyT2ZJbml0SG9va3NDYWxsZWRJbmNyZW1lbnRlciAqLztcbiAgICAgICAgICAgIGlmIChsYXN0Tm9kZUluZGV4Rm91bmQgPCBub2RlSW5kZXhMaW1pdCB8fCBub2RlSW5kZXhMaW1pdCA9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNhbGxIb29rKGN1cnJlbnRWaWV3LCBpbml0UGhhc2UsIGFyciwgaSk7XG4gICAgICAgICAgICAgICAgY3VycmVudFZpZXdbUFJFT1JERVJfSE9PS19GTEFHU10gPVxuICAgICAgICAgICAgICAgICAgICAoY3VycmVudFZpZXdbUFJFT1JERVJfSE9PS19GTEFHU10gJiA0Mjk0OTAxNzYwIC8qIE51bWJlck9mSW5pdEhvb2tzQ2FsbGVkTWFzayAqLykgKyBpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEV4ZWN1dGUgb25lIGhvb2sgYWdhaW5zdCB0aGUgY3VycmVudCBgTFZpZXdgLlxuICpcbiAqIEBwYXJhbSBjdXJyZW50VmlldyBUaGUgY3VycmVudCB2aWV3XG4gKiBAcGFyYW0gaW5pdFBoYXNlU3RhdGUgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGluaXQgcGhhc2VcbiAqIEBwYXJhbSBhcnIgVGhlIGFycmF5IGluIHdoaWNoIHRoZSBob29rcyBhcmUgZm91bmRcbiAqIEBwYXJhbSBpIFRoZSBjdXJyZW50IGluZGV4IHdpdGhpbiB0aGUgaG9vayBkYXRhIGFycmF5XG4gKi9cbmZ1bmN0aW9uIGNhbGxIb29rKGN1cnJlbnRWaWV3LCBpbml0UGhhc2UsIGFyciwgaSkge1xuICAgIGNvbnN0IGlzSW5pdEhvb2sgPSBhcnJbaV0gPCAwO1xuICAgIGNvbnN0IGhvb2sgPSBhcnJbaSArIDFdO1xuICAgIGNvbnN0IGRpcmVjdGl2ZUluZGV4ID0gaXNJbml0SG9vayA/IC1hcnJbaV0gOiBhcnJbaV07XG4gICAgY29uc3QgZGlyZWN0aXZlID0gY3VycmVudFZpZXdbZGlyZWN0aXZlSW5kZXhdO1xuICAgIGlmIChpc0luaXRIb29rKSB7XG4gICAgICAgIGNvbnN0IGluZGV4V2l0aGludEluaXRQaGFzZSA9IGN1cnJlbnRWaWV3W0ZMQUdTXSA+PiAxMSAvKiBJbmRleFdpdGhpbkluaXRQaGFzZVNoaWZ0ICovO1xuICAgICAgICAvLyBUaGUgaW5pdCBwaGFzZSBzdGF0ZSBtdXN0IGJlIGFsd2F5cyBjaGVja2VkIGhlcmUgYXMgaXQgbWF5IGhhdmUgYmVlbiByZWN1cnNpdmVseSB1cGRhdGVkLlxuICAgICAgICBpZiAoaW5kZXhXaXRoaW50SW5pdFBoYXNlIDxcbiAgICAgICAgICAgIChjdXJyZW50Vmlld1tQUkVPUkRFUl9IT09LX0ZMQUdTXSA+PiAxNiAvKiBOdW1iZXJPZkluaXRIb29rc0NhbGxlZFNoaWZ0ICovKSAmJlxuICAgICAgICAgICAgKGN1cnJlbnRWaWV3W0ZMQUdTXSAmIDMgLyogSW5pdFBoYXNlU3RhdGVNYXNrICovKSA9PT0gaW5pdFBoYXNlKSB7XG4gICAgICAgICAgICBjdXJyZW50Vmlld1tGTEFHU10gKz0gMjA0OCAvKiBJbmRleFdpdGhpbkluaXRQaGFzZUluY3JlbWVudGVyICovO1xuICAgICAgICAgICAgcHJvZmlsZXIoNCAvKiBMaWZlY3ljbGVIb29rU3RhcnQgKi8sIGRpcmVjdGl2ZSwgaG9vayk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGhvb2suY2FsbChkaXJlY3RpdmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgcHJvZmlsZXIoNSAvKiBMaWZlY3ljbGVIb29rRW5kICovLCBkaXJlY3RpdmUsIGhvb2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcm9maWxlcig0IC8qIExpZmVjeWNsZUhvb2tTdGFydCAqLywgZGlyZWN0aXZlLCBob29rKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGhvb2suY2FsbChkaXJlY3RpdmUpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgcHJvZmlsZXIoNSAvKiBMaWZlY3ljbGVIb29rRW5kICovLCBkaXJlY3RpdmUsIGhvb2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IE5PX1BBUkVOVF9JTkpFQ1RPUiA9IC0xO1xuLyoqXG4gKiBFYWNoIGluamVjdG9yIGlzIHNhdmVkIGluIDkgY29udGlndW91cyBzbG90cyBpbiBgTFZpZXdgIGFuZCA5IGNvbnRpZ3VvdXMgc2xvdHMgaW5cbiAqIGBUVmlldy5kYXRhYC4gVGhpcyBhbGxvd3MgdXMgdG8gc3RvcmUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGN1cnJlbnQgbm9kZSdzIHRva2VucyAod2hpY2hcbiAqIGNhbiBiZSBzaGFyZWQgaW4gYFRWaWV3YCkgYXMgd2VsbCBhcyB0aGUgdG9rZW5zIG9mIGl0cyBhbmNlc3RvciBub2RlcyAod2hpY2ggY2Fubm90IGJlXG4gKiBzaGFyZWQsIHNvIHRoZXkgbGl2ZSBpbiBgTFZpZXdgKS5cbiAqXG4gKiBFYWNoIG9mIHRoZXNlIHNsb3RzIChhc2lkZSBmcm9tIHRoZSBsYXN0IHNsb3QpIGNvbnRhaW5zIGEgYmxvb20gZmlsdGVyLiBUaGlzIGJsb29tIGZpbHRlclxuICogZGV0ZXJtaW5lcyB3aGV0aGVyIGEgZGlyZWN0aXZlIGlzIGF2YWlsYWJsZSBvbiB0aGUgYXNzb2NpYXRlZCBub2RlIG9yIG5vdC4gVGhpcyBwcmV2ZW50cyB1c1xuICogZnJvbSBzZWFyY2hpbmcgdGhlIGRpcmVjdGl2ZXMgYXJyYXkgYXQgdGhpcyBsZXZlbCB1bmxlc3MgaXQncyBwcm9iYWJsZSB0aGUgZGlyZWN0aXZlIGlzIGluIGl0LlxuICpcbiAqIFNlZTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmxvb21fZmlsdGVyIGZvciBtb3JlIGFib3V0IGJsb29tIGZpbHRlcnMuXG4gKlxuICogQmVjYXVzZSBhbGwgaW5qZWN0b3JzIGhhdmUgYmVlbiBmbGF0dGVuZWQgaW50byBgTFZpZXdgIGFuZCBgVFZpZXdEYXRhYCwgdGhleSBjYW5ub3QgdHlwZWRcbiAqIHVzaW5nIGludGVyZmFjZXMgYXMgdGhleSB3ZXJlIHByZXZpb3VzbHkuIFRoZSBzdGFydCBpbmRleCBvZiBlYWNoIGBMSW5qZWN0b3JgIGFuZCBgVEluamVjdG9yYFxuICogd2lsbCBkaWZmZXIgYmFzZWQgb24gd2hlcmUgaXQgaXMgZmxhdHRlbmVkIGludG8gdGhlIG1haW4gYXJyYXksIHNvIGl0J3Mgbm90IHBvc3NpYmxlIHRvIGtub3dcbiAqIHRoZSBpbmRpY2VzIGFoZWFkIG9mIHRpbWUgYW5kIHNhdmUgdGhlaXIgdHlwZXMgaGVyZS4gVGhlIGludGVyZmFjZXMgYXJlIHN0aWxsIGluY2x1ZGVkIGhlcmVcbiAqIGZvciBkb2N1bWVudGF0aW9uIHB1cnBvc2VzLlxuICpcbiAqIGV4cG9ydCBpbnRlcmZhY2UgTEluamVjdG9yIGV4dGVuZHMgQXJyYXk8YW55PiB7XG4gKlxuICogICAgLy8gQ3VtdWxhdGl2ZSBibG9vbSBmb3IgZGlyZWN0aXZlIElEcyAwLTMxICAoSURzIGFyZSAlIEJMT09NX1NJWkUpXG4gKiAgICBbMF06IG51bWJlcjtcbiAqXG4gKiAgICAvLyBDdW11bGF0aXZlIGJsb29tIGZvciBkaXJlY3RpdmUgSURzIDMyLTYzXG4gKiAgICBbMV06IG51bWJlcjtcbiAqXG4gKiAgICAvLyBDdW11bGF0aXZlIGJsb29tIGZvciBkaXJlY3RpdmUgSURzIDY0LTk1XG4gKiAgICBbMl06IG51bWJlcjtcbiAqXG4gKiAgICAvLyBDdW11bGF0aXZlIGJsb29tIGZvciBkaXJlY3RpdmUgSURzIDk2LTEyN1xuICogICAgWzNdOiBudW1iZXI7XG4gKlxuICogICAgLy8gQ3VtdWxhdGl2ZSBibG9vbSBmb3IgZGlyZWN0aXZlIElEcyAxMjgtMTU5XG4gKiAgICBbNF06IG51bWJlcjtcbiAqXG4gKiAgICAvLyBDdW11bGF0aXZlIGJsb29tIGZvciBkaXJlY3RpdmUgSURzIDE2MCAtIDE5MVxuICogICAgWzVdOiBudW1iZXI7XG4gKlxuICogICAgLy8gQ3VtdWxhdGl2ZSBibG9vbSBmb3IgZGlyZWN0aXZlIElEcyAxOTIgLSAyMjNcbiAqICAgIFs2XTogbnVtYmVyO1xuICpcbiAqICAgIC8vIEN1bXVsYXRpdmUgYmxvb20gZm9yIGRpcmVjdGl2ZSBJRHMgMjI0IC0gMjU1XG4gKiAgICBbN106IG51bWJlcjtcbiAqXG4gKiAgICAvLyBXZSBuZWVkIHRvIHN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSBpbmplY3RvcidzIHBhcmVudCBzbyBESSBjYW4ga2VlcCBsb29raW5nIHVwXG4gKiAgICAvLyB0aGUgaW5qZWN0b3IgdHJlZSB1bnRpbCBpdCBmaW5kcyB0aGUgZGVwZW5kZW5jeSBpdCdzIGxvb2tpbmcgZm9yLlxuICogICAgW1BBUkVOVF9JTkpFQ1RPUl06IG51bWJlcjtcbiAqIH1cbiAqXG4gKiBleHBvcnQgaW50ZXJmYWNlIFRJbmplY3RvciBleHRlbmRzIEFycmF5PGFueT4ge1xuICpcbiAqICAgIC8vIFNoYXJlZCBub2RlIGJsb29tIGZvciBkaXJlY3RpdmUgSURzIDAtMzEgIChJRHMgYXJlICUgQkxPT01fU0laRSlcbiAqICAgIFswXTogbnVtYmVyO1xuICpcbiAqICAgIC8vIFNoYXJlZCBub2RlIGJsb29tIGZvciBkaXJlY3RpdmUgSURzIDMyLTYzXG4gKiAgICBbMV06IG51bWJlcjtcbiAqXG4gKiAgICAvLyBTaGFyZWQgbm9kZSBibG9vbSBmb3IgZGlyZWN0aXZlIElEcyA2NC05NVxuICogICAgWzJdOiBudW1iZXI7XG4gKlxuICogICAgLy8gU2hhcmVkIG5vZGUgYmxvb20gZm9yIGRpcmVjdGl2ZSBJRHMgOTYtMTI3XG4gKiAgICBbM106IG51bWJlcjtcbiAqXG4gKiAgICAvLyBTaGFyZWQgbm9kZSBibG9vbSBmb3IgZGlyZWN0aXZlIElEcyAxMjgtMTU5XG4gKiAgICBbNF06IG51bWJlcjtcbiAqXG4gKiAgICAvLyBTaGFyZWQgbm9kZSBibG9vbSBmb3IgZGlyZWN0aXZlIElEcyAxNjAgLSAxOTFcbiAqICAgIFs1XTogbnVtYmVyO1xuICpcbiAqICAgIC8vIFNoYXJlZCBub2RlIGJsb29tIGZvciBkaXJlY3RpdmUgSURzIDE5MiAtIDIyM1xuICogICAgWzZdOiBudW1iZXI7XG4gKlxuICogICAgLy8gU2hhcmVkIG5vZGUgYmxvb20gZm9yIGRpcmVjdGl2ZSBJRHMgMjI0IC0gMjU1XG4gKiAgICBbN106IG51bWJlcjtcbiAqXG4gKiAgICAvLyBOZWNlc3NhcnkgdG8gZmluZCBkaXJlY3RpdmUgaW5kaWNlcyBmb3IgYSBwYXJ0aWN1bGFyIG5vZGUuXG4gKiAgICBbVE5PREVdOiBURWxlbWVudE5vZGV8VEVsZW1lbnRDb250YWluZXJOb2RlfFRDb250YWluZXJOb2RlO1xuICogIH1cbiAqL1xuLyoqXG4gKiBGYWN0b3J5IGZvciBjcmVhdGluZyBpbnN0YW5jZXMgb2YgaW5qZWN0b3JzIGluIHRoZSBOb2RlSW5qZWN0b3IuXG4gKlxuICogVGhpcyBmYWN0b3J5IGlzIGNvbXBsaWNhdGVkIGJ5IHRoZSBmYWN0IHRoYXQgaXQgY2FuIHJlc29sdmUgYG11bHRpYCBmYWN0b3JpZXMgYXMgd2VsbC5cbiAqXG4gKiBOT1RFOiBTb21lIG9mIHRoZSBmaWVsZHMgYXJlIG9wdGlvbmFsIHdoaWNoIG1lYW5zIHRoYXQgdGhpcyBjbGFzcyBoYXMgdHdvIGhpZGRlbiBjbGFzc2VzLlxuICogLSBPbmUgd2l0aG91dCBgbXVsdGlgIHN1cHBvcnQgKG1vc3QgY29tbW9uKVxuICogLSBPbmUgd2l0aCBgbXVsdGlgIHZhbHVlcywgKHJhcmUpLlxuICpcbiAqIFNpbmNlIFZNcyBjYW4gY2FjaGUgdXAgdG8gNCBpbmxpbmUgaGlkZGVuIGNsYXNzZXMgdGhpcyBpcyBPSy5cbiAqXG4gKiAtIFNpbmdsZSBmYWN0b3J5OiBPbmx5IGByZXNvbHZpbmdgIGFuZCBgZmFjdG9yeWAgaXMgZGVmaW5lZC5cbiAqIC0gYHByb3ZpZGVyc2AgZmFjdG9yeTogYGNvbXBvbmVudFByb3ZpZGVyc2AgaXMgYSBudW1iZXIgYW5kIGBpbmRleCA9IC0xYC5cbiAqIC0gYHZpZXdQcm92aWRlcnNgIGZhY3Rvcnk6IGBjb21wb25lbnRQcm92aWRlcnNgIGlzIGEgbnVtYmVyIGFuZCBgaW5kZXhgIHBvaW50cyB0byBgcHJvdmlkZXJzYC5cbiAqL1xuY2xhc3MgTm9kZUluamVjdG9yRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogRmFjdG9yeSB0byBpbnZva2UgaW4gb3JkZXIgdG8gY3JlYXRlIGEgbmV3IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGZhY3RvcnksIFxuICAgIC8qKlxuICAgICAqIFNldCB0byBgdHJ1ZWAgaWYgdGhlIHRva2VuIGlzIGRlY2xhcmVkIGluIGB2aWV3UHJvdmlkZXJzYCAob3IgaWYgaXQgaXMgY29tcG9uZW50KS5cbiAgICAgKi9cbiAgICBpc1ZpZXdQcm92aWRlciwgaW5qZWN0SW1wbGVtZW50YXRpb24pIHtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcmtlciBzZXQgdG8gdHJ1ZSBkdXJpbmcgZmFjdG9yeSBpbnZvY2F0aW9uIHRvIHNlZSBpZiB3ZSBnZXQgaW50byByZWN1cnNpdmUgbG9vcC5cbiAgICAgICAgICogUmVjdXJzaXZlIGxvb3AgY2F1c2VzIGFuIGVycm9yIHRvIGJlIGRpc3BsYXllZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb2x2aW5nID0gZmFsc2U7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKGZhY3RvcnksICdGYWN0b3J5IG5vdCBzcGVjaWZpZWQnKTtcbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydEVxdWFsKHR5cGVvZiBmYWN0b3J5LCAnZnVuY3Rpb24nLCAnRXhwZWN0ZWQgZmFjdG9yeSBmdW5jdGlvbi4nKTtcbiAgICAgICAgdGhpcy5jYW5TZWVWaWV3UHJvdmlkZXJzID0gaXNWaWV3UHJvdmlkZXI7XG4gICAgICAgIHRoaXMuaW5qZWN0SW1wbCA9IGluamVjdEltcGxlbWVudGF0aW9uO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzRmFjdG9yeShvYmopIHtcbiAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgTm9kZUluamVjdG9yRmFjdG9yeTtcbn1cbi8vIE5vdGU6IFRoaXMgaGFjayBpcyBuZWNlc3Nhcnkgc28gd2UgZG9uJ3QgZXJyb25lb3VzbHkgZ2V0IGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuLy8gZmFpbHVyZSBiYXNlZCBvbiB0eXBlcy5cbmNvbnN0IHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkJDUgPSAxO1xuXG4vKipcbiAqIENvbnZlcnRzIGBUTm9kZVR5cGVgIGludG8gaHVtYW4gcmVhZGFibGUgdGV4dC5cbiAqIE1ha2Ugc3VyZSB0aGlzIG1hdGNoZXMgd2l0aCBgVE5vZGVUeXBlYFxuICovXG5mdW5jdGlvbiB0b1ROb2RlVHlwZUFzU3RyaW5nKHROb2RlVHlwZSkge1xuICAgIGxldCB0ZXh0ID0gJyc7XG4gICAgKHROb2RlVHlwZSAmIDEgLyogVGV4dCAqLykgJiYgKHRleHQgKz0gJ3xUZXh0Jyk7XG4gICAgKHROb2RlVHlwZSAmIDIgLyogRWxlbWVudCAqLykgJiYgKHRleHQgKz0gJ3xFbGVtZW50Jyk7XG4gICAgKHROb2RlVHlwZSAmIDQgLyogQ29udGFpbmVyICovKSAmJiAodGV4dCArPSAnfENvbnRhaW5lcicpO1xuICAgICh0Tm9kZVR5cGUgJiA4IC8qIEVsZW1lbnRDb250YWluZXIgKi8pICYmICh0ZXh0ICs9ICd8RWxlbWVudENvbnRhaW5lcicpO1xuICAgICh0Tm9kZVR5cGUgJiAxNiAvKiBQcm9qZWN0aW9uICovKSAmJiAodGV4dCArPSAnfFByb2plY3Rpb24nKTtcbiAgICAodE5vZGVUeXBlICYgMzIgLyogSWN1ICovKSAmJiAodGV4dCArPSAnfEljdUNvbnRhaW5lcicpO1xuICAgICh0Tm9kZVR5cGUgJiA2NCAvKiBQbGFjZWhvbGRlciAqLykgJiYgKHRleHQgKz0gJ3xQbGFjZWhvbGRlcicpO1xuICAgIHJldHVybiB0ZXh0Lmxlbmd0aCA+IDAgPyB0ZXh0LnN1YnN0cmluZygxKSA6IHRleHQ7XG59XG4vLyBOb3RlOiBUaGlzIGhhY2sgaXMgbmVjZXNzYXJ5IHNvIHdlIGRvbid0IGVycm9uZW91c2x5IGdldCBhIGNpcmN1bGFyIGRlcGVuZGVuY3lcbi8vIGZhaWx1cmUgYmFzZWQgb24gdHlwZXMuXG5jb25zdCB1bnVzZWRWYWx1ZUV4cG9ydFRvUGxhY2F0ZUFqZCQ0ID0gMTtcbi8qKlxuICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGBUTm9kZWAgaGFzIGEgZGlyZWN0aXZlIHdoaWNoIGhhcyBgQElucHV0KClgIGZvciBgY2xhc3NgIGJpbmRpbmcuXG4gKlxuICogYGBgXG4gKiA8ZGl2IG15LWRpciBbY2xhc3NdPVwiZXhwXCI+PC9kaXY+XG4gKiBgYGBcbiAqIGFuZFxuICogYGBgXG4gKiBARGlyZWN0aXZlKHtcbiAqIH0pXG4gKiBjbGFzcyBNeURpcmVjdGl2ZSB7XG4gKiAgIEBJbnB1dCgpXG4gKiAgIGNsYXNzOiBzdHJpbmc7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBJbiB0aGUgYWJvdmUgY2FzZSBpdCBpcyBuZWNlc3NhcnkgdG8gd3JpdGUgdGhlIHJlY29uY2lsZWQgc3R5bGluZyBpbmZvcm1hdGlvbiBpbnRvIHRoZVxuICogZGlyZWN0aXZlJ3MgaW5wdXQuXG4gKlxuICogQHBhcmFtIHROb2RlXG4gKi9cbmZ1bmN0aW9uIGhhc0NsYXNzSW5wdXQodE5vZGUpIHtcbiAgICByZXR1cm4gKHROb2RlLmZsYWdzICYgMTYgLyogaGFzQ2xhc3NJbnB1dCAqLykgIT09IDA7XG59XG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBgVE5vZGVgIGhhcyBhIGRpcmVjdGl2ZSB3aGljaCBoYXMgYEBJbnB1dCgpYCBmb3IgYHN0eWxlYCBiaW5kaW5nLlxuICpcbiAqIGBgYFxuICogPGRpdiBteS1kaXIgW3N0eWxlXT1cImV4cFwiPjwvZGl2PlxuICogYGBgXG4gKiBhbmRcbiAqIGBgYFxuICogQERpcmVjdGl2ZSh7XG4gKiB9KVxuICogY2xhc3MgTXlEaXJlY3RpdmUge1xuICogICBASW5wdXQoKVxuICogICBjbGFzczogc3RyaW5nO1xuICogfVxuICogYGBgXG4gKlxuICogSW4gdGhlIGFib3ZlIGNhc2UgaXQgaXMgbmVjZXNzYXJ5IHRvIHdyaXRlIHRoZSByZWNvbmNpbGVkIHN0eWxpbmcgaW5mb3JtYXRpb24gaW50byB0aGVcbiAqIGRpcmVjdGl2ZSdzIGlucHV0LlxuICpcbiAqIEBwYXJhbSB0Tm9kZVxuICovXG5mdW5jdGlvbiBoYXNTdHlsZUlucHV0KHROb2RlKSB7XG4gICAgcmV0dXJuICh0Tm9kZS5mbGFncyAmIDMyIC8qIGhhc1N0eWxlSW5wdXQgKi8pICE9PSAwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFROb2RlVHlwZSh0Tm9kZSwgZXhwZWN0ZWRUeXBlcywgbWVzc2FnZSkge1xuICAgIGFzc2VydERlZmluZWQodE5vZGUsICdzaG91bGQgYmUgY2FsbGVkIHdpdGggYSBUTm9kZScpO1xuICAgIGlmICgodE5vZGUudHlwZSAmIGV4cGVjdGVkVHlwZXMpID09PSAwKSB7XG4gICAgICAgIHRocm93RXJyb3IobWVzc2FnZSB8fFxuICAgICAgICAgICAgYEV4cGVjdGVkIFske3RvVE5vZGVUeXBlQXNTdHJpbmcoZXhwZWN0ZWRUeXBlcyl9XSBidXQgZ290ICR7dG9UTm9kZVR5cGVBc1N0cmluZyh0Tm9kZS50eXBlKX0uYCk7XG4gICAgfVxufVxuZnVuY3Rpb24gYXNzZXJ0UHVyZVROb2RlVHlwZSh0eXBlKSB7XG4gICAgaWYgKCEodHlwZSA9PT0gMiAvKiBFbGVtZW50ICovIHx8IC8vXG4gICAgICAgIHR5cGUgPT09IDEgLyogVGV4dCAqLyB8fCAvL1xuICAgICAgICB0eXBlID09PSA0IC8qIENvbnRhaW5lciAqLyB8fCAvL1xuICAgICAgICB0eXBlID09PSA4IC8qIEVsZW1lbnRDb250YWluZXIgKi8gfHwgLy9cbiAgICAgICAgdHlwZSA9PT0gMzIgLyogSWN1ICovIHx8IC8vXG4gICAgICAgIHR5cGUgPT09IDE2IC8qIFByb2plY3Rpb24gKi8gfHwgLy9cbiAgICAgICAgdHlwZSA9PT0gNjQgLyogUGxhY2Vob2xkZXIgKi8pKSB7XG4gICAgICAgIHRocm93RXJyb3IoYEV4cGVjdGVkIFROb2RlVHlwZSB0byBoYXZlIG9ubHkgYSBzaW5nbGUgdHlwZSBzZWxlY3RlZCwgYnV0IGdvdCAke3RvVE5vZGVUeXBlQXNTdHJpbmcodHlwZSl9LmApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBc3NpZ25zIGFsbCBhdHRyaWJ1dGUgdmFsdWVzIHRvIHRoZSBwcm92aWRlZCBlbGVtZW50IHZpYSB0aGUgaW5mZXJyZWQgcmVuZGVyZXIuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBhY2NlcHRzIHR3byBmb3JtcyBvZiBhdHRyaWJ1dGUgZW50cmllczpcbiAqXG4gKiBkZWZhdWx0OiAoa2V5LCB2YWx1ZSk6XG4gKiAgYXR0cnMgPSBba2V5MSwgdmFsdWUxLCBrZXkyLCB2YWx1ZTJdXG4gKlxuICogbmFtZXNwYWNlZDogKE5BTUVTUEFDRV9NQVJLRVIsIHVyaSwgbmFtZSwgdmFsdWUpXG4gKiAgYXR0cnMgPSBbTkFNRVNQQUNFX01BUktFUiwgdXJpLCBuYW1lLCB2YWx1ZSwgTkFNRVNQQUNFX01BUktFUiwgdXJpLCBuYW1lLCB2YWx1ZV1cbiAqXG4gKiBUaGUgYGF0dHJzYCBhcnJheSBjYW4gY29udGFpbiBhIG1peCBvZiBib3RoIHRoZSBkZWZhdWx0IGFuZCBuYW1lc3BhY2VkIGVudHJpZXMuXG4gKiBUaGUgXCJkZWZhdWx0XCIgdmFsdWVzIGFyZSBzZXQgd2l0aG91dCBhIG1hcmtlciwgYnV0IGlmIHRoZSBmdW5jdGlvbiBjb21lcyBhY3Jvc3NcbiAqIGEgbWFya2VyIHZhbHVlIHRoZW4gaXQgd2lsbCBhdHRlbXB0IHRvIHNldCBhIG5hbWVzcGFjZWQgdmFsdWUuIElmIHRoZSBtYXJrZXIgaXNcbiAqIG5vdCBvZiBhIG5hbWVzcGFjZWQgdmFsdWUgdGhlbiB0aGUgZnVuY3Rpb24gd2lsbCBxdWl0IGFuZCByZXR1cm4gdGhlIGluZGV4IHZhbHVlXG4gKiB3aGVyZSBpdCBzdG9wcGVkIGR1cmluZyB0aGUgaXRlcmF0aW9uIG9mIHRoZSBhdHRycyBhcnJheS5cbiAqXG4gKiBTZWUgW0F0dHJpYnV0ZU1hcmtlcl0gdG8gdW5kZXJzdGFuZCB3aGF0IHRoZSBuYW1lc3BhY2UgbWFya2VyIHZhbHVlIGlzLlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGluc3RydWN0aW9uIGRvZXMgbm90IHN1cHBvcnQgYXNzaWduaW5nIHN0eWxlIGFuZCBjbGFzcyB2YWx1ZXMgdG9cbiAqIGFuIGVsZW1lbnQuIFNlZSBgZWxlbWVudFN0YXJ0YCBhbmQgYGVsZW1lbnRIb3N0QXR0cnNgIHRvIGxlYXJuIGhvdyBzdHlsaW5nIHZhbHVlc1xuICogYXJlIGFwcGxpZWQgdG8gYW4gZWxlbWVudC5cbiAqIEBwYXJhbSByZW5kZXJlciBUaGUgcmVuZGVyZXIgdG8gYmUgdXNlZFxuICogQHBhcmFtIG5hdGl2ZSBUaGUgZWxlbWVudCB0aGF0IHRoZSBhdHRyaWJ1dGVzIHdpbGwgYmUgYXNzaWduZWQgdG9cbiAqIEBwYXJhbSBhdHRycyBUaGUgYXR0cmlidXRlIGFycmF5IG9mIHZhbHVlcyB0aGF0IHdpbGwgYmUgYXNzaWduZWQgdG8gdGhlIGVsZW1lbnRcbiAqIEByZXR1cm5zIHRoZSBpbmRleCB2YWx1ZSB0aGF0IHdhcyBsYXN0IGFjY2Vzc2VkIGluIHRoZSBhdHRyaWJ1dGVzIGFycmF5XG4gKi9cbmZ1bmN0aW9uIHNldFVwQXR0cmlidXRlcyhyZW5kZXJlciwgbmF0aXZlLCBhdHRycykge1xuICAgIGNvbnN0IGlzUHJvYyA9IGlzUHJvY2VkdXJhbFJlbmRlcmVyKHJlbmRlcmVyKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBhdHRycy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhdHRyc1tpXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgbmFtZXNwYWNlcyBhcmUgc3VwcG9ydGVkLiBPdGhlciB2YWx1ZSB0eXBlcyAoc3VjaCBhcyBzdHlsZS9jbGFzc1xuICAgICAgICAgICAgLy8gZW50cmllcykgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBmdW5jdGlvbi5cbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gMCAvKiBOYW1lc3BhY2VVUkkgKi8pIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHdlIGp1c3QgbGFuZGVkIG9uIHRoZSBtYXJrZXIgdmFsdWUgLi4uIHRoZXJlZm9yZVxuICAgICAgICAgICAgLy8gd2Ugc2hvdWxkIHNraXAgdG8gdGhlIG5leHQgZW50cnlcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzcGFjZVVSSSA9IGF0dHJzW2krK107XG4gICAgICAgICAgICBjb25zdCBhdHRyTmFtZSA9IGF0dHJzW2krK107XG4gICAgICAgICAgICBjb25zdCBhdHRyVmFsID0gYXR0cnNbaSsrXTtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJTZXRBdHRyaWJ1dGUrKztcbiAgICAgICAgICAgIGlzUHJvYyA/XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIuc2V0QXR0cmlidXRlKG5hdGl2ZSwgYXR0ck5hbWUsIGF0dHJWYWwsIG5hbWVzcGFjZVVSSSkgOlxuICAgICAgICAgICAgICAgIG5hdGl2ZS5zZXRBdHRyaWJ1dGVOUyhuYW1lc3BhY2VVUkksIGF0dHJOYW1lLCBhdHRyVmFsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGF0dHJOYW1lIGlzIHN0cmluZztcbiAgICAgICAgICAgIGNvbnN0IGF0dHJOYW1lID0gdmFsdWU7XG4gICAgICAgICAgICBjb25zdCBhdHRyVmFsID0gYXR0cnNbKytpXTtcbiAgICAgICAgICAgIC8vIFN0YW5kYXJkIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJTZXRBdHRyaWJ1dGUrKztcbiAgICAgICAgICAgIGlmIChpc0FuaW1hdGlvblByb3AoYXR0ck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzUHJvYykge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5zZXRQcm9wZXJ0eShuYXRpdmUsIGF0dHJOYW1lLCBhdHRyVmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpc1Byb2MgP1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5zZXRBdHRyaWJ1dGUobmF0aXZlLCBhdHRyTmFtZSwgYXR0clZhbCkgOlxuICAgICAgICAgICAgICAgICAgICBuYXRpdmUuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBhdHRyVmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBhbm90aGVyIHBpZWNlIG9mIGNvZGUgbWF5IGl0ZXJhdGUgb3ZlciB0aGUgc2FtZSBhdHRyaWJ1dGVzIGFycmF5LiBUaGVyZWZvcmVcbiAgICAvLyBpdCBtYXkgYmUgaGVscGZ1bCB0byByZXR1cm4gdGhlIGV4YWN0IHNwb3Qgd2hlcmUgdGhlIGF0dHJpYnV0ZXMgYXJyYXkgZXhpdGVkXG4gICAgLy8gd2hldGhlciBieSBydW5uaW5nIGludG8gYW4gdW5zdXBwb3J0ZWQgbWFya2VyIG9yIGlmIGFsbCB0aGUgc3RhdGljIHZhbHVlcyB3ZXJlXG4gICAgLy8gaXRlcmF0ZWQgb3Zlci5cbiAgICByZXR1cm4gaTtcbn1cbi8qKlxuICogVGVzdCB3aGV0aGVyIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIG1hcmtlciB0aGF0IGluZGljYXRlcyB0aGF0IHRoZSBmb2xsb3dpbmdcbiAqIGF0dHJpYnV0ZSB2YWx1ZXMgaW4gYSBgVEF0dHJpYnV0ZXNgIGFycmF5IGFyZSBvbmx5IHRoZSBuYW1lcyBvZiBhdHRyaWJ1dGVzLFxuICogYW5kIG5vdCBuYW1lLXZhbHVlIHBhaXJzLlxuICogQHBhcmFtIG1hcmtlciBUaGUgYXR0cmlidXRlIG1hcmtlciB0byB0ZXN0LlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbWFya2VyIGlzIGEgXCJuYW1lLW9ubHlcIiBtYXJrZXIgKGUuZy4gYEJpbmRpbmdzYCwgYFRlbXBsYXRlYCBvciBgSTE4bmApLlxuICovXG5mdW5jdGlvbiBpc05hbWVPbmx5QXR0cmlidXRlTWFya2VyKG1hcmtlcikge1xuICAgIHJldHVybiBtYXJrZXIgPT09IDMgLyogQmluZGluZ3MgKi8gfHwgbWFya2VyID09PSA0IC8qIFRlbXBsYXRlICovIHx8XG4gICAgICAgIG1hcmtlciA9PT0gNiAvKiBJMThuICovO1xufVxuZnVuY3Rpb24gaXNBbmltYXRpb25Qcm9wKG5hbWUpIHtcbiAgICAvLyBQZXJmIG5vdGU6IGFjY2Vzc2luZyBjaGFyQ29kZUF0IHRvIGNoZWNrIGZvciB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc3RyaW5nIGlzIGZhc3RlciBhc1xuICAgIC8vIGNvbXBhcmVkIHRvIGFjY2Vzc2luZyBhIGNoYXJhY3RlciBhdCBpbmRleCAwIChleC4gbmFtZVswXSkuIFRoZSBtYWluIHJlYXNvbiBmb3IgdGhpcyBpcyB0aGF0XG4gICAgLy8gY2hhckNvZGVBdCBkb2Vzbid0IGFsbG9jYXRlIG1lbW9yeSB0byByZXR1cm4gYSBzdWJzdHJpbmcuXG4gICAgcmV0dXJuIG5hbWUuY2hhckNvZGVBdCgwKSA9PT0gNjQgLyogQVRfU0lHTiAqLztcbn1cbi8qKlxuICogTWVyZ2VzIGBzcmNgIGBUQXR0cmlidXRlc2AgaW50byBgZHN0YCBgVEF0dHJpYnV0ZXNgIHJlbW92aW5nIGFueSBkdXBsaWNhdGVzIGluIHRoZSBwcm9jZXNzLlxuICpcbiAqIFRoaXMgbWVyZ2UgZnVuY3Rpb24ga2VlcHMgdGhlIG9yZGVyIG9mIGF0dHJzIHNhbWUuXG4gKlxuICogQHBhcmFtIGRzdCBMb2NhdGlvbiBvZiB3aGVyZSB0aGUgbWVyZ2VkIGBUQXR0cmlidXRlc2Agc2hvdWxkIGVuZCB1cC5cbiAqIEBwYXJhbSBzcmMgYFRBdHRyaWJ1dGVzYCB3aGljaCBzaG91bGQgYmUgYXBwZW5kZWQgdG8gYGRzdGBcbiAqL1xuZnVuY3Rpb24gbWVyZ2VIb3N0QXR0cnMoZHN0LCBzcmMpIHtcbiAgICBpZiAoc3JjID09PSBudWxsIHx8IHNyYy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgIH1cbiAgICBlbHNlIGlmIChkc3QgPT09IG51bGwgfHwgZHN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBXZSBoYXZlIHNvdXJjZSwgYnV0IGRzdCBpcyBlbXB0eSwganVzdCBtYWtlIGEgY29weS5cbiAgICAgICAgZHN0ID0gc3JjLnNsaWNlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsZXQgc3JjTWFya2VyID0gLTEgLyogSW1wbGljaXRBdHRyaWJ1dGVzICovO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNyYy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHNyY1tpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICBzcmNNYXJrZXIgPSBpdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHNyY01hcmtlciA9PT0gMCAvKiBOYW1lc3BhY2VVUkkgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FzZSB3aGVyZSB3ZSBuZWVkIHRvIGNvbnN1bWUgYGtleTFgLCBga2V5MmAsIGB2YWx1ZWAgaXRlbXMuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNyY01hcmtlciA9PT0gLTEgLyogSW1wbGljaXRBdHRyaWJ1dGVzICovIHx8XG4gICAgICAgICAgICAgICAgICAgIHNyY01hcmtlciA9PT0gMiAvKiBTdHlsZXMgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FzZSB3aGVyZSB3ZSBoYXZlIHRvIGNvbnN1bWUgYGtleTFgIGFuZCBgdmFsdWVgIG9ubHkuXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlSG9zdEF0dHJpYnV0ZShkc3QsIHNyY01hcmtlciwgaXRlbSwgbnVsbCwgc3JjWysraV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FzZSB3aGVyZSB3ZSBoYXZlIHRvIGNvbnN1bWUgYGtleTFgIG9ubHkuXG4gICAgICAgICAgICAgICAgICAgIG1lcmdlSG9zdEF0dHJpYnV0ZShkc3QsIHNyY01hcmtlciwgaXRlbSwgbnVsbCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEFwcGVuZCBga2V5YC9gdmFsdWVgIHRvIGV4aXN0aW5nIGBUQXR0cmlidXRlc2AgdGFraW5nIHJlZ2lvbiBtYXJrZXIgYW5kIGR1cGxpY2F0ZXMgaW50byBhY2NvdW50LlxuICpcbiAqIEBwYXJhbSBkc3QgYFRBdHRyaWJ1dGVzYCB0byBhcHBlbmQgdG8uXG4gKiBAcGFyYW0gbWFya2VyIFJlZ2lvbiB3aGVyZSB0aGUgYGtleWAvYHZhbHVlYCBzaG91bGQgYmUgYWRkZWQuXG4gKiBAcGFyYW0ga2V5MSBLZXkgdG8gYWRkIHRvIGBUQXR0cmlidXRlc2BcbiAqIEBwYXJhbSBrZXkyIEtleSB0byBhZGQgdG8gYFRBdHRyaWJ1dGVzYCAoaW4gY2FzZSBvZiBgQXR0cmlidXRlTWFya2VyLk5hbWVzcGFjZVVSSWApXG4gKiBAcGFyYW0gdmFsdWUgVmFsdWUgdG8gYWRkIG9yIHRvIG92ZXJ3cml0ZSB0byBgVEF0dHJpYnV0ZXNgIE9ubHkgdXNlZCBpZiBgbWFya2VyYCBpcyBub3QgQ2xhc3MuXG4gKi9cbmZ1bmN0aW9uIG1lcmdlSG9zdEF0dHJpYnV0ZShkc3QsIG1hcmtlciwga2V5MSwga2V5MiwgdmFsdWUpIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgLy8gQXNzdW1lIHRoYXQgbmV3IG1hcmtlcnMgd2lsbCBiZSBpbnNlcnRlZCBhdCB0aGUgZW5kLlxuICAgIGxldCBtYXJrZXJJbnNlcnRQb3NpdGlvbiA9IGRzdC5sZW5ndGg7XG4gICAgLy8gc2NhbiB1bnRpbCBjb3JyZWN0IHR5cGUuXG4gICAgaWYgKG1hcmtlciA9PT0gLTEgLyogSW1wbGljaXRBdHRyaWJ1dGVzICovKSB7XG4gICAgICAgIG1hcmtlckluc2VydFBvc2l0aW9uID0gLTE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB3aGlsZSAoaSA8IGRzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGRzdFZhbHVlID0gZHN0W2krK107XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRzdFZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIGlmIChkc3RWYWx1ZSA9PT0gbWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmtlckluc2VydFBvc2l0aW9uID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChkc3RWYWx1ZSA+IG1hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHNhdmUgdGhpcyBhcyB3ZSB3YW50IHRoZSBtYXJrZXJzIHRvIGJlIGluc2VydGVkIGluIHNwZWNpZmljIG9yZGVyLlxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJJbnNlcnRQb3NpdGlvbiA9IGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gc2VhcmNoIHVudGlsIHlvdSBmaW5kIHBsYWNlIG9mIGluc2VydGlvblxuICAgIHdoaWxlIChpIDwgZHN0Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBpdGVtID0gZHN0W2ldO1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAvLyBzaW5jZSBgaWAgc3RhcnRlZCBhcyB0aGUgaW5kZXggYWZ0ZXIgdGhlIG1hcmtlciwgd2UgZGlkIG5vdCBmaW5kIGl0IGlmIHdlIGFyZSBhdCB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gbWFya2VyXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtID09PSBrZXkxKSB7XG4gICAgICAgICAgICAvLyBXZSBhbHJlYWR5IGhhdmUgc2FtZSB0b2tlblxuICAgICAgICAgICAgaWYgKGtleTIgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZHN0W2kgKyAxXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChrZXkyID09PSBkc3RbaSArIDFdKSB7XG4gICAgICAgICAgICAgICAgZHN0W2kgKyAyXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJbmNyZW1lbnQgY291bnRlci5cbiAgICAgICAgaSsrO1xuICAgICAgICBpZiAoa2V5MiAhPT0gbnVsbClcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKVxuICAgICAgICAgICAgaSsrO1xuICAgIH1cbiAgICAvLyBpbnNlcnQgYXQgbG9jYXRpb24uXG4gICAgaWYgKG1hcmtlckluc2VydFBvc2l0aW9uICE9PSAtMSkge1xuICAgICAgICBkc3Quc3BsaWNlKG1hcmtlckluc2VydFBvc2l0aW9uLCAwLCBtYXJrZXIpO1xuICAgICAgICBpID0gbWFya2VySW5zZXJ0UG9zaXRpb24gKyAxO1xuICAgIH1cbiAgICBkc3Quc3BsaWNlKGkrKywgMCwga2V5MSk7XG4gICAgaWYgKGtleTIgIT09IG51bGwpIHtcbiAgICAgICAgZHN0LnNwbGljZShpKyssIDAsIGtleTIpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgZHN0LnNwbGljZShpKyssIDAsIHZhbHVlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLy8vIFBhcmVudCBJbmplY3RvciBVdGlscyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIGhhc1BhcmVudEluamVjdG9yKHBhcmVudExvY2F0aW9uKSB7XG4gICAgcmV0dXJuIHBhcmVudExvY2F0aW9uICE9PSBOT19QQVJFTlRfSU5KRUNUT1I7XG59XG5mdW5jdGlvbiBnZXRQYXJlbnRJbmplY3RvckluZGV4KHBhcmVudExvY2F0aW9uKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydE51bWJlcihwYXJlbnRMb2NhdGlvbiwgJ051bWJlciBleHBlY3RlZCcpO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROb3RFcXVhbChwYXJlbnRMb2NhdGlvbiwgLTEsICdOb3QgYSB2YWxpZCBzdGF0ZS4nKTtcbiAgICBjb25zdCBwYXJlbnRJbmplY3RvckluZGV4ID0gcGFyZW50TG9jYXRpb24gJiAzMjc2NyAvKiBJbmplY3RvckluZGV4TWFzayAqLztcbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0R3JlYXRlclRoYW4ocGFyZW50SW5qZWN0b3JJbmRleCwgSEVBREVSX09GRlNFVCwgJ1BhcmVudCBpbmplY3RvciBtdXN0IGJlIHBvaW50aW5nIHBhc3QgSEVBREVSX09GRlNFVC4nKTtcbiAgICByZXR1cm4gcGFyZW50TG9jYXRpb24gJiAzMjc2NyAvKiBJbmplY3RvckluZGV4TWFzayAqLztcbn1cbmZ1bmN0aW9uIGdldFBhcmVudEluamVjdG9yVmlld09mZnNldChwYXJlbnRMb2NhdGlvbikge1xuICAgIHJldHVybiBwYXJlbnRMb2NhdGlvbiA+PiAxNiAvKiBWaWV3T2Zmc2V0U2hpZnQgKi87XG59XG4vKipcbiAqIFVud3JhcHMgYSBwYXJlbnQgaW5qZWN0b3IgbG9jYXRpb24gbnVtYmVyIHRvIGZpbmQgdGhlIHZpZXcgb2Zmc2V0IGZyb20gdGhlIGN1cnJlbnQgaW5qZWN0b3IsXG4gKiB0aGVuIHdhbGtzIHVwIHRoZSBkZWNsYXJhdGlvbiB2aWV3IHRyZWUgdW50aWwgdGhlIHZpZXcgaXMgZm91bmQgdGhhdCBjb250YWlucyB0aGUgcGFyZW50XG4gKiBpbmplY3Rvci5cbiAqXG4gKiBAcGFyYW0gbG9jYXRpb24gVGhlIGxvY2F0aW9uIG9mIHRoZSBwYXJlbnQgaW5qZWN0b3IsIHdoaWNoIGNvbnRhaW5zIHRoZSB2aWV3IG9mZnNldFxuICogQHBhcmFtIHN0YXJ0VmlldyBUaGUgTFZpZXcgaW5zdGFuY2UgZnJvbSB3aGljaCB0byBzdGFydCB3YWxraW5nIHVwIHRoZSB2aWV3IHRyZWVcbiAqIEByZXR1cm5zIFRoZSBMVmlldyBpbnN0YW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBwYXJlbnQgaW5qZWN0b3JcbiAqL1xuZnVuY3Rpb24gZ2V0UGFyZW50SW5qZWN0b3JWaWV3KGxvY2F0aW9uLCBzdGFydFZpZXcpIHtcbiAgICBsZXQgdmlld09mZnNldCA9IGdldFBhcmVudEluamVjdG9yVmlld09mZnNldChsb2NhdGlvbik7XG4gICAgbGV0IHBhcmVudFZpZXcgPSBzdGFydFZpZXc7XG4gICAgLy8gRm9yIG1vc3QgY2FzZXMsIHRoZSBwYXJlbnQgaW5qZWN0b3IgY2FuIGJlIGZvdW5kIG9uIHRoZSBob3N0IG5vZGUgKGUuZy4gZm9yIGNvbXBvbmVudFxuICAgIC8vIG9yIGNvbnRhaW5lciksIGJ1dCB3ZSBtdXN0IGtlZXAgdGhlIGxvb3AgaGVyZSB0byBzdXBwb3J0IHRoZSByYXJlciBjYXNlIG9mIGRlZXBseSBuZXN0ZWRcbiAgICAvLyA8bmctdGVtcGxhdGU+IHRhZ3Mgb3IgaW5saW5lIHZpZXdzLCB3aGVyZSB0aGUgcGFyZW50IGluamVjdG9yIG1pZ2h0IGxpdmUgbWFueSB2aWV3c1xuICAgIC8vIGFib3ZlIHRoZSBjaGlsZCBpbmplY3Rvci5cbiAgICB3aGlsZSAodmlld09mZnNldCA+IDApIHtcbiAgICAgICAgcGFyZW50VmlldyA9IHBhcmVudFZpZXdbREVDTEFSQVRJT05fVklFV107XG4gICAgICAgIHZpZXdPZmZzZXQtLTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmVudFZpZXc7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBEZWZpbmVzIGlmIHRoZSBjYWxsIHRvIGBpbmplY3RgIHNob3VsZCBpbmNsdWRlIGB2aWV3UHJvdmlkZXJzYCBpbiBpdHMgcmVzb2x1dGlvbi5cbiAqXG4gKiBUaGlzIGlzIHNldCB0byB0cnVlIHdoZW4gd2UgdHJ5IHRvIGluc3RhbnRpYXRlIGEgY29tcG9uZW50LiBUaGlzIHZhbHVlIGlzIHJlc2V0IGluXG4gKiBgZ2V0Tm9kZUluamVjdGFibGVgIHRvIGEgdmFsdWUgd2hpY2ggbWF0Y2hlcyB0aGUgZGVjbGFyYXRpb24gbG9jYXRpb24gb2YgdGhlIHRva2VuIGFib3V0IHRvIGJlXG4gKiBpbnN0YW50aWF0ZWQuIFRoaXMgaXMgZG9uZSBzbyB0aGF0IGlmIHdlIGFyZSBpbmplY3RpbmcgYSB0b2tlbiB3aGljaCB3YXMgZGVjbGFyZWQgb3V0c2lkZSBvZlxuICogYHZpZXdQcm92aWRlcnNgIHdlIGRvbid0IGFjY2lkZW50YWxseSBwdWxsIGB2aWV3UHJvdmlkZXJzYCBpbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYFxuICogQEluamVjdGFibGUoKVxuICogY2xhc3MgTXlTZXJ2aWNlIHtcbiAqICAgY29uc3RydWN0b3IocHVibGljIHZhbHVlOiBTdHJpbmcpIHt9XG4gKiB9XG4gKlxuICogQENvbXBvbmVudCh7XG4gKiAgIHByb3ZpZGVyczogW1xuICogICAgIE15U2VydmljZSxcbiAqICAgICB7cHJvdmlkZTogU3RyaW5nLCB2YWx1ZTogJ3Byb3ZpZGVycycgfVxuICogICBdXG4gKiAgIHZpZXdQcm92aWRlcnM6IFtcbiAqICAgICB7cHJvdmlkZTogU3RyaW5nLCB2YWx1ZTogJ3ZpZXdQcm92aWRlcnMnfVxuICogICBdXG4gKiB9KVxuICogY2xhc3MgTXlDb21wb25lbnQge1xuICogICBjb25zdHJ1Y3RvcihteVNlcnZpY2U6IE15U2VydmljZSwgdmFsdWU6IFN0cmluZykge1xuICogICAgIC8vIFdlIGV4cGVjdCB0aGF0IENvbXBvbmVudCBjYW4gc2VlIGludG8gYHZpZXdQcm92aWRlcnNgLlxuICogICAgIGV4cGVjdCh2YWx1ZSkudG9FcXVhbCgndmlld1Byb3ZpZGVycycpO1xuICogICAgIC8vIGBNeVNlcnZpY2VgIHdhcyBub3QgZGVjbGFyZWQgaW4gYHZpZXdQcm92aWRlcnNgIGhlbmNlIGl0IGNhbid0IHNlZSBpdC5cbiAqICAgICBleHBlY3QobXlTZXJ2aWNlLnZhbHVlKS50b0VxdWFsKCdwcm92aWRlcnMnKTtcbiAqICAgfVxuICogfVxuICpcbiAqIGBgYFxuICovXG5sZXQgaW5jbHVkZVZpZXdQcm92aWRlcnMgPSB0cnVlO1xuZnVuY3Rpb24gc2V0SW5jbHVkZVZpZXdQcm92aWRlcnModikge1xuICAgIGNvbnN0IG9sZFZhbHVlID0gaW5jbHVkZVZpZXdQcm92aWRlcnM7XG4gICAgaW5jbHVkZVZpZXdQcm92aWRlcnMgPSB2O1xuICAgIHJldHVybiBvbGRWYWx1ZTtcbn1cbi8qKlxuICogVGhlIG51bWJlciBvZiBzbG90cyBpbiBlYWNoIGJsb29tIGZpbHRlciAodXNlZCBieSBESSkuIFRoZSBsYXJnZXIgdGhpcyBudW1iZXIsIHRoZSBmZXdlclxuICogZGlyZWN0aXZlcyB0aGF0IHdpbGwgc2hhcmUgc2xvdHMsIGFuZCB0aHVzLCB0aGUgZmV3ZXIgZmFsc2UgcG9zaXRpdmVzIHdoZW4gY2hlY2tpbmcgZm9yXG4gKiB0aGUgZXhpc3RlbmNlIG9mIGEgZGlyZWN0aXZlLlxuICovXG5jb25zdCBCTE9PTV9TSVpFID0gMjU2O1xuY29uc3QgQkxPT01fTUFTSyA9IEJMT09NX1NJWkUgLSAxO1xuLyoqXG4gKiBUaGUgbnVtYmVyIG9mIGJpdHMgdGhhdCBpcyByZXByZXNlbnRlZCBieSBhIHNpbmdsZSBibG9vbSBidWNrZXQuIEpTIGJpdCBvcGVyYXRpb25zIGFyZSAzMiBiaXRzLFxuICogc28gZWFjaCBidWNrZXQgcmVwcmVzZW50cyAzMiBkaXN0aW5jdCB0b2tlbnMgd2hpY2ggYWNjb3VudHMgZm9yIGxvZzIoMzIpID0gNSBiaXRzIG9mIGEgYmxvb20gaGFzaFxuICogbnVtYmVyLlxuICovXG5jb25zdCBCTE9PTV9CVUNLRVRfQklUUyA9IDU7XG4vKiogQ291bnRlciB1c2VkIHRvIGdlbmVyYXRlIHVuaXF1ZSBJRHMgZm9yIGRpcmVjdGl2ZXMuICovXG5sZXQgbmV4dE5nRWxlbWVudElkID0gMDtcbi8qKlxuICogUmVnaXN0ZXJzIHRoaXMgZGlyZWN0aXZlIGFzIHByZXNlbnQgaW4gaXRzIG5vZGUncyBpbmplY3RvciBieSBmbGlwcGluZyB0aGUgZGlyZWN0aXZlJ3NcbiAqIGNvcnJlc3BvbmRpbmcgYml0IGluIHRoZSBpbmplY3RvcidzIGJsb29tIGZpbHRlci5cbiAqXG4gKiBAcGFyYW0gaW5qZWN0b3JJbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgaW5qZWN0b3Igd2hlcmUgdGhpcyB0b2tlbiBzaG91bGQgYmUgcmVnaXN0ZXJlZFxuICogQHBhcmFtIHRWaWV3IFRoZSBUVmlldyBmb3IgdGhlIGluamVjdG9yJ3MgYmxvb20gZmlsdGVyc1xuICogQHBhcmFtIHR5cGUgVGhlIGRpcmVjdGl2ZSB0b2tlbiB0byByZWdpc3RlclxuICovXG5mdW5jdGlvbiBibG9vbUFkZChpbmplY3RvckluZGV4LCB0VmlldywgdHlwZSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRFcXVhbCh0Vmlldy5maXJzdENyZWF0ZVBhc3MsIHRydWUsICdleHBlY3RlZCBmaXJzdENyZWF0ZVBhc3MgdG8gYmUgdHJ1ZScpO1xuICAgIGxldCBpZDtcbiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlkID0gdHlwZS5jaGFyQ29kZUF0KDApIHx8IDA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUuaGFzT3duUHJvcGVydHkoTkdfRUxFTUVOVF9JRCkpIHtcbiAgICAgICAgaWQgPSB0eXBlW05HX0VMRU1FTlRfSURdO1xuICAgIH1cbiAgICAvLyBTZXQgYSB1bmlxdWUgSUQgb24gdGhlIGRpcmVjdGl2ZSB0eXBlLCBzbyBpZiBzb21ldGhpbmcgdHJpZXMgdG8gaW5qZWN0IHRoZSBkaXJlY3RpdmUsXG4gICAgLy8gd2UgY2FuIGVhc2lseSByZXRyaWV2ZSB0aGUgSUQgYW5kIGhhc2ggaXQgaW50byB0aGUgYmxvb20gYml0IHRoYXQgc2hvdWxkIGJlIGNoZWNrZWQuXG4gICAgaWYgKGlkID09IG51bGwpIHtcbiAgICAgICAgaWQgPSB0eXBlW05HX0VMRU1FTlRfSURdID0gbmV4dE5nRWxlbWVudElkKys7XG4gICAgfVxuICAgIC8vIFdlIG9ubHkgaGF2ZSBCTE9PTV9TSVpFICgyNTYpIHNsb3RzIGluIG91ciBibG9vbSBmaWx0ZXIgKDggYnVja2V0cyAqIDMyIGJpdHMgZWFjaCksXG4gICAgLy8gc28gYWxsIHVuaXF1ZSBJRHMgbXVzdCBiZSBtb2R1bG8tZWQgaW50byBhIG51bWJlciBmcm9tIDAgLSAyNTUgdG8gZml0IGludG8gdGhlIGZpbHRlci5cbiAgICBjb25zdCBibG9vbUhhc2ggPSBpZCAmIEJMT09NX01BU0s7XG4gICAgLy8gQ3JlYXRlIGEgbWFzayB0aGF0IHRhcmdldHMgdGhlIHNwZWNpZmljIGJpdCBhc3NvY2lhdGVkIHdpdGggdGhlIGRpcmVjdGl2ZS5cbiAgICAvLyBKUyBiaXQgb3BlcmF0aW9ucyBhcmUgMzIgYml0cywgc28gdGhpcyB3aWxsIGJlIGEgbnVtYmVyIGJldHdlZW4gMl4wIGFuZCAyXjMxLCBjb3JyZXNwb25kaW5nXG4gICAgLy8gdG8gYml0IHBvc2l0aW9ucyAwIC0gMzEgaW4gYSAzMiBiaXQgaW50ZWdlci5cbiAgICBjb25zdCBtYXNrID0gMSA8PCBibG9vbUhhc2g7XG4gICAgLy8gRWFjaCBibG9vbSBidWNrZXQgaW4gYHREYXRhYCByZXByZXNlbnRzIGBCTE9PTV9CVUNLRVRfQklUU2AgbnVtYmVyIG9mIGJpdHMgb2YgYGJsb29tSGFzaGAuXG4gICAgLy8gQW55IGJpdHMgaW4gYGJsb29tSGFzaGAgYmV5b25kIGBCTE9PTV9CVUNLRVRfQklUU2AgaW5kaWNhdGUgdGhlIGJ1Y2tldCBvZmZzZXQgdGhhdCB0aGUgbWFza1xuICAgIC8vIHNob3VsZCBiZSB3cml0dGVuIHRvLlxuICAgIHRWaWV3LmRhdGFbaW5qZWN0b3JJbmRleCArIChibG9vbUhhc2ggPj4gQkxPT01fQlVDS0VUX0JJVFMpXSB8PSBtYXNrO1xufVxuLyoqXG4gKiBDcmVhdGVzIChvciBnZXRzIGFuIGV4aXN0aW5nKSBpbmplY3RvciBmb3IgYSBnaXZlbiBlbGVtZW50IG9yIGNvbnRhaW5lci5cbiAqXG4gKiBAcGFyYW0gdE5vZGUgZm9yIHdoaWNoIGFuIGluamVjdG9yIHNob3VsZCBiZSByZXRyaWV2ZWQgLyBjcmVhdGVkLlxuICogQHBhcmFtIGxWaWV3IFZpZXcgd2hlcmUgdGhlIG5vZGUgaXMgc3RvcmVkXG4gKiBAcmV0dXJucyBOb2RlIGluamVjdG9yXG4gKi9cbmZ1bmN0aW9uIGdldE9yQ3JlYXRlTm9kZUluamVjdG9yRm9yTm9kZSh0Tm9kZSwgbFZpZXcpIHtcbiAgICBjb25zdCBleGlzdGluZ0luamVjdG9ySW5kZXggPSBnZXRJbmplY3RvckluZGV4KHROb2RlLCBsVmlldyk7XG4gICAgaWYgKGV4aXN0aW5nSW5qZWN0b3JJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nSW5qZWN0b3JJbmRleDtcbiAgICB9XG4gICAgY29uc3QgdFZpZXcgPSBsVmlld1tUVklFV107XG4gICAgaWYgKHRWaWV3LmZpcnN0Q3JlYXRlUGFzcykge1xuICAgICAgICB0Tm9kZS5pbmplY3RvckluZGV4ID0gbFZpZXcubGVuZ3RoO1xuICAgICAgICBpbnNlcnRCbG9vbSh0Vmlldy5kYXRhLCB0Tm9kZSk7IC8vIGZvdW5kYXRpb24gZm9yIG5vZGUgYmxvb21cbiAgICAgICAgaW5zZXJ0Qmxvb20obFZpZXcsIG51bGwpOyAvLyBmb3VuZGF0aW9uIGZvciBjdW11bGF0aXZlIGJsb29tXG4gICAgICAgIGluc2VydEJsb29tKHRWaWV3LmJsdWVwcmludCwgbnVsbCk7XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudExvYyA9IGdldFBhcmVudEluamVjdG9yTG9jYXRpb24odE5vZGUsIGxWaWV3KTtcbiAgICBjb25zdCBpbmplY3RvckluZGV4ID0gdE5vZGUuaW5qZWN0b3JJbmRleDtcbiAgICAvLyBJZiBhIHBhcmVudCBpbmplY3RvciBjYW4ndCBiZSBmb3VuZCwgaXRzIGxvY2F0aW9uIGlzIHNldCB0byAtMS5cbiAgICAvLyBJbiB0aGF0IGNhc2UsIHdlIGRvbid0IG5lZWQgdG8gc2V0IHVwIGEgY3VtdWxhdGl2ZSBibG9vbVxuICAgIGlmIChoYXNQYXJlbnRJbmplY3RvcihwYXJlbnRMb2MpKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudEluZGV4ID0gZ2V0UGFyZW50SW5qZWN0b3JJbmRleChwYXJlbnRMb2MpO1xuICAgICAgICBjb25zdCBwYXJlbnRMVmlldyA9IGdldFBhcmVudEluamVjdG9yVmlldyhwYXJlbnRMb2MsIGxWaWV3KTtcbiAgICAgICAgY29uc3QgcGFyZW50RGF0YSA9IHBhcmVudExWaWV3W1RWSUVXXS5kYXRhO1xuICAgICAgICAvLyBDcmVhdGVzIGEgY3VtdWxhdGl2ZSBibG9vbSBmaWx0ZXIgdGhhdCBtZXJnZXMgdGhlIHBhcmVudCdzIGJsb29tIGZpbHRlclxuICAgICAgICAvLyBhbmQgaXRzIG93biBjdW11bGF0aXZlIGJsb29tICh3aGljaCBjb250YWlucyB0b2tlbnMgZm9yIGFsbCBhbmNlc3RvcnMpXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOCAvKiBCTE9PTV9TSVpFICovOyBpKyspIHtcbiAgICAgICAgICAgIGxWaWV3W2luamVjdG9ySW5kZXggKyBpXSA9IHBhcmVudExWaWV3W3BhcmVudEluZGV4ICsgaV0gfCBwYXJlbnREYXRhW3BhcmVudEluZGV4ICsgaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgbFZpZXdbaW5qZWN0b3JJbmRleCArIDggLyogUEFSRU5UICovXSA9IHBhcmVudExvYztcbiAgICByZXR1cm4gaW5qZWN0b3JJbmRleDtcbn1cbmZ1bmN0aW9uIGluc2VydEJsb29tKGFyciwgZm9vdGVyKSB7XG4gICAgYXJyLnB1c2goMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgZm9vdGVyKTtcbn1cbmZ1bmN0aW9uIGdldEluamVjdG9ySW5kZXgodE5vZGUsIGxWaWV3KSB7XG4gICAgaWYgKHROb2RlLmluamVjdG9ySW5kZXggPT09IC0xIHx8XG4gICAgICAgIC8vIElmIHRoZSBpbmplY3RvciBpbmRleCBpcyB0aGUgc2FtZSBhcyBpdHMgcGFyZW50J3MgaW5qZWN0b3IgaW5kZXgsIHRoZW4gdGhlIGluZGV4IGhhcyBiZWVuXG4gICAgICAgIC8vIGNvcGllZCBkb3duIGZyb20gdGhlIHBhcmVudCBub2RlLiBObyBpbmplY3RvciBoYXMgYmVlbiBjcmVhdGVkIHlldCBvbiB0aGlzIG5vZGUuXG4gICAgICAgICh0Tm9kZS5wYXJlbnQgJiYgdE5vZGUucGFyZW50LmluamVjdG9ySW5kZXggPT09IHROb2RlLmluamVjdG9ySW5kZXgpIHx8XG4gICAgICAgIC8vIEFmdGVyIHRoZSBmaXJzdCB0ZW1wbGF0ZSBwYXNzLCB0aGUgaW5qZWN0b3IgaW5kZXggbWlnaHQgZXhpc3QgYnV0IHRoZSBwYXJlbnQgdmFsdWVzXG4gICAgICAgIC8vIG1pZ2h0IG5vdCBoYXZlIGJlZW4gY2FsY3VsYXRlZCB5ZXQgZm9yIHRoaXMgaW5zdGFuY2VcbiAgICAgICAgbFZpZXdbdE5vZGUuaW5qZWN0b3JJbmRleCArIDggLyogUEFSRU5UICovXSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0SW5kZXhJblJhbmdlKGxWaWV3LCB0Tm9kZS5pbmplY3RvckluZGV4KTtcbiAgICAgICAgcmV0dXJuIHROb2RlLmluamVjdG9ySW5kZXg7XG4gICAgfVxufVxuLyoqXG4gKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIHBhcmVudCBpbmplY3Rvciwgd2l0aCBhIHZpZXcgb2Zmc2V0IGlmIGFwcGxpY2FibGUuIFVzZWQgdG8gc2V0IHRoZVxuICogcGFyZW50IGluamVjdG9yIGluaXRpYWxseS5cbiAqXG4gKiBAcmV0dXJucyBSZXR1cm5zIGEgbnVtYmVyIHRoYXQgaXMgdGhlIGNvbWJpbmF0aW9uIG9mIHRoZSBudW1iZXIgb2YgTFZpZXdzIHRoYXQgd2UgaGF2ZSB0byBnbyB1cFxuICogdG8gZmluZCB0aGUgTFZpZXcgY29udGFpbmluZyB0aGUgcGFyZW50IGluamVjdCBBTkQgdGhlIGluZGV4IG9mIHRoZSBpbmplY3RvciB3aXRoaW4gdGhhdCBMVmlldy5cbiAqL1xuZnVuY3Rpb24gZ2V0UGFyZW50SW5qZWN0b3JMb2NhdGlvbih0Tm9kZSwgbFZpZXcpIHtcbiAgICBpZiAodE5vZGUucGFyZW50ICYmIHROb2RlLnBhcmVudC5pbmplY3RvckluZGV4ICE9PSAtMSkge1xuICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgcGFyZW50IGBUTm9kZWAgYW5kIHRoZXJlIGlzIGFuIGluamVjdG9yIGFzc29jaWF0ZWQgd2l0aCBpdCB3ZSBhcmUgZG9uZSwgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgcGFyZW50IGluamVjdG9yIGlzIHdpdGhpbiB0aGUgY3VycmVudCBgTFZpZXdgLlxuICAgICAgICByZXR1cm4gdE5vZGUucGFyZW50LmluamVjdG9ySW5kZXg7IC8vIFZpZXdPZmZzZXQgaXMgMFxuICAgIH1cbiAgICAvLyBXaGVuIHBhcmVudCBpbmplY3RvciBsb2NhdGlvbiBpcyBjb21wdXRlZCBpdCBtYXkgYmUgb3V0c2lkZSBvZiB0aGUgY3VycmVudCB2aWV3LiAoaWUgaXQgY291bGRcbiAgICAvLyBiZSBwb2ludGluZyB0byBhIGRlY2xhcmVkIHBhcmVudCBsb2NhdGlvbikuIFRoaXMgdmFyaWFibGUgc3RvcmVzIG51bWJlciBvZiBkZWNsYXJhdGlvbiBwYXJlbnRzXG4gICAgLy8gd2UgbmVlZCB0byB3YWxrIHVwIGluIG9yZGVyIHRvIGZpbmQgdGhlIHBhcmVudCBpbmplY3RvciBsb2NhdGlvbi5cbiAgICBsZXQgZGVjbGFyYXRpb25WaWV3T2Zmc2V0ID0gMDtcbiAgICBsZXQgcGFyZW50VE5vZGUgPSBudWxsO1xuICAgIGxldCBsVmlld0N1cnNvciA9IGxWaWV3O1xuICAgIC8vIFRoZSBwYXJlbnQgaW5qZWN0b3IgaXMgbm90IGluIHRoZSBjdXJyZW50IGBMVmlld2AuIFdlIHdpbGwgaGF2ZSB0byB3YWxrIHRoZSBkZWNsYXJlZCBwYXJlbnRcbiAgICAvLyBgTFZpZXdgIGhpZXJhcmNoeSBhbmQgbG9vayBmb3IgaXQuIElmIHdlIHdhbGsgb2YgdGhlIHRvcCwgdGhhdCBtZWFucyB0aGF0IHRoZXJlIGlzIG5vIHBhcmVudFxuICAgIC8vIGBOb2RlSW5qZWN0b3JgLlxuICAgIHdoaWxlIChsVmlld0N1cnNvciAhPT0gbnVsbCkge1xuICAgICAgICAvLyBGaXJzdCBkZXRlcm1pbmUgdGhlIGBwYXJlbnRUTm9kZWAgbG9jYXRpb24uIFRoZSBwYXJlbnQgcG9pbnRlciBkaWZmZXJzIGJhc2VkIG9uIGBUVmlldy50eXBlYC5cbiAgICAgICAgY29uc3QgdFZpZXcgPSBsVmlld0N1cnNvcltUVklFV107XG4gICAgICAgIGNvbnN0IHRWaWV3VHlwZSA9IHRWaWV3LnR5cGU7XG4gICAgICAgIGlmICh0Vmlld1R5cGUgPT09IDIgLyogRW1iZWRkZWQgKi8pIHtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgICAgIGFzc2VydERlZmluZWQodFZpZXcuZGVjbFROb2RlLCAnRW1iZWRkZWQgVE5vZGVzIHNob3VsZCBoYXZlIGRlY2xhcmF0aW9uIHBhcmVudHMuJyk7XG4gICAgICAgICAgICBwYXJlbnRUTm9kZSA9IHRWaWV3LmRlY2xUTm9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0Vmlld1R5cGUgPT09IDEgLyogQ29tcG9uZW50ICovKSB7XG4gICAgICAgICAgICAvLyBDb21wb25lbnRzIGRvbid0IGhhdmUgYFRWaWV3LmRlY2xUTm9kZWAgYmVjYXVzZSBlYWNoIGluc3RhbmNlIG9mIGNvbXBvbmVudCBjb3VsZCBiZVxuICAgICAgICAgICAgLy8gaW5zZXJ0ZWQgaW4gZGlmZmVyZW50IGxvY2F0aW9uLCBoZW5jZSBgVFZpZXcuZGVjbFROb2RlYCBpcyBtZWFuaW5nbGVzcy5cbiAgICAgICAgICAgIHBhcmVudFROb2RlID0gbFZpZXdDdXJzb3JbVF9IT1NUXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRFcXVhbCh0Vmlldy50eXBlLCAwIC8qIFJvb3QgKi8sICdSb290IHR5cGUgZXhwZWN0ZWQnKTtcbiAgICAgICAgICAgIHBhcmVudFROb2RlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50VE5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgbm8gcGFyZW50LCB0aGFuIHdlIGFyZSBkb25lLlxuICAgICAgICAgICAgcmV0dXJuIE5PX1BBUkVOVF9JTkpFQ1RPUjtcbiAgICAgICAgfVxuICAgICAgICBuZ0Rldk1vZGUgJiYgcGFyZW50VE5vZGUgJiYgYXNzZXJ0VE5vZGVGb3JMVmlldyhwYXJlbnRUTm9kZSwgbFZpZXdDdXJzb3JbREVDTEFSQVRJT05fVklFV10pO1xuICAgICAgICAvLyBFdmVyeSBpdGVyYXRpb24gb2YgdGhlIGxvb3AgcmVxdWlyZXMgdGhhdCB3ZSBnbyB0byB0aGUgZGVjbGFyZWQgcGFyZW50LlxuICAgICAgICBkZWNsYXJhdGlvblZpZXdPZmZzZXQrKztcbiAgICAgICAgbFZpZXdDdXJzb3IgPSBsVmlld0N1cnNvcltERUNMQVJBVElPTl9WSUVXXTtcbiAgICAgICAgaWYgKHBhcmVudFROb2RlLmluamVjdG9ySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBXZSBmb3VuZCBhIE5vZGVJbmplY3RvciB3aGljaCBwb2ludHMgdG8gc29tZXRoaW5nLlxuICAgICAgICAgICAgcmV0dXJuIChwYXJlbnRUTm9kZS5pbmplY3RvckluZGV4IHxcbiAgICAgICAgICAgICAgICAoZGVjbGFyYXRpb25WaWV3T2Zmc2V0IDw8IDE2IC8qIFZpZXdPZmZzZXRTaGlmdCAqLykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBOT19QQVJFTlRfSU5KRUNUT1I7XG59XG4vKipcbiAqIE1ha2VzIGEgdHlwZSBvciBhbiBpbmplY3Rpb24gdG9rZW4gcHVibGljIHRvIHRoZSBESSBzeXN0ZW0gYnkgYWRkaW5nIGl0IHRvIGFuXG4gKiBpbmplY3RvcidzIGJsb29tIGZpbHRlci5cbiAqXG4gKiBAcGFyYW0gZGkgVGhlIG5vZGUgaW5qZWN0b3IgaW4gd2hpY2ggYSBkaXJlY3RpdmUgd2lsbCBiZSBhZGRlZFxuICogQHBhcmFtIHRva2VuIFRoZSB0eXBlIG9yIHRoZSBpbmplY3Rpb24gdG9rZW4gdG8gYmUgbWFkZSBwdWJsaWNcbiAqL1xuZnVuY3Rpb24gZGlQdWJsaWNJbkluamVjdG9yKGluamVjdG9ySW5kZXgsIHRWaWV3LCB0b2tlbikge1xuICAgIGJsb29tQWRkKGluamVjdG9ySW5kZXgsIHRWaWV3LCB0b2tlbik7XG59XG4vKipcbiAqIEluamVjdCBzdGF0aWMgYXR0cmlidXRlIHZhbHVlIGludG8gZGlyZWN0aXZlIGNvbnN0cnVjdG9yLlxuICpcbiAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgd2l0aCBgZmFjdG9yeWAgZnVuY3Rpb25zIHdoaWNoIGFyZSBnZW5lcmF0ZWQgYXMgcGFydCBvZlxuICogYGRlZmluZURpcmVjdGl2ZWAgb3IgYGRlZmluZUNvbXBvbmVudGAuIFRoZSBtZXRob2QgcmV0cmlldmVzIHRoZSBzdGF0aWMgdmFsdWVcbiAqIG9mIGFuIGF0dHJpYnV0ZS4gKER5bmFtaWMgYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZCBzaW5jZSB0aGV5IGFyZSBub3QgcmVzb2x2ZWRcbiAqICBhdCB0aGUgdGltZSBvZiBpbmplY3Rpb24gYW5kIGNhbiBjaGFuZ2Ugb3ZlciB0aW1lLilcbiAqXG4gKiAjIEV4YW1wbGVcbiAqIEdpdmVuOlxuICogYGBgXG4gKiBAQ29tcG9uZW50KC4uLilcbiAqIGNsYXNzIE15Q29tcG9uZW50IHtcbiAqICAgY29uc3RydWN0b3IoQEF0dHJpYnV0ZSgndGl0bGUnKSB0aXRsZTogc3RyaW5nKSB7IC4uLiB9XG4gKiB9XG4gKiBgYGBcbiAqIFdoZW4gaW5zdGFudGlhdGVkIHdpdGhcbiAqIGBgYFxuICogPG15LWNvbXBvbmVudCB0aXRsZT1cIkhlbGxvXCI+PC9teS1jb21wb25lbnQ+XG4gKiBgYGBcbiAqXG4gKiBUaGVuIGZhY3RvcnkgbWV0aG9kIGdlbmVyYXRlZCBpczpcbiAqIGBgYFxuICogTXlDb21wb25lbnQuybVjbXAgPSBkZWZpbmVDb21wb25lbnQoe1xuICogICBmYWN0b3J5OiAoKSA9PiBuZXcgTXlDb21wb25lbnQoaW5qZWN0QXR0cmlidXRlKCd0aXRsZScpKVxuICogICAuLi5cbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmZ1bmN0aW9uIGluamVjdEF0dHJpYnV0ZUltcGwodE5vZGUsIGF0dHJOYW1lVG9JbmplY3QpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VE5vZGVUeXBlKHROb2RlLCAxMiAvKiBBbnlDb250YWluZXIgKi8gfCAzIC8qIEFueVJOb2RlICovKTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0Tm9kZSwgJ2V4cGVjdGluZyB0Tm9kZScpO1xuICAgIGlmIChhdHRyTmFtZVRvSW5qZWN0ID09PSAnY2xhc3MnKSB7XG4gICAgICAgIHJldHVybiB0Tm9kZS5jbGFzc2VzO1xuICAgIH1cbiAgICBpZiAoYXR0ck5hbWVUb0luamVjdCA9PT0gJ3N0eWxlJykge1xuICAgICAgICByZXR1cm4gdE5vZGUuc3R5bGVzO1xuICAgIH1cbiAgICBjb25zdCBhdHRycyA9IHROb2RlLmF0dHJzO1xuICAgIGlmIChhdHRycykge1xuICAgICAgICBjb25zdCBhdHRyc0xlbmd0aCA9IGF0dHJzLmxlbmd0aDtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGF0dHJzTGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF0dHJzW2ldO1xuICAgICAgICAgICAgLy8gSWYgd2UgaGl0IGEgYEJpbmRpbmdzYCBvciBgVGVtcGxhdGVgIG1hcmtlciB0aGVuIHdlIGFyZSBkb25lLlxuICAgICAgICAgICAgaWYgKGlzTmFtZU9ubHlBdHRyaWJ1dGVNYXJrZXIodmFsdWUpKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gU2tpcCBuYW1lc3BhY2VkIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMCAvKiBOYW1lc3BhY2VVUkkgKi8pIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSBza2lwIHRoZSBuZXh0IHR3byB2YWx1ZXNcbiAgICAgICAgICAgICAgICAvLyBhcyBuYW1lc3BhY2VkIGF0dHJpYnV0ZXMgbG9va3MgbGlrZVxuICAgICAgICAgICAgICAgIC8vIFsuLi4sIEF0dHJpYnV0ZU1hcmtlci5OYW1lc3BhY2VVUkksICdodHRwOi8vc29tZXVyaS5jb20vdGVzdCcsICd0ZXN0OmV4aXN0JyxcbiAgICAgICAgICAgICAgICAvLyAnZXhpc3RWYWx1ZScsIC4uLl1cbiAgICAgICAgICAgICAgICBpID0gaSArIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCB0byB0aGUgZmlyc3QgdmFsdWUgb2YgdGhlIG1hcmtlZCBhdHRyaWJ1dGUuXG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgYXR0cnNMZW5ndGggJiYgdHlwZW9mIGF0dHJzW2ldID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IGF0dHJOYW1lVG9JbmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXR0cnNbaSArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaSA9IGkgKyAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gbm90Rm91bmRWYWx1ZU9yVGhyb3cobm90Rm91bmRWYWx1ZSwgdG9rZW4sIGZsYWdzKSB7XG4gICAgaWYgKGZsYWdzICYgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIG5vdEZvdW5kVmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvd1Byb3ZpZGVyTm90Rm91bmRFcnJvcih0b2tlbiwgJ05vZGVJbmplY3RvcicpO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgYXNzb2NpYXRlZCB0byB0aGUgZ2l2ZW4gdG9rZW4gZnJvbSB0aGUgTW9kdWxlSW5qZWN0b3Igb3IgdGhyb3dzIGV4Y2VwdGlvblxuICpcbiAqIEBwYXJhbSBsVmlldyBUaGUgYExWaWV3YCB0aGF0IGNvbnRhaW5zIHRoZSBgdE5vZGVgXG4gKiBAcGFyYW0gdG9rZW4gVGhlIHRva2VuIHRvIGxvb2sgZm9yXG4gKiBAcGFyYW0gZmxhZ3MgSW5qZWN0aW9uIGZsYWdzXG4gKiBAcGFyYW0gbm90Rm91bmRWYWx1ZSBUaGUgdmFsdWUgdG8gcmV0dXJuIHdoZW4gdGhlIGluamVjdGlvbiBmbGFncyBpcyBgSW5qZWN0RmxhZ3MuT3B0aW9uYWxgXG4gKiBAcmV0dXJucyB0aGUgdmFsdWUgZnJvbSB0aGUgaW5qZWN0b3Igb3IgdGhyb3dzIGFuIGV4Y2VwdGlvblxuICovXG5mdW5jdGlvbiBsb29rdXBUb2tlblVzaW5nTW9kdWxlSW5qZWN0b3IobFZpZXcsIHRva2VuLCBmbGFncywgbm90Rm91bmRWYWx1ZSkge1xuICAgIGlmIChmbGFncyAmIEluamVjdEZsYWdzLk9wdGlvbmFsICYmIG5vdEZvdW5kVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBUaGlzIG11c3QgYmUgc2V0IG9yIHRoZSBOdWxsSW5qZWN0b3Igd2lsbCB0aHJvdyBmb3Igb3B0aW9uYWwgZGVwc1xuICAgICAgICBub3RGb3VuZFZhbHVlID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKChmbGFncyAmIChJbmplY3RGbGFncy5TZWxmIHwgSW5qZWN0RmxhZ3MuSG9zdCkpID09PSAwKSB7XG4gICAgICAgIGNvbnN0IG1vZHVsZUluamVjdG9yID0gbFZpZXdbSU5KRUNUT1IkMV07XG4gICAgICAgIC8vIHN3aXRjaCB0byBgaW5qZWN0SW5qZWN0b3JPbmx5YCBpbXBsZW1lbnRhdGlvbiBmb3IgbW9kdWxlIGluamVjdG9yLCBzaW5jZSBtb2R1bGUgaW5qZWN0b3JcbiAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXZlIGFjY2VzcyB0byBDb21wb25lbnQvRGlyZWN0aXZlIERJIHNjb3BlICh0aGF0IG1heSBoYXBwZW4gdGhyb3VnaFxuICAgICAgICAvLyBgZGlyZWN0aXZlSW5qZWN0YCBpbXBsZW1lbnRhdGlvbilcbiAgICAgICAgY29uc3QgcHJldmlvdXNJbmplY3RJbXBsZW1lbnRhdGlvbiA9IHNldEluamVjdEltcGxlbWVudGF0aW9uKHVuZGVmaW5lZCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAobW9kdWxlSW5qZWN0b3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlSW5qZWN0b3IuZ2V0KHRva2VuLCBub3RGb3VuZFZhbHVlLCBmbGFncyAmIEluamVjdEZsYWdzLk9wdGlvbmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmplY3RSb290TGltcE1vZGUodG9rZW4sIG5vdEZvdW5kVmFsdWUsIGZsYWdzICYgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgc2V0SW5qZWN0SW1wbGVtZW50YXRpb24ocHJldmlvdXNJbmplY3RJbXBsZW1lbnRhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vdEZvdW5kVmFsdWVPclRocm93KG5vdEZvdW5kVmFsdWUsIHRva2VuLCBmbGFncyk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIGFzc29jaWF0ZWQgdG8gdGhlIGdpdmVuIHRva2VuIGZyb20gdGhlIE5vZGVJbmplY3RvcnMgPT4gTW9kdWxlSW5qZWN0b3IuXG4gKlxuICogTG9vayBmb3IgdGhlIGluamVjdG9yIHByb3ZpZGluZyB0aGUgdG9rZW4gYnkgd2Fsa2luZyB1cCB0aGUgbm9kZSBpbmplY3RvciB0cmVlIGFuZCB0aGVuXG4gKiB0aGUgbW9kdWxlIGluamVjdG9yIHRyZWUuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBwYXRjaGVzIGB0b2tlbmAgd2l0aCBgX19OR19FTEVNRU5UX0lEX19gIHdoaWNoIGNvbnRhaW5zIHRoZSBpZCBmb3IgdGhlIGJsb29tXG4gKiBmaWx0ZXIuIGAtMWAgaXMgcmVzZXJ2ZWQgZm9yIGluamVjdGluZyBgSW5qZWN0b3JgIChpbXBsZW1lbnRlZCBieSBgTm9kZUluamVjdG9yYClcbiAqXG4gKiBAcGFyYW0gdE5vZGUgVGhlIE5vZGUgd2hlcmUgdGhlIHNlYXJjaCBmb3IgdGhlIGluamVjdG9yIHNob3VsZCBzdGFydFxuICogQHBhcmFtIGxWaWV3IFRoZSBgTFZpZXdgIHRoYXQgY29udGFpbnMgdGhlIGB0Tm9kZWBcbiAqIEBwYXJhbSB0b2tlbiBUaGUgdG9rZW4gdG8gbG9vayBmb3JcbiAqIEBwYXJhbSBmbGFncyBJbmplY3Rpb24gZmxhZ3NcbiAqIEBwYXJhbSBub3RGb3VuZFZhbHVlIFRoZSB2YWx1ZSB0byByZXR1cm4gd2hlbiB0aGUgaW5qZWN0aW9uIGZsYWdzIGlzIGBJbmplY3RGbGFncy5PcHRpb25hbGBcbiAqIEByZXR1cm5zIHRoZSB2YWx1ZSBmcm9tIHRoZSBpbmplY3RvciwgYG51bGxgIHdoZW4gbm90IGZvdW5kLCBvciBgbm90Rm91bmRWYWx1ZWAgaWYgcHJvdmlkZWRcbiAqL1xuZnVuY3Rpb24gZ2V0T3JDcmVhdGVJbmplY3RhYmxlKHROb2RlLCBsVmlldywgdG9rZW4sIGZsYWdzID0gSW5qZWN0RmxhZ3MuRGVmYXVsdCwgbm90Rm91bmRWYWx1ZSkge1xuICAgIGlmICh0Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBibG9vbUhhc2ggPSBibG9vbUhhc2hCaXRPckZhY3RvcnkodG9rZW4pO1xuICAgICAgICAvLyBJZiB0aGUgSUQgc3RvcmVkIGhlcmUgaXMgYSBmdW5jdGlvbiwgdGhpcyBpcyBhIHNwZWNpYWwgb2JqZWN0IGxpa2UgRWxlbWVudFJlZiBvciBUZW1wbGF0ZVJlZlxuICAgICAgICAvLyBzbyBqdXN0IGNhbGwgdGhlIGZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIGl0LlxuICAgICAgICBpZiAodHlwZW9mIGJsb29tSGFzaCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgaWYgKCFlbnRlckRJKGxWaWV3LCB0Tm9kZSwgZmxhZ3MpKSB7XG4gICAgICAgICAgICAgICAgLy8gRmFpbGVkIHRvIGVudGVyIERJLCB0cnkgbW9kdWxlIGluamVjdG9yIGluc3RlYWQuIElmIGEgdG9rZW4gaXMgaW5qZWN0ZWQgd2l0aCB0aGUgQEhvc3RcbiAgICAgICAgICAgICAgICAvLyBmbGFnLCB0aGUgbW9kdWxlIGluamVjdG9yIGlzIG5vdCBzZWFyY2hlZCBmb3IgdGhhdCB0b2tlbiBpbiBJdnkuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChmbGFncyAmIEluamVjdEZsYWdzLkhvc3QpID9cbiAgICAgICAgICAgICAgICAgICAgbm90Rm91bmRWYWx1ZU9yVGhyb3cobm90Rm91bmRWYWx1ZSwgdG9rZW4sIGZsYWdzKSA6XG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFRva2VuVXNpbmdNb2R1bGVJbmplY3RvcihsVmlldywgdG9rZW4sIGZsYWdzLCBub3RGb3VuZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBibG9vbUhhc2goZmxhZ3MpO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsICYmICEoZmxhZ3MgJiBJbmplY3RGbGFncy5PcHRpb25hbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3dQcm92aWRlck5vdEZvdW5kRXJyb3IodG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGxlYXZlREkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgYmxvb21IYXNoID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgLy8gQSByZWZlcmVuY2UgdG8gdGhlIHByZXZpb3VzIGluamVjdG9yIFRWaWV3IHRoYXQgd2FzIGZvdW5kIHdoaWxlIGNsaW1iaW5nIHRoZSBlbGVtZW50XG4gICAgICAgICAgICAvLyBpbmplY3RvciB0cmVlLiBUaGlzIGlzIHVzZWQgdG8ga25vdyBpZiB2aWV3UHJvdmlkZXJzIGNhbiBiZSBhY2Nlc3NlZCBvbiB0aGUgY3VycmVudFxuICAgICAgICAgICAgLy8gaW5qZWN0b3IuXG4gICAgICAgICAgICBsZXQgcHJldmlvdXNUVmlldyA9IG51bGw7XG4gICAgICAgICAgICBsZXQgaW5qZWN0b3JJbmRleCA9IGdldEluamVjdG9ySW5kZXgodE5vZGUsIGxWaWV3KTtcbiAgICAgICAgICAgIGxldCBwYXJlbnRMb2NhdGlvbiA9IE5PX1BBUkVOVF9JTkpFQ1RPUjtcbiAgICAgICAgICAgIGxldCBob3N0VEVsZW1lbnROb2RlID0gZmxhZ3MgJiBJbmplY3RGbGFncy5Ib3N0ID8gbFZpZXdbREVDTEFSQVRJT05fQ09NUE9ORU5UX1ZJRVddW1RfSE9TVF0gOiBudWxsO1xuICAgICAgICAgICAgLy8gSWYgd2Ugc2hvdWxkIHNraXAgdGhpcyBpbmplY3Rvciwgb3IgaWYgdGhlcmUgaXMgbm8gaW5qZWN0b3Igb24gdGhpcyBub2RlLCBzdGFydCBieVxuICAgICAgICAgICAgLy8gc2VhcmNoaW5nIHRoZSBwYXJlbnQgaW5qZWN0b3IuXG4gICAgICAgICAgICBpZiAoaW5qZWN0b3JJbmRleCA9PT0gLTEgfHwgZmxhZ3MgJiBJbmplY3RGbGFncy5Ta2lwU2VsZikge1xuICAgICAgICAgICAgICAgIHBhcmVudExvY2F0aW9uID0gaW5qZWN0b3JJbmRleCA9PT0gLTEgPyBnZXRQYXJlbnRJbmplY3RvckxvY2F0aW9uKHROb2RlLCBsVmlldykgOlxuICAgICAgICAgICAgICAgICAgICBsVmlld1tpbmplY3RvckluZGV4ICsgOCAvKiBQQVJFTlQgKi9dO1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRMb2NhdGlvbiA9PT0gTk9fUEFSRU5UX0lOSkVDVE9SIHx8ICFzaG91bGRTZWFyY2hQYXJlbnQoZmxhZ3MsIGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICBpbmplY3RvckluZGV4ID0gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1RWaWV3ID0gbFZpZXdbVFZJRVddO1xuICAgICAgICAgICAgICAgICAgICBpbmplY3RvckluZGV4ID0gZ2V0UGFyZW50SW5qZWN0b3JJbmRleChwYXJlbnRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGxWaWV3ID0gZ2V0UGFyZW50SW5qZWN0b3JWaWV3KHBhcmVudExvY2F0aW9uLCBsVmlldyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVHJhdmVyc2UgdXAgdGhlIGluamVjdG9yIHRyZWUgdW50aWwgd2UgZmluZCBhIHBvdGVudGlhbCBtYXRjaCBvciB1bnRpbCB3ZSBrbm93IHRoZXJlXG4gICAgICAgICAgICAvLyAqaXNuJ3QqIGEgbWF0Y2guXG4gICAgICAgICAgICB3aGlsZSAoaW5qZWN0b3JJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Tm9kZUluamVjdG9yKGxWaWV3LCBpbmplY3RvckluZGV4KTtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayB0aGUgY3VycmVudCBpbmplY3Rvci4gSWYgaXQgbWF0Y2hlcywgc2VlIGlmIGl0IGNvbnRhaW5zIHRva2VuLlxuICAgICAgICAgICAgICAgIGNvbnN0IHRWaWV3ID0gbFZpZXdbVFZJRVddO1xuICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICBhc3NlcnRUTm9kZUZvckxWaWV3KHRWaWV3LmRhdGFbaW5qZWN0b3JJbmRleCArIDggLyogVE5PREUgKi9dLCBsVmlldyk7XG4gICAgICAgICAgICAgICAgaWYgKGJsb29tSGFzVG9rZW4oYmxvb21IYXNoLCBpbmplY3RvckluZGV4LCB0Vmlldy5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50LCB3ZSBoYXZlIGFuIGluamVjdG9yIHdoaWNoICptYXkqIGNvbnRhaW4gdGhlIHRva2VuLCBzbyB3ZSBzdGVwIHRocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHByb3ZpZGVycyBhbmQgZGlyZWN0aXZlcyBhc3NvY2lhdGVkIHdpdGggdGhlIGluamVjdG9yJ3MgY29ycmVzcG9uZGluZyBub2RlIHRvIGdldFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaW5zdGFuY2UuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gc2VhcmNoVG9rZW5zT25JbmplY3RvcihpbmplY3RvckluZGV4LCBsVmlldywgdG9rZW4sIHByZXZpb3VzVFZpZXcsIGZsYWdzLCBob3N0VEVsZW1lbnROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlICE9PSBOT1RfRk9VTkQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJlbnRMb2NhdGlvbiA9IGxWaWV3W2luamVjdG9ySW5kZXggKyA4IC8qIFBBUkVOVCAqL107XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudExvY2F0aW9uICE9PSBOT19QQVJFTlRfSU5KRUNUT1IgJiZcbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkU2VhcmNoUGFyZW50KGZsYWdzLCBsVmlld1tUVklFV10uZGF0YVtpbmplY3RvckluZGV4ICsgOCAvKiBUTk9ERSAqL10gPT09IGhvc3RURWxlbWVudE5vZGUpICYmXG4gICAgICAgICAgICAgICAgICAgIGJsb29tSGFzVG9rZW4oYmxvb21IYXNoLCBpbmplY3RvckluZGV4LCBsVmlldykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGRlZiB3YXNuJ3QgZm91bmQgYW55d2hlcmUgb24gdGhpcyBub2RlLCBzbyBpdCB3YXMgYSBmYWxzZSBwb3NpdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVHJhdmVyc2UgdXAgdGhlIHRyZWUgYW5kIGNvbnRpbnVlIHNlYXJjaGluZy5cbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNUVmlldyA9IHRWaWV3O1xuICAgICAgICAgICAgICAgICAgICBpbmplY3RvckluZGV4ID0gZ2V0UGFyZW50SW5qZWN0b3JJbmRleChwYXJlbnRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGxWaWV3ID0gZ2V0UGFyZW50SW5qZWN0b3JWaWV3KHBhcmVudExvY2F0aW9uLCBsVmlldyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBzaG91bGQgbm90IHNlYXJjaCBwYXJlbnQgT1IgSWYgdGhlIGFuY2VzdG9yIGJsb29tIGZpbHRlciB2YWx1ZSBkb2VzIG5vdCBoYXZlIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBiaXQgY29ycmVzcG9uZGluZyB0byB0aGUgZGlyZWN0aXZlIHdlIGNhbiBnaXZlIHVwIG9uIHRyYXZlcnNpbmcgdXAgdG8gZmluZCB0aGUgc3BlY2lmaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5qZWN0b3IuXG4gICAgICAgICAgICAgICAgICAgIGluamVjdG9ySW5kZXggPSAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvb2t1cFRva2VuVXNpbmdNb2R1bGVJbmplY3RvcihsVmlldywgdG9rZW4sIGZsYWdzLCBub3RGb3VuZFZhbHVlKTtcbn1cbmNvbnN0IE5PVF9GT1VORCA9IHt9O1xuZnVuY3Rpb24gY3JlYXRlTm9kZUluamVjdG9yKCkge1xuICAgIHJldHVybiBuZXcgTm9kZUluamVjdG9yKGdldEN1cnJlbnRUTm9kZSgpLCBnZXRMVmlldygpKTtcbn1cbmZ1bmN0aW9uIHNlYXJjaFRva2Vuc09uSW5qZWN0b3IoaW5qZWN0b3JJbmRleCwgbFZpZXcsIHRva2VuLCBwcmV2aW91c1RWaWV3LCBmbGFncywgaG9zdFRFbGVtZW50Tm9kZSkge1xuICAgIGNvbnN0IGN1cnJlbnRUVmlldyA9IGxWaWV3W1RWSUVXXTtcbiAgICBjb25zdCB0Tm9kZSA9IGN1cnJlbnRUVmlldy5kYXRhW2luamVjdG9ySW5kZXggKyA4IC8qIFROT0RFICovXTtcbiAgICAvLyBGaXJzdCwgd2UgbmVlZCB0byBkZXRlcm1pbmUgaWYgdmlldyBwcm92aWRlcnMgY2FuIGJlIGFjY2Vzc2VkIGJ5IHRoZSBzdGFydGluZyBlbGVtZW50LlxuICAgIC8vIFRoZXJlIGFyZSB0d28gcG9zc2liaWxpdGllc1xuICAgIGNvbnN0IGNhbkFjY2Vzc1ZpZXdQcm92aWRlcnMgPSBwcmV2aW91c1RWaWV3ID09IG51bGwgP1xuICAgICAgICAvLyAxKSBUaGlzIGlzIHRoZSBmaXJzdCBpbnZvY2F0aW9uIGBwcmV2aW91c1RWaWV3ID09IG51bGxgIHdoaWNoIG1lYW5zIHRoYXQgd2UgYXJlIGF0IHRoZVxuICAgICAgICAvLyBgVE5vZGVgIG9mIHdoZXJlIGluamVjdG9yIGlzIHN0YXJ0aW5nIHRvIGxvb2suIEluIHN1Y2ggYSBjYXNlIHRoZSBvbmx5IHRpbWUgd2UgYXJlIGFsbG93ZWRcbiAgICAgICAgLy8gdG8gbG9vayBpbnRvIHRoZSBWaWV3UHJvdmlkZXJzIGlzIGlmOlxuICAgICAgICAvLyAtIHdlIGFyZSBvbiBhIGNvbXBvbmVudFxuICAgICAgICAvLyAtIEFORCB0aGUgaW5qZWN0b3Igc2V0IGBpbmNsdWRlVmlld1Byb3ZpZGVyc2AgdG8gdHJ1ZSAoaW1wbHlpbmcgdGhhdCB0aGUgdG9rZW4gY2FuIHNlZVxuICAgICAgICAvLyBWaWV3UHJvdmlkZXJzIGJlY2F1c2UgaXQgaXMgdGhlIENvbXBvbmVudCBvciBhIFNlcnZpY2Ugd2hpY2ggaXRzZWxmIHdhcyBkZWNsYXJlZCBpblxuICAgICAgICAvLyBWaWV3UHJvdmlkZXJzKVxuICAgICAgICAoaXNDb21wb25lbnRIb3N0KHROb2RlKSAmJiBpbmNsdWRlVmlld1Byb3ZpZGVycykgOlxuICAgICAgICAvLyAyKSBgcHJldmlvdXNUVmlldyAhPSBudWxsYCB3aGljaCBtZWFucyB0aGF0IHdlIGFyZSBub3cgd2Fsa2luZyBhY3Jvc3MgdGhlIHBhcmVudCBub2Rlcy5cbiAgICAgICAgLy8gSW4gc3VjaCBhIGNhc2Ugd2UgYXJlIG9ubHkgYWxsb3dlZCB0byBsb29rIGludG8gdGhlIFZpZXdQcm92aWRlcnMgaWY6XG4gICAgICAgIC8vIC0gV2UganVzdCBjcm9zc2VkIGZyb20gY2hpbGQgVmlldyB0byBQYXJlbnQgVmlldyBgcHJldmlvdXNUVmlldyAhPSBjdXJyZW50VFZpZXdgXG4gICAgICAgIC8vIC0gQU5EIHRoZSBwYXJlbnQgVE5vZGUgaXMgYW4gRWxlbWVudC5cbiAgICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IHdlIGp1c3QgY2FtZSBmcm9tIHRoZSBDb21wb25lbnQncyBWaWV3IGFuZCB0aGVyZWZvcmUgYXJlIGFsbG93ZWQgdG8gc2VlXG4gICAgICAgIC8vIGludG8gdGhlIFZpZXdQcm92aWRlcnMuXG4gICAgICAgIChwcmV2aW91c1RWaWV3ICE9IGN1cnJlbnRUVmlldyAmJiAoKHROb2RlLnR5cGUgJiAzIC8qIEFueVJOb2RlICovKSAhPT0gMCkpO1xuICAgIC8vIFRoaXMgc3BlY2lhbCBjYXNlIGhhcHBlbnMgd2hlbiB0aGVyZSBpcyBhIEBob3N0IG9uIHRoZSBpbmplY3QgYW5kIHdoZW4gd2UgYXJlIHNlYXJjaGluZ1xuICAgIC8vIG9uIHRoZSBob3N0IGVsZW1lbnQgbm9kZS5cbiAgICBjb25zdCBpc0hvc3RTcGVjaWFsQ2FzZSA9IChmbGFncyAmIEluamVjdEZsYWdzLkhvc3QpICYmIGhvc3RURWxlbWVudE5vZGUgPT09IHROb2RlO1xuICAgIGNvbnN0IGluamVjdGFibGVJZHggPSBsb2NhdGVEaXJlY3RpdmVPclByb3ZpZGVyKHROb2RlLCBjdXJyZW50VFZpZXcsIHRva2VuLCBjYW5BY2Nlc3NWaWV3UHJvdmlkZXJzLCBpc0hvc3RTcGVjaWFsQ2FzZSk7XG4gICAgaWYgKGluamVjdGFibGVJZHggIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGdldE5vZGVJbmplY3RhYmxlKGxWaWV3LCBjdXJyZW50VFZpZXcsIGluamVjdGFibGVJZHgsIHROb2RlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBOT1RfRk9VTkQ7XG4gICAgfVxufVxuLyoqXG4gKiBTZWFyY2hlcyBmb3IgdGhlIGdpdmVuIHRva2VuIGFtb25nIHRoZSBub2RlJ3MgZGlyZWN0aXZlcyBhbmQgcHJvdmlkZXJzLlxuICpcbiAqIEBwYXJhbSB0Tm9kZSBUTm9kZSBvbiB3aGljaCBkaXJlY3RpdmVzIGFyZSBwcmVzZW50LlxuICogQHBhcmFtIHRWaWV3IFRoZSB0VmlldyB3ZSBhcmUgY3VycmVudGx5IHByb2Nlc3NpbmdcbiAqIEBwYXJhbSB0b2tlbiBQcm92aWRlciB0b2tlbiBvciB0eXBlIG9mIGEgZGlyZWN0aXZlIHRvIGxvb2sgZm9yLlxuICogQHBhcmFtIGNhbkFjY2Vzc1ZpZXdQcm92aWRlcnMgV2hldGhlciB2aWV3IHByb3ZpZGVycyBzaG91bGQgYmUgY29uc2lkZXJlZC5cbiAqIEBwYXJhbSBpc0hvc3RTcGVjaWFsQ2FzZSBXaGV0aGVyIHRoZSBob3N0IHNwZWNpYWwgY2FzZSBhcHBsaWVzLlxuICogQHJldHVybnMgSW5kZXggb2YgYSBmb3VuZCBkaXJlY3RpdmUgb3IgcHJvdmlkZXIsIG9yIG51bGwgd2hlbiBub25lIGZvdW5kLlxuICovXG5mdW5jdGlvbiBsb2NhdGVEaXJlY3RpdmVPclByb3ZpZGVyKHROb2RlLCB0VmlldywgdG9rZW4sIGNhbkFjY2Vzc1ZpZXdQcm92aWRlcnMsIGlzSG9zdFNwZWNpYWxDYXNlKSB7XG4gICAgY29uc3Qgbm9kZVByb3ZpZGVySW5kZXhlcyA9IHROb2RlLnByb3ZpZGVySW5kZXhlcztcbiAgICBjb25zdCB0SW5qZWN0YWJsZXMgPSB0Vmlldy5kYXRhO1xuICAgIGNvbnN0IGluamVjdGFibGVzU3RhcnQgPSBub2RlUHJvdmlkZXJJbmRleGVzICYgMTA0ODU3NSAvKiBQcm92aWRlcnNTdGFydEluZGV4TWFzayAqLztcbiAgICBjb25zdCBkaXJlY3RpdmVzU3RhcnQgPSB0Tm9kZS5kaXJlY3RpdmVTdGFydDtcbiAgICBjb25zdCBkaXJlY3RpdmVFbmQgPSB0Tm9kZS5kaXJlY3RpdmVFbmQ7XG4gICAgY29uc3QgY3B0Vmlld1Byb3ZpZGVyc0NvdW50ID0gbm9kZVByb3ZpZGVySW5kZXhlcyA+PiAyMCAvKiBDcHRWaWV3UHJvdmlkZXJzQ291bnRTaGlmdCAqLztcbiAgICBjb25zdCBzdGFydGluZ0luZGV4ID0gY2FuQWNjZXNzVmlld1Byb3ZpZGVycyA/IGluamVjdGFibGVzU3RhcnQgOiBpbmplY3RhYmxlc1N0YXJ0ICsgY3B0Vmlld1Byb3ZpZGVyc0NvdW50O1xuICAgIC8vIFdoZW4gdGhlIGhvc3Qgc3BlY2lhbCBjYXNlIGFwcGxpZXMsIG9ubHkgdGhlIHZpZXdQcm92aWRlcnMgYW5kIHRoZSBjb21wb25lbnQgYXJlIHZpc2libGVcbiAgICBjb25zdCBlbmRJbmRleCA9IGlzSG9zdFNwZWNpYWxDYXNlID8gaW5qZWN0YWJsZXNTdGFydCArIGNwdFZpZXdQcm92aWRlcnNDb3VudCA6IGRpcmVjdGl2ZUVuZDtcbiAgICBmb3IgKGxldCBpID0gc3RhcnRpbmdJbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgICAgY29uc3QgcHJvdmlkZXJUb2tlbk9yRGVmID0gdEluamVjdGFibGVzW2ldO1xuICAgICAgICBpZiAoaSA8IGRpcmVjdGl2ZXNTdGFydCAmJiB0b2tlbiA9PT0gcHJvdmlkZXJUb2tlbk9yRGVmIHx8XG4gICAgICAgICAgICBpID49IGRpcmVjdGl2ZXNTdGFydCAmJiBwcm92aWRlclRva2VuT3JEZWYudHlwZSA9PT0gdG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0hvc3RTcGVjaWFsQ2FzZSkge1xuICAgICAgICBjb25zdCBkaXJEZWYgPSB0SW5qZWN0YWJsZXNbZGlyZWN0aXZlc1N0YXJ0XTtcbiAgICAgICAgaWYgKGRpckRlZiAmJiBpc0NvbXBvbmVudERlZihkaXJEZWYpICYmIGRpckRlZi50eXBlID09PSB0b2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZXNTdGFydDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogUmV0cmlldmUgb3IgaW5zdGFudGlhdGUgdGhlIGluamVjdGFibGUgZnJvbSB0aGUgYExWaWV3YCBhdCBwYXJ0aWN1bGFyIGBpbmRleGAuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBjaGVja3MgdG8gc2VlIGlmIHRoZSB2YWx1ZSBoYXMgYWxyZWFkeSBiZWVuIGluc3RhbnRpYXRlZCBhbmQgaWYgc28gcmV0dXJucyB0aGVcbiAqIGNhY2hlZCBgaW5qZWN0YWJsZWAuIE90aGVyd2lzZSBpZiBpdCBkZXRlY3RzIHRoYXQgdGhlIHZhbHVlIGlzIHN0aWxsIGEgZmFjdG9yeSBpdFxuICogaW5zdGFudGlhdGVzIHRoZSBgaW5qZWN0YWJsZWAgYW5kIGNhY2hlcyB0aGUgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGVJbmplY3RhYmxlKGxWaWV3LCB0VmlldywgaW5kZXgsIHROb2RlKSB7XG4gICAgbGV0IHZhbHVlID0gbFZpZXdbaW5kZXhdO1xuICAgIGNvbnN0IHREYXRhID0gdFZpZXcuZGF0YTtcbiAgICBpZiAoaXNGYWN0b3J5KHZhbHVlKSkge1xuICAgICAgICBjb25zdCBmYWN0b3J5ID0gdmFsdWU7XG4gICAgICAgIGlmIChmYWN0b3J5LnJlc29sdmluZykge1xuICAgICAgICAgICAgdGhyb3dDeWNsaWNEZXBlbmRlbmN5RXJyb3Ioc3RyaW5naWZ5Rm9yRXJyb3IodERhdGFbaW5kZXhdKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJldmlvdXNJbmNsdWRlVmlld1Byb3ZpZGVycyA9IHNldEluY2x1ZGVWaWV3UHJvdmlkZXJzKGZhY3RvcnkuY2FuU2VlVmlld1Byb3ZpZGVycyk7XG4gICAgICAgIGZhY3RvcnkucmVzb2x2aW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgcHJldmlvdXNJbmplY3RJbXBsZW1lbnRhdGlvbiA9IGZhY3RvcnkuaW5qZWN0SW1wbCA/IHNldEluamVjdEltcGxlbWVudGF0aW9uKGZhY3RvcnkuaW5qZWN0SW1wbCkgOiBudWxsO1xuICAgICAgICBjb25zdCBzdWNjZXNzID0gZW50ZXJESShsVmlldywgdE5vZGUsIEluamVjdEZsYWdzLkRlZmF1bHQpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIGFzc2VydEVxdWFsKHN1Y2Nlc3MsIHRydWUsICdCZWNhdXNlIGZsYWdzIGRvIG5vdCBjb250YWluIFxcYFNraXBTZWxmXFwnIHdlIGV4cGVjdCB0aGlzIHRvIGFsd2F5cyBzdWNjZWVkLicpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFsdWUgPSBsVmlld1tpbmRleF0gPSBmYWN0b3J5LmZhY3RvcnkodW5kZWZpbmVkLCB0RGF0YSwgbFZpZXcsIHROb2RlKTtcbiAgICAgICAgICAgIC8vIFRoaXMgY29kZSBwYXRoIGlzIGhpdCBmb3IgYm90aCBkaXJlY3RpdmVzIGFuZCBwcm92aWRlcnMuXG4gICAgICAgICAgICAvLyBGb3IgcGVyZiByZWFzb25zLCB3ZSB3YW50IHRvIGF2b2lkIHNlYXJjaGluZyBmb3IgaG9va3Mgb24gcHJvdmlkZXJzLlxuICAgICAgICAgICAgLy8gSXQgZG9lcyBubyBoYXJtIHRvIHRyeSAodGhlIGhvb2tzIGp1c3Qgd29uJ3QgZXhpc3QpLCBidXQgdGhlIGV4dHJhXG4gICAgICAgICAgICAvLyBjaGVja3MgYXJlIHVubmVjZXNzYXJ5IGFuZCB0aGlzIGlzIGEgaG90IHBhdGguIFNvIHdlIGNoZWNrIHRvIHNlZVxuICAgICAgICAgICAgLy8gaWYgdGhlIGluZGV4IG9mIHRoZSBkZXBlbmRlbmN5IGlzIGluIHRoZSBkaXJlY3RpdmUgcmFuZ2UgZm9yIHRoaXNcbiAgICAgICAgICAgIC8vIHROb2RlLiBJZiBpdCdzIG5vdCwgd2Uga25vdyBpdCdzIGEgcHJvdmlkZXIgYW5kIHNraXAgaG9vayByZWdpc3RyYXRpb24uXG4gICAgICAgICAgICBpZiAodFZpZXcuZmlyc3RDcmVhdGVQYXNzICYmIGluZGV4ID49IHROb2RlLmRpcmVjdGl2ZVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydERpcmVjdGl2ZURlZih0RGF0YVtpbmRleF0pO1xuICAgICAgICAgICAgICAgIHJlZ2lzdGVyUHJlT3JkZXJIb29rcyhpbmRleCwgdERhdGFbaW5kZXhdLCB0Vmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBwcmV2aW91c0luamVjdEltcGxlbWVudGF0aW9uICE9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgc2V0SW5qZWN0SW1wbGVtZW50YXRpb24ocHJldmlvdXNJbmplY3RJbXBsZW1lbnRhdGlvbik7XG4gICAgICAgICAgICBzZXRJbmNsdWRlVmlld1Byb3ZpZGVycyhwcmV2aW91c0luY2x1ZGVWaWV3UHJvdmlkZXJzKTtcbiAgICAgICAgICAgIGZhY3RvcnkucmVzb2x2aW5nID0gZmFsc2U7XG4gICAgICAgICAgICBsZWF2ZURJKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBiaXQgaW4gYW4gaW5qZWN0b3IncyBibG9vbSBmaWx0ZXIgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hldGhlciBvciBub3RcbiAqIHRoZSBkaXJlY3RpdmUgbWlnaHQgYmUgcHJvdmlkZWQgYnkgdGhlIGluamVjdG9yLlxuICpcbiAqIFdoZW4gYSBkaXJlY3RpdmUgaXMgcHVibGljLCBpdCBpcyBhZGRlZCB0byB0aGUgYmxvb20gZmlsdGVyIGFuZCBnaXZlbiBhIHVuaXF1ZSBJRCB0aGF0IGNhbiBiZVxuICogcmV0cmlldmVkIG9uIHRoZSBUeXBlLiBXaGVuIHRoZSBkaXJlY3RpdmUgaXNuJ3QgcHVibGljIG9yIHRoZSB0b2tlbiBpcyBub3QgYSBkaXJlY3RpdmUgYG51bGxgXG4gKiBpcyByZXR1cm5lZCBhcyB0aGUgbm9kZSBpbmplY3RvciBjYW4gbm90IHBvc3NpYmx5IHByb3ZpZGUgdGhhdCB0b2tlbi5cbiAqXG4gKiBAcGFyYW0gdG9rZW4gdGhlIGluamVjdGlvbiB0b2tlblxuICogQHJldHVybnMgdGhlIG1hdGNoaW5nIGJpdCB0byBjaGVjayBpbiB0aGUgYmxvb20gZmlsdGVyIG9yIGBudWxsYCBpZiB0aGUgdG9rZW4gaXMgbm90IGtub3duLlxuICogICBXaGVuIHRoZSByZXR1cm5lZCB2YWx1ZSBpcyBuZWdhdGl2ZSB0aGVuIGl0IHJlcHJlc2VudHMgc3BlY2lhbCB2YWx1ZXMgc3VjaCBhcyBgSW5qZWN0b3JgLlxuICovXG5mdW5jdGlvbiBibG9vbUhhc2hCaXRPckZhY3RvcnkodG9rZW4pIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0b2tlbiwgJ3Rva2VuIG11c3QgYmUgZGVmaW5lZCcpO1xuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB0b2tlbi5jaGFyQ29kZUF0KDApIHx8IDA7XG4gICAgfVxuICAgIGNvbnN0IHRva2VuSWQgPSBcbiAgICAvLyBGaXJzdCBjaGVjayB3aXRoIGBoYXNPd25Qcm9wZXJ0eWAgc28gd2UgZG9uJ3QgZ2V0IGFuIGluaGVyaXRlZCBJRC5cbiAgICB0b2tlbi5oYXNPd25Qcm9wZXJ0eShOR19FTEVNRU5UX0lEKSA/IHRva2VuW05HX0VMRU1FTlRfSURdIDogdW5kZWZpbmVkO1xuICAgIC8vIE5lZ2F0aXZlIHRva2VuIElEcyBhcmUgdXNlZCBmb3Igc3BlY2lhbCBvYmplY3RzIHN1Y2ggYXMgYEluamVjdG9yYFxuICAgIGlmICh0eXBlb2YgdG9rZW5JZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKHRva2VuSWQgPj0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRva2VuSWQgJiBCTE9PTV9NQVNLO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWwodG9rZW5JZCwgLTEgLyogSW5qZWN0b3IgKi8sICdFeHBlY3RpbmcgdG8gZ2V0IFNwZWNpYWwgSW5qZWN0b3IgSWQnKTtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVOb2RlSW5qZWN0b3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0b2tlbklkO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJsb29tSGFzVG9rZW4oYmxvb21IYXNoLCBpbmplY3RvckluZGV4LCBpbmplY3RvclZpZXcpIHtcbiAgICAvLyBDcmVhdGUgYSBtYXNrIHRoYXQgdGFyZ2V0cyB0aGUgc3BlY2lmaWMgYml0IGFzc29jaWF0ZWQgd2l0aCB0aGUgZGlyZWN0aXZlIHdlJ3JlIGxvb2tpbmcgZm9yLlxuICAgIC8vIEpTIGJpdCBvcGVyYXRpb25zIGFyZSAzMiBiaXRzLCBzbyB0aGlzIHdpbGwgYmUgYSBudW1iZXIgYmV0d2VlbiAyXjAgYW5kIDJeMzEsIGNvcnJlc3BvbmRpbmdcbiAgICAvLyB0byBiaXQgcG9zaXRpb25zIDAgLSAzMSBpbiBhIDMyIGJpdCBpbnRlZ2VyLlxuICAgIGNvbnN0IG1hc2sgPSAxIDw8IGJsb29tSGFzaDtcbiAgICAvLyBFYWNoIGJsb29tIGJ1Y2tldCBpbiBgaW5qZWN0b3JWaWV3YCByZXByZXNlbnRzIGBCTE9PTV9CVUNLRVRfQklUU2AgbnVtYmVyIG9mIGJpdHMgb2ZcbiAgICAvLyBgYmxvb21IYXNoYC4gQW55IGJpdHMgaW4gYGJsb29tSGFzaGAgYmV5b25kIGBCTE9PTV9CVUNLRVRfQklUU2AgaW5kaWNhdGUgdGhlIGJ1Y2tldCBvZmZzZXRcbiAgICAvLyB0aGF0IHNob3VsZCBiZSB1c2VkLlxuICAgIGNvbnN0IHZhbHVlID0gaW5qZWN0b3JWaWV3W2luamVjdG9ySW5kZXggKyAoYmxvb21IYXNoID4+IEJMT09NX0JVQ0tFVF9CSVRTKV07XG4gICAgLy8gSWYgdGhlIGJsb29tIGZpbHRlciB2YWx1ZSBoYXMgdGhlIGJpdCBjb3JyZXNwb25kaW5nIHRvIHRoZSBkaXJlY3RpdmUncyBibG9vbUJpdCBmbGlwcGVkIG9uLFxuICAgIC8vIHRoaXMgaW5qZWN0b3IgaXMgYSBwb3RlbnRpYWwgbWF0Y2guXG4gICAgcmV0dXJuICEhKHZhbHVlICYgbWFzayk7XG59XG4vKiogUmV0dXJucyB0cnVlIGlmIGZsYWdzIHByZXZlbnQgcGFyZW50IGluamVjdG9yIGZyb20gYmVpbmcgc2VhcmNoZWQgZm9yIHRva2VucyAqL1xuZnVuY3Rpb24gc2hvdWxkU2VhcmNoUGFyZW50KGZsYWdzLCBpc0ZpcnN0SG9zdFROb2RlKSB7XG4gICAgcmV0dXJuICEoZmxhZ3MgJiBJbmplY3RGbGFncy5TZWxmKSAmJiAhKGZsYWdzICYgSW5qZWN0RmxhZ3MuSG9zdCAmJiBpc0ZpcnN0SG9zdFROb2RlKTtcbn1cbmNsYXNzIE5vZGVJbmplY3RvciB7XG4gICAgY29uc3RydWN0b3IoX3ROb2RlLCBfbFZpZXcpIHtcbiAgICAgICAgdGhpcy5fdE5vZGUgPSBfdE5vZGU7XG4gICAgICAgIHRoaXMuX2xWaWV3ID0gX2xWaWV3O1xuICAgIH1cbiAgICBnZXQodG9rZW4sIG5vdEZvdW5kVmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHJldHVybiBnZXRPckNyZWF0ZUluamVjdGFibGUodGhpcy5fdE5vZGUsIHRoaXMuX2xWaWV3LCB0b2tlbiwgZmxhZ3MsIG5vdEZvdW5kVmFsdWUpO1xuICAgIH1cbn1cbi8qKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWdldEluaGVyaXRlZEZhY3RvcnkodHlwZSkge1xuICAgIHJldHVybiBub1NpZGVFZmZlY3RzKCgpID0+IHtcbiAgICAgICAgY29uc3Qgb3duQ29uc3RydWN0b3IgPSB0eXBlLnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcbiAgICAgICAgY29uc3Qgb3duRmFjdG9yeSA9IG93bkNvbnN0cnVjdG9yW05HX0ZBQ1RPUllfREVGXSB8fCBnZXRGYWN0b3J5T2Yob3duQ29uc3RydWN0b3IpO1xuICAgICAgICBjb25zdCBvYmplY3RQcm90b3R5cGUgPSBPYmplY3QucHJvdG90eXBlO1xuICAgICAgICBsZXQgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHR5cGUucHJvdG90eXBlKS5jb25zdHJ1Y3RvcjtcbiAgICAgICAgLy8gR28gdXAgdGhlIHByb3RvdHlwZSB1bnRpbCB3ZSBoaXQgYE9iamVjdGAuXG4gICAgICAgIHdoaWxlIChwYXJlbnQgJiYgcGFyZW50ICE9PSBvYmplY3RQcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSBwYXJlbnRbTkdfRkFDVE9SWV9ERUZdIHx8IGdldEZhY3RvcnlPZihwYXJlbnQpO1xuICAgICAgICAgICAgLy8gSWYgd2UgaGl0IHNvbWV0aGluZyB0aGF0IGhhcyBhIGZhY3RvcnkgYW5kIHRoZSBmYWN0b3J5IGlzbid0IHRoZSBzYW1lIGFzIHRoZSB0eXBlLFxuICAgICAgICAgICAgLy8gd2UndmUgZm91bmQgdGhlIGluaGVyaXRlZCBmYWN0b3J5LiBOb3RlIHRoZSBjaGVjayB0aGF0IHRoZSBmYWN0b3J5IGlzbid0IHRoZSB0eXBlJ3NcbiAgICAgICAgICAgIC8vIG93biBmYWN0b3J5IGlzIHJlZHVuZGFudCBpbiBtb3N0IGNhc2VzLCBidXQgaWYgdGhlIHVzZXIgaGFzIGN1c3RvbSBkZWNvcmF0b3JzIG9uIHRoZVxuICAgICAgICAgICAgLy8gY2xhc3MsIHRoaXMgbG9va3VwIHdpbGwgc3RhcnQgb25lIGxldmVsIGRvd24gaW4gdGhlIHByb3RvdHlwZSBjaGFpbiwgY2F1c2luZyB1cyB0b1xuICAgICAgICAgICAgLy8gZmluZCB0aGUgb3duIGZhY3RvcnkgZmlyc3QgYW5kIHBvdGVudGlhbGx5IHRyaWdnZXJpbmcgYW4gaW5maW5pdGUgbG9vcCBkb3duc3RyZWFtLlxuICAgICAgICAgICAgaWYgKGZhY3RvcnkgJiYgZmFjdG9yeSAhPT0gb3duRmFjdG9yeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWN0b3J5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlcmUgaXMgbm8gZmFjdG9yeSBkZWZpbmVkLiBFaXRoZXIgdGhpcyB3YXMgaW1wcm9wZXIgdXNhZ2Ugb2YgaW5oZXJpdGFuY2VcbiAgICAgICAgLy8gKG5vIEFuZ3VsYXIgZGVjb3JhdG9yIG9uIHRoZSBzdXBlcmNsYXNzKSBvciB0aGVyZSBpcyBubyBjb25zdHJ1Y3RvciBhdCBhbGxcbiAgICAgICAgLy8gaW4gdGhlIGluaGVyaXRhbmNlIGNoYWluLiBTaW5jZSB0aGUgdHdvIGNhc2VzIGNhbm5vdCBiZSBkaXN0aW5ndWlzaGVkLCB0aGVcbiAgICAgICAgLy8gbGF0dGVyIGhhcyB0byBiZSBhc3N1bWVkLlxuICAgICAgICByZXR1cm4gdCA9PiBuZXcgdCgpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZ2V0RmFjdG9yeU9mKHR5cGUpIHtcbiAgICBpZiAoaXNGb3J3YXJkUmVmKHR5cGUpKSB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmYWN0b3J5ID0gZ2V0RmFjdG9yeU9mKHJlc29sdmVGb3J3YXJkUmVmKHR5cGUpKTtcbiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5ICYmIGZhY3RvcnkoKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGdldEZhY3RvcnlEZWYodHlwZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBGYWNhZGUgZm9yIHRoZSBhdHRyaWJ1dGUgaW5qZWN0aW9uIGZyb20gREkuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWluamVjdEF0dHJpYnV0ZShhdHRyTmFtZVRvSW5qZWN0KSB7XG4gICAgcmV0dXJuIGluamVjdEF0dHJpYnV0ZUltcGwoZ2V0Q3VycmVudFROb2RlKCksIGF0dHJOYW1lVG9JbmplY3QpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IEFOTk9UQVRJT05TID0gJ19fYW5ub3RhdGlvbnNfXyc7XG5jb25zdCBQQVJBTUVURVJTID0gJ19fcGFyYW1ldGVyc19fJztcbmNvbnN0IFBST1BfTUVUQURBVEEgPSAnX19wcm9wX19tZXRhZGF0YV9fJztcbi8qKlxuICogQHN1cHByZXNzIHtnbG9iYWxUaGlzfVxuICovXG5mdW5jdGlvbiBtYWtlRGVjb3JhdG9yKG5hbWUsIHByb3BzLCBwYXJlbnRDbGFzcywgYWRkaXRpb25hbFByb2Nlc3NpbmcsIHR5cGVGbikge1xuICAgIHJldHVybiBub1NpZGVFZmZlY3RzKCgpID0+IHtcbiAgICAgICAgY29uc3QgbWV0YUN0b3IgPSBtYWtlTWV0YWRhdGFDdG9yKHByb3BzKTtcbiAgICAgICAgZnVuY3Rpb24gRGVjb3JhdG9yRmFjdG9yeSguLi5hcmdzKSB7XG4gICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIERlY29yYXRvckZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICBtZXRhQ3Rvci5jYWxsKHRoaXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvbkluc3RhbmNlID0gbmV3IERlY29yYXRvckZhY3RvcnkoLi4uYXJncyk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gVHlwZURlY29yYXRvcihjbHMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZUZuKVxuICAgICAgICAgICAgICAgICAgICB0eXBlRm4oY2xzLCAuLi5hcmdzKTtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugb2YgT2JqZWN0LmRlZmluZVByb3BlcnR5IGlzIGltcG9ydGFudCBzaW5jZSBpdCBjcmVhdGVzIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IHdoaWNoXG4gICAgICAgICAgICAgICAgLy8gcHJldmVudHMgdGhlIHByb3BlcnR5IGlzIGNvcGllZCBkdXJpbmcgc3ViY2xhc3NpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvbnMgPSBjbHMuaGFzT3duUHJvcGVydHkoQU5OT1RBVElPTlMpID9cbiAgICAgICAgICAgICAgICAgICAgY2xzW0FOTk9UQVRJT05TXSA6XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbHMsIEFOTk9UQVRJT05TLCB7IHZhbHVlOiBbXSB9KVtBTk5PVEFUSU9OU107XG4gICAgICAgICAgICAgICAgYW5ub3RhdGlvbnMucHVzaChhbm5vdGF0aW9uSW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbmFsUHJvY2Vzc2luZylcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFByb2Nlc3NpbmcoY2xzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xzO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50Q2xhc3MpIHtcbiAgICAgICAgICAgIERlY29yYXRvckZhY3RvcnkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIERlY29yYXRvckZhY3RvcnkucHJvdG90eXBlLm5nTWV0YWRhdGFOYW1lID0gbmFtZTtcbiAgICAgICAgRGVjb3JhdG9yRmFjdG9yeS5hbm5vdGF0aW9uQ2xzID0gRGVjb3JhdG9yRmFjdG9yeTtcbiAgICAgICAgcmV0dXJuIERlY29yYXRvckZhY3Rvcnk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBtYWtlTWV0YWRhdGFDdG9yKHByb3BzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGN0b3IoLi4uYXJncykge1xuICAgICAgICBpZiAocHJvcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHByb3BzKC4uLmFyZ3MpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IHZhbHVlc1twcm9wTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gbWFrZVBhcmFtRGVjb3JhdG9yKG5hbWUsIHByb3BzLCBwYXJlbnRDbGFzcykge1xuICAgIHJldHVybiBub1NpZGVFZmZlY3RzKCgpID0+IHtcbiAgICAgICAgY29uc3QgbWV0YUN0b3IgPSBtYWtlTWV0YWRhdGFDdG9yKHByb3BzKTtcbiAgICAgICAgZnVuY3Rpb24gUGFyYW1EZWNvcmF0b3JGYWN0b3J5KC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgUGFyYW1EZWNvcmF0b3JGYWN0b3J5KSB7XG4gICAgICAgICAgICAgICAgbWV0YUN0b3IuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uSW5zdGFuY2UgPSBuZXcgUGFyYW1EZWNvcmF0b3JGYWN0b3J5KC4uLmFyZ3MpO1xuICAgICAgICAgICAgUGFyYW1EZWNvcmF0b3IuYW5ub3RhdGlvbiA9IGFubm90YXRpb25JbnN0YW5jZTtcbiAgICAgICAgICAgIHJldHVybiBQYXJhbURlY29yYXRvcjtcbiAgICAgICAgICAgIGZ1bmN0aW9uIFBhcmFtRGVjb3JhdG9yKGNscywgdW51c2VkS2V5LCBpbmRleCkge1xuICAgICAgICAgICAgICAgIC8vIFVzZSBvZiBPYmplY3QuZGVmaW5lUHJvcGVydHkgaXMgaW1wb3J0YW50IHNpbmNlIGl0IGNyZWF0ZXMgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgd2hpY2hcbiAgICAgICAgICAgICAgICAvLyBwcmV2ZW50cyB0aGUgcHJvcGVydHkgaXMgY29waWVkIGR1cmluZyBzdWJjbGFzc2luZy5cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gY2xzLmhhc093blByb3BlcnR5KFBBUkFNRVRFUlMpID9cbiAgICAgICAgICAgICAgICAgICAgY2xzW1BBUkFNRVRFUlNdIDpcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNscywgUEFSQU1FVEVSUywgeyB2YWx1ZTogW10gfSlbUEFSQU1FVEVSU107XG4gICAgICAgICAgICAgICAgLy8gdGhlcmUgbWlnaHQgYmUgZ2FwcyBpZiBzb21lIGluIGJldHdlZW4gcGFyYW1ldGVycyBkbyBub3QgaGF2ZSBhbm5vdGF0aW9ucy5cbiAgICAgICAgICAgICAgICAvLyB3ZSBwYWQgd2l0aCBudWxscy5cbiAgICAgICAgICAgICAgICB3aGlsZSAocGFyYW1ldGVycy5sZW5ndGggPD0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5wdXNoKG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAocGFyYW1ldGVyc1tpbmRleF0gPSBwYXJhbWV0ZXJzW2luZGV4XSB8fCBbXSkucHVzaChhbm5vdGF0aW9uSW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjbHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmVudENsYXNzKSB7XG4gICAgICAgICAgICBQYXJhbURlY29yYXRvckZhY3RvcnkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIFBhcmFtRGVjb3JhdG9yRmFjdG9yeS5wcm90b3R5cGUubmdNZXRhZGF0YU5hbWUgPSBuYW1lO1xuICAgICAgICBQYXJhbURlY29yYXRvckZhY3RvcnkuYW5ub3RhdGlvbkNscyA9IFBhcmFtRGVjb3JhdG9yRmFjdG9yeTtcbiAgICAgICAgcmV0dXJuIFBhcmFtRGVjb3JhdG9yRmFjdG9yeTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIG1ha2VQcm9wRGVjb3JhdG9yKG5hbWUsIHByb3BzLCBwYXJlbnRDbGFzcywgYWRkaXRpb25hbFByb2Nlc3NpbmcpIHtcbiAgICByZXR1cm4gbm9TaWRlRWZmZWN0cygoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGFDdG9yID0gbWFrZU1ldGFkYXRhQ3Rvcihwcm9wcyk7XG4gICAgICAgIGZ1bmN0aW9uIFByb3BEZWNvcmF0b3JGYWN0b3J5KC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgUHJvcERlY29yYXRvckZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICBtZXRhQ3Rvci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRlY29yYXRvckluc3RhbmNlID0gbmV3IFByb3BEZWNvcmF0b3JGYWN0b3J5KC4uLmFyZ3MpO1xuICAgICAgICAgICAgZnVuY3Rpb24gUHJvcERlY29yYXRvcih0YXJnZXQsIG5hbWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25zdHJ1Y3RvciA9IHRhcmdldC5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugb2YgT2JqZWN0LmRlZmluZVByb3BlcnR5IGlzIGltcG9ydGFudCBiZWNhdXNlIGl0IGNyZWF0ZXMgYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIHByZXZlbnRzIHRoZSBwcm9wZXJ0eSBmcm9tIGJlaW5nIGNvcGllZCBkdXJpbmcgc3ViY2xhc3NpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YSA9IGNvbnN0cnVjdG9yLmhhc093blByb3BlcnR5KFBST1BfTUVUQURBVEEpID9cbiAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3JbUFJPUF9NRVRBREFUQV0gOlxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29uc3RydWN0b3IsIFBST1BfTUVUQURBVEEsIHsgdmFsdWU6IHt9IH0pW1BST1BfTUVUQURBVEFdO1xuICAgICAgICAgICAgICAgIG1ldGFbbmFtZV0gPSBtZXRhLmhhc093blByb3BlcnR5KG5hbWUpICYmIG1ldGFbbmFtZV0gfHwgW107XG4gICAgICAgICAgICAgICAgbWV0YVtuYW1lXS51bnNoaWZ0KGRlY29yYXRvckluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICBpZiAoYWRkaXRpb25hbFByb2Nlc3NpbmcpXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9jZXNzaW5nKHRhcmdldCwgbmFtZSwgLi4uYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gUHJvcERlY29yYXRvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyZW50Q2xhc3MpIHtcbiAgICAgICAgICAgIFByb3BEZWNvcmF0b3JGYWN0b3J5LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUocGFyZW50Q2xhc3MucHJvdG90eXBlKTtcbiAgICAgICAgfVxuICAgICAgICBQcm9wRGVjb3JhdG9yRmFjdG9yeS5wcm90b3R5cGUubmdNZXRhZGF0YU5hbWUgPSBuYW1lO1xuICAgICAgICBQcm9wRGVjb3JhdG9yRmFjdG9yeS5hbm5vdGF0aW9uQ2xzID0gUHJvcERlY29yYXRvckZhY3Rvcnk7XG4gICAgICAgIHJldHVybiBQcm9wRGVjb3JhdG9yRmFjdG9yeTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEF0dHJpYnV0ZSBkZWNvcmF0b3IgYW5kIG1ldGFkYXRhLlxuICpcbiAqIEBBbm5vdGF0aW9uXG4gKiBAcHVibGljQXBpXG4gKi9cbmNvbnN0IEF0dHJpYnV0ZSA9IG1ha2VQYXJhbURlY29yYXRvcignQXR0cmlidXRlJywgKGF0dHJpYnV0ZU5hbWUpID0+ICh7IGF0dHJpYnV0ZU5hbWUsIF9fTkdfRUxFTUVOVF9JRF9fOiAoKSA9PiDJtcm1aW5qZWN0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpIH0pKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIGluIGEgREkgUHJvdmlkZXIuXG4gKlxuICogVXNlIGFuIGBJbmplY3Rpb25Ub2tlbmAgd2hlbmV2ZXIgdGhlIHR5cGUgeW91IGFyZSBpbmplY3RpbmcgaXMgbm90IHJlaWZpZWQgKGRvZXMgbm90IGhhdmUgYVxuICogcnVudGltZSByZXByZXNlbnRhdGlvbikgc3VjaCBhcyB3aGVuIGluamVjdGluZyBhbiBpbnRlcmZhY2UsIGNhbGxhYmxlIHR5cGUsIGFycmF5IG9yXG4gKiBwYXJhbWV0ZXJpemVkIHR5cGUuXG4gKlxuICogYEluamVjdGlvblRva2VuYCBpcyBwYXJhbWV0ZXJpemVkIG9uIGBUYCB3aGljaCBpcyB0aGUgdHlwZSBvZiBvYmplY3Qgd2hpY2ggd2lsbCBiZSByZXR1cm5lZCBieVxuICogdGhlIGBJbmplY3RvcmAuIFRoaXMgcHJvdmlkZXMgYW4gYWRkaXRpb25hbCBsZXZlbCBvZiB0eXBlIHNhZmV0eS5cbiAqXG4gKiBgYGBcbiAqIGludGVyZmFjZSBNeUludGVyZmFjZSB7Li4ufVxuICogY29uc3QgbXlJbnRlcmZhY2UgPSBpbmplY3Rvci5nZXQobmV3IEluamVjdGlvblRva2VuPE15SW50ZXJmYWNlPignU29tZVRva2VuJykpO1xuICogLy8gbXlJbnRlcmZhY2UgaXMgaW5mZXJyZWQgdG8gYmUgTXlJbnRlcmZhY2UuXG4gKiBgYGBcbiAqXG4gKiBXaGVuIGNyZWF0aW5nIGFuIGBJbmplY3Rpb25Ub2tlbmAsIHlvdSBjYW4gb3B0aW9uYWxseSBzcGVjaWZ5IGEgZmFjdG9yeSBmdW5jdGlvbiB3aGljaCByZXR1cm5zXG4gKiAocG9zc2libHkgYnkgY3JlYXRpbmcpIGEgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgcGFyYW1ldGVyaXplZCB0eXBlIGBUYC4gVGhpcyBzZXRzIHVwIHRoZVxuICogYEluamVjdGlvblRva2VuYCB1c2luZyB0aGlzIGZhY3RvcnkgYXMgYSBwcm92aWRlciBhcyBpZiBpdCB3YXMgZGVmaW5lZCBleHBsaWNpdGx5IGluIHRoZVxuICogYXBwbGljYXRpb24ncyByb290IGluamVjdG9yLiBJZiB0aGUgZmFjdG9yeSBmdW5jdGlvbiwgd2hpY2ggdGFrZXMgemVybyBhcmd1bWVudHMsIG5lZWRzIHRvIGluamVjdFxuICogZGVwZW5kZW5jaWVzLCBpdCBjYW4gZG8gc28gdXNpbmcgdGhlIGBpbmplY3RgIGZ1bmN0aW9uLlxuICogQXMgeW91IGNhbiBzZWUgaW4gdGhlIFRyZWUtc2hha2FibGUgSW5qZWN0aW9uVG9rZW4gZXhhbXBsZSBiZWxvdy5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIGlmIGEgYGZhY3RvcnlgIGlzIHNwZWNpZmllZCB5b3UgY2FuIGFsc28gc3BlY2lmeSB0aGUgYHByb3ZpZGVkSW5gIG9wdGlvbiwgd2hpY2hcbiAqIG92ZXJyaWRlcyB0aGUgYWJvdmUgYmVoYXZpb3IgYW5kIG1hcmtzIHRoZSB0b2tlbiBhcyBiZWxvbmdpbmcgdG8gYSBwYXJ0aWN1bGFyIGBATmdNb2R1bGVgLiBBc1xuICogbWVudGlvbmVkIGFib3ZlLCBgJ3Jvb3QnYCBpcyB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgYHByb3ZpZGVkSW5gLlxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKiAjIyMgQmFzaWMgRXhhbXBsZXNcbiAqXG4gKiAjIyMgUGxhaW4gSW5qZWN0aW9uVG9rZW5cbiAqXG4gKiB7QGV4YW1wbGUgY29yZS9kaS90cy9pbmplY3Rvcl9zcGVjLnRzIHJlZ2lvbj0nSW5qZWN0aW9uVG9rZW4nfVxuICpcbiAqICMjIyBUcmVlLXNoYWthYmxlIEluamVjdGlvblRva2VuXG4gKlxuICoge0BleGFtcGxlIGNvcmUvZGkvdHMvaW5qZWN0b3Jfc3BlYy50cyByZWdpb249J1NoYWthYmxlSW5qZWN0aW9uVG9rZW4nfVxuICpcbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIEluamVjdGlvblRva2VuIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gX2Rlc2MgICBEZXNjcmlwdGlvbiBmb3IgdGhlIHRva2VuLFxuICAgICAqICAgICAgICAgICAgICAgIHVzZWQgb25seSBmb3IgZGVidWdnaW5nIHB1cnBvc2VzLFxuICAgICAqICAgICAgICAgICAgICAgIGl0IHNob3VsZCBidXQgZG9lcyBub3QgbmVlZCB0byBiZSB1bmlxdWVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgdG9rZW4ncyB1c2FnZSwgYXMgZGVzY3JpYmVkIGFib3ZlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoX2Rlc2MsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fZGVzYyA9IF9kZXNjO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubmdNZXRhZGF0YU5hbWUgPSAnSW5qZWN0aW9uVG9rZW4nO1xuICAgICAgICB0aGlzLsm1cHJvdiA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAodHlwZW9mIG5nRGV2TW9kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmdEZXZNb2RlKSAmJlxuICAgICAgICAgICAgICAgIGFzc2VydExlc3NUaGFuKG9wdGlvbnMsIDAsICdPbmx5IG5lZ2F0aXZlIG51bWJlcnMgYXJlIHN1cHBvcnRlZCBoZXJlJyk7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgc3BlY2lhbCBoYWNrIHRvIGFzc2lnbiBfX05HX0VMRU1FTlRfSURfXyB0byB0aGlzIGluc3RhbmNlLlxuICAgICAgICAgICAgLy8gU2VlIGBJbmplY3Rvck1hcmtlcnNgXG4gICAgICAgICAgICB0aGlzLl9fTkdfRUxFTUVOVF9JRF9fID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuybVwcm92ID0gybXJtWRlZmluZUluamVjdGFibGUoe1xuICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVkSW46IG9wdGlvbnMucHJvdmlkZWRJbiB8fCAncm9vdCcsXG4gICAgICAgICAgICAgICAgZmFjdG9yeTogb3B0aW9ucy5mYWN0b3J5LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgSW5qZWN0aW9uVG9rZW4gJHt0aGlzLl9kZXNjfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQSBESSB0b2tlbiB0aGF0IHlvdSBjYW4gdXNlIHRvIGNyZWF0ZSBhIHZpcnR1YWwgW3Byb3ZpZGVyXShndWlkZS9nbG9zc2FyeSNwcm92aWRlcilcbiAqIHRoYXQgd2lsbCBwb3B1bGF0ZSB0aGUgYGVudHJ5Q29tcG9uZW50c2AgZmllbGQgb2YgY29tcG9uZW50cyBhbmQgTmdNb2R1bGVzXG4gKiBiYXNlZCBvbiBpdHMgYHVzZVZhbHVlYCBwcm9wZXJ0eSB2YWx1ZS5cbiAqIEFsbCBjb21wb25lbnRzIHRoYXQgYXJlIHJlZmVyZW5jZWQgaW4gdGhlIGB1c2VWYWx1ZWAgdmFsdWUgKGVpdGhlciBkaXJlY3RseVxuICogb3IgaW4gYSBuZXN0ZWQgYXJyYXkgb3IgbWFwKSBhcmUgYWRkZWQgdG8gdGhlIGBlbnRyeUNvbXBvbmVudHNgIHByb3BlcnR5LlxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNob3dzIGhvdyB0aGUgcm91dGVyIGNhbiBwb3B1bGF0ZSB0aGUgYGVudHJ5Q29tcG9uZW50c2BcbiAqIGZpZWxkIG9mIGFuIE5nTW9kdWxlIGJhc2VkIG9uIGEgcm91dGVyIGNvbmZpZ3VyYXRpb24gdGhhdCByZWZlcnNcbiAqIHRvIGNvbXBvbmVudHMuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogLy8gaGVscGVyIGZ1bmN0aW9uIGluc2lkZSB0aGUgcm91dGVyXG4gKiBmdW5jdGlvbiBwcm92aWRlUm91dGVzKHJvdXRlcykge1xuICogICByZXR1cm4gW1xuICogICAgIHtwcm92aWRlOiBST1VURVMsIHVzZVZhbHVlOiByb3V0ZXN9LFxuICogICAgIHtwcm92aWRlOiBBTkFMWVpFX0ZPUl9FTlRSWV9DT01QT05FTlRTLCB1c2VWYWx1ZTogcm91dGVzLCBtdWx0aTogdHJ1ZX1cbiAqICAgXTtcbiAqIH1cbiAqXG4gKiAvLyB1c2VyIGNvZGVcbiAqIGxldCByb3V0ZXMgPSBbXG4gKiAgIHtwYXRoOiAnL3Jvb3QnLCBjb21wb25lbnQ6IFJvb3RDb21wfSxcbiAqICAge3BhdGg6ICcvdGVhbXMnLCBjb21wb25lbnQ6IFRlYW1zQ29tcH1cbiAqIF07XG4gKlxuICogQE5nTW9kdWxlKHtcbiAqICAgcHJvdmlkZXJzOiBbcHJvdmlkZVJvdXRlcyhyb3V0ZXMpXVxuICogfSlcbiAqIGNsYXNzIE1vZHVsZVdpdGhSb3V0ZXMge31cbiAqIGBgYFxuICpcbiAqIEBwdWJsaWNBcGlcbiAqIEBkZXByZWNhdGVkIFNpbmNlIDkuMC4wLiBXaXRoIEl2eSwgdGhpcyBwcm9wZXJ0eSBpcyBubyBsb25nZXIgbmVjZXNzYXJ5LlxuICovXG5jb25zdCBBTkFMWVpFX0ZPUl9FTlRSWV9DT01QT05FTlRTID0gbmV3IEluamVjdGlvblRva2VuKCdBbmFseXplRm9yRW50cnlDb21wb25lbnRzJyk7XG4vLyBTdG9yZXMgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYGVtaXREaXN0aW5jdENoYW5nZXNPbmx5YCB3aGVuIHRoZSBgZW1pdERpc3RpbmN0Q2hhbmdlc09ubHlgIGlzIG5vdFxuLy8gZXhwbGljaXRseSBzZXQuXG5jb25zdCBlbWl0RGlzdGluY3RDaGFuZ2VzT25seURlZmF1bHRWYWx1ZSA9IHRydWU7XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIHF1ZXJ5IG1ldGFkYXRhLlxuICpcbiAqIEBzZWUgYENvbnRlbnRDaGlsZHJlbmAuXG4gKiBAc2VlIGBDb250ZW50Q2hpbGRgLlxuICogQHNlZSBgVmlld0NoaWxkcmVuYC5cbiAqIEBzZWUgYFZpZXdDaGlsZGAuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBRdWVyeSB7XG59XG4vKipcbiAqIENvbnRlbnRDaGlsZHJlbiBkZWNvcmF0b3IgYW5kIG1ldGFkYXRhLlxuICpcbiAqXG4gKiBAQW5ub3RhdGlvblxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBDb250ZW50Q2hpbGRyZW4gPSBtYWtlUHJvcERlY29yYXRvcignQ29udGVudENoaWxkcmVuJywgKHNlbGVjdG9yLCBkYXRhID0ge30pID0+ICh7XG4gICAgc2VsZWN0b3IsXG4gICAgZmlyc3Q6IGZhbHNlLFxuICAgIGlzVmlld1F1ZXJ5OiBmYWxzZSxcbiAgICBkZXNjZW5kYW50czogZmFsc2UsXG4gICAgZW1pdERpc3RpbmN0Q2hhbmdlc09ubHk6IGVtaXREaXN0aW5jdENoYW5nZXNPbmx5RGVmYXVsdFZhbHVlLFxuICAgIC4uLmRhdGFcbn0pLCBRdWVyeSk7XG4vKipcbiAqIENvbnRlbnRDaGlsZCBkZWNvcmF0b3IgYW5kIG1ldGFkYXRhLlxuICpcbiAqXG4gKiBAQW5ub3RhdGlvblxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgQ29udGVudENoaWxkID0gbWFrZVByb3BEZWNvcmF0b3IoJ0NvbnRlbnRDaGlsZCcsIChzZWxlY3RvciwgZGF0YSA9IHt9KSA9PiAoeyBzZWxlY3RvciwgZmlyc3Q6IHRydWUsIGlzVmlld1F1ZXJ5OiBmYWxzZSwgZGVzY2VuZGFudHM6IHRydWUsIC4uLmRhdGEgfSksIFF1ZXJ5KTtcbi8qKlxuICogVmlld0NoaWxkcmVuIGRlY29yYXRvciBhbmQgbWV0YWRhdGEuXG4gKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgVmlld0NoaWxkcmVuID0gbWFrZVByb3BEZWNvcmF0b3IoJ1ZpZXdDaGlsZHJlbicsIChzZWxlY3RvciwgZGF0YSA9IHt9KSA9PiAoe1xuICAgIHNlbGVjdG9yLFxuICAgIGZpcnN0OiBmYWxzZSxcbiAgICBpc1ZpZXdRdWVyeTogdHJ1ZSxcbiAgICBkZXNjZW5kYW50czogdHJ1ZSxcbiAgICBlbWl0RGlzdGluY3RDaGFuZ2VzT25seTogZW1pdERpc3RpbmN0Q2hhbmdlc09ubHlEZWZhdWx0VmFsdWUsXG4gICAgLi4uZGF0YVxufSksIFF1ZXJ5KTtcbi8qKlxuICogVmlld0NoaWxkIGRlY29yYXRvciBhbmQgbWV0YWRhdGEuXG4gKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgVmlld0NoaWxkID0gbWFrZVByb3BEZWNvcmF0b3IoJ1ZpZXdDaGlsZCcsIChzZWxlY3RvciwgZGF0YSkgPT4gKHsgc2VsZWN0b3IsIGZpcnN0OiB0cnVlLCBpc1ZpZXdRdWVyeTogdHJ1ZSwgZGVzY2VuZGFudHM6IHRydWUsIC4uLmRhdGEgfSksIFF1ZXJ5KTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG52YXIgRmFjdG9yeVRhcmdldDtcbihmdW5jdGlvbiAoRmFjdG9yeVRhcmdldCkge1xuICAgIEZhY3RvcnlUYXJnZXRbRmFjdG9yeVRhcmdldFtcIkRpcmVjdGl2ZVwiXSA9IDBdID0gXCJEaXJlY3RpdmVcIjtcbiAgICBGYWN0b3J5VGFyZ2V0W0ZhY3RvcnlUYXJnZXRbXCJDb21wb25lbnRcIl0gPSAxXSA9IFwiQ29tcG9uZW50XCI7XG4gICAgRmFjdG9yeVRhcmdldFtGYWN0b3J5VGFyZ2V0W1wiSW5qZWN0YWJsZVwiXSA9IDJdID0gXCJJbmplY3RhYmxlXCI7XG4gICAgRmFjdG9yeVRhcmdldFtGYWN0b3J5VGFyZ2V0W1wiUGlwZVwiXSA9IDNdID0gXCJQaXBlXCI7XG4gICAgRmFjdG9yeVRhcmdldFtGYWN0b3J5VGFyZ2V0W1wiTmdNb2R1bGVcIl0gPSA0XSA9IFwiTmdNb2R1bGVcIjtcbn0pKEZhY3RvcnlUYXJnZXQgfHwgKEZhY3RvcnlUYXJnZXQgPSB7fSkpO1xudmFyIFZpZXdFbmNhcHN1bGF0aW9uO1xuKGZ1bmN0aW9uIChWaWV3RW5jYXBzdWxhdGlvbikge1xuICAgIFZpZXdFbmNhcHN1bGF0aW9uW1ZpZXdFbmNhcHN1bGF0aW9uW1wiRW11bGF0ZWRcIl0gPSAwXSA9IFwiRW11bGF0ZWRcIjtcbiAgICAvLyBIaXN0b3JpY2FsbHkgdGhlIDEgdmFsdWUgd2FzIGZvciBgTmF0aXZlYCBlbmNhcHN1bGF0aW9uIHdoaWNoIGhhcyBiZWVuIHJlbW92ZWQgYXMgb2YgdjExLlxuICAgIFZpZXdFbmNhcHN1bGF0aW9uW1ZpZXdFbmNhcHN1bGF0aW9uW1wiTm9uZVwiXSA9IDJdID0gXCJOb25lXCI7XG4gICAgVmlld0VuY2Fwc3VsYXRpb25bVmlld0VuY2Fwc3VsYXRpb25bXCJTaGFkb3dEb21cIl0gPSAzXSA9IFwiU2hhZG93RG9tXCI7XG59KShWaWV3RW5jYXBzdWxhdGlvbiB8fCAoVmlld0VuY2Fwc3VsYXRpb24gPSB7fSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmZ1bmN0aW9uIGdldENvbXBpbGVyRmFjYWRlKHJlcXVlc3QpIHtcbiAgICBjb25zdCBnbG9iYWxOZyA9IF9nbG9iYWxbJ25nJ107XG4gICAgaWYgKGdsb2JhbE5nICYmIGdsb2JhbE5nLsm1Y29tcGlsZXJGYWNhZGUpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbE5nLsm1Y29tcGlsZXJGYWNhZGU7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpIHtcbiAgICAgICAgLy8gTG9nIHRoZSB0eXBlIGFzIGFuIGVycm9yIHNvIHRoYXQgYSBkZXZlbG9wZXIgY2FuIGVhc2lseSBuYXZpZ2F0ZSB0byB0aGUgdHlwZSBmcm9tIHRoZVxuICAgICAgICAvLyBjb25zb2xlLlxuICAgICAgICBjb25zb2xlLmVycm9yKGBKSVQgY29tcGlsYXRpb24gZmFpbGVkIGZvciAke3JlcXVlc3Qua2luZH1gLCByZXF1ZXN0LnR5cGUpO1xuICAgICAgICBsZXQgbWVzc2FnZSA9IGBUaGUgJHtyZXF1ZXN0LmtpbmR9ICcke3JlcXVlc3RcbiAgICAgICAgICAgIC50eXBlLm5hbWV9JyBuZWVkcyB0byBiZSBjb21waWxlZCB1c2luZyB0aGUgSklUIGNvbXBpbGVyLCBidXQgJ0Bhbmd1bGFyL2NvbXBpbGVyJyBpcyBub3QgYXZhaWxhYmxlLlxcblxcbmA7XG4gICAgICAgIGlmIChyZXF1ZXN0LnVzYWdlID09PSAxIC8qIFBhcnRpYWxEZWNsYXJhdGlvbiAqLykge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgVGhlICR7cmVxdWVzdC5raW5kfSBpcyBwYXJ0IG9mIGEgbGlicmFyeSB0aGF0IGhhcyBiZWVuIHBhcnRpYWxseSBjb21waWxlZC5cXG5gO1xuICAgICAgICAgICAgbWVzc2FnZSArPVxuICAgICAgICAgICAgICAgIGBIb3dldmVyLCB0aGUgQW5ndWxhciBMaW5rZXIgaGFzIG5vdCBwcm9jZXNzZWQgdGhlIGxpYnJhcnkgc3VjaCB0aGF0IEpJVCBjb21waWxhdGlvbiBpcyB1c2VkIGFzIGZhbGxiYWNrLlxcbmA7XG4gICAgICAgICAgICBtZXNzYWdlICs9ICdcXG4nO1xuICAgICAgICAgICAgbWVzc2FnZSArPVxuICAgICAgICAgICAgICAgIGBJZGVhbGx5LCB0aGUgbGlicmFyeSBpcyBwcm9jZXNzZWQgdXNpbmcgdGhlIEFuZ3VsYXIgTGlua2VyIHRvIGJlY29tZSBmdWxseSBBT1QgY29tcGlsZWQuXFxuYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz1cbiAgICAgICAgICAgICAgICBgSklUIGNvbXBpbGF0aW9uIGlzIGRpc2NvdXJhZ2VkIGZvciBwcm9kdWN0aW9uIHVzZS1jYXNlcyEgQ29uc2lkZXIgdXNpbmcgQU9UIG1vZGUgaW5zdGVhZC5cXG5gO1xuICAgICAgICB9XG4gICAgICAgIG1lc3NhZ2UgKz1cbiAgICAgICAgICAgIGBBbHRlcm5hdGl2ZWx5LCB0aGUgSklUIGNvbXBpbGVyIHNob3VsZCBiZSBsb2FkZWQgYnkgYm9vdHN0cmFwcGluZyB1c2luZyAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJyBvciAnQGFuZ3VsYXIvcGxhdGZvcm0tc2VydmVyJyxcXG5gO1xuICAgICAgICBtZXNzYWdlICs9XG4gICAgICAgICAgICBgb3IgbWFudWFsbHkgcHJvdmlkZSB0aGUgY29tcGlsZXIgd2l0aCAnaW1wb3J0IFwiQGFuZ3VsYXIvY29tcGlsZXJcIjsnIGJlZm9yZSBib290c3RyYXBwaW5nLmA7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSklUIGNvbXBpbGVyIHVuYXZhaWxhYmxlJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogUmVwcmVzZW50cyBhIHR5cGUgdGhhdCBhIENvbXBvbmVudCBvciBvdGhlciBvYmplY3QgaXMgaW5zdGFuY2VzIG9mLlxuICpcbiAqIEFuIGV4YW1wbGUgb2YgYSBgVHlwZWAgaXMgYE15Q3VzdG9tQ29tcG9uZW50YCBjbGFzcywgd2hpY2ggaW4gSmF2YVNjcmlwdCBpcyByZXByZXNlbnRlZCBieVxuICogdGhlIGBNeUN1c3RvbUNvbXBvbmVudGAgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBUeXBlID0gRnVuY3Rpb247XG5mdW5jdGlvbiBpc1R5cGUodikge1xuICAgIHJldHVybiB0eXBlb2YgdiA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gRVM2IHNwcmVhZCwgYWRkIGVhY2ggaXRlbSB0byBhbiBhcnJheS5cbiAqXG4gKiBAcGFyYW0gaXRlbXMgVGhlIGl0ZW1zIHRvIGFkZFxuICogQHBhcmFtIGFyciBUaGUgYXJyYXkgdG8gd2hpY2ggeW91IHdhbnQgdG8gYWRkIHRoZSBpdGVtc1xuICovXG5mdW5jdGlvbiBhZGRBbGxUb0FycmF5KGl0ZW1zLCBhcnIpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyci5wdXNoKGl0ZW1zW2ldKTtcbiAgICB9XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGNvbnRlbnRzIG9mIHR3byBhcnJheXMgaXMgaWRlbnRpY2FsXG4gKlxuICogQHBhcmFtIGEgZmlyc3QgYXJyYXlcbiAqIEBwYXJhbSBiIHNlY29uZCBhcnJheVxuICogQHBhcmFtIGlkZW50aXR5QWNjZXNzb3IgT3B0aW9uYWwgZnVuY3Rpb24gZm9yIGV4dHJhY3Rpbmcgc3RhYmxlIG9iamVjdCBpZGVudGl0eSBmcm9tIGEgdmFsdWUgaW5cbiAqICAgICB0aGUgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGFycmF5RXF1YWxzKGEsIGIsIGlkZW50aXR5QWNjZXNzb3IpIHtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCB2YWx1ZUEgPSBhW2ldO1xuICAgICAgICBsZXQgdmFsdWVCID0gYltpXTtcbiAgICAgICAgaWYgKGlkZW50aXR5QWNjZXNzb3IpIHtcbiAgICAgICAgICAgIHZhbHVlQSA9IGlkZW50aXR5QWNjZXNzb3IodmFsdWVBKTtcbiAgICAgICAgICAgIHZhbHVlQiA9IGlkZW50aXR5QWNjZXNzb3IodmFsdWVCKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWVCICE9PSB2YWx1ZUEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogRmxhdHRlbnMgYW4gYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGZsYXR0ZW4obGlzdCwgZHN0KSB7XG4gICAgaWYgKGRzdCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICBkc3QgPSBsaXN0O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgaXRlbSA9IGxpc3RbaV07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pKSB7XG4gICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGlubGluZSBpdC5cbiAgICAgICAgICAgIGlmIChkc3QgPT09IGxpc3QpIHtcbiAgICAgICAgICAgICAgICAvLyBPdXIgYXNzdW1wdGlvbiB0aGF0IHRoZSBsaXN0IHdhcyBhbHJlYWR5IGZsYXQgd2FzIHdyb25nIGFuZFxuICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gY2xvbmUgZmxhdCBzaW5jZSB3ZSBuZWVkIHRvIHdyaXRlIHRvIGl0LlxuICAgICAgICAgICAgICAgIGRzdCA9IGxpc3Quc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmbGF0dGVuKGl0ZW0sIGRzdCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZHN0ICE9PSBsaXN0KSB7XG4gICAgICAgICAgICBkc3QucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZHN0O1xufVxuZnVuY3Rpb24gZGVlcEZvckVhY2goaW5wdXQsIGZuKSB7XG4gICAgaW5wdXQuZm9yRWFjaCh2YWx1ZSA9PiBBcnJheS5pc0FycmF5KHZhbHVlKSA/IGRlZXBGb3JFYWNoKHZhbHVlLCBmbikgOiBmbih2YWx1ZSkpO1xufVxuZnVuY3Rpb24gYWRkVG9BcnJheShhcnIsIGluZGV4LCB2YWx1ZSkge1xuICAgIC8vIHBlcmY6IGFycmF5LnB1c2ggaXMgZmFzdGVyIHRoYW4gYXJyYXkuc3BsaWNlIVxuICAgIGlmIChpbmRleCA+PSBhcnIubGVuZ3RoKSB7XG4gICAgICAgIGFyci5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFyci5zcGxpY2UoaW5kZXgsIDAsIHZhbHVlKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZW1vdmVGcm9tQXJyYXkoYXJyLCBpbmRleCkge1xuICAgIC8vIHBlcmY6IGFycmF5LnBvcCBpcyBmYXN0ZXIgdGhhbiBhcnJheS5zcGxpY2UhXG4gICAgaWYgKGluZGV4ID49IGFyci5sZW5ndGggLSAxKSB7XG4gICAgICAgIHJldHVybiBhcnIucG9wKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJyLnNwbGljZShpbmRleCwgMSlbMF07XG4gICAgfVxufVxuZnVuY3Rpb24gbmV3QXJyYXkoc2l6ZSwgdmFsdWUpIHtcbiAgICBjb25zdCBsaXN0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgbGlzdC5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpc3Q7XG59XG4vKipcbiAqIFJlbW92ZSBpdGVtIGZyb20gYXJyYXkgKFNhbWUgYXMgYEFycmF5LnNwbGljZSgpYCBidXQgZmFzdGVyLilcbiAqXG4gKiBgQXJyYXkuc3BsaWNlKClgIGlzIG5vdCBhcyBmYXN0IGJlY2F1c2UgaXQgaGFzIHRvIGFsbG9jYXRlIGFuIGFycmF5IGZvciB0aGUgZWxlbWVudHMgd2hpY2ggd2VyZVxuICogcmVtb3ZlZC4gVGhpcyBjYXVzZXMgbWVtb3J5IHByZXNzdXJlIGFuZCBzbG93cyBkb3duIGNvZGUgd2hlbiBtb3N0IG9mIHRoZSB0aW1lIHdlIGRvbid0XG4gKiBjYXJlIGFib3V0IHRoZSBkZWxldGVkIGl0ZW1zIGFycmF5LlxuICpcbiAqIGh0dHBzOi8vanNwZXJmLmNvbS9mYXN0LWFycmF5LXNwbGljZSAoQWJvdXQgMjB4IGZhc3RlcilcbiAqXG4gKiBAcGFyYW0gYXJyYXkgQXJyYXkgdG8gc3BsaWNlXG4gKiBAcGFyYW0gaW5kZXggSW5kZXggb2YgZWxlbWVudCBpbiBhcnJheSB0byByZW1vdmUuXG4gKiBAcGFyYW0gY291bnQgTnVtYmVyIG9mIGl0ZW1zIHRvIHJlbW92ZS5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTcGxpY2UoYXJyYXksIGluZGV4LCBjb3VudCkge1xuICAgIGNvbnN0IGxlbmd0aCA9IGFycmF5Lmxlbmd0aCAtIGNvdW50O1xuICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBhcnJheVtpbmRleF0gPSBhcnJheVtpbmRleCArIGNvdW50XTtcbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG4gICAgd2hpbGUgKGNvdW50LS0pIHtcbiAgICAgICAgYXJyYXkucG9wKCk7IC8vIHNocmluayB0aGUgYXJyYXlcbiAgICB9XG59XG4vKipcbiAqIFNhbWUgYXMgYEFycmF5LnNwbGljZShpbmRleCwgMCwgdmFsdWUpYCBidXQgZmFzdGVyLlxuICpcbiAqIGBBcnJheS5zcGxpY2UoKWAgaXMgbm90IGZhc3QgYmVjYXVzZSBpdCBoYXMgdG8gYWxsb2NhdGUgYW4gYXJyYXkgZm9yIHRoZSBlbGVtZW50cyB3aGljaCB3ZXJlXG4gKiByZW1vdmVkLiBUaGlzIGNhdXNlcyBtZW1vcnkgcHJlc3N1cmUgYW5kIHNsb3dzIGRvd24gY29kZSB3aGVuIG1vc3Qgb2YgdGhlIHRpbWUgd2UgZG9uJ3RcbiAqIGNhcmUgYWJvdXQgdGhlIGRlbGV0ZWQgaXRlbXMgYXJyYXkuXG4gKlxuICogQHBhcmFtIGFycmF5IEFycmF5IHRvIHNwbGljZS5cbiAqIEBwYXJhbSBpbmRleCBJbmRleCBpbiBhcnJheSB3aGVyZSB0aGUgYHZhbHVlYCBzaG91bGQgYmUgYWRkZWQuXG4gKiBAcGFyYW0gdmFsdWUgVmFsdWUgdG8gYWRkIHRvIGFycmF5LlxuICovXG5mdW5jdGlvbiBhcnJheUluc2VydChhcnJheSwgaW5kZXgsIHZhbHVlKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExlc3NUaGFuT3JFcXVhbChpbmRleCwgYXJyYXkubGVuZ3RoLCAnQ2FuXFwndCBpbnNlcnQgcGFzdCBhcnJheSBlbmQuJyk7XG4gICAgbGV0IGVuZCA9IGFycmF5Lmxlbmd0aDtcbiAgICB3aGlsZSAoZW5kID4gaW5kZXgpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNFbmQgPSBlbmQgLSAxO1xuICAgICAgICBhcnJheVtlbmRdID0gYXJyYXlbcHJldmlvdXNFbmRdO1xuICAgICAgICBlbmQgPSBwcmV2aW91c0VuZDtcbiAgICB9XG4gICAgYXJyYXlbaW5kZXhdID0gdmFsdWU7XG59XG4vKipcbiAqIFNhbWUgYXMgYEFycmF5LnNwbGljZTIoaW5kZXgsIDAsIHZhbHVlMSwgdmFsdWUyKWAgYnV0IGZhc3Rlci5cbiAqXG4gKiBgQXJyYXkuc3BsaWNlKClgIGlzIG5vdCBmYXN0IGJlY2F1c2UgaXQgaGFzIHRvIGFsbG9jYXRlIGFuIGFycmF5IGZvciB0aGUgZWxlbWVudHMgd2hpY2ggd2VyZVxuICogcmVtb3ZlZC4gVGhpcyBjYXVzZXMgbWVtb3J5IHByZXNzdXJlIGFuZCBzbG93cyBkb3duIGNvZGUgd2hlbiBtb3N0IG9mIHRoZSB0aW1lIHdlIGRvbid0XG4gKiBjYXJlIGFib3V0IHRoZSBkZWxldGVkIGl0ZW1zIGFycmF5LlxuICpcbiAqIEBwYXJhbSBhcnJheSBBcnJheSB0byBzcGxpY2UuXG4gKiBAcGFyYW0gaW5kZXggSW5kZXggaW4gYXJyYXkgd2hlcmUgdGhlIGB2YWx1ZWAgc2hvdWxkIGJlIGFkZGVkLlxuICogQHBhcmFtIHZhbHVlMSBWYWx1ZSB0byBhZGQgdG8gYXJyYXkuXG4gKiBAcGFyYW0gdmFsdWUyIFZhbHVlIHRvIGFkZCB0byBhcnJheS5cbiAqL1xuZnVuY3Rpb24gYXJyYXlJbnNlcnQyKGFycmF5LCBpbmRleCwgdmFsdWUxLCB2YWx1ZTIpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TGVzc1RoYW5PckVxdWFsKGluZGV4LCBhcnJheS5sZW5ndGgsICdDYW5cXCd0IGluc2VydCBwYXN0IGFycmF5IGVuZC4nKTtcbiAgICBsZXQgZW5kID0gYXJyYXkubGVuZ3RoO1xuICAgIGlmIChlbmQgPT0gaW5kZXgpIHtcbiAgICAgICAgLy8gaW5zZXJ0aW5nIGF0IHRoZSBlbmQuXG4gICAgICAgIGFycmF5LnB1c2godmFsdWUxLCB2YWx1ZTIpO1xuICAgIH1cbiAgICBlbHNlIGlmIChlbmQgPT09IDEpIHtcbiAgICAgICAgLy8gY29ybmVyIGNhc2Ugd2hlbiB3ZSBoYXZlIGxlc3MgaXRlbXMgaW4gYXJyYXkgdGhhbiB3ZSBoYXZlIGl0ZW1zIHRvIGluc2VydC5cbiAgICAgICAgYXJyYXkucHVzaCh2YWx1ZTIsIGFycmF5WzBdKTtcbiAgICAgICAgYXJyYXlbMF0gPSB2YWx1ZTE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBlbmQtLTtcbiAgICAgICAgYXJyYXkucHVzaChhcnJheVtlbmQgLSAxXSwgYXJyYXlbZW5kXSk7XG4gICAgICAgIHdoaWxlIChlbmQgPiBpbmRleCkge1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNFbmQgPSBlbmQgLSAyO1xuICAgICAgICAgICAgYXJyYXlbZW5kXSA9IGFycmF5W3ByZXZpb3VzRW5kXTtcbiAgICAgICAgICAgIGVuZC0tO1xuICAgICAgICB9XG4gICAgICAgIGFycmF5W2luZGV4XSA9IHZhbHVlMTtcbiAgICAgICAgYXJyYXlbaW5kZXggKyAxXSA9IHZhbHVlMjtcbiAgICB9XG59XG4vKipcbiAqIEluc2VydCBhIGB2YWx1ZWAgaW50byBhbiBgYXJyYXlgIHNvIHRoYXQgdGhlIGFycmF5IHJlbWFpbnMgc29ydGVkLlxuICpcbiAqIE5PVEU6XG4gKiAtIER1cGxpY2F0ZXMgYXJlIG5vdCBhbGxvd2VkLCBhbmQgYXJlIGlnbm9yZWQuXG4gKiAtIFRoaXMgdXNlcyBiaW5hcnkgc2VhcmNoIGFsZ29yaXRobSBmb3IgZmFzdCBpbnNlcnRzLlxuICpcbiAqIEBwYXJhbSBhcnJheSBBIHNvcnRlZCBhcnJheSB0byBpbnNlcnQgaW50by5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zZXJ0LlxuICogQHJldHVybnMgaW5kZXggb2YgdGhlIGluc2VydGVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBhcnJheUluc2VydFNvcnRlZChhcnJheSwgdmFsdWUpIHtcbiAgICBsZXQgaW5kZXggPSBhcnJheUluZGV4T2ZTb3J0ZWQoYXJyYXksIHZhbHVlKTtcbiAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIC8vIGlmIHdlIGRpZCBub3QgZmluZCBpdCBpbnNlcnQgaXQuXG4gICAgICAgIGluZGV4ID0gfmluZGV4O1xuICAgICAgICBhcnJheUluc2VydChhcnJheSwgaW5kZXgsIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xufVxuLyoqXG4gKiBSZW1vdmUgYHZhbHVlYCBmcm9tIGEgc29ydGVkIGBhcnJheWAuXG4gKlxuICogTk9URTpcbiAqIC0gVGhpcyB1c2VzIGJpbmFyeSBzZWFyY2ggYWxnb3JpdGhtIGZvciBmYXN0IHJlbW92YWxzLlxuICpcbiAqIEBwYXJhbSBhcnJheSBBIHNvcnRlZCBhcnJheSB0byByZW1vdmUgZnJvbS5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMgaW5kZXggb2YgdGhlIHJlbW92ZWQgdmFsdWUuXG4gKiAgIC0gcG9zaXRpdmUgaW5kZXggaWYgdmFsdWUgZm91bmQgYW5kIHJlbW92ZWQuXG4gKiAgIC0gbmVnYXRpdmUgaW5kZXggaWYgdmFsdWUgbm90IGZvdW5kLiAoYH5pbmRleGAgdG8gZ2V0IHRoZSB2YWx1ZSB3aGVyZSBpdCBzaG91bGQgaGF2ZSBiZWVuXG4gKiAgICAgaW5zZXJ0ZWQpXG4gKi9cbmZ1bmN0aW9uIGFycmF5UmVtb3ZlU29ydGVkKGFycmF5LCB2YWx1ZSkge1xuICAgIGNvbnN0IGluZGV4ID0gYXJyYXlJbmRleE9mU29ydGVkKGFycmF5LCB2YWx1ZSk7XG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgYXJyYXlTcGxpY2UoYXJyYXksIGluZGV4LCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xufVxuLyoqXG4gKiBHZXQgYW4gaW5kZXggb2YgYW4gYHZhbHVlYCBpbiBhIHNvcnRlZCBgYXJyYXlgLlxuICpcbiAqIE5PVEU6XG4gKiAtIFRoaXMgdXNlcyBiaW5hcnkgc2VhcmNoIGFsZ29yaXRobSBmb3IgZmFzdCByZW1vdmFscy5cbiAqXG4gKiBAcGFyYW0gYXJyYXkgQSBzb3J0ZWQgYXJyYXkgdG8gYmluYXJ5IHNlYXJjaC5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gbG9vayBmb3IuXG4gKiBAcmV0dXJucyBpbmRleCBvZiB0aGUgdmFsdWUuXG4gKiAgIC0gcG9zaXRpdmUgaW5kZXggaWYgdmFsdWUgZm91bmQuXG4gKiAgIC0gbmVnYXRpdmUgaW5kZXggaWYgdmFsdWUgbm90IGZvdW5kLiAoYH5pbmRleGAgdG8gZ2V0IHRoZSB2YWx1ZSB3aGVyZSBpdCBzaG91bGQgaGF2ZSBiZWVuXG4gKiAgICAgbG9jYXRlZClcbiAqL1xuZnVuY3Rpb24gYXJyYXlJbmRleE9mU29ydGVkKGFycmF5LCB2YWx1ZSkge1xuICAgIHJldHVybiBfYXJyYXlJbmRleE9mU29ydGVkKGFycmF5LCB2YWx1ZSwgMCk7XG59XG4vKipcbiAqIFNldCBhIGB2YWx1ZWAgZm9yIGEgYGtleWAuXG4gKlxuICogQHBhcmFtIGtleVZhbHVlQXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIGtleSBUaGUga2V5IHRvIGxvY2F0ZSBvciBjcmVhdGUuXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldCBmb3IgYSBga2V5YC5cbiAqIEByZXR1cm5zIGluZGV4IChhbHdheXMgZXZlbikgb2Ygd2hlcmUgdGhlIHZhbHVlIHZhcyBzZXQuXG4gKi9cbmZ1bmN0aW9uIGtleVZhbHVlQXJyYXlTZXQoa2V5VmFsdWVBcnJheSwga2V5LCB2YWx1ZSkge1xuICAgIGxldCBpbmRleCA9IGtleVZhbHVlQXJyYXlJbmRleE9mKGtleVZhbHVlQXJyYXksIGtleSk7XG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgLy8gaWYgd2UgZm91bmQgaXQgc2V0IGl0LlxuICAgICAgICBrZXlWYWx1ZUFycmF5W2luZGV4IHwgMV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGluZGV4ID0gfmluZGV4O1xuICAgICAgICBhcnJheUluc2VydDIoa2V5VmFsdWVBcnJheSwgaW5kZXgsIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gaW5kZXg7XG59XG4vKipcbiAqIFJldHJpZXZlIGEgYHZhbHVlYCBmb3IgYSBga2V5YCAob24gYHVuZGVmaW5lZGAgaWYgbm90IGZvdW5kLilcbiAqXG4gKiBAcGFyYW0ga2V5VmFsdWVBcnJheSB0byBzZWFyY2guXG4gKiBAcGFyYW0ga2V5IFRoZSBrZXkgdG8gbG9jYXRlLlxuICogQHJldHVybiBUaGUgYHZhbHVlYCBzdG9yZWQgYXQgdGhlIGBrZXlgIGxvY2F0aW9uIG9yIGB1bmRlZmluZWQgaWYgbm90IGZvdW5kLlxuICovXG5mdW5jdGlvbiBrZXlWYWx1ZUFycmF5R2V0KGtleVZhbHVlQXJyYXksIGtleSkge1xuICAgIGNvbnN0IGluZGV4ID0ga2V5VmFsdWVBcnJheUluZGV4T2Yoa2V5VmFsdWVBcnJheSwga2V5KTtcbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAvLyBpZiB3ZSBmb3VuZCBpdCByZXRyaWV2ZSBpdC5cbiAgICAgICAgcmV0dXJuIGtleVZhbHVlQXJyYXlbaW5kZXggfCAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogUmV0cmlldmUgYSBga2V5YCBpbmRleCB2YWx1ZSBpbiB0aGUgYXJyYXkgb3IgYC0xYCBpZiBub3QgZm91bmQuXG4gKlxuICogQHBhcmFtIGtleVZhbHVlQXJyYXkgdG8gc2VhcmNoLlxuICogQHBhcmFtIGtleSBUaGUga2V5IHRvIGxvY2F0ZS5cbiAqIEByZXR1cm5zIGluZGV4IG9mIHdoZXJlIHRoZSBrZXkgaXMgKG9yIHNob3VsZCBoYXZlIGJlZW4uKVxuICogICAtIHBvc2l0aXZlIChldmVuKSBpbmRleCBpZiBrZXkgZm91bmQuXG4gKiAgIC0gbmVnYXRpdmUgaW5kZXggaWYga2V5IG5vdCBmb3VuZC4gKGB+aW5kZXhgIChldmVuKSB0byBnZXQgdGhlIGluZGV4IHdoZXJlIGl0IHNob3VsZCBoYXZlXG4gKiAgICAgYmVlbiBpbnNlcnRlZC4pXG4gKi9cbmZ1bmN0aW9uIGtleVZhbHVlQXJyYXlJbmRleE9mKGtleVZhbHVlQXJyYXksIGtleSkge1xuICAgIHJldHVybiBfYXJyYXlJbmRleE9mU29ydGVkKGtleVZhbHVlQXJyYXksIGtleSwgMSk7XG59XG4vKipcbiAqIERlbGV0ZSBhIGBrZXlgIChhbmQgYHZhbHVlYCkgZnJvbSB0aGUgYEtleVZhbHVlQXJyYXlgLlxuICpcbiAqIEBwYXJhbSBrZXlWYWx1ZUFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSBrZXkgVGhlIGtleSB0byBsb2NhdGUgb3IgZGVsZXRlIChpZiBleGlzdCkuXG4gKiBAcmV0dXJucyBpbmRleCBvZiB3aGVyZSB0aGUga2V5IHdhcyAob3Igc2hvdWxkIGhhdmUgYmVlbi4pXG4gKiAgIC0gcG9zaXRpdmUgKGV2ZW4pIGluZGV4IGlmIGtleSBmb3VuZCBhbmQgZGVsZXRlZC5cbiAqICAgLSBuZWdhdGl2ZSBpbmRleCBpZiBrZXkgbm90IGZvdW5kLiAoYH5pbmRleGAgKGV2ZW4pIHRvIGdldCB0aGUgaW5kZXggd2hlcmUgaXQgc2hvdWxkIGhhdmVcbiAqICAgICBiZWVuLilcbiAqL1xuZnVuY3Rpb24ga2V5VmFsdWVBcnJheURlbGV0ZShrZXlWYWx1ZUFycmF5LCBrZXkpIHtcbiAgICBjb25zdCBpbmRleCA9IGtleVZhbHVlQXJyYXlJbmRleE9mKGtleVZhbHVlQXJyYXksIGtleSk7XG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgLy8gaWYgd2UgZm91bmQgaXQgcmVtb3ZlIGl0LlxuICAgICAgICBhcnJheVNwbGljZShrZXlWYWx1ZUFycmF5LCBpbmRleCwgMik7XG4gICAgfVxuICAgIHJldHVybiBpbmRleDtcbn1cbi8qKlxuICogSU5URVJOQUw6IEdldCBhbiBpbmRleCBvZiBhbiBgdmFsdWVgIGluIGEgc29ydGVkIGBhcnJheWAgYnkgZ3JvdXBpbmcgc2VhcmNoIGJ5IGBzaGlmdGAuXG4gKlxuICogTk9URTpcbiAqIC0gVGhpcyB1c2VzIGJpbmFyeSBzZWFyY2ggYWxnb3JpdGhtIGZvciBmYXN0IHJlbW92YWxzLlxuICpcbiAqIEBwYXJhbSBhcnJheSBBIHNvcnRlZCBhcnJheSB0byBiaW5hcnkgc2VhcmNoLlxuICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBsb29rIGZvci5cbiAqIEBwYXJhbSBzaGlmdCBncm91cGluZyBzaGlmdC5cbiAqICAgLSBgMGAgbWVhbnMgbG9vayBhdCBldmVyeSBsb2NhdGlvblxuICogICAtIGAxYCBtZWFucyBvbmx5IGxvb2sgYXQgZXZlcnkgb3RoZXIgKGV2ZW4pIGxvY2F0aW9uICh0aGUgb2RkIGxvY2F0aW9ucyBhcmUgdG8gYmUgaWdub3JlZCBhc1xuICogICAgICAgICB0aGV5IGFyZSB2YWx1ZXMuKVxuICogQHJldHVybnMgaW5kZXggb2YgdGhlIHZhbHVlLlxuICogICAtIHBvc2l0aXZlIGluZGV4IGlmIHZhbHVlIGZvdW5kLlxuICogICAtIG5lZ2F0aXZlIGluZGV4IGlmIHZhbHVlIG5vdCBmb3VuZC4gKGB+aW5kZXhgIHRvIGdldCB0aGUgdmFsdWUgd2hlcmUgaXQgc2hvdWxkIGhhdmUgYmVlblxuICogaW5zZXJ0ZWQpXG4gKi9cbmZ1bmN0aW9uIF9hcnJheUluZGV4T2ZTb3J0ZWQoYXJyYXksIHZhbHVlLCBzaGlmdCkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRFcXVhbChBcnJheS5pc0FycmF5KGFycmF5KSwgdHJ1ZSwgJ0V4cGVjdGluZyBhbiBhcnJheScpO1xuICAgIGxldCBzdGFydCA9IDA7XG4gICAgbGV0IGVuZCA9IGFycmF5Lmxlbmd0aCA+PiBzaGlmdDtcbiAgICB3aGlsZSAoZW5kICE9PSBzdGFydCkge1xuICAgICAgICBjb25zdCBtaWRkbGUgPSBzdGFydCArICgoZW5kIC0gc3RhcnQpID4+IDEpOyAvLyBmaW5kIHRoZSBtaWRkbGUuXG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBhcnJheVttaWRkbGUgPDwgc2hpZnRdO1xuICAgICAgICBpZiAodmFsdWUgPT09IGN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAobWlkZGxlIDw8IHNoaWZ0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXJyZW50ID4gdmFsdWUpIHtcbiAgICAgICAgICAgIGVuZCA9IG1pZGRsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gbWlkZGxlICsgMTsgLy8gV2UgYWxyZWFkeSBzZWFyY2hlZCBtaWRkbGUgc28gbWFrZSBpdCBub24taW5jbHVzaXZlIGJ5IGFkZGluZyAxXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIH4oZW5kIDw8IHNoaWZ0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKlxuICogIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xuICogQXR0ZW50aW9uOiBUaGVzZSBSZWd1bGFyIGV4cHJlc3Npb25zIGhhdmUgdG8gaG9sZCBldmVuIGlmIHRoZSBjb2RlIGlzIG1pbmlmaWVkIVxuICogIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcbiAqL1xuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBkZXRlY3RzIHBhc3MtdGhyb3VnaCBjb25zdHJ1Y3RvcnMgZm9yIEVTNSBvdXRwdXQuIFRoaXMgUmVnZXhcbiAqIGludGVuZHMgdG8gY2FwdHVyZSB0aGUgY29tbW9uIGRlbGVnYXRpb24gcGF0dGVybiBlbWl0dGVkIGJ5IFR5cGVTY3JpcHQgYW5kIEJhYmVsLiBBbHNvXG4gKiBpdCBpbnRlbmRzIHRvIGNhcHR1cmUgdGhlIHBhdHRlcm4gd2hlcmUgZXhpc3RpbmcgY29uc3RydWN0b3JzIGhhdmUgYmVlbiBkb3dubGV2ZWxlZCBmcm9tXG4gKiBFUzIwMTUgdG8gRVM1IHVzaW5nIFR5cGVTY3JpcHQgdy8gZG93bmxldmVsIGl0ZXJhdGlvbi4gZS5nLlxuICpcbiAqIGBgYFxuICogICBmdW5jdGlvbiBNeUNsYXNzKCkge1xuICogICAgIHZhciBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gKiBgYGBcbiAqXG4gKiBkb3dubGV2ZWxlZCB0byBFUzUgd2l0aCBgZG93bmxldmVsSXRlcmF0aW9uYCBmb3IgVHlwZVNjcmlwdCA8IDQuMjpcbiAqIGBgYFxuICogICBmdW5jdGlvbiBNeUNsYXNzKCkge1xuICogICAgIHZhciBfdGhpcyA9IF9zdXBlci5hcHBseSh0aGlzLCBfX3NwcmVhZChhcmd1bWVudHMpKSB8fCB0aGlzO1xuICogYGBgXG4gKlxuICogb3IgZG93bmxldmVsZWQgdG8gRVM1IHdpdGggYGRvd25sZXZlbEl0ZXJhdGlvbmAgZm9yIFR5cGVTY3JpcHQgPj0gNC4yOlxuICogYGBgXG4gKiAgIGZ1bmN0aW9uIE15Q2xhc3MoKSB7XG4gKiAgICAgdmFyIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChhcmd1bWVudHMpLCBmYWxzZSkpIHx8IHRoaXM7XG4gKiBgYGBcbiAqXG4gKiBNb3JlIGRldGFpbHMgY2FuIGJlIGZvdW5kIGluOiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyL2lzc3Vlcy8zODQ1My5cbiAqL1xuY29uc3QgRVM1X0RFTEVHQVRFX0NUT1IgPSAvXmZ1bmN0aW9uXFxzK1xcUytcXChcXClcXHMqe1tcXHNcXFNdK1xcLmFwcGx5XFwodGhpcyxcXHMqKGFyZ3VtZW50c3woPzpbXigpXStcXChcXFtcXF0sKT9bXigpXStcXChhcmd1bWVudHNcXCkuKilcXCkvO1xuLyoqIFJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGRldGVjdHMgRVMyMDE1IGNsYXNzZXMgd2hpY2ggZXh0ZW5kIGZyb20gb3RoZXIgY2xhc3Nlcy4gKi9cbmNvbnN0IEVTMjAxNV9JTkhFUklURURfQ0xBU1MgPSAvXmNsYXNzXFxzK1tBLVphLXpcXGQkX10qXFxzKmV4dGVuZHNcXHMrW157XSt7Lztcbi8qKlxuICogUmVndWxhciBleHByZXNzaW9uIHRoYXQgZGV0ZWN0cyBFUzIwMTUgY2xhc3NlcyB3aGljaCBleHRlbmQgZnJvbSBvdGhlciBjbGFzc2VzIGFuZFxuICogaGF2ZSBhbiBleHBsaWNpdCBjb25zdHJ1Y3RvciBkZWZpbmVkLlxuICovXG5jb25zdCBFUzIwMTVfSU5IRVJJVEVEX0NMQVNTX1dJVEhfQ1RPUiA9IC9eY2xhc3NcXHMrW0EtWmEtelxcZCRfXSpcXHMqZXh0ZW5kc1xccytbXntdK3tbXFxzXFxTXSpjb25zdHJ1Y3RvclxccypcXCgvO1xuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBkZXRlY3RzIEVTMjAxNSBjbGFzc2VzIHdoaWNoIGV4dGVuZCBmcm9tIG90aGVyIGNsYXNzZXNcbiAqIGFuZCBpbmhlcml0IGEgY29uc3RydWN0b3IuXG4gKi9cbmNvbnN0IEVTMjAxNV9JTkhFUklURURfQ0xBU1NfV0lUSF9ERUxFR0FURV9DVE9SID0gL15jbGFzc1xccytbQS1aYS16XFxkJF9dKlxccypleHRlbmRzXFxzK1tee10re1tcXHNcXFNdKmNvbnN0cnVjdG9yXFxzKlxcKFxcKVxccyp7W159XSpzdXBlclxcKFxcLlxcLlxcLmFyZ3VtZW50c1xcKS87XG4vKipcbiAqIERldGVybWluZSB3aGV0aGVyIGEgc3RyaW5naWZpZWQgdHlwZSBpcyBhIGNsYXNzIHdoaWNoIGRlbGVnYXRlcyBpdHMgY29uc3RydWN0b3JcbiAqIHRvIGl0cyBwYXJlbnQuXG4gKlxuICogVGhpcyBpcyBub3QgdHJpdmlhbCBzaW5jZSBjb21waWxlZCBjb2RlIGNhbiBhY3R1YWxseSBjb250YWluIGEgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAqIGV2ZW4gaWYgdGhlIG9yaWdpbmFsIHNvdXJjZSBjb2RlIGRpZCBub3QuIEZvciBpbnN0YW5jZSwgd2hlbiB0aGUgY2hpbGQgY2xhc3MgY29udGFpbnNcbiAqIGFuIGluaXRpYWxpemVkIGluc3RhbmNlIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBpc0RlbGVnYXRlQ3Rvcih0eXBlU3RyKSB7XG4gICAgcmV0dXJuIEVTNV9ERUxFR0FURV9DVE9SLnRlc3QodHlwZVN0cikgfHxcbiAgICAgICAgRVMyMDE1X0lOSEVSSVRFRF9DTEFTU19XSVRIX0RFTEVHQVRFX0NUT1IudGVzdCh0eXBlU3RyKSB8fFxuICAgICAgICAoRVMyMDE1X0lOSEVSSVRFRF9DTEFTUy50ZXN0KHR5cGVTdHIpICYmICFFUzIwMTVfSU5IRVJJVEVEX0NMQVNTX1dJVEhfQ1RPUi50ZXN0KHR5cGVTdHIpKTtcbn1cbmNsYXNzIFJlZmxlY3Rpb25DYXBhYmlsaXRpZXMge1xuICAgIGNvbnN0cnVjdG9yKHJlZmxlY3QpIHtcbiAgICAgICAgdGhpcy5fcmVmbGVjdCA9IHJlZmxlY3QgfHwgX2dsb2JhbFsnUmVmbGVjdCddO1xuICAgIH1cbiAgICBpc1JlZmxlY3Rpb25FbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZmFjdG9yeSh0KSB7XG4gICAgICAgIHJldHVybiAoLi4uYXJncykgPT4gbmV3IHQoLi4uYXJncyk7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfemlwVHlwZXNBbmRBbm5vdGF0aW9ucyhwYXJhbVR5cGVzLCBwYXJhbUFubm90YXRpb25zKSB7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGlmICh0eXBlb2YgcGFyYW1UeXBlcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG5ld0FycmF5KHBhcmFtQW5ub3RhdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG5ld0FycmF5KHBhcmFtVHlwZXMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gVFMgb3V0cHV0cyBPYmplY3QgZm9yIHBhcmFtZXRlcnMgd2l0aG91dCB0eXBlcywgd2hpbGUgVHJhY2V1ciBvbWl0c1xuICAgICAgICAgICAgLy8gdGhlIGFubm90YXRpb25zLiBGb3Igbm93IHdlIHByZXNlcnZlIHRoZSBUcmFjZXVyIGJlaGF2aW9yIHRvIGFpZFxuICAgICAgICAgICAgLy8gbWlncmF0aW9uLCBidXQgdGhpcyBjYW4gYmUgcmV2aXNpdGVkLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXJhbVR5cGVzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyYW1UeXBlc1tpXSAmJiBwYXJhbVR5cGVzW2ldICE9IE9iamVjdCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IFtwYXJhbVR5cGVzW2ldXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmFtQW5ub3RhdGlvbnMgJiYgcGFyYW1Bbm5vdGF0aW9uc1tpXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2ldID0gcmVzdWx0W2ldLmNvbmNhdChwYXJhbUFubm90YXRpb25zW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBfb3duUGFyYW1ldGVycyh0eXBlLCBwYXJlbnRDdG9yKSB7XG4gICAgICAgIGNvbnN0IHR5cGVTdHIgPSB0eXBlLnRvU3RyaW5nKCk7XG4gICAgICAgIC8vIElmIHdlIGhhdmUgbm8gZGVjb3JhdG9ycywgd2Ugb25seSBoYXZlIGZ1bmN0aW9uLmxlbmd0aCBhcyBtZXRhZGF0YS5cbiAgICAgICAgLy8gSW4gdGhhdCBjYXNlLCB0byBkZXRlY3Qgd2hldGhlciBhIGNoaWxkIGNsYXNzIGRlY2xhcmVkIGFuIG93biBjb25zdHJ1Y3RvciBvciBub3QsXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gbG9vayBpbnNpZGUgb2YgdGhhdCBjb25zdHJ1Y3RvciB0byBjaGVjayB3aGV0aGVyIGl0IGlzXG4gICAgICAgIC8vIGp1c3QgY2FsbGluZyB0aGUgcGFyZW50LlxuICAgICAgICAvLyBUaGlzIGFsc28gaGVscHMgdG8gd29yayBhcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvMTI0MzlcbiAgICAgICAgLy8gdGhhdCBzZXRzICdkZXNpZ246cGFyYW10eXBlcycgdG8gW11cbiAgICAgICAgLy8gaWYgYSBjbGFzcyBpbmhlcml0cyBmcm9tIGFub3RoZXIgY2xhc3MgYnV0IGhhcyBubyBjdG9yIGRlY2xhcmVkIGl0c2VsZi5cbiAgICAgICAgaWYgKGlzRGVsZWdhdGVDdG9yKHR5cGVTdHIpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBQcmVmZXIgdGhlIGRpcmVjdCBBUEkuXG4gICAgICAgIGlmICh0eXBlLnBhcmFtZXRlcnMgJiYgdHlwZS5wYXJhbWV0ZXJzICE9PSBwYXJlbnRDdG9yLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlLnBhcmFtZXRlcnM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQVBJIG9mIHRzaWNrbGUgZm9yIGxvd2VyaW5nIGRlY29yYXRvcnMgdG8gcHJvcGVydGllcyBvbiB0aGUgY2xhc3MuXG4gICAgICAgIGNvbnN0IHRzaWNrbGVDdG9yUGFyYW1zID0gdHlwZS5jdG9yUGFyYW1ldGVycztcbiAgICAgICAgaWYgKHRzaWNrbGVDdG9yUGFyYW1zICYmIHRzaWNrbGVDdG9yUGFyYW1zICE9PSBwYXJlbnRDdG9yLmN0b3JQYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAvLyBOZXdlciB0c2lja2xlIHVzZXMgYSBmdW5jdGlvbiBjbG9zdXJlXG4gICAgICAgICAgICAvLyBSZXRhaW4gdGhlIG5vbi1mdW5jdGlvbiBjYXNlIGZvciBjb21wYXRpYmlsaXR5IHdpdGggb2xkZXIgdHNpY2tsZVxuICAgICAgICAgICAgY29uc3QgY3RvclBhcmFtZXRlcnMgPSB0eXBlb2YgdHNpY2tsZUN0b3JQYXJhbXMgPT09ICdmdW5jdGlvbicgPyB0c2lja2xlQ3RvclBhcmFtcygpIDogdHNpY2tsZUN0b3JQYXJhbXM7XG4gICAgICAgICAgICBjb25zdCBwYXJhbVR5cGVzID0gY3RvclBhcmFtZXRlcnMubWFwKChjdG9yUGFyYW0pID0+IGN0b3JQYXJhbSAmJiBjdG9yUGFyYW0udHlwZSk7XG4gICAgICAgICAgICBjb25zdCBwYXJhbUFubm90YXRpb25zID0gY3RvclBhcmFtZXRlcnMubWFwKChjdG9yUGFyYW0pID0+IGN0b3JQYXJhbSAmJiBjb252ZXJ0VHNpY2tsZURlY29yYXRvckludG9NZXRhZGF0YShjdG9yUGFyYW0uZGVjb3JhdG9ycykpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ppcFR5cGVzQW5kQW5ub3RhdGlvbnMocGFyYW1UeXBlcywgcGFyYW1Bbm5vdGF0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQVBJIGZvciBtZXRhZGF0YSBjcmVhdGVkIGJ5IGludm9raW5nIHRoZSBkZWNvcmF0b3JzLlxuICAgICAgICBjb25zdCBwYXJhbUFubm90YXRpb25zID0gdHlwZS5oYXNPd25Qcm9wZXJ0eShQQVJBTUVURVJTKSAmJiB0eXBlW1BBUkFNRVRFUlNdO1xuICAgICAgICBjb25zdCBwYXJhbVR5cGVzID0gdGhpcy5fcmVmbGVjdCAmJiB0aGlzLl9yZWZsZWN0LmdldE93bk1ldGFkYXRhICYmXG4gICAgICAgICAgICB0aGlzLl9yZWZsZWN0LmdldE93bk1ldGFkYXRhKCdkZXNpZ246cGFyYW10eXBlcycsIHR5cGUpO1xuICAgICAgICBpZiAocGFyYW1UeXBlcyB8fCBwYXJhbUFubm90YXRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5femlwVHlwZXNBbmRBbm5vdGF0aW9ucyhwYXJhbVR5cGVzLCBwYXJhbUFubm90YXRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBhIGNsYXNzIGhhcyBubyBkZWNvcmF0b3JzLCBhdCBsZWFzdCBjcmVhdGUgbWV0YWRhdGFcbiAgICAgICAgLy8gYmFzZWQgb24gZnVuY3Rpb24ubGVuZ3RoLlxuICAgICAgICAvLyBOb3RlOiBXZSBrbm93IHRoYXQgdGhpcyBpcyBhIHJlYWwgY29uc3RydWN0b3IgYXMgd2UgY2hlY2tlZFxuICAgICAgICAvLyB0aGUgY29udGVudCBvZiB0aGUgY29uc3RydWN0b3IgYWJvdmUuXG4gICAgICAgIHJldHVybiBuZXdBcnJheSh0eXBlLmxlbmd0aCk7XG4gICAgfVxuICAgIHBhcmFtZXRlcnModHlwZSkge1xuICAgICAgICAvLyBOb3RlOiBvbmx5IHJlcG9ydCBtZXRhZGF0YSBpZiB3ZSBoYXZlIGF0IGxlYXN0IG9uZSBjbGFzcyBkZWNvcmF0b3JcbiAgICAgICAgLy8gdG8gc3RheSBpbiBzeW5jIHdpdGggdGhlIHN0YXRpYyByZWZsZWN0b3IuXG4gICAgICAgIGlmICghaXNUeXBlKHR5cGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50Q3RvciA9IGdldFBhcmVudEN0b3IodHlwZSk7XG4gICAgICAgIGxldCBwYXJhbWV0ZXJzID0gdGhpcy5fb3duUGFyYW1ldGVycyh0eXBlLCBwYXJlbnRDdG9yKTtcbiAgICAgICAgaWYgKCFwYXJhbWV0ZXJzICYmIHBhcmVudEN0b3IgIT09IE9iamVjdCkge1xuICAgICAgICAgICAgcGFyYW1ldGVycyA9IHRoaXMucGFyYW1ldGVycyhwYXJlbnRDdG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW1ldGVycyB8fCBbXTtcbiAgICB9XG4gICAgX293bkFubm90YXRpb25zKHR5cGVPckZ1bmMsIHBhcmVudEN0b3IpIHtcbiAgICAgICAgLy8gUHJlZmVyIHRoZSBkaXJlY3QgQVBJLlxuICAgICAgICBpZiAodHlwZU9yRnVuYy5hbm5vdGF0aW9ucyAmJiB0eXBlT3JGdW5jLmFubm90YXRpb25zICE9PSBwYXJlbnRDdG9yLmFubm90YXRpb25zKSB7XG4gICAgICAgICAgICBsZXQgYW5ub3RhdGlvbnMgPSB0eXBlT3JGdW5jLmFubm90YXRpb25zO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhbm5vdGF0aW9ucyA9PT0gJ2Z1bmN0aW9uJyAmJiBhbm5vdGF0aW9ucy5hbm5vdGF0aW9ucykge1xuICAgICAgICAgICAgICAgIGFubm90YXRpb25zID0gYW5ub3RhdGlvbnMuYW5ub3RhdGlvbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYW5ub3RhdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQVBJIG9mIHRzaWNrbGUgZm9yIGxvd2VyaW5nIGRlY29yYXRvcnMgdG8gcHJvcGVydGllcyBvbiB0aGUgY2xhc3MuXG4gICAgICAgIGlmICh0eXBlT3JGdW5jLmRlY29yYXRvcnMgJiYgdHlwZU9yRnVuYy5kZWNvcmF0b3JzICE9PSBwYXJlbnRDdG9yLmRlY29yYXRvcnMpIHtcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0VHNpY2tsZURlY29yYXRvckludG9NZXRhZGF0YSh0eXBlT3JGdW5jLmRlY29yYXRvcnMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFQSSBmb3IgbWV0YWRhdGEgY3JlYXRlZCBieSBpbnZva2luZyB0aGUgZGVjb3JhdG9ycy5cbiAgICAgICAgaWYgKHR5cGVPckZ1bmMuaGFzT3duUHJvcGVydHkoQU5OT1RBVElPTlMpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZU9yRnVuY1tBTk5PVEFUSU9OU107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGFubm90YXRpb25zKHR5cGVPckZ1bmMpIHtcbiAgICAgICAgaWYgKCFpc1R5cGUodHlwZU9yRnVuYykpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJlbnRDdG9yID0gZ2V0UGFyZW50Q3Rvcih0eXBlT3JGdW5jKTtcbiAgICAgICAgY29uc3Qgb3duQW5ub3RhdGlvbnMgPSB0aGlzLl9vd25Bbm5vdGF0aW9ucyh0eXBlT3JGdW5jLCBwYXJlbnRDdG9yKSB8fCBbXTtcbiAgICAgICAgY29uc3QgcGFyZW50QW5ub3RhdGlvbnMgPSBwYXJlbnRDdG9yICE9PSBPYmplY3QgPyB0aGlzLmFubm90YXRpb25zKHBhcmVudEN0b3IpIDogW107XG4gICAgICAgIHJldHVybiBwYXJlbnRBbm5vdGF0aW9ucy5jb25jYXQob3duQW5ub3RhdGlvbnMpO1xuICAgIH1cbiAgICBfb3duUHJvcE1ldGFkYXRhKHR5cGVPckZ1bmMsIHBhcmVudEN0b3IpIHtcbiAgICAgICAgLy8gUHJlZmVyIHRoZSBkaXJlY3QgQVBJLlxuICAgICAgICBpZiAodHlwZU9yRnVuYy5wcm9wTWV0YWRhdGEgJiZcbiAgICAgICAgICAgIHR5cGVPckZ1bmMucHJvcE1ldGFkYXRhICE9PSBwYXJlbnRDdG9yLnByb3BNZXRhZGF0YSkge1xuICAgICAgICAgICAgbGV0IHByb3BNZXRhZGF0YSA9IHR5cGVPckZ1bmMucHJvcE1ldGFkYXRhO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wTWV0YWRhdGEgPT09ICdmdW5jdGlvbicgJiYgcHJvcE1ldGFkYXRhLnByb3BNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHByb3BNZXRhZGF0YSA9IHByb3BNZXRhZGF0YS5wcm9wTWV0YWRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvcE1ldGFkYXRhO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFQSSBvZiB0c2lja2xlIGZvciBsb3dlcmluZyBkZWNvcmF0b3JzIHRvIHByb3BlcnRpZXMgb24gdGhlIGNsYXNzLlxuICAgICAgICBpZiAodHlwZU9yRnVuYy5wcm9wRGVjb3JhdG9ycyAmJlxuICAgICAgICAgICAgdHlwZU9yRnVuYy5wcm9wRGVjb3JhdG9ycyAhPT0gcGFyZW50Q3Rvci5wcm9wRGVjb3JhdG9ycykge1xuICAgICAgICAgICAgY29uc3QgcHJvcERlY29yYXRvcnMgPSB0eXBlT3JGdW5jLnByb3BEZWNvcmF0b3JzO1xuICAgICAgICAgICAgY29uc3QgcHJvcE1ldGFkYXRhID0ge307XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhwcm9wRGVjb3JhdG9ycykuZm9yRWFjaChwcm9wID0+IHtcbiAgICAgICAgICAgICAgICBwcm9wTWV0YWRhdGFbcHJvcF0gPSBjb252ZXJ0VHNpY2tsZURlY29yYXRvckludG9NZXRhZGF0YShwcm9wRGVjb3JhdG9yc1twcm9wXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwcm9wTWV0YWRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQVBJIGZvciBtZXRhZGF0YSBjcmVhdGVkIGJ5IGludm9raW5nIHRoZSBkZWNvcmF0b3JzLlxuICAgICAgICBpZiAodHlwZU9yRnVuYy5oYXNPd25Qcm9wZXJ0eShQUk9QX01FVEFEQVRBKSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVPckZ1bmNbUFJPUF9NRVRBREFUQV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHByb3BNZXRhZGF0YSh0eXBlT3JGdW5jKSB7XG4gICAgICAgIGlmICghaXNUeXBlKHR5cGVPckZ1bmMpKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyZW50Q3RvciA9IGdldFBhcmVudEN0b3IodHlwZU9yRnVuYyk7XG4gICAgICAgIGNvbnN0IHByb3BNZXRhZGF0YSA9IHt9O1xuICAgICAgICBpZiAocGFyZW50Q3RvciAhPT0gT2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRQcm9wTWV0YWRhdGEgPSB0aGlzLnByb3BNZXRhZGF0YShwYXJlbnRDdG9yKTtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHBhcmVudFByb3BNZXRhZGF0YSkuZm9yRWFjaCgocHJvcE5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBwcm9wTWV0YWRhdGFbcHJvcE5hbWVdID0gcGFyZW50UHJvcE1ldGFkYXRhW3Byb3BOYW1lXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG93blByb3BNZXRhZGF0YSA9IHRoaXMuX293blByb3BNZXRhZGF0YSh0eXBlT3JGdW5jLCBwYXJlbnRDdG9yKTtcbiAgICAgICAgaWYgKG93blByb3BNZXRhZGF0YSkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMob3duUHJvcE1ldGFkYXRhKS5mb3JFYWNoKChwcm9wTmFtZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY29yYXRvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAocHJvcE1ldGFkYXRhLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWNvcmF0b3JzLnB1c2goLi4ucHJvcE1ldGFkYXRhW3Byb3BOYW1lXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlY29yYXRvcnMucHVzaCguLi5vd25Qcm9wTWV0YWRhdGFbcHJvcE5hbWVdKTtcbiAgICAgICAgICAgICAgICBwcm9wTWV0YWRhdGFbcHJvcE5hbWVdID0gZGVjb3JhdG9ycztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9wTWV0YWRhdGE7XG4gICAgfVxuICAgIG93blByb3BNZXRhZGF0YSh0eXBlT3JGdW5jKSB7XG4gICAgICAgIGlmICghaXNUeXBlKHR5cGVPckZ1bmMpKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX293blByb3BNZXRhZGF0YSh0eXBlT3JGdW5jLCBnZXRQYXJlbnRDdG9yKHR5cGVPckZ1bmMpKSB8fCB7fTtcbiAgICB9XG4gICAgaGFzTGlmZWN5Y2xlSG9vayh0eXBlLCBsY1Byb3BlcnR5KSB7XG4gICAgICAgIHJldHVybiB0eXBlIGluc3RhbmNlb2YgVHlwZSAmJiBsY1Byb3BlcnR5IGluIHR5cGUucHJvdG90eXBlO1xuICAgIH1cbiAgICBndWFyZHModHlwZSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGdldHRlcihuYW1lKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ28nLCAncmV0dXJuIG8uJyArIG5hbWUgKyAnOycpO1xuICAgIH1cbiAgICBzZXR0ZXIobmFtZSkge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdvJywgJ3YnLCAncmV0dXJuIG8uJyArIG5hbWUgKyAnID0gdjsnKTtcbiAgICB9XG4gICAgbWV0aG9kKG5hbWUpIHtcbiAgICAgICAgY29uc3QgZnVuY3Rpb25Cb2R5ID0gYGlmICghby4ke25hbWV9KSB0aHJvdyBuZXcgRXJyb3IoJ1wiJHtuYW1lfVwiIGlzIHVuZGVmaW5lZCcpO1xuICAgICAgICByZXR1cm4gby4ke25hbWV9LmFwcGx5KG8sIGFyZ3MpO2A7XG4gICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ28nLCAnYXJncycsIGZ1bmN0aW9uQm9keSk7XG4gICAgfVxuICAgIC8vIFRoZXJlIGlzIG5vdCBhIGNvbmNlcHQgb2YgaW1wb3J0IHVyaSBpbiBKcywgYnV0IHRoaXMgaXMgdXNlZnVsIGluIGRldmVsb3BpbmcgRGFydCBhcHBsaWNhdGlvbnMuXG4gICAgaW1wb3J0VXJpKHR5cGUpIHtcbiAgICAgICAgLy8gU3RhdGljU3ltYm9sXG4gICAgICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gJ29iamVjdCcgJiYgdHlwZVsnZmlsZVBhdGgnXSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVbJ2ZpbGVQYXRoJ107XG4gICAgICAgIH1cbiAgICAgICAgLy8gUnVudGltZSB0eXBlXG4gICAgICAgIHJldHVybiBgLi8ke3N0cmluZ2lmeSh0eXBlKX1gO1xuICAgIH1cbiAgICByZXNvdXJjZVVyaSh0eXBlKSB7XG4gICAgICAgIHJldHVybiBgLi8ke3N0cmluZ2lmeSh0eXBlKX1gO1xuICAgIH1cbiAgICByZXNvbHZlSWRlbnRpZmllcihuYW1lLCBtb2R1bGVVcmwsIG1lbWJlcnMsIHJ1bnRpbWUpIHtcbiAgICAgICAgcmV0dXJuIHJ1bnRpbWU7XG4gICAgfVxuICAgIHJlc29sdmVFbnVtKGVudW1JZGVudGlmaWVyLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiBlbnVtSWRlbnRpZmllcltuYW1lXTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb252ZXJ0VHNpY2tsZURlY29yYXRvckludG9NZXRhZGF0YShkZWNvcmF0b3JJbnZvY2F0aW9ucykge1xuICAgIGlmICghZGVjb3JhdG9ySW52b2NhdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICByZXR1cm4gZGVjb3JhdG9ySW52b2NhdGlvbnMubWFwKGRlY29yYXRvckludm9jYXRpb24gPT4ge1xuICAgICAgICBjb25zdCBkZWNvcmF0b3JUeXBlID0gZGVjb3JhdG9ySW52b2NhdGlvbi50eXBlO1xuICAgICAgICBjb25zdCBhbm5vdGF0aW9uQ2xzID0gZGVjb3JhdG9yVHlwZS5hbm5vdGF0aW9uQ2xzO1xuICAgICAgICBjb25zdCBhbm5vdGF0aW9uQXJncyA9IGRlY29yYXRvckludm9jYXRpb24uYXJncyA/IGRlY29yYXRvckludm9jYXRpb24uYXJncyA6IFtdO1xuICAgICAgICByZXR1cm4gbmV3IGFubm90YXRpb25DbHMoLi4uYW5ub3RhdGlvbkFyZ3MpO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZ2V0UGFyZW50Q3RvcihjdG9yKSB7XG4gICAgY29uc3QgcGFyZW50UHJvdG8gPSBjdG9yLnByb3RvdHlwZSA/IE9iamVjdC5nZXRQcm90b3R5cGVPZihjdG9yLnByb3RvdHlwZSkgOiBudWxsO1xuICAgIGNvbnN0IHBhcmVudEN0b3IgPSBwYXJlbnRQcm90byA/IHBhcmVudFByb3RvLmNvbnN0cnVjdG9yIDogbnVsbDtcbiAgICAvLyBOb3RlOiBXZSBhbHdheXMgdXNlIGBPYmplY3RgIGFzIHRoZSBudWxsIHZhbHVlXG4gICAgLy8gdG8gc2ltcGxpZnkgY2hlY2tpbmcgbGF0ZXIgb24uXG4gICAgcmV0dXJuIHBhcmVudEN0b3IgfHwgT2JqZWN0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IF9USFJPV19JRl9OT1RfRk9VTkQgPSB7fTtcbmNvbnN0IFRIUk9XX0lGX05PVF9GT1VORCA9IF9USFJPV19JRl9OT1RfRk9VTkQ7XG4vKlxuICogTmFtZSBvZiBhIHByb3BlcnR5ICh0aGF0IHdlIHBhdGNoIG9udG8gREkgZGVjb3JhdG9yKSwgd2hpY2ggaXMgdXNlZCBhcyBhbiBhbm5vdGF0aW9uIG9mIHdoaWNoXG4gKiBJbmplY3RGbGFnIHRoaXMgZGVjb3JhdG9yIHJlcHJlc2VudHMuIFRoaXMgYWxsb3dzIHRvIGF2b2lkIGRpcmVjdCByZWZlcmVuY2VzIHRvIHRoZSBESSBkZWNvcmF0b3JzXG4gKiBpbiB0aGUgY29kZSwgdGh1cyBtYWtpbmcgdGhlbSB0cmVlLXNoYWthYmxlLlxuICovXG5jb25zdCBESV9ERUNPUkFUT1JfRkxBRyA9ICdfX05HX0RJX0ZMQUdfXyc7XG5jb25zdCBOR19URU1QX1RPS0VOX1BBVEggPSAnbmdUZW1wVG9rZW5QYXRoJztcbmNvbnN0IE5HX1RPS0VOX1BBVEggPSAnbmdUb2tlblBhdGgnO1xuY29uc3QgTkVXX0xJTkUgPSAvXFxuL2dtO1xuY29uc3QgTk9fTkVXX0xJTkUgPSAnybUnO1xuY29uc3QgU09VUkNFID0gJ19fc291cmNlJztcbmNvbnN0IFVTRV9WQUxVRSQxID0gZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSh7IHByb3ZpZGU6IFN0cmluZywgdXNlVmFsdWU6IGdldENsb3N1cmVTYWZlUHJvcGVydHkgfSk7XG4vKipcbiAqIEN1cnJlbnQgaW5qZWN0b3IgdmFsdWUgdXNlZCBieSBgaW5qZWN0YC5cbiAqIC0gYHVuZGVmaW5lZGA6IGl0IGlzIGFuIGVycm9yIHRvIGNhbGwgYGluamVjdGBcbiAqIC0gYG51bGxgOiBgaW5qZWN0YCBjYW4gYmUgY2FsbGVkIGJ1dCB0aGVyZSBpcyBubyBpbmplY3RvciAobGltcC1tb2RlKS5cbiAqIC0gSW5qZWN0b3IgaW5zdGFuY2U6IFVzZSB0aGUgaW5qZWN0b3IgZm9yIHJlc29sdXRpb24uXG4gKi9cbmxldCBfY3VycmVudEluamVjdG9yID0gdW5kZWZpbmVkO1xuZnVuY3Rpb24gc2V0Q3VycmVudEluamVjdG9yKGluamVjdG9yKSB7XG4gICAgY29uc3QgZm9ybWVyID0gX2N1cnJlbnRJbmplY3RvcjtcbiAgICBfY3VycmVudEluamVjdG9yID0gaW5qZWN0b3I7XG4gICAgcmV0dXJuIGZvcm1lcjtcbn1cbmZ1bmN0aW9uIGluamVjdEluamVjdG9yT25seSh0b2tlbiwgZmxhZ3MgPSBJbmplY3RGbGFncy5EZWZhdWx0KSB7XG4gICAgaWYgKF9jdXJyZW50SW5qZWN0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAodHlwZW9mIG5nRGV2TW9kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmdEZXZNb2RlKSA/XG4gICAgICAgICAgICBgaW5qZWN0KCkgbXVzdCBiZSBjYWxsZWQgZnJvbSBhbiBpbmplY3Rpb24gY29udGV4dGAgOlxuICAgICAgICAgICAgJyc7XG4gICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoMjAzIC8qIE1JU1NJTkdfSU5KRUNUSU9OX0NPTlRFWFQgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKF9jdXJyZW50SW5qZWN0b3IgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGluamVjdFJvb3RMaW1wTW9kZSh0b2tlbiwgdW5kZWZpbmVkLCBmbGFncyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRJbmplY3Rvci5nZXQodG9rZW4sIGZsYWdzICYgSW5qZWN0RmxhZ3MuT3B0aW9uYWwgPyBudWxsIDogdW5kZWZpbmVkLCBmbGFncyk7XG4gICAgfVxufVxuZnVuY3Rpb24gybXJtWluamVjdCh0b2tlbiwgZmxhZ3MgPSBJbmplY3RGbGFncy5EZWZhdWx0KSB7XG4gICAgcmV0dXJuIChnZXRJbmplY3RJbXBsZW1lbnRhdGlvbigpIHx8IGluamVjdEluamVjdG9yT25seSkocmVzb2x2ZUZvcndhcmRSZWYodG9rZW4pLCBmbGFncyk7XG59XG4vKipcbiAqIFRocm93cyBhbiBlcnJvciBpbmRpY2F0aW5nIHRoYXQgYSBmYWN0b3J5IGZ1bmN0aW9uIGNvdWxkIG5vdCBiZSBnZW5lcmF0ZWQgYnkgdGhlIGNvbXBpbGVyIGZvciBhXG4gKiBwYXJ0aWN1bGFyIGNsYXNzLlxuICpcbiAqIFRoaXMgaW5zdHJ1Y3Rpb24gYWxsb3dzIHRoZSBhY3R1YWwgZXJyb3IgbWVzc2FnZSB0byBiZSBvcHRpbWl6ZWQgYXdheSB3aGVuIG5nRGV2TW9kZSBpcyB0dXJuZWRcbiAqIG9mZiwgc2F2aW5nIGJ5dGVzIG9mIGdlbmVyYXRlZCBjb2RlIHdoaWxlIHN0aWxsIHByb3ZpZGluZyBhIGdvb2QgZXhwZXJpZW5jZSBpbiBkZXYgbW9kZS5cbiAqXG4gKiBUaGUgbmFtZSBvZiB0aGUgY2xhc3MgaXMgbm90IG1lbnRpb25lZCBoZXJlLCBidXQgd2lsbCBiZSBpbiB0aGUgZ2VuZXJhdGVkIGZhY3RvcnkgZnVuY3Rpb24gbmFtZVxuICogYW5kIHRodXMgaW4gdGhlIHN0YWNrIHRyYWNlLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVpbnZhbGlkRmFjdG9yeURlcChpbmRleCkge1xuICAgIGNvbnN0IG1zZyA9IG5nRGV2TW9kZSA/XG4gICAgICAgIGBUaGlzIGNvbnN0cnVjdG9yIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggQW5ndWxhciBEZXBlbmRlbmN5IEluamVjdGlvbiBiZWNhdXNlIGl0cyBkZXBlbmRlbmN5IGF0IGluZGV4ICR7aW5kZXh9IG9mIHRoZSBwYXJhbWV0ZXIgbGlzdCBpcyBpbnZhbGlkLlxuVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBkZXBlbmRlbmN5IHR5cGUgaXMgYSBwcmltaXRpdmUgbGlrZSBhIHN0cmluZyBvciBpZiBhbiBhbmNlc3RvciBvZiB0aGlzIGNsYXNzIGlzIG1pc3NpbmcgYW4gQW5ndWxhciBkZWNvcmF0b3IuXG5cblBsZWFzZSBjaGVjayB0aGF0IDEpIHRoZSB0eXBlIGZvciB0aGUgcGFyYW1ldGVyIGF0IGluZGV4ICR7aW5kZXh9IGlzIGNvcnJlY3QgYW5kIDIpIHRoZSBjb3JyZWN0IEFuZ3VsYXIgZGVjb3JhdG9ycyBhcmUgZGVmaW5lZCBmb3IgdGhpcyBjbGFzcyBhbmQgaXRzIGFuY2VzdG9ycy5gIDpcbiAgICAgICAgJ2ludmFsaWQnO1xuICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xufVxuLyoqXG4gKiBJbmplY3RzIGEgdG9rZW4gZnJvbSB0aGUgY3VycmVudGx5IGFjdGl2ZSBpbmplY3Rvci5cbiAqXG4gKiBNdXN0IGJlIHVzZWQgaW4gdGhlIGNvbnRleHQgb2YgYSBmYWN0b3J5IGZ1bmN0aW9uIHN1Y2ggYXMgb25lIGRlZmluZWQgZm9yIGFuXG4gKiBgSW5qZWN0aW9uVG9rZW5gLiBUaHJvd3MgYW4gZXJyb3IgaWYgbm90IGNhbGxlZCBmcm9tIHN1Y2ggYSBjb250ZXh0LlxuICpcbiAqIFdpdGhpbiBzdWNoIGEgZmFjdG9yeSBmdW5jdGlvbiwgdXNpbmcgdGhpcyBmdW5jdGlvbiB0byByZXF1ZXN0IGluamVjdGlvbiBvZiBhIGRlcGVuZGVuY3lcbiAqIGlzIGZhc3RlciBhbmQgbW9yZSB0eXBlLXNhZmUgdGhhbiBwcm92aWRpbmcgYW4gYWRkaXRpb25hbCBhcnJheSBvZiBkZXBlbmRlbmNpZXNcbiAqIChhcyBoYXMgYmVlbiBjb21tb24gd2l0aCBgdXNlRmFjdG9yeWAgcHJvdmlkZXJzKS5cbiAqXG4gKiBAcGFyYW0gdG9rZW4gVGhlIGluamVjdGlvbiB0b2tlbiBmb3IgdGhlIGRlcGVuZGVuY3kgdG8gYmUgaW5qZWN0ZWQuXG4gKiBAcGFyYW0gZmxhZ3MgT3B0aW9uYWwgZmxhZ3MgdGhhdCBjb250cm9sIGhvdyBpbmplY3Rpb24gaXMgZXhlY3V0ZWQuXG4gKiBUaGUgZmxhZ3MgY29ycmVzcG9uZCB0byBpbmplY3Rpb24gc3RyYXRlZ2llcyB0aGF0IGNhbiBiZSBzcGVjaWZpZWQgd2l0aFxuICogcGFyYW1ldGVyIGRlY29yYXRvcnMgYEBIb3N0YCwgYEBTZWxmYCwgYEBTa2lwU2VmYCwgYW5kIGBAT3B0aW9uYWxgLlxuICogQHJldHVybnMgdGhlIGluamVjdGVkIHZhbHVlIGlmIGluamVjdGlvbiBpcyBzdWNjZXNzZnVsLCBgbnVsbGAgb3RoZXJ3aXNlLlxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKlxuICogIyMjIEV4YW1wbGVcbiAqXG4gKiB7QGV4YW1wbGUgY29yZS9kaS90cy9pbmplY3Rvcl9zcGVjLnRzIHJlZ2lvbj0nU2hha2FibGVJbmplY3Rpb25Ub2tlbid9XG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBpbmplY3QgPSDJtcm1aW5qZWN0O1xuZnVuY3Rpb24gaW5qZWN0QXJncyh0eXBlcykge1xuICAgIGNvbnN0IGFyZ3MgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGFyZyA9IHJlc29sdmVGb3J3YXJkUmVmKHR5cGVzW2ldKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuICAgICAgICAgICAgaWYgKGFyZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAodHlwZW9mIG5nRGV2TW9kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmdEZXZNb2RlKSA/XG4gICAgICAgICAgICAgICAgICAgICdBcmd1bWVudHMgYXJyYXkgbXVzdCBoYXZlIGFyZ3VtZW50cy4nIDpcbiAgICAgICAgICAgICAgICAgICAgJyc7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcig5MDAgLyogSU5WQUxJRF9ESUZGRVJfSU5QVVQgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdHlwZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGxldCBmbGFncyA9IEluamVjdEZsYWdzLkRlZmF1bHQ7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFyZy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBhcmdbal07XG4gICAgICAgICAgICAgICAgY29uc3QgZmxhZyA9IGdldEluamVjdEZsYWcobWV0YSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmbGFnID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2Ugd2hlbiB3ZSBoYW5kbGUgQEluamVjdCBkZWNvcmF0b3IuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmbGFnID09PSAtMSAvKiBJbmplY3QgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSBtZXRhLnRva2VuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZ3MgfD0gZmxhZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZSA9IG1ldGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJncy5wdXNoKMm1ybVpbmplY3QodHlwZSwgZmxhZ3MpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFyZ3MucHVzaCjJtcm1aW5qZWN0KGFyZykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xufVxuLyoqXG4gKiBBdHRhY2hlcyBhIGdpdmVuIEluamVjdEZsYWcgdG8gYSBnaXZlbiBkZWNvcmF0b3IgdXNpbmcgbW9ua2V5LXBhdGNoaW5nLlxuICogU2luY2UgREkgZGVjb3JhdG9ycyBjYW4gYmUgdXNlZCBpbiBwcm92aWRlcnMgYGRlcHNgIGFycmF5ICh3aGVuIHByb3ZpZGVyIGlzIGNvbmZpZ3VyZWQgdXNpbmdcbiAqIGB1c2VGYWN0b3J5YCkgd2l0aG91dCBpbml0aWFsaXphdGlvbiAoZS5nLiBgSG9zdGApIGFuZCBhcyBhbiBpbnN0YW5jZSAoZS5nLiBgbmV3IEhvc3QoKWApLCB3ZVxuICogYXR0YWNoIHRoZSBmbGFnIHRvIG1ha2UgaXQgYXZhaWxhYmxlIGJvdGggYXMgYSBzdGF0aWMgcHJvcGVydHkgYW5kIGFzIGEgZmllbGQgb24gZGVjb3JhdG9yXG4gKiBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0gZGVjb3JhdG9yIFByb3ZpZGVkIERJIGRlY29yYXRvci5cbiAqIEBwYXJhbSBmbGFnIEluamVjdEZsYWcgdGhhdCBzaG91bGQgYmUgYXBwbGllZC5cbiAqL1xuZnVuY3Rpb24gYXR0YWNoSW5qZWN0RmxhZyhkZWNvcmF0b3IsIGZsYWcpIHtcbiAgICBkZWNvcmF0b3JbRElfREVDT1JBVE9SX0ZMQUddID0gZmxhZztcbiAgICBkZWNvcmF0b3IucHJvdG90eXBlW0RJX0RFQ09SQVRPUl9GTEFHXSA9IGZsYWc7XG4gICAgcmV0dXJuIGRlY29yYXRvcjtcbn1cbi8qKlxuICogUmVhZHMgbW9ua2V5LXBhdGNoZWQgcHJvcGVydHkgdGhhdCBjb250YWlucyBJbmplY3RGbGFnIGF0dGFjaGVkIHRvIGEgZGVjb3JhdG9yLlxuICpcbiAqIEBwYXJhbSB0b2tlbiBUb2tlbiB0aGF0IG1heSBjb250YWluIG1vbmtleS1wYXRjaGVkIERJIGZsYWdzIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBnZXRJbmplY3RGbGFnKHRva2VuKSB7XG4gICAgcmV0dXJuIHRva2VuW0RJX0RFQ09SQVRPUl9GTEFHXTtcbn1cbmZ1bmN0aW9uIGNhdGNoSW5qZWN0b3JFcnJvcihlLCB0b2tlbiwgaW5qZWN0b3JFcnJvck5hbWUsIHNvdXJjZSkge1xuICAgIGNvbnN0IHRva2VuUGF0aCA9IGVbTkdfVEVNUF9UT0tFTl9QQVRIXTtcbiAgICBpZiAodG9rZW5bU09VUkNFXSkge1xuICAgICAgICB0b2tlblBhdGgudW5zaGlmdCh0b2tlbltTT1VSQ0VdKTtcbiAgICB9XG4gICAgZS5tZXNzYWdlID0gZm9ybWF0RXJyb3IoJ1xcbicgKyBlLm1lc3NhZ2UsIHRva2VuUGF0aCwgaW5qZWN0b3JFcnJvck5hbWUsIHNvdXJjZSk7XG4gICAgZVtOR19UT0tFTl9QQVRIXSA9IHRva2VuUGF0aDtcbiAgICBlW05HX1RFTVBfVE9LRU5fUEFUSF0gPSBudWxsO1xuICAgIHRocm93IGU7XG59XG5mdW5jdGlvbiBmb3JtYXRFcnJvcih0ZXh0LCBvYmosIGluamVjdG9yRXJyb3JOYW1lLCBzb3VyY2UgPSBudWxsKSB7XG4gICAgdGV4dCA9IHRleHQgJiYgdGV4dC5jaGFyQXQoMCkgPT09ICdcXG4nICYmIHRleHQuY2hhckF0KDEpID09IE5PX05FV19MSU5FID8gdGV4dC5zdWJzdHIoMikgOiB0ZXh0O1xuICAgIGxldCBjb250ZXh0ID0gc3RyaW5naWZ5KG9iaik7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICBjb250ZXh0ID0gb2JqLm1hcChzdHJpbmdpZnkpLmpvaW4oJyAtPiAnKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgbGV0IHBhcnRzID0gW107XG4gICAgICAgIGZvciAobGV0IGtleSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICAgICAgICAgIHBhcnRzLnB1c2goa2V5ICsgJzonICsgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgOiBzdHJpbmdpZnkodmFsdWUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dCA9IGB7JHtwYXJ0cy5qb2luKCcsICcpfX1gO1xuICAgIH1cbiAgICByZXR1cm4gYCR7aW5qZWN0b3JFcnJvck5hbWV9JHtzb3VyY2UgPyAnKCcgKyBzb3VyY2UgKyAnKScgOiAnJ31bJHtjb250ZXh0fV06ICR7dGV4dC5yZXBsYWNlKE5FV19MSU5FLCAnXFxuICAnKX1gO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogSW5qZWN0IGRlY29yYXRvciBhbmQgbWV0YWRhdGEuXG4gKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgSW5qZWN0ID0gYXR0YWNoSW5qZWN0RmxhZyhcbi8vIERpc2FibGUgdHNsaW50IGJlY2F1c2UgYERlY29yYXRvckZsYWdzYCBpcyBhIGNvbnN0IGVudW0gd2hpY2ggZ2V0cyBpbmxpbmVkLlxuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby10b3BsZXZlbC1wcm9wZXJ0eS1hY2Nlc3Ncbm1ha2VQYXJhbURlY29yYXRvcignSW5qZWN0JywgKHRva2VuKSA9PiAoeyB0b2tlbiB9KSksIC0xIC8qIEluamVjdCAqLyk7XG4vKipcbiAqIE9wdGlvbmFsIGRlY29yYXRvciBhbmQgbWV0YWRhdGEuXG4gKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgT3B0aW9uYWwgPSBcbi8vIERpc2FibGUgdHNsaW50IGJlY2F1c2UgYEludGVybmFsSW5qZWN0RmxhZ3NgIGlzIGEgY29uc3QgZW51bSB3aGljaCBnZXRzIGlubGluZWQuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLXRvcGxldmVsLXByb3BlcnR5LWFjY2Vzc1xuYXR0YWNoSW5qZWN0RmxhZyhtYWtlUGFyYW1EZWNvcmF0b3IoJ09wdGlvbmFsJyksIDggLyogT3B0aW9uYWwgKi8pO1xuLyoqXG4gKiBTZWxmIGRlY29yYXRvciBhbmQgbWV0YWRhdGEuXG4gKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgU2VsZiA9IFxuLy8gRGlzYWJsZSB0c2xpbnQgYmVjYXVzZSBgSW50ZXJuYWxJbmplY3RGbGFnc2AgaXMgYSBjb25zdCBlbnVtIHdoaWNoIGdldHMgaW5saW5lZC5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tdG9wbGV2ZWwtcHJvcGVydHktYWNjZXNzXG5hdHRhY2hJbmplY3RGbGFnKG1ha2VQYXJhbURlY29yYXRvcignU2VsZicpLCAyIC8qIFNlbGYgKi8pO1xuLyoqXG4gKiBgU2tpcFNlbGZgIGRlY29yYXRvciBhbmQgbWV0YWRhdGEuXG4gKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgU2tpcFNlbGYgPSBcbi8vIERpc2FibGUgdHNsaW50IGJlY2F1c2UgYEludGVybmFsSW5qZWN0RmxhZ3NgIGlzIGEgY29uc3QgZW51bSB3aGljaCBnZXRzIGlubGluZWQuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLXRvcGxldmVsLXByb3BlcnR5LWFjY2Vzc1xuYXR0YWNoSW5qZWN0RmxhZyhtYWtlUGFyYW1EZWNvcmF0b3IoJ1NraXBTZWxmJyksIDQgLyogU2tpcFNlbGYgKi8pO1xuLyoqXG4gKiBIb3N0IGRlY29yYXRvciBhbmQgbWV0YWRhdGEuXG4gKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgSG9zdCA9IFxuLy8gRGlzYWJsZSB0c2xpbnQgYmVjYXVzZSBgSW50ZXJuYWxJbmplY3RGbGFnc2AgaXMgYSBjb25zdCBlbnVtIHdoaWNoIGdldHMgaW5saW5lZC5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tdG9wbGV2ZWwtcHJvcGVydHktYWNjZXNzXG5hdHRhY2hJbmplY3RGbGFnKG1ha2VQYXJhbURlY29yYXRvcignSG9zdCcpLCAxIC8qIEhvc3QgKi8pO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmxldCBfcmVmbGVjdCA9IG51bGw7XG5mdW5jdGlvbiBnZXRSZWZsZWN0KCkge1xuICAgIHJldHVybiAoX3JlZmxlY3QgPSBfcmVmbGVjdCB8fCBuZXcgUmVmbGVjdGlvbkNhcGFiaWxpdGllcygpKTtcbn1cbmZ1bmN0aW9uIHJlZmxlY3REZXBlbmRlbmNpZXModHlwZSkge1xuICAgIHJldHVybiBjb252ZXJ0RGVwZW5kZW5jaWVzKGdldFJlZmxlY3QoKS5wYXJhbWV0ZXJzKHR5cGUpKTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnREZXBlbmRlbmNpZXMoZGVwcykge1xuICAgIHJldHVybiBkZXBzLm1hcChkZXAgPT4gcmVmbGVjdERlcGVuZGVuY3koZGVwKSk7XG59XG5mdW5jdGlvbiByZWZsZWN0RGVwZW5kZW5jeShkZXApIHtcbiAgICBjb25zdCBtZXRhID0ge1xuICAgICAgICB0b2tlbjogbnVsbCxcbiAgICAgICAgYXR0cmlidXRlOiBudWxsLFxuICAgICAgICBob3N0OiBmYWxzZSxcbiAgICAgICAgb3B0aW9uYWw6IGZhbHNlLFxuICAgICAgICBzZWxmOiBmYWxzZSxcbiAgICAgICAgc2tpcFNlbGY6IGZhbHNlLFxuICAgIH07XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZGVwKSAmJiBkZXAubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRlcC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgcGFyYW0gPSBkZXBbal07XG4gICAgICAgICAgICBpZiAocGFyYW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIHBhcmFtIG1heSBiZSB1bmRlZmluZWQgaWYgdHlwZSBvZiBkZXAgaXMgbm90IHNldCBieSBuZ3RzY1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocGFyYW0pO1xuICAgICAgICAgICAgaWYgKHBhcmFtIGluc3RhbmNlb2YgT3B0aW9uYWwgfHwgcHJvdG8ubmdNZXRhZGF0YU5hbWUgPT09ICdPcHRpb25hbCcpIHtcbiAgICAgICAgICAgICAgICBtZXRhLm9wdGlvbmFsID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcmFtIGluc3RhbmNlb2YgU2tpcFNlbGYgfHwgcHJvdG8ubmdNZXRhZGF0YU5hbWUgPT09ICdTa2lwU2VsZicpIHtcbiAgICAgICAgICAgICAgICBtZXRhLnNraXBTZWxmID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcmFtIGluc3RhbmNlb2YgU2VsZiB8fCBwcm90by5uZ01ldGFkYXRhTmFtZSA9PT0gJ1NlbGYnKSB7XG4gICAgICAgICAgICAgICAgbWV0YS5zZWxmID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcmFtIGluc3RhbmNlb2YgSG9zdCB8fCBwcm90by5uZ01ldGFkYXRhTmFtZSA9PT0gJ0hvc3QnKSB7XG4gICAgICAgICAgICAgICAgbWV0YS5ob3N0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhcmFtIGluc3RhbmNlb2YgSW5qZWN0KSB7XG4gICAgICAgICAgICAgICAgbWV0YS50b2tlbiA9IHBhcmFtLnRva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyYW0gaW5zdGFuY2VvZiBBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyYW0uYXR0cmlidXRlTmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0cmlidXRlIG5hbWUgbXVzdCBiZSBkZWZpbmVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtZXRhLmF0dHJpYnV0ZSA9IHBhcmFtLmF0dHJpYnV0ZU5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXRhLnRva2VuID0gcGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZGVwID09PSB1bmRlZmluZWQgfHwgKEFycmF5LmlzQXJyYXkoZGVwKSAmJiBkZXAubGVuZ3RoID09PSAwKSkge1xuICAgICAgICBtZXRhLnRva2VuID0gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG1ldGEudG9rZW4gPSBkZXA7XG4gICAgfVxuICAgIHJldHVybiBtZXRhO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHJlc291cmNlIFVSTHMgb24gYEBDb21wb25lbnRgIHdoZW4gdXNlZCB3aXRoIEpJVCBjb21waWxhdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICogYGBgXG4gKiBAQ29tcG9uZW50KHtcbiAqICAgc2VsZWN0b3I6ICdteS1jb21wJyxcbiAqICAgdGVtcGxhdGVVcmw6ICdteS1jb21wLmh0bWwnLCAvLyBUaGlzIHJlcXVpcmVzIGFzeW5jaHJvbm91cyByZXNvbHV0aW9uXG4gKiB9KVxuICogY2xhc3MgTXlDb21wb25lbnR7XG4gKiB9XG4gKlxuICogLy8gQ2FsbGluZyBgcmVuZGVyQ29tcG9uZW50YCB3aWxsIGZhaWwgYmVjYXVzZSBgcmVuZGVyQ29tcG9uZW50YCBpcyBhIHN5bmNocm9ub3VzIHByb2Nlc3NcbiAqIC8vIGFuZCBgTXlDb21wb25lbnRgJ3MgYEBDb21wb25lbnQudGVtcGxhdGVVcmxgIG5lZWRzIHRvIGJlIHJlc29sdmVkIGFzeW5jaHJvbm91c2x5LlxuICpcbiAqIC8vIENhbGxpbmcgYHJlc29sdmVDb21wb25lbnRSZXNvdXJjZXMoKWAgd2lsbCByZXNvbHZlIGBAQ29tcG9uZW50LnRlbXBsYXRlVXJsYCBpbnRvXG4gKiAvLyBgQENvbXBvbmVudC50ZW1wbGF0ZWAsIHdoaWNoIGFsbG93cyBgcmVuZGVyQ29tcG9uZW50YCB0byBwcm9jZWVkIGluIGEgc3luY2hyb25vdXMgbWFubmVyLlxuICpcbiAqIC8vIFVzZSBicm93c2VyJ3MgYGZldGNoKClgIGZ1bmN0aW9uIGFzIHRoZSBkZWZhdWx0IHJlc291cmNlIHJlc29sdXRpb24gc3RyYXRlZ3kuXG4gKiByZXNvbHZlQ29tcG9uZW50UmVzb3VyY2VzKGZldGNoKS50aGVuKCgpID0+IHtcbiAqICAgLy8gQWZ0ZXIgcmVzb2x1dGlvbiBhbGwgVVJMcyBoYXZlIGJlZW4gY29udmVydGVkIGludG8gYHRlbXBsYXRlYCBzdHJpbmdzLlxuICogICByZW5kZXJDb21wb25lbnQoTXlDb21wb25lbnQpO1xuICogfSk7XG4gKlxuICogYGBgXG4gKlxuICogTk9URTogSW4gQU9UIHRoZSByZXNvbHV0aW9uIGhhcHBlbnMgZHVyaW5nIGNvbXBpbGF0aW9uLCBhbmQgc28gdGhlcmUgc2hvdWxkIGJlIG5vIG5lZWRcbiAqIHRvIGNhbGwgdGhpcyBtZXRob2Qgb3V0c2lkZSBKSVQgbW9kZS5cbiAqXG4gKiBAcGFyYW0gcmVzb3VyY2VSZXNvbHZlciBhIGZ1bmN0aW9uIHdoaWNoIGlzIHJlc3BvbnNpYmxlIGZvciByZXR1cm5pbmcgYSBgUHJvbWlzZWAgdG8gdGhlXG4gKiBjb250ZW50cyBvZiB0aGUgcmVzb2x2ZWQgVVJMLiBCcm93c2VyJ3MgYGZldGNoKClgIG1ldGhvZCBpcyBhIGdvb2QgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudFJlc291cmNlcyhyZXNvdXJjZVJlc29sdmVyKSB7XG4gICAgLy8gU3RvcmUgYWxsIHByb21pc2VzIHdoaWNoIGFyZSBmZXRjaGluZyB0aGUgcmVzb3VyY2VzLlxuICAgIGNvbnN0IGNvbXBvbmVudFJlc29sdmVkID0gW107XG4gICAgLy8gQ2FjaGUgc28gdGhhdCB3ZSBkb24ndCBmZXRjaCB0aGUgc2FtZSByZXNvdXJjZSBtb3JlIHRoYW4gb25jZS5cbiAgICBjb25zdCB1cmxNYXAgPSBuZXcgTWFwKCk7XG4gICAgZnVuY3Rpb24gY2FjaGVkUmVzb3VyY2VSZXNvbHZlKHVybCkge1xuICAgICAgICBsZXQgcHJvbWlzZSA9IHVybE1hcC5nZXQodXJsKTtcbiAgICAgICAgaWYgKCFwcm9taXNlKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwID0gcmVzb3VyY2VSZXNvbHZlcih1cmwpO1xuICAgICAgICAgICAgdXJsTWFwLnNldCh1cmwsIHByb21pc2UgPSByZXNwLnRoZW4odW53cmFwUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgY29tcG9uZW50UmVzb3VyY2VSZXNvbHV0aW9uUXVldWUuZm9yRWFjaCgoY29tcG9uZW50LCB0eXBlKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICAgIGlmIChjb21wb25lbnQudGVtcGxhdGVVcmwpIHtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2goY2FjaGVkUmVzb3VyY2VSZXNvbHZlKGNvbXBvbmVudC50ZW1wbGF0ZVVybCkudGhlbigodGVtcGxhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb21wb25lbnQudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdHlsZVVybHMgPSBjb21wb25lbnQuc3R5bGVVcmxzO1xuICAgICAgICBjb25zdCBzdHlsZXMgPSBjb21wb25lbnQuc3R5bGVzIHx8IChjb21wb25lbnQuc3R5bGVzID0gW10pO1xuICAgICAgICBjb25zdCBzdHlsZU9mZnNldCA9IGNvbXBvbmVudC5zdHlsZXMubGVuZ3RoO1xuICAgICAgICBzdHlsZVVybHMgJiYgc3R5bGVVcmxzLmZvckVhY2goKHN0eWxlVXJsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgc3R5bGVzLnB1c2goJycpOyAvLyBwcmUtYWxsb2NhdGUgYXJyYXkuXG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKGNhY2hlZFJlc291cmNlUmVzb2x2ZShzdHlsZVVybCkudGhlbigoc3R5bGUpID0+IHtcbiAgICAgICAgICAgICAgICBzdHlsZXNbc3R5bGVPZmZzZXQgKyBpbmRleF0gPSBzdHlsZTtcbiAgICAgICAgICAgICAgICBzdHlsZVVybHMuc3BsaWNlKHN0eWxlVXJscy5pbmRleE9mKHN0eWxlVXJsKSwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlVXJscy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQuc3R5bGVVcmxzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGZ1bGx5UmVzb2x2ZWQgPSBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigoKSA9PiBjb21wb25lbnREZWZSZXNvbHZlZCh0eXBlKSk7XG4gICAgICAgIGNvbXBvbmVudFJlc29sdmVkLnB1c2goZnVsbHlSZXNvbHZlZCk7XG4gICAgfSk7XG4gICAgY2xlYXJSZXNvbHV0aW9uT2ZDb21wb25lbnRSZXNvdXJjZXNRdWV1ZSgpO1xuICAgIHJldHVybiBQcm9taXNlLmFsbChjb21wb25lbnRSZXNvbHZlZCkudGhlbigoKSA9PiB1bmRlZmluZWQpO1xufVxubGV0IGNvbXBvbmVudFJlc291cmNlUmVzb2x1dGlvblF1ZXVlID0gbmV3IE1hcCgpO1xuLy8gVHJhY2sgd2hlbiBleGlzdGluZyDJtWNtcCBmb3IgYSBUeXBlIGlzIHdhaXRpbmcgb24gcmVzb3VyY2VzLlxuY29uc3QgY29tcG9uZW50RGVmUGVuZGluZ1Jlc29sdXRpb24gPSBuZXcgU2V0KCk7XG5mdW5jdGlvbiBtYXliZVF1ZXVlUmVzb2x1dGlvbk9mQ29tcG9uZW50UmVzb3VyY2VzKHR5cGUsIG1ldGFkYXRhKSB7XG4gICAgaWYgKGNvbXBvbmVudE5lZWRzUmVzb2x1dGlvbihtZXRhZGF0YSkpIHtcbiAgICAgICAgY29tcG9uZW50UmVzb3VyY2VSZXNvbHV0aW9uUXVldWUuc2V0KHR5cGUsIG1ldGFkYXRhKTtcbiAgICAgICAgY29tcG9uZW50RGVmUGVuZGluZ1Jlc29sdXRpb24uYWRkKHR5cGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzQ29tcG9uZW50RGVmUGVuZGluZ1Jlc29sdXRpb24odHlwZSkge1xuICAgIHJldHVybiBjb21wb25lbnREZWZQZW5kaW5nUmVzb2x1dGlvbi5oYXModHlwZSk7XG59XG5mdW5jdGlvbiBjb21wb25lbnROZWVkc1Jlc29sdXRpb24oY29tcG9uZW50KSB7XG4gICAgcmV0dXJuICEhKChjb21wb25lbnQudGVtcGxhdGVVcmwgJiYgIWNvbXBvbmVudC5oYXNPd25Qcm9wZXJ0eSgndGVtcGxhdGUnKSkgfHxcbiAgICAgICAgY29tcG9uZW50LnN0eWxlVXJscyAmJiBjb21wb25lbnQuc3R5bGVVcmxzLmxlbmd0aCk7XG59XG5mdW5jdGlvbiBjbGVhclJlc29sdXRpb25PZkNvbXBvbmVudFJlc291cmNlc1F1ZXVlKCkge1xuICAgIGNvbnN0IG9sZCA9IGNvbXBvbmVudFJlc291cmNlUmVzb2x1dGlvblF1ZXVlO1xuICAgIGNvbXBvbmVudFJlc291cmNlUmVzb2x1dGlvblF1ZXVlID0gbmV3IE1hcCgpO1xuICAgIHJldHVybiBvbGQ7XG59XG5mdW5jdGlvbiByZXN0b3JlQ29tcG9uZW50UmVzb2x1dGlvblF1ZXVlKHF1ZXVlKSB7XG4gICAgY29tcG9uZW50RGVmUGVuZGluZ1Jlc29sdXRpb24uY2xlYXIoKTtcbiAgICBxdWV1ZS5mb3JFYWNoKChfLCB0eXBlKSA9PiBjb21wb25lbnREZWZQZW5kaW5nUmVzb2x1dGlvbi5hZGQodHlwZSkpO1xuICAgIGNvbXBvbmVudFJlc291cmNlUmVzb2x1dGlvblF1ZXVlID0gcXVldWU7XG59XG5mdW5jdGlvbiBpc0NvbXBvbmVudFJlc291cmNlUmVzb2x1dGlvblF1ZXVlRW1wdHkoKSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudFJlc291cmNlUmVzb2x1dGlvblF1ZXVlLnNpemUgPT09IDA7XG59XG5mdW5jdGlvbiB1bndyYXBSZXNwb25zZShyZXNwb25zZSkge1xuICAgIHJldHVybiB0eXBlb2YgcmVzcG9uc2UgPT0gJ3N0cmluZycgPyByZXNwb25zZSA6IHJlc3BvbnNlLnRleHQoKTtcbn1cbmZ1bmN0aW9uIGNvbXBvbmVudERlZlJlc29sdmVkKHR5cGUpIHtcbiAgICBjb21wb25lbnREZWZQZW5kaW5nUmVzb2x1dGlvbi5kZWxldGUodHlwZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBUaGUgVHJ1c3RlZCBUeXBlcyBwb2xpY3ksIG9yIG51bGwgaWYgVHJ1c3RlZCBUeXBlcyBhcmUgbm90XG4gKiBlbmFibGVkL3N1cHBvcnRlZCwgb3IgdW5kZWZpbmVkIGlmIHRoZSBwb2xpY3kgaGFzIG5vdCBiZWVuIGNyZWF0ZWQgeWV0LlxuICovXG5sZXQgcG9saWN5JDE7XG4vKipcbiAqIFJldHVybnMgdGhlIFRydXN0ZWQgVHlwZXMgcG9saWN5LCBvciBudWxsIGlmIFRydXN0ZWQgVHlwZXMgYXJlIG5vdFxuICogZW5hYmxlZC9zdXBwb3J0ZWQuIFRoZSBmaXJzdCBjYWxsIHRvIHRoaXMgZnVuY3Rpb24gd2lsbCBjcmVhdGUgdGhlIHBvbGljeS5cbiAqL1xuZnVuY3Rpb24gZ2V0UG9saWN5JDEoKSB7XG4gICAgaWYgKHBvbGljeSQxID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcG9saWN5JDEgPSBudWxsO1xuICAgICAgICBpZiAoX2dsb2JhbC50cnVzdGVkVHlwZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcG9saWN5JDEgPSBfZ2xvYmFsLnRydXN0ZWRUeXBlcy5jcmVhdGVQb2xpY3koJ2FuZ3VsYXInLCB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUhUTUw6IChzKSA9PiBzLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTY3JpcHQ6IChzKSA9PiBzLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTY3JpcHRVUkw6IChzKSA9PiBzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8vIHRydXN0ZWRUeXBlcy5jcmVhdGVQb2xpY3kgdGhyb3dzIGlmIGNhbGxlZCB3aXRoIGEgbmFtZSB0aGF0IGlzXG4gICAgICAgICAgICAgICAgLy8gYWxyZWFkeSByZWdpc3RlcmVkLCBldmVuIGluIHJlcG9ydC1vbmx5IG1vZGUuIFVudGlsIHRoZSBBUEkgY2hhbmdlcyxcbiAgICAgICAgICAgICAgICAvLyBjYXRjaCB0aGUgZXJyb3Igbm90IHRvIGJyZWFrIHRoZSBhcHBsaWNhdGlvbnMgZnVuY3Rpb25hbGx5LiBJbiBzdWNoXG4gICAgICAgICAgICAgICAgLy8gY2FzZXMsIHRoZSBjb2RlIHdpbGwgZmFsbCBiYWNrIHRvIHVzaW5nIHN0cmluZ3MuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvbGljeSQxO1xufVxuLyoqXG4gKiBVbnNhZmVseSBwcm9tb3RlIGEgc3RyaW5nIHRvIGEgVHJ1c3RlZEhUTUwsIGZhbGxpbmcgYmFjayB0byBzdHJpbmdzIHdoZW5cbiAqIFRydXN0ZWQgVHlwZXMgYXJlIG5vdCBhdmFpbGFibGUuXG4gKiBAc2VjdXJpdHkgVGhpcyBpcyBhIHNlY3VyaXR5LXNlbnNpdGl2ZSBmdW5jdGlvbjsgYW55IHVzZSBvZiB0aGlzIGZ1bmN0aW9uXG4gKiBtdXN0IGdvIHRocm91Z2ggc2VjdXJpdHkgcmV2aWV3LiBJbiBwYXJ0aWN1bGFyLCBpdCBtdXN0IGJlIGFzc3VyZWQgdGhhdCB0aGVcbiAqIHByb3ZpZGVkIHN0cmluZyB3aWxsIG5ldmVyIGNhdXNlIGFuIFhTUyB2dWxuZXJhYmlsaXR5IGlmIHVzZWQgaW4gYSBjb250ZXh0XG4gKiB0aGF0IHdpbGwgYmUgaW50ZXJwcmV0ZWQgYXMgSFRNTCBieSBhIGJyb3dzZXIsIGUuZy4gd2hlbiBhc3NpZ25pbmcgdG9cbiAqIGVsZW1lbnQuaW5uZXJIVE1MLlxuICovXG5mdW5jdGlvbiB0cnVzdGVkSFRNTEZyb21TdHJpbmcoaHRtbCkge1xuICAgIHJldHVybiBnZXRQb2xpY3kkMSgpPy5jcmVhdGVIVE1MKGh0bWwpIHx8IGh0bWw7XG59XG4vKipcbiAqIFVuc2FmZWx5IHByb21vdGUgYSBzdHJpbmcgdG8gYSBUcnVzdGVkU2NyaXB0LCBmYWxsaW5nIGJhY2sgdG8gc3RyaW5ncyB3aGVuXG4gKiBUcnVzdGVkIFR5cGVzIGFyZSBub3QgYXZhaWxhYmxlLlxuICogQHNlY3VyaXR5IEluIHBhcnRpY3VsYXIsIGl0IG11c3QgYmUgYXNzdXJlZCB0aGF0IHRoZSBwcm92aWRlZCBzdHJpbmcgd2lsbFxuICogbmV2ZXIgY2F1c2UgYW4gWFNTIHZ1bG5lcmFiaWxpdHkgaWYgdXNlZCBpbiBhIGNvbnRleHQgdGhhdCB3aWxsIGJlXG4gKiBpbnRlcnByZXRlZCBhbmQgZXhlY3V0ZWQgYXMgYSBzY3JpcHQgYnkgYSBicm93c2VyLCBlLmcuIHdoZW4gY2FsbGluZyBldmFsLlxuICovXG5mdW5jdGlvbiB0cnVzdGVkU2NyaXB0RnJvbVN0cmluZyhzY3JpcHQpIHtcbiAgICByZXR1cm4gZ2V0UG9saWN5JDEoKT8uY3JlYXRlU2NyaXB0KHNjcmlwdCkgfHwgc2NyaXB0O1xufVxuLyoqXG4gKiBVbnNhZmVseSBwcm9tb3RlIGEgc3RyaW5nIHRvIGEgVHJ1c3RlZFNjcmlwdFVSTCwgZmFsbGluZyBiYWNrIHRvIHN0cmluZ3NcbiAqIHdoZW4gVHJ1c3RlZCBUeXBlcyBhcmUgbm90IGF2YWlsYWJsZS5cbiAqIEBzZWN1cml0eSBUaGlzIGlzIGEgc2VjdXJpdHktc2Vuc2l0aXZlIGZ1bmN0aW9uOyBhbnkgdXNlIG9mIHRoaXMgZnVuY3Rpb25cbiAqIG11c3QgZ28gdGhyb3VnaCBzZWN1cml0eSByZXZpZXcuIEluIHBhcnRpY3VsYXIsIGl0IG11c3QgYmUgYXNzdXJlZCB0aGF0IHRoZVxuICogcHJvdmlkZWQgc3RyaW5nIHdpbGwgbmV2ZXIgY2F1c2UgYW4gWFNTIHZ1bG5lcmFiaWxpdHkgaWYgdXNlZCBpbiBhIGNvbnRleHRcbiAqIHRoYXQgd2lsbCBjYXVzZSBhIGJyb3dzZXIgdG8gbG9hZCBhbmQgZXhlY3V0ZSBhIHJlc291cmNlLCBlLmcuIHdoZW5cbiAqIGFzc2lnbmluZyB0byBzY3JpcHQuc3JjLlxuICovXG5mdW5jdGlvbiB0cnVzdGVkU2NyaXB0VVJMRnJvbVN0cmluZyh1cmwpIHtcbiAgICByZXR1cm4gZ2V0UG9saWN5JDEoKT8uY3JlYXRlU2NyaXB0VVJMKHVybCkgfHwgdXJsO1xufVxuLyoqXG4gKiBVbnNhZmVseSBjYWxsIHRoZSBGdW5jdGlvbiBjb25zdHJ1Y3RvciB3aXRoIHRoZSBnaXZlbiBzdHJpbmcgYXJndW1lbnRzLiBJdFxuICogaXMgb25seSBhdmFpbGFibGUgaW4gZGV2ZWxvcG1lbnQgbW9kZSwgYW5kIHNob3VsZCBiZSBzdHJpcHBlZCBvdXQgb2ZcbiAqIHByb2R1Y3Rpb24gY29kZS5cbiAqIEBzZWN1cml0eSBUaGlzIGlzIGEgc2VjdXJpdHktc2Vuc2l0aXZlIGZ1bmN0aW9uOyBhbnkgdXNlIG9mIHRoaXMgZnVuY3Rpb25cbiAqIG11c3QgZ28gdGhyb3VnaCBzZWN1cml0eSByZXZpZXcuIEluIHBhcnRpY3VsYXIsIGl0IG11c3QgYmUgYXNzdXJlZCB0aGF0IGl0XG4gKiBpcyBvbmx5IGNhbGxlZCBmcm9tIGRldmVsb3BtZW50IGNvZGUsIGFzIHVzZSBpbiBwcm9kdWN0aW9uIGNvZGUgY2FuIGxlYWQgdG9cbiAqIFhTUyB2dWxuZXJhYmlsaXRpZXMuXG4gKi9cbmZ1bmN0aW9uIG5ld1RydXN0ZWRGdW5jdGlvbkZvckRldiguLi5hcmdzKSB7XG4gICAgaWYgKHR5cGVvZiBuZ0Rldk1vZGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbmV3VHJ1c3RlZEZ1bmN0aW9uRm9yRGV2IHNob3VsZCBuZXZlciBiZSBjYWxsZWQgaW4gcHJvZHVjdGlvbicpO1xuICAgIH1cbiAgICBpZiAoIV9nbG9iYWwudHJ1c3RlZFR5cGVzKSB7XG4gICAgICAgIC8vIEluIGVudmlyb25tZW50cyB0aGF0IGRvbid0IHN1cHBvcnQgVHJ1c3RlZCBUeXBlcywgZmFsbCBiYWNrIHRvIHRoZSBtb3N0XG4gICAgICAgIC8vIHN0cmFpZ2h0Zm9yd2FyZCBpbXBsZW1lbnRhdGlvbjpcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbiguLi5hcmdzKTtcbiAgICB9XG4gICAgLy8gQ2hyb21lIGN1cnJlbnRseSBkb2VzIG5vdCBzdXBwb3J0IHBhc3NpbmcgVHJ1c3RlZFNjcmlwdCB0byB0aGUgRnVuY3Rpb25cbiAgICAvLyBjb25zdHJ1Y3Rvci4gVGhlIGZvbGxvd2luZyBpbXBsZW1lbnRzIHRoZSB3b3JrYXJvdW5kIHByb3Bvc2VkIG9uIHRoZSBwYWdlXG4gICAgLy8gYmVsb3csIHdoZXJlIHRoZSBDaHJvbWl1bSBidWcgaXMgYWxzbyByZWZlcmVuY2VkOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93M2Mvd2ViYXBwc2VjLXRydXN0ZWQtdHlwZXMvd2lraS9UcnVzdGVkLVR5cGVzLWZvci1mdW5jdGlvbi1jb25zdHJ1Y3RvclxuICAgIGNvbnN0IGZuQXJncyA9IGFyZ3Muc2xpY2UoMCwgLTEpLmpvaW4oJywnKTtcbiAgICBjb25zdCBmbkJvZHkgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgYm9keSA9IGAoZnVuY3Rpb24gYW5vbnltb3VzKCR7Zm5BcmdzfVxuKSB7ICR7Zm5Cb2R5fVxufSlgO1xuICAgIC8vIFVzaW5nIGV2YWwgZGlyZWN0bHkgY29uZnVzZXMgdGhlIGNvbXBpbGVyIGFuZCBwcmV2ZW50cyB0aGlzIG1vZHVsZSBmcm9tXG4gICAgLy8gYmVpbmcgc3RyaXBwZWQgb3V0IG9mIEpTIGJpbmFyaWVzIGV2ZW4gaWYgbm90IHVzZWQuIFRoZSBnbG9iYWxbJ2V2YWwnXVxuICAgIC8vIGluZGlyZWN0aW9uIGZpeGVzIHRoYXQuXG4gICAgY29uc3QgZm4gPSBfZ2xvYmFsWydldmFsJ10odHJ1c3RlZFNjcmlwdEZyb21TdHJpbmcoYm9keSkpO1xuICAgIGlmIChmbi5iaW5kID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgYSBicm93c2VyIGJ1ZyB0aGF0IG9ubHkgZXhpc3RzIGluIENocm9tZSA4Mywgd2hlcmUgcGFzc2luZ1xuICAgICAgICAvLyBhIFRydXN0ZWRTY3JpcHQgdG8gZXZhbCBqdXN0IHJldHVybnMgdGhlIFRydXN0ZWRTY3JpcHQgYmFjayB3aXRob3V0XG4gICAgICAgIC8vIGV2YWx1YXRpbmcgaXQuIEluIHRoYXQgY2FzZSwgZmFsbCBiYWNrIHRvIHRoZSBtb3N0IHN0cmFpZ2h0Zm9yd2FyZFxuICAgICAgICAvLyBpbXBsZW1lbnRhdGlvbjpcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbiguLi5hcmdzKTtcbiAgICB9XG4gICAgLy8gVG8gY29tcGxldGVseSBtaW1pYyB0aGUgYmVoYXZpb3Igb2YgY2FsbGluZyBcIm5ldyBGdW5jdGlvblwiLCB0d28gbW9yZVxuICAgIC8vIHRoaW5ncyBuZWVkIHRvIGhhcHBlbjpcbiAgICAvLyAxLiBTdHJpbmdpZnlpbmcgdGhlIHJlc3VsdGluZyBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGl0cyBzb3VyY2UgY29kZVxuICAgIGZuLnRvU3RyaW5nID0gKCkgPT4gYm9keTtcbiAgICAvLyAyLiBXaGVuIGNhbGxpbmcgdGhlIHJlc3VsdGluZyBmdW5jdGlvbiwgYHRoaXNgIHNob3VsZCByZWZlciB0byBgZ2xvYmFsYFxuICAgIHJldHVybiBmbi5iaW5kKF9nbG9iYWwpO1xuICAgIC8vIFdoZW4gVHJ1c3RlZCBUeXBlcyBzdXBwb3J0IGluIEZ1bmN0aW9uIGNvbnN0cnVjdG9ycyBpcyB3aWRlbHkgYXZhaWxhYmxlLFxuICAgIC8vIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIGZ1bmN0aW9uIGNhbiBiZSBzaW1wbGlmaWVkIHRvOlxuICAgIC8vIHJldHVybiBuZXcgRnVuY3Rpb24oLi4uYXJncy5tYXAoYSA9PiB0cnVzdGVkU2NyaXB0RnJvbVN0cmluZyhhKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVGhlIFRydXN0ZWQgVHlwZXMgcG9saWN5LCBvciBudWxsIGlmIFRydXN0ZWQgVHlwZXMgYXJlIG5vdFxuICogZW5hYmxlZC9zdXBwb3J0ZWQsIG9yIHVuZGVmaW5lZCBpZiB0aGUgcG9saWN5IGhhcyBub3QgYmVlbiBjcmVhdGVkIHlldC5cbiAqL1xubGV0IHBvbGljeTtcbi8qKlxuICogUmV0dXJucyB0aGUgVHJ1c3RlZCBUeXBlcyBwb2xpY3ksIG9yIG51bGwgaWYgVHJ1c3RlZCBUeXBlcyBhcmUgbm90XG4gKiBlbmFibGVkL3N1cHBvcnRlZC4gVGhlIGZpcnN0IGNhbGwgdG8gdGhpcyBmdW5jdGlvbiB3aWxsIGNyZWF0ZSB0aGUgcG9saWN5LlxuICovXG5mdW5jdGlvbiBnZXRQb2xpY3koKSB7XG4gICAgaWYgKHBvbGljeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBvbGljeSA9IG51bGw7XG4gICAgICAgIGlmIChfZ2xvYmFsLnRydXN0ZWRUeXBlcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBwb2xpY3kgPSBfZ2xvYmFsLnRydXN0ZWRUeXBlc1xuICAgICAgICAgICAgICAgICAgICAuY3JlYXRlUG9saWN5KCdhbmd1bGFyI3Vuc2FmZS1ieXBhc3MnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUhUTUw6IChzKSA9PiBzLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTY3JpcHQ6IChzKSA9PiBzLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVTY3JpcHRVUkw6IChzKSA9PiBzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIC8vIHRydXN0ZWRUeXBlcy5jcmVhdGVQb2xpY3kgdGhyb3dzIGlmIGNhbGxlZCB3aXRoIGEgbmFtZSB0aGF0IGlzXG4gICAgICAgICAgICAgICAgLy8gYWxyZWFkeSByZWdpc3RlcmVkLCBldmVuIGluIHJlcG9ydC1vbmx5IG1vZGUuIFVudGlsIHRoZSBBUEkgY2hhbmdlcyxcbiAgICAgICAgICAgICAgICAvLyBjYXRjaCB0aGUgZXJyb3Igbm90IHRvIGJyZWFrIHRoZSBhcHBsaWNhdGlvbnMgZnVuY3Rpb25hbGx5LiBJbiBzdWNoXG4gICAgICAgICAgICAgICAgLy8gY2FzZXMsIHRoZSBjb2RlIHdpbGwgZmFsbCBiYWNrIHRvIHVzaW5nIHN0cmluZ3MuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvbGljeTtcbn1cbi8qKlxuICogVW5zYWZlbHkgcHJvbW90ZSBhIHN0cmluZyB0byBhIFRydXN0ZWRIVE1MLCBmYWxsaW5nIGJhY2sgdG8gc3RyaW5ncyB3aGVuXG4gKiBUcnVzdGVkIFR5cGVzIGFyZSBub3QgYXZhaWxhYmxlLlxuICogQHNlY3VyaXR5IFRoaXMgaXMgYSBzZWN1cml0eS1zZW5zaXRpdmUgZnVuY3Rpb247IGFueSB1c2Ugb2YgdGhpcyBmdW5jdGlvblxuICogbXVzdCBnbyB0aHJvdWdoIHNlY3VyaXR5IHJldmlldy4gSW4gcGFydGljdWxhciwgaXQgbXVzdCBiZSBhc3N1cmVkIHRoYXQgaXRcbiAqIGlzIG9ubHkgcGFzc2VkIHN0cmluZ3MgdGhhdCBjb21lIGRpcmVjdGx5IGZyb20gY3VzdG9tIHNhbml0aXplcnMgb3IgdGhlXG4gKiBieXBhc3NTZWN1cml0eVRydXN0KiBmdW5jdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIHRydXN0ZWRIVE1MRnJvbVN0cmluZ0J5cGFzcyhodG1sKSB7XG4gICAgcmV0dXJuIGdldFBvbGljeSgpPy5jcmVhdGVIVE1MKGh0bWwpIHx8IGh0bWw7XG59XG4vKipcbiAqIFVuc2FmZWx5IHByb21vdGUgYSBzdHJpbmcgdG8gYSBUcnVzdGVkU2NyaXB0LCBmYWxsaW5nIGJhY2sgdG8gc3RyaW5ncyB3aGVuXG4gKiBUcnVzdGVkIFR5cGVzIGFyZSBub3QgYXZhaWxhYmxlLlxuICogQHNlY3VyaXR5IFRoaXMgaXMgYSBzZWN1cml0eS1zZW5zaXRpdmUgZnVuY3Rpb247IGFueSB1c2Ugb2YgdGhpcyBmdW5jdGlvblxuICogbXVzdCBnbyB0aHJvdWdoIHNlY3VyaXR5IHJldmlldy4gSW4gcGFydGljdWxhciwgaXQgbXVzdCBiZSBhc3N1cmVkIHRoYXQgaXRcbiAqIGlzIG9ubHkgcGFzc2VkIHN0cmluZ3MgdGhhdCBjb21lIGRpcmVjdGx5IGZyb20gY3VzdG9tIHNhbml0aXplcnMgb3IgdGhlXG4gKiBieXBhc3NTZWN1cml0eVRydXN0KiBmdW5jdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIHRydXN0ZWRTY3JpcHRGcm9tU3RyaW5nQnlwYXNzKHNjcmlwdCkge1xuICAgIHJldHVybiBnZXRQb2xpY3koKT8uY3JlYXRlU2NyaXB0KHNjcmlwdCkgfHwgc2NyaXB0O1xufVxuLyoqXG4gKiBVbnNhZmVseSBwcm9tb3RlIGEgc3RyaW5nIHRvIGEgVHJ1c3RlZFNjcmlwdFVSTCwgZmFsbGluZyBiYWNrIHRvIHN0cmluZ3NcbiAqIHdoZW4gVHJ1c3RlZCBUeXBlcyBhcmUgbm90IGF2YWlsYWJsZS5cbiAqIEBzZWN1cml0eSBUaGlzIGlzIGEgc2VjdXJpdHktc2Vuc2l0aXZlIGZ1bmN0aW9uOyBhbnkgdXNlIG9mIHRoaXMgZnVuY3Rpb25cbiAqIG11c3QgZ28gdGhyb3VnaCBzZWN1cml0eSByZXZpZXcuIEluIHBhcnRpY3VsYXIsIGl0IG11c3QgYmUgYXNzdXJlZCB0aGF0IGl0XG4gKiBpcyBvbmx5IHBhc3NlZCBzdHJpbmdzIHRoYXQgY29tZSBkaXJlY3RseSBmcm9tIGN1c3RvbSBzYW5pdGl6ZXJzIG9yIHRoZVxuICogYnlwYXNzU2VjdXJpdHlUcnVzdCogZnVuY3Rpb25zLlxuICovXG5mdW5jdGlvbiB0cnVzdGVkU2NyaXB0VVJMRnJvbVN0cmluZ0J5cGFzcyh1cmwpIHtcbiAgICByZXR1cm4gZ2V0UG9saWN5KCk/LmNyZWF0ZVNjcmlwdFVSTCh1cmwpIHx8IHVybDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5jbGFzcyBTYWZlVmFsdWVJbXBsIHtcbiAgICBjb25zdHJ1Y3RvcihjaGFuZ2luZ1RoaXNCcmVha3NBcHBsaWNhdGlvblNlY3VyaXR5KSB7XG4gICAgICAgIHRoaXMuY2hhbmdpbmdUaGlzQnJlYWtzQXBwbGljYXRpb25TZWN1cml0eSA9IGNoYW5naW5nVGhpc0JyZWFrc0FwcGxpY2F0aW9uU2VjdXJpdHk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYFNhZmVWYWx1ZSBtdXN0IHVzZSBbcHJvcGVydHldPWJpbmRpbmc6ICR7dGhpcy5jaGFuZ2luZ1RoaXNCcmVha3NBcHBsaWNhdGlvblNlY3VyaXR5fWAgK1xuICAgICAgICAgICAgYCAoc2VlIGh0dHBzOi8vZy5jby9uZy9zZWN1cml0eSN4c3MpYDtcbiAgICB9XG59XG5jbGFzcyBTYWZlSHRtbEltcGwgZXh0ZW5kcyBTYWZlVmFsdWVJbXBsIHtcbiAgICBnZXRUeXBlTmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSFRNTFwiIC8qIEh0bWwgKi87XG4gICAgfVxufVxuY2xhc3MgU2FmZVN0eWxlSW1wbCBleHRlbmRzIFNhZmVWYWx1ZUltcGwge1xuICAgIGdldFR5cGVOYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTdHlsZVwiIC8qIFN0eWxlICovO1xuICAgIH1cbn1cbmNsYXNzIFNhZmVTY3JpcHRJbXBsIGV4dGVuZHMgU2FmZVZhbHVlSW1wbCB7XG4gICAgZ2V0VHlwZU5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlNjcmlwdFwiIC8qIFNjcmlwdCAqLztcbiAgICB9XG59XG5jbGFzcyBTYWZlVXJsSW1wbCBleHRlbmRzIFNhZmVWYWx1ZUltcGwge1xuICAgIGdldFR5cGVOYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJVUkxcIiAvKiBVcmwgKi87XG4gICAgfVxufVxuY2xhc3MgU2FmZVJlc291cmNlVXJsSW1wbCBleHRlbmRzIFNhZmVWYWx1ZUltcGwge1xuICAgIGdldFR5cGVOYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSZXNvdXJjZVVSTFwiIC8qIFJlc291cmNlVXJsICovO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHVud3JhcFNhZmVWYWx1ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFNhZmVWYWx1ZUltcGwgPyB2YWx1ZS5jaGFuZ2luZ1RoaXNCcmVha3NBcHBsaWNhdGlvblNlY3VyaXR5IDpcbiAgICAgICAgdmFsdWU7XG59XG5mdW5jdGlvbiBhbGxvd1Nhbml0aXphdGlvbkJ5cGFzc0FuZFRocm93KHZhbHVlLCB0eXBlKSB7XG4gICAgY29uc3QgYWN0dWFsVHlwZSA9IGdldFNhbml0aXphdGlvbkJ5cGFzc1R5cGUodmFsdWUpO1xuICAgIGlmIChhY3R1YWxUeXBlICE9IG51bGwgJiYgYWN0dWFsVHlwZSAhPT0gdHlwZSkge1xuICAgICAgICAvLyBBbGxvdyBSZXNvdXJjZVVSTHMgaW4gVVJMIGNvbnRleHRzLCB0aGV5IGFyZSBzdHJpY3RseSBtb3JlIHRydXN0ZWQuXG4gICAgICAgIGlmIChhY3R1YWxUeXBlID09PSBcIlJlc291cmNlVVJMXCIgLyogUmVzb3VyY2VVcmwgKi8gJiYgdHlwZSA9PT0gXCJVUkxcIiAvKiBVcmwgKi8pXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXF1aXJlZCBhIHNhZmUgJHt0eXBlfSwgZ290IGEgJHthY3R1YWxUeXBlfSAoc2VlIGh0dHBzOi8vZy5jby9uZy9zZWN1cml0eSN4c3MpYCk7XG4gICAgfVxuICAgIHJldHVybiBhY3R1YWxUeXBlID09PSB0eXBlO1xufVxuZnVuY3Rpb24gZ2V0U2FuaXRpemF0aW9uQnlwYXNzVHlwZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFNhZmVWYWx1ZUltcGwgJiYgdmFsdWUuZ2V0VHlwZU5hbWUoKSB8fCBudWxsO1xufVxuLyoqXG4gKiBNYXJrIGBodG1sYCBzdHJpbmcgYXMgdHJ1c3RlZC5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHdyYXBzIHRoZSB0cnVzdGVkIHN0cmluZyBpbiBgU3RyaW5nYCBhbmQgYnJhbmRzIGl0IGluIGEgd2F5IHdoaWNoIG1ha2VzIGl0XG4gKiByZWNvZ25pemFibGUgdG8ge0BsaW5rIGh0bWxTYW5pdGl6ZXJ9IHRvIGJlIHRydXN0ZWQgaW1wbGljaXRseS5cbiAqXG4gKiBAcGFyYW0gdHJ1c3RlZEh0bWwgYGh0bWxgIHN0cmluZyB3aGljaCBuZWVkcyB0byBiZSBpbXBsaWNpdGx5IHRydXN0ZWQuXG4gKiBAcmV0dXJucyBhIGBodG1sYCB3aGljaCBoYXMgYmVlbiBicmFuZGVkIHRvIGJlIGltcGxpY2l0bHkgdHJ1c3RlZC5cbiAqL1xuZnVuY3Rpb24gYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RIdG1sKHRydXN0ZWRIdG1sKSB7XG4gICAgcmV0dXJuIG5ldyBTYWZlSHRtbEltcGwodHJ1c3RlZEh0bWwpO1xufVxuLyoqXG4gKiBNYXJrIGBzdHlsZWAgc3RyaW5nIGFzIHRydXN0ZWQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3cmFwcyB0aGUgdHJ1c3RlZCBzdHJpbmcgaW4gYFN0cmluZ2AgYW5kIGJyYW5kcyBpdCBpbiBhIHdheSB3aGljaCBtYWtlcyBpdFxuICogcmVjb2duaXphYmxlIHRvIHtAbGluayBzdHlsZVNhbml0aXplcn0gdG8gYmUgdHJ1c3RlZCBpbXBsaWNpdGx5LlxuICpcbiAqIEBwYXJhbSB0cnVzdGVkU3R5bGUgYHN0eWxlYCBzdHJpbmcgd2hpY2ggbmVlZHMgdG8gYmUgaW1wbGljaXRseSB0cnVzdGVkLlxuICogQHJldHVybnMgYSBgc3R5bGVgIGhpY2ggaGFzIGJlZW4gYnJhbmRlZCB0byBiZSBpbXBsaWNpdGx5IHRydXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGJ5cGFzc1Nhbml0aXphdGlvblRydXN0U3R5bGUodHJ1c3RlZFN0eWxlKSB7XG4gICAgcmV0dXJuIG5ldyBTYWZlU3R5bGVJbXBsKHRydXN0ZWRTdHlsZSk7XG59XG4vKipcbiAqIE1hcmsgYHNjcmlwdGAgc3RyaW5nIGFzIHRydXN0ZWQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3cmFwcyB0aGUgdHJ1c3RlZCBzdHJpbmcgaW4gYFN0cmluZ2AgYW5kIGJyYW5kcyBpdCBpbiBhIHdheSB3aGljaCBtYWtlcyBpdFxuICogcmVjb2duaXphYmxlIHRvIHtAbGluayBzY3JpcHRTYW5pdGl6ZXJ9IHRvIGJlIHRydXN0ZWQgaW1wbGljaXRseS5cbiAqXG4gKiBAcGFyYW0gdHJ1c3RlZFNjcmlwdCBgc2NyaXB0YCBzdHJpbmcgd2hpY2ggbmVlZHMgdG8gYmUgaW1wbGljaXRseSB0cnVzdGVkLlxuICogQHJldHVybnMgYSBgc2NyaXB0YCB3aGljaCBoYXMgYmVlbiBicmFuZGVkIHRvIGJlIGltcGxpY2l0bHkgdHJ1c3RlZC5cbiAqL1xuZnVuY3Rpb24gYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RTY3JpcHQodHJ1c3RlZFNjcmlwdCkge1xuICAgIHJldHVybiBuZXcgU2FmZVNjcmlwdEltcGwodHJ1c3RlZFNjcmlwdCk7XG59XG4vKipcbiAqIE1hcmsgYHVybGAgc3RyaW5nIGFzIHRydXN0ZWQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3cmFwcyB0aGUgdHJ1c3RlZCBzdHJpbmcgaW4gYFN0cmluZ2AgYW5kIGJyYW5kcyBpdCBpbiBhIHdheSB3aGljaCBtYWtlcyBpdFxuICogcmVjb2duaXphYmxlIHRvIHtAbGluayB1cmxTYW5pdGl6ZXJ9IHRvIGJlIHRydXN0ZWQgaW1wbGljaXRseS5cbiAqXG4gKiBAcGFyYW0gdHJ1c3RlZFVybCBgdXJsYCBzdHJpbmcgd2hpY2ggbmVlZHMgdG8gYmUgaW1wbGljaXRseSB0cnVzdGVkLlxuICogQHJldHVybnMgYSBgdXJsYCAgd2hpY2ggaGFzIGJlZW4gYnJhbmRlZCB0byBiZSBpbXBsaWNpdGx5IHRydXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIGJ5cGFzc1Nhbml0aXphdGlvblRydXN0VXJsKHRydXN0ZWRVcmwpIHtcbiAgICByZXR1cm4gbmV3IFNhZmVVcmxJbXBsKHRydXN0ZWRVcmwpO1xufVxuLyoqXG4gKiBNYXJrIGB1cmxgIHN0cmluZyBhcyB0cnVzdGVkLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gd3JhcHMgdGhlIHRydXN0ZWQgc3RyaW5nIGluIGBTdHJpbmdgIGFuZCBicmFuZHMgaXQgaW4gYSB3YXkgd2hpY2ggbWFrZXMgaXRcbiAqIHJlY29nbml6YWJsZSB0byB7QGxpbmsgcmVzb3VyY2VVcmxTYW5pdGl6ZXJ9IHRvIGJlIHRydXN0ZWQgaW1wbGljaXRseS5cbiAqXG4gKiBAcGFyYW0gdHJ1c3RlZFJlc291cmNlVXJsIGB1cmxgIHN0cmluZyB3aGljaCBuZWVkcyB0byBiZSBpbXBsaWNpdGx5IHRydXN0ZWQuXG4gKiBAcmV0dXJucyBhIGB1cmxgIHdoaWNoIGhhcyBiZWVuIGJyYW5kZWQgdG8gYmUgaW1wbGljaXRseSB0cnVzdGVkLlxuICovXG5mdW5jdGlvbiBieXBhc3NTYW5pdGl6YXRpb25UcnVzdFJlc291cmNlVXJsKHRydXN0ZWRSZXNvdXJjZVVybCkge1xuICAgIHJldHVybiBuZXcgU2FmZVJlc291cmNlVXJsSW1wbCh0cnVzdGVkUmVzb3VyY2VVcmwpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVGhpcyBoZWxwZXIgaXMgdXNlZCB0byBnZXQgaG9sZCBvZiBhbiBpbmVydCB0cmVlIG9mIERPTSBlbGVtZW50cyBjb250YWluaW5nIGRpcnR5IEhUTUxcbiAqIHRoYXQgbmVlZHMgc2FuaXRpemluZy5cbiAqIERlcGVuZGluZyB1cG9uIGJyb3dzZXIgc3VwcG9ydCB3ZSB1c2Ugb25lIG9mIHR3byBzdHJhdGVnaWVzIGZvciBkb2luZyB0aGlzLlxuICogRGVmYXVsdDogRE9NUGFyc2VyIHN0cmF0ZWd5XG4gKiBGYWxsYmFjazogSW5lcnREb2N1bWVudCBzdHJhdGVneVxuICovXG5mdW5jdGlvbiBnZXRJbmVydEJvZHlIZWxwZXIoZGVmYXVsdERvYykge1xuICAgIGNvbnN0IGluZXJ0RG9jdW1lbnRIZWxwZXIgPSBuZXcgSW5lcnREb2N1bWVudEhlbHBlcihkZWZhdWx0RG9jKTtcbiAgICByZXR1cm4gaXNET01QYXJzZXJBdmFpbGFibGUoKSA/IG5ldyBET01QYXJzZXJIZWxwZXIoaW5lcnREb2N1bWVudEhlbHBlcikgOiBpbmVydERvY3VtZW50SGVscGVyO1xufVxuLyoqXG4gKiBVc2VzIERPTVBhcnNlciB0byBjcmVhdGUgYW5kIGZpbGwgYW4gaW5lcnQgYm9keSBlbGVtZW50LlxuICogVGhpcyBpcyB0aGUgZGVmYXVsdCBzdHJhdGVneSB1c2VkIGluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBpdC5cbiAqL1xuY2xhc3MgRE9NUGFyc2VySGVscGVyIHtcbiAgICBjb25zdHJ1Y3RvcihpbmVydERvY3VtZW50SGVscGVyKSB7XG4gICAgICAgIHRoaXMuaW5lcnREb2N1bWVudEhlbHBlciA9IGluZXJ0RG9jdW1lbnRIZWxwZXI7XG4gICAgfVxuICAgIGdldEluZXJ0Qm9keUVsZW1lbnQoaHRtbCkge1xuICAgICAgICAvLyBXZSBhZGQgdGhlc2UgZXh0cmEgZWxlbWVudHMgdG8gZW5zdXJlIHRoYXQgdGhlIHJlc3Qgb2YgdGhlIGNvbnRlbnQgaXMgcGFyc2VkIGFzIGV4cGVjdGVkXG4gICAgICAgIC8vIGUuZy4gbGVhZGluZyB3aGl0ZXNwYWNlIGlzIG1haW50YWluZWQgYW5kIHRhZ3MgbGlrZSBgPG1ldGE+YCBkbyBub3QgZ2V0IGhvaXN0ZWQgdG8gdGhlXG4gICAgICAgIC8vIGA8aGVhZD5gIHRhZy4gTm90ZSB0aGF0IHRoZSBgPGJvZHk+YCB0YWcgaXMgY2xvc2VkIGltcGxpY2l0bHkgdG8gcHJldmVudCB1bmNsb3NlZCB0YWdzXG4gICAgICAgIC8vIGluIGBodG1sYCBmcm9tIGNvbnN1bWluZyB0aGUgb3RoZXJ3aXNlIGV4cGxpY2l0IGA8L2JvZHk+YCB0YWcuXG4gICAgICAgIGh0bWwgPSAnPGJvZHk+PHJlbW92ZT48L3JlbW92ZT4nICsgaHRtbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBuZXcgd2luZG93LkRPTVBhcnNlcigpXG4gICAgICAgICAgICAgICAgLnBhcnNlRnJvbVN0cmluZyh0cnVzdGVkSFRNTEZyb21TdHJpbmcoaHRtbCksICd0ZXh0L2h0bWwnKVxuICAgICAgICAgICAgICAgIC5ib2R5O1xuICAgICAgICAgICAgaWYgKGJvZHkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBzb21lIGJyb3dzZXJzIChlLmcuIE1vemlsbGEvNS4wIGlQYWQgQXBwbGVXZWJLaXQgTW9iaWxlKSB0aGUgYGJvZHlgIHByb3BlcnR5IG9ubHlcbiAgICAgICAgICAgICAgICAvLyBiZWNvbWVzIGF2YWlsYWJsZSBpbiB0aGUgZm9sbG93aW5nIHRpY2sgb2YgdGhlIEpTIGVuZ2luZS4gSW4gdGhhdCBjYXNlIHdlIGZhbGwgYmFjayB0b1xuICAgICAgICAgICAgICAgIC8vIHRoZSBgaW5lcnREb2N1bWVudEhlbHBlcmAgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmVydERvY3VtZW50SGVscGVyLmdldEluZXJ0Qm9keUVsZW1lbnQoaHRtbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib2R5LnJlbW92ZUNoaWxkKGJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICByZXR1cm4gYm9keTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogVXNlIGFuIEhUTUw1IGB0ZW1wbGF0ZWAgZWxlbWVudCwgaWYgc3VwcG9ydGVkLCBvciBhbiBpbmVydCBib2R5IGVsZW1lbnQgY3JlYXRlZCB2aWFcbiAqIGBjcmVhdGVIdG1sRG9jdW1lbnRgIHRvIGNyZWF0ZSBhbmQgZmlsbCBhbiBpbmVydCBET00gZWxlbWVudC5cbiAqIFRoaXMgaXMgdGhlIGZhbGxiYWNrIHN0cmF0ZWd5IGlmIHRoZSBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgRE9NUGFyc2VyLlxuICovXG5jbGFzcyBJbmVydERvY3VtZW50SGVscGVyIHtcbiAgICBjb25zdHJ1Y3RvcihkZWZhdWx0RG9jKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdERvYyA9IGRlZmF1bHREb2M7XG4gICAgICAgIHRoaXMuaW5lcnREb2N1bWVudCA9IHRoaXMuZGVmYXVsdERvYy5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoJ3Nhbml0aXphdGlvbi1pbmVydCcpO1xuICAgICAgICBpZiAodGhpcy5pbmVydERvY3VtZW50LmJvZHkgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gdXN1YWxseSB0aGVyZSBzaG91bGQgYmUgb25seSBvbmUgYm9keSBlbGVtZW50IGluIHRoZSBkb2N1bWVudCwgYnV0IElFIGRvZXNuJ3QgaGF2ZSBhbnksIHNvXG4gICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGNyZWF0ZSBvbmUuXG4gICAgICAgICAgICBjb25zdCBpbmVydEh0bWwgPSB0aGlzLmluZXJ0RG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHRtbCcpO1xuICAgICAgICAgICAgdGhpcy5pbmVydERvY3VtZW50LmFwcGVuZENoaWxkKGluZXJ0SHRtbCk7XG4gICAgICAgICAgICBjb25zdCBpbmVydEJvZHlFbGVtZW50ID0gdGhpcy5pbmVydERvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTtcbiAgICAgICAgICAgIGluZXJ0SHRtbC5hcHBlbmRDaGlsZChpbmVydEJvZHlFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRJbmVydEJvZHlFbGVtZW50KGh0bWwpIHtcbiAgICAgICAgLy8gUHJlZmVyIHVzaW5nIDx0ZW1wbGF0ZT4gZWxlbWVudCBpZiBzdXBwb3J0ZWQuXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRWwgPSB0aGlzLmluZXJ0RG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgICAgaWYgKCdjb250ZW50JyBpbiB0ZW1wbGF0ZUVsKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZUVsLmlubmVySFRNTCA9IHRydXN0ZWRIVE1MRnJvbVN0cmluZyhodG1sKTtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZUVsO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vdGUgdGhhdCBwcmV2aW91c2x5IHdlIHVzZWQgdG8gZG8gc29tZXRoaW5nIGxpa2UgYHRoaXMuaW5lcnREb2N1bWVudC5ib2R5LmlubmVySFRNTCA9IGh0bWxgXG4gICAgICAgIC8vIGFuZCB3ZSByZXR1cm5lZCB0aGUgaW5lcnQgYGJvZHlgIG5vZGUuIFRoaXMgd2FzIGNoYW5nZWQsIGJlY2F1c2UgSUUgc2VlbXMgdG8gdHJlYXQgc2V0dGluZ1xuICAgICAgICAvLyBgaW5uZXJIVE1MYCBvbiBhbiBpbnNlcnRlZCBlbGVtZW50IGRpZmZlcmVudGx5LCBjb21wYXJlZCB0byBvbmUgdGhhdCBoYXNuJ3QgYmVlbiBpbnNlcnRlZFxuICAgICAgICAvLyB5ZXQuIEluIHBhcnRpY3VsYXIsIElFIGFwcGVhcnMgdG8gc3BsaXQgc29tZSBvZiB0aGUgdGV4dCBpbnRvIG11bHRpcGxlIHRleHQgbm9kZXMgcmF0aGVyXG4gICAgICAgIC8vIHRoYW4ga2VlcGluZyB0aGVtIGluIGEgc2luZ2xlIG9uZSB3aGljaCBlbmRzIHVwIG1lc3Npbmcgd2l0aCBJdnkncyBpMThuIHBhcnNpbmcgZnVydGhlclxuICAgICAgICAvLyBkb3duIHRoZSBsaW5lLiBUaGlzIGhhcyBiZWVuIHdvcmtlZCBhcm91bmQgYnkgY3JlYXRpbmcgYSBuZXcgaW5lcnQgYGJvZHlgIGFuZCB1c2luZyBpdCBhc1xuICAgICAgICAvLyB0aGUgcm9vdCBub2RlIGluIHdoaWNoIHdlIGluc2VydCB0aGUgSFRNTC5cbiAgICAgICAgY29uc3QgaW5lcnRCb2R5ID0gdGhpcy5pbmVydERvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JvZHknKTtcbiAgICAgICAgaW5lcnRCb2R5LmlubmVySFRNTCA9IHRydXN0ZWRIVE1MRnJvbVN0cmluZyhodG1sKTtcbiAgICAgICAgLy8gU3VwcG9ydDogSUUgMTEgb25seVxuICAgICAgICAvLyBzdHJpcCBjdXN0b20tbmFtZXNwYWNlZCBhdHRyaWJ1dGVzIG9uIElFPD0xMVxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0RG9jLmRvY3VtZW50TW9kZSkge1xuICAgICAgICAgICAgdGhpcy5zdHJpcEN1c3RvbU5zQXR0cnMoaW5lcnRCb2R5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5lcnRCb2R5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGVuIElFMTEgY29tZXMgYWNyb3NzIGFuIHVua25vd24gbmFtZXNwYWNlZCBhdHRyaWJ1dGUgZS5nLiAneGxpbms6Zm9vJyBpdCBhZGRzICd4bWxuczpuczEnXG4gICAgICogYXR0cmlidXRlIHRvIGRlY2xhcmUgbnMxIG5hbWVzcGFjZSBhbmQgcHJlZml4ZXMgdGhlIGF0dHJpYnV0ZSB3aXRoICduczEnIChlLmcuXG4gICAgICogJ25zMTp4bGluazpmb28nKS5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdW5kZXNpcmFibGUgc2luY2Ugd2UgZG9uJ3Qgd2FudCB0byBhbGxvdyBhbnkgb2YgdGhlc2UgY3VzdG9tIGF0dHJpYnV0ZXMuIFRoaXMgbWV0aG9kXG4gICAgICogc3RyaXBzIHRoZW0gYWxsLlxuICAgICAqL1xuICAgIHN0cmlwQ3VzdG9tTnNBdHRycyhlbCkge1xuICAgICAgICBjb25zdCBlbEF0dHJzID0gZWwuYXR0cmlidXRlcztcbiAgICAgICAgLy8gbG9vcCBiYWNrd2FyZHMgc28gdGhhdCB3ZSBjYW4gc3VwcG9ydCByZW1vdmFscy5cbiAgICAgICAgZm9yIChsZXQgaSA9IGVsQXR0cnMubGVuZ3RoIC0gMTsgMCA8IGk7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgYXR0cmliID0gZWxBdHRycy5pdGVtKGkpO1xuICAgICAgICAgICAgY29uc3QgYXR0ck5hbWUgPSBhdHRyaWIubmFtZTtcbiAgICAgICAgICAgIGlmIChhdHRyTmFtZSA9PT0gJ3htbG5zOm5zMScgfHwgYXR0ck5hbWUuaW5kZXhPZignbnMxOicpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHJOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgY2hpbGROb2RlID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgICAgd2hpbGUgKGNoaWxkTm9kZSkge1xuICAgICAgICAgICAgaWYgKGNoaWxkTm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpXG4gICAgICAgICAgICAgICAgdGhpcy5zdHJpcEN1c3RvbU5zQXR0cnMoY2hpbGROb2RlKTtcbiAgICAgICAgICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogV2UgbmVlZCB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgRE9NUGFyc2VyIGV4aXN0cyBpbiB0aGUgZ2xvYmFsIGNvbnRleHQgYW5kXG4gKiBzdXBwb3J0cyBwYXJzaW5nIEhUTUw7IEhUTUwgcGFyc2luZyBzdXBwb3J0IGlzIG5vdCBhcyB3aWRlIGFzIG90aGVyIGZvcm1hdHMsIHNlZVxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0RPTVBhcnNlciNCcm93c2VyX2NvbXBhdGliaWxpdHkuXG4gKlxuICogQHN1cHByZXNzIHt1c2VsZXNzQ29kZX1cbiAqL1xuZnVuY3Rpb24gaXNET01QYXJzZXJBdmFpbGFibGUoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuICEhbmV3IHdpbmRvdy5ET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcodHJ1c3RlZEhUTUxGcm9tU3RyaW5nKCcnKSwgJ3RleHQvaHRtbCcpO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBBIHBhdHRlcm4gdGhhdCByZWNvZ25pemVzIGEgY29tbW9ubHkgdXNlZnVsIHN1YnNldCBvZiBVUkxzIHRoYXQgYXJlIHNhZmUuXG4gKlxuICogVGhpcyByZWd1bGFyIGV4cHJlc3Npb24gbWF0Y2hlcyBhIHN1YnNldCBvZiBVUkxzIHRoYXQgd2lsbCBub3QgY2F1c2Ugc2NyaXB0XG4gKiBleGVjdXRpb24gaWYgdXNlZCBpbiBVUkwgY29udGV4dCB3aXRoaW4gYSBIVE1MIGRvY3VtZW50LiBTcGVjaWZpY2FsbHksIHRoaXNcbiAqIHJlZ3VsYXIgZXhwcmVzc2lvbiBtYXRjaGVzIGlmIChjb21tZW50IGZyb20gaGVyZSBvbiBhbmQgcmVnZXggY29waWVkIGZyb21cbiAqIFNveSdzIEVzY2FwaW5nQ29udmVudGlvbnMpOlxuICogKDEpIEVpdGhlciBhbiBhbGxvd2VkIHByb3RvY29sIChodHRwLCBodHRwcywgbWFpbHRvIG9yIGZ0cCkuXG4gKiAoMikgb3Igbm8gcHJvdG9jb2wuICBBIHByb3RvY29sIG11c3QgYmUgZm9sbG93ZWQgYnkgYSBjb2xvbi4gVGhlIGJlbG93XG4gKiAgICAgYWxsb3dzIHRoYXQgYnkgYWxsb3dpbmcgY29sb25zIG9ubHkgYWZ0ZXIgb25lIG9mIHRoZSBjaGFyYWN0ZXJzIFsvPyNdLlxuICogICAgIEEgY29sb24gYWZ0ZXIgYSBoYXNoICgjKSBtdXN0IGJlIGluIHRoZSBmcmFnbWVudC5cbiAqICAgICBPdGhlcndpc2UsIGEgY29sb24gYWZ0ZXIgYSAoPykgbXVzdCBiZSBpbiBhIHF1ZXJ5LlxuICogICAgIE90aGVyd2lzZSwgYSBjb2xvbiBhZnRlciBhIHNpbmdsZSBzb2xpZHVzICgvKSBtdXN0IGJlIGluIGEgcGF0aC5cbiAqICAgICBPdGhlcndpc2UsIGEgY29sb24gYWZ0ZXIgYSBkb3VibGUgc29saWR1cyAoLy8pIG11c3QgYmUgaW4gdGhlIGF1dGhvcml0eVxuICogICAgIChiZWZvcmUgcG9ydCkuXG4gKlxuICogVGhlIHBhdHRlcm4gZGlzYWxsb3dzICYsIHVzZWQgaW4gSFRNTCBlbnRpdHkgZGVjbGFyYXRpb25zIGJlZm9yZVxuICogb25lIG9mIHRoZSBjaGFyYWN0ZXJzIGluIFsvPyNdLiBUaGlzIGRpc2FsbG93cyBIVE1MIGVudGl0aWVzIHVzZWQgaW4gdGhlXG4gKiBwcm90b2NvbCBuYW1lLCB3aGljaCBzaG91bGQgbmV2ZXIgaGFwcGVuLCBlLmcuIFwiaCYjMTE2O3RwXCIgZm9yIFwiaHR0cFwiLlxuICogSXQgYWxzbyBkaXNhbGxvd3MgSFRNTCBlbnRpdGllcyBpbiB0aGUgZmlyc3QgcGF0aCBwYXJ0IG9mIGEgcmVsYXRpdmUgcGF0aCxcbiAqIGUuZy4gXCJmb28mbHQ7YmFyL2JhelwiLiAgT3VyIGV4aXN0aW5nIGVzY2FwaW5nIGZ1bmN0aW9ucyBzaG91bGQgbm90IHByb2R1Y2VcbiAqIHRoYXQuIE1vcmUgaW1wb3J0YW50bHksIGl0IGRpc2FsbG93cyBtYXNraW5nIG9mIGEgY29sb24sXG4gKiBlLmcuIFwiamF2YXNjcmlwdCYjNTg7Li4uXCIuXG4gKlxuICogVGhpcyByZWd1bGFyIGV4cHJlc3Npb24gd2FzIHRha2VuIGZyb20gdGhlIENsb3N1cmUgc2FuaXRpemF0aW9uIGxpYnJhcnkuXG4gKi9cbmNvbnN0IFNBRkVfVVJMX1BBVFRFUk4gPSAvXig/Oig/Omh0dHBzP3xtYWlsdG98ZnRwfHRlbHxmaWxlfHNtcyk6fFteJjovPyNdKig/OlsvPyNdfCQpKS9naTtcbi8qIEEgcGF0dGVybiB0aGF0IG1hdGNoZXMgc2FmZSBzcmNzZXQgdmFsdWVzICovXG5jb25zdCBTQUZFX1NSQ1NFVF9QQVRURVJOID0gL14oPzooPzpodHRwcz98ZmlsZSk6fFteJjovPyNdKig/OlsvPyNdfCQpKS9naTtcbi8qKiBBIHBhdHRlcm4gdGhhdCBtYXRjaGVzIHNhZmUgZGF0YSBVUkxzLiBPbmx5IG1hdGNoZXMgaW1hZ2UsIHZpZGVvIGFuZCBhdWRpbyB0eXBlcy4gKi9cbmNvbnN0IERBVEFfVVJMX1BBVFRFUk4gPSAvXmRhdGE6KD86aW1hZ2VcXC8oPzpibXB8Z2lmfGpwZWd8anBnfHBuZ3x0aWZmfHdlYnApfHZpZGVvXFwvKD86bXBlZ3xtcDR8b2dnfHdlYm0pfGF1ZGlvXFwvKD86bXAzfG9nYXxvZ2d8b3B1cykpO2Jhc2U2NCxbYS16MC05K1xcL10rPSokL2k7XG5mdW5jdGlvbiBfc2FuaXRpemVVcmwodXJsKSB7XG4gICAgdXJsID0gU3RyaW5nKHVybCk7XG4gICAgaWYgKHVybC5tYXRjaChTQUZFX1VSTF9QQVRURVJOKSB8fCB1cmwubWF0Y2goREFUQV9VUkxfUEFUVEVSTikpXG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgaWYgKHR5cGVvZiBuZ0Rldk1vZGUgPT09ICd1bmRlZmluZWQnIHx8IG5nRGV2TW9kZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYFdBUk5JTkc6IHNhbml0aXppbmcgdW5zYWZlIFVSTCB2YWx1ZSAke3VybH0gKHNlZSBodHRwczovL2cuY28vbmcvc2VjdXJpdHkjeHNzKWApO1xuICAgIH1cbiAgICByZXR1cm4gJ3Vuc2FmZTonICsgdXJsO1xufVxuZnVuY3Rpb24gc2FuaXRpemVTcmNzZXQoc3Jjc2V0KSB7XG4gICAgc3Jjc2V0ID0gU3RyaW5nKHNyY3NldCk7XG4gICAgcmV0dXJuIHNyY3NldC5zcGxpdCgnLCcpLm1hcCgoc3Jjc2V0KSA9PiBfc2FuaXRpemVVcmwoc3Jjc2V0LnRyaW0oKSkpLmpvaW4oJywgJyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gdGFnU2V0KHRhZ3MpIHtcbiAgICBjb25zdCByZXMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgdGFncy5zcGxpdCgnLCcpKVxuICAgICAgICByZXNbdF0gPSB0cnVlO1xuICAgIHJldHVybiByZXM7XG59XG5mdW5jdGlvbiBtZXJnZSguLi5zZXRzKSB7XG4gICAgY29uc3QgcmVzID0ge307XG4gICAgZm9yIChjb25zdCBzIG9mIHNldHMpIHtcbiAgICAgICAgZm9yIChjb25zdCB2IGluIHMpIHtcbiAgICAgICAgICAgIGlmIChzLmhhc093blByb3BlcnR5KHYpKVxuICAgICAgICAgICAgICAgIHJlc1t2XSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIEdvb2Qgc291cmNlIG9mIGluZm8gYWJvdXQgZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXNcbi8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvI3NlbWFudGljc1xuLy8gaHR0cHM6Ly9zaW1vbi5odG1sNS5vcmcvaHRtbC1lbGVtZW50c1xuLy8gU2FmZSBWb2lkIEVsZW1lbnRzIC0gSFRNTDVcbi8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvI3ZvaWQtZWxlbWVudHNcbmNvbnN0IFZPSURfRUxFTUVOVFMgPSB0YWdTZXQoJ2FyZWEsYnIsY29sLGhyLGltZyx3YnInKTtcbi8vIEVsZW1lbnRzIHRoYXQgeW91IGNhbiwgaW50ZW50aW9uYWxseSwgbGVhdmUgb3BlbiAoYW5kIHdoaWNoIGNsb3NlIHRoZW1zZWx2ZXMpXG4vLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNvcHRpb25hbC10YWdzXG5jb25zdCBPUFRJT05BTF9FTkRfVEFHX0JMT0NLX0VMRU1FTlRTID0gdGFnU2V0KCdjb2xncm91cCxkZCxkdCxsaSxwLHRib2R5LHRkLHRmb290LHRoLHRoZWFkLHRyJyk7XG5jb25zdCBPUFRJT05BTF9FTkRfVEFHX0lOTElORV9FTEVNRU5UUyA9IHRhZ1NldCgncnAscnQnKTtcbmNvbnN0IE9QVElPTkFMX0VORF9UQUdfRUxFTUVOVFMgPSBtZXJnZShPUFRJT05BTF9FTkRfVEFHX0lOTElORV9FTEVNRU5UUywgT1BUSU9OQUxfRU5EX1RBR19CTE9DS19FTEVNRU5UUyk7XG4vLyBTYWZlIEJsb2NrIEVsZW1lbnRzIC0gSFRNTDVcbmNvbnN0IEJMT0NLX0VMRU1FTlRTID0gbWVyZ2UoT1BUSU9OQUxfRU5EX1RBR19CTE9DS19FTEVNRU5UUywgdGFnU2V0KCdhZGRyZXNzLGFydGljbGUsJyArXG4gICAgJ2FzaWRlLGJsb2NrcXVvdGUsY2FwdGlvbixjZW50ZXIsZGVsLGRldGFpbHMsZGlhbG9nLGRpcixkaXYsZGwsZmlndXJlLGZpZ2NhcHRpb24sZm9vdGVyLGgxLGgyLGgzLGg0LGg1LCcgK1xuICAgICdoNixoZWFkZXIsaGdyb3VwLGhyLGlucyxtYWluLG1hcCxtZW51LG5hdixvbCxwcmUsc2VjdGlvbixzdW1tYXJ5LHRhYmxlLHVsJykpO1xuLy8gSW5saW5lIEVsZW1lbnRzIC0gSFRNTDVcbmNvbnN0IElOTElORV9FTEVNRU5UUyA9IG1lcmdlKE9QVElPTkFMX0VORF9UQUdfSU5MSU5FX0VMRU1FTlRTLCB0YWdTZXQoJ2EsYWJicixhY3JvbnltLGF1ZGlvLGIsJyArXG4gICAgJ2JkaSxiZG8sYmlnLGJyLGNpdGUsY29kZSxkZWwsZGZuLGVtLGZvbnQsaSxpbWcsaW5zLGtiZCxsYWJlbCxtYXAsbWFyayxwaWN0dXJlLHEscnVieSxycCxydCxzLCcgK1xuICAgICdzYW1wLHNtYWxsLHNvdXJjZSxzcGFuLHN0cmlrZSxzdHJvbmcsc3ViLHN1cCx0aW1lLHRyYWNrLHR0LHUsdmFyLHZpZGVvJykpO1xuY29uc3QgVkFMSURfRUxFTUVOVFMgPSBtZXJnZShWT0lEX0VMRU1FTlRTLCBCTE9DS19FTEVNRU5UUywgSU5MSU5FX0VMRU1FTlRTLCBPUFRJT05BTF9FTkRfVEFHX0VMRU1FTlRTKTtcbi8vIEF0dHJpYnV0ZXMgdGhhdCBoYXZlIGhyZWYgYW5kIGhlbmNlIG5lZWQgdG8gYmUgc2FuaXRpemVkXG5jb25zdCBVUklfQVRUUlMgPSB0YWdTZXQoJ2JhY2tncm91bmQsY2l0ZSxocmVmLGl0ZW10eXBlLGxvbmdkZXNjLHBvc3RlcixzcmMseGxpbms6aHJlZicpO1xuLy8gQXR0cmlidXRlcyB0aGF0IGhhdmUgc3BlY2lhbCBocmVmIHNldCBoZW5jZSBuZWVkIHRvIGJlIHNhbml0aXplZFxuY29uc3QgU1JDU0VUX0FUVFJTID0gdGFnU2V0KCdzcmNzZXQnKTtcbmNvbnN0IEhUTUxfQVRUUlMgPSB0YWdTZXQoJ2FiYnIsYWNjZXNza2V5LGFsaWduLGFsdCxhdXRvcGxheSxheGlzLGJnY29sb3IsYm9yZGVyLGNlbGxwYWRkaW5nLGNlbGxzcGFjaW5nLGNsYXNzLGNsZWFyLGNvbG9yLGNvbHMsY29sc3BhbiwnICtcbiAgICAnY29tcGFjdCxjb250cm9scyxjb29yZHMsZGF0ZXRpbWUsZGVmYXVsdCxkaXIsZG93bmxvYWQsZmFjZSxoZWFkZXJzLGhlaWdodCxoaWRkZW4saHJlZmxhbmcsaHNwYWNlLCcgK1xuICAgICdpc21hcCxpdGVtc2NvcGUsaXRlbXByb3Asa2luZCxsYWJlbCxsYW5nLGxhbmd1YWdlLGxvb3AsbWVkaWEsbXV0ZWQsbm9ocmVmLG5vd3JhcCxvcGVuLHByZWxvYWQscmVsLHJldixyb2xlLHJvd3Mscm93c3BhbixydWxlcywnICtcbiAgICAnc2NvcGUsc2Nyb2xsaW5nLHNoYXBlLHNpemUsc2l6ZXMsc3BhbixzcmNsYW5nLHN0YXJ0LHN1bW1hcnksdGFiaW5kZXgsdGFyZ2V0LHRpdGxlLHRyYW5zbGF0ZSx0eXBlLHVzZW1hcCwnICtcbiAgICAndmFsaWduLHZhbHVlLHZzcGFjZSx3aWR0aCcpO1xuLy8gQWNjZXNzaWJpbGl0eSBhdHRyaWJ1dGVzIGFzIHBlciBXQUktQVJJQSAxLjEgKFczQyBXb3JraW5nIERyYWZ0IDE0IERlY2VtYmVyIDIwMTgpXG5jb25zdCBBUklBX0FUVFJTID0gdGFnU2V0KCdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQsYXJpYS1hdG9taWMsYXJpYS1hdXRvY29tcGxldGUsYXJpYS1idXN5LGFyaWEtY2hlY2tlZCxhcmlhLWNvbGNvdW50LGFyaWEtY29saW5kZXgsJyArXG4gICAgJ2FyaWEtY29sc3BhbixhcmlhLWNvbnRyb2xzLGFyaWEtY3VycmVudCxhcmlhLWRlc2NyaWJlZGJ5LGFyaWEtZGV0YWlscyxhcmlhLWRpc2FibGVkLGFyaWEtZHJvcGVmZmVjdCwnICtcbiAgICAnYXJpYS1lcnJvcm1lc3NhZ2UsYXJpYS1leHBhbmRlZCxhcmlhLWZsb3d0byxhcmlhLWdyYWJiZWQsYXJpYS1oYXNwb3B1cCxhcmlhLWhpZGRlbixhcmlhLWludmFsaWQsJyArXG4gICAgJ2FyaWEta2V5c2hvcnRjdXRzLGFyaWEtbGFiZWwsYXJpYS1sYWJlbGxlZGJ5LGFyaWEtbGV2ZWwsYXJpYS1saXZlLGFyaWEtbW9kYWwsYXJpYS1tdWx0aWxpbmUsJyArXG4gICAgJ2FyaWEtbXVsdGlzZWxlY3RhYmxlLGFyaWEtb3JpZW50YXRpb24sYXJpYS1vd25zLGFyaWEtcGxhY2Vob2xkZXIsYXJpYS1wb3NpbnNldCxhcmlhLXByZXNzZWQsYXJpYS1yZWFkb25seSwnICtcbiAgICAnYXJpYS1yZWxldmFudCxhcmlhLXJlcXVpcmVkLGFyaWEtcm9sZWRlc2NyaXB0aW9uLGFyaWEtcm93Y291bnQsYXJpYS1yb3dpbmRleCxhcmlhLXJvd3NwYW4sYXJpYS1zZWxlY3RlZCwnICtcbiAgICAnYXJpYS1zZXRzaXplLGFyaWEtc29ydCxhcmlhLXZhbHVlbWF4LGFyaWEtdmFsdWVtaW4sYXJpYS12YWx1ZW5vdyxhcmlhLXZhbHVldGV4dCcpO1xuLy8gTkI6IFRoaXMgY3VycmVudGx5IGNvbnNjaW91c2x5IGRvZXNuJ3Qgc3VwcG9ydCBTVkcuIFNWRyBzYW5pdGl6YXRpb24gaGFzIGhhZCBzZXZlcmFsIHNlY3VyaXR5XG4vLyBpc3N1ZXMgaW4gdGhlIHBhc3QsIHNvIGl0IHNlZW1zIHNhZmVyIHRvIGxlYXZlIGl0IG91dCBpZiBwb3NzaWJsZS4gSWYgc3VwcG9ydCBmb3IgYmluZGluZyBTVkcgdmlhXG4vLyBpbm5lckhUTUwgaXMgcmVxdWlyZWQsIFNWRyBhdHRyaWJ1dGVzIHNob3VsZCBiZSBhZGRlZCBoZXJlLlxuLy8gTkI6IFNhbml0aXphdGlvbiBkb2VzIG5vdCBhbGxvdyA8Zm9ybT4gZWxlbWVudHMgb3Igb3RoZXIgYWN0aXZlIGVsZW1lbnRzICg8YnV0dG9uPiBldGMpLiBUaG9zZVxuLy8gY2FuIGJlIHNhbml0aXplZCwgYnV0IHRoZXkgaW5jcmVhc2Ugc2VjdXJpdHkgc3VyZmFjZSBhcmVhIHdpdGhvdXQgYSBsZWdpdGltYXRlIHVzZSBjYXNlLCBzbyB0aGV5XG4vLyBhcmUgbGVmdCBvdXQgaGVyZS5cbmNvbnN0IFZBTElEX0FUVFJTID0gbWVyZ2UoVVJJX0FUVFJTLCBTUkNTRVRfQVRUUlMsIEhUTUxfQVRUUlMsIEFSSUFfQVRUUlMpO1xuLy8gRWxlbWVudHMgd2hvc2UgY29udGVudCBzaG91bGQgbm90IGJlIHRyYXZlcnNlZC9wcmVzZXJ2ZWQsIGlmIHRoZSBlbGVtZW50cyB0aGVtc2VsdmVzIGFyZSBpbnZhbGlkLlxuLy9cbi8vIFR5cGljYWxseSwgYDxpbnZhbGlkPlNvbWUgY29udGVudDwvaW52YWxpZD5gIHdvdWxkIHRyYXZlcnNlIChhbmQgaW4gdGhpcyBjYXNlIHByZXNlcnZlKVxuLy8gYFNvbWUgY29udGVudGAsIGJ1dCBzdHJpcCBgaW52YWxpZC1lbGVtZW50YCBvcGVuaW5nL2Nsb3NpbmcgdGFncy4gRm9yIHNvbWUgZWxlbWVudHMsIHRob3VnaCwgd2Vcbi8vIGRvbid0IHdhbnQgdG8gcHJlc2VydmUgdGhlIGNvbnRlbnQsIGlmIHRoZSBlbGVtZW50cyB0aGVtc2VsdmVzIGFyZSBnb2luZyB0byBiZSByZW1vdmVkLlxuY29uc3QgU0tJUF9UUkFWRVJTSU5HX0NPTlRFTlRfSUZfSU5WQUxJRF9FTEVNRU5UUyA9IHRhZ1NldCgnc2NyaXB0LHN0eWxlLHRlbXBsYXRlJyk7XG4vKipcbiAqIFNhbml0aXppbmdIdG1sU2VyaWFsaXplciBzZXJpYWxpemVzIGEgRE9NIGZyYWdtZW50LCBzdHJpcHBpbmcgb3V0IGFueSB1bnNhZmUgZWxlbWVudHMgYW5kIHVuc2FmZVxuICogYXR0cmlidXRlcy5cbiAqL1xuY2xhc3MgU2FuaXRpemluZ0h0bWxTZXJpYWxpemVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gRXhwbGljaXRseSB0cmFjayBpZiBzb21ldGhpbmcgd2FzIHN0cmlwcGVkLCB0byBhdm9pZCBhY2NpZGVudGFsbHkgd2FybmluZyBvZiBzYW5pdGl6YXRpb24ganVzdFxuICAgICAgICAvLyBiZWNhdXNlIGNoYXJhY3RlcnMgd2VyZSByZS1lbmNvZGVkLlxuICAgICAgICB0aGlzLnNhbml0aXplZFNvbWV0aGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmJ1ZiA9IFtdO1xuICAgIH1cbiAgICBzYW5pdGl6ZUNoaWxkcmVuKGVsKSB7XG4gICAgICAgIC8vIFRoaXMgY2Fubm90IHVzZSBhIFRyZWVXYWxrZXIsIGFzIGl0IGhhcyB0byBydW4gb24gQW5ndWxhcidzIHZhcmlvdXMgRE9NIGFkYXB0ZXJzLlxuICAgICAgICAvLyBIb3dldmVyIHRoaXMgY29kZSBuZXZlciBhY2Nlc3NlcyBwcm9wZXJ0aWVzIG9mZiBvZiBgZG9jdW1lbnRgIGJlZm9yZSBkZWxldGluZyBpdHMgY29udGVudHNcbiAgICAgICAgLy8gYWdhaW4sIHNvIGl0IHNob3VsZG4ndCBiZSB2dWxuZXJhYmxlIHRvIERPTSBjbG9iYmVyaW5nLlxuICAgICAgICBsZXQgY3VycmVudCA9IGVsLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGxldCB0cmF2ZXJzZUNvbnRlbnQgPSB0cnVlO1xuICAgICAgICB3aGlsZSAoY3VycmVudCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgdHJhdmVyc2VDb250ZW50ID0gdGhpcy5zdGFydEVsZW1lbnQoY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50Lm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhcnMoY3VycmVudC5ub2RlVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU3RyaXAgbm9uLWVsZW1lbnQsIG5vbi10ZXh0IG5vZGVzLlxuICAgICAgICAgICAgICAgIHRoaXMuc2FuaXRpemVkU29tZXRoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmF2ZXJzZUNvbnRlbnQgJiYgY3VycmVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gTGVhdmluZyB0aGUgZWxlbWVudC4gV2FsayB1cCBhbmQgdG8gdGhlIHJpZ2h0LCBjbG9zaW5nIHRhZ3MgYXMgd2UgZ28uXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRWxlbWVudChjdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSB0aGlzLmNoZWNrQ2xvYmJlcmVkRWxlbWVudChjdXJyZW50LCBjdXJyZW50Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB0aGlzLmNoZWNrQ2xvYmJlcmVkRWxlbWVudChjdXJyZW50LCBjdXJyZW50LnBhcmVudE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJ1Zi5qb2luKCcnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2FuaXRpemVzIGFuIG9wZW5pbmcgZWxlbWVudCB0YWcgKGlmIHZhbGlkKSBhbmQgcmV0dXJucyB3aGV0aGVyIHRoZSBlbGVtZW50J3MgY29udGVudHMgc2hvdWxkXG4gICAgICogYmUgdHJhdmVyc2VkLiBFbGVtZW50IGNvbnRlbnQgbXVzdCBhbHdheXMgYmUgdHJhdmVyc2VkIChldmVuIGlmIHRoZSBlbGVtZW50IGl0c2VsZiBpcyBub3RcbiAgICAgKiB2YWxpZC9zYWZlKSwgdW5sZXNzIHRoZSBlbGVtZW50IGlzIG9uZSBvZiBgU0tJUF9UUkFWRVJTSU5HX0NPTlRFTlRfSUZfSU5WQUxJRF9FTEVNRU5UU2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzYW5pdGl6ZS5cbiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIGVsZW1lbnQncyBjb250ZW50cyBzaG91bGQgYmUgdHJhdmVyc2VkLlxuICAgICAqL1xuICAgIHN0YXJ0RWxlbWVudChlbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmICghVkFMSURfRUxFTUVOVFMuaGFzT3duUHJvcGVydHkodGFnTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc2FuaXRpemVkU29tZXRoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiAhU0tJUF9UUkFWRVJTSU5HX0NPTlRFTlRfSUZfSU5WQUxJRF9FTEVNRU5UUy5oYXNPd25Qcm9wZXJ0eSh0YWdOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1Zi5wdXNoKCc8Jyk7XG4gICAgICAgIHRoaXMuYnVmLnB1c2godGFnTmFtZSk7XG4gICAgICAgIGNvbnN0IGVsQXR0cnMgPSBlbGVtZW50LmF0dHJpYnV0ZXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxBdHRycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZWxBdHRyID0gZWxBdHRycy5pdGVtKGkpO1xuICAgICAgICAgICAgY29uc3QgYXR0ck5hbWUgPSBlbEF0dHIubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IGxvd2VyID0gYXR0ck5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmICghVkFMSURfQVRUUlMuaGFzT3duUHJvcGVydHkobG93ZXIpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zYW5pdGl6ZWRTb21ldGhpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHZhbHVlID0gZWxBdHRyLnZhbHVlO1xuICAgICAgICAgICAgLy8gVE9ETyhtYXJ0aW5wcm9ic3QpOiBTcGVjaWFsIGNhc2UgaW1hZ2UgVVJJcyBmb3IgZGF0YTppbWFnZS8uLi5cbiAgICAgICAgICAgIGlmIChVUklfQVRUUlNbbG93ZXJdKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gX3Nhbml0aXplVXJsKHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChTUkNTRVRfQVRUUlNbbG93ZXJdKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gc2FuaXRpemVTcmNzZXQodmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5idWYucHVzaCgnICcsIGF0dHJOYW1lLCAnPVwiJywgZW5jb2RlRW50aXRpZXModmFsdWUpLCAnXCInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1Zi5wdXNoKCc+Jyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbmRFbGVtZW50KGN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgdGFnTmFtZSA9IGN1cnJlbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKFZBTElEX0VMRU1FTlRTLmhhc093blByb3BlcnR5KHRhZ05hbWUpICYmICFWT0lEX0VMRU1FTlRTLmhhc093blByb3BlcnR5KHRhZ05hbWUpKSB7XG4gICAgICAgICAgICB0aGlzLmJ1Zi5wdXNoKCc8LycpO1xuICAgICAgICAgICAgdGhpcy5idWYucHVzaCh0YWdOYW1lKTtcbiAgICAgICAgICAgIHRoaXMuYnVmLnB1c2goJz4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGFycyhjaGFycykge1xuICAgICAgICB0aGlzLmJ1Zi5wdXNoKGVuY29kZUVudGl0aWVzKGNoYXJzKSk7XG4gICAgfVxuICAgIGNoZWNrQ2xvYmJlcmVkRWxlbWVudChub2RlLCBuZXh0Tm9kZSkge1xuICAgICAgICBpZiAobmV4dE5vZGUgJiZcbiAgICAgICAgICAgIChub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG5leHROb2RlKSAmXG4gICAgICAgICAgICAgICAgTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9DT05UQUlORURfQlkpID09PSBOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0NPTlRBSU5FRF9CWSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2FuaXRpemUgaHRtbCBiZWNhdXNlIHRoZSBlbGVtZW50IGlzIGNsb2JiZXJlZDogJHtub2RlLm91dGVySFRNTH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV4dE5vZGU7XG4gICAgfVxufVxuLy8gUmVndWxhciBFeHByZXNzaW9ucyBmb3IgcGFyc2luZyB0YWdzIGFuZCBhdHRyaWJ1dGVzXG5jb25zdCBTVVJST0dBVEVfUEFJUl9SRUdFWFAgPSAvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGXS9nO1xuLy8gISB0byB+IGlzIHRoZSBBU0NJSSByYW5nZS5cbmNvbnN0IE5PTl9BTFBIQU5VTUVSSUNfUkVHRVhQID0gLyhbXlxcIy1+IHwhXSkvZztcbi8qKlxuICogRXNjYXBlcyBhbGwgcG90ZW50aWFsbHkgZGFuZ2Vyb3VzIGNoYXJhY3RlcnMsIHNvIHRoYXQgdGhlXG4gKiByZXN1bHRpbmcgc3RyaW5nIGNhbiBiZSBzYWZlbHkgaW5zZXJ0ZWQgaW50byBhdHRyaWJ1dGUgb3JcbiAqIGVsZW1lbnQgdGV4dC5cbiAqIEBwYXJhbSB2YWx1ZVxuICovXG5mdW5jdGlvbiBlbmNvZGVFbnRpdGllcyh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8mL2csICcmYW1wOycpXG4gICAgICAgIC5yZXBsYWNlKFNVUlJPR0FURV9QQUlSX1JFR0VYUCwgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgIGNvbnN0IGhpID0gbWF0Y2guY2hhckNvZGVBdCgwKTtcbiAgICAgICAgY29uc3QgbG93ID0gbWF0Y2guY2hhckNvZGVBdCgxKTtcbiAgICAgICAgcmV0dXJuICcmIycgKyAoKChoaSAtIDB4RDgwMCkgKiAweDQwMCkgKyAobG93IC0gMHhEQzAwKSArIDB4MTAwMDApICsgJzsnO1xuICAgIH0pXG4gICAgICAgIC5yZXBsYWNlKE5PTl9BTFBIQU5VTUVSSUNfUkVHRVhQLCBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuICcmIycgKyBtYXRjaC5jaGFyQ29kZUF0KDApICsgJzsnO1xuICAgIH0pXG4gICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcbn1cbmxldCBpbmVydEJvZHlIZWxwZXI7XG4vKipcbiAqIFNhbml0aXplcyB0aGUgZ2l2ZW4gdW5zYWZlLCB1bnRydXN0ZWQgSFRNTCBmcmFnbWVudCwgYW5kIHJldHVybnMgSFRNTCB0ZXh0IHRoYXQgaXMgc2FmZSB0byBhZGQgdG9cbiAqIHRoZSBET00gaW4gYSBicm93c2VyIGVudmlyb25tZW50LlxuICovXG5mdW5jdGlvbiBfc2FuaXRpemVIdG1sKGRlZmF1bHREb2MsIHVuc2FmZUh0bWxJbnB1dCkge1xuICAgIGxldCBpbmVydEJvZHlFbGVtZW50ID0gbnVsbDtcbiAgICB0cnkge1xuICAgICAgICBpbmVydEJvZHlIZWxwZXIgPSBpbmVydEJvZHlIZWxwZXIgfHwgZ2V0SW5lcnRCb2R5SGVscGVyKGRlZmF1bHREb2MpO1xuICAgICAgICAvLyBNYWtlIHN1cmUgdW5zYWZlSHRtbCBpcyBhY3R1YWxseSBhIHN0cmluZyAoVHlwZVNjcmlwdCB0eXBlcyBhcmUgbm90IGVuZm9yY2VkIGF0IHJ1bnRpbWUpLlxuICAgICAgICBsZXQgdW5zYWZlSHRtbCA9IHVuc2FmZUh0bWxJbnB1dCA/IFN0cmluZyh1bnNhZmVIdG1sSW5wdXQpIDogJyc7XG4gICAgICAgIGluZXJ0Qm9keUVsZW1lbnQgPSBpbmVydEJvZHlIZWxwZXIuZ2V0SW5lcnRCb2R5RWxlbWVudCh1bnNhZmVIdG1sKTtcbiAgICAgICAgLy8gbVhTUyBwcm90ZWN0aW9uLiBSZXBlYXRlZGx5IHBhcnNlIHRoZSBkb2N1bWVudCB0byBtYWtlIHN1cmUgaXQgc3RhYmlsaXplcywgc28gdGhhdCBhIGJyb3dzZXJcbiAgICAgICAgLy8gdHJ5aW5nIHRvIGF1dG8tY29ycmVjdCBpbmNvcnJlY3QgSFRNTCBjYW5ub3QgY2F1c2UgZm9ybWVybHkgaW5lcnQgSFRNTCB0byBiZWNvbWUgZGFuZ2Vyb3VzLlxuICAgICAgICBsZXQgbVhTU0F0dGVtcHRzID0gNTtcbiAgICAgICAgbGV0IHBhcnNlZEh0bWwgPSB1bnNhZmVIdG1sO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAobVhTU0F0dGVtcHRzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc2FuaXRpemUgaHRtbCBiZWNhdXNlIHRoZSBpbnB1dCBpcyB1bnN0YWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbVhTU0F0dGVtcHRzLS07XG4gICAgICAgICAgICB1bnNhZmVIdG1sID0gcGFyc2VkSHRtbDtcbiAgICAgICAgICAgIHBhcnNlZEh0bWwgPSBpbmVydEJvZHlFbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgICAgIGluZXJ0Qm9keUVsZW1lbnQgPSBpbmVydEJvZHlIZWxwZXIuZ2V0SW5lcnRCb2R5RWxlbWVudCh1bnNhZmVIdG1sKTtcbiAgICAgICAgfSB3aGlsZSAodW5zYWZlSHRtbCAhPT0gcGFyc2VkSHRtbCk7XG4gICAgICAgIGNvbnN0IHNhbml0aXplciA9IG5ldyBTYW5pdGl6aW5nSHRtbFNlcmlhbGl6ZXIoKTtcbiAgICAgICAgY29uc3Qgc2FmZUh0bWwgPSBzYW5pdGl6ZXIuc2FuaXRpemVDaGlsZHJlbihnZXRUZW1wbGF0ZUNvbnRlbnQoaW5lcnRCb2R5RWxlbWVudCkgfHwgaW5lcnRCb2R5RWxlbWVudCk7XG4gICAgICAgIGlmICgodHlwZW9mIG5nRGV2TW9kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmdEZXZNb2RlKSAmJiBzYW5pdGl6ZXIuc2FuaXRpemVkU29tZXRoaW5nKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1dBUk5JTkc6IHNhbml0aXppbmcgSFRNTCBzdHJpcHBlZCBzb21lIGNvbnRlbnQsIHNlZSBodHRwczovL2cuY28vbmcvc2VjdXJpdHkjeHNzJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydXN0ZWRIVE1MRnJvbVN0cmluZyhzYWZlSHRtbCk7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICAvLyBJbiBjYXNlIGFueXRoaW5nIGdvZXMgd3JvbmcsIGNsZWFyIG91dCBpbmVydEVsZW1lbnQgdG8gcmVzZXQgdGhlIGVudGlyZSBET00gc3RydWN0dXJlLlxuICAgICAgICBpZiAoaW5lcnRCb2R5RWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gZ2V0VGVtcGxhdGVDb250ZW50KGluZXJ0Qm9keUVsZW1lbnQpIHx8IGluZXJ0Qm9keUVsZW1lbnQ7XG4gICAgICAgICAgICB3aGlsZSAocGFyZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQocGFyZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0VGVtcGxhdGVDb250ZW50KGVsKSB7XG4gICAgcmV0dXJuICdjb250ZW50JyBpbiBlbCAvKiogTWljcm9zb2Z0L1R5cGVTY3JpcHQjMjE1MTcgKi8gJiYgaXNUZW1wbGF0ZUVsZW1lbnQoZWwpID9cbiAgICAgICAgZWwuY29udGVudCA6XG4gICAgICAgIG51bGw7XG59XG5mdW5jdGlvbiBpc1RlbXBsYXRlRWxlbWVudChlbCkge1xuICAgIHJldHVybiBlbC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgZWwubm9kZU5hbWUgPT09ICdURU1QTEFURSc7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBBIFNlY3VyaXR5Q29udGV4dCBtYXJrcyBhIGxvY2F0aW9uIHRoYXQgaGFzIGRhbmdlcm91cyBzZWN1cml0eSBpbXBsaWNhdGlvbnMsIGUuZy4gYSBET00gcHJvcGVydHlcbiAqIGxpa2UgYGlubmVySFRNTGAgdGhhdCBjb3VsZCBjYXVzZSBDcm9zcyBTaXRlIFNjcmlwdGluZyAoWFNTKSBzZWN1cml0eSBidWdzIHdoZW4gaW1wcm9wZXJseVxuICogaGFuZGxlZC5cbiAqXG4gKiBTZWUgRG9tU2FuaXRpemVyIGZvciBtb3JlIGRldGFpbHMgb24gc2VjdXJpdHkgaW4gQW5ndWxhciBhcHBsaWNhdGlvbnMuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG52YXIgU2VjdXJpdHlDb250ZXh0O1xuKGZ1bmN0aW9uIChTZWN1cml0eUNvbnRleHQpIHtcbiAgICBTZWN1cml0eUNvbnRleHRbU2VjdXJpdHlDb250ZXh0W1wiTk9ORVwiXSA9IDBdID0gXCJOT05FXCI7XG4gICAgU2VjdXJpdHlDb250ZXh0W1NlY3VyaXR5Q29udGV4dFtcIkhUTUxcIl0gPSAxXSA9IFwiSFRNTFwiO1xuICAgIFNlY3VyaXR5Q29udGV4dFtTZWN1cml0eUNvbnRleHRbXCJTVFlMRVwiXSA9IDJdID0gXCJTVFlMRVwiO1xuICAgIFNlY3VyaXR5Q29udGV4dFtTZWN1cml0eUNvbnRleHRbXCJTQ1JJUFRcIl0gPSAzXSA9IFwiU0NSSVBUXCI7XG4gICAgU2VjdXJpdHlDb250ZXh0W1NlY3VyaXR5Q29udGV4dFtcIlVSTFwiXSA9IDRdID0gXCJVUkxcIjtcbiAgICBTZWN1cml0eUNvbnRleHRbU2VjdXJpdHlDb250ZXh0W1wiUkVTT1VSQ0VfVVJMXCJdID0gNV0gPSBcIlJFU09VUkNFX1VSTFwiO1xufSkoU2VjdXJpdHlDb250ZXh0IHx8IChTZWN1cml0eUNvbnRleHQgPSB7fSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQW4gYGh0bWxgIHNhbml0aXplciB3aGljaCBjb252ZXJ0cyB1bnRydXN0ZWQgYGh0bWxgICoqc3RyaW5nKiogaW50byB0cnVzdGVkIHN0cmluZyBieSByZW1vdmluZ1xuICogZGFuZ2Vyb3VzIGNvbnRlbnQuXG4gKlxuICogVGhpcyBtZXRob2QgcGFyc2VzIHRoZSBgaHRtbGAgYW5kIGxvY2F0ZXMgcG90ZW50aWFsbHkgZGFuZ2Vyb3VzIGNvbnRlbnQgKHN1Y2ggYXMgdXJscyBhbmRcbiAqIGphdmFzY3JpcHQpIGFuZCByZW1vdmVzIGl0LlxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIG1hcmsgYSBzdHJpbmcgYXMgdHJ1c3RlZCBieSBjYWxsaW5nIHtAbGluayBieXBhc3NTYW5pdGl6YXRpb25UcnVzdEh0bWx9LlxuICpcbiAqIEBwYXJhbSB1bnNhZmVIdG1sIHVudHJ1c3RlZCBgaHRtbGAsIHR5cGljYWxseSBmcm9tIHRoZSB1c2VyLlxuICogQHJldHVybnMgYGh0bWxgIHN0cmluZyB3aGljaCBpcyBzYWZlIHRvIGRpc3BsYXkgdG8gdXNlciwgYmVjYXVzZSBhbGwgb2YgdGhlIGRhbmdlcm91cyBqYXZhc2NyaXB0XG4gKiBhbmQgdXJscyBoYXZlIGJlZW4gcmVtb3ZlZC5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c2FuaXRpemVIdG1sKHVuc2FmZUh0bWwpIHtcbiAgICBjb25zdCBzYW5pdGl6ZXIgPSBnZXRTYW5pdGl6ZXIoKTtcbiAgICBpZiAoc2FuaXRpemVyKSB7XG4gICAgICAgIHJldHVybiB0cnVzdGVkSFRNTEZyb21TdHJpbmdCeXBhc3Moc2FuaXRpemVyLnNhbml0aXplKFNlY3VyaXR5Q29udGV4dC5IVE1MLCB1bnNhZmVIdG1sKSB8fCAnJyk7XG4gICAgfVxuICAgIGlmIChhbGxvd1Nhbml0aXphdGlvbkJ5cGFzc0FuZFRocm93KHVuc2FmZUh0bWwsIFwiSFRNTFwiIC8qIEh0bWwgKi8pKSB7XG4gICAgICAgIHJldHVybiB0cnVzdGVkSFRNTEZyb21TdHJpbmdCeXBhc3ModW53cmFwU2FmZVZhbHVlKHVuc2FmZUh0bWwpKTtcbiAgICB9XG4gICAgcmV0dXJuIF9zYW5pdGl6ZUh0bWwoZ2V0RG9jdW1lbnQoKSwgcmVuZGVyU3RyaW5naWZ5KHVuc2FmZUh0bWwpKTtcbn1cbi8qKlxuICogQSBgc3R5bGVgIHNhbml0aXplciB3aGljaCBjb252ZXJ0cyB1bnRydXN0ZWQgYHN0eWxlYCAqKnN0cmluZyoqIGludG8gdHJ1c3RlZCBzdHJpbmcgYnkgcmVtb3ZpbmdcbiAqIGRhbmdlcm91cyBjb250ZW50LlxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIG1hcmsgYSBzdHJpbmcgYXMgdHJ1c3RlZCBieSBjYWxsaW5nIHtAbGluayBieXBhc3NTYW5pdGl6YXRpb25UcnVzdFN0eWxlfS5cbiAqXG4gKiBAcGFyYW0gdW5zYWZlU3R5bGUgdW50cnVzdGVkIGBzdHlsZWAsIHR5cGljYWxseSBmcm9tIHRoZSB1c2VyLlxuICogQHJldHVybnMgYHN0eWxlYCBzdHJpbmcgd2hpY2ggaXMgc2FmZSB0byBiaW5kIHRvIHRoZSBgc3R5bGVgIHByb3BlcnRpZXMuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXNhbml0aXplU3R5bGUodW5zYWZlU3R5bGUpIHtcbiAgICBjb25zdCBzYW5pdGl6ZXIgPSBnZXRTYW5pdGl6ZXIoKTtcbiAgICBpZiAoc2FuaXRpemVyKSB7XG4gICAgICAgIHJldHVybiBzYW5pdGl6ZXIuc2FuaXRpemUoU2VjdXJpdHlDb250ZXh0LlNUWUxFLCB1bnNhZmVTdHlsZSkgfHwgJyc7XG4gICAgfVxuICAgIGlmIChhbGxvd1Nhbml0aXphdGlvbkJ5cGFzc0FuZFRocm93KHVuc2FmZVN0eWxlLCBcIlN0eWxlXCIgLyogU3R5bGUgKi8pKSB7XG4gICAgICAgIHJldHVybiB1bndyYXBTYWZlVmFsdWUodW5zYWZlU3R5bGUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVuZGVyU3RyaW5naWZ5KHVuc2FmZVN0eWxlKTtcbn1cbi8qKlxuICogQSBgdXJsYCBzYW5pdGl6ZXIgd2hpY2ggY29udmVydHMgdW50cnVzdGVkIGB1cmxgICoqc3RyaW5nKiogaW50byB0cnVzdGVkIHN0cmluZyBieSByZW1vdmluZ1xuICogZGFuZ2Vyb3VzXG4gKiBjb250ZW50LlxuICpcbiAqIFRoaXMgbWV0aG9kIHBhcnNlcyB0aGUgYHVybGAgYW5kIGxvY2F0ZXMgcG90ZW50aWFsbHkgZGFuZ2Vyb3VzIGNvbnRlbnQgKHN1Y2ggYXMgamF2YXNjcmlwdCkgYW5kXG4gKiByZW1vdmVzIGl0LlxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIG1hcmsgYSBzdHJpbmcgYXMgdHJ1c3RlZCBieSBjYWxsaW5nIHtAbGluayBieXBhc3NTYW5pdGl6YXRpb25UcnVzdFVybH0uXG4gKlxuICogQHBhcmFtIHVuc2FmZVVybCB1bnRydXN0ZWQgYHVybGAsIHR5cGljYWxseSBmcm9tIHRoZSB1c2VyLlxuICogQHJldHVybnMgYHVybGAgc3RyaW5nIHdoaWNoIGlzIHNhZmUgdG8gYmluZCB0byB0aGUgYHNyY2AgcHJvcGVydGllcyBzdWNoIGFzIGA8aW1nIHNyYz5gLCBiZWNhdXNlXG4gKiBhbGwgb2YgdGhlIGRhbmdlcm91cyBqYXZhc2NyaXB0IGhhcyBiZWVuIHJlbW92ZWQuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXNhbml0aXplVXJsKHVuc2FmZVVybCkge1xuICAgIGNvbnN0IHNhbml0aXplciA9IGdldFNhbml0aXplcigpO1xuICAgIGlmIChzYW5pdGl6ZXIpIHtcbiAgICAgICAgcmV0dXJuIHNhbml0aXplci5zYW5pdGl6ZShTZWN1cml0eUNvbnRleHQuVVJMLCB1bnNhZmVVcmwpIHx8ICcnO1xuICAgIH1cbiAgICBpZiAoYWxsb3dTYW5pdGl6YXRpb25CeXBhc3NBbmRUaHJvdyh1bnNhZmVVcmwsIFwiVVJMXCIgLyogVXJsICovKSkge1xuICAgICAgICByZXR1cm4gdW53cmFwU2FmZVZhbHVlKHVuc2FmZVVybCk7XG4gICAgfVxuICAgIHJldHVybiBfc2FuaXRpemVVcmwocmVuZGVyU3RyaW5naWZ5KHVuc2FmZVVybCkpO1xufVxuLyoqXG4gKiBBIGB1cmxgIHNhbml0aXplciB3aGljaCBvbmx5IGxldHMgdHJ1c3RlZCBgdXJsYHMgdGhyb3VnaC5cbiAqXG4gKiBUaGlzIHBhc3NlcyBvbmx5IGB1cmxgcyBtYXJrZWQgdHJ1c3RlZCBieSBjYWxsaW5nIHtAbGluayBieXBhc3NTYW5pdGl6YXRpb25UcnVzdFJlc291cmNlVXJsfS5cbiAqXG4gKiBAcGFyYW0gdW5zYWZlUmVzb3VyY2VVcmwgdW50cnVzdGVkIGB1cmxgLCB0eXBpY2FsbHkgZnJvbSB0aGUgdXNlci5cbiAqIEByZXR1cm5zIGB1cmxgIHN0cmluZyB3aGljaCBpcyBzYWZlIHRvIGJpbmQgdG8gdGhlIGBzcmNgIHByb3BlcnRpZXMgc3VjaCBhcyBgPGltZyBzcmM+YCwgYmVjYXVzZVxuICogb25seSB0cnVzdGVkIGB1cmxgcyBoYXZlIGJlZW4gYWxsb3dlZCB0byBwYXNzLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzYW5pdGl6ZVJlc291cmNlVXJsKHVuc2FmZVJlc291cmNlVXJsKSB7XG4gICAgY29uc3Qgc2FuaXRpemVyID0gZ2V0U2FuaXRpemVyKCk7XG4gICAgaWYgKHNhbml0aXplcikge1xuICAgICAgICByZXR1cm4gdHJ1c3RlZFNjcmlwdFVSTEZyb21TdHJpbmdCeXBhc3Moc2FuaXRpemVyLnNhbml0aXplKFNlY3VyaXR5Q29udGV4dC5SRVNPVVJDRV9VUkwsIHVuc2FmZVJlc291cmNlVXJsKSB8fCAnJyk7XG4gICAgfVxuICAgIGlmIChhbGxvd1Nhbml0aXphdGlvbkJ5cGFzc0FuZFRocm93KHVuc2FmZVJlc291cmNlVXJsLCBcIlJlc291cmNlVVJMXCIgLyogUmVzb3VyY2VVcmwgKi8pKSB7XG4gICAgICAgIHJldHVybiB0cnVzdGVkU2NyaXB0VVJMRnJvbVN0cmluZ0J5cGFzcyh1bndyYXBTYWZlVmFsdWUodW5zYWZlUmVzb3VyY2VVcmwpKTtcbiAgICB9XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gKHR5cGVvZiBuZ0Rldk1vZGUgPT09ICd1bmRlZmluZWQnIHx8IG5nRGV2TW9kZSkgP1xuICAgICAgICAndW5zYWZlIHZhbHVlIHVzZWQgaW4gYSByZXNvdXJjZSBVUkwgY29udGV4dCAoc2VlIGh0dHBzOi8vZy5jby9uZy9zZWN1cml0eSN4c3MpJyA6XG4gICAgICAgICcnO1xuICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoOTA0IC8qIFVOU0FGRV9WQUxVRV9JTl9SRVNPVVJDRV9VUkwgKi8sIGVycm9yTWVzc2FnZSk7XG59XG4vKipcbiAqIEEgYHNjcmlwdGAgc2FuaXRpemVyIHdoaWNoIG9ubHkgbGV0cyB0cnVzdGVkIGphdmFzY3JpcHQgdGhyb3VnaC5cbiAqXG4gKiBUaGlzIHBhc3NlcyBvbmx5IGBzY3JpcHRgcyBtYXJrZWQgdHJ1c3RlZCBieSBjYWxsaW5nIHtAbGlua1xuICogYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RTY3JpcHR9LlxuICpcbiAqIEBwYXJhbSB1bnNhZmVTY3JpcHQgdW50cnVzdGVkIGBzY3JpcHRgLCB0eXBpY2FsbHkgZnJvbSB0aGUgdXNlci5cbiAqIEByZXR1cm5zIGB1cmxgIHN0cmluZyB3aGljaCBpcyBzYWZlIHRvIGJpbmQgdG8gdGhlIGA8c2NyaXB0PmAgZWxlbWVudCBzdWNoIGFzIGA8aW1nIHNyYz5gLFxuICogYmVjYXVzZSBvbmx5IHRydXN0ZWQgYHNjcmlwdHNgIGhhdmUgYmVlbiBhbGxvd2VkIHRvIHBhc3MuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXNhbml0aXplU2NyaXB0KHVuc2FmZVNjcmlwdCkge1xuICAgIGNvbnN0IHNhbml0aXplciA9IGdldFNhbml0aXplcigpO1xuICAgIGlmIChzYW5pdGl6ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydXN0ZWRTY3JpcHRGcm9tU3RyaW5nQnlwYXNzKHNhbml0aXplci5zYW5pdGl6ZShTZWN1cml0eUNvbnRleHQuU0NSSVBULCB1bnNhZmVTY3JpcHQpIHx8ICcnKTtcbiAgICB9XG4gICAgaWYgKGFsbG93U2FuaXRpemF0aW9uQnlwYXNzQW5kVGhyb3codW5zYWZlU2NyaXB0LCBcIlNjcmlwdFwiIC8qIFNjcmlwdCAqLykpIHtcbiAgICAgICAgcmV0dXJuIHRydXN0ZWRTY3JpcHRGcm9tU3RyaW5nQnlwYXNzKHVud3JhcFNhZmVWYWx1ZSh1bnNhZmVTY3JpcHQpKTtcbiAgICB9XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gKHR5cGVvZiBuZ0Rldk1vZGUgPT09ICd1bmRlZmluZWQnIHx8IG5nRGV2TW9kZSkgP1xuICAgICAgICAndW5zYWZlIHZhbHVlIHVzZWQgaW4gYSBzY3JpcHQgY29udGV4dCcgOlxuICAgICAgICAnJztcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDkwNSAvKiBVTlNBRkVfVkFMVUVfSU5fU0NSSVBUICovLCBlcnJvck1lc3NhZ2UpO1xufVxuLyoqXG4gKiBBIHRlbXBsYXRlIHRhZyBmdW5jdGlvbiBmb3IgcHJvbW90aW5nIHRoZSBhc3NvY2lhdGVkIGNvbnN0YW50IGxpdGVyYWwgdG8gYVxuICogVHJ1c3RlZEhUTUwuIEludGVycG9sYXRpb24gaXMgZXhwbGljaXRseSBub3QgYWxsb3dlZC5cbiAqXG4gKiBAcGFyYW0gaHRtbCBjb25zdGFudCB0ZW1wbGF0ZSBsaXRlcmFsIGNvbnRhaW5pbmcgdHJ1c3RlZCBIVE1MLlxuICogQHJldHVybnMgVHJ1c3RlZEhUTUwgd3JhcHBpbmcgYGh0bWxgLlxuICpcbiAqIEBzZWN1cml0eSBUaGlzIGlzIGEgc2VjdXJpdHktc2Vuc2l0aXZlIGZ1bmN0aW9uIGFuZCBzaG91bGQgb25seSBiZSB1c2VkIHRvXG4gKiBjb252ZXJ0IGNvbnN0YW50IHZhbHVlcyBvZiBhdHRyaWJ1dGVzIGFuZCBwcm9wZXJ0aWVzIGZvdW5kIGluXG4gKiBhcHBsaWNhdGlvbi1wcm92aWRlZCBBbmd1bGFyIHRlbXBsYXRlcyB0byBUcnVzdGVkSFRNTC5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1dHJ1c3RDb25zdGFudEh0bWwoaHRtbCkge1xuICAgIC8vIFRoZSBmb2xsb3dpbmcgcnVudGltZSBjaGVjayBlbnN1cmVzIHRoYXQgdGhlIGZ1bmN0aW9uIHdhcyBjYWxsZWQgYXMgYVxuICAgIC8vIHRlbXBsYXRlIHRhZyAoZS5nLiDJtcm1dHJ1c3RDb25zdGFudEh0bWxgY29udGVudGApLCB3aXRob3V0IGFueSBpbnRlcnBvbGF0aW9uXG4gICAgLy8gKGUuZy4gbm90IMm1ybV0cnVzdENvbnN0YW50SHRtbGBjb250ZW50ICR7dmFyaWFibGV9YCkuIEEgVGVtcGxhdGVTdHJpbmdzQXJyYXlcbiAgICAvLyBpcyBhbiBhcnJheSB3aXRoIGEgYHJhd2AgcHJvcGVydHkgdGhhdCBpcyBhbHNvIGFuIGFycmF5LiBUaGUgYXNzb2NpYXRlZFxuICAgIC8vIHRlbXBsYXRlIGxpdGVyYWwgaGFzIG5vIGludGVycG9sYXRpb24gaWYgYW5kIG9ubHkgaWYgdGhlIGxlbmd0aCBvZiB0aGVcbiAgICAvLyBUZW1wbGF0ZVN0cmluZ3NBcnJheSBpcyAxLlxuICAgIGlmIChuZ0Rldk1vZGUgJiYgKCFBcnJheS5pc0FycmF5KGh0bWwpIHx8ICFBcnJheS5pc0FycmF5KGh0bWwucmF3KSB8fCBodG1sLmxlbmd0aCAhPT0gMSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIGludGVycG9sYXRpb24gaW4gdHJ1c3RlZCBIVE1MIGNvbnN0YW50OiAke2h0bWwuam9pbignPycpfWApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1c3RlZEhUTUxGcm9tU3RyaW5nKGh0bWxbMF0pO1xufVxuLyoqXG4gKiBBIHRlbXBsYXRlIHRhZyBmdW5jdGlvbiBmb3IgcHJvbW90aW5nIHRoZSBhc3NvY2lhdGVkIGNvbnN0YW50IGxpdGVyYWwgdG8gYVxuICogVHJ1c3RlZFNjcmlwdFVSTC4gSW50ZXJwb2xhdGlvbiBpcyBleHBsaWNpdGx5IG5vdCBhbGxvd2VkLlxuICpcbiAqIEBwYXJhbSB1cmwgY29uc3RhbnQgdGVtcGxhdGUgbGl0ZXJhbCBjb250YWluaW5nIGEgdHJ1c3RlZCBzY3JpcHQgVVJMLlxuICogQHJldHVybnMgVHJ1c3RlZFNjcmlwdFVSTCB3cmFwcGluZyBgdXJsYC5cbiAqXG4gKiBAc2VjdXJpdHkgVGhpcyBpcyBhIHNlY3VyaXR5LXNlbnNpdGl2ZSBmdW5jdGlvbiBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCB0b1xuICogY29udmVydCBjb25zdGFudCB2YWx1ZXMgb2YgYXR0cmlidXRlcyBhbmQgcHJvcGVydGllcyBmb3VuZCBpblxuICogYXBwbGljYXRpb24tcHJvdmlkZWQgQW5ndWxhciB0ZW1wbGF0ZXMgdG8gVHJ1c3RlZFNjcmlwdFVSTC5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1dHJ1c3RDb25zdGFudFJlc291cmNlVXJsKHVybCkge1xuICAgIC8vIFRoZSBmb2xsb3dpbmcgcnVudGltZSBjaGVjayBlbnN1cmVzIHRoYXQgdGhlIGZ1bmN0aW9uIHdhcyBjYWxsZWQgYXMgYVxuICAgIC8vIHRlbXBsYXRlIHRhZyAoZS5nLiDJtcm1dHJ1c3RDb25zdGFudFJlc291cmNlVXJsYGNvbnRlbnRgKSwgd2l0aG91dCBhbnlcbiAgICAvLyBpbnRlcnBvbGF0aW9uIChlLmcuIG5vdCDJtcm1dHJ1c3RDb25zdGFudFJlc291cmNlVXJsYGNvbnRlbnQgJHt2YXJpYWJsZX1gKS4gQVxuICAgIC8vIFRlbXBsYXRlU3RyaW5nc0FycmF5IGlzIGFuIGFycmF5IHdpdGggYSBgcmF3YCBwcm9wZXJ0eSB0aGF0IGlzIGFsc28gYW5cbiAgICAvLyBhcnJheS4gVGhlIGFzc29jaWF0ZWQgdGVtcGxhdGUgbGl0ZXJhbCBoYXMgbm8gaW50ZXJwb2xhdGlvbiBpZiBhbmQgb25seSBpZlxuICAgIC8vIHRoZSBsZW5ndGggb2YgdGhlIFRlbXBsYXRlU3RyaW5nc0FycmF5IGlzIDEuXG4gICAgaWYgKG5nRGV2TW9kZSAmJiAoIUFycmF5LmlzQXJyYXkodXJsKSB8fCAhQXJyYXkuaXNBcnJheSh1cmwucmF3KSB8fCB1cmwubGVuZ3RoICE9PSAxKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgaW50ZXJwb2xhdGlvbiBpbiB0cnVzdGVkIFVSTCBjb25zdGFudDogJHt1cmwuam9pbignPycpfWApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1c3RlZFNjcmlwdFVSTEZyb21TdHJpbmcodXJsWzBdKTtcbn1cbi8qKlxuICogRGV0ZWN0cyB3aGljaCBzYW5pdGl6ZXIgdG8gdXNlIGZvciBVUkwgcHJvcGVydHksIGJhc2VkIG9uIHRhZyBuYW1lIGFuZCBwcm9wIG5hbWUuXG4gKlxuICogVGhlIHJ1bGVzIGFyZSBiYXNlZCBvbiB0aGUgUkVTT1VSQ0VfVVJMIGNvbnRleHQgY29uZmlnIGZyb21cbiAqIGBwYWNrYWdlcy9jb21waWxlci9zcmMvc2NoZW1hL2RvbV9zZWN1cml0eV9zY2hlbWEudHNgLlxuICogSWYgdGFnIGFuZCBwcm9wIG5hbWVzIGRvbid0IG1hdGNoIFJlc291cmNlIFVSTCBzY2hlbWEsIHVzZSBVUkwgc2FuaXRpemVyLlxuICovXG5mdW5jdGlvbiBnZXRVcmxTYW5pdGl6ZXIodGFnLCBwcm9wKSB7XG4gICAgaWYgKChwcm9wID09PSAnc3JjJyAmJlxuICAgICAgICAodGFnID09PSAnZW1iZWQnIHx8IHRhZyA9PT0gJ2ZyYW1lJyB8fCB0YWcgPT09ICdpZnJhbWUnIHx8IHRhZyA9PT0gJ21lZGlhJyB8fFxuICAgICAgICAgICAgdGFnID09PSAnc2NyaXB0JykpIHx8XG4gICAgICAgIChwcm9wID09PSAnaHJlZicgJiYgKHRhZyA9PT0gJ2Jhc2UnIHx8IHRhZyA9PT0gJ2xpbmsnKSkpIHtcbiAgICAgICAgcmV0dXJuIMm1ybVzYW5pdGl6ZVJlc291cmNlVXJsO1xuICAgIH1cbiAgICByZXR1cm4gybXJtXNhbml0aXplVXJsO1xufVxuLyoqXG4gKiBTYW5pdGl6ZXMgVVJMLCBzZWxlY3Rpbmcgc2FuaXRpemVyIGZ1bmN0aW9uIGJhc2VkIG9uIHRhZyBhbmQgcHJvcGVydHkgbmFtZXMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGluIGNhc2Ugd2UgY2FuJ3QgZGVmaW5lIHNlY3VyaXR5IGNvbnRleHQgYXQgY29tcGlsZSB0aW1lLCB3aGVuIG9ubHkgcHJvcFxuICogbmFtZSBpcyBhdmFpbGFibGUuIFRoaXMgaGFwcGVucyB3aGVuIHdlIGdlbmVyYXRlIGhvc3QgYmluZGluZ3MgZm9yIERpcmVjdGl2ZXMvQ29tcG9uZW50cy4gVGhlXG4gKiBob3N0IGVsZW1lbnQgaXMgdW5rbm93biBhdCBjb21waWxlIHRpbWUsIHNvIHdlIGRlZmVyIGNhbGN1bGF0aW9uIG9mIHNwZWNpZmljIHNhbml0aXplciB0b1xuICogcnVudGltZS5cbiAqXG4gKiBAcGFyYW0gdW5zYWZlVXJsIHVudHJ1c3RlZCBgdXJsYCwgdHlwaWNhbGx5IGZyb20gdGhlIHVzZXIuXG4gKiBAcGFyYW0gdGFnIHRhcmdldCBlbGVtZW50IHRhZyBuYW1lLlxuICogQHBhcmFtIHByb3AgbmFtZSBvZiB0aGUgcHJvcGVydHkgdGhhdCBjb250YWlucyB0aGUgdmFsdWUuXG4gKiBAcmV0dXJucyBgdXJsYCBzdHJpbmcgd2hpY2ggaXMgc2FmZSB0byBiaW5kLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzYW5pdGl6ZVVybE9yUmVzb3VyY2VVcmwodW5zYWZlVXJsLCB0YWcsIHByb3ApIHtcbiAgICByZXR1cm4gZ2V0VXJsU2FuaXRpemVyKHRhZywgcHJvcCkodW5zYWZlVXJsKTtcbn1cbmZ1bmN0aW9uIHZhbGlkYXRlQWdhaW5zdEV2ZW50UHJvcGVydGllcyhuYW1lKSB7XG4gICAgaWYgKG5hbWUudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCdvbicpKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGBCaW5kaW5nIHRvIGV2ZW50IHByb3BlcnR5ICcke25hbWV9JyBpcyBkaXNhbGxvd2VkIGZvciBzZWN1cml0eSByZWFzb25zLCBgICtcbiAgICAgICAgICAgIGBwbGVhc2UgdXNlICgke25hbWUuc2xpY2UoMil9KT0uLi5gICtcbiAgICAgICAgICAgIGBcXG5JZiAnJHtuYW1lfScgaXMgYSBkaXJlY3RpdmUgaW5wdXQsIG1ha2Ugc3VyZSB0aGUgZGlyZWN0aXZlIGlzIGltcG9ydGVkIGJ5IHRoZWAgK1xuICAgICAgICAgICAgYCBjdXJyZW50IG1vZHVsZS5gO1xuICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDMwNiAvKiBJTlZBTElEX0VWRU5UX0JJTkRJTkcgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gdmFsaWRhdGVBZ2FpbnN0RXZlbnRBdHRyaWJ1dGVzKG5hbWUpIHtcbiAgICBpZiAobmFtZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJ29uJykpIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gYEJpbmRpbmcgdG8gZXZlbnQgYXR0cmlidXRlICcke25hbWV9JyBpcyBkaXNhbGxvd2VkIGZvciBzZWN1cml0eSByZWFzb25zLCBgICtcbiAgICAgICAgICAgIGBwbGVhc2UgdXNlICgke25hbWUuc2xpY2UoMil9KT0uLi5gO1xuICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDMwNiAvKiBJTlZBTElEX0VWRU5UX0JJTkRJTkcgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0U2FuaXRpemVyKCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICByZXR1cm4gbFZpZXcgJiYgbFZpZXdbU0FOSVRJWkVSXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIG1hdGNoaW5nIGBMQ29udGV4dGAgZGF0YSBmb3IgYSBnaXZlbiBET00gbm9kZSwgZGlyZWN0aXZlIG9yIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZXhhbWluZSB0aGUgcHJvdmlkZWQgRE9NIGVsZW1lbnQsIGNvbXBvbmVudCwgb3IgZGlyZWN0aXZlIGluc3RhbmNlXFwnc1xuICogbW9ua2V5LXBhdGNoZWQgcHJvcGVydHkgdG8gZGVyaXZlIHRoZSBgTENvbnRleHRgIGRhdGEuIE9uY2UgY2FsbGVkIHRoZW4gdGhlIG1vbmtleS1wYXRjaGVkXG4gKiB2YWx1ZSB3aWxsIGJlIHRoYXQgb2YgdGhlIG5ld2x5IGNyZWF0ZWQgYExDb250ZXh0YC5cbiAqXG4gKiBJZiB0aGUgbW9ua2V5LXBhdGNoZWQgdmFsdWUgaXMgdGhlIGBMVmlld2AgaW5zdGFuY2UgdGhlbiB0aGUgY29udGV4dCB2YWx1ZSBmb3IgdGhhdFxuICogdGFyZ2V0IHdpbGwgYmUgY3JlYXRlZCBhbmQgdGhlIG1vbmtleS1wYXRjaCByZWZlcmVuY2Ugd2lsbCBiZSB1cGRhdGVkLiBUaGVyZWZvcmUgd2hlbiB0aGlzXG4gKiBmdW5jdGlvbiBpcyBjYWxsZWQgaXQgbWF5IG11dGF0ZSB0aGUgcHJvdmlkZWQgZWxlbWVudFxcJ3MsIGNvbXBvbmVudFxcJ3Mgb3IgYW55IG9mIHRoZSBhc3NvY2lhdGVkXG4gKiBkaXJlY3RpdmVcXCdzIG1vbmtleS1wYXRjaCB2YWx1ZXMuXG4gKlxuICogSWYgdGhlIG1vbmtleS1wYXRjaCB2YWx1ZSBpcyBub3QgZGV0ZWN0ZWQgdGhlbiB0aGUgY29kZSB3aWxsIHdhbGsgdXAgdGhlIERPTSB1bnRpbCBhbiBlbGVtZW50XG4gKiBpcyBmb3VuZCB3aGljaCBjb250YWlucyBhIG1vbmtleS1wYXRjaCByZWZlcmVuY2UuIFdoZW4gdGhhdCBvY2N1cnMgdGhlbiB0aGUgcHJvdmlkZWQgZWxlbWVudFxuICogd2lsbCBiZSB1cGRhdGVkIHdpdGggYSBuZXcgY29udGV4dCAod2hpY2ggaXMgdGhlbiByZXR1cm5lZCkuIElmIHRoZSBtb25rZXktcGF0Y2ggdmFsdWUgaXMgbm90XG4gKiBkZXRlY3RlZCBmb3IgYSBjb21wb25lbnQvZGlyZWN0aXZlIGluc3RhbmNlIHRoZW4gaXQgd2lsbCB0aHJvdyBhbiBlcnJvciAoYWxsIGNvbXBvbmVudHMgYW5kXG4gKiBkaXJlY3RpdmVzIHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5IG1vbmtleS1wYXRjaGVkIGJ5IGl2eSkuXG4gKlxuICogQHBhcmFtIHRhcmdldCBDb21wb25lbnQsIERpcmVjdGl2ZSBvciBET00gTm9kZS5cbiAqL1xuZnVuY3Rpb24gZ2V0TENvbnRleHQodGFyZ2V0KSB7XG4gICAgbGV0IG1wVmFsdWUgPSByZWFkUGF0Y2hlZERhdGEodGFyZ2V0KTtcbiAgICBpZiAobXBWYWx1ZSkge1xuICAgICAgICAvLyBvbmx5IHdoZW4gaXQncyBhbiBhcnJheSBpcyBpdCBjb25zaWRlcmVkIGFuIExWaWV3IGluc3RhbmNlXG4gICAgICAgIC8vIC4uLiBvdGhlcndpc2UgaXQncyBhbiBhbHJlYWR5IGNvbnN0cnVjdGVkIExDb250ZXh0IGluc3RhbmNlXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1wVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBsVmlldyA9IG1wVmFsdWU7XG4gICAgICAgICAgICBsZXQgbm9kZUluZGV4O1xuICAgICAgICAgICAgbGV0IGNvbXBvbmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGxldCBkaXJlY3RpdmVzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKGlzQ29tcG9uZW50SW5zdGFuY2UodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIG5vZGVJbmRleCA9IGZpbmRWaWFDb21wb25lbnQobFZpZXcsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVJbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwcm92aWRlZCBjb21wb25lbnQgd2FzIG5vdCBmb3VuZCBpbiB0aGUgYXBwbGljYXRpb24nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tcG9uZW50ID0gdGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNEaXJlY3RpdmVJbnN0YW5jZSh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgbm9kZUluZGV4ID0gZmluZFZpYURpcmVjdGl2ZShsVmlldywgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZUluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHByb3ZpZGVkIGRpcmVjdGl2ZSB3YXMgbm90IGZvdW5kIGluIHRoZSBhcHBsaWNhdGlvbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaXJlY3RpdmVzID0gZ2V0RGlyZWN0aXZlc0F0Tm9kZUluZGV4KG5vZGVJbmRleCwgbFZpZXcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGVJbmRleCA9IGZpbmRWaWFOYXRpdmVFbGVtZW50KGxWaWV3LCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGlmIChub2RlSW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdGhlIGdvYWwgaXMgbm90IHRvIGZpbGwgdGhlIGVudGlyZSBjb250ZXh0IGZ1bGwgb2YgZGF0YSBiZWNhdXNlIHRoZSBsb29rdXBzXG4gICAgICAgICAgICAvLyBhcmUgZXhwZW5zaXZlLiBJbnN0ZWFkLCBvbmx5IHRoZSB0YXJnZXQgZGF0YSAodGhlIGVsZW1lbnQsIGNvbXBvbmVudCwgY29udGFpbmVyLCBJQ1VcbiAgICAgICAgICAgIC8vIGV4cHJlc3Npb24gb3IgZGlyZWN0aXZlIGRldGFpbHMpIGFyZSBmaWxsZWQgaW50byB0aGUgY29udGV4dC4gSWYgY2FsbGVkIG11bHRpcGxlIHRpbWVzXG4gICAgICAgICAgICAvLyB3aXRoIGRpZmZlcmVudCB0YXJnZXQgdmFsdWVzIHRoZW4gdGhlIG1pc3NpbmcgdGFyZ2V0IGRhdGEgd2lsbCBiZSBmaWxsZWQgaW4uXG4gICAgICAgICAgICBjb25zdCBuYXRpdmUgPSB1bndyYXBSTm9kZShsVmlld1tub2RlSW5kZXhdKTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ3R4ID0gcmVhZFBhdGNoZWREYXRhKG5hdGl2ZSk7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gKGV4aXN0aW5nQ3R4ICYmICFBcnJheS5pc0FycmF5KGV4aXN0aW5nQ3R4KSkgP1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nQ3R4IDpcbiAgICAgICAgICAgICAgICBjcmVhdGVMQ29udGV4dChsVmlldywgbm9kZUluZGV4LCBuYXRpdmUpO1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gZGlzY292ZXJlZCB0aGVuIHVwZGF0ZSB0aGUgbW9ua2V5LXBhdGNoXG4gICAgICAgICAgICBpZiAoY29tcG9uZW50ICYmIGNvbnRleHQuY29tcG9uZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbXBvbmVudCA9IGNvbXBvbmVudDtcbiAgICAgICAgICAgICAgICBhdHRhY2hQYXRjaERhdGEoY29udGV4dC5jb21wb25lbnQsIGNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoZSBkaXJlY3RpdmVzIGhhdmUgYmVlbiBkaXNjb3ZlcmVkIHRoZW4gdXBkYXRlIHRoZSBtb25rZXktcGF0Y2hcbiAgICAgICAgICAgIGlmIChkaXJlY3RpdmVzICYmIGNvbnRleHQuZGlyZWN0aXZlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5kaXJlY3RpdmVzID0gZGlyZWN0aXZlcztcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpcmVjdGl2ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNoUGF0Y2hEYXRhKGRpcmVjdGl2ZXNbaV0sIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dGFjaFBhdGNoRGF0YShjb250ZXh0Lm5hdGl2ZSwgY29udGV4dCk7XG4gICAgICAgICAgICBtcFZhbHVlID0gY29udGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgckVsZW1lbnQgPSB0YXJnZXQ7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREb21Ob2RlKHJFbGVtZW50KTtcbiAgICAgICAgLy8gaWYgdGhlIGNvbnRleHQgaXMgbm90IGZvdW5kIHRoZW4gd2UgbmVlZCB0byB0cmF2ZXJzZSB1cHdhcmRzIHVwIHRoZSBET01cbiAgICAgICAgLy8gdG8gZmluZCB0aGUgbmVhcmVzdCBlbGVtZW50IHRoYXQgaGFzIGFscmVhZHkgYmVlbiBtb25rZXkgcGF0Y2hlZCB3aXRoIGRhdGFcbiAgICAgICAgbGV0IHBhcmVudCA9IHJFbGVtZW50O1xuICAgICAgICB3aGlsZSAocGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudENvbnRleHQgPSByZWFkUGF0Y2hlZERhdGEocGFyZW50KTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGxWaWV3O1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBhcmVudENvbnRleHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxWaWV3ID0gcGFyZW50Q29udGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxWaWV3ID0gcGFyZW50Q29udGV4dC5sVmlldztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdGhlIGVkZ2Ugb2YgdGhlIGFwcCB3YXMgYWxzbyByZWFjaGVkIGhlcmUgdGhyb3VnaCBhbm90aGVyIG1lYW5zXG4gICAgICAgICAgICAgICAgLy8gKG1heWJlIGJlY2F1c2UgdGhlIERPTSB3YXMgY2hhbmdlZCBtYW51YWxseSkuXG4gICAgICAgICAgICAgICAgaWYgKCFsVmlldykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBmaW5kVmlhTmF0aXZlRWxlbWVudChsVmlldywgckVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hdGl2ZSA9IHVud3JhcFJOb2RlKGxWaWV3W2luZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVMQ29udGV4dChsVmlldywgaW5kZXgsIG5hdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaFBhdGNoRGF0YShuYXRpdmUsIGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICBtcFZhbHVlID0gY29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtcFZhbHVlIHx8IG51bGw7XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gZW1wdHkgaW5zdGFuY2Ugb2YgYSBgTENvbnRleHRgIGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTENvbnRleHQobFZpZXcsIG5vZGVJbmRleCwgbmF0aXZlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbFZpZXcsXG4gICAgICAgIG5vZGVJbmRleCxcbiAgICAgICAgbmF0aXZlLFxuICAgICAgICBjb21wb25lbnQ6IHVuZGVmaW5lZCxcbiAgICAgICAgZGlyZWN0aXZlczogdW5kZWZpbmVkLFxuICAgICAgICBsb2NhbFJlZnM6IHVuZGVmaW5lZCxcbiAgICB9O1xufVxuLyoqXG4gKiBUYWtlcyBhIGNvbXBvbmVudCBpbnN0YW5jZSBhbmQgcmV0dXJucyB0aGUgdmlldyBmb3IgdGhhdCBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudEluc3RhbmNlXG4gKiBAcmV0dXJucyBUaGUgY29tcG9uZW50J3Mgdmlld1xuICovXG5mdW5jdGlvbiBnZXRDb21wb25lbnRWaWV3QnlJbnN0YW5jZShjb21wb25lbnRJbnN0YW5jZSkge1xuICAgIGxldCBsVmlldyA9IHJlYWRQYXRjaGVkRGF0YShjb21wb25lbnRJbnN0YW5jZSk7XG4gICAgbGV0IHZpZXc7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobFZpZXcpKSB7XG4gICAgICAgIGNvbnN0IG5vZGVJbmRleCA9IGZpbmRWaWFDb21wb25lbnQobFZpZXcsIGNvbXBvbmVudEluc3RhbmNlKTtcbiAgICAgICAgdmlldyA9IGdldENvbXBvbmVudExWaWV3QnlJbmRleChub2RlSW5kZXgsIGxWaWV3KTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNyZWF0ZUxDb250ZXh0KGxWaWV3LCBub2RlSW5kZXgsIHZpZXdbSE9TVF0pO1xuICAgICAgICBjb250ZXh0LmNvbXBvbmVudCA9IGNvbXBvbmVudEluc3RhbmNlO1xuICAgICAgICBhdHRhY2hQYXRjaERhdGEoY29tcG9uZW50SW5zdGFuY2UsIGNvbnRleHQpO1xuICAgICAgICBhdHRhY2hQYXRjaERhdGEoY29udGV4dC5uYXRpdmUsIGNvbnRleHQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGxWaWV3O1xuICAgICAgICB2aWV3ID0gZ2V0Q29tcG9uZW50TFZpZXdCeUluZGV4KGNvbnRleHQubm9kZUluZGV4LCBjb250ZXh0LmxWaWV3KTtcbiAgICB9XG4gICAgcmV0dXJuIHZpZXc7XG59XG4vKipcbiAqIFRoaXMgcHJvcGVydHkgd2lsbCBiZSBtb25rZXktcGF0Y2hlZCBvbiBlbGVtZW50cywgY29tcG9uZW50cyBhbmQgZGlyZWN0aXZlcy5cbiAqL1xuY29uc3QgTU9OS0VZX1BBVENIX0tFWV9OQU1FID0gJ19fbmdDb250ZXh0X18nO1xuLyoqXG4gKiBBc3NpZ25zIHRoZSBnaXZlbiBkYXRhIHRvIHRoZSBnaXZlbiB0YXJnZXQgKHdoaWNoIGNvdWxkIGJlIGEgY29tcG9uZW50LFxuICogZGlyZWN0aXZlIG9yIERPTSBub2RlIGluc3RhbmNlKSB1c2luZyBtb25rZXktcGF0Y2hpbmcuXG4gKi9cbmZ1bmN0aW9uIGF0dGFjaFBhdGNoRGF0YSh0YXJnZXQsIGRhdGEpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0YXJnZXQsICdUYXJnZXQgZXhwZWN0ZWQnKTtcbiAgICB0YXJnZXRbTU9OS0VZX1BBVENIX0tFWV9OQU1FXSA9IGRhdGE7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1vbmtleS1wYXRjaCB2YWx1ZSBkYXRhIHByZXNlbnQgb24gdGhlIHRhcmdldCAod2hpY2ggY291bGQgYmVcbiAqIGEgY29tcG9uZW50LCBkaXJlY3RpdmUgb3IgYSBET00gbm9kZSkuXG4gKi9cbmZ1bmN0aW9uIHJlYWRQYXRjaGVkRGF0YSh0YXJnZXQpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0YXJnZXQsICdUYXJnZXQgZXhwZWN0ZWQnKTtcbiAgICByZXR1cm4gdGFyZ2V0W01PTktFWV9QQVRDSF9LRVlfTkFNRV0gfHwgbnVsbDtcbn1cbmZ1bmN0aW9uIHJlYWRQYXRjaGVkTFZpZXcodGFyZ2V0KSB7XG4gICAgY29uc3QgdmFsdWUgPSByZWFkUGF0Y2hlZERhdGEodGFyZ2V0KTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiB2YWx1ZS5sVmlldztcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBpc0NvbXBvbmVudEluc3RhbmNlKGluc3RhbmNlKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlICYmIGluc3RhbmNlLmNvbnN0cnVjdG9yICYmIGluc3RhbmNlLmNvbnN0cnVjdG9yLsm1Y21wO1xufVxuZnVuY3Rpb24gaXNEaXJlY3RpdmVJbnN0YW5jZShpbnN0YW5jZSkge1xuICAgIHJldHVybiBpbnN0YW5jZSAmJiBpbnN0YW5jZS5jb25zdHJ1Y3RvciAmJiBpbnN0YW5jZS5jb25zdHJ1Y3Rvci7JtWRpcjtcbn1cbi8qKlxuICogTG9jYXRlcyB0aGUgZWxlbWVudCB3aXRoaW4gdGhlIGdpdmVuIExWaWV3IGFuZCByZXR1cm5zIHRoZSBtYXRjaGluZyBpbmRleFxuICovXG5mdW5jdGlvbiBmaW5kVmlhTmF0aXZlRWxlbWVudChsVmlldywgdGFyZ2V0KSB7XG4gICAgY29uc3QgdFZpZXcgPSBsVmlld1tUVklFV107XG4gICAgZm9yIChsZXQgaSA9IEhFQURFUl9PRkZTRVQ7IGkgPCB0Vmlldy5iaW5kaW5nU3RhcnRJbmRleDsgaSsrKSB7XG4gICAgICAgIGlmICh1bndyYXBSTm9kZShsVmlld1tpXSkgPT09IHRhcmdldCkge1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuLyoqXG4gKiBMb2NhdGVzIHRoZSBuZXh0IHROb2RlIChjaGlsZCwgc2libGluZyBvciBwYXJlbnQpLlxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZU5leHRFbGVtZW50KHROb2RlKSB7XG4gICAgaWYgKHROb2RlLmNoaWxkKSB7XG4gICAgICAgIHJldHVybiB0Tm9kZS5jaGlsZDtcbiAgICB9XG4gICAgZWxzZSBpZiAodE5vZGUubmV4dCkge1xuICAgICAgICByZXR1cm4gdE5vZGUubmV4dDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIExldCdzIHRha2UgdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZTogPGRpdj48c3Bhbj50ZXh0PC9zcGFuPjwvZGl2Pjxjb21wb25lbnQvPlxuICAgICAgICAvLyBBZnRlciBjaGVja2luZyB0aGUgdGV4dCBub2RlLCB3ZSBuZWVkIHRvIGZpbmQgdGhlIG5leHQgcGFyZW50IHRoYXQgaGFzIGEgXCJuZXh0XCIgVE5vZGUsXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSB0aGUgcGFyZW50IGBkaXZgLCBzbyB0aGF0IHdlIGNhbiBmaW5kIHRoZSBjb21wb25lbnQuXG4gICAgICAgIHdoaWxlICh0Tm9kZS5wYXJlbnQgJiYgIXROb2RlLnBhcmVudC5uZXh0KSB7XG4gICAgICAgICAgICB0Tm9kZSA9IHROb2RlLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdE5vZGUucGFyZW50ICYmIHROb2RlLnBhcmVudC5uZXh0O1xuICAgIH1cbn1cbi8qKlxuICogTG9jYXRlcyB0aGUgY29tcG9uZW50IHdpdGhpbiB0aGUgZ2l2ZW4gTFZpZXcgYW5kIHJldHVybnMgdGhlIG1hdGNoaW5nIGluZGV4XG4gKi9cbmZ1bmN0aW9uIGZpbmRWaWFDb21wb25lbnQobFZpZXcsIGNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgY29uc3QgY29tcG9uZW50SW5kaWNlcyA9IGxWaWV3W1RWSUVXXS5jb21wb25lbnRzO1xuICAgIGlmIChjb21wb25lbnRJbmRpY2VzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcG9uZW50SW5kaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudENvbXBvbmVudEluZGV4ID0gY29tcG9uZW50SW5kaWNlc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFZpZXcgPSBnZXRDb21wb25lbnRMVmlld0J5SW5kZXgoZWxlbWVudENvbXBvbmVudEluZGV4LCBsVmlldyk7XG4gICAgICAgICAgICBpZiAoY29tcG9uZW50Vmlld1tDT05URVhUXSA9PT0gY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudENvbXBvbmVudEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCByb290Q29tcG9uZW50VmlldyA9IGdldENvbXBvbmVudExWaWV3QnlJbmRleChIRUFERVJfT0ZGU0VULCBsVmlldyk7XG4gICAgICAgIGNvbnN0IHJvb3RDb21wb25lbnQgPSByb290Q29tcG9uZW50Vmlld1tDT05URVhUXTtcbiAgICAgICAgaWYgKHJvb3RDb21wb25lbnQgPT09IGNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgICAgICAgICAvLyB3ZSBhcmUgZGVhbGluZyB3aXRoIHRoZSByb290IGVsZW1lbnQgaGVyZSB0aGVyZWZvcmUgd2Uga25vdyB0aGF0IHRoZVxuICAgICAgICAgICAgLy8gZWxlbWVudCBpcyB0aGUgdmVyeSBmaXJzdCBlbGVtZW50IGFmdGVyIHRoZSBIRUFERVIgZGF0YSBpbiB0aGUgbFZpZXdcbiAgICAgICAgICAgIHJldHVybiBIRUFERVJfT0ZGU0VUO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbi8qKlxuICogTG9jYXRlcyB0aGUgZGlyZWN0aXZlIHdpdGhpbiB0aGUgZ2l2ZW4gTFZpZXcgYW5kIHJldHVybnMgdGhlIG1hdGNoaW5nIGluZGV4XG4gKi9cbmZ1bmN0aW9uIGZpbmRWaWFEaXJlY3RpdmUobFZpZXcsIGRpcmVjdGl2ZUluc3RhbmNlKSB7XG4gICAgLy8gaWYgYSBkaXJlY3RpdmUgaXMgbW9ua2V5IHBhdGNoZWQgdGhlbiBpdCB3aWxsIChieSBkZWZhdWx0KVxuICAgIC8vIGhhdmUgYSByZWZlcmVuY2UgdG8gdGhlIExWaWV3IG9mIHRoZSBjdXJyZW50IHZpZXcuIFRoZVxuICAgIC8vIGVsZW1lbnQgYm91bmQgdG8gdGhlIGRpcmVjdGl2ZSBiZWluZyBzZWFyY2ggbGl2ZXMgc29tZXdoZXJlXG4gICAgLy8gaW4gdGhlIHZpZXcgZGF0YS4gV2UgbG9vcCB0aHJvdWdoIHRoZSBub2RlcyBhbmQgY2hlY2sgdGhlaXJcbiAgICAvLyBsaXN0IG9mIGRpcmVjdGl2ZXMgZm9yIHRoZSBpbnN0YW5jZS5cbiAgICBsZXQgdE5vZGUgPSBsVmlld1tUVklFV10uZmlyc3RDaGlsZDtcbiAgICB3aGlsZSAodE5vZGUpIHtcbiAgICAgICAgY29uc3QgZGlyZWN0aXZlSW5kZXhTdGFydCA9IHROb2RlLmRpcmVjdGl2ZVN0YXJ0O1xuICAgICAgICBjb25zdCBkaXJlY3RpdmVJbmRleEVuZCA9IHROb2RlLmRpcmVjdGl2ZUVuZDtcbiAgICAgICAgZm9yIChsZXQgaSA9IGRpcmVjdGl2ZUluZGV4U3RhcnQ7IGkgPCBkaXJlY3RpdmVJbmRleEVuZDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobFZpZXdbaV0gPT09IGRpcmVjdGl2ZUluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHROb2RlLmluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHROb2RlID0gdHJhdmVyc2VOZXh0RWxlbWVudCh0Tm9kZSk7XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbi8qKlxuICogUmV0dXJucyBhIGxpc3Qgb2YgZGlyZWN0aXZlcyBleHRyYWN0ZWQgZnJvbSB0aGUgZ2l2ZW4gdmlldyBiYXNlZCBvbiB0aGVcbiAqIHByb3ZpZGVkIGxpc3Qgb2YgZGlyZWN0aXZlIGluZGV4IHZhbHVlcy5cbiAqXG4gKiBAcGFyYW0gbm9kZUluZGV4IFRoZSBub2RlIGluZGV4XG4gKiBAcGFyYW0gbFZpZXcgVGhlIHRhcmdldCB2aWV3IGRhdGFcbiAqIEBwYXJhbSBpbmNsdWRlQ29tcG9uZW50cyBXaGV0aGVyIG9yIG5vdCB0byBpbmNsdWRlIGNvbXBvbmVudHMgaW4gcmV0dXJuZWQgZGlyZWN0aXZlc1xuICovXG5mdW5jdGlvbiBnZXREaXJlY3RpdmVzQXROb2RlSW5kZXgobm9kZUluZGV4LCBsVmlldywgaW5jbHVkZUNvbXBvbmVudHMpIHtcbiAgICBjb25zdCB0Tm9kZSA9IGxWaWV3W1RWSUVXXS5kYXRhW25vZGVJbmRleF07XG4gICAgbGV0IGRpcmVjdGl2ZVN0YXJ0SW5kZXggPSB0Tm9kZS5kaXJlY3RpdmVTdGFydDtcbiAgICBpZiAoZGlyZWN0aXZlU3RhcnRJbmRleCA9PSAwKVxuICAgICAgICByZXR1cm4gRU1QVFlfQVJSQVk7XG4gICAgY29uc3QgZGlyZWN0aXZlRW5kSW5kZXggPSB0Tm9kZS5kaXJlY3RpdmVFbmQ7XG4gICAgaWYgKCFpbmNsdWRlQ29tcG9uZW50cyAmJiB0Tm9kZS5mbGFncyAmIDIgLyogaXNDb21wb25lbnRIb3N0ICovKVxuICAgICAgICBkaXJlY3RpdmVTdGFydEluZGV4Kys7XG4gICAgcmV0dXJuIGxWaWV3LnNsaWNlKGRpcmVjdGl2ZVN0YXJ0SW5kZXgsIGRpcmVjdGl2ZUVuZEluZGV4KTtcbn1cbmZ1bmN0aW9uIGdldENvbXBvbmVudEF0Tm9kZUluZGV4KG5vZGVJbmRleCwgbFZpZXcpIHtcbiAgICBjb25zdCB0Tm9kZSA9IGxWaWV3W1RWSUVXXS5kYXRhW25vZGVJbmRleF07XG4gICAgbGV0IGRpcmVjdGl2ZVN0YXJ0SW5kZXggPSB0Tm9kZS5kaXJlY3RpdmVTdGFydDtcbiAgICByZXR1cm4gdE5vZGUuZmxhZ3MgJiAyIC8qIGlzQ29tcG9uZW50SG9zdCAqLyA/IGxWaWV3W2RpcmVjdGl2ZVN0YXJ0SW5kZXhdIDogbnVsbDtcbn1cbi8qKlxuICogUmV0dXJucyBhIG1hcCBvZiBsb2NhbCByZWZlcmVuY2VzIChsb2NhbCByZWZlcmVuY2UgbmFtZSA9PiBlbGVtZW50IG9yIGRpcmVjdGl2ZSBpbnN0YW5jZSkgdGhhdFxuICogZXhpc3Qgb24gYSBnaXZlbiBlbGVtZW50LlxuICovXG5mdW5jdGlvbiBkaXNjb3ZlckxvY2FsUmVmcyhsVmlldywgbm9kZUluZGV4KSB7XG4gICAgY29uc3QgdE5vZGUgPSBsVmlld1tUVklFV10uZGF0YVtub2RlSW5kZXhdO1xuICAgIGlmICh0Tm9kZSAmJiB0Tm9kZS5sb2NhbE5hbWVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgICBsZXQgbG9jYWxJbmRleCA9IHROb2RlLmluZGV4ICsgMTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0Tm9kZS5sb2NhbE5hbWVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICByZXN1bHRbdE5vZGUubG9jYWxOYW1lc1tpXV0gPSBsVmlld1tsb2NhbEluZGV4XTtcbiAgICAgICAgICAgIGxvY2FsSW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5jb25zdCBFUlJPUl9PUklHSU5BTF9FUlJPUiA9ICduZ09yaWdpbmFsRXJyb3InO1xuY29uc3QgRVJST1JfTE9HR0VSID0gJ25nRXJyb3JMb2dnZXInO1xuZnVuY3Rpb24gd3JhcHBlZEVycm9yKG1lc3NhZ2UsIG9yaWdpbmFsRXJyb3IpIHtcbiAgICBjb25zdCBtc2cgPSBgJHttZXNzYWdlfSBjYXVzZWQgYnk6ICR7b3JpZ2luYWxFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gb3JpZ2luYWxFcnJvci5tZXNzYWdlIDogb3JpZ2luYWxFcnJvcn1gO1xuICAgIGNvbnN0IGVycm9yID0gRXJyb3IobXNnKTtcbiAgICBlcnJvcltFUlJPUl9PUklHSU5BTF9FUlJPUl0gPSBvcmlnaW5hbEVycm9yO1xuICAgIHJldHVybiBlcnJvcjtcbn1cbmZ1bmN0aW9uIGdldE9yaWdpbmFsRXJyb3IoZXJyb3IpIHtcbiAgICByZXR1cm4gZXJyb3JbRVJST1JfT1JJR0lOQUxfRVJST1JdO1xufVxuZnVuY3Rpb24gZ2V0RXJyb3JMb2dnZXIoZXJyb3IpIHtcbiAgICByZXR1cm4gZXJyb3IgJiYgZXJyb3JbRVJST1JfTE9HR0VSXSB8fCBkZWZhdWx0RXJyb3JMb2dnZXI7XG59XG5mdW5jdGlvbiBkZWZhdWx0RXJyb3JMb2dnZXIoY29uc29sZSwgLi4udmFsdWVzKSB7XG4gICAgY29uc29sZS5lcnJvciguLi52YWx1ZXMpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBob29rIGZvciBjZW50cmFsaXplZCBleGNlcHRpb24gaGFuZGxpbmcuXG4gKlxuICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgYEVycm9ySGFuZGxlcmAgcHJpbnRzIGVycm9yIG1lc3NhZ2VzIHRvIHRoZSBgY29uc29sZWAuIFRvXG4gKiBpbnRlcmNlcHQgZXJyb3IgaGFuZGxpbmcsIHdyaXRlIGEgY3VzdG9tIGV4Y2VwdGlvbiBoYW5kbGVyIHRoYXQgcmVwbGFjZXMgdGhpcyBkZWZhdWx0IGFzXG4gKiBhcHByb3ByaWF0ZSBmb3IgeW91ciBhcHAuXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqICMjIyBFeGFtcGxlXG4gKlxuICogYGBgXG4gKiBjbGFzcyBNeUVycm9ySGFuZGxlciBpbXBsZW1lbnRzIEVycm9ySGFuZGxlciB7XG4gKiAgIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gKiAgICAgLy8gZG8gc29tZXRoaW5nIHdpdGggdGhlIGV4Y2VwdGlvblxuICogICB9XG4gKiB9XG4gKlxuICogQE5nTW9kdWxlKHtcbiAqICAgcHJvdmlkZXJzOiBbe3Byb3ZpZGU6IEVycm9ySGFuZGxlciwgdXNlQ2xhc3M6IE15RXJyb3JIYW5kbGVyfV1cbiAqIH0pXG4gKiBjbGFzcyBNeU1vZHVsZSB7fVxuICogYGBgXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBFcnJvckhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9jb25zb2xlID0gY29uc29sZTtcbiAgICB9XG4gICAgaGFuZGxlRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxFcnJvciA9IHRoaXMuX2ZpbmRPcmlnaW5hbEVycm9yKGVycm9yKTtcbiAgICAgICAgLy8gTm90ZTogQnJvd3NlciBjb25zb2xlcyBzaG93IHRoZSBwbGFjZSBmcm9tIHdoZXJlIGNvbnNvbGUuZXJyb3Igd2FzIGNhbGxlZC5cbiAgICAgICAgLy8gV2UgY2FuIHVzZSB0aGlzIHRvIGdpdmUgdXNlcnMgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3IuXG4gICAgICAgIGNvbnN0IGVycm9yTG9nZ2VyID0gZ2V0RXJyb3JMb2dnZXIoZXJyb3IpO1xuICAgICAgICBlcnJvckxvZ2dlcih0aGlzLl9jb25zb2xlLCBgRVJST1JgLCBlcnJvcik7XG4gICAgICAgIGlmIChvcmlnaW5hbEVycm9yKSB7XG4gICAgICAgICAgICBlcnJvckxvZ2dlcih0aGlzLl9jb25zb2xlLCBgT1JJR0lOQUwgRVJST1JgLCBvcmlnaW5hbEVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2ZpbmRPcmlnaW5hbEVycm9yKGVycm9yKSB7XG4gICAgICAgIGxldCBlID0gZXJyb3IgJiYgZ2V0T3JpZ2luYWxFcnJvcihlcnJvcik7XG4gICAgICAgIHdoaWxlIChlICYmIGdldE9yaWdpbmFsRXJyb3IoZSkpIHtcbiAgICAgICAgICAgIGUgPSBnZXRPcmlnaW5hbEVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlIHx8IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogRGVmaW5lcyBhIHNjaGVtYSB0aGF0IGFsbG93cyBhbiBOZ01vZHVsZSB0byBjb250YWluIHRoZSBmb2xsb3dpbmc6XG4gKiAtIE5vbi1Bbmd1bGFyIGVsZW1lbnRzIG5hbWVkIHdpdGggZGFzaCBjYXNlIChgLWApLlxuICogLSBFbGVtZW50IHByb3BlcnRpZXMgbmFtZWQgd2l0aCBkYXNoIGNhc2UgKGAtYCkuXG4gKiBEYXNoIGNhc2UgaXMgdGhlIG5hbWluZyBjb252ZW50aW9uIGZvciBjdXN0b20gZWxlbWVudHMuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBDVVNUT01fRUxFTUVOVFNfU0NIRU1BID0ge1xuICAgIG5hbWU6ICdjdXN0b20tZWxlbWVudHMnXG59O1xuLyoqXG4gKiBEZWZpbmVzIGEgc2NoZW1hIHRoYXQgYWxsb3dzIGFueSBwcm9wZXJ0eSBvbiBhbnkgZWxlbWVudC5cbiAqXG4gKiBUaGlzIHNjaGVtYSBhbGxvd3MgeW91IHRvIGlnbm9yZSB0aGUgZXJyb3JzIHJlbGF0ZWQgdG8gYW55IHVua25vd24gZWxlbWVudHMgb3IgcHJvcGVydGllcyBpbiBhXG4gKiB0ZW1wbGF0ZS4gVGhlIHVzYWdlIG9mIHRoaXMgc2NoZW1hIGlzIGdlbmVyYWxseSBkaXNjb3VyYWdlZCBiZWNhdXNlIGl0IHByZXZlbnRzIHVzZWZ1bCB2YWxpZGF0aW9uXG4gKiBhbmQgbWF5IGhpZGUgcmVhbCBlcnJvcnMgaW4geW91ciB0ZW1wbGF0ZS4gQ29uc2lkZXIgdXNpbmcgdGhlIGBDVVNUT01fRUxFTUVOVFNfU0NIRU1BYCBpbnN0ZWFkLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgTk9fRVJST1JTX1NDSEVNQSA9IHtcbiAgICBuYW1lOiAnbm8tZXJyb3JzLXNjaGVtYSdcbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBEaXNhbGxvd2VkIHN0cmluZ3MgaW4gdGhlIGNvbW1lbnQuXG4gKlxuICogc2VlOiBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNjb21tZW50c1xuICovXG5jb25zdCBDT01NRU5UX0RJU0FMTE9XRUQgPSAvXj58Xi0+fDwhLS18LS0+fC0tIT58PCEtJC9nO1xuLyoqXG4gKiBEZWxpbWl0ZXIgaW4gdGhlIGRpc2FsbG93ZWQgc3RyaW5ncyB3aGljaCBuZWVkcyB0byBiZSB3cmFwcGVkIHdpdGggemVybyB3aXRoIGNoYXJhY3Rlci5cbiAqL1xuY29uc3QgQ09NTUVOVF9ERUxJTUlURVIgPSAvKDx8PikvO1xuY29uc3QgQ09NTUVOVF9ERUxJTUlURVJfRVNDQVBFRCA9ICdcXHUyMDBCJDFcXHUyMDBCJztcbi8qKlxuICogRXNjYXBlIHRoZSBjb250ZW50IG9mIGNvbW1lbnQgc3RyaW5ncyBzbyB0aGF0IGl0IGNhbiBiZSBzYWZlbHkgaW5zZXJ0ZWQgaW50byBhIGNvbW1lbnQgbm9kZS5cbiAqXG4gKiBUaGUgaXNzdWUgaXMgdGhhdCBIVE1MIGRvZXMgbm90IHNwZWNpZnkgYW55IHdheSB0byBlc2NhcGUgY29tbWVudCBlbmQgdGV4dCBpbnNpZGUgdGhlIGNvbW1lbnQuXG4gKiBDb25zaWRlcjogYDwhLS0gVGhlIHdheSB5b3UgY2xvc2UgYSBjb21tZW50IGlzIHdpdGggXCI+XCIsIGFuZCBcIi0+XCIgYXQgdGhlIGJlZ2lubmluZyBvciBieSBcIi0tPlwiIG9yXG4gKiBcIi0tIT5cIiBhdCB0aGUgZW5kLiAtLT5gLiBBYm92ZSB0aGUgYFwiLS0+XCJgIGlzIG1lYW50IHRvIGJlIHRleHQgbm90IGFuIGVuZCB0byB0aGUgY29tbWVudC4gVGhpc1xuICogY2FuIGJlIGNyZWF0ZWQgcHJvZ3JhbW1hdGljYWxseSB0aHJvdWdoIERPTSBBUElzLiAoYDwhLS1gIGFyZSBhbHNvIGRpc2FsbG93ZWQuKVxuICpcbiAqIHNlZTogaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjY29tbWVudHNcbiAqXG4gKiBgYGBcbiAqIGRpdi5pbm5lckhUTUwgPSBkaXYuaW5uZXJIVE1MXG4gKiBgYGBcbiAqXG4gKiBPbmUgd291bGQgZXhwZWN0IHRoYXQgdGhlIGFib3ZlIGNvZGUgd291bGQgYmUgc2FmZSB0byBkbywgYnV0IGl0IHR1cm5zIG91dCB0aGF0IGJlY2F1c2UgY29tbWVudFxuICogdGV4dCBpcyBub3QgZXNjYXBlZCwgdGhlIGNvbW1lbnQgbWF5IGNvbnRhaW4gdGV4dCB3aGljaCB3aWxsIHByZW1hdHVyZWx5IGNsb3NlIHRoZSBjb21tZW50XG4gKiBvcGVuaW5nIHVwIHRoZSBhcHBsaWNhdGlvbiBmb3IgWFNTIGF0dGFjay4gKEluIFNTUiB3ZSBwcm9ncmFtbWF0aWNhbGx5IGNyZWF0ZSBjb21tZW50IG5vZGVzIHdoaWNoXG4gKiBtYXkgY29udGFpbiBzdWNoIHRleHQgYW5kIGV4cGVjdCB0aGVtIHRvIGJlIHNhZmUuKVxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZXNjYXBlcyB0aGUgY29tbWVudCB0ZXh0IGJ5IGxvb2tpbmcgZm9yIGNvbW1lbnQgZGVsaW1pdGVycyAoYDxgIGFuZCBgPmApIGFuZFxuICogc3Vycm91bmRpbmcgdGhlbSB3aXRoIGBfPl9gIHdoZXJlIHRoZSBgX2AgaXMgYSB6ZXJvIHdpZHRoIHNwYWNlIGBcXHUyMDBCYC4gVGhlIHJlc3VsdCBpcyB0aGF0IGlmIGFcbiAqIGNvbW1lbnQgY29udGFpbnMgYW55IG9mIHRoZSBjb21tZW50IHN0YXJ0L2VuZCBkZWxpbWl0ZXJzIChzdWNoIGFzIGA8IS0tYCwgYC0tPmAgb3IgYC0tIT5gKSB0aGVcbiAqIHRleHQgaXQgd2lsbCByZW5kZXIgbm9ybWFsbHkgYnV0IGl0IHdpbGwgbm90IGNhdXNlIHRoZSBIVE1MIHBhcnNlciB0byBjbG9zZS9vcGVuIHRoZSBjb21tZW50LlxuICpcbiAqIEBwYXJhbSB2YWx1ZSB0ZXh0IHRvIG1ha2Ugc2FmZSBmb3IgY29tbWVudCBub2RlIGJ5IGVzY2FwaW5nIHRoZSBjb21tZW50IG9wZW4vY2xvc2UgY2hhcmFjdGVyXG4gKiAgICAgc2VxdWVuY2UuXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZUNvbW1lbnRUZXh0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoQ09NTUVOVF9ESVNBTExPV0VELCAodGV4dCkgPT4gdGV4dC5yZXBsYWNlKENPTU1FTlRfREVMSU1JVEVSLCBDT01NRU5UX0RFTElNSVRFUl9FU0NBUEVEKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gbm9ybWFsaXplRGVidWdCaW5kaW5nTmFtZShuYW1lKSB7XG4gICAgLy8gQXR0cmlidXRlIG5hbWVzIHdpdGggYCRgIChlZyBgeC15JGApIGFyZSB2YWxpZCBwZXIgc3BlYywgYnV0IHVuc3VwcG9ydGVkIGJ5IHNvbWUgYnJvd3NlcnNcbiAgICBuYW1lID0gY2FtZWxDYXNlVG9EYXNoQ2FzZShuYW1lLnJlcGxhY2UoL1skQF0vZywgJ18nKSk7XG4gICAgcmV0dXJuIGBuZy1yZWZsZWN0LSR7bmFtZX1gO1xufVxuY29uc3QgQ0FNRUxfQ0FTRV9SRUdFWFAgPSAvKFtBLVpdKS9nO1xuZnVuY3Rpb24gY2FtZWxDYXNlVG9EYXNoQ2FzZShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKENBTUVMX0NBU0VfUkVHRVhQLCAoLi4ubSkgPT4gJy0nICsgbVsxXS50b0xvd2VyQ2FzZSgpKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZURlYnVnQmluZGluZ1ZhbHVlKHZhbHVlKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gTGltaXQgdGhlIHNpemUgb2YgdGhlIHZhbHVlIGFzIG90aGVyd2lzZSB0aGUgRE9NIGp1c3QgZ2V0cyBwb2xsdXRlZC5cbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyB2YWx1ZS50b1N0cmluZygpLnNsaWNlKDAsIDMwKSA6IHZhbHVlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gJ1tFUlJPUl0gRXhjZXB0aW9uIHdoaWxlIHRyeWluZyB0byBzZXJpYWxpemUgdGhlIHZhbHVlJztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuY29uc3QgZGVmYXVsdFNjaGVkdWxlciA9ICgoKSA9PiAodHlwZW9mIHJlcXVlc3RBbmltYXRpb25GcmFtZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgLy8gYnJvd3NlciBvbmx5XG4gICAgc2V0VGltZW91dCAvLyBldmVyeXRoaW5nIGVsc2VcbilcbiAgICAuYmluZChfZ2xvYmFsKSkoKTtcbi8qKlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVyZXNvbHZlV2luZG93KGVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xufVxuLyoqXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXJlc29sdmVEb2N1bWVudChlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQub3duZXJEb2N1bWVudDtcbn1cbi8qKlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVyZXNvbHZlQm9keShlbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQub3duZXJEb2N1bWVudC5ib2R5O1xufVxuLyoqXG4gKiBUaGUgc3BlY2lhbCBkZWxpbWl0ZXIgd2UgdXNlIHRvIHNlcGFyYXRlIHByb3BlcnR5IG5hbWVzLCBwcmVmaXhlcywgYW5kIHN1ZmZpeGVzXG4gKiBpbiBwcm9wZXJ0eSBiaW5kaW5nIG1ldGFkYXRhLiBTZWUgc3RvcmVCaW5kaW5nTWV0YWRhdGEoKS5cbiAqXG4gKiBXZSBpbnRlbnRpb25hbGx5IHVzZSB0aGUgVW5pY29kZSBcIlJFUExBQ0VNRU5UIENIQVJBQ1RFUlwiIChVK0ZGRkQpIGFzIGEgZGVsaW1pdGVyXG4gKiBiZWNhdXNlIGl0IGlzIGEgdmVyeSB1bmNvbW1vbiBjaGFyYWN0ZXIgdGhhdCBpcyB1bmxpa2VseSB0byBiZSBwYXJ0IG9mIGEgdXNlcidzXG4gKiBwcm9wZXJ0eSBuYW1lcyBvciBpbnRlcnBvbGF0aW9uIHN0cmluZ3MuIElmIGl0IGlzIGluIGZhY3QgdXNlZCBpbiBhIHByb3BlcnR5XG4gKiBiaW5kaW5nLCBEZWJ1Z0VsZW1lbnQucHJvcGVydGllcyB3aWxsIG5vdCByZXR1cm4gdGhlIGNvcnJlY3QgdmFsdWUgZm9yIHRoYXRcbiAqIGJpbmRpbmcuIEhvd2V2ZXIsIHRoZXJlIHNob3VsZCBiZSBubyBydW50aW1lIGVmZmVjdCBmb3IgcmVhbCBhcHBsaWNhdGlvbnMuXG4gKlxuICogVGhpcyBjaGFyYWN0ZXIgaXMgdHlwaWNhbGx5IHJlbmRlcmVkIGFzIGEgcXVlc3Rpb24gbWFyayBpbnNpZGUgb2YgYSBkaWFtb25kLlxuICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NwZWNpYWxzXyhVbmljb2RlX2Jsb2NrKVxuICpcbiAqL1xuY29uc3QgSU5URVJQT0xBVElPTl9ERUxJTUlURVIgPSBg77+9YDtcbi8qKlxuICogVW53cmFwIGEgdmFsdWUgd2hpY2ggbWlnaHQgYmUgYmVoaW5kIGEgY2xvc3VyZSAoZm9yIGZvcndhcmQgZGVjbGFyYXRpb24gcmVhc29ucykuXG4gKi9cbmZ1bmN0aW9uIG1heWJlVW53cmFwRm4odmFsdWUpIHtcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICByZXR1cm4gdmFsdWUoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqIENhbGxlZCB3aGVuIHRoZXJlIGFyZSBtdWx0aXBsZSBjb21wb25lbnQgc2VsZWN0b3JzIHRoYXQgbWF0Y2ggYSBnaXZlbiBub2RlICovXG5mdW5jdGlvbiB0aHJvd011bHRpcGxlQ29tcG9uZW50RXJyb3IodE5vZGUpIHtcbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKC0zMDAgLyogTVVMVElQTEVfQ09NUE9ORU5UU19NQVRDSCAqLywgYE11bHRpcGxlIGNvbXBvbmVudHMgbWF0Y2ggbm9kZSB3aXRoIHRhZ25hbWUgJHt0Tm9kZS52YWx1ZX1gKTtcbn1cbi8qKiBUaHJvd3MgYW4gRXhwcmVzc2lvbkNoYW5nZWRBZnRlckNoZWNrZWQgZXJyb3IgaWYgY2hlY2tOb0NoYW5nZXMgbW9kZSBpcyBvbi4gKi9cbmZ1bmN0aW9uIHRocm93RXJyb3JJZk5vQ2hhbmdlc01vZGUoY3JlYXRpb25Nb2RlLCBvbGRWYWx1ZSwgY3VyclZhbHVlLCBwcm9wTmFtZSkge1xuICAgIGNvbnN0IGZpZWxkID0gcHJvcE5hbWUgPyBgIGZvciAnJHtwcm9wTmFtZX0nYCA6ICcnO1xuICAgIGxldCBtc2cgPSBgRXhwcmVzc2lvbkNoYW5nZWRBZnRlckl0SGFzQmVlbkNoZWNrZWRFcnJvcjogRXhwcmVzc2lvbiBoYXMgY2hhbmdlZCBhZnRlciBpdCB3YXMgY2hlY2tlZC4gUHJldmlvdXMgdmFsdWUke2ZpZWxkfTogJyR7b2xkVmFsdWV9Jy4gQ3VycmVudCB2YWx1ZTogJyR7Y3VyclZhbHVlfScuYDtcbiAgICBpZiAoY3JlYXRpb25Nb2RlKSB7XG4gICAgICAgIG1zZyArPVxuICAgICAgICAgICAgYCBJdCBzZWVtcyBsaWtlIHRoZSB2aWV3IGhhcyBiZWVuIGNyZWF0ZWQgYWZ0ZXIgaXRzIHBhcmVudCBhbmQgaXRzIGNoaWxkcmVuIGhhdmUgYmVlbiBkaXJ0eSBjaGVja2VkLmAgK1xuICAgICAgICAgICAgICAgIGAgSGFzIGl0IGJlZW4gY3JlYXRlZCBpbiBhIGNoYW5nZSBkZXRlY3Rpb24gaG9vaz9gO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKC0xMDAgLyogRVhQUkVTU0lPTl9DSEFOR0VEX0FGVEVSX0NIRUNLRUQgKi8sIG1zZyk7XG59XG5mdW5jdGlvbiBjb25zdHJ1Y3REZXRhaWxzRm9ySW50ZXJwb2xhdGlvbihsVmlldywgcm9vdEluZGV4LCBleHByZXNzaW9uSW5kZXgsIG1ldGEsIGNoYW5nZWRWYWx1ZSkge1xuICAgIGNvbnN0IFtwcm9wTmFtZSwgcHJlZml4LCAuLi5jaHVua3NdID0gbWV0YS5zcGxpdChJTlRFUlBPTEFUSU9OX0RFTElNSVRFUik7XG4gICAgbGV0IG9sZFZhbHVlID0gcHJlZml4LCBuZXdWYWx1ZSA9IHByZWZpeDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNodW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBzbG90SWR4ID0gcm9vdEluZGV4ICsgaTtcbiAgICAgICAgb2xkVmFsdWUgKz0gYCR7bFZpZXdbc2xvdElkeF19JHtjaHVua3NbaV19YDtcbiAgICAgICAgbmV3VmFsdWUgKz0gYCR7c2xvdElkeCA9PT0gZXhwcmVzc2lvbkluZGV4ID8gY2hhbmdlZFZhbHVlIDogbFZpZXdbc2xvdElkeF19JHtjaHVua3NbaV19YDtcbiAgICB9XG4gICAgcmV0dXJuIHsgcHJvcE5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSB9O1xufVxuLyoqXG4gKiBDb25zdHJ1Y3RzIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGRldGFpbHMgZm9yIHRoZSBFeHByZXNzaW9uQ2hhbmdlZEFmdGVySXRIYXNCZWVuQ2hlY2tlZEVycm9yOlxuICogLSBwcm9wZXJ0eSBuYW1lIChmb3IgcHJvcGVydHkgYmluZGluZ3Mgb3IgaW50ZXJwb2xhdGlvbnMpXG4gKiAtIG9sZCBhbmQgbmV3IHZhbHVlcywgZW5yaWNoZWQgdXNpbmcgaW5mb3JtYXRpb24gZnJvbSBtZXRhZGF0YVxuICpcbiAqIE1vcmUgaW5mb3JtYXRpb24gb24gdGhlIG1ldGFkYXRhIHN0b3JhZ2UgZm9ybWF0IGNhbiBiZSBmb3VuZCBpbiBgc3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YWBcbiAqIGZ1bmN0aW9uIGRlc2NyaXB0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRFeHByZXNzaW9uQ2hhbmdlZEVycm9yRGV0YWlscyhsVmlldywgYmluZGluZ0luZGV4LCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICBjb25zdCB0RGF0YSA9IGxWaWV3W1RWSUVXXS5kYXRhO1xuICAgIGNvbnN0IG1ldGFkYXRhID0gdERhdGFbYmluZGluZ0luZGV4XTtcbiAgICBpZiAodHlwZW9mIG1ldGFkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBtZXRhZGF0YSBmb3IgcHJvcGVydHkgaW50ZXJwb2xhdGlvblxuICAgICAgICBpZiAobWV0YWRhdGEuaW5kZXhPZihJTlRFUlBPTEFUSU9OX0RFTElNSVRFUikgPiAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdERldGFpbHNGb3JJbnRlcnBvbGF0aW9uKGxWaWV3LCBiaW5kaW5nSW5kZXgsIGJpbmRpbmdJbmRleCwgbWV0YWRhdGEsIG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtZXRhZGF0YSBmb3IgcHJvcGVydHkgYmluZGluZ1xuICAgICAgICByZXR1cm4geyBwcm9wTmFtZTogbWV0YWRhdGEsIG9sZFZhbHVlLCBuZXdWYWx1ZSB9O1xuICAgIH1cbiAgICAvLyBtZXRhZGF0YSBpcyBub3QgYXZhaWxhYmxlIGZvciB0aGlzIGV4cHJlc3Npb24sIGNoZWNrIGlmIHRoaXMgZXhwcmVzc2lvbiBpcyBhIHBhcnQgb2YgdGhlXG4gICAgLy8gcHJvcGVydHkgaW50ZXJwb2xhdGlvbiBieSBnb2luZyBmcm9tIHRoZSBjdXJyZW50IGJpbmRpbmcgaW5kZXggbGVmdCBhbmQgbG9vayBmb3IgYSBzdHJpbmcgdGhhdFxuICAgIC8vIGNvbnRhaW5zIElOVEVSUE9MQVRJT05fREVMSU1JVEVSLCB0aGUgbGF5b3V0IGluIHRWaWV3LmRhdGEgZm9yIHRoaXMgY2FzZSB3aWxsIGxvb2sgbGlrZSB0aGlzOlxuICAgIC8vIFsuLi4sICdpZO+/vVByZWZpeCDvv70gYW5kIO+/vSBzdWZmaXgnLCBudWxsLCBudWxsLCBudWxsLCAuLi5dXG4gICAgaWYgKG1ldGFkYXRhID09PSBudWxsKSB7XG4gICAgICAgIGxldCBpZHggPSBiaW5kaW5nSW5kZXggLSAxO1xuICAgICAgICB3aGlsZSAodHlwZW9mIHREYXRhW2lkeF0gIT09ICdzdHJpbmcnICYmIHREYXRhW2lkeCArIDFdID09PSBudWxsKSB7XG4gICAgICAgICAgICBpZHgtLTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtZXRhID0gdERhdGFbaWR4XTtcbiAgICAgICAgaWYgKHR5cGVvZiBtZXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IG1ldGEubWF0Y2gobmV3IFJlZ0V4cChJTlRFUlBPTEFUSU9OX0RFTElNSVRFUiwgJ2cnKSk7XG4gICAgICAgICAgICAvLyBmaXJzdCBpbnRlcnBvbGF0aW9uIGRlbGltaXRlciBzZXBhcmF0ZXMgcHJvcGVydHkgbmFtZSBmcm9tIGludGVycG9sYXRpb24gcGFydHMgKGluIGNhc2Ugb2ZcbiAgICAgICAgICAgIC8vIHByb3BlcnR5IGludGVycG9sYXRpb25zKSwgc28gd2Ugc3VidHJhY3Qgb25lIGZyb20gdG90YWwgbnVtYmVyIG9mIGZvdW5kIGRlbGltaXRlcnNcbiAgICAgICAgICAgIGlmIChtYXRjaGVzICYmIChtYXRjaGVzLmxlbmd0aCAtIDEpID4gYmluZGluZ0luZGV4IC0gaWR4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdERldGFpbHNGb3JJbnRlcnBvbGF0aW9uKGxWaWV3LCBpZHgsIGJpbmRpbmdJbmRleCwgbWV0YSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IHByb3BOYW1lOiB1bmRlZmluZWQsIG9sZFZhbHVlLCBuZXdWYWx1ZSB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogRmxhZ3MgZm9yIHJlbmRlcmVyLXNwZWNpZmljIHN0eWxlIG1vZGlmaWVycy5cbiAqIEBwdWJsaWNBcGlcbiAqL1xudmFyIFJlbmRlcmVyU3R5bGVGbGFnczI7XG4oZnVuY3Rpb24gKFJlbmRlcmVyU3R5bGVGbGFnczIpIHtcbiAgICAvLyBUT0RPKG1pc2tvKTogVGhpcyBuZWVkcyB0byBiZSByZWZhY3RvcmVkIGludG8gYSBzZXBhcmF0ZSBmaWxlIHNvIHRoYXQgaXQgY2FuIGJlIGltcG9ydGVkIGZyb21cbiAgICAvLyBgbm9kZV9tYW5pcHVsYXRpb24udHNgIEN1cnJlbnRseSBkb2luZyB0aGUgaW1wb3J0IGNhdXNlIHJlc29sdXRpb24gb3JkZXIgdG8gY2hhbmdlIGFuZCBmYWlsc1xuICAgIC8vIHRoZSB0ZXN0cy4gVGhlIHdvcmsgYXJvdW5kIGlzIHRvIGhhdmUgaGFyZCBjb2RlZCB2YWx1ZSBpbiBgbm9kZV9tYW5pcHVsYXRpb24udHNgIGZvciBub3cuXG4gICAgLyoqXG4gICAgICogTWFya3MgYSBzdHlsZSBhcyBpbXBvcnRhbnQuXG4gICAgICovXG4gICAgUmVuZGVyZXJTdHlsZUZsYWdzMltSZW5kZXJlclN0eWxlRmxhZ3MyW1wiSW1wb3J0YW50XCJdID0gMV0gPSBcIkltcG9ydGFudFwiO1xuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgc3R5bGUgYXMgdXNpbmcgZGFzaCBjYXNlIG5hbWluZyAodGhpcy1pcy1kYXNoLWNhc2UpLlxuICAgICAqL1xuICAgIFJlbmRlcmVyU3R5bGVGbGFnczJbUmVuZGVyZXJTdHlsZUZsYWdzMltcIkRhc2hDYXNlXCJdID0gMl0gPSBcIkRhc2hDYXNlXCI7XG59KShSZW5kZXJlclN0eWxlRmxhZ3MyIHx8IChSZW5kZXJlclN0eWxlRmxhZ3MyID0ge30pKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5sZXQgX2ljdUNvbnRhaW5lckl0ZXJhdGU7XG4vKipcbiAqIEl0ZXJhdG9yIHdoaWNoIHByb3ZpZGVzIGFiaWxpdHkgdG8gdmlzaXQgYWxsIG9mIHRoZSBgVEljdUNvbnRhaW5lck5vZGVgIHJvb3QgYFJOb2RlYHMuXG4gKi9cbmZ1bmN0aW9uIGljdUNvbnRhaW5lckl0ZXJhdGUodEljdUNvbnRhaW5lck5vZGUsIGxWaWV3KSB7XG4gICAgcmV0dXJuIF9pY3VDb250YWluZXJJdGVyYXRlKHRJY3VDb250YWluZXJOb2RlLCBsVmlldyk7XG59XG4vKipcbiAqIEVuc3VyZXMgdGhhdCBgSWN1Q29udGFpbmVyVmlzaXRvcmAncyBpbXBsZW1lbnRhdGlvbiBpcyBwcmVzZW50LlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgaW52b2tlZCB3aGVuIGkxOG4gaW5zdHJ1Y3Rpb24gY29tZXMgYWNyb3NzIGFuIElDVS4gVGhlIHB1cnBvc2UgaXMgdG8gYWxsb3cgdGhlXG4gKiBidW5kbGVyIHRvIHRyZWUgc2hha2UgSUNVIGxvZ2ljIGFuZCBvbmx5IGxvYWQgaXQgaWYgSUNVIGluc3RydWN0aW9uIGlzIGV4ZWN1dGVkLlxuICovXG5mdW5jdGlvbiBlbnN1cmVJY3VDb250YWluZXJWaXNpdG9yTG9hZGVkKGxvYWRlcikge1xuICAgIGlmIChfaWN1Q29udGFpbmVySXRlcmF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIERvIG5vdCBpbmxpbmUgdGhpcyBmdW5jdGlvbi4gV2Ugd2FudCB0byBrZWVwIGBlbnN1cmVJY3VDb250YWluZXJWaXNpdG9yTG9hZGVkYCBsaWdodCwgc28gaXRcbiAgICAgICAgLy8gY2FuIGJlIGlubGluZWQgaW50byBjYWxsLXNpdGUuXG4gICAgICAgIF9pY3VDb250YWluZXJJdGVyYXRlID0gbG9hZGVyKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8vIE5vdGU6IFRoaXMgaGFjayBpcyBuZWNlc3Nhcnkgc28gd2UgZG9uJ3QgZXJyb25lb3VzbHkgZ2V0IGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuLy8gZmFpbHVyZSBiYXNlZCBvbiB0eXBlcy5cbmNvbnN0IHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkJDMgPSAxO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogR2V0cyB0aGUgcGFyZW50IExWaWV3IG9mIHRoZSBwYXNzZWQgTFZpZXcsIGlmIHRoZSBQQVJFTlQgaXMgYW4gTENvbnRhaW5lciwgd2lsbCBnZXQgdGhlIHBhcmVudCBvZlxuICogdGhhdCBMQ29udGFpbmVyLCB3aGljaCBpcyBhbiBMVmlld1xuICogQHBhcmFtIGxWaWV3IHRoZSBsVmlldyB3aG9zZSBwYXJlbnQgdG8gZ2V0XG4gKi9cbmZ1bmN0aW9uIGdldExWaWV3UGFyZW50KGxWaWV3KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExWaWV3KGxWaWV3KTtcbiAgICBjb25zdCBwYXJlbnQgPSBsVmlld1tQQVJFTlRdO1xuICAgIHJldHVybiBpc0xDb250YWluZXIocGFyZW50KSA/IHBhcmVudFtQQVJFTlRdIDogcGFyZW50O1xufVxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgcm9vdCB2aWV3IGZyb20gYW55IGNvbXBvbmVudCBvciBgTFZpZXdgIGJ5IHdhbGtpbmcgdGhlIHBhcmVudCBgTFZpZXdgIHVudGlsXG4gKiByZWFjaGluZyB0aGUgcm9vdCBgTFZpZXdgLlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRPckxWaWV3IGFueSBjb21wb25lbnQgb3IgYExWaWV3YFxuICovXG5mdW5jdGlvbiBnZXRSb290Vmlldyhjb21wb25lbnRPckxWaWV3KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQoY29tcG9uZW50T3JMVmlldywgJ2NvbXBvbmVudCcpO1xuICAgIGxldCBsVmlldyA9IGlzTFZpZXcoY29tcG9uZW50T3JMVmlldykgPyBjb21wb25lbnRPckxWaWV3IDogcmVhZFBhdGNoZWRMVmlldyhjb21wb25lbnRPckxWaWV3KTtcbiAgICB3aGlsZSAobFZpZXcgJiYgIShsVmlld1tGTEFHU10gJiA1MTIgLyogSXNSb290ICovKSkge1xuICAgICAgICBsVmlldyA9IGdldExWaWV3UGFyZW50KGxWaWV3KTtcbiAgICB9XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExWaWV3KGxWaWV3KTtcbiAgICByZXR1cm4gbFZpZXc7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGBSb290Q29udGV4dGAgaW5zdGFuY2UgdGhhdCBpcyBhc3NvY2lhdGVkIHdpdGhcbiAqIHRoZSBhcHBsaWNhdGlvbiB3aGVyZSB0aGUgdGFyZ2V0IGlzIHNpdHVhdGVkLiBJdCBkb2VzIHRoaXMgYnkgd2Fsa2luZyB0aGUgcGFyZW50IHZpZXdzIHVudGlsIGl0XG4gKiBnZXRzIHRvIHRoZSByb290IHZpZXcsIHRoZW4gZ2V0dGluZyB0aGUgY29udGV4dCBvZmYgb2YgdGhhdC5cbiAqXG4gKiBAcGFyYW0gdmlld09yQ29tcG9uZW50IHRoZSBgTFZpZXdgIG9yIGNvbXBvbmVudCB0byBnZXQgdGhlIHJvb3QgY29udGV4dCBmb3IuXG4gKi9cbmZ1bmN0aW9uIGdldFJvb3RDb250ZXh0KHZpZXdPckNvbXBvbmVudCkge1xuICAgIGNvbnN0IHJvb3RWaWV3ID0gZ2V0Um9vdFZpZXcodmlld09yQ29tcG9uZW50KTtcbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0RGVmaW5lZChyb290Vmlld1tDT05URVhUXSwgJ1Jvb3RWaWV3IGhhcyBubyBjb250ZXh0LiBQZXJoYXBzIGl0IGlzIGRpc2Nvbm5lY3RlZD8nKTtcbiAgICByZXR1cm4gcm9vdFZpZXdbQ09OVEVYVF07XG59XG4vKipcbiAqIEdldHMgdGhlIGZpcnN0IGBMQ29udGFpbmVyYCBpbiB0aGUgTFZpZXcgb3IgYG51bGxgIGlmIG5vbmUgZXhpc3RzLlxuICovXG5mdW5jdGlvbiBnZXRGaXJzdExDb250YWluZXIobFZpZXcpIHtcbiAgICByZXR1cm4gZ2V0TmVhcmVzdExDb250YWluZXIobFZpZXdbQ0hJTERfSEVBRF0pO1xufVxuLyoqXG4gKiBHZXRzIHRoZSBuZXh0IGBMQ29udGFpbmVyYCB0aGF0IGlzIGEgc2libGluZyBvZiB0aGUgZ2l2ZW4gY29udGFpbmVyLlxuICovXG5mdW5jdGlvbiBnZXROZXh0TENvbnRhaW5lcihjb250YWluZXIpIHtcbiAgICByZXR1cm4gZ2V0TmVhcmVzdExDb250YWluZXIoY29udGFpbmVyW05FWFRdKTtcbn1cbmZ1bmN0aW9uIGdldE5lYXJlc3RMQ29udGFpbmVyKHZpZXdPckNvbnRhaW5lcikge1xuICAgIHdoaWxlICh2aWV3T3JDb250YWluZXIgIT09IG51bGwgJiYgIWlzTENvbnRhaW5lcih2aWV3T3JDb250YWluZXIpKSB7XG4gICAgICAgIHZpZXdPckNvbnRhaW5lciA9IHZpZXdPckNvbnRhaW5lcltORVhUXTtcbiAgICB9XG4gICAgcmV0dXJuIHZpZXdPckNvbnRhaW5lcjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5jb25zdCB1bnVzZWRWYWx1ZVRvUGxhY2F0ZUFqZCQyID0gdW51c2VkVmFsdWVFeHBvcnRUb1BsYWNhdGVBamQkNyArIHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkJDQgKyB1bnVzZWRWYWx1ZUV4cG9ydFRvUGxhY2F0ZUFqZCQzICsgdW51c2VkVmFsdWVFeHBvcnRUb1BsYWNhdGVBamQkNiArIHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkJDg7XG4vKipcbiAqIE5PVEU6IGZvciBwZXJmb3JtYW5jZSByZWFzb25zLCB0aGUgcG9zc2libGUgYWN0aW9ucyBhcmUgaW5saW5lZCB3aXRoaW4gdGhlIGZ1bmN0aW9uIGluc3RlYWQgb2ZcbiAqIGJlaW5nIHBhc3NlZCBhcyBhbiBhcmd1bWVudC5cbiAqL1xuZnVuY3Rpb24gYXBwbHlUb0VsZW1lbnRPckNvbnRhaW5lcihhY3Rpb24sIHJlbmRlcmVyLCBwYXJlbnQsIGxOb2RlVG9IYW5kbGUsIGJlZm9yZU5vZGUpIHtcbiAgICAvLyBJZiB0aGlzIHNsb3Qgd2FzIGFsbG9jYXRlZCBmb3IgYSB0ZXh0IG5vZGUgZHluYW1pY2FsbHkgY3JlYXRlZCBieSBpMThuLCB0aGUgdGV4dCBub2RlIGl0c2VsZlxuICAgIC8vIHdvbid0IGJlIGNyZWF0ZWQgdW50aWwgaTE4bkFwcGx5KCkgaW4gdGhlIHVwZGF0ZSBibG9jaywgc28gdGhpcyBub2RlIHNob3VsZCBiZSBza2lwcGVkLlxuICAgIC8vIEZvciBtb3JlIGluZm8sIHNlZSBcIklDVSBleHByZXNzaW9ucyBzaG91bGQgd29yayBpbnNpZGUgYW4gbmdUZW1wbGF0ZU91dGxldCBpbnNpZGUgYW4gbmdGb3JcIlxuICAgIC8vIGluIGBpMThuX3NwZWMudHNgLlxuICAgIGlmIChsTm9kZVRvSGFuZGxlICE9IG51bGwpIHtcbiAgICAgICAgbGV0IGxDb250YWluZXI7XG4gICAgICAgIGxldCBpc0NvbXBvbmVudCA9IGZhbHNlO1xuICAgICAgICAvLyBXZSBhcmUgZXhwZWN0aW5nIGFuIFJOb2RlLCBidXQgaW4gdGhlIGNhc2Ugb2YgYSBjb21wb25lbnQgb3IgTENvbnRhaW5lciB0aGUgYFJOb2RlYCBpc1xuICAgICAgICAvLyB3cmFwcGVkIGluIGFuIGFycmF5IHdoaWNoIG5lZWRzIHRvIGJlIHVud3JhcHBlZC4gV2UgbmVlZCB0byBrbm93IGlmIGl0IGlzIGEgY29tcG9uZW50IGFuZCBpZlxuICAgICAgICAvLyBpdCBoYXMgTENvbnRhaW5lciBzbyB0aGF0IHdlIGNhbiBwcm9jZXNzIGFsbCBvZiB0aG9zZSBjYXNlcyBhcHByb3ByaWF0ZWx5LlxuICAgICAgICBpZiAoaXNMQ29udGFpbmVyKGxOb2RlVG9IYW5kbGUpKSB7XG4gICAgICAgICAgICBsQ29udGFpbmVyID0gbE5vZGVUb0hhbmRsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0xWaWV3KGxOb2RlVG9IYW5kbGUpKSB7XG4gICAgICAgICAgICBpc0NvbXBvbmVudCA9IHRydWU7XG4gICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChsTm9kZVRvSGFuZGxlW0hPU1RdLCAnSE9TVCBtdXN0IGJlIGRlZmluZWQgZm9yIGEgY29tcG9uZW50IExWaWV3Jyk7XG4gICAgICAgICAgICBsTm9kZVRvSGFuZGxlID0gbE5vZGVUb0hhbmRsZVtIT1NUXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByTm9kZSA9IHVud3JhcFJOb2RlKGxOb2RlVG9IYW5kbGUpO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgIWlzUHJvY2VkdXJhbFJlbmRlcmVyKHJlbmRlcmVyKSAmJiBhc3NlcnREb21Ob2RlKHJOb2RlKTtcbiAgICAgICAgaWYgKGFjdGlvbiA9PT0gMCAvKiBDcmVhdGUgKi8gJiYgcGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoYmVmb3JlTm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmF0aXZlQXBwZW5kQ2hpbGQocmVuZGVyZXIsIHBhcmVudCwgck5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmF0aXZlSW5zZXJ0QmVmb3JlKHJlbmRlcmVyLCBwYXJlbnQsIHJOb2RlLCBiZWZvcmVOb2RlIHx8IG51bGwsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gMSAvKiBJbnNlcnQgKi8gJiYgcGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBuYXRpdmVJbnNlcnRCZWZvcmUocmVuZGVyZXIsIHBhcmVudCwgck5vZGUsIGJlZm9yZU5vZGUgfHwgbnVsbCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYWN0aW9uID09PSAyIC8qIERldGFjaCAqLykge1xuICAgICAgICAgICAgbmF0aXZlUmVtb3ZlTm9kZShyZW5kZXJlciwgck5vZGUsIGlzQ29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhY3Rpb24gPT09IDMgLyogRGVzdHJveSAqLykge1xuICAgICAgICAgICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5yZW5kZXJlckRlc3Ryb3lOb2RlKys7XG4gICAgICAgICAgICByZW5kZXJlci5kZXN0cm95Tm9kZShyTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxDb250YWluZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgYXBwbHlDb250YWluZXIocmVuZGVyZXIsIGFjdGlvbiwgbENvbnRhaW5lciwgcGFyZW50LCBiZWZvcmVOb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVRleHROb2RlKHJlbmRlcmVyLCB2YWx1ZSkge1xuICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJDcmVhdGVUZXh0Tm9kZSsrO1xuICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJTZXRUZXh0Kys7XG4gICAgcmV0dXJuIGlzUHJvY2VkdXJhbFJlbmRlcmVyKHJlbmRlcmVyKSA/IHJlbmRlcmVyLmNyZWF0ZVRleHQodmFsdWUpIDpcbiAgICAgICAgcmVuZGVyZXIuY3JlYXRlVGV4dE5vZGUodmFsdWUpO1xufVxuZnVuY3Rpb24gdXBkYXRlVGV4dE5vZGUocmVuZGVyZXIsIHJOb2RlLCB2YWx1ZSkge1xuICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJTZXRUZXh0Kys7XG4gICAgaXNQcm9jZWR1cmFsUmVuZGVyZXIocmVuZGVyZXIpID8gcmVuZGVyZXIuc2V0VmFsdWUock5vZGUsIHZhbHVlKSA6IHJOb2RlLnRleHRDb250ZW50ID0gdmFsdWU7XG59XG5mdW5jdGlvbiBjcmVhdGVDb21tZW50Tm9kZShyZW5kZXJlciwgdmFsdWUpIHtcbiAgICBuZ0Rldk1vZGUgJiYgbmdEZXZNb2RlLnJlbmRlcmVyQ3JlYXRlQ29tbWVudCsrO1xuICAgIC8vIGlzUHJvY2VkdXJhbFJlbmRlcmVyIGNoZWNrIGlzIG5vdCBuZWVkZWQgYmVjYXVzZSBib3RoIGBSZW5kZXJlcjJgIGFuZCBgUmVuZGVyZXIzYCBoYXZlIHRoZSBzYW1lXG4gICAgLy8gbWV0aG9kIG5hbWUuXG4gICAgcmV0dXJuIHJlbmRlcmVyLmNyZWF0ZUNvbW1lbnQoZXNjYXBlQ29tbWVudFRleHQodmFsdWUpKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5hdGl2ZSBlbGVtZW50IGZyb20gYSB0YWcgbmFtZSwgdXNpbmcgYSByZW5kZXJlci5cbiAqIEBwYXJhbSByZW5kZXJlciBBIHJlbmRlcmVyIHRvIHVzZVxuICogQHBhcmFtIG5hbWUgdGhlIHRhZyBuYW1lXG4gKiBAcGFyYW0gbmFtZXNwYWNlIE9wdGlvbmFsIG5hbWVzcGFjZSBmb3IgZWxlbWVudC5cbiAqIEByZXR1cm5zIHRoZSBlbGVtZW50IGNyZWF0ZWRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRWxlbWVudE5vZGUocmVuZGVyZXIsIG5hbWUsIG5hbWVzcGFjZSkge1xuICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJDcmVhdGVFbGVtZW50Kys7XG4gICAgaWYgKGlzUHJvY2VkdXJhbFJlbmRlcmVyKHJlbmRlcmVyKSkge1xuICAgICAgICByZXR1cm4gcmVuZGVyZXIuY3JlYXRlRWxlbWVudChuYW1lLCBuYW1lc3BhY2UpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgbmFtZXNwYWNlVXJpID0gbmFtZXNwYWNlICE9PSBudWxsID8gZ2V0TmFtZXNwYWNlVXJpKG5hbWVzcGFjZSkgOiBudWxsO1xuICAgICAgICByZXR1cm4gbmFtZXNwYWNlVXJpID09PSBudWxsID8gcmVuZGVyZXIuY3JlYXRlRWxlbWVudChuYW1lKSA6XG4gICAgICAgICAgICByZW5kZXJlci5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlVXJpLCBuYW1lKTtcbiAgICB9XG59XG4vKipcbiAqIFJlbW92ZXMgYWxsIERPTSBlbGVtZW50cyBhc3NvY2lhdGVkIHdpdGggYSB2aWV3LlxuICpcbiAqIEJlY2F1c2Ugc29tZSByb290IG5vZGVzIG9mIHRoZSB2aWV3IG1heSBiZSBjb250YWluZXJzLCB3ZSBzb21ldGltZXMgbmVlZFxuICogdG8gcHJvcGFnYXRlIGRlZXBseSBpbnRvIHRoZSBuZXN0ZWQgY29udGFpbmVycyB0byByZW1vdmUgYWxsIGVsZW1lbnRzIGluIHRoZVxuICogdmlld3MgYmVuZWF0aCBpdC5cbiAqXG4gKiBAcGFyYW0gdFZpZXcgVGhlIGBUVmlldycgb2YgdGhlIGBMVmlld2AgZnJvbSB3aGljaCBlbGVtZW50cyBzaG91bGQgYmUgYWRkZWQgb3IgcmVtb3ZlZFxuICogQHBhcmFtIGxWaWV3IFRoZSB2aWV3IGZyb20gd2hpY2ggZWxlbWVudHMgc2hvdWxkIGJlIGFkZGVkIG9yIHJlbW92ZWRcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlVmlld0Zyb21Db250YWluZXIodFZpZXcsIGxWaWV3KSB7XG4gICAgY29uc3QgcmVuZGVyZXIgPSBsVmlld1tSRU5ERVJFUl07XG4gICAgYXBwbHlWaWV3KHRWaWV3LCBsVmlldywgcmVuZGVyZXIsIDIgLyogRGV0YWNoICovLCBudWxsLCBudWxsKTtcbiAgICBsVmlld1tIT1NUXSA9IG51bGw7XG4gICAgbFZpZXdbVF9IT1NUXSA9IG51bGw7XG59XG4vKipcbiAqIEFkZHMgYWxsIERPTSBlbGVtZW50cyBhc3NvY2lhdGVkIHdpdGggYSB2aWV3LlxuICpcbiAqIEJlY2F1c2Ugc29tZSByb290IG5vZGVzIG9mIHRoZSB2aWV3IG1heSBiZSBjb250YWluZXJzLCB3ZSBzb21ldGltZXMgbmVlZFxuICogdG8gcHJvcGFnYXRlIGRlZXBseSBpbnRvIHRoZSBuZXN0ZWQgY29udGFpbmVycyB0byBhZGQgYWxsIGVsZW1lbnRzIGluIHRoZVxuICogdmlld3MgYmVuZWF0aCBpdC5cbiAqXG4gKiBAcGFyYW0gdFZpZXcgVGhlIGBUVmlldycgb2YgdGhlIGBMVmlld2AgZnJvbSB3aGljaCBlbGVtZW50cyBzaG91bGQgYmUgYWRkZWQgb3IgcmVtb3ZlZFxuICogQHBhcmFtIHBhcmVudFROb2RlIFRoZSBgVE5vZGVgIHdoZXJlIHRoZSBgTFZpZXdgIHNob3VsZCBiZSBhdHRhY2hlZCB0by5cbiAqIEBwYXJhbSByZW5kZXJlciBDdXJyZW50IHJlbmRlcmVyIHRvIHVzZSBmb3IgRE9NIG1hbmlwdWxhdGlvbnMuXG4gKiBAcGFyYW0gbFZpZXcgVGhlIHZpZXcgZnJvbSB3aGljaCBlbGVtZW50cyBzaG91bGQgYmUgYWRkZWQgb3IgcmVtb3ZlZFxuICogQHBhcmFtIHBhcmVudE5hdGl2ZU5vZGUgVGhlIHBhcmVudCBgUkVsZW1lbnRgIHdoZXJlIGl0IHNob3VsZCBiZSBpbnNlcnRlZCBpbnRvLlxuICogQHBhcmFtIGJlZm9yZU5vZGUgVGhlIG5vZGUgYmVmb3JlIHdoaWNoIGVsZW1lbnRzIHNob3VsZCBiZSBhZGRlZCwgaWYgaW5zZXJ0IG1vZGVcbiAqL1xuZnVuY3Rpb24gYWRkVmlld1RvQ29udGFpbmVyKHRWaWV3LCBwYXJlbnRUTm9kZSwgcmVuZGVyZXIsIGxWaWV3LCBwYXJlbnROYXRpdmVOb2RlLCBiZWZvcmVOb2RlKSB7XG4gICAgbFZpZXdbSE9TVF0gPSBwYXJlbnROYXRpdmVOb2RlO1xuICAgIGxWaWV3W1RfSE9TVF0gPSBwYXJlbnRUTm9kZTtcbiAgICBhcHBseVZpZXcodFZpZXcsIGxWaWV3LCByZW5kZXJlciwgMSAvKiBJbnNlcnQgKi8sIHBhcmVudE5hdGl2ZU5vZGUsIGJlZm9yZU5vZGUpO1xufVxuLyoqXG4gKiBEZXRhY2ggYSBgTFZpZXdgIGZyb20gdGhlIERPTSBieSBkZXRhY2hpbmcgaXRzIG5vZGVzLlxuICpcbiAqIEBwYXJhbSB0VmlldyBUaGUgYFRWaWV3JyBvZiB0aGUgYExWaWV3YCB0byBiZSBkZXRhY2hlZFxuICogQHBhcmFtIGxWaWV3IHRoZSBgTFZpZXdgIHRvIGJlIGRldGFjaGVkLlxuICovXG5mdW5jdGlvbiByZW5kZXJEZXRhY2hWaWV3KHRWaWV3LCBsVmlldykge1xuICAgIGFwcGx5Vmlldyh0VmlldywgbFZpZXcsIGxWaWV3W1JFTkRFUkVSXSwgMiAvKiBEZXRhY2ggKi8sIG51bGwsIG51bGwpO1xufVxuLyoqXG4gKiBUcmF2ZXJzZXMgZG93biBhbmQgdXAgdGhlIHRyZWUgb2Ygdmlld3MgYW5kIGNvbnRhaW5lcnMgdG8gcmVtb3ZlIGxpc3RlbmVycyBhbmRcbiAqIGNhbGwgb25EZXN0cm95IGNhbGxiYWNrcy5cbiAqXG4gKiBOb3RlczpcbiAqICAtIEJlY2F1c2UgaXQncyB1c2VkIGZvciBvbkRlc3Ryb3kgY2FsbHMsIGl0IG5lZWRzIHRvIGJlIGJvdHRvbS11cC5cbiAqICAtIE11c3QgcHJvY2VzcyBjb250YWluZXJzIGluc3RlYWQgb2YgdGhlaXIgdmlld3MgdG8gYXZvaWQgc3BsaWNpbmdcbiAqICB3aGVuIHZpZXdzIGFyZSBkZXN0cm95ZWQgYW5kIHJlLWFkZGVkLlxuICogIC0gVXNpbmcgYSB3aGlsZSBsb29wIGJlY2F1c2UgaXQncyBmYXN0ZXIgdGhhbiByZWN1cnNpb25cbiAqICAtIERlc3Ryb3kgb25seSBjYWxsZWQgb24gbW92ZW1lbnQgdG8gc2libGluZyBvciBtb3ZlbWVudCB0byBwYXJlbnQgKGxhdGVyYWxseSBvciB1cClcbiAqXG4gKiAgQHBhcmFtIHJvb3RWaWV3IFRoZSB2aWV3IHRvIGRlc3Ryb3lcbiAqL1xuZnVuY3Rpb24gZGVzdHJveVZpZXdUcmVlKHJvb3RWaWV3KSB7XG4gICAgLy8gSWYgdGhlIHZpZXcgaGFzIG5vIGNoaWxkcmVuLCB3ZSBjYW4gY2xlYW4gaXQgdXAgYW5kIHJldHVybiBlYXJseS5cbiAgICBsZXQgbFZpZXdPckxDb250YWluZXIgPSByb290Vmlld1tDSElMRF9IRUFEXTtcbiAgICBpZiAoIWxWaWV3T3JMQ29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiBjbGVhblVwVmlldyhyb290Vmlld1tUVklFV10sIHJvb3RWaWV3KTtcbiAgICB9XG4gICAgd2hpbGUgKGxWaWV3T3JMQ29udGFpbmVyKSB7XG4gICAgICAgIGxldCBuZXh0ID0gbnVsbDtcbiAgICAgICAgaWYgKGlzTFZpZXcobFZpZXdPckxDb250YWluZXIpKSB7XG4gICAgICAgICAgICAvLyBJZiBMVmlldywgdHJhdmVyc2UgZG93biB0byBjaGlsZC5cbiAgICAgICAgICAgIG5leHQgPSBsVmlld09yTENvbnRhaW5lcltDSElMRF9IRUFEXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRMQ29udGFpbmVyKGxWaWV3T3JMQ29udGFpbmVyKTtcbiAgICAgICAgICAgIC8vIElmIGNvbnRhaW5lciwgdHJhdmVyc2UgZG93biB0byBpdHMgZmlyc3QgTFZpZXcuXG4gICAgICAgICAgICBjb25zdCBmaXJzdFZpZXcgPSBsVmlld09yTENvbnRhaW5lcltDT05UQUlORVJfSEVBREVSX09GRlNFVF07XG4gICAgICAgICAgICBpZiAoZmlyc3RWaWV3KVxuICAgICAgICAgICAgICAgIG5leHQgPSBmaXJzdFZpZXc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZXh0KSB7XG4gICAgICAgICAgICAvLyBPbmx5IGNsZWFuIHVwIHZpZXcgd2hlbiBtb3ZpbmcgdG8gdGhlIHNpZGUgb3IgdXAsIGFzIGRlc3Ryb3kgaG9va3NcbiAgICAgICAgICAgIC8vIHNob3VsZCBiZSBjYWxsZWQgaW4gb3JkZXIgZnJvbSB0aGUgYm90dG9tIHVwLlxuICAgICAgICAgICAgd2hpbGUgKGxWaWV3T3JMQ29udGFpbmVyICYmICFsVmlld09yTENvbnRhaW5lcltORVhUXSAmJiBsVmlld09yTENvbnRhaW5lciAhPT0gcm9vdFZpZXcpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNMVmlldyhsVmlld09yTENvbnRhaW5lcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYW5VcFZpZXcobFZpZXdPckxDb250YWluZXJbVFZJRVddLCBsVmlld09yTENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxWaWV3T3JMQ29udGFpbmVyID0gbFZpZXdPckxDb250YWluZXJbUEFSRU5UXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsVmlld09yTENvbnRhaW5lciA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICBsVmlld09yTENvbnRhaW5lciA9IHJvb3RWaWV3O1xuICAgICAgICAgICAgaWYgKGlzTFZpZXcobFZpZXdPckxDb250YWluZXIpKSB7XG4gICAgICAgICAgICAgICAgY2xlYW5VcFZpZXcobFZpZXdPckxDb250YWluZXJbVFZJRVddLCBsVmlld09yTENvbnRhaW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXh0ID0gbFZpZXdPckxDb250YWluZXIgJiYgbFZpZXdPckxDb250YWluZXJbTkVYVF07XG4gICAgICAgIH1cbiAgICAgICAgbFZpZXdPckxDb250YWluZXIgPSBuZXh0O1xuICAgIH1cbn1cbi8qKlxuICogSW5zZXJ0cyBhIHZpZXcgaW50byBhIGNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIGFkZHMgdGhlIHZpZXcgdG8gdGhlIGNvbnRhaW5lcidzIGFycmF5IG9mIGFjdGl2ZSB2aWV3cyBpbiB0aGUgY29ycmVjdFxuICogcG9zaXRpb24uIEl0IGFsc28gYWRkcyB0aGUgdmlldydzIGVsZW1lbnRzIHRvIHRoZSBET00gaWYgdGhlIGNvbnRhaW5lciBpc24ndCBhXG4gKiByb290IG5vZGUgb2YgYW5vdGhlciB2aWV3IChpbiB0aGF0IGNhc2UsIHRoZSB2aWV3J3MgZWxlbWVudHMgd2lsbCBiZSBhZGRlZCB3aGVuXG4gKiB0aGUgY29udGFpbmVyJ3MgcGFyZW50IHZpZXcgaXMgYWRkZWQgbGF0ZXIpLlxuICpcbiAqIEBwYXJhbSB0VmlldyBUaGUgYFRWaWV3JyBvZiB0aGUgYExWaWV3YCB0byBpbnNlcnRcbiAqIEBwYXJhbSBsVmlldyBUaGUgdmlldyB0byBpbnNlcnRcbiAqIEBwYXJhbSBsQ29udGFpbmVyIFRoZSBjb250YWluZXIgaW50byB3aGljaCB0aGUgdmlldyBzaG91bGQgYmUgaW5zZXJ0ZWRcbiAqIEBwYXJhbSBpbmRleCBXaGljaCBpbmRleCBpbiB0aGUgY29udGFpbmVyIHRvIGluc2VydCB0aGUgY2hpbGQgdmlldyBpbnRvXG4gKi9cbmZ1bmN0aW9uIGluc2VydFZpZXcodFZpZXcsIGxWaWV3LCBsQ29udGFpbmVyLCBpbmRleCkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRMVmlldyhsVmlldyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExDb250YWluZXIobENvbnRhaW5lcik7XG4gICAgY29uc3QgaW5kZXhJbkNvbnRhaW5lciA9IENPTlRBSU5FUl9IRUFERVJfT0ZGU0VUICsgaW5kZXg7XG4gICAgY29uc3QgY29udGFpbmVyTGVuZ3RoID0gbENvbnRhaW5lci5sZW5ndGg7XG4gICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAvLyBUaGlzIGlzIGEgbmV3IHZpZXcsIHdlIG5lZWQgdG8gYWRkIGl0IHRvIHRoZSBjaGlsZHJlbi5cbiAgICAgICAgbENvbnRhaW5lcltpbmRleEluQ29udGFpbmVyIC0gMV1bTkVYVF0gPSBsVmlldztcbiAgICB9XG4gICAgaWYgKGluZGV4IDwgY29udGFpbmVyTGVuZ3RoIC0gQ09OVEFJTkVSX0hFQURFUl9PRkZTRVQpIHtcbiAgICAgICAgbFZpZXdbTkVYVF0gPSBsQ29udGFpbmVyW2luZGV4SW5Db250YWluZXJdO1xuICAgICAgICBhZGRUb0FycmF5KGxDb250YWluZXIsIENPTlRBSU5FUl9IRUFERVJfT0ZGU0VUICsgaW5kZXgsIGxWaWV3KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxDb250YWluZXIucHVzaChsVmlldyk7XG4gICAgICAgIGxWaWV3W05FWFRdID0gbnVsbDtcbiAgICB9XG4gICAgbFZpZXdbUEFSRU5UXSA9IGxDb250YWluZXI7XG4gICAgLy8gdHJhY2sgdmlld3Mgd2hlcmUgZGVjbGFyYXRpb24gYW5kIGluc2VydGlvbiBwb2ludHMgYXJlIGRpZmZlcmVudFxuICAgIGNvbnN0IGRlY2xhcmF0aW9uTENvbnRhaW5lciA9IGxWaWV3W0RFQ0xBUkFUSU9OX0xDT05UQUlORVJdO1xuICAgIGlmIChkZWNsYXJhdGlvbkxDb250YWluZXIgIT09IG51bGwgJiYgbENvbnRhaW5lciAhPT0gZGVjbGFyYXRpb25MQ29udGFpbmVyKSB7XG4gICAgICAgIHRyYWNrTW92ZWRWaWV3KGRlY2xhcmF0aW9uTENvbnRhaW5lciwgbFZpZXcpO1xuICAgIH1cbiAgICAvLyBub3RpZnkgcXVlcnkgdGhhdCBhIG5ldyB2aWV3IGhhcyBiZWVuIGFkZGVkXG4gICAgY29uc3QgbFF1ZXJpZXMgPSBsVmlld1tRVUVSSUVTXTtcbiAgICBpZiAobFF1ZXJpZXMgIT09IG51bGwpIHtcbiAgICAgICAgbFF1ZXJpZXMuaW5zZXJ0Vmlldyh0Vmlldyk7XG4gICAgfVxuICAgIC8vIFNldHMgdGhlIGF0dGFjaGVkIGZsYWdcbiAgICBsVmlld1tGTEFHU10gfD0gMTI4IC8qIEF0dGFjaGVkICovO1xufVxuLyoqXG4gKiBUcmFjayB2aWV3cyBjcmVhdGVkIGZyb20gdGhlIGRlY2xhcmF0aW9uIGNvbnRhaW5lciAoVGVtcGxhdGVSZWYpIGFuZCBpbnNlcnRlZCBpbnRvIGFcbiAqIGRpZmZlcmVudCBMQ29udGFpbmVyLlxuICovXG5mdW5jdGlvbiB0cmFja01vdmVkVmlldyhkZWNsYXJhdGlvbkNvbnRhaW5lciwgbFZpZXcpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChsVmlldywgJ0xWaWV3IHJlcXVpcmVkJyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExDb250YWluZXIoZGVjbGFyYXRpb25Db250YWluZXIpO1xuICAgIGNvbnN0IG1vdmVkVmlld3MgPSBkZWNsYXJhdGlvbkNvbnRhaW5lcltNT1ZFRF9WSUVXU107XG4gICAgY29uc3QgaW5zZXJ0ZWRMQ29udGFpbmVyID0gbFZpZXdbUEFSRU5UXTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TENvbnRhaW5lcihpbnNlcnRlZExDb250YWluZXIpO1xuICAgIGNvbnN0IGluc2VydGVkQ29tcG9uZW50TFZpZXcgPSBpbnNlcnRlZExDb250YWluZXJbUEFSRU5UXVtERUNMQVJBVElPTl9DT01QT05FTlRfVklFV107XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQoaW5zZXJ0ZWRDb21wb25lbnRMVmlldywgJ01pc3NpbmcgaW5zZXJ0ZWRDb21wb25lbnRMVmlldycpO1xuICAgIGNvbnN0IGRlY2xhcmVkQ29tcG9uZW50TFZpZXcgPSBsVmlld1tERUNMQVJBVElPTl9DT01QT05FTlRfVklFV107XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQoZGVjbGFyZWRDb21wb25lbnRMVmlldywgJ01pc3NpbmcgZGVjbGFyZWRDb21wb25lbnRMVmlldycpO1xuICAgIGlmIChkZWNsYXJlZENvbXBvbmVudExWaWV3ICE9PSBpbnNlcnRlZENvbXBvbmVudExWaWV3KSB7XG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIGRlY2xhcmF0aW9uLWNvbXBvbmVudCBpcyBub3Qgc2FtZSBhcyBpbnNlcnRpb24tY29tcG9uZW50OyB0aGlzIG1lYW5zIHRoYXRcbiAgICAgICAgLy8gdGhpcyBpcyBhIHRyYW5zcGxhbnRlZCB2aWV3LiBNYXJrIHRoZSBkZWNsYXJlZCBsVmlldyBhcyBoYXZpbmcgdHJhbnNwbGFudGVkIHZpZXdzIHNvIHRoYXRcbiAgICAgICAgLy8gdGhvc2Ugdmlld3MgY2FuIHBhcnRpY2lwYXRlIGluIENELlxuICAgICAgICBkZWNsYXJhdGlvbkNvbnRhaW5lcltIQVNfVFJBTlNQTEFOVEVEX1ZJRVdTXSA9IHRydWU7XG4gICAgfVxuICAgIGlmIChtb3ZlZFZpZXdzID09PSBudWxsKSB7XG4gICAgICAgIGRlY2xhcmF0aW9uQ29udGFpbmVyW01PVkVEX1ZJRVdTXSA9IFtsVmlld107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBtb3ZlZFZpZXdzLnB1c2gobFZpZXcpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRldGFjaE1vdmVkVmlldyhkZWNsYXJhdGlvbkNvbnRhaW5lciwgbFZpZXcpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TENvbnRhaW5lcihkZWNsYXJhdGlvbkNvbnRhaW5lcik7XG4gICAgbmdEZXZNb2RlICYmXG4gICAgICAgIGFzc2VydERlZmluZWQoZGVjbGFyYXRpb25Db250YWluZXJbTU9WRURfVklFV1NdLCAnQSBwcm9qZWN0ZWQgdmlldyBzaG91bGQgYmVsb25nIHRvIGEgbm9uLWVtcHR5IHByb2plY3RlZCB2aWV3cyBjb2xsZWN0aW9uJyk7XG4gICAgY29uc3QgbW92ZWRWaWV3cyA9IGRlY2xhcmF0aW9uQ29udGFpbmVyW01PVkVEX1ZJRVdTXTtcbiAgICBjb25zdCBkZWNsYXJhdGlvblZpZXdJbmRleCA9IG1vdmVkVmlld3MuaW5kZXhPZihsVmlldyk7XG4gICAgY29uc3QgaW5zZXJ0aW9uTENvbnRhaW5lciA9IGxWaWV3W1BBUkVOVF07XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExDb250YWluZXIoaW5zZXJ0aW9uTENvbnRhaW5lcik7XG4gICAgLy8gSWYgdGhlIHZpZXcgd2FzIG1hcmtlZCBmb3IgcmVmcmVzaCBidXQgdGhlbiBkZXRhY2hlZCBiZWZvcmUgaXQgd2FzIGNoZWNrZWQgKHdoZXJlIHRoZSBmbGFnXG4gICAgLy8gd291bGQgYmUgY2xlYXJlZCBhbmQgdGhlIGNvdW50ZXIgZGVjcmVtZW50ZWQpLCB3ZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgdmlldyBjb3VudGVyIGhlcmVcbiAgICAvLyBpbnN0ZWFkLlxuICAgIGlmIChsVmlld1tGTEFHU10gJiAxMDI0IC8qIFJlZnJlc2hUcmFuc3BsYW50ZWRWaWV3ICovKSB7XG4gICAgICAgIGxWaWV3W0ZMQUdTXSAmPSB+MTAyNCAvKiBSZWZyZXNoVHJhbnNwbGFudGVkVmlldyAqLztcbiAgICAgICAgdXBkYXRlVHJhbnNwbGFudGVkVmlld0NvdW50KGluc2VydGlvbkxDb250YWluZXIsIC0xKTtcbiAgICB9XG4gICAgbW92ZWRWaWV3cy5zcGxpY2UoZGVjbGFyYXRpb25WaWV3SW5kZXgsIDEpO1xufVxuLyoqXG4gKiBEZXRhY2hlcyBhIHZpZXcgZnJvbSBhIGNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIG1ldGhvZCByZW1vdmVzIHRoZSB2aWV3IGZyb20gdGhlIGNvbnRhaW5lcidzIGFycmF5IG9mIGFjdGl2ZSB2aWV3cy4gSXQgYWxzb1xuICogcmVtb3ZlcyB0aGUgdmlldydzIGVsZW1lbnRzIGZyb20gdGhlIERPTS5cbiAqXG4gKiBAcGFyYW0gbENvbnRhaW5lciBUaGUgY29udGFpbmVyIGZyb20gd2hpY2ggdG8gZGV0YWNoIGEgdmlld1xuICogQHBhcmFtIHJlbW92ZUluZGV4IFRoZSBpbmRleCBvZiB0aGUgdmlldyB0byBkZXRhY2hcbiAqIEByZXR1cm5zIERldGFjaGVkIExWaWV3IGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBkZXRhY2hWaWV3KGxDb250YWluZXIsIHJlbW92ZUluZGV4KSB7XG4gICAgaWYgKGxDb250YWluZXIubGVuZ3RoIDw9IENPTlRBSU5FUl9IRUFERVJfT0ZGU0VUKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgaW5kZXhJbkNvbnRhaW5lciA9IENPTlRBSU5FUl9IRUFERVJfT0ZGU0VUICsgcmVtb3ZlSW5kZXg7XG4gICAgY29uc3Qgdmlld1RvRGV0YWNoID0gbENvbnRhaW5lcltpbmRleEluQ29udGFpbmVyXTtcbiAgICBpZiAodmlld1RvRGV0YWNoKSB7XG4gICAgICAgIGNvbnN0IGRlY2xhcmF0aW9uTENvbnRhaW5lciA9IHZpZXdUb0RldGFjaFtERUNMQVJBVElPTl9MQ09OVEFJTkVSXTtcbiAgICAgICAgaWYgKGRlY2xhcmF0aW9uTENvbnRhaW5lciAhPT0gbnVsbCAmJiBkZWNsYXJhdGlvbkxDb250YWluZXIgIT09IGxDb250YWluZXIpIHtcbiAgICAgICAgICAgIGRldGFjaE1vdmVkVmlldyhkZWNsYXJhdGlvbkxDb250YWluZXIsIHZpZXdUb0RldGFjaCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92ZUluZGV4ID4gMCkge1xuICAgICAgICAgICAgbENvbnRhaW5lcltpbmRleEluQ29udGFpbmVyIC0gMV1bTkVYVF0gPSB2aWV3VG9EZXRhY2hbTkVYVF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtb3ZlZExWaWV3ID0gcmVtb3ZlRnJvbUFycmF5KGxDb250YWluZXIsIENPTlRBSU5FUl9IRUFERVJfT0ZGU0VUICsgcmVtb3ZlSW5kZXgpO1xuICAgICAgICByZW1vdmVWaWV3RnJvbUNvbnRhaW5lcih2aWV3VG9EZXRhY2hbVFZJRVddLCB2aWV3VG9EZXRhY2gpO1xuICAgICAgICAvLyBub3RpZnkgcXVlcnkgdGhhdCBhIHZpZXcgaGFzIGJlZW4gcmVtb3ZlZFxuICAgICAgICBjb25zdCBsUXVlcmllcyA9IHJlbW92ZWRMVmlld1tRVUVSSUVTXTtcbiAgICAgICAgaWYgKGxRdWVyaWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBsUXVlcmllcy5kZXRhY2hWaWV3KHJlbW92ZWRMVmlld1tUVklFV10pO1xuICAgICAgICB9XG4gICAgICAgIHZpZXdUb0RldGFjaFtQQVJFTlRdID0gbnVsbDtcbiAgICAgICAgdmlld1RvRGV0YWNoW05FWFRdID0gbnVsbDtcbiAgICAgICAgLy8gVW5zZXRzIHRoZSBhdHRhY2hlZCBmbGFnXG4gICAgICAgIHZpZXdUb0RldGFjaFtGTEFHU10gJj0gfjEyOCAvKiBBdHRhY2hlZCAqLztcbiAgICB9XG4gICAgcmV0dXJuIHZpZXdUb0RldGFjaDtcbn1cbi8qKlxuICogQSBzdGFuZGFsb25lIGZ1bmN0aW9uIHdoaWNoIGRlc3Ryb3lzIGFuIExWaWV3LFxuICogY29uZHVjdGluZyBjbGVhbiB1cCAoZS5nLiByZW1vdmluZyBsaXN0ZW5lcnMsIGNhbGxpbmcgb25EZXN0cm95cykuXG4gKlxuICogQHBhcmFtIHRWaWV3IFRoZSBgVFZpZXcnIG9mIHRoZSBgTFZpZXdgIHRvIGJlIGRlc3Ryb3llZFxuICogQHBhcmFtIGxWaWV3IFRoZSB2aWV3IHRvIGJlIGRlc3Ryb3llZC5cbiAqL1xuZnVuY3Rpb24gZGVzdHJveUxWaWV3KHRWaWV3LCBsVmlldykge1xuICAgIGlmICghKGxWaWV3W0ZMQUdTXSAmIDI1NiAvKiBEZXN0cm95ZWQgKi8pKSB7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gbFZpZXdbUkVOREVSRVJdO1xuICAgICAgICBpZiAoaXNQcm9jZWR1cmFsUmVuZGVyZXIocmVuZGVyZXIpICYmIHJlbmRlcmVyLmRlc3Ryb3lOb2RlKSB7XG4gICAgICAgICAgICBhcHBseVZpZXcodFZpZXcsIGxWaWV3LCByZW5kZXJlciwgMyAvKiBEZXN0cm95ICovLCBudWxsLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBkZXN0cm95Vmlld1RyZWUobFZpZXcpO1xuICAgIH1cbn1cbi8qKlxuICogQ2FsbHMgb25EZXN0cm95cyBob29rcyBmb3IgYWxsIGRpcmVjdGl2ZXMgYW5kIHBpcGVzIGluIGEgZ2l2ZW4gdmlldyBhbmQgdGhlbiByZW1vdmVzIGFsbFxuICogbGlzdGVuZXJzLiBMaXN0ZW5lcnMgYXJlIHJlbW92ZWQgYXMgdGhlIGxhc3Qgc3RlcCBzbyBldmVudHMgZGVsaXZlcmVkIGluIHRoZSBvbkRlc3Ryb3lzIGhvb2tzXG4gKiBjYW4gYmUgcHJvcGFnYXRlZCB0byBAT3V0cHV0IGxpc3RlbmVycy5cbiAqXG4gKiBAcGFyYW0gdFZpZXcgYFRWaWV3YCBmb3IgdGhlIGBMVmlld2AgdG8gY2xlYW4gdXAuXG4gKiBAcGFyYW0gbFZpZXcgVGhlIExWaWV3IHRvIGNsZWFuIHVwXG4gKi9cbmZ1bmN0aW9uIGNsZWFuVXBWaWV3KHRWaWV3LCBsVmlldykge1xuICAgIGlmICghKGxWaWV3W0ZMQUdTXSAmIDI1NiAvKiBEZXN0cm95ZWQgKi8pKSB7XG4gICAgICAgIC8vIFVzdWFsbHkgdGhlIEF0dGFjaGVkIGZsYWcgaXMgcmVtb3ZlZCB3aGVuIHRoZSB2aWV3IGlzIGRldGFjaGVkIGZyb20gaXRzIHBhcmVudCwgaG93ZXZlclxuICAgICAgICAvLyBpZiBpdCdzIGEgcm9vdCB2aWV3LCB0aGUgZmxhZyB3b24ndCBiZSB1bnNldCBoZW5jZSB3aHkgd2UncmUgYWxzbyByZW1vdmluZyBvbiBkZXN0cm95LlxuICAgICAgICBsVmlld1tGTEFHU10gJj0gfjEyOCAvKiBBdHRhY2hlZCAqLztcbiAgICAgICAgLy8gTWFyayB0aGUgTFZpZXcgYXMgZGVzdHJveWVkICpiZWZvcmUqIGV4ZWN1dGluZyB0aGUgb25EZXN0cm95IGhvb2tzLiBBbiBvbkRlc3Ryb3kgaG9va1xuICAgICAgICAvLyBydW5zIGFyYml0cmFyeSB1c2VyIGNvZGUsIHdoaWNoIGNvdWxkIGluY2x1ZGUgaXRzIG93biBgdmlld1JlZi5kZXN0cm95KClgIChvciBzaW1pbGFyKS4gSWZcbiAgICAgICAgLy8gV2UgZG9uJ3QgZmxhZyB0aGUgdmlldyBhcyBkZXN0cm95ZWQgYmVmb3JlIHRoZSBob29rcywgdGhpcyBjb3VsZCBsZWFkIHRvIGFuIGluZmluaXRlIGxvb3AuXG4gICAgICAgIC8vIFRoaXMgYWxzbyBhbGlnbnMgd2l0aCB0aGUgVmlld0VuZ2luZSBiZWhhdmlvci4gSXQgYWxzbyBtZWFucyB0aGF0IHRoZSBvbkRlc3Ryb3kgaG9vayBpc1xuICAgICAgICAvLyByZWFsbHkgbW9yZSBvZiBhbiBcImFmdGVyRGVzdHJveVwiIGhvb2sgaWYgeW91IHRoaW5rIGFib3V0IGl0LlxuICAgICAgICBsVmlld1tGTEFHU10gfD0gMjU2IC8qIERlc3Ryb3llZCAqLztcbiAgICAgICAgZXhlY3V0ZU9uRGVzdHJveXModFZpZXcsIGxWaWV3KTtcbiAgICAgICAgcHJvY2Vzc0NsZWFudXBzKHRWaWV3LCBsVmlldyk7XG4gICAgICAgIC8vIEZvciBjb21wb25lbnQgdmlld3Mgb25seSwgdGhlIGxvY2FsIHJlbmRlcmVyIGlzIGRlc3Ryb3llZCBhdCBjbGVhbiB1cCB0aW1lLlxuICAgICAgICBpZiAobFZpZXdbVFZJRVddLnR5cGUgPT09IDEgLyogQ29tcG9uZW50ICovICYmIGlzUHJvY2VkdXJhbFJlbmRlcmVyKGxWaWV3W1JFTkRFUkVSXSkpIHtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJEZXN0cm95Kys7XG4gICAgICAgICAgICBsVmlld1tSRU5ERVJFUl0uZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlY2xhcmF0aW9uQ29udGFpbmVyID0gbFZpZXdbREVDTEFSQVRJT05fTENPTlRBSU5FUl07XG4gICAgICAgIC8vIHdlIGFyZSBkZWFsaW5nIHdpdGggYW4gZW1iZWRkZWQgdmlldyB0aGF0IGlzIHN0aWxsIGluc2VydGVkIGludG8gYSBjb250YWluZXJcbiAgICAgICAgaWYgKGRlY2xhcmF0aW9uQ29udGFpbmVyICE9PSBudWxsICYmIGlzTENvbnRhaW5lcihsVmlld1tQQVJFTlRdKSkge1xuICAgICAgICAgICAgLy8gYW5kIHRoaXMgaXMgYSBwcm9qZWN0ZWQgdmlld1xuICAgICAgICAgICAgaWYgKGRlY2xhcmF0aW9uQ29udGFpbmVyICE9PSBsVmlld1tQQVJFTlRdKSB7XG4gICAgICAgICAgICAgICAgZGV0YWNoTW92ZWRWaWV3KGRlY2xhcmF0aW9uQ29udGFpbmVyLCBsVmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGb3IgZW1iZWRkZWQgdmlld3Mgc3RpbGwgYXR0YWNoZWQgdG8gYSBjb250YWluZXI6IHJlbW92ZSBxdWVyeSByZXN1bHQgZnJvbSB0aGlzIHZpZXcuXG4gICAgICAgICAgICBjb25zdCBsUXVlcmllcyA9IGxWaWV3W1FVRVJJRVNdO1xuICAgICAgICAgICAgaWYgKGxRdWVyaWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbFF1ZXJpZXMuZGV0YWNoVmlldyh0Vmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKiogUmVtb3ZlcyBsaXN0ZW5lcnMgYW5kIHVuc3Vic2NyaWJlcyBmcm9tIG91dHB1dCBzdWJzY3JpcHRpb25zICovXG5mdW5jdGlvbiBwcm9jZXNzQ2xlYW51cHModFZpZXcsIGxWaWV3KSB7XG4gICAgY29uc3QgdENsZWFudXAgPSB0Vmlldy5jbGVhbnVwO1xuICAgIGNvbnN0IGxDbGVhbnVwID0gbFZpZXdbQ0xFQU5VUF07XG4gICAgLy8gYExDbGVhbnVwYCBjb250YWlucyBib3RoIHNoYXJlIGluZm9ybWF0aW9uIHdpdGggYFRDbGVhbnVwYCBhcyB3ZWxsIGFzIGluc3RhbmNlIHNwZWNpZmljXG4gICAgLy8gaW5mb3JtYXRpb24gYXBwZW5kZWQgYXQgdGhlIGVuZC4gV2UgbmVlZCB0byBrbm93IHdoZXJlIHRoZSBlbmQgb2YgdGhlIGBUQ2xlYW51cGAgaW5mb3JtYXRpb25cbiAgICAvLyBpcywgYW5kIHdlIHRyYWNrIHRoaXMgd2l0aCBgbGFzdExDbGVhbnVwSW5kZXhgLlxuICAgIGxldCBsYXN0TENsZWFudXBJbmRleCA9IC0xO1xuICAgIGlmICh0Q2xlYW51cCAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRDbGVhbnVwLmxlbmd0aCAtIDE7IGkgKz0gMikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0Q2xlYW51cFtpXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgbmF0aXZlIERPTSBsaXN0ZW5lclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkeE9yVGFyZ2V0R2V0dGVyID0gdENsZWFudXBbaSArIDFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHR5cGVvZiBpZHhPclRhcmdldEdldHRlciA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICAgICAgICAgICAgICAgIGlkeE9yVGFyZ2V0R2V0dGVyKGxWaWV3KSA6XG4gICAgICAgICAgICAgICAgICAgIHVud3JhcFJOb2RlKGxWaWV3W2lkeE9yVGFyZ2V0R2V0dGVyXSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGlzdGVuZXIgPSBsQ2xlYW51cFtsYXN0TENsZWFudXBJbmRleCA9IHRDbGVhbnVwW2kgKyAyXV07XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlQ2FwdHVyZU9yU3ViSWR4ID0gdENsZWFudXBbaSArIDNdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdXNlQ2FwdHVyZU9yU3ViSWR4ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbmF0aXZlIERPTSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggUmVuZGVyZXIzXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHRDbGVhbnVwW2ldLCBsaXN0ZW5lciwgdXNlQ2FwdHVyZU9yU3ViSWR4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1c2VDYXB0dXJlT3JTdWJJZHggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5yZWdpc3RlclxuICAgICAgICAgICAgICAgICAgICAgICAgbENsZWFudXBbbGFzdExDbGVhbnVwSW5kZXggPSB1c2VDYXB0dXJlT3JTdWJJZHhdKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWJzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGxDbGVhbnVwW2xhc3RMQ2xlYW51cEluZGV4ID0gLXVzZUNhcHR1cmVPclN1YklkeF0udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgY2xlYW51cCBmdW5jdGlvbiB0aGF0IGlzIGdyb3VwZWQgd2l0aCB0aGUgaW5kZXggb2YgaXRzIGNvbnRleHRcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gbENsZWFudXBbbGFzdExDbGVhbnVwSW5kZXggPSB0Q2xlYW51cFtpICsgMV1dO1xuICAgICAgICAgICAgICAgIHRDbGVhbnVwW2ldLmNhbGwoY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGxDbGVhbnVwICE9PSBudWxsKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBsYXN0TENsZWFudXBJbmRleCArIDE7IGkgPCBsQ2xlYW51cC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2VDbGVhbnVwRm4gPSBsQ2xlYW51cFtpXTtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRGdW5jdGlvbihpbnN0YW5jZUNsZWFudXBGbiwgJ0V4cGVjdGluZyBpbnN0YW5jZSBjbGVhbnVwIGZ1bmN0aW9uLicpO1xuICAgICAgICAgICAgaW5zdGFuY2VDbGVhbnVwRm4oKTtcbiAgICAgICAgfVxuICAgICAgICBsVmlld1tDTEVBTlVQXSA9IG51bGw7XG4gICAgfVxufVxuLyoqIENhbGxzIG9uRGVzdHJveSBob29rcyBmb3IgdGhpcyB2aWV3ICovXG5mdW5jdGlvbiBleGVjdXRlT25EZXN0cm95cyh0VmlldywgbFZpZXcpIHtcbiAgICBsZXQgZGVzdHJveUhvb2tzO1xuICAgIGlmICh0VmlldyAhPSBudWxsICYmIChkZXN0cm95SG9va3MgPSB0Vmlldy5kZXN0cm95SG9va3MpICE9IG51bGwpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXN0cm95SG9va3MubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBsVmlld1tkZXN0cm95SG9va3NbaV1dO1xuICAgICAgICAgICAgLy8gT25seSBjYWxsIHRoZSBkZXN0cm95IGhvb2sgaWYgdGhlIGNvbnRleHQgaGFzIGJlZW4gcmVxdWVzdGVkLlxuICAgICAgICAgICAgaWYgKCEoY29udGV4dCBpbnN0YW5jZW9mIE5vZGVJbmplY3RvckZhY3RvcnkpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9DYWxsID0gZGVzdHJveUhvb2tzW2kgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0b0NhbGwpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdG9DYWxsLmxlbmd0aDsgaiArPSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxsQ29udGV4dCA9IGNvbnRleHRbdG9DYWxsW2pdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhvb2sgPSB0b0NhbGxbaiArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZXIoNCAvKiBMaWZlY3ljbGVIb29rU3RhcnQgKi8sIGNhbGxDb250ZXh0LCBob29rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9vay5jYWxsKGNhbGxDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGVyKDUgLyogTGlmZWN5Y2xlSG9va0VuZCAqLywgY2FsbENvbnRleHQsIGhvb2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9maWxlcig0IC8qIExpZmVjeWNsZUhvb2tTdGFydCAqLywgY29udGV4dCwgdG9DYWxsKTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvQ2FsbC5jYWxsKGNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZXIoNSAvKiBMaWZlY3ljbGVIb29rRW5kICovLCBjb250ZXh0LCB0b0NhbGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIGEgbmF0aXZlIGVsZW1lbnQgaWYgYSBub2RlIGNhbiBiZSBpbnNlcnRlZCBpbnRvIHRoZSBnaXZlbiBwYXJlbnQuXG4gKlxuICogVGhlcmUgYXJlIHR3byByZWFzb25zIHdoeSB3ZSBtYXkgbm90IGJlIGFibGUgdG8gaW5zZXJ0IGEgZWxlbWVudCBpbW1lZGlhdGVseS5cbiAqIC0gUHJvamVjdGlvbjogV2hlbiBjcmVhdGluZyBhIGNoaWxkIGNvbnRlbnQgZWxlbWVudCBvZiBhIGNvbXBvbmVudCwgd2UgaGF2ZSB0byBza2lwIHRoZVxuICogICBpbnNlcnRpb24gYmVjYXVzZSB0aGUgY29udGVudCBvZiBhIGNvbXBvbmVudCB3aWxsIGJlIHByb2plY3RlZC5cbiAqICAgYDxjb21wb25lbnQ+PGNvbnRlbnQ+ZGVsYXllZCBkdWUgdG8gcHJvamVjdGlvbjwvY29udGVudD48L2NvbXBvbmVudD5gXG4gKiAtIFBhcmVudCBjb250YWluZXIgaXMgZGlzY29ubmVjdGVkOiBUaGlzIGNhbiBoYXBwZW4gd2hlbiB3ZSBhcmUgaW5zZXJ0aW5nIGEgdmlldyBpbnRvXG4gKiAgIHBhcmVudCBjb250YWluZXIsIHdoaWNoIGl0c2VsZiBpcyBkaXNjb25uZWN0ZWQuIEZvciBleGFtcGxlIHRoZSBwYXJlbnQgY29udGFpbmVyIGlzIHBhcnRcbiAqICAgb2YgYSBWaWV3IHdoaWNoIGhhcyBub3QgYmUgaW5zZXJ0ZWQgb3IgaXMgbWFkZSBmb3IgcHJvamVjdGlvbiBidXQgaGFzIG5vdCBiZWVuIGluc2VydGVkXG4gKiAgIGludG8gZGVzdGluYXRpb24uXG4gKlxuICogQHBhcmFtIHRWaWV3OiBDdXJyZW50IGBUVmlld2AuXG4gKiBAcGFyYW0gdE5vZGU6IGBUTm9kZWAgZm9yIHdoaWNoIHdlIHdpc2ggdG8gcmV0cmlldmUgcmVuZGVyIHBhcmVudC5cbiAqIEBwYXJhbSBsVmlldzogQ3VycmVudCBgTFZpZXdgLlxuICovXG5mdW5jdGlvbiBnZXRQYXJlbnRSRWxlbWVudCh0VmlldywgdE5vZGUsIGxWaWV3KSB7XG4gICAgcmV0dXJuIGdldENsb3Nlc3RSRWxlbWVudCh0VmlldywgdE5vZGUucGFyZW50LCBsVmlldyk7XG59XG4vKipcbiAqIEdldCBjbG9zZXN0IGBSRWxlbWVudGAgb3IgYG51bGxgIGlmIGl0IGNhbid0IGJlIGZvdW5kLlxuICpcbiAqIElmIGBUTm9kZWAgaXMgYFROb2RlVHlwZS5FbGVtZW50YCA9PiByZXR1cm4gYFJFbGVtZW50YCBhdCBgTFZpZXdbdE5vZGUuaW5kZXhdYCBsb2NhdGlvbi5cbiAqIElmIGBUTm9kZWAgaXMgYFROb2RlVHlwZS5FbGVtZW50Q29udGFpbmVyfEljdUNvbnRhaW5gID0+IHJldHVybiB0aGUgcGFyZW50IChyZWN1cnNpdmVseSkuXG4gKiBJZiBgVE5vZGVgIGlzIGBudWxsYCB0aGVuIHJldHVybiBob3N0IGBSRWxlbWVudGA6XG4gKiAgIC0gcmV0dXJuIGBudWxsYCBpZiBwcm9qZWN0aW9uXG4gKiAgIC0gcmV0dXJuIGBudWxsYCBpZiBwYXJlbnQgY29udGFpbmVyIGlzIGRpc2Nvbm5lY3RlZCAod2UgaGF2ZSBubyBwYXJlbnQuKVxuICpcbiAqIEBwYXJhbSB0VmlldzogQ3VycmVudCBgVFZpZXdgLlxuICogQHBhcmFtIHROb2RlOiBgVE5vZGVgIGZvciB3aGljaCB3ZSB3aXNoIHRvIHJldHJpZXZlIGBSRWxlbWVudGAgKG9yIGBudWxsYCBpZiBob3N0IGVsZW1lbnQgaXNcbiAqICAgICBuZWVkZWQpLlxuICogQHBhcmFtIGxWaWV3OiBDdXJyZW50IGBMVmlld2AuXG4gKiBAcmV0dXJucyBgbnVsbGAgaWYgdGhlIGBSRWxlbWVudGAgY2FuJ3QgYmUgZGV0ZXJtaW5lZCBhdCB0aGlzIHRpbWUgKG5vIHBhcmVudCAvIHByb2plY3Rpb24pXG4gKi9cbmZ1bmN0aW9uIGdldENsb3Nlc3RSRWxlbWVudCh0VmlldywgdE5vZGUsIGxWaWV3KSB7XG4gICAgbGV0IHBhcmVudFROb2RlID0gdE5vZGU7XG4gICAgLy8gU2tpcCBvdmVyIGVsZW1lbnQgYW5kIElDVSBjb250YWluZXJzIGFzIHRob3NlIGFyZSByZXByZXNlbnRlZCBieSBhIGNvbW1lbnQgbm9kZSBhbmRcbiAgICAvLyBjYW4ndCBiZSB1c2VkIGFzIGEgcmVuZGVyIHBhcmVudC5cbiAgICB3aGlsZSAocGFyZW50VE5vZGUgIT09IG51bGwgJiZcbiAgICAgICAgKHBhcmVudFROb2RlLnR5cGUgJiAoOCAvKiBFbGVtZW50Q29udGFpbmVyICovIHwgMzIgLyogSWN1ICovKSkpIHtcbiAgICAgICAgdE5vZGUgPSBwYXJlbnRUTm9kZTtcbiAgICAgICAgcGFyZW50VE5vZGUgPSB0Tm9kZS5wYXJlbnQ7XG4gICAgfVxuICAgIC8vIElmIHRoZSBwYXJlbnQgdE5vZGUgaXMgbnVsbCwgdGhlbiB3ZSBhcmUgaW5zZXJ0aW5nIGFjcm9zcyB2aWV3czogZWl0aGVyIGludG8gYW4gZW1iZWRkZWQgdmlld1xuICAgIC8vIG9yIGEgY29tcG9uZW50IHZpZXcuXG4gICAgaWYgKHBhcmVudFROb2RlID09PSBudWxsKSB7XG4gICAgICAgIC8vIFdlIGFyZSBpbnNlcnRpbmcgYSByb290IGVsZW1lbnQgb2YgdGhlIGNvbXBvbmVudCB2aWV3IGludG8gdGhlIGNvbXBvbmVudCBob3N0IGVsZW1lbnQgYW5kXG4gICAgICAgIC8vIGl0IHNob3VsZCBhbHdheXMgYmUgZWFnZXIuXG4gICAgICAgIHJldHVybiBsVmlld1tIT1NUXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUTm9kZVR5cGUocGFyZW50VE5vZGUsIDMgLyogQW55Uk5vZGUgKi8gfCA0IC8qIENvbnRhaW5lciAqLyk7XG4gICAgICAgIGlmIChwYXJlbnRUTm9kZS5mbGFncyAmIDIgLyogaXNDb21wb25lbnRIb3N0ICovKSB7XG4gICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VE5vZGVGb3JMVmlldyhwYXJlbnRUTm9kZSwgbFZpZXcpO1xuICAgICAgICAgICAgY29uc3QgZW5jYXBzdWxhdGlvbiA9IHRWaWV3LmRhdGFbcGFyZW50VE5vZGUuZGlyZWN0aXZlU3RhcnRdLmVuY2Fwc3VsYXRpb247XG4gICAgICAgICAgICAvLyBXZSd2ZSBnb3QgYSBwYXJlbnQgd2hpY2ggaXMgYW4gZWxlbWVudCBpbiB0aGUgY3VycmVudCB2aWV3LiBXZSBqdXN0IG5lZWQgdG8gdmVyaWZ5IGlmIHRoZVxuICAgICAgICAgICAgLy8gcGFyZW50IGVsZW1lbnQgaXMgbm90IGEgY29tcG9uZW50LiBDb21wb25lbnQncyBjb250ZW50IG5vZGVzIGFyZSBub3QgaW5zZXJ0ZWQgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhleSB3aWxsIGJlIHByb2plY3RlZCwgYW5kIHNvIGRvaW5nIGluc2VydCBhdCB0aGlzIHBvaW50IHdvdWxkIGJlIHdhc3RlZnVsLlxuICAgICAgICAgICAgLy8gU2luY2UgdGhlIHByb2plY3Rpb24gd291bGQgdGhlbiBtb3ZlIGl0IHRvIGl0cyBmaW5hbCBkZXN0aW5hdGlvbi4gTm90ZSB0aGF0IHdlIGNhbid0XG4gICAgICAgICAgICAvLyBtYWtlIHRoaXMgYXNzdW1wdGlvbiB3aGVuIHVzaW5nIHRoZSBTaGFkb3cgRE9NLCBiZWNhdXNlIHRoZSBuYXRpdmUgcHJvamVjdGlvbiBwbGFjZWhvbGRlcnNcbiAgICAgICAgICAgIC8vICg8Y29udGVudD4gb3IgPHNsb3Q+KSBoYXZlIHRvIGJlIGluIHBsYWNlIGFzIGVsZW1lbnRzIGFyZSBiZWluZyBpbnNlcnRlZC5cbiAgICAgICAgICAgIGlmIChlbmNhcHN1bGF0aW9uID09PSBWaWV3RW5jYXBzdWxhdGlvbiQxLk5vbmUgfHxcbiAgICAgICAgICAgICAgICBlbmNhcHN1bGF0aW9uID09PSBWaWV3RW5jYXBzdWxhdGlvbiQxLkVtdWxhdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdldE5hdGl2ZUJ5VE5vZGUocGFyZW50VE5vZGUsIGxWaWV3KTtcbiAgICB9XG59XG4vKipcbiAqIEluc2VydHMgYSBuYXRpdmUgbm9kZSBiZWZvcmUgYW5vdGhlciBuYXRpdmUgbm9kZSBmb3IgYSBnaXZlbiBwYXJlbnQgdXNpbmcge0BsaW5rIFJlbmRlcmVyM30uXG4gKiBUaGlzIGlzIGEgdXRpbGl0eSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHdoZW4gbmF0aXZlIG5vZGVzIHdlcmUgZGV0ZXJtaW5lZCAtIGl0IGFic3RyYWN0cyBhblxuICogYWN0dWFsIHJlbmRlcmVyIGJlaW5nIHVzZWQuXG4gKi9cbmZ1bmN0aW9uIG5hdGl2ZUluc2VydEJlZm9yZShyZW5kZXJlciwgcGFyZW50LCBjaGlsZCwgYmVmb3JlTm9kZSwgaXNNb3ZlKSB7XG4gICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5yZW5kZXJlckluc2VydEJlZm9yZSsrO1xuICAgIGlmIChpc1Byb2NlZHVyYWxSZW5kZXJlcihyZW5kZXJlcikpIHtcbiAgICAgICAgcmVuZGVyZXIuaW5zZXJ0QmVmb3JlKHBhcmVudCwgY2hpbGQsIGJlZm9yZU5vZGUsIGlzTW92ZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBiZWZvcmVOb2RlLCBpc01vdmUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5hdGl2ZUFwcGVuZENoaWxkKHJlbmRlcmVyLCBwYXJlbnQsIGNoaWxkKSB7XG4gICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5yZW5kZXJlckFwcGVuZENoaWxkKys7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQocGFyZW50LCAncGFyZW50IG5vZGUgbXVzdCBiZSBkZWZpbmVkJyk7XG4gICAgaWYgKGlzUHJvY2VkdXJhbFJlbmRlcmVyKHJlbmRlcmVyKSkge1xuICAgICAgICByZW5kZXJlci5hcHBlbmRDaGlsZChwYXJlbnQsIGNoaWxkKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxufVxuZnVuY3Rpb24gbmF0aXZlQXBwZW5kT3JJbnNlcnRCZWZvcmUocmVuZGVyZXIsIHBhcmVudCwgY2hpbGQsIGJlZm9yZU5vZGUsIGlzTW92ZSkge1xuICAgIGlmIChiZWZvcmVOb2RlICE9PSBudWxsKSB7XG4gICAgICAgIG5hdGl2ZUluc2VydEJlZm9yZShyZW5kZXJlciwgcGFyZW50LCBjaGlsZCwgYmVmb3JlTm9kZSwgaXNNb3ZlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5hdGl2ZUFwcGVuZENoaWxkKHJlbmRlcmVyLCBwYXJlbnQsIGNoaWxkKTtcbiAgICB9XG59XG4vKiogUmVtb3ZlcyBhIG5vZGUgZnJvbSB0aGUgRE9NIGdpdmVuIGl0cyBuYXRpdmUgcGFyZW50LiAqL1xuZnVuY3Rpb24gbmF0aXZlUmVtb3ZlQ2hpbGQocmVuZGVyZXIsIHBhcmVudCwgY2hpbGQsIGlzSG9zdEVsZW1lbnQpIHtcbiAgICBpZiAoaXNQcm9jZWR1cmFsUmVuZGVyZXIocmVuZGVyZXIpKSB7XG4gICAgICAgIHJlbmRlcmVyLnJlbW92ZUNoaWxkKHBhcmVudCwgY2hpbGQsIGlzSG9zdEVsZW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybnMgYSBuYXRpdmUgcGFyZW50IG9mIGEgZ2l2ZW4gbmF0aXZlIG5vZGUuXG4gKi9cbmZ1bmN0aW9uIG5hdGl2ZVBhcmVudE5vZGUocmVuZGVyZXIsIG5vZGUpIHtcbiAgICByZXR1cm4gKGlzUHJvY2VkdXJhbFJlbmRlcmVyKHJlbmRlcmVyKSA/IHJlbmRlcmVyLnBhcmVudE5vZGUobm9kZSkgOiBub2RlLnBhcmVudE5vZGUpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgbmF0aXZlIHNpYmxpbmcgb2YgYSBnaXZlbiBuYXRpdmUgbm9kZS5cbiAqL1xuZnVuY3Rpb24gbmF0aXZlTmV4dFNpYmxpbmcocmVuZGVyZXIsIG5vZGUpIHtcbiAgICByZXR1cm4gaXNQcm9jZWR1cmFsUmVuZGVyZXIocmVuZGVyZXIpID8gcmVuZGVyZXIubmV4dFNpYmxpbmcobm9kZSkgOiBub2RlLm5leHRTaWJsaW5nO1xufVxuLyoqXG4gKiBGaW5kIGEgbm9kZSBpbiBmcm9udCBvZiB3aGljaCBgY3VycmVudFROb2RlYCBzaG91bGQgYmUgaW5zZXJ0ZWQuXG4gKlxuICogVGhpcyBtZXRob2QgZGV0ZXJtaW5lcyB0aGUgYFJOb2RlYCBpbiBmcm9udCBvZiB3aGljaCB3ZSBzaG91bGQgaW5zZXJ0IHRoZSBgY3VycmVudFJOb2RlYC4gVGhpc1xuICogdGFrZXMgYFROb2RlLmluc2VydEJlZm9yZUluZGV4YCBpbnRvIGFjY291bnQgaWYgaTE4biBjb2RlIGhhcyBiZWVuIGludm9rZWQuXG4gKlxuICogQHBhcmFtIHBhcmVudFROb2RlIHBhcmVudCBgVE5vZGVgXG4gKiBAcGFyYW0gY3VycmVudFROb2RlIGN1cnJlbnQgYFROb2RlYCAoVGhlIG5vZGUgd2hpY2ggd2Ugd291bGQgbGlrZSB0byBpbnNlcnQgaW50byB0aGUgRE9NKVxuICogQHBhcmFtIGxWaWV3IGN1cnJlbnQgYExWaWV3YFxuICovXG5mdW5jdGlvbiBnZXRJbnNlcnRJbkZyb250T2ZSTm9kZShwYXJlbnRUTm9kZSwgY3VycmVudFROb2RlLCBsVmlldykge1xuICAgIHJldHVybiBfZ2V0SW5zZXJ0SW5Gcm9udE9mUk5vZGVXaXRoSTE4bihwYXJlbnRUTm9kZSwgY3VycmVudFROb2RlLCBsVmlldyk7XG59XG4vKipcbiAqIEZpbmQgYSBub2RlIGluIGZyb250IG9mIHdoaWNoIGBjdXJyZW50VE5vZGVgIHNob3VsZCBiZSBpbnNlcnRlZC4gKERvZXMgbm90IHRha2UgaTE4biBpbnRvXG4gKiBhY2NvdW50KVxuICpcbiAqIFRoaXMgbWV0aG9kIGRldGVybWluZXMgdGhlIGBSTm9kZWAgaW4gZnJvbnQgb2Ygd2hpY2ggd2Ugc2hvdWxkIGluc2VydCB0aGUgYGN1cnJlbnRSTm9kZWAuIFRoaXNcbiAqIGRvZXMgbm90IHRha2UgYFROb2RlLmluc2VydEJlZm9yZUluZGV4YCBpbnRvIGFjY291bnQuXG4gKlxuICogQHBhcmFtIHBhcmVudFROb2RlIHBhcmVudCBgVE5vZGVgXG4gKiBAcGFyYW0gY3VycmVudFROb2RlIGN1cnJlbnQgYFROb2RlYCAoVGhlIG5vZGUgd2hpY2ggd2Ugd291bGQgbGlrZSB0byBpbnNlcnQgaW50byB0aGUgRE9NKVxuICogQHBhcmFtIGxWaWV3IGN1cnJlbnQgYExWaWV3YFxuICovXG5mdW5jdGlvbiBnZXRJbnNlcnRJbkZyb250T2ZSTm9kZVdpdGhOb0kxOG4ocGFyZW50VE5vZGUsIGN1cnJlbnRUTm9kZSwgbFZpZXcpIHtcbiAgICBpZiAocGFyZW50VE5vZGUudHlwZSAmICg4IC8qIEVsZW1lbnRDb250YWluZXIgKi8gfCAzMiAvKiBJY3UgKi8pKSB7XG4gICAgICAgIHJldHVybiBnZXROYXRpdmVCeVROb2RlKHBhcmVudFROb2RlLCBsVmlldyk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBUcmVlIHNoYWthYmxlIGJvdW5kYXJ5IGZvciBgZ2V0SW5zZXJ0SW5Gcm9udE9mUk5vZGVXaXRoSTE4bmAgZnVuY3Rpb24uXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgYmUgc2V0IGlmIGkxOG4gY29kZSBydW5zLlxuICovXG5sZXQgX2dldEluc2VydEluRnJvbnRPZlJOb2RlV2l0aEkxOG4gPSBnZXRJbnNlcnRJbkZyb250T2ZSTm9kZVdpdGhOb0kxOG47XG4vKipcbiAqIFRyZWUgc2hha2FibGUgYm91bmRhcnkgZm9yIGBwcm9jZXNzSTE4bkluc2VydEJlZm9yZWAgZnVuY3Rpb24uXG4gKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIG9ubHkgYmUgc2V0IGlmIGkxOG4gY29kZSBydW5zLlxuICovXG5sZXQgX3Byb2Nlc3NJMThuSW5zZXJ0QmVmb3JlO1xuZnVuY3Rpb24gc2V0STE4bkhhbmRsaW5nKGdldEluc2VydEluRnJvbnRPZlJOb2RlV2l0aEkxOG4sIHByb2Nlc3NJMThuSW5zZXJ0QmVmb3JlKSB7XG4gICAgX2dldEluc2VydEluRnJvbnRPZlJOb2RlV2l0aEkxOG4gPSBnZXRJbnNlcnRJbkZyb250T2ZSTm9kZVdpdGhJMThuO1xuICAgIF9wcm9jZXNzSTE4bkluc2VydEJlZm9yZSA9IHByb2Nlc3NJMThuSW5zZXJ0QmVmb3JlO1xufVxuLyoqXG4gKiBBcHBlbmRzIHRoZSBgY2hpbGRgIG5hdGl2ZSBub2RlIChvciBhIGNvbGxlY3Rpb24gb2Ygbm9kZXMpIHRvIHRoZSBgcGFyZW50YC5cbiAqXG4gKiBAcGFyYW0gdFZpZXcgVGhlIGBUVmlldycgdG8gYmUgYXBwZW5kZWRcbiAqIEBwYXJhbSBsVmlldyBUaGUgY3VycmVudCBMVmlld1xuICogQHBhcmFtIGNoaWxkUk5vZGUgVGhlIG5hdGl2ZSBjaGlsZCAob3IgY2hpbGRyZW4pIHRoYXQgc2hvdWxkIGJlIGFwcGVuZGVkXG4gKiBAcGFyYW0gY2hpbGRUTm9kZSBUaGUgVE5vZGUgb2YgdGhlIGNoaWxkIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gYXBwZW5kQ2hpbGQodFZpZXcsIGxWaWV3LCBjaGlsZFJOb2RlLCBjaGlsZFROb2RlKSB7XG4gICAgY29uc3QgcGFyZW50Uk5vZGUgPSBnZXRQYXJlbnRSRWxlbWVudCh0VmlldywgY2hpbGRUTm9kZSwgbFZpZXcpO1xuICAgIGNvbnN0IHJlbmRlcmVyID0gbFZpZXdbUkVOREVSRVJdO1xuICAgIGNvbnN0IHBhcmVudFROb2RlID0gY2hpbGRUTm9kZS5wYXJlbnQgfHwgbFZpZXdbVF9IT1NUXTtcbiAgICBjb25zdCBhbmNob3JOb2RlID0gZ2V0SW5zZXJ0SW5Gcm9udE9mUk5vZGUocGFyZW50VE5vZGUsIGNoaWxkVE5vZGUsIGxWaWV3KTtcbiAgICBpZiAocGFyZW50Uk5vZGUgIT0gbnVsbCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZFJOb2RlKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZFJOb2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmF0aXZlQXBwZW5kT3JJbnNlcnRCZWZvcmUocmVuZGVyZXIsIHBhcmVudFJOb2RlLCBjaGlsZFJOb2RlW2ldLCBhbmNob3JOb2RlLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuYXRpdmVBcHBlbmRPckluc2VydEJlZm9yZShyZW5kZXJlciwgcGFyZW50Uk5vZGUsIGNoaWxkUk5vZGUsIGFuY2hvck5vZGUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfcHJvY2Vzc0kxOG5JbnNlcnRCZWZvcmUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBfcHJvY2Vzc0kxOG5JbnNlcnRCZWZvcmUocmVuZGVyZXIsIGNoaWxkVE5vZGUsIGxWaWV3LCBjaGlsZFJOb2RlLCBwYXJlbnRSTm9kZSk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IG5hdGl2ZSBub2RlIGZvciBhIGdpdmVuIExWaWV3LCBzdGFydGluZyBmcm9tIHRoZSBwcm92aWRlZCBUTm9kZS5cbiAqXG4gKiBOYXRpdmUgbm9kZXMgYXJlIHJldHVybmVkIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aG9zZSBhcHBlYXIgaW4gdGhlIG5hdGl2ZSB0cmVlIChET00pLlxuICovXG5mdW5jdGlvbiBnZXRGaXJzdE5hdGl2ZU5vZGUobFZpZXcsIHROb2RlKSB7XG4gICAgaWYgKHROb2RlICE9PSBudWxsKSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgYXNzZXJ0VE5vZGVUeXBlKHROb2RlLCAzIC8qIEFueVJOb2RlICovIHwgMTIgLyogQW55Q29udGFpbmVyICovIHwgMzIgLyogSWN1ICovIHwgMTYgLyogUHJvamVjdGlvbiAqLyk7XG4gICAgICAgIGNvbnN0IHROb2RlVHlwZSA9IHROb2RlLnR5cGU7XG4gICAgICAgIGlmICh0Tm9kZVR5cGUgJiAzIC8qIEFueVJOb2RlICovKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TmF0aXZlQnlUTm9kZSh0Tm9kZSwgbFZpZXcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHROb2RlVHlwZSAmIDQgLyogQ29udGFpbmVyICovKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0QmVmb3JlTm9kZUZvclZpZXcoLTEsIGxWaWV3W3ROb2RlLmluZGV4XSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodE5vZGVUeXBlICYgOCAvKiBFbGVtZW50Q29udGFpbmVyICovKSB7XG4gICAgICAgICAgICBjb25zdCBlbEljdUNvbnRhaW5lckNoaWxkID0gdE5vZGUuY2hpbGQ7XG4gICAgICAgICAgICBpZiAoZWxJY3VDb250YWluZXJDaGlsZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRGaXJzdE5hdGl2ZU5vZGUobFZpZXcsIGVsSWN1Q29udGFpbmVyQ2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgck5vZGVPckxDb250YWluZXIgPSBsVmlld1t0Tm9kZS5pbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKGlzTENvbnRhaW5lcihyTm9kZU9yTENvbnRhaW5lcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldEJlZm9yZU5vZGVGb3JWaWV3KC0xLCByTm9kZU9yTENvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW53cmFwUk5vZGUock5vZGVPckxDb250YWluZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0Tm9kZVR5cGUgJiAzMiAvKiBJY3UgKi8pIHtcbiAgICAgICAgICAgIGxldCBuZXh0Uk5vZGUgPSBpY3VDb250YWluZXJJdGVyYXRlKHROb2RlLCBsVmlldyk7XG4gICAgICAgICAgICBsZXQgck5vZGUgPSBuZXh0Uk5vZGUoKTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBJQ1UgY29udGFpbmVyIGhhcyBubyBub2RlcywgdGhhbiB3ZSB1c2UgdGhlIElDVSBhbmNob3IgYXMgdGhlIG5vZGUuXG4gICAgICAgICAgICByZXR1cm4gck5vZGUgfHwgdW53cmFwUk5vZGUobFZpZXdbdE5vZGUuaW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3Rpb25Ob2RlcyA9IGdldFByb2plY3Rpb25Ob2RlcyhsVmlldywgdE5vZGUpO1xuICAgICAgICAgICAgaWYgKHByb2plY3Rpb25Ob2RlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb2plY3Rpb25Ob2RlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2plY3Rpb25Ob2Rlc1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50VmlldyA9IGdldExWaWV3UGFyZW50KGxWaWV3W0RFQ0xBUkFUSU9OX0NPTVBPTkVOVF9WSUVXXSk7XG4gICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydFBhcmVudFZpZXcocGFyZW50Vmlldyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEZpcnN0TmF0aXZlTm9kZShwYXJlbnRWaWV3LCBwcm9qZWN0aW9uTm9kZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEZpcnN0TmF0aXZlTm9kZShsVmlldywgdE5vZGUubmV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBnZXRQcm9qZWN0aW9uTm9kZXMobFZpZXcsIHROb2RlKSB7XG4gICAgaWYgKHROb2RlICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFZpZXcgPSBsVmlld1tERUNMQVJBVElPTl9DT01QT05FTlRfVklFV107XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEhvc3QgPSBjb21wb25lbnRWaWV3W1RfSE9TVF07XG4gICAgICAgIGNvbnN0IHNsb3RJZHggPSB0Tm9kZS5wcm9qZWN0aW9uO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0UHJvamVjdGlvblNsb3RzKGxWaWV3KTtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudEhvc3QucHJvamVjdGlvbltzbG90SWR4XTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBnZXRCZWZvcmVOb2RlRm9yVmlldyh2aWV3SW5kZXhJbkNvbnRhaW5lciwgbENvbnRhaW5lcikge1xuICAgIGNvbnN0IG5leHRWaWV3SW5kZXggPSBDT05UQUlORVJfSEVBREVSX09GRlNFVCArIHZpZXdJbmRleEluQ29udGFpbmVyICsgMTtcbiAgICBpZiAobmV4dFZpZXdJbmRleCA8IGxDb250YWluZXIubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGxWaWV3ID0gbENvbnRhaW5lcltuZXh0Vmlld0luZGV4XTtcbiAgICAgICAgY29uc3QgZmlyc3RUTm9kZU9mVmlldyA9IGxWaWV3W1RWSUVXXS5maXJzdENoaWxkO1xuICAgICAgICBpZiAoZmlyc3RUTm9kZU9mVmlldyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldEZpcnN0TmF0aXZlTm9kZShsVmlldywgZmlyc3RUTm9kZU9mVmlldyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxDb250YWluZXJbTkFUSVZFXTtcbn1cbi8qKlxuICogUmVtb3ZlcyBhIG5hdGl2ZSBub2RlIGl0c2VsZiB1c2luZyBhIGdpdmVuIHJlbmRlcmVyLiBUbyByZW1vdmUgdGhlIG5vZGUgd2UgYXJlIGxvb2tpbmcgdXAgaXRzXG4gKiBwYXJlbnQgZnJvbSB0aGUgbmF0aXZlIHRyZWUgYXMgbm90IGFsbCBwbGF0Zm9ybXMgLyBicm93c2VycyBzdXBwb3J0IHRoZSBlcXVpdmFsZW50IG9mXG4gKiBub2RlLnJlbW92ZSgpLlxuICpcbiAqIEBwYXJhbSByZW5kZXJlciBBIHJlbmRlcmVyIHRvIGJlIHVzZWRcbiAqIEBwYXJhbSByTm9kZSBUaGUgbmF0aXZlIG5vZGUgdGhhdCBzaG91bGQgYmUgcmVtb3ZlZFxuICogQHBhcmFtIGlzSG9zdEVsZW1lbnQgQSBmbGFnIGluZGljYXRpbmcgaWYgYSBub2RlIHRvIGJlIHJlbW92ZWQgaXMgYSBob3N0IG9mIGEgY29tcG9uZW50LlxuICovXG5mdW5jdGlvbiBuYXRpdmVSZW1vdmVOb2RlKHJlbmRlcmVyLCByTm9kZSwgaXNIb3N0RWxlbWVudCkge1xuICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJSZW1vdmVOb2RlKys7XG4gICAgY29uc3QgbmF0aXZlUGFyZW50ID0gbmF0aXZlUGFyZW50Tm9kZShyZW5kZXJlciwgck5vZGUpO1xuICAgIGlmIChuYXRpdmVQYXJlbnQpIHtcbiAgICAgICAgbmF0aXZlUmVtb3ZlQ2hpbGQocmVuZGVyZXIsIG5hdGl2ZVBhcmVudCwgck5vZGUsIGlzSG9zdEVsZW1lbnQpO1xuICAgIH1cbn1cbi8qKlxuICogUGVyZm9ybXMgdGhlIG9wZXJhdGlvbiBvZiBgYWN0aW9uYCBvbiB0aGUgbm9kZS4gVHlwaWNhbGx5IHRoaXMgaW52b2x2ZXMgaW5zZXJ0aW5nIG9yIHJlbW92aW5nXG4gKiBub2RlcyBvbiB0aGUgTFZpZXcgb3IgcHJvamVjdGlvbiBib3VuZGFyeS5cbiAqL1xuZnVuY3Rpb24gYXBwbHlOb2RlcyhyZW5kZXJlciwgYWN0aW9uLCB0Tm9kZSwgbFZpZXcsIHBhcmVudFJFbGVtZW50LCBiZWZvcmVOb2RlLCBpc1Byb2plY3Rpb24pIHtcbiAgICB3aGlsZSAodE5vZGUgIT0gbnVsbCkge1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VE5vZGVGb3JMVmlldyh0Tm9kZSwgbFZpZXcpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIGFzc2VydFROb2RlVHlwZSh0Tm9kZSwgMyAvKiBBbnlSTm9kZSAqLyB8IDEyIC8qIEFueUNvbnRhaW5lciAqLyB8IDE2IC8qIFByb2plY3Rpb24gKi8gfCAzMiAvKiBJY3UgKi8pO1xuICAgICAgICBjb25zdCByYXdTbG90VmFsdWUgPSBsVmlld1t0Tm9kZS5pbmRleF07XG4gICAgICAgIGNvbnN0IHROb2RlVHlwZSA9IHROb2RlLnR5cGU7XG4gICAgICAgIGlmIChpc1Byb2plY3Rpb24pIHtcbiAgICAgICAgICAgIGlmIChhY3Rpb24gPT09IDAgLyogQ3JlYXRlICovKSB7XG4gICAgICAgICAgICAgICAgcmF3U2xvdFZhbHVlICYmIGF0dGFjaFBhdGNoRGF0YSh1bndyYXBSTm9kZShyYXdTbG90VmFsdWUpLCBsVmlldyk7XG4gICAgICAgICAgICAgICAgdE5vZGUuZmxhZ3MgfD0gNCAvKiBpc1Byb2plY3RlZCAqLztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKHROb2RlLmZsYWdzICYgNjQgLyogaXNEZXRhY2hlZCAqLykgIT09IDY0IC8qIGlzRGV0YWNoZWQgKi8pIHtcbiAgICAgICAgICAgIGlmICh0Tm9kZVR5cGUgJiA4IC8qIEVsZW1lbnRDb250YWluZXIgKi8pIHtcbiAgICAgICAgICAgICAgICBhcHBseU5vZGVzKHJlbmRlcmVyLCBhY3Rpb24sIHROb2RlLmNoaWxkLCBsVmlldywgcGFyZW50UkVsZW1lbnQsIGJlZm9yZU5vZGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBhcHBseVRvRWxlbWVudE9yQ29udGFpbmVyKGFjdGlvbiwgcmVuZGVyZXIsIHBhcmVudFJFbGVtZW50LCByYXdTbG90VmFsdWUsIGJlZm9yZU5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodE5vZGVUeXBlICYgMzIgLyogSWN1ICovKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFJOb2RlID0gaWN1Q29udGFpbmVySXRlcmF0ZSh0Tm9kZSwgbFZpZXcpO1xuICAgICAgICAgICAgICAgIGxldCByTm9kZTtcbiAgICAgICAgICAgICAgICB3aGlsZSAock5vZGUgPSBuZXh0Uk5vZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICBhcHBseVRvRWxlbWVudE9yQ29udGFpbmVyKGFjdGlvbiwgcmVuZGVyZXIsIHBhcmVudFJFbGVtZW50LCByTm9kZSwgYmVmb3JlTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFwcGx5VG9FbGVtZW50T3JDb250YWluZXIoYWN0aW9uLCByZW5kZXJlciwgcGFyZW50UkVsZW1lbnQsIHJhd1Nsb3RWYWx1ZSwgYmVmb3JlTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0Tm9kZVR5cGUgJiAxNiAvKiBQcm9qZWN0aW9uICovKSB7XG4gICAgICAgICAgICAgICAgYXBwbHlQcm9qZWN0aW9uUmVjdXJzaXZlKHJlbmRlcmVyLCBhY3Rpb24sIGxWaWV3LCB0Tm9kZSwgcGFyZW50UkVsZW1lbnQsIGJlZm9yZU5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydFROb2RlVHlwZSh0Tm9kZSwgMyAvKiBBbnlSTm9kZSAqLyB8IDQgLyogQ29udGFpbmVyICovKTtcbiAgICAgICAgICAgICAgICBhcHBseVRvRWxlbWVudE9yQ29udGFpbmVyKGFjdGlvbiwgcmVuZGVyZXIsIHBhcmVudFJFbGVtZW50LCByYXdTbG90VmFsdWUsIGJlZm9yZU5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHROb2RlID0gaXNQcm9qZWN0aW9uID8gdE5vZGUucHJvamVjdGlvbk5leHQgOiB0Tm9kZS5uZXh0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIGFwcGx5Vmlldyh0VmlldywgbFZpZXcsIHJlbmRlcmVyLCBhY3Rpb24sIHBhcmVudFJFbGVtZW50LCBiZWZvcmVOb2RlKSB7XG4gICAgYXBwbHlOb2RlcyhyZW5kZXJlciwgYWN0aW9uLCB0Vmlldy5maXJzdENoaWxkLCBsVmlldywgcGFyZW50UkVsZW1lbnQsIGJlZm9yZU5vZGUsIGZhbHNlKTtcbn1cbi8qKlxuICogYGFwcGx5UHJvamVjdGlvbmAgcGVyZm9ybXMgb3BlcmF0aW9uIG9uIHRoZSBwcm9qZWN0aW9uLlxuICpcbiAqIEluc2VydGluZyBhIHByb2plY3Rpb24gcmVxdWlyZXMgdXMgdG8gbG9jYXRlIHRoZSBwcm9qZWN0ZWQgbm9kZXMgZnJvbSB0aGUgcGFyZW50IGNvbXBvbmVudC4gVGhlXG4gKiBjb21wbGljYXRpb24gaXMgdGhhdCB0aG9zZSBub2RlcyB0aGVtc2VsdmVzIGNvdWxkIGJlIHJlLXByb2plY3RlZCBmcm9tIHRoZWlyIHBhcmVudCBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHRWaWV3IFRoZSBgVFZpZXdgIG9mIGBMVmlld2Agd2hpY2ggbmVlZHMgdG8gYmUgaW5zZXJ0ZWQsIGRldGFjaGVkLCBkZXN0cm95ZWRcbiAqIEBwYXJhbSBsVmlldyBUaGUgYExWaWV3YCB3aGljaCBuZWVkcyB0byBiZSBpbnNlcnRlZCwgZGV0YWNoZWQsIGRlc3Ryb3llZC5cbiAqIEBwYXJhbSB0UHJvamVjdGlvbk5vZGUgbm9kZSB0byBwcm9qZWN0XG4gKi9cbmZ1bmN0aW9uIGFwcGx5UHJvamVjdGlvbih0VmlldywgbFZpZXcsIHRQcm9qZWN0aW9uTm9kZSkge1xuICAgIGNvbnN0IHJlbmRlcmVyID0gbFZpZXdbUkVOREVSRVJdO1xuICAgIGNvbnN0IHBhcmVudFJOb2RlID0gZ2V0UGFyZW50UkVsZW1lbnQodFZpZXcsIHRQcm9qZWN0aW9uTm9kZSwgbFZpZXcpO1xuICAgIGNvbnN0IHBhcmVudFROb2RlID0gdFByb2plY3Rpb25Ob2RlLnBhcmVudCB8fCBsVmlld1tUX0hPU1RdO1xuICAgIGxldCBiZWZvcmVOb2RlID0gZ2V0SW5zZXJ0SW5Gcm9udE9mUk5vZGUocGFyZW50VE5vZGUsIHRQcm9qZWN0aW9uTm9kZSwgbFZpZXcpO1xuICAgIGFwcGx5UHJvamVjdGlvblJlY3Vyc2l2ZShyZW5kZXJlciwgMCAvKiBDcmVhdGUgKi8sIGxWaWV3LCB0UHJvamVjdGlvbk5vZGUsIHBhcmVudFJOb2RlLCBiZWZvcmVOb2RlKTtcbn1cbi8qKlxuICogYGFwcGx5UHJvamVjdGlvblJlY3Vyc2l2ZWAgcGVyZm9ybXMgb3BlcmF0aW9uIG9uIHRoZSBwcm9qZWN0aW9uIHNwZWNpZmllZCBieSBgYWN0aW9uYCAoaW5zZXJ0LFxuICogZGV0YWNoLCBkZXN0cm95KVxuICpcbiAqIEluc2VydGluZyBhIHByb2plY3Rpb24gcmVxdWlyZXMgdXMgdG8gbG9jYXRlIHRoZSBwcm9qZWN0ZWQgbm9kZXMgZnJvbSB0aGUgcGFyZW50IGNvbXBvbmVudC4gVGhlXG4gKiBjb21wbGljYXRpb24gaXMgdGhhdCB0aG9zZSBub2RlcyB0aGVtc2VsdmVzIGNvdWxkIGJlIHJlLXByb2plY3RlZCBmcm9tIHRoZWlyIHBhcmVudCBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHJlbmRlcmVyIFJlbmRlciB0byB1c2VcbiAqIEBwYXJhbSBhY3Rpb24gYWN0aW9uIHRvIHBlcmZvcm0gKGluc2VydCwgZGV0YWNoLCBkZXN0cm95KVxuICogQHBhcmFtIGxWaWV3IFRoZSBMVmlldyB3aGljaCBuZWVkcyB0byBiZSBpbnNlcnRlZCwgZGV0YWNoZWQsIGRlc3Ryb3llZC5cbiAqIEBwYXJhbSB0UHJvamVjdGlvbk5vZGUgbm9kZSB0byBwcm9qZWN0XG4gKiBAcGFyYW0gcGFyZW50UkVsZW1lbnQgcGFyZW50IERPTSBlbGVtZW50IGZvciBpbnNlcnRpb24vcmVtb3ZhbC5cbiAqIEBwYXJhbSBiZWZvcmVOb2RlIEJlZm9yZSB3aGljaCBub2RlIHRoZSBpbnNlcnRpb25zIHNob3VsZCBoYXBwZW4uXG4gKi9cbmZ1bmN0aW9uIGFwcGx5UHJvamVjdGlvblJlY3Vyc2l2ZShyZW5kZXJlciwgYWN0aW9uLCBsVmlldywgdFByb2plY3Rpb25Ob2RlLCBwYXJlbnRSRWxlbWVudCwgYmVmb3JlTm9kZSkge1xuICAgIGNvbnN0IGNvbXBvbmVudExWaWV3ID0gbFZpZXdbREVDTEFSQVRJT05fQ09NUE9ORU5UX1ZJRVddO1xuICAgIGNvbnN0IGNvbXBvbmVudE5vZGUgPSBjb21wb25lbnRMVmlld1tUX0hPU1RdO1xuICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICBhc3NlcnRFcXVhbCh0eXBlb2YgdFByb2plY3Rpb25Ob2RlLnByb2plY3Rpb24sICdudW1iZXInLCAnZXhwZWN0aW5nIHByb2plY3Rpb24gaW5kZXgnKTtcbiAgICBjb25zdCBub2RlVG9Qcm9qZWN0T3JSTm9kZXMgPSBjb21wb25lbnROb2RlLnByb2plY3Rpb25bdFByb2plY3Rpb25Ob2RlLnByb2plY3Rpb25dO1xuICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGVUb1Byb2plY3RPclJOb2RlcykpIHtcbiAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IGV4aXN0LCBpdCBpcyBhIGJpdCBvZiBhIGhhY2suIFdoZW4gd2UgYm9vdHN0cmFwIGEgdG9wIGxldmVsIG5vZGUgYW5kIHdlXG4gICAgICAgIC8vIG5lZWQgdG8gc3VwcG9ydCBwYXNzaW5nIHByb2plY3RhYmxlIG5vZGVzLCBzbyB3ZSBjaGVhdCBhbmQgcHV0IHRoZW0gaW4gdGhlIFROb2RlXG4gICAgICAgIC8vIG9mIHRoZSBIb3N0IFRWaWV3LiAoWWVzIHdlIHB1dCBpbnN0YW5jZSBpbmZvIGF0IHRoZSBUIExldmVsKS4gV2UgY2FuIGdldCBhd2F5IHdpdGggaXRcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBrbm93IHRoYXQgdGhhdCBUVmlldyBpcyBub3Qgc2hhcmVkIGFuZCB0aGVyZWZvcmUgaXQgd2lsbCBub3QgYmUgYSBwcm9ibGVtLlxuICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSByZWZhY3RvcmVkIGFuZCBjbGVhbmVkIHVwLlxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVUb1Byb2plY3RPclJOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgck5vZGUgPSBub2RlVG9Qcm9qZWN0T3JSTm9kZXNbaV07XG4gICAgICAgICAgICBhcHBseVRvRWxlbWVudE9yQ29udGFpbmVyKGFjdGlvbiwgcmVuZGVyZXIsIHBhcmVudFJFbGVtZW50LCByTm9kZSwgYmVmb3JlTm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBub2RlVG9Qcm9qZWN0ID0gbm9kZVRvUHJvamVjdE9yUk5vZGVzO1xuICAgICAgICBjb25zdCBwcm9qZWN0ZWRDb21wb25lbnRMVmlldyA9IGNvbXBvbmVudExWaWV3W1BBUkVOVF07XG4gICAgICAgIGFwcGx5Tm9kZXMocmVuZGVyZXIsIGFjdGlvbiwgbm9kZVRvUHJvamVjdCwgcHJvamVjdGVkQ29tcG9uZW50TFZpZXcsIHBhcmVudFJFbGVtZW50LCBiZWZvcmVOb2RlLCB0cnVlKTtcbiAgICB9XG59XG4vKipcbiAqIGBhcHBseUNvbnRhaW5lcmAgcGVyZm9ybXMgYW4gb3BlcmF0aW9uIG9uIHRoZSBjb250YWluZXIgYW5kIGl0cyB2aWV3cyBhcyBzcGVjaWZpZWQgYnlcbiAqIGBhY3Rpb25gIChpbnNlcnQsIGRldGFjaCwgZGVzdHJveSlcbiAqXG4gKiBJbnNlcnRpbmcgYSBDb250YWluZXIgaXMgY29tcGxpY2F0ZWQgYnkgdGhlIGZhY3QgdGhhdCB0aGUgY29udGFpbmVyIG1heSBoYXZlIFZpZXdzIHdoaWNoXG4gKiB0aGVtc2VsdmVzIGhhdmUgY29udGFpbmVycyBvciBwcm9qZWN0aW9ucy5cbiAqXG4gKiBAcGFyYW0gcmVuZGVyZXIgUmVuZGVyZXIgdG8gdXNlXG4gKiBAcGFyYW0gYWN0aW9uIGFjdGlvbiB0byBwZXJmb3JtIChpbnNlcnQsIGRldGFjaCwgZGVzdHJveSlcbiAqIEBwYXJhbSBsQ29udGFpbmVyIFRoZSBMQ29udGFpbmVyIHdoaWNoIG5lZWRzIHRvIGJlIGluc2VydGVkLCBkZXRhY2hlZCwgZGVzdHJveWVkLlxuICogQHBhcmFtIHBhcmVudFJFbGVtZW50IHBhcmVudCBET00gZWxlbWVudCBmb3IgaW5zZXJ0aW9uL3JlbW92YWwuXG4gKiBAcGFyYW0gYmVmb3JlTm9kZSBCZWZvcmUgd2hpY2ggbm9kZSB0aGUgaW5zZXJ0aW9ucyBzaG91bGQgaGFwcGVuLlxuICovXG5mdW5jdGlvbiBhcHBseUNvbnRhaW5lcihyZW5kZXJlciwgYWN0aW9uLCBsQ29udGFpbmVyLCBwYXJlbnRSRWxlbWVudCwgYmVmb3JlTm9kZSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRMQ29udGFpbmVyKGxDb250YWluZXIpO1xuICAgIGNvbnN0IGFuY2hvciA9IGxDb250YWluZXJbTkFUSVZFXTsgLy8gTENvbnRhaW5lciBoYXMgaXRzIG93biBiZWZvcmUgbm9kZS5cbiAgICBjb25zdCBuYXRpdmUgPSB1bndyYXBSTm9kZShsQ29udGFpbmVyKTtcbiAgICAvLyBBbiBMQ29udGFpbmVyIGNhbiBiZSBjcmVhdGVkIGR5bmFtaWNhbGx5IG9uIGFueSBub2RlIGJ5IGluamVjdGluZyBWaWV3Q29udGFpbmVyUmVmLlxuICAgIC8vIEFza2luZyBmb3IgYSBWaWV3Q29udGFpbmVyUmVmIG9uIGFuIGVsZW1lbnQgd2lsbCByZXN1bHQgaW4gYSBjcmVhdGlvbiBvZiBhIHNlcGFyYXRlIGFuY2hvclxuICAgIC8vIG5vZGUgKGNvbW1lbnQgaW4gdGhlIERPTSkgdGhhdCB3aWxsIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBMQ29udGFpbmVyJ3MgaG9zdCBub2RlLiBJbiB0aGlzXG4gICAgLy8gcGFydGljdWxhciBjYXNlIHdlIG5lZWQgdG8gZXhlY3V0ZSBhY3Rpb24gb24gMiBub2RlczpcbiAgICAvLyAtIGNvbnRhaW5lcidzIGhvc3Qgbm9kZSAodGhpcyBpcyBkb25lIGluIHRoZSBleGVjdXRlQWN0aW9uT25FbGVtZW50T3JDb250YWluZXIpXG4gICAgLy8gLSBjb250YWluZXIncyBob3N0IG5vZGUgKHRoaXMgaXMgZG9uZSBoZXJlKVxuICAgIGlmIChhbmNob3IgIT09IG5hdGl2ZSkge1xuICAgICAgICAvLyBUaGlzIGlzIHZlcnkgc3RyYW5nZSB0byBtZSAoTWlza28pLiBJIHdvdWxkIGV4cGVjdCB0aGF0IHRoZSBuYXRpdmUgaXMgc2FtZSBhcyBhbmNob3IuIElcbiAgICAgICAgLy8gZG9uJ3Qgc2VlIGEgcmVhc29uIHdoeSB0aGV5IHNob3VsZCBiZSBkaWZmZXJlbnQsIGJ1dCB0aGV5IGFyZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gSWYgdGhleSBhcmUgd2UgbmVlZCB0byBwcm9jZXNzIHRoZSBzZWNvbmQgYW5jaG9yIGFzIHdlbGwuXG4gICAgICAgIGFwcGx5VG9FbGVtZW50T3JDb250YWluZXIoYWN0aW9uLCByZW5kZXJlciwgcGFyZW50UkVsZW1lbnQsIGFuY2hvciwgYmVmb3JlTm9kZSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSBDT05UQUlORVJfSEVBREVSX09GRlNFVDsgaSA8IGxDb250YWluZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbFZpZXcgPSBsQ29udGFpbmVyW2ldO1xuICAgICAgICBhcHBseVZpZXcobFZpZXdbVFZJRVddLCBsVmlldywgcmVuZGVyZXIsIGFjdGlvbiwgcGFyZW50UkVsZW1lbnQsIGFuY2hvcik7XG4gICAgfVxufVxuLyoqXG4gKiBXcml0ZXMgY2xhc3Mvc3R5bGUgdG8gZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0gcmVuZGVyZXIgUmVuZGVyZXIgdG8gdXNlLlxuICogQHBhcmFtIGlzQ2xhc3NCYXNlZCBgdHJ1ZWAgaWYgaXQgc2hvdWxkIGJlIHdyaXR0ZW4gdG8gYGNsYXNzYCAoYGZhbHNlYCB0byB3cml0ZSB0byBgc3R5bGVgKVxuICogQHBhcmFtIHJOb2RlIFRoZSBOb2RlIHRvIHdyaXRlIHRvLlxuICogQHBhcmFtIHByb3AgUHJvcGVydHkgdG8gd3JpdGUgdG8uIFRoaXMgd291bGQgYmUgdGhlIGNsYXNzL3N0eWxlIG5hbWUuXG4gKiBAcGFyYW0gdmFsdWUgVmFsdWUgdG8gd3JpdGUuIElmIGBudWxsYC9gdW5kZWZpbmVkYC9gZmFsc2VgIHRoaXMgaXMgY29uc2lkZXJlZCBhIHJlbW92ZSAoc2V0L2FkZFxuICogICAgICAgIG90aGVyd2lzZSkuXG4gKi9cbmZ1bmN0aW9uIGFwcGx5U3R5bGluZyhyZW5kZXJlciwgaXNDbGFzc0Jhc2VkLCByTm9kZSwgcHJvcCwgdmFsdWUpIHtcbiAgICBjb25zdCBpc1Byb2NlZHVyYWwgPSBpc1Byb2NlZHVyYWxSZW5kZXJlcihyZW5kZXJlcik7XG4gICAgaWYgKGlzQ2xhc3NCYXNlZCkge1xuICAgICAgICAvLyBXZSBhY3R1YWxseSB3YW50IEpTIHRydWUvZmFsc2UgaGVyZSBiZWNhdXNlIGFueSB0cnV0aHkgdmFsdWUgc2hvdWxkIGFkZCB0aGUgY2xhc3NcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5yZW5kZXJlclJlbW92ZUNsYXNzKys7XG4gICAgICAgICAgICBpZiAoaXNQcm9jZWR1cmFsKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyZXIucmVtb3ZlQ2xhc3Mock5vZGUsIHByb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgck5vZGUuY2xhc3NMaXN0LnJlbW92ZShwcm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJBZGRDbGFzcysrO1xuICAgICAgICAgICAgaWYgKGlzUHJvY2VkdXJhbCkge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLmFkZENsYXNzKHJOb2RlLCBwcm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKHJOb2RlLmNsYXNzTGlzdCwgJ0hUTUxFbGVtZW50IGV4cGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgck5vZGUuY2xhc3NMaXN0LmFkZChwcm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbGV0IGZsYWdzID0gcHJvcC5pbmRleE9mKCctJykgPT09IC0xID8gdW5kZWZpbmVkIDogUmVuZGVyZXJTdHlsZUZsYWdzMi5EYXNoQ2FzZTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgLyoqIHx8IHZhbHVlID09PSB1bmRlZmluZWQgKi8pIHtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJSZW1vdmVTdHlsZSsrO1xuICAgICAgICAgICAgaWYgKGlzUHJvY2VkdXJhbCkge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlbW92ZVN0eWxlKHJOb2RlLCBwcm9wLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByTm9kZS5zdHlsZS5yZW1vdmVQcm9wZXJ0eShwcm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEEgdmFsdWUgaXMgaW1wb3J0YW50IGlmIGl0IGVuZHMgd2l0aCBgIWltcG9ydGFudGAuIFRoZSBzdHlsZVxuICAgICAgICAgICAgLy8gcGFyc2VyIHN0cmlwcyBhbnkgc2VtaWNvbG9ucyBhdCB0aGUgZW5kIG9mIHRoZSB2YWx1ZS5cbiAgICAgICAgICAgIGNvbnN0IGlzSW1wb3J0YW50ID0gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlLmVuZHNXaXRoKCchaW1wb3J0YW50JykgOiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChpc0ltcG9ydGFudCkge1xuICAgICAgICAgICAgICAgIC8vICFpbXBvcnRhbnQgaGFzIHRvIGJlIHN0cmlwcGVkIGZyb20gdGhlIHZhbHVlIGZvciBpdCB0byBiZSB2YWxpZC5cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDAsIC0xMCk7XG4gICAgICAgICAgICAgICAgZmxhZ3MgfD0gUmVuZGVyZXJTdHlsZUZsYWdzMi5JbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZ0Rldk1vZGUgJiYgbmdEZXZNb2RlLnJlbmRlcmVyU2V0U3R5bGUrKztcbiAgICAgICAgICAgIGlmIChpc1Byb2NlZHVyYWwpIHtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5zZXRTdHlsZShyTm9kZSwgcHJvcCwgdmFsdWUsIGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKHJOb2RlLnN0eWxlLCAnSFRNTEVsZW1lbnQgZXhwZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICByTm9kZS5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLCB2YWx1ZSwgaXNJbXBvcnRhbnQgPyAnaW1wb3J0YW50JyA6ICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogV3JpdGUgYGNzc1RleHRgIHRvIGBSRWxlbWVudGAuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBkb2VzIGRpcmVjdCB3cml0ZSB3aXRob3V0IGFueSByZWNvbmNpbGlhdGlvbi4gVXNlZCBmb3Igd3JpdGluZyBpbml0aWFsIHZhbHVlcywgc29cbiAqIHRoYXQgc3RhdGljIHN0eWxpbmcgdmFsdWVzIGRvIG5vdCBwdWxsIGluIHRoZSBzdHlsZSBwYXJzZXIuXG4gKlxuICogQHBhcmFtIHJlbmRlcmVyIFJlbmRlcmVyIHRvIHVzZVxuICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgd2hpY2ggbmVlZHMgdG8gYmUgdXBkYXRlZC5cbiAqIEBwYXJhbSBuZXdWYWx1ZSBUaGUgbmV3IGNsYXNzIGxpc3QgdG8gd3JpdGUuXG4gKi9cbmZ1bmN0aW9uIHdyaXRlRGlyZWN0U3R5bGUocmVuZGVyZXIsIGVsZW1lbnQsIG5ld1ZhbHVlKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydFN0cmluZyhuZXdWYWx1ZSwgJ1xcJ25ld1ZhbHVlXFwnIHNob3VsZCBiZSBhIHN0cmluZycpO1xuICAgIGlmIChpc1Byb2NlZHVyYWxSZW5kZXJlcihyZW5kZXJlcikpIHtcbiAgICAgICAgcmVuZGVyZXIuc2V0QXR0cmlidXRlKGVsZW1lbnQsICdzdHlsZScsIG5ld1ZhbHVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IG5ld1ZhbHVlO1xuICAgIH1cbiAgICBuZ0Rldk1vZGUgJiYgbmdEZXZNb2RlLnJlbmRlcmVyU2V0U3R5bGUrKztcbn1cbi8qKlxuICogV3JpdGUgYGNsYXNzTmFtZWAgdG8gYFJFbGVtZW50YC5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGRvZXMgZGlyZWN0IHdyaXRlIHdpdGhvdXQgYW55IHJlY29uY2lsaWF0aW9uLiBVc2VkIGZvciB3cml0aW5nIGluaXRpYWwgdmFsdWVzLCBzb1xuICogdGhhdCBzdGF0aWMgc3R5bGluZyB2YWx1ZXMgZG8gbm90IHB1bGwgaW4gdGhlIHN0eWxlIHBhcnNlci5cbiAqXG4gKiBAcGFyYW0gcmVuZGVyZXIgUmVuZGVyZXIgdG8gdXNlXG4gKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB3aGljaCBuZWVkcyB0byBiZSB1cGRhdGVkLlxuICogQHBhcmFtIG5ld1ZhbHVlIFRoZSBuZXcgY2xhc3MgbGlzdCB0byB3cml0ZS5cbiAqL1xuZnVuY3Rpb24gd3JpdGVEaXJlY3RDbGFzcyhyZW5kZXJlciwgZWxlbWVudCwgbmV3VmFsdWUpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0U3RyaW5nKG5ld1ZhbHVlLCAnXFwnbmV3VmFsdWVcXCcgc2hvdWxkIGJlIGEgc3RyaW5nJyk7XG4gICAgaWYgKGlzUHJvY2VkdXJhbFJlbmRlcmVyKHJlbmRlcmVyKSkge1xuICAgICAgICBpZiAobmV3VmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICAvLyBUaGVyZSBhcmUgdGVzdHMgaW4gYGdvb2dsZTNgIHdoaWNoIGV4cGVjdCBgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2NsYXNzJylgIHRvIGJlIGBudWxsYC5cbiAgICAgICAgICAgIHJlbmRlcmVyLnJlbW92ZUF0dHJpYnV0ZShlbGVtZW50LCAnY2xhc3MnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldEF0dHJpYnV0ZShlbGVtZW50LCAnY2xhc3MnLCBuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gbmV3VmFsdWU7XG4gICAgfVxuICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJTZXRDbGFzc05hbWUrKztcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFJldHVybnMgYW4gaW5kZXggb2YgYGNsYXNzVG9TZWFyY2hgIGluIGBjbGFzc05hbWVgIHRha2luZyB0b2tlbiBib3VuZGFyaWVzIGludG8gYWNjb3VudC5cbiAqXG4gKiBgY2xhc3NJbmRleE9mKCdBQiBBJywgJ0EnLCAwKWAgd2lsbCBiZSAzIChub3QgMCBzaW5jZSBgQUIhPT1BYClcbiAqXG4gKiBAcGFyYW0gY2xhc3NOYW1lIEEgc3RyaW5nIGNvbnRhaW5pbmcgY2xhc3NlcyAod2hpdGVzcGFjZSBzZXBhcmF0ZWQpXG4gKiBAcGFyYW0gY2xhc3NUb1NlYXJjaCBBIGNsYXNzIG5hbWUgdG8gbG9jYXRlXG4gKiBAcGFyYW0gc3RhcnRpbmdJbmRleCBTdGFydGluZyBsb2NhdGlvbiBvZiBzZWFyY2hcbiAqIEByZXR1cm5zIGFuIGluZGV4IG9mIHRoZSBsb2NhdGVkIGNsYXNzIChvciAtMSBpZiBub3QgZm91bmQpXG4gKi9cbmZ1bmN0aW9uIGNsYXNzSW5kZXhPZihjbGFzc05hbWUsIGNsYXNzVG9TZWFyY2gsIHN0YXJ0aW5nSW5kZXgpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Tm90RXF1YWwoY2xhc3NUb1NlYXJjaCwgJycsICdjYW4gbm90IGxvb2sgZm9yIFwiXCIgc3RyaW5nLicpO1xuICAgIGxldCBlbmQgPSBjbGFzc05hbWUubGVuZ3RoO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IGZvdW5kSW5kZXggPSBjbGFzc05hbWUuaW5kZXhPZihjbGFzc1RvU2VhcmNoLCBzdGFydGluZ0luZGV4KTtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKVxuICAgICAgICAgICAgcmV0dXJuIGZvdW5kSW5kZXg7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAwIHx8IGNsYXNzTmFtZS5jaGFyQ29kZUF0KGZvdW5kSW5kZXggLSAxKSA8PSAzMiAvKiBTUEFDRSAqLykge1xuICAgICAgICAgICAgLy8gRW5zdXJlIHRoYXQgaXQgaGFzIGxlYWRpbmcgd2hpdGVzcGFjZVxuICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gY2xhc3NUb1NlYXJjaC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoZm91bmRJbmRleCArIGxlbmd0aCA9PT0gZW5kIHx8XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lLmNoYXJDb2RlQXQoZm91bmRJbmRleCArIGxlbmd0aCkgPD0gMzIgLyogU1BBQ0UgKi8pIHtcbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhhdCBpdCBoYXMgdHJhaWxpbmcgd2hpdGVzcGFjZVxuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZhbHNlIHBvc2l0aXZlLCBrZWVwIHNlYXJjaGluZyBmcm9tIHdoZXJlIHdlIGxlZnQgb2ZmLlxuICAgICAgICBzdGFydGluZ0luZGV4ID0gZm91bmRJbmRleCArIDE7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IHVudXNlZFZhbHVlVG9QbGFjYXRlQWpkJDEgPSB1bnVzZWRWYWx1ZUV4cG9ydFRvUGxhY2F0ZUFqZCQ0ICsgdW51c2VkVmFsdWVFeHBvcnRUb1BsYWNhdGVBamQkMztcbmNvbnN0IE5HX1RFTVBMQVRFX1NFTEVDVE9SID0gJ25nLXRlbXBsYXRlJztcbi8qKlxuICogU2VhcmNoIHRoZSBgVEF0dHJpYnV0ZXNgIHRvIHNlZSBpZiBpdCBjb250YWlucyBgY3NzQ2xhc3NUb01hdGNoYCAoY2FzZSBpbnNlbnNpdGl2ZSlcbiAqXG4gKiBAcGFyYW0gYXR0cnMgYFRBdHRyaWJ1dGVzYCB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSBjc3NDbGFzc1RvTWF0Y2ggY2xhc3MgdG8gbWF0Y2ggKGxvd2VyY2FzZSlcbiAqIEBwYXJhbSBpc1Byb2plY3Rpb25Nb2RlIFdoZXRoZXIgb3Igbm90IGNsYXNzIG1hdGNoaW5nIHNob3VsZCBsb29rIGludG8gdGhlIGF0dHJpYnV0ZSBgY2xhc3NgIGluXG4gKiAgICBhZGRpdGlvbiB0byB0aGUgYEF0dHJpYnV0ZU1hcmtlci5DbGFzc2VzYC5cbiAqL1xuZnVuY3Rpb24gaXNDc3NDbGFzc01hdGNoaW5nKGF0dHJzLCBjc3NDbGFzc1RvTWF0Y2gsIGlzUHJvamVjdGlvbk1vZGUpIHtcbiAgICAvLyBUT0RPKG1pc2tvKTogVGhlIGZhY3QgdGhhdCB0aGlzIGZ1bmN0aW9uIG5lZWRzIHRvIGtub3cgYWJvdXQgYGlzUHJvamVjdGlvbk1vZGVgIHNlZW1zIHN1c3BlY3QuXG4gICAgLy8gSXQgaXMgc3RyYW5nZSB0byBtZSB0aGF0IHNvbWV0aW1lcyB0aGUgY2xhc3MgaW5mb3JtYXRpb24gY29tZXMgaW4gZm9ybSBvZiBgY2xhc3NgIGF0dHJpYnV0ZVxuICAgIC8vIGFuZCBzb21ldGltZXMgaW4gZm9ybSBvZiBgQXR0cmlidXRlTWFya2VyLkNsYXNzZXNgLiBTb21lIGludmVzdGlnYXRpb24gaXMgbmVlZGVkIHRvIGRldGVybWluZVxuICAgIC8vIGlmIHRoYXQgaXMgdGhlIHJpZ2h0IGJlaGF2aW9yLlxuICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICBhc3NlcnRFcXVhbChjc3NDbGFzc1RvTWF0Y2gsIGNzc0NsYXNzVG9NYXRjaC50b0xvd2VyQ2FzZSgpLCAnQ2xhc3MgbmFtZSBleHBlY3RlZCB0byBiZSBsb3dlcmNhc2UuJyk7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYXR0cnMubGVuZ3RoKSB7XG4gICAgICAgIGxldCBpdGVtID0gYXR0cnNbaSsrXTtcbiAgICAgICAgaWYgKGlzUHJvamVjdGlvbk1vZGUgJiYgaXRlbSA9PT0gJ2NsYXNzJykge1xuICAgICAgICAgICAgaXRlbSA9IGF0dHJzW2ldO1xuICAgICAgICAgICAgaWYgKGNsYXNzSW5kZXhPZihpdGVtLnRvTG93ZXJDYXNlKCksIGNzc0NsYXNzVG9NYXRjaCwgMCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbSA9PT0gMSAvKiBDbGFzc2VzICovKSB7XG4gICAgICAgICAgICAvLyBXZSBmb3VuZCB0aGUgY2xhc3NlcyBzZWN0aW9uLiBTdGFydCBzZWFyY2hpbmcgZm9yIHRoZSBjbGFzcy5cbiAgICAgICAgICAgIHdoaWxlIChpIDwgYXR0cnMubGVuZ3RoICYmIHR5cGVvZiAoaXRlbSA9IGF0dHJzW2krK10pID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgLy8gd2hpbGUgd2UgaGF2ZSBzdHJpbmdzXG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0udG9Mb3dlckNhc2UoKSA9PT0gY3NzQ2xhc3NUb01hdGNoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSBgdE5vZGVgIHJlcHJlc2VudHMgYW4gaW5saW5lIHRlbXBsYXRlIChlLmcuIGAqbmdGb3JgKS5cbiAqXG4gKiBAcGFyYW0gdE5vZGUgY3VycmVudCBUTm9kZVxuICovXG5mdW5jdGlvbiBpc0lubGluZVRlbXBsYXRlKHROb2RlKSB7XG4gICAgcmV0dXJuIHROb2RlLnR5cGUgPT09IDQgLyogQ29udGFpbmVyICovICYmIHROb2RlLnZhbHVlICE9PSBOR19URU1QTEFURV9TRUxFQ1RPUjtcbn1cbi8qKlxuICogRnVuY3Rpb24gdGhhdCBjaGVja3Mgd2hldGhlciBhIGdpdmVuIHROb2RlIG1hdGNoZXMgdGFnLWJhc2VkIHNlbGVjdG9yIGFuZCBoYXMgYSB2YWxpZCB0eXBlLlxuICpcbiAqIE1hdGNoaW5nIGNhbiBiZSBwZXJmb3JtZWQgaW4gMiBtb2RlczogcHJvamVjdGlvbiBtb2RlICh3aGVuIHdlIHByb2plY3Qgbm9kZXMpIGFuZCByZWd1bGFyXG4gKiBkaXJlY3RpdmUgbWF0Y2hpbmcgbW9kZTpcbiAqIC0gaW4gdGhlIFwiZGlyZWN0aXZlIG1hdGNoaW5nXCIgbW9kZSB3ZSBkbyBfbm90XyB0YWtlIFRDb250YWluZXIncyB0YWdOYW1lIGludG8gYWNjb3VudCBpZiBpdCBpc1xuICogZGlmZmVyZW50IGZyb20gTkdfVEVNUExBVEVfU0VMRUNUT1IgKHZhbHVlIGRpZmZlcmVudCBmcm9tIE5HX1RFTVBMQVRFX1NFTEVDVE9SIGluZGljYXRlcyB0aGF0IGFcbiAqIHRhZyBuYW1lIHdhcyBleHRyYWN0ZWQgZnJvbSAqIHN5bnRheCBzbyB3ZSB3b3VsZCBtYXRjaCB0aGUgc2FtZSBkaXJlY3RpdmUgdHdpY2UpO1xuICogLSBpbiB0aGUgXCJwcm9qZWN0aW9uXCIgbW9kZSwgd2UgdXNlIGEgdGFnIG5hbWUgcG90ZW50aWFsbHkgZXh0cmFjdGVkIGZyb20gdGhlICogc3ludGF4IHByb2Nlc3NpbmdcbiAqIChhcHBsaWNhYmxlIHRvIFROb2RlVHlwZS5Db250YWluZXIgb25seSkuXG4gKi9cbmZ1bmN0aW9uIGhhc1RhZ0FuZFR5cGVNYXRjaCh0Tm9kZSwgY3VycmVudFNlbGVjdG9yLCBpc1Byb2plY3Rpb25Nb2RlKSB7XG4gICAgY29uc3QgdGFnTmFtZVRvQ29tcGFyZSA9IHROb2RlLnR5cGUgPT09IDQgLyogQ29udGFpbmVyICovICYmICFpc1Byb2plY3Rpb25Nb2RlID8gTkdfVEVNUExBVEVfU0VMRUNUT1IgOiB0Tm9kZS52YWx1ZTtcbiAgICByZXR1cm4gY3VycmVudFNlbGVjdG9yID09PSB0YWdOYW1lVG9Db21wYXJlO1xufVxuLyoqXG4gKiBBIHV0aWxpdHkgZnVuY3Rpb24gdG8gbWF0Y2ggYW4gSXZ5IG5vZGUgc3RhdGljIGRhdGEgYWdhaW5zdCBhIHNpbXBsZSBDU1Mgc2VsZWN0b3JcbiAqXG4gKiBAcGFyYW0gbm9kZSBzdGF0aWMgZGF0YSBvZiB0aGUgbm9kZSB0byBtYXRjaFxuICogQHBhcmFtIHNlbGVjdG9yIFRoZSBzZWxlY3RvciB0byB0cnkgbWF0Y2hpbmcgYWdhaW5zdCB0aGUgbm9kZS5cbiAqIEBwYXJhbSBpc1Byb2plY3Rpb25Nb2RlIGlmIGB0cnVlYCB3ZSBhcmUgbWF0Y2hpbmcgZm9yIGNvbnRlbnQgcHJvamVjdGlvbiwgb3RoZXJ3aXNlIHdlIGFyZSBkb2luZ1xuICogZGlyZWN0aXZlIG1hdGNoaW5nLlxuICogQHJldHVybnMgdHJ1ZSBpZiBub2RlIG1hdGNoZXMgdGhlIHNlbGVjdG9yLlxuICovXG5mdW5jdGlvbiBpc05vZGVNYXRjaGluZ1NlbGVjdG9yKHROb2RlLCBzZWxlY3RvciwgaXNQcm9qZWN0aW9uTW9kZSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKHNlbGVjdG9yWzBdLCAnU2VsZWN0b3Igc2hvdWxkIGhhdmUgYSB0YWcgbmFtZScpO1xuICAgIGxldCBtb2RlID0gNCAvKiBFTEVNRU5UICovO1xuICAgIGNvbnN0IG5vZGVBdHRycyA9IHROb2RlLmF0dHJzIHx8IFtdO1xuICAgIC8vIEZpbmQgdGhlIGluZGV4IG9mIGZpcnN0IGF0dHJpYnV0ZSB0aGF0IGhhcyBubyB2YWx1ZSwgb25seSBhIG5hbWUuXG4gICAgY29uc3QgbmFtZU9ubHlNYXJrZXJJZHggPSBnZXROYW1lT25seU1hcmtlckluZGV4KG5vZGVBdHRycyk7XG4gICAgLy8gV2hlbiBwcm9jZXNzaW5nIFwiOm5vdFwiIHNlbGVjdG9ycywgd2Ugc2tpcCB0byB0aGUgbmV4dCBcIjpub3RcIiBpZiB0aGVcbiAgICAvLyBjdXJyZW50IG9uZSBkb2Vzbid0IG1hdGNoXG4gICAgbGV0IHNraXBUb05leHRTZWxlY3RvciA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0b3IubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHNlbGVjdG9yW2ldO1xuICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBmaW5pc2ggcHJvY2Vzc2luZyBhIDpub3Qgc2VsZWN0b3IgYW5kIGl0IGhhc24ndCBmYWlsZWQsIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgaWYgKCFza2lwVG9OZXh0U2VsZWN0b3IgJiYgIWlzUG9zaXRpdmUobW9kZSkgJiYgIWlzUG9zaXRpdmUoY3VycmVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgc2tpcHBpbmcgdG8gdGhlIG5leHQgOm5vdCgpIGFuZCB0aGlzIG1vZGUgZmxhZyBpcyBwb3NpdGl2ZSxcbiAgICAgICAgICAgIC8vIGl0J3MgYSBwYXJ0IG9mIHRoZSBjdXJyZW50IDpub3QoKSBzZWxlY3RvciwgYW5kIHdlIHNob3VsZCBrZWVwIHNraXBwaW5nXG4gICAgICAgICAgICBpZiAoc2tpcFRvTmV4dFNlbGVjdG9yICYmIGlzUG9zaXRpdmUoY3VycmVudCkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBza2lwVG9OZXh0U2VsZWN0b3IgPSBmYWxzZTtcbiAgICAgICAgICAgIG1vZGUgPSBjdXJyZW50IHwgKG1vZGUgJiAxIC8qIE5PVCAqLyk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2tpcFRvTmV4dFNlbGVjdG9yKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmIChtb2RlICYgNCAvKiBFTEVNRU5UICovKSB7XG4gICAgICAgICAgICBtb2RlID0gMiAvKiBBVFRSSUJVVEUgKi8gfCBtb2RlICYgMSAvKiBOT1QgKi87XG4gICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gJycgJiYgIWhhc1RhZ0FuZFR5cGVNYXRjaCh0Tm9kZSwgY3VycmVudCwgaXNQcm9qZWN0aW9uTW9kZSkgfHxcbiAgICAgICAgICAgICAgICBjdXJyZW50ID09PSAnJyAmJiBzZWxlY3Rvci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNQb3NpdGl2ZShtb2RlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHNraXBUb05leHRTZWxlY3RvciA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RvckF0dHJWYWx1ZSA9IG1vZGUgJiA4IC8qIENMQVNTICovID8gY3VycmVudCA6IHNlbGVjdG9yWysraV07XG4gICAgICAgICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIG1hdGNoaW5nIGFnYWluc3QgY2xhc3NlcyB3aGVuIGEgdE5vZGUgaGFzIGJlZW4gaW5zdGFudGlhdGVkIHdpdGhcbiAgICAgICAgICAgIC8vIGNsYXNzIGFuZCBzdHlsZSB2YWx1ZXMgYXMgc2VwYXJhdGUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiBbJ3RpdGxlJywgQ0xBU1MsICdmb28nXSlcbiAgICAgICAgICAgIGlmICgobW9kZSAmIDggLyogQ0xBU1MgKi8pICYmIHROb2RlLmF0dHJzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0Nzc0NsYXNzTWF0Y2hpbmcodE5vZGUuYXR0cnMsIHNlbGVjdG9yQXR0clZhbHVlLCBpc1Byb2plY3Rpb25Nb2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQb3NpdGl2ZShtb2RlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgc2tpcFRvTmV4dFNlbGVjdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhdHRyTmFtZSA9IChtb2RlICYgOCAvKiBDTEFTUyAqLykgPyAnY2xhc3MnIDogY3VycmVudDtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJJbmRleEluTm9kZSA9IGZpbmRBdHRySW5kZXhJbk5vZGUoYXR0ck5hbWUsIG5vZGVBdHRycywgaXNJbmxpbmVUZW1wbGF0ZSh0Tm9kZSksIGlzUHJvamVjdGlvbk1vZGUpO1xuICAgICAgICAgICAgaWYgKGF0dHJJbmRleEluTm9kZSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNQb3NpdGl2ZShtb2RlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHNraXBUb05leHRTZWxlY3RvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3JBdHRyVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5vZGVBdHRyVmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJJbmRleEluTm9kZSA+IG5hbWVPbmx5TWFya2VySWR4KSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVBdHRyVmFsdWUgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0Tm90RXF1YWwobm9kZUF0dHJzW2F0dHJJbmRleEluTm9kZV0sIDAgLyogTmFtZXNwYWNlVVJJICovLCAnV2UgZG8gbm90IG1hdGNoIGRpcmVjdGl2ZXMgb24gbmFtZXNwYWNlZCBhdHRyaWJ1dGVzJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGxvd2VyY2FzZSB0aGUgYXR0cmlidXRlIHZhbHVlIHRvIGJlIGFibGUgdG8gbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0b3JzIHdpdGhvdXQgY2FzZS1zZW5zaXRpdml0eVxuICAgICAgICAgICAgICAgICAgICAvLyAoc2VsZWN0b3JzIGFyZSBhbHJlYWR5IGluIGxvd2VyY2FzZSB3aGVuIGdlbmVyYXRlZClcbiAgICAgICAgICAgICAgICAgICAgbm9kZUF0dHJWYWx1ZSA9IG5vZGVBdHRyc1thdHRySW5kZXhJbk5vZGUgKyAxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBjb21wYXJlQWdhaW5zdENsYXNzTmFtZSA9IG1vZGUgJiA4IC8qIENMQVNTICovID8gbm9kZUF0dHJWYWx1ZSA6IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBhcmVBZ2FpbnN0Q2xhc3NOYW1lICYmXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzSW5kZXhPZihjb21wYXJlQWdhaW5zdENsYXNzTmFtZSwgc2VsZWN0b3JBdHRyVmFsdWUsIDApICE9PSAtMSB8fFxuICAgICAgICAgICAgICAgICAgICBtb2RlICYgMiAvKiBBVFRSSUJVVEUgKi8gJiYgc2VsZWN0b3JBdHRyVmFsdWUgIT09IG5vZGVBdHRyVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUG9zaXRpdmUobW9kZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHNraXBUb05leHRTZWxlY3RvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpc1Bvc2l0aXZlKG1vZGUpIHx8IHNraXBUb05leHRTZWxlY3Rvcjtcbn1cbmZ1bmN0aW9uIGlzUG9zaXRpdmUobW9kZSkge1xuICAgIHJldHVybiAobW9kZSAmIDEgLyogTk9UICovKSA9PT0gMDtcbn1cbi8qKlxuICogRXhhbWluZXMgdGhlIGF0dHJpYnV0ZSdzIGRlZmluaXRpb24gYXJyYXkgZm9yIGEgbm9kZSB0byBmaW5kIHRoZSBpbmRleCBvZiB0aGVcbiAqIGF0dHJpYnV0ZSB0aGF0IG1hdGNoZXMgdGhlIGdpdmVuIGBuYW1lYC5cbiAqXG4gKiBOT1RFOiBUaGlzIHdpbGwgbm90IG1hdGNoIG5hbWVzcGFjZWQgYXR0cmlidXRlcy5cbiAqXG4gKiBBdHRyaWJ1dGUgbWF0Y2hpbmcgZGVwZW5kcyB1cG9uIGBpc0lubGluZVRlbXBsYXRlYCBhbmQgYGlzUHJvamVjdGlvbk1vZGVgLlxuICogVGhlIGZvbGxvd2luZyB0YWJsZSBzdW1tYXJpemVzIHdoaWNoIHR5cGVzIG9mIGF0dHJpYnV0ZXMgd2UgYXR0ZW1wdCB0byBtYXRjaDpcbiAqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogTW9kZXMgICAgICAgICAgICAgICAgICAgfCBOb3JtYWwgQXR0cmlidXRlcyB8IEJpbmRpbmdzIEF0dHJpYnV0ZXMgfCBUZW1wbGF0ZSBBdHRyaWJ1dGVzIHwgSTE4blxuICogQXR0cmlidXRlc1xuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIElubGluZSArIFByb2plY3Rpb24gICAgIHwgWUVTICAgICAgICAgICAgICAgfCBZRVMgICAgICAgICAgICAgICAgIHwgTk8gICAgICAgICAgICAgICAgICB8IFlFU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIElubGluZSArIERpcmVjdGl2ZSAgICAgIHwgTk8gICAgICAgICAgICAgICAgfCBOTyAgICAgICAgICAgICAgICAgIHwgWUVTICAgICAgICAgICAgICAgICB8IE5PXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogTm9uLWlubGluZSArIFByb2plY3Rpb24gfCBZRVMgICAgICAgICAgICAgICB8IFlFUyAgICAgICAgICAgICAgICAgfCBOTyAgICAgICAgICAgICAgICAgIHwgWUVTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogTm9uLWlubGluZSArIERpcmVjdGl2ZSAgfCBZRVMgICAgICAgICAgICAgICB8IFlFUyAgICAgICAgICAgICAgICAgfCBOTyAgICAgICAgICAgICAgICAgIHwgWUVTXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICpcbiAqIEBwYXJhbSBuYW1lIHRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdG8gZmluZFxuICogQHBhcmFtIGF0dHJzIHRoZSBhdHRyaWJ1dGUgYXJyYXkgdG8gZXhhbWluZVxuICogQHBhcmFtIGlzSW5saW5lVGVtcGxhdGUgdHJ1ZSBpZiB0aGUgbm9kZSBiZWluZyBtYXRjaGVkIGlzIGFuIGlubGluZSB0ZW1wbGF0ZSAoZS5nLiBgKm5nRm9yYClcbiAqIHJhdGhlciB0aGFuIGEgbWFudWFsbHkgZXhwYW5kZWQgdGVtcGxhdGUgbm9kZSAoZS5nIGA8bmctdGVtcGxhdGU+YCkuXG4gKiBAcGFyYW0gaXNQcm9qZWN0aW9uTW9kZSB0cnVlIGlmIHdlIGFyZSBtYXRjaGluZyBhZ2FpbnN0IGNvbnRlbnQgcHJvamVjdGlvbiBvdGhlcndpc2Ugd2UgYXJlXG4gKiBtYXRjaGluZyBhZ2FpbnN0IGRpcmVjdGl2ZXMuXG4gKi9cbmZ1bmN0aW9uIGZpbmRBdHRySW5kZXhJbk5vZGUobmFtZSwgYXR0cnMsIGlzSW5saW5lVGVtcGxhdGUsIGlzUHJvamVjdGlvbk1vZGUpIHtcbiAgICBpZiAoYXR0cnMgPT09IG51bGwpXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBsZXQgaSA9IDA7XG4gICAgaWYgKGlzUHJvamVjdGlvbk1vZGUgfHwgIWlzSW5saW5lVGVtcGxhdGUpIHtcbiAgICAgICAgbGV0IGJpbmRpbmdzTW9kZSA9IGZhbHNlO1xuICAgICAgICB3aGlsZSAoaSA8IGF0dHJzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgbWF5YmVBdHRyTmFtZSA9IGF0dHJzW2ldO1xuICAgICAgICAgICAgaWYgKG1heWJlQXR0ck5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1heWJlQXR0ck5hbWUgPT09IDMgLyogQmluZGluZ3MgKi8gfHwgbWF5YmVBdHRyTmFtZSA9PT0gNiAvKiBJMThuICovKSB7XG4gICAgICAgICAgICAgICAgYmluZGluZ3NNb2RlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1heWJlQXR0ck5hbWUgPT09IDEgLyogQ2xhc3NlcyAqLyB8fCBtYXliZUF0dHJOYW1lID09PSAyIC8qIFN0eWxlcyAqLykge1xuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGF0dHJzWysraV07XG4gICAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIHNraXAgY2xhc3NlcyBoZXJlIGJlY2F1c2Ugd2UgaGF2ZSBhIHNlcGFyYXRlIG1lY2hhbmlzbSBmb3JcbiAgICAgICAgICAgICAgICAvLyBtYXRjaGluZyBjbGFzc2VzIGluIHByb2plY3Rpb24gbW9kZS5cbiAgICAgICAgICAgICAgICB3aGlsZSAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGF0dHJzWysraV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWF5YmVBdHRyTmFtZSA9PT0gNCAvKiBUZW1wbGF0ZSAqLykge1xuICAgICAgICAgICAgICAgIC8vIFdlIGRvIG5vdCBjYXJlIGFib3V0IFRlbXBsYXRlIGF0dHJpYnV0ZXMgaW4gdGhpcyBzY2VuYXJpby5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1heWJlQXR0ck5hbWUgPT09IDAgLyogTmFtZXNwYWNlVVJJICovKSB7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCB0aGUgd2hvbGUgbmFtZXNwYWNlZCBhdHRyaWJ1dGUgYW5kIHZhbHVlLiBUaGlzIGlzIGJ5IGRlc2lnbi5cbiAgICAgICAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJbiBiaW5kaW5nIG1vZGUgdGhlcmUgYXJlIG9ubHkgbmFtZXMsIHJhdGhlciB0aGFuIG5hbWUtdmFsdWUgcGFpcnMuXG4gICAgICAgICAgICBpICs9IGJpbmRpbmdzTW9kZSA/IDEgOiAyO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIGRpZCBub3QgbWF0Y2ggdGhlIGF0dHJpYnV0ZVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbWF0Y2hUZW1wbGF0ZUF0dHJpYnV0ZShhdHRycywgbmFtZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNOb2RlTWF0Y2hpbmdTZWxlY3Rvckxpc3QodE5vZGUsIHNlbGVjdG9yLCBpc1Byb2plY3Rpb25Nb2RlID0gZmFsc2UpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdG9yLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpc05vZGVNYXRjaGluZ1NlbGVjdG9yKHROb2RlLCBzZWxlY3RvcltpXSwgaXNQcm9qZWN0aW9uTW9kZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGdldFByb2plY3RBc0F0dHJWYWx1ZSh0Tm9kZSkge1xuICAgIGNvbnN0IG5vZGVBdHRycyA9IHROb2RlLmF0dHJzO1xuICAgIGlmIChub2RlQXR0cnMgIT0gbnVsbCkge1xuICAgICAgICBjb25zdCBuZ1Byb2plY3RBc0F0dHJJZHggPSBub2RlQXR0cnMuaW5kZXhPZig1IC8qIFByb2plY3RBcyAqLyk7XG4gICAgICAgIC8vIG9ubHkgY2hlY2sgZm9yIG5nUHJvamVjdEFzIGluIGF0dHJpYnV0ZSBuYW1lcywgZG9uJ3QgYWNjaWRlbnRhbGx5IG1hdGNoIGF0dHJpYnV0ZSdzIHZhbHVlXG4gICAgICAgIC8vIChhdHRyaWJ1dGUgbmFtZXMgYXJlIHN0b3JlZCBhdCBldmVuIGluZGV4ZXMpXG4gICAgICAgIGlmICgobmdQcm9qZWN0QXNBdHRySWR4ICYgMSkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlQXR0cnNbbmdQcm9qZWN0QXNBdHRySWR4ICsgMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBnZXROYW1lT25seU1hcmtlckluZGV4KG5vZGVBdHRycykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZUF0dHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5vZGVBdHRyID0gbm9kZUF0dHJzW2ldO1xuICAgICAgICBpZiAoaXNOYW1lT25seUF0dHJpYnV0ZU1hcmtlcihub2RlQXR0cikpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub2RlQXR0cnMubGVuZ3RoO1xufVxuZnVuY3Rpb24gbWF0Y2hUZW1wbGF0ZUF0dHJpYnV0ZShhdHRycywgbmFtZSkge1xuICAgIGxldCBpID0gYXR0cnMuaW5kZXhPZig0IC8qIFRlbXBsYXRlICovKTtcbiAgICBpZiAoaSA+IC0xKSB7XG4gICAgICAgIGkrKztcbiAgICAgICAgd2hpbGUgKGkgPCBhdHRycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHIgPSBhdHRyc1tpXTtcbiAgICAgICAgICAgIC8vIFJldHVybiBpbiBjYXNlIHdlIGNoZWNrZWQgYWxsIHRlbXBsYXRlIGF0dHJzIGFuZCBhcmUgc3dpdGNoaW5nIHRvIHRoZSBuZXh0IHNlY3Rpb24gaW4gdGhlXG4gICAgICAgICAgICAvLyBhdHRycyBhcnJheSAodGhhdCBzdGFydHMgd2l0aCBhIG51bWJlciB0aGF0IHJlcHJlc2VudHMgYW4gYXR0cmlidXRlIG1hcmtlcikuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGF0dHIgPT09ICdudW1iZXInKVxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChhdHRyID09PSBuYW1lKVxuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYSBzZWxlY3RvciBpcyBpbnNpZGUgYSBDc3NTZWxlY3Rvckxpc3RcbiAqIEBwYXJhbSBzZWxlY3RvciBTZWxlY3RvciB0byBiZSBjaGVja2VkLlxuICogQHBhcmFtIGxpc3QgTGlzdCBpbiB3aGljaCB0byBsb29rIGZvciB0aGUgc2VsZWN0b3IuXG4gKi9cbmZ1bmN0aW9uIGlzU2VsZWN0b3JJblNlbGVjdG9yTGlzdChzZWxlY3RvciwgbGlzdCkge1xuICAgIHNlbGVjdG9yTGlzdExvb3A6IGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjdXJyZW50U2VsZWN0b3JJbkxpc3QgPSBsaXN0W2ldO1xuICAgICAgICBpZiAoc2VsZWN0b3IubGVuZ3RoICE9PSBjdXJyZW50U2VsZWN0b3JJbkxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNlbGVjdG9yLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoc2VsZWN0b3Jbal0gIT09IGN1cnJlbnRTZWxlY3RvckluTGlzdFtqXSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlIHNlbGVjdG9yTGlzdExvb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIG1heWJlV3JhcEluTm90U2VsZWN0b3IoaXNOZWdhdGl2ZU1vZGUsIGNodW5rKSB7XG4gICAgcmV0dXJuIGlzTmVnYXRpdmVNb2RlID8gJzpub3QoJyArIGNodW5rLnRyaW0oKSArICcpJyA6IGNodW5rO1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5Q1NTU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICBsZXQgcmVzdWx0ID0gc2VsZWN0b3JbMF07XG4gICAgbGV0IGkgPSAxO1xuICAgIGxldCBtb2RlID0gMiAvKiBBVFRSSUJVVEUgKi87XG4gICAgbGV0IGN1cnJlbnRDaHVuayA9ICcnO1xuICAgIGxldCBpc05lZ2F0aXZlTW9kZSA9IGZhbHNlO1xuICAgIHdoaWxlIChpIDwgc2VsZWN0b3IubGVuZ3RoKSB7XG4gICAgICAgIGxldCB2YWx1ZU9yTWFya2VyID0gc2VsZWN0b3JbaV07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWVPck1hcmtlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmIChtb2RlICYgMiAvKiBBVFRSSUJVVEUgKi8pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSBzZWxlY3RvclsrK2ldO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDaHVuayArPVxuICAgICAgICAgICAgICAgICAgICAnWycgKyB2YWx1ZU9yTWFya2VyICsgKGF0dHJWYWx1ZS5sZW5ndGggPiAwID8gJz1cIicgKyBhdHRyVmFsdWUgKyAnXCInIDogJycpICsgJ10nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZSAmIDggLyogQ0xBU1MgKi8pIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2h1bmsgKz0gJy4nICsgdmFsdWVPck1hcmtlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1vZGUgJiA0IC8qIEVMRU1FTlQgKi8pIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2h1bmsgKz0gJyAnICsgdmFsdWVPck1hcmtlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBBcHBlbmQgY3VycmVudCBjaHVuayB0byB0aGUgZmluYWwgcmVzdWx0IGluIGNhc2Ugd2UgY29tZSBhY3Jvc3MgU2VsZWN0b3JGbGFnLCB3aGljaFxuICAgICAgICAgICAgLy8gaW5kaWNhdGVzIHRoYXQgdGhlIHByZXZpb3VzIHNlY3Rpb24gb2YgYSBzZWxlY3RvciBpcyBvdmVyLiBXZSBuZWVkIHRvIGFjY3VtdWxhdGUgY29udGVudFxuICAgICAgICAgICAgLy8gYmV0d2VlbiBmbGFncyB0byBtYWtlIHN1cmUgd2Ugd3JhcCB0aGUgY2h1bmsgbGF0ZXIgaW4gOm5vdCgpIHNlbGVjdG9yIGlmIG5lZWRlZCwgZS5nLlxuICAgICAgICAgICAgLy8gYGBgXG4gICAgICAgICAgICAvLyAgWycnLCBGbGFncy5DTEFTUywgJy5jbGFzc0EnLCBGbGFncy5DTEFTUyB8IEZsYWdzLk5PVCwgJy5jbGFzc0InLCAnLmNsYXNzQyddXG4gICAgICAgICAgICAvLyBgYGBcbiAgICAgICAgICAgIC8vIHNob3VsZCBiZSB0cmFuc2Zvcm1lZCB0byBgLmNsYXNzQSA6bm90KC5jbGFzc0IgLmNsYXNzQylgLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIE5vdGU6IGZvciBuZWdhdGl2ZSBzZWxlY3RvciBwYXJ0LCB3ZSBhY2N1bXVsYXRlIGNvbnRlbnQgYmV0d2VlbiBmbGFncyB1bnRpbCB3ZSBmaW5kIHRoZVxuICAgICAgICAgICAgLy8gbmV4dCBuZWdhdGl2ZSBmbGFnLiBUaGlzIGlzIG5lZWRlZCB0byBzdXBwb3J0IGEgY2FzZSB3aGVyZSBgOm5vdCgpYCBydWxlIGNvbnRhaW5zIG1vcmUgdGhhblxuICAgICAgICAgICAgLy8gb25lIGNodW5rLCBlLmcuIHRoZSBmb2xsb3dpbmcgc2VsZWN0b3I6XG4gICAgICAgICAgICAvLyBgYGBcbiAgICAgICAgICAgIC8vICBbJycsIEZsYWdzLkVMRU1FTlQgfCBGbGFncy5OT1QsICdwJywgRmxhZ3MuQ0xBU1MsICdmb28nLCBGbGFncy5DTEFTUyB8IEZsYWdzLk5PVCwgJ2JhciddXG4gICAgICAgICAgICAvLyBgYGBcbiAgICAgICAgICAgIC8vIHNob3VsZCBiZSBzdHJpbmdpZmllZCB0byBgOm5vdChwLmZvbykgOm5vdCguYmFyKWBcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBpZiAoY3VycmVudENodW5rICE9PSAnJyAmJiAhaXNQb3NpdGl2ZSh2YWx1ZU9yTWFya2VyKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBtYXliZVdyYXBJbk5vdFNlbGVjdG9yKGlzTmVnYXRpdmVNb2RlLCBjdXJyZW50Q2h1bmspO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDaHVuayA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9kZSA9IHZhbHVlT3JNYXJrZXI7XG4gICAgICAgICAgICAvLyBBY2NvcmRpbmcgdG8gQ3NzU2VsZWN0b3Igc3BlYywgb25jZSB3ZSBjb21lIGFjcm9zcyBgU2VsZWN0b3JGbGFncy5OT1RgIGZsYWcsIHRoZSBuZWdhdGl2ZVxuICAgICAgICAgICAgLy8gbW9kZSBpcyBtYWludGFpbmVkIGZvciByZW1haW5pbmcgY2h1bmtzIG9mIGEgc2VsZWN0b3IuXG4gICAgICAgICAgICBpc05lZ2F0aXZlTW9kZSA9IGlzTmVnYXRpdmVNb2RlIHx8ICFpc1Bvc2l0aXZlKG1vZGUpO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRDaHVuayAhPT0gJycpIHtcbiAgICAgICAgcmVzdWx0ICs9IG1heWJlV3JhcEluTm90U2VsZWN0b3IoaXNOZWdhdGl2ZU1vZGUsIGN1cnJlbnRDaHVuayk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbiAqIEdlbmVyYXRlcyBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgQ1NTIHNlbGVjdG9yIGluIHBhcnNlZCBmb3JtLlxuICpcbiAqIENvbXBvbmVudERlZiBhbmQgRGlyZWN0aXZlRGVmIGFyZSBnZW5lcmF0ZWQgd2l0aCB0aGUgc2VsZWN0b3IgaW4gcGFyc2VkIGZvcm0gdG8gYXZvaWQgZG9pbmdcbiAqIGFkZGl0aW9uYWwgcGFyc2luZyBhdCBydW50aW1lIChmb3IgZXhhbXBsZSwgZm9yIGRpcmVjdGl2ZSBtYXRjaGluZykuIEhvd2V2ZXIgaW4gc29tZSBjYXNlcyAoZm9yXG4gKiBleGFtcGxlLCB3aGlsZSBib290c3RyYXBwaW5nIGEgY29tcG9uZW50KSwgYSBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgc2VsZWN0b3IgaXMgcmVxdWlyZWQgdG8gcXVlcnlcbiAqIGZvciB0aGUgaG9zdCBlbGVtZW50IG9uIHRoZSBwYWdlLiBUaGlzIGZ1bmN0aW9uIHRha2VzIHRoZSBwYXJzZWQgZm9ybSBvZiBhIHNlbGVjdG9yIGFuZCByZXR1cm5zXG4gKiBpdHMgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBzZWxlY3Rvckxpc3Qgc2VsZWN0b3IgaW4gcGFyc2VkIGZvcm1cbiAqIEByZXR1cm5zIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIGdpdmVuIHNlbGVjdG9yXG4gKi9cbmZ1bmN0aW9uIHN0cmluZ2lmeUNTU1NlbGVjdG9yTGlzdChzZWxlY3Rvckxpc3QpIHtcbiAgICByZXR1cm4gc2VsZWN0b3JMaXN0Lm1hcChzdHJpbmdpZnlDU1NTZWxlY3Rvcikuam9pbignLCcpO1xufVxuLyoqXG4gKiBFeHRyYWN0cyBhdHRyaWJ1dGVzIGFuZCBjbGFzc2VzIGluZm9ybWF0aW9uIGZyb20gYSBnaXZlbiBDU1Mgc2VsZWN0b3IuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoaWxlIGNyZWF0aW5nIGEgY29tcG9uZW50IGR5bmFtaWNhbGx5LiBJbiB0aGlzIGNhc2UsIHRoZSBob3N0IGVsZW1lbnRcbiAqICh0aGF0IGlzIGNyZWF0ZWQgZHluYW1pY2FsbHkpIHNob3VsZCBjb250YWluIGF0dHJpYnV0ZXMgYW5kIGNsYXNzZXMgc3BlY2lmaWVkIGluIGNvbXBvbmVudCdzIENTU1xuICogc2VsZWN0b3IuXG4gKlxuICogQHBhcmFtIHNlbGVjdG9yIENTUyBzZWxlY3RvciBpbiBwYXJzZWQgZm9ybSAoaW4gYSBmb3JtIG9mIGFycmF5KVxuICogQHJldHVybnMgb2JqZWN0IHdpdGggYGF0dHJzYCBhbmQgYGNsYXNzZXNgIGZpZWxkcyB0aGF0IGNvbnRhaW4gZXh0cmFjdGVkIGluZm9ybWF0aW9uXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RBdHRyc0FuZENsYXNzZXNGcm9tU2VsZWN0b3Ioc2VsZWN0b3IpIHtcbiAgICBjb25zdCBhdHRycyA9IFtdO1xuICAgIGNvbnN0IGNsYXNzZXMgPSBbXTtcbiAgICBsZXQgaSA9IDE7XG4gICAgbGV0IG1vZGUgPSAyIC8qIEFUVFJJQlVURSAqLztcbiAgICB3aGlsZSAoaSA8IHNlbGVjdG9yLmxlbmd0aCkge1xuICAgICAgICBsZXQgdmFsdWVPck1hcmtlciA9IHNlbGVjdG9yW2ldO1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlT3JNYXJrZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gMiAvKiBBVFRSSUJVVEUgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVPck1hcmtlciAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cnMucHVzaCh2YWx1ZU9yTWFya2VyLCBzZWxlY3RvclsrK2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtb2RlID09PSA4IC8qIENMQVNTICovKSB7XG4gICAgICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKHZhbHVlT3JNYXJrZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gQWNjb3JkaW5nIHRvIENzc1NlbGVjdG9yIHNwZWMsIG9uY2Ugd2UgY29tZSBhY3Jvc3MgYFNlbGVjdG9yRmxhZ3MuTk9UYCBmbGFnLCB0aGUgbmVnYXRpdmVcbiAgICAgICAgICAgIC8vIG1vZGUgaXMgbWFpbnRhaW5lZCBmb3IgcmVtYWluaW5nIGNodW5rcyBvZiBhIHNlbGVjdG9yLiBTaW5jZSBhdHRyaWJ1dGVzIGFuZCBjbGFzc2VzIGFyZVxuICAgICAgICAgICAgLy8gZXh0cmFjdGVkIG9ubHkgZm9yIFwicG9zaXRpdmVcIiBwYXJ0IG9mIHRoZSBzZWxlY3Rvciwgd2UgY2FuIHN0b3AgaGVyZS5cbiAgICAgICAgICAgIGlmICghaXNQb3NpdGl2ZShtb2RlKSlcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIG1vZGUgPSB2YWx1ZU9yTWFya2VyO1xuICAgICAgICB9XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgcmV0dXJuIHsgYXR0cnMsIGNsYXNzZXMgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKiogQSBzcGVjaWFsIHZhbHVlIHdoaWNoIGRlc2lnbmF0ZXMgdGhhdCBhIHZhbHVlIGhhcyBub3QgY2hhbmdlZC4gKi9cbmNvbnN0IE5PX0NIQU5HRSA9ICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpID8geyBfX2JyYW5kX186ICdOT19DSEFOR0UnIH0gOiB7fTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEFkdmFuY2VzIHRvIGFuIGVsZW1lbnQgZm9yIGxhdGVyIGJpbmRpbmcgaW5zdHJ1Y3Rpb25zLlxuICpcbiAqIFVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBpbnN0cnVjdGlvbnMgbGlrZSB7QGxpbmsgcHJvcGVydHl9IHRvIGFjdCBvbiBlbGVtZW50cyB3aXRoIHNwZWNpZmllZFxuICogaW5kaWNlcywgZm9yIGV4YW1wbGUgdGhvc2UgY3JlYXRlZCB3aXRoIHtAbGluayBlbGVtZW50fSBvciB7QGxpbmsgZWxlbWVudFN0YXJ0fS5cbiAqXG4gKiBgYGB0c1xuICogKHJmOiBSZW5kZXJGbGFncywgY3R4OiBhbnkpID0+IHtcbiAqICAgaWYgKHJmICYgMSkge1xuICogICAgIHRleHQoMCwgJ0hlbGxvJyk7XG4gKiAgICAgdGV4dCgxLCAnR29vZGJ5ZScpXG4gKiAgICAgZWxlbWVudCgyLCAnZGl2Jyk7XG4gKiAgIH1cbiAqICAgaWYgKHJmICYgMikge1xuICogICAgIGFkdmFuY2UoMik7IC8vIEFkdmFuY2UgdHdpY2UgdG8gdGhlIDxkaXY+LlxuICogICAgIHByb3BlcnR5KCd0aXRsZScsICd0ZXN0Jyk7XG4gKiAgIH1cbiAqICB9XG4gKiBgYGBcbiAqIEBwYXJhbSBkZWx0YSBOdW1iZXIgb2YgZWxlbWVudHMgdG8gYWR2YW5jZSBmb3J3YXJkcyBieS5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1YWR2YW5jZShkZWx0YSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRHcmVhdGVyVGhhbihkZWx0YSwgMCwgJ0NhbiBvbmx5IGFkdmFuY2UgZm9yd2FyZCcpO1xuICAgIHNlbGVjdEluZGV4SW50ZXJuYWwoZ2V0VFZpZXcoKSwgZ2V0TFZpZXcoKSwgZ2V0U2VsZWN0ZWRJbmRleCgpICsgZGVsdGEsIGlzSW5DaGVja05vQ2hhbmdlc01vZGUoKSk7XG59XG5mdW5jdGlvbiBzZWxlY3RJbmRleEludGVybmFsKHRWaWV3LCBsVmlldywgaW5kZXgsIGNoZWNrTm9DaGFuZ2VzTW9kZSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRJbmRleEluRGVjbFJhbmdlKGxWaWV3LCBpbmRleCk7XG4gICAgLy8gRmx1c2ggdGhlIGluaXRpYWwgaG9va3MgZm9yIGVsZW1lbnRzIGluIHRoZSB2aWV3IHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHVwIHRvIHRoaXMgcG9pbnQuXG4gICAgLy8gUEVSRiBXQVJOSU5HOiBkbyBOT1QgZXh0cmFjdCB0aGlzIHRvIGEgc2VwYXJhdGUgZnVuY3Rpb24gd2l0aG91dCBydW5uaW5nIGJlbmNobWFya3NcbiAgICBpZiAoIWNoZWNrTm9DaGFuZ2VzTW9kZSkge1xuICAgICAgICBjb25zdCBob29rc0luaXRQaGFzZUNvbXBsZXRlZCA9IChsVmlld1tGTEFHU10gJiAzIC8qIEluaXRQaGFzZVN0YXRlTWFzayAqLykgPT09IDMgLyogSW5pdFBoYXNlQ29tcGxldGVkICovO1xuICAgICAgICBpZiAoaG9va3NJbml0UGhhc2VDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZU9yZGVyQ2hlY2tIb29rcyA9IHRWaWV3LnByZU9yZGVyQ2hlY2tIb29rcztcbiAgICAgICAgICAgIGlmIChwcmVPcmRlckNoZWNrSG9va3MgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBleGVjdXRlQ2hlY2tIb29rcyhsVmlldywgcHJlT3JkZXJDaGVja0hvb2tzLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwcmVPcmRlckhvb2tzID0gdFZpZXcucHJlT3JkZXJIb29rcztcbiAgICAgICAgICAgIGlmIChwcmVPcmRlckhvb2tzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZXhlY3V0ZUluaXRBbmRDaGVja0hvb2tzKGxWaWV3LCBwcmVPcmRlckhvb2tzLCAwIC8qIE9uSW5pdEhvb2tzVG9CZVJ1biAqLywgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFdlIG11c3Qgc2V0IHRoZSBzZWxlY3RlZCBpbmRleCAqYWZ0ZXIqIHJ1bm5pbmcgdGhlIGhvb2tzLCBiZWNhdXNlIGhvb2tzIG1heSBoYXZlIHNpZGUtZWZmZWN0c1xuICAgIC8vIHRoYXQgY2F1c2Ugb3RoZXIgdGVtcGxhdGUgZnVuY3Rpb25zIHRvIHJ1biwgdGh1cyB1cGRhdGluZyB0aGUgc2VsZWN0ZWQgaW5kZXgsIHdoaWNoIGlzIGdsb2JhbFxuICAgIC8vIHN0YXRlLiBJZiB3ZSBydW4gYHNldFNlbGVjdGVkSW5kZXhgICpiZWZvcmUqIHdlIHJ1biB0aGUgaG9va3MsIGluIHNvbWUgY2FzZXMgdGhlIHNlbGVjdGVkIGluZGV4XG4gICAgLy8gd2lsbCBiZSBhbHRlcmVkIGJ5IHRoZSB0aW1lIHdlIGxlYXZlIHRoZSBgybXJtWFkdmFuY2VgIGluc3RydWN0aW9uLlxuICAgIHNldFNlbGVjdGVkSW5kZXgoaW5kZXgpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVEhJUyBGSUxFIENPTlRBSU5TIENPREUgV0hJQ0ggU0hPVUxEIEJFIFRSRUUgU0hBS0VOIEFORCBORVZFUiBDQUxMRUQgRlJPTSBQUk9EVUNUSU9OIENPREUhISFcbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGFuIGBBcnJheWAgY29uc3RydWN0aW9uIHdpdGggYSBnaXZlbiBuYW1lLiBUaGlzIGlzIHVzZWZ1bCB3aGVuXG4gKiBsb29raW5nIGZvciBtZW1vcnkgY29uc3VtcHRpb24gdG8gc2VlIHdoYXQgdGltZSBvZiBhcnJheSBpdCBpcy5cbiAqXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSB0byBnaXZlIHRvIHRoZSBjb25zdHJ1Y3RvclxuICogQHJldHVybnMgQSBzdWJjbGFzcyBvZiBgQXJyYXlgIGlmIHBvc3NpYmxlLiBUaGlzIGNhbiBvbmx5IGJlIGRvbmUgaW5cbiAqICAgICAgICAgIGVudmlyb25tZW50cyB3aGljaCBzdXBwb3J0IGBjbGFzc2AgY29uc3RydWN0LlxuICovXG5mdW5jdGlvbiBjcmVhdGVOYW1lZEFycmF5VHlwZShuYW1lKSB7XG4gICAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgYmUgY2FsbGVkIGluIHByb2QgbW9kZSwgc28gbGV0J3MgdmVyaWZ5IHRoYXQgaXMgdGhlIGNhc2UuXG4gICAgaWYgKG5nRGV2TW9kZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBmdW5jdGlvbiB3ZXJlIGNvbXByb21pc2VkIHRoZSBmb2xsb3dpbmcgY291bGQgbGVhZCB0byBhcmJpdHJhcnlcbiAgICAgICAgICAgIC8vIHNjcmlwdCBleGVjdXRpb24uIFdlIGJsZXNzIGl0IHdpdGggVHJ1c3RlZCBUeXBlcyBhbnl3YXkgc2luY2UgdGhpc1xuICAgICAgICAgICAgLy8gZnVuY3Rpb24gaXMgc3RyaXBwZWQgb3V0IG9mIHByb2R1Y3Rpb24gYmluYXJpZXMuXG4gICAgICAgICAgICByZXR1cm4gKG5ld1RydXN0ZWRGdW5jdGlvbkZvckRldignQXJyYXknLCBgcmV0dXJuIGNsYXNzICR7bmFtZX0gZXh0ZW5kcyBBcnJheXt9YCkpKEFycmF5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gSWYgaXQgZG9lcyBub3Qgd29yayBqdXN0IGdpdmUgdXAgYW5kIGZhbGwgYmFjayB0byByZWd1bGFyIEFycmF5LlxuICAgICAgICAgICAgcmV0dXJuIEFycmF5O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xvb2tzIGxpa2Ugd2UgYXJlIGluIFxcJ3Byb2QgbW9kZVxcJywgYnV0IHdlIGFyZSBjcmVhdGluZyBhIG5hbWVkIEFycmF5IHR5cGUsIHdoaWNoIGlzIHdyb25nISBDaGVjayB5b3VyIGNvZGUnKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gdG9UU3R5bGluZ1JhbmdlKHByZXYsIG5leHQpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TnVtYmVySW5SYW5nZShwcmV2LCAwLCAzMjc2NyAvKiBVTlNJR05FRF9NQVNLICovKTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TnVtYmVySW5SYW5nZShuZXh0LCAwLCAzMjc2NyAvKiBVTlNJR05FRF9NQVNLICovKTtcbiAgICByZXR1cm4gKHByZXYgPDwgMTcgLyogUFJFVl9TSElGVCAqLyB8IG5leHQgPDwgMiAvKiBORVhUX1NISUZUICovKTtcbn1cbmZ1bmN0aW9uIGdldFRTdHlsaW5nUmFuZ2VQcmV2KHRTdHlsaW5nUmFuZ2UpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TnVtYmVyKHRTdHlsaW5nUmFuZ2UsICdleHBlY3RlZCBudW1iZXInKTtcbiAgICByZXR1cm4gKHRTdHlsaW5nUmFuZ2UgPj4gMTcgLyogUFJFVl9TSElGVCAqLykgJiAzMjc2NyAvKiBVTlNJR05FRF9NQVNLICovO1xufVxuZnVuY3Rpb24gZ2V0VFN0eWxpbmdSYW5nZVByZXZEdXBsaWNhdGUodFN0eWxpbmdSYW5nZSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROdW1iZXIodFN0eWxpbmdSYW5nZSwgJ2V4cGVjdGVkIG51bWJlcicpO1xuICAgIHJldHVybiAodFN0eWxpbmdSYW5nZSAmIDIgLyogUFJFVl9EVVBMSUNBVEUgKi8pID09XG4gICAgICAgIDIgLyogUFJFVl9EVVBMSUNBVEUgKi87XG59XG5mdW5jdGlvbiBzZXRUU3R5bGluZ1JhbmdlUHJldih0U3R5bGluZ1JhbmdlLCBwcmV2aW91cykge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROdW1iZXIodFN0eWxpbmdSYW5nZSwgJ2V4cGVjdGVkIG51bWJlcicpO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROdW1iZXJJblJhbmdlKHByZXZpb3VzLCAwLCAzMjc2NyAvKiBVTlNJR05FRF9NQVNLICovKTtcbiAgICByZXR1cm4gKCh0U3R5bGluZ1JhbmdlICYgfjQyOTQ4MzYyMjQgLyogUFJFVl9NQVNLICovKSB8XG4gICAgICAgIChwcmV2aW91cyA8PCAxNyAvKiBQUkVWX1NISUZUICovKSk7XG59XG5mdW5jdGlvbiBzZXRUU3R5bGluZ1JhbmdlUHJldkR1cGxpY2F0ZSh0U3R5bGluZ1JhbmdlKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydE51bWJlcih0U3R5bGluZ1JhbmdlLCAnZXhwZWN0ZWQgbnVtYmVyJyk7XG4gICAgcmV0dXJuICh0U3R5bGluZ1JhbmdlIHwgMiAvKiBQUkVWX0RVUExJQ0FURSAqLyk7XG59XG5mdW5jdGlvbiBnZXRUU3R5bGluZ1JhbmdlTmV4dCh0U3R5bGluZ1JhbmdlKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydE51bWJlcih0U3R5bGluZ1JhbmdlLCAnZXhwZWN0ZWQgbnVtYmVyJyk7XG4gICAgcmV0dXJuICh0U3R5bGluZ1JhbmdlICYgMTMxMDY4IC8qIE5FWFRfTUFTSyAqLykgPj4gMiAvKiBORVhUX1NISUZUICovO1xufVxuZnVuY3Rpb24gc2V0VFN0eWxpbmdSYW5nZU5leHQodFN0eWxpbmdSYW5nZSwgbmV4dCkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROdW1iZXIodFN0eWxpbmdSYW5nZSwgJ2V4cGVjdGVkIG51bWJlcicpO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROdW1iZXJJblJhbmdlKG5leHQsIDAsIDMyNzY3IC8qIFVOU0lHTkVEX01BU0sgKi8pO1xuICAgIHJldHVybiAoKHRTdHlsaW5nUmFuZ2UgJiB+MTMxMDY4IC8qIE5FWFRfTUFTSyAqLykgfCAvL1xuICAgICAgICBuZXh0IDw8IDIgLyogTkVYVF9TSElGVCAqLyk7XG59XG5mdW5jdGlvbiBnZXRUU3R5bGluZ1JhbmdlTmV4dER1cGxpY2F0ZSh0U3R5bGluZ1JhbmdlKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydE51bWJlcih0U3R5bGluZ1JhbmdlLCAnZXhwZWN0ZWQgbnVtYmVyJyk7XG4gICAgcmV0dXJuICh0U3R5bGluZ1JhbmdlICYgMSAvKiBORVhUX0RVUExJQ0FURSAqLykgPT09XG4gICAgICAgIDEgLyogTkVYVF9EVVBMSUNBVEUgKi87XG59XG5mdW5jdGlvbiBzZXRUU3R5bGluZ1JhbmdlTmV4dER1cGxpY2F0ZSh0U3R5bGluZ1JhbmdlKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydE51bWJlcih0U3R5bGluZ1JhbmdlLCAnZXhwZWN0ZWQgbnVtYmVyJyk7XG4gICAgcmV0dXJuICh0U3R5bGluZ1JhbmdlIHwgMSAvKiBORVhUX0RVUExJQ0FURSAqLyk7XG59XG5mdW5jdGlvbiBnZXRUU3R5bGluZ1JhbmdlVGFpbCh0U3R5bGluZ1JhbmdlKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydE51bWJlcih0U3R5bGluZ1JhbmdlLCAnZXhwZWN0ZWQgbnVtYmVyJyk7XG4gICAgY29uc3QgbmV4dCA9IGdldFRTdHlsaW5nUmFuZ2VOZXh0KHRTdHlsaW5nUmFuZ2UpO1xuICAgIHJldHVybiBuZXh0ID09PSAwID8gZ2V0VFN0eWxpbmdSYW5nZVByZXYodFN0eWxpbmdSYW5nZSkgOiBuZXh0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogUGF0Y2ggYSBgZGVidWdgIHByb3BlcnR5IG9uIHRvcCBvZiB0aGUgZXhpc3Rpbmcgb2JqZWN0LlxuICpcbiAqIE5PVEU6IGFsd2F5cyBjYWxsIHRoaXMgbWV0aG9kIHdpdGggYG5nRGV2TW9kZSAmJiBhdHRhY2hEZWJ1Z09iamVjdCguLi4pYFxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIHBhdGNoXG4gKiBAcGFyYW0gZGVidWcgVmFsdWUgdG8gcGF0Y2hcbiAqL1xuZnVuY3Rpb24gYXR0YWNoRGVidWdPYmplY3Qob2JqLCBkZWJ1Zykge1xuICAgIGlmIChuZ0Rldk1vZGUpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ2RlYnVnJywgeyB2YWx1ZTogZGVidWcsIGVudW1lcmFibGU6IGZhbHNlIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIG1ldGhvZCBzaG91bGQgYmUgZ3VhcmRlZCB3aXRoIGBuZ0Rldk1vZGVgIHNvIHRoYXQgaXQgY2FuIGJlIHRyZWUgc2hha2VuIGluIHByb2R1Y3Rpb24hJyk7XG4gICAgfVxufVxuLyoqXG4gKiBQYXRjaCBhIGBkZWJ1Z2AgcHJvcGVydHkgZ2V0dGVyIG9uIHRvcCBvZiB0aGUgZXhpc3Rpbmcgb2JqZWN0LlxuICpcbiAqIE5PVEU6IGFsd2F5cyBjYWxsIHRoaXMgbWV0aG9kIHdpdGggYG5nRGV2TW9kZSAmJiBhdHRhY2hEZWJ1Z09iamVjdCguLi4pYFxuICpcbiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIHBhdGNoXG4gKiBAcGFyYW0gZGVidWdHZXR0ZXIgR2V0dGVyIHJldHVybmluZyBhIHZhbHVlIHRvIHBhdGNoXG4gKi9cbmZ1bmN0aW9uIGF0dGFjaERlYnVnR2V0dGVyKG9iaiwgZGVidWdHZXR0ZXIpIHtcbiAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosICdkZWJ1ZycsIHsgZ2V0OiBkZWJ1Z0dldHRlciwgZW51bWVyYWJsZTogZmFsc2UgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgbWV0aG9kIHNob3VsZCBiZSBndWFyZGVkIHdpdGggYG5nRGV2TW9kZWAgc28gdGhhdCBpdCBjYW4gYmUgdHJlZSBzaGFrZW4gaW4gcHJvZHVjdGlvbiEnKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLypcbiAqIFRoaXMgZmlsZSBjb250YWlucyBjb25kaXRpb25hbGx5IGF0dGFjaGVkIGNsYXNzZXMgd2hpY2ggcHJvdmlkZSBodW1hbiByZWFkYWJsZSAoZGVidWcpIGxldmVsXG4gKiBpbmZvcm1hdGlvbiBmb3IgYExWaWV3YCwgYExDb250YWluZXJgIGFuZCBvdGhlciBpbnRlcm5hbCBkYXRhIHN0cnVjdHVyZXMuIFRoZXNlIGRhdGEgc3RydWN0dXJlc1xuICogYXJlIHN0b3JlZCBpbnRlcm5hbGx5IGFzIGFycmF5IHdoaWNoIG1ha2VzIGl0IHZlcnkgZGlmZmljdWx0IGR1cmluZyBkZWJ1Z2dpbmcgdG8gcmVhc29uIGFib3V0IHRoZVxuICogY3VycmVudCBzdGF0ZSBvZiB0aGUgc3lzdGVtLlxuICpcbiAqIFBhdGNoaW5nIHRoZSBhcnJheSB3aXRoIGV4dHJhIHByb3BlcnR5IGRvZXMgY2hhbmdlIHRoZSBhcnJheSdzIGhpZGRlbiBjbGFzcycgYnV0IGl0IGRvZXMgbm90XG4gKiBjaGFuZ2UgdGhlIGNvc3Qgb2YgYWNjZXNzLCB0aGVyZWZvcmUgdGhpcyBwYXRjaGluZyBzaG91bGQgbm90IGhhdmUgc2lnbmlmaWNhbnQgaWYgYW55IGltcGFjdCBpblxuICogYG5nRGV2TW9kZWAgbW9kZS4gKHNlZTogaHR0cHM6Ly9qc3BlcmYuY29tL2FycmF5LXZzLW1vbmtleS1wYXRjaC1hcnJheSlcbiAqXG4gKiBTbyBpbnN0ZWFkIG9mIHNlZWluZzpcbiAqIGBgYFxuICogQXJyYXkoMzApIFtPYmplY3QsIDY1OSwgbnVsbCwg4oCmXVxuICogYGBgXG4gKlxuICogWW91IGdldCB0byBzZWU6XG4gKiBgYGBcbiAqIExWaWV3RGVidWcge1xuICogICB2aWV3czogWy4uLl0sXG4gKiAgIGZsYWdzOiB7YXR0YWNoZWQ6IHRydWUsIC4uLn1cbiAqICAgbm9kZXM6IFtcbiAqICAgICB7aHRtbDogJzxkaXYgaWQ9XCIxMjNcIj4nLCAuLi4sIG5vZGVzOiBbXG4gKiAgICAgICB7aHRtbDogJzxzcGFuPicsIC4uLiwgbm9kZXM6IG51bGx9XG4gKiAgICAgXX1cbiAqICAgXVxuICogfVxuICogYGBgXG4gKi9cbmxldCBMVklFV19DT01QT05FTlRfQ0FDSEU7XG5sZXQgTFZJRVdfRU1CRURERURfQ0FDSEU7XG5sZXQgTFZJRVdfUk9PVDtcbmxldCBMVklFV19DT01QT05FTlQ7XG5sZXQgTFZJRVdfRU1CRURERUQ7XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2xvbmVzIGEgYmx1ZXByaW50IGFuZCBjcmVhdGVzIExWaWV3LlxuICpcbiAqIFNpbXBsZSBzbGljZSB3aWxsIGtlZXAgdGhlIHNhbWUgdHlwZSwgYW5kIHdlIG5lZWQgaXQgdG8gYmUgTFZpZXdcbiAqL1xuZnVuY3Rpb24gY2xvbmVUb0xWaWV3RnJvbVRWaWV3Qmx1ZXByaW50KHRWaWV3KSB7XG4gICAgY29uc3QgZGVidWdUVmlldyA9IHRWaWV3O1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXdUb0Nsb25lKGRlYnVnVFZpZXcudHlwZSwgdFZpZXcudGVtcGxhdGUgJiYgdFZpZXcudGVtcGxhdGUubmFtZSk7XG4gICAgcmV0dXJuIGxWaWV3LmNvbmNhdCh0Vmlldy5ibHVlcHJpbnQpO1xufVxuY2xhc3MgTFJvb3RWaWV3IGV4dGVuZHMgQXJyYXkge1xufVxuY2xhc3MgTENvbXBvbmVudFZpZXcgZXh0ZW5kcyBBcnJheSB7XG59XG5jbGFzcyBMRW1iZWRkZWRWaWV3IGV4dGVuZHMgQXJyYXkge1xufVxuZnVuY3Rpb24gZ2V0TFZpZXdUb0Nsb25lKHR5cGUsIG5hbWUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAwIC8qIFJvb3QgKi86XG4gICAgICAgICAgICBpZiAoTFZJRVdfUk9PVCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIExWSUVXX1JPT1QgPSBuZXcgTFJvb3RWaWV3KCk7XG4gICAgICAgICAgICByZXR1cm4gTFZJRVdfUk9PVDtcbiAgICAgICAgY2FzZSAxIC8qIENvbXBvbmVudCAqLzpcbiAgICAgICAgICAgIGlmICghbmdEZXZNb2RlIHx8ICFuZ0Rldk1vZGUubmFtZWRDb25zdHJ1Y3RvcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoTFZJRVdfQ09NUE9ORU5UID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIExWSUVXX0NPTVBPTkVOVCA9IG5ldyBMQ29tcG9uZW50VmlldygpO1xuICAgICAgICAgICAgICAgIHJldHVybiBMVklFV19DT01QT05FTlQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoTFZJRVdfQ09NUE9ORU5UX0NBQ0hFID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgTFZJRVdfQ09NUE9ORU5UX0NBQ0hFID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgbGV0IGNvbXBvbmVudEFycmF5ID0gTFZJRVdfQ09NUE9ORU5UX0NBQ0hFLmdldChuYW1lKTtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnRBcnJheSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50QXJyYXkgPSBuZXcgKGNyZWF0ZU5hbWVkQXJyYXlUeXBlKCdMQ29tcG9uZW50VmlldycgKyBuYW1lU3VmZml4KG5hbWUpKSkoKTtcbiAgICAgICAgICAgICAgICBMVklFV19DT01QT05FTlRfQ0FDSEUuc2V0KG5hbWUsIGNvbXBvbmVudEFycmF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnRBcnJheTtcbiAgICAgICAgY2FzZSAyIC8qIEVtYmVkZGVkICovOlxuICAgICAgICAgICAgaWYgKCFuZ0Rldk1vZGUgfHwgIW5nRGV2TW9kZS5uYW1lZENvbnN0cnVjdG9ycykge1xuICAgICAgICAgICAgICAgIGlmIChMVklFV19FTUJFRERFRCA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICBMVklFV19FTUJFRERFRCA9IG5ldyBMRW1iZWRkZWRWaWV3KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIExWSUVXX0VNQkVEREVEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKExWSUVXX0VNQkVEREVEX0NBQ0hFID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgTFZJRVdfRU1CRURERURfQ0FDSEUgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBsZXQgZW1iZWRkZWRBcnJheSA9IExWSUVXX0VNQkVEREVEX0NBQ0hFLmdldChuYW1lKTtcbiAgICAgICAgICAgIGlmIChlbWJlZGRlZEFycmF5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBlbWJlZGRlZEFycmF5ID0gbmV3IChjcmVhdGVOYW1lZEFycmF5VHlwZSgnTEVtYmVkZGVkVmlldycgKyBuYW1lU3VmZml4KG5hbWUpKSkoKTtcbiAgICAgICAgICAgICAgICBMVklFV19FTUJFRERFRF9DQUNIRS5zZXQobmFtZSwgZW1iZWRkZWRBcnJheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZW1iZWRkZWRBcnJheTtcbiAgICB9XG59XG5mdW5jdGlvbiBuYW1lU3VmZml4KHRleHQpIHtcbiAgICBpZiAodGV4dCA9PSBudWxsKVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgY29uc3QgaW5kZXggPSB0ZXh0Lmxhc3RJbmRleE9mKCdfVGVtcGxhdGUnKTtcbiAgICByZXR1cm4gJ18nICsgKGluZGV4ID09PSAtMSA/IHRleHQgOiB0ZXh0LnN1YnN0cigwLCBpbmRleCkpO1xufVxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGEgZGVidWcgdmVyc2lvbiBvZiBPYmplY3QgbGl0ZXJhbCBzbyB0aGF0IHdlIGNhbiBoYXZlIGNvbnN0cnVjdG9yIG5hbWUgc2hvdyB1cFxuICogaW5cbiAqIGRlYnVnIHRvb2xzIGluIG5nRGV2TW9kZS5cbiAqL1xuY29uc3QgVFZpZXdDb25zdHJ1Y3RvciA9IGNsYXNzIFRWaWV3IHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBibHVlcHJpbnQsIHRlbXBsYXRlLCBxdWVyaWVzLCB2aWV3UXVlcnksIGRlY2xUTm9kZSwgZGF0YSwgYmluZGluZ1N0YXJ0SW5kZXgsIGV4cGFuZG9TdGFydEluZGV4LCBob3N0QmluZGluZ09wQ29kZXMsIGZpcnN0Q3JlYXRlUGFzcywgZmlyc3RVcGRhdGVQYXNzLCBzdGF0aWNWaWV3UXVlcmllcywgc3RhdGljQ29udGVudFF1ZXJpZXMsIHByZU9yZGVySG9va3MsIHByZU9yZGVyQ2hlY2tIb29rcywgY29udGVudEhvb2tzLCBjb250ZW50Q2hlY2tIb29rcywgdmlld0hvb2tzLCB2aWV3Q2hlY2tIb29rcywgZGVzdHJveUhvb2tzLCBjbGVhbnVwLCBjb250ZW50UXVlcmllcywgY29tcG9uZW50cywgZGlyZWN0aXZlUmVnaXN0cnksIHBpcGVSZWdpc3RyeSwgZmlyc3RDaGlsZCwgc2NoZW1hcywgY29uc3RzLCBpbmNvbXBsZXRlRmlyc3RQYXNzLCBfZGVjbHMsIF92YXJzKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuYmx1ZXByaW50ID0gYmx1ZXByaW50O1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IHF1ZXJpZXM7XG4gICAgICAgIHRoaXMudmlld1F1ZXJ5ID0gdmlld1F1ZXJ5O1xuICAgICAgICB0aGlzLmRlY2xUTm9kZSA9IGRlY2xUTm9kZTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5iaW5kaW5nU3RhcnRJbmRleCA9IGJpbmRpbmdTdGFydEluZGV4O1xuICAgICAgICB0aGlzLmV4cGFuZG9TdGFydEluZGV4ID0gZXhwYW5kb1N0YXJ0SW5kZXg7XG4gICAgICAgIHRoaXMuaG9zdEJpbmRpbmdPcENvZGVzID0gaG9zdEJpbmRpbmdPcENvZGVzO1xuICAgICAgICB0aGlzLmZpcnN0Q3JlYXRlUGFzcyA9IGZpcnN0Q3JlYXRlUGFzcztcbiAgICAgICAgdGhpcy5maXJzdFVwZGF0ZVBhc3MgPSBmaXJzdFVwZGF0ZVBhc3M7XG4gICAgICAgIHRoaXMuc3RhdGljVmlld1F1ZXJpZXMgPSBzdGF0aWNWaWV3UXVlcmllcztcbiAgICAgICAgdGhpcy5zdGF0aWNDb250ZW50UXVlcmllcyA9IHN0YXRpY0NvbnRlbnRRdWVyaWVzO1xuICAgICAgICB0aGlzLnByZU9yZGVySG9va3MgPSBwcmVPcmRlckhvb2tzO1xuICAgICAgICB0aGlzLnByZU9yZGVyQ2hlY2tIb29rcyA9IHByZU9yZGVyQ2hlY2tIb29rcztcbiAgICAgICAgdGhpcy5jb250ZW50SG9va3MgPSBjb250ZW50SG9va3M7XG4gICAgICAgIHRoaXMuY29udGVudENoZWNrSG9va3MgPSBjb250ZW50Q2hlY2tIb29rcztcbiAgICAgICAgdGhpcy52aWV3SG9va3MgPSB2aWV3SG9va3M7XG4gICAgICAgIHRoaXMudmlld0NoZWNrSG9va3MgPSB2aWV3Q2hlY2tIb29rcztcbiAgICAgICAgdGhpcy5kZXN0cm95SG9va3MgPSBkZXN0cm95SG9va3M7XG4gICAgICAgIHRoaXMuY2xlYW51cCA9IGNsZWFudXA7XG4gICAgICAgIHRoaXMuY29udGVudFF1ZXJpZXMgPSBjb250ZW50UXVlcmllcztcbiAgICAgICAgdGhpcy5jb21wb25lbnRzID0gY29tcG9uZW50cztcbiAgICAgICAgdGhpcy5kaXJlY3RpdmVSZWdpc3RyeSA9IGRpcmVjdGl2ZVJlZ2lzdHJ5O1xuICAgICAgICB0aGlzLnBpcGVSZWdpc3RyeSA9IHBpcGVSZWdpc3RyeTtcbiAgICAgICAgdGhpcy5maXJzdENoaWxkID0gZmlyc3RDaGlsZDtcbiAgICAgICAgdGhpcy5zY2hlbWFzID0gc2NoZW1hcztcbiAgICAgICAgdGhpcy5jb25zdHMgPSBjb25zdHM7XG4gICAgICAgIHRoaXMuaW5jb21wbGV0ZUZpcnN0UGFzcyA9IGluY29tcGxldGVGaXJzdFBhc3M7XG4gICAgICAgIHRoaXMuX2RlY2xzID0gX2RlY2xzO1xuICAgICAgICB0aGlzLl92YXJzID0gX3ZhcnM7XG4gICAgfVxuICAgIGdldCB0ZW1wbGF0ZV8oKSB7XG4gICAgICAgIGNvbnN0IGJ1ZiA9IFtdO1xuICAgICAgICBwcm9jZXNzVE5vZGVDaGlsZHJlbih0aGlzLmZpcnN0Q2hpbGQsIGJ1Zik7XG4gICAgICAgIHJldHVybiBidWYuam9pbignJyk7XG4gICAgfVxuICAgIGdldCB0eXBlXygpIHtcbiAgICAgICAgcmV0dXJuIFRWaWV3VHlwZUFzU3RyaW5nW3RoaXMudHlwZV0gfHwgYFRWaWV3VHlwZS4/JHt0aGlzLnR5cGV9P2A7XG4gICAgfVxufTtcbmNsYXNzIFROb2RlIHtcbiAgICBjb25zdHJ1Y3Rvcih0Vmlld18sIC8vXG4gICAgdHlwZSwgLy9cbiAgICBpbmRleCwgLy9cbiAgICBpbnNlcnRCZWZvcmVJbmRleCwgLy9cbiAgICBpbmplY3RvckluZGV4LCAvL1xuICAgIGRpcmVjdGl2ZVN0YXJ0LCAvL1xuICAgIGRpcmVjdGl2ZUVuZCwgLy9cbiAgICBkaXJlY3RpdmVTdHlsaW5nTGFzdCwgLy9cbiAgICBwcm9wZXJ0eUJpbmRpbmdzLCAvL1xuICAgIGZsYWdzLCAvL1xuICAgIHByb3ZpZGVySW5kZXhlcywgLy9cbiAgICB2YWx1ZSwgLy9cbiAgICBhdHRycywgLy9cbiAgICBtZXJnZWRBdHRycywgLy9cbiAgICBsb2NhbE5hbWVzLCAvL1xuICAgIGluaXRpYWxJbnB1dHMsIC8vXG4gICAgaW5wdXRzLCAvL1xuICAgIG91dHB1dHMsIC8vXG4gICAgdFZpZXdzLCAvL1xuICAgIG5leHQsIC8vXG4gICAgcHJvamVjdGlvbk5leHQsIC8vXG4gICAgY2hpbGQsIC8vXG4gICAgcGFyZW50LCAvL1xuICAgIHByb2plY3Rpb24sIC8vXG4gICAgc3R5bGVzLCAvL1xuICAgIHN0eWxlc1dpdGhvdXRIb3N0LCAvL1xuICAgIHJlc2lkdWFsU3R5bGVzLCAvL1xuICAgIGNsYXNzZXMsIC8vXG4gICAgY2xhc3Nlc1dpdGhvdXRIb3N0LCAvL1xuICAgIHJlc2lkdWFsQ2xhc3NlcywgLy9cbiAgICBjbGFzc0JpbmRpbmdzLCAvL1xuICAgIHN0eWxlQmluZGluZ3MpIHtcbiAgICAgICAgdGhpcy50Vmlld18gPSB0Vmlld187XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgdGhpcy5pbnNlcnRCZWZvcmVJbmRleCA9IGluc2VydEJlZm9yZUluZGV4O1xuICAgICAgICB0aGlzLmluamVjdG9ySW5kZXggPSBpbmplY3RvckluZGV4O1xuICAgICAgICB0aGlzLmRpcmVjdGl2ZVN0YXJ0ID0gZGlyZWN0aXZlU3RhcnQ7XG4gICAgICAgIHRoaXMuZGlyZWN0aXZlRW5kID0gZGlyZWN0aXZlRW5kO1xuICAgICAgICB0aGlzLmRpcmVjdGl2ZVN0eWxpbmdMYXN0ID0gZGlyZWN0aXZlU3R5bGluZ0xhc3Q7XG4gICAgICAgIHRoaXMucHJvcGVydHlCaW5kaW5ncyA9IHByb3BlcnR5QmluZGluZ3M7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFncztcbiAgICAgICAgdGhpcy5wcm92aWRlckluZGV4ZXMgPSBwcm92aWRlckluZGV4ZXM7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5hdHRycyA9IGF0dHJzO1xuICAgICAgICB0aGlzLm1lcmdlZEF0dHJzID0gbWVyZ2VkQXR0cnM7XG4gICAgICAgIHRoaXMubG9jYWxOYW1lcyA9IGxvY2FsTmFtZXM7XG4gICAgICAgIHRoaXMuaW5pdGlhbElucHV0cyA9IGluaXRpYWxJbnB1dHM7XG4gICAgICAgIHRoaXMuaW5wdXRzID0gaW5wdXRzO1xuICAgICAgICB0aGlzLm91dHB1dHMgPSBvdXRwdXRzO1xuICAgICAgICB0aGlzLnRWaWV3cyA9IHRWaWV3cztcbiAgICAgICAgdGhpcy5uZXh0ID0gbmV4dDtcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9uTmV4dCA9IHByb2plY3Rpb25OZXh0O1xuICAgICAgICB0aGlzLmNoaWxkID0gY2hpbGQ7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLnByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLnN0eWxlcyA9IHN0eWxlcztcbiAgICAgICAgdGhpcy5zdHlsZXNXaXRob3V0SG9zdCA9IHN0eWxlc1dpdGhvdXRIb3N0O1xuICAgICAgICB0aGlzLnJlc2lkdWFsU3R5bGVzID0gcmVzaWR1YWxTdHlsZXM7XG4gICAgICAgIHRoaXMuY2xhc3NlcyA9IGNsYXNzZXM7XG4gICAgICAgIHRoaXMuY2xhc3Nlc1dpdGhvdXRIb3N0ID0gY2xhc3Nlc1dpdGhvdXRIb3N0O1xuICAgICAgICB0aGlzLnJlc2lkdWFsQ2xhc3NlcyA9IHJlc2lkdWFsQ2xhc3NlcztcbiAgICAgICAgdGhpcy5jbGFzc0JpbmRpbmdzID0gY2xhc3NCaW5kaW5ncztcbiAgICAgICAgdGhpcy5zdHlsZUJpbmRpbmdzID0gc3R5bGVCaW5kaW5ncztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgaHVtYW4gZGVidWcgdmVyc2lvbiBvZiB0aGUgc2V0IG9mIGBOb2RlSW5qZWN0b3JgcyB3aGljaCB3aWxsIGJlIGNvbnN1bHRlZCB3aGVuXG4gICAgICogcmVzb2x2aW5nIHRva2VucyBmcm9tIHRoaXMgYFROb2RlYC5cbiAgICAgKlxuICAgICAqIFdoZW4gZGVidWdnaW5nIGFwcGxpY2F0aW9ucywgaXQgaXMgb2Z0ZW4gZGlmZmljdWx0IHRvIGRldGVybWluZSB3aGljaCBgTm9kZUluamVjdG9yYHMgd2lsbCBiZVxuICAgICAqIGNvbnN1bHRlZC4gVGhpcyBtZXRob2Qgc2hvd3MgYSBsaXN0IG9mIGBEZWJ1Z05vZGVgcyByZXByZXNlbnRpbmcgdGhlIGBUTm9kZWBzIHdoaWNoIHdpbGwgYmVcbiAgICAgKiBjb25zdWx0ZWQgaW4gb3JkZXIgd2hlbiByZXNvbHZpbmcgYSB0b2tlbiBzdGFydGluZyBhdCB0aGlzIGBUTm9kZWAuXG4gICAgICpcbiAgICAgKiBUaGUgb3JpZ2luYWwgZGF0YSBpcyBzdG9yZWQgaW4gYExWaWV3YCBhbmQgYFRWaWV3YCB3aXRoIGEgbG90IG9mIG9mZnNldCBpbmRleGVzLCBhbmQgc28gaXQgaXNcbiAgICAgKiBkaWZmaWN1bHQgdG8gcmVhc29uIGFib3V0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxWaWV3IFRoZSBgTFZpZXdgIGluc3RhbmNlIGZvciB0aGlzIGBUTm9kZWAuXG4gICAgICovXG4gICAgZGVidWdOb2RlSW5qZWN0b3JQYXRoKGxWaWV3KSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBbXTtcbiAgICAgICAgbGV0IGluamVjdG9ySW5kZXggPSBnZXRJbmplY3RvckluZGV4KHRoaXMsIGxWaWV3KTtcbiAgICAgICAgaWYgKGluamVjdG9ySW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAvLyBMb29rcyBsaWtlIHRoZSBjdXJyZW50IGBUTm9kZWAgZG9lcyBub3QgaGF2ZSBgTm9kZUluamVjdG9yYCBhc3NvY2lhdGVkIHdpdGggaXQgPT4gbG9vayBmb3JcbiAgICAgICAgICAgIC8vIHBhcmVudCBOb2RlSW5qZWN0b3IuXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRMb2NhdGlvbiA9IGdldFBhcmVudEluamVjdG9yTG9jYXRpb24odGhpcywgbFZpZXcpO1xuICAgICAgICAgICAgaWYgKHBhcmVudExvY2F0aW9uICE9PSBOT19QQVJFTlRfSU5KRUNUT1IpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIHBhcmVudCwgc28gc3RhcnQgc2VhcmNoaW5nIGZyb20gdGhlIHBhcmVudCBsb2NhdGlvbi5cbiAgICAgICAgICAgICAgICBpbmplY3RvckluZGV4ID0gZ2V0UGFyZW50SW5qZWN0b3JJbmRleChwYXJlbnRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgbFZpZXcgPSBnZXRQYXJlbnRJbmplY3RvclZpZXcocGFyZW50TG9jYXRpb24sIGxWaWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE5vIHBhcmVudHMgaGF2ZSBiZWVuIGZvdW5kLCBzbyB0aGVyZSBhcmUgbm8gYE5vZGVJbmplY3RvcmBzIHRvIGNvbnN1bHQuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGluamVjdG9ySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Tm9kZUluamVjdG9yKGxWaWV3LCBpbmplY3RvckluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IHROb2RlID0gbFZpZXdbVFZJRVddLmRhdGFbaW5qZWN0b3JJbmRleCArIDggLyogVE5PREUgKi9dO1xuICAgICAgICAgICAgcGF0aC5wdXNoKGJ1aWxkRGVidWdOb2RlKHROb2RlLCBsVmlldykpO1xuICAgICAgICAgICAgY29uc3QgcGFyZW50TG9jYXRpb24gPSBsVmlld1tpbmplY3RvckluZGV4ICsgOCAvKiBQQVJFTlQgKi9dO1xuICAgICAgICAgICAgaWYgKHBhcmVudExvY2F0aW9uID09PSBOT19QQVJFTlRfSU5KRUNUT1IpIHtcbiAgICAgICAgICAgICAgICBpbmplY3RvckluZGV4ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmplY3RvckluZGV4ID0gZ2V0UGFyZW50SW5qZWN0b3JJbmRleChwYXJlbnRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgbFZpZXcgPSBnZXRQYXJlbnRJbmplY3RvclZpZXcocGFyZW50TG9jYXRpb24sIGxWaWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG4gICAgZ2V0IHR5cGVfKCkge1xuICAgICAgICByZXR1cm4gdG9UTm9kZVR5cGVBc1N0cmluZyh0aGlzLnR5cGUpIHx8IGBUTm9kZVR5cGUuPyR7dGhpcy50eXBlfT9gO1xuICAgIH1cbiAgICBnZXQgZmxhZ3NfKCkge1xuICAgICAgICBjb25zdCBmbGFncyA9IFtdO1xuICAgICAgICBpZiAodGhpcy5mbGFncyAmIDE2IC8qIGhhc0NsYXNzSW5wdXQgKi8pXG4gICAgICAgICAgICBmbGFncy5wdXNoKCdUTm9kZUZsYWdzLmhhc0NsYXNzSW5wdXQnKTtcbiAgICAgICAgaWYgKHRoaXMuZmxhZ3MgJiA4IC8qIGhhc0NvbnRlbnRRdWVyeSAqLylcbiAgICAgICAgICAgIGZsYWdzLnB1c2goJ1ROb2RlRmxhZ3MuaGFzQ29udGVudFF1ZXJ5Jyk7XG4gICAgICAgIGlmICh0aGlzLmZsYWdzICYgMzIgLyogaGFzU3R5bGVJbnB1dCAqLylcbiAgICAgICAgICAgIGZsYWdzLnB1c2goJ1ROb2RlRmxhZ3MuaGFzU3R5bGVJbnB1dCcpO1xuICAgICAgICBpZiAodGhpcy5mbGFncyAmIDEyOCAvKiBoYXNIb3N0QmluZGluZ3MgKi8pXG4gICAgICAgICAgICBmbGFncy5wdXNoKCdUTm9kZUZsYWdzLmhhc0hvc3RCaW5kaW5ncycpO1xuICAgICAgICBpZiAodGhpcy5mbGFncyAmIDIgLyogaXNDb21wb25lbnRIb3N0ICovKVxuICAgICAgICAgICAgZmxhZ3MucHVzaCgnVE5vZGVGbGFncy5pc0NvbXBvbmVudEhvc3QnKTtcbiAgICAgICAgaWYgKHRoaXMuZmxhZ3MgJiAxIC8qIGlzRGlyZWN0aXZlSG9zdCAqLylcbiAgICAgICAgICAgIGZsYWdzLnB1c2goJ1ROb2RlRmxhZ3MuaXNEaXJlY3RpdmVIb3N0Jyk7XG4gICAgICAgIGlmICh0aGlzLmZsYWdzICYgNjQgLyogaXNEZXRhY2hlZCAqLylcbiAgICAgICAgICAgIGZsYWdzLnB1c2goJ1ROb2RlRmxhZ3MuaXNEZXRhY2hlZCcpO1xuICAgICAgICBpZiAodGhpcy5mbGFncyAmIDQgLyogaXNQcm9qZWN0ZWQgKi8pXG4gICAgICAgICAgICBmbGFncy5wdXNoKCdUTm9kZUZsYWdzLmlzUHJvamVjdGVkJyk7XG4gICAgICAgIHJldHVybiBmbGFncy5qb2luKCd8Jyk7XG4gICAgfVxuICAgIGdldCB0ZW1wbGF0ZV8oKSB7XG4gICAgICAgIGlmICh0aGlzLnR5cGUgJiAxIC8qIFRleHQgKi8pXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAgY29uc3QgYnVmID0gW107XG4gICAgICAgIGNvbnN0IHRhZ05hbWUgPSB0eXBlb2YgdGhpcy52YWx1ZSA9PT0gJ3N0cmluZycgJiYgdGhpcy52YWx1ZSB8fCB0aGlzLnR5cGVfO1xuICAgICAgICBidWYucHVzaCgnPCcsIHRhZ05hbWUpO1xuICAgICAgICBpZiAodGhpcy5mbGFncykge1xuICAgICAgICAgICAgYnVmLnB1c2goJyAnLCB0aGlzLmZsYWdzXyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXR0cnMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5hdHRycy5sZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0ck5hbWUgPSB0aGlzLmF0dHJzW2krK107XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhdHRyTmFtZSA9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0clZhbHVlID0gdGhpcy5hdHRyc1tpKytdO1xuICAgICAgICAgICAgICAgIGJ1Zi5wdXNoKCcgJywgYXR0ck5hbWUsICc9XCInLCBhdHRyVmFsdWUsICdcIicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJ1Zi5wdXNoKCc+Jyk7XG4gICAgICAgIHByb2Nlc3NUTm9kZUNoaWxkcmVuKHRoaXMuY2hpbGQsIGJ1Zik7XG4gICAgICAgIGJ1Zi5wdXNoKCc8LycsIHRhZ05hbWUsICc+Jyk7XG4gICAgICAgIHJldHVybiBidWYuam9pbignJyk7XG4gICAgfVxuICAgIGdldCBzdHlsZUJpbmRpbmdzXygpIHtcbiAgICAgICAgcmV0dXJuIHRvRGVidWdTdHlsZUJpbmRpbmcodGhpcywgZmFsc2UpO1xuICAgIH1cbiAgICBnZXQgY2xhc3NCaW5kaW5nc18oKSB7XG4gICAgICAgIHJldHVybiB0b0RlYnVnU3R5bGVCaW5kaW5nKHRoaXMsIHRydWUpO1xuICAgIH1cbiAgICBnZXQgcHJvdmlkZXJJbmRleFN0YXJ0XygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJJbmRleGVzICYgMTA0ODU3NSAvKiBQcm92aWRlcnNTdGFydEluZGV4TWFzayAqLztcbiAgICB9XG4gICAgZ2V0IHByb3ZpZGVySW5kZXhFbmRfKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlckluZGV4U3RhcnRfICtcbiAgICAgICAgICAgICh0aGlzLnByb3ZpZGVySW5kZXhlcyA+Pj4gMjAgLyogQ3B0Vmlld1Byb3ZpZGVyc0NvdW50U2hpZnQgKi8pO1xuICAgIH1cbn1cbmNvbnN0IFROb2RlRGVidWcgPSBUTm9kZTtcbmZ1bmN0aW9uIHRvRGVidWdTdHlsZUJpbmRpbmcodE5vZGUsIGlzQ2xhc3NCYXNlZCkge1xuICAgIGNvbnN0IHREYXRhID0gdE5vZGUudFZpZXdfLmRhdGE7XG4gICAgY29uc3QgYmluZGluZ3MgPSBbXTtcbiAgICBjb25zdCByYW5nZSA9IGlzQ2xhc3NCYXNlZCA/IHROb2RlLmNsYXNzQmluZGluZ3MgOiB0Tm9kZS5zdHlsZUJpbmRpbmdzO1xuICAgIGNvbnN0IHByZXYgPSBnZXRUU3R5bGluZ1JhbmdlUHJldihyYW5nZSk7XG4gICAgY29uc3QgbmV4dCA9IGdldFRTdHlsaW5nUmFuZ2VOZXh0KHJhbmdlKTtcbiAgICBsZXQgaXNUZW1wbGF0ZSA9IG5leHQgIT09IDA7XG4gICAgbGV0IGN1cnNvciA9IGlzVGVtcGxhdGUgPyBuZXh0IDogcHJldjtcbiAgICB3aGlsZSAoY3Vyc29yICE9PSAwKSB7XG4gICAgICAgIGNvbnN0IGl0ZW1LZXkgPSB0RGF0YVtjdXJzb3JdO1xuICAgICAgICBjb25zdCBpdGVtUmFuZ2UgPSB0RGF0YVtjdXJzb3IgKyAxXTtcbiAgICAgICAgYmluZGluZ3MudW5zaGlmdCh7XG4gICAgICAgICAgICBrZXk6IGl0ZW1LZXksXG4gICAgICAgICAgICBpbmRleDogY3Vyc29yLFxuICAgICAgICAgICAgaXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcbiAgICAgICAgICAgIHByZXZEdXBsaWNhdGU6IGdldFRTdHlsaW5nUmFuZ2VQcmV2RHVwbGljYXRlKGl0ZW1SYW5nZSksXG4gICAgICAgICAgICBuZXh0RHVwbGljYXRlOiBnZXRUU3R5bGluZ1JhbmdlTmV4dER1cGxpY2F0ZShpdGVtUmFuZ2UpLFxuICAgICAgICAgICAgbmV4dEluZGV4OiBnZXRUU3R5bGluZ1JhbmdlTmV4dChpdGVtUmFuZ2UpLFxuICAgICAgICAgICAgcHJldkluZGV4OiBnZXRUU3R5bGluZ1JhbmdlUHJldihpdGVtUmFuZ2UpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGN1cnNvciA9PT0gcHJldilcbiAgICAgICAgICAgIGlzVGVtcGxhdGUgPSBmYWxzZTtcbiAgICAgICAgY3Vyc29yID0gZ2V0VFN0eWxpbmdSYW5nZVByZXYoaXRlbVJhbmdlKTtcbiAgICB9XG4gICAgYmluZGluZ3MucHVzaCgoaXNDbGFzc0Jhc2VkID8gdE5vZGUucmVzaWR1YWxDbGFzc2VzIDogdE5vZGUucmVzaWR1YWxTdHlsZXMpIHx8IG51bGwpO1xuICAgIHJldHVybiBiaW5kaW5ncztcbn1cbmZ1bmN0aW9uIHByb2Nlc3NUTm9kZUNoaWxkcmVuKHROb2RlLCBidWYpIHtcbiAgICB3aGlsZSAodE5vZGUpIHtcbiAgICAgICAgYnVmLnB1c2godE5vZGUudGVtcGxhdGVfKTtcbiAgICAgICAgdE5vZGUgPSB0Tm9kZS5uZXh0O1xuICAgIH1cbn1cbmNsYXNzIFRWaWV3RGF0YSBleHRlbmRzIEFycmF5IHtcbn1cbmxldCBUVklFV0RBVEFfRU1QVFk7IC8vIGNhbid0IGluaXRpYWxpemUgaGVyZSBvciBpdCB3aWxsIG5vdCBiZSB0cmVlIHNoYWtlbiwgYmVjYXVzZVxuLy8gYExWaWV3YCBjb25zdHJ1Y3RvciBjb3VsZCBoYXZlIHNpZGUtZWZmZWN0cy5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjbG9uZXMgYSBibHVlcHJpbnQgYW5kIGNyZWF0ZXMgVERhdGEuXG4gKlxuICogU2ltcGxlIHNsaWNlIHdpbGwga2VlcCB0aGUgc2FtZSB0eXBlLCBhbmQgd2UgbmVlZCBpdCB0byBiZSBURGF0YVxuICovXG5mdW5jdGlvbiBjbG9uZVRvVFZpZXdEYXRhKGxpc3QpIHtcbiAgICBpZiAoVFZJRVdEQVRBX0VNUFRZID09PSB1bmRlZmluZWQpXG4gICAgICAgIFRWSUVXREFUQV9FTVBUWSA9IG5ldyBUVmlld0RhdGEoKTtcbiAgICByZXR1cm4gVFZJRVdEQVRBX0VNUFRZLmNvbmNhdChsaXN0KTtcbn1cbmNsYXNzIExWaWV3Qmx1ZXByaW50IGV4dGVuZHMgQXJyYXkge1xufVxuY2xhc3MgTWF0Y2hlc0FycmF5IGV4dGVuZHMgQXJyYXkge1xufVxuY2xhc3MgVFZpZXdDb21wb25lbnRzIGV4dGVuZHMgQXJyYXkge1xufVxuY2xhc3MgVE5vZGVMb2NhbE5hbWVzIGV4dGVuZHMgQXJyYXkge1xufVxuY2xhc3MgVE5vZGVJbml0aWFsSW5wdXRzIGV4dGVuZHMgQXJyYXkge1xufVxuY2xhc3MgTENsZWFudXAgZXh0ZW5kcyBBcnJheSB7XG59XG5jbGFzcyBUQ2xlYW51cCBleHRlbmRzIEFycmF5IHtcbn1cbmZ1bmN0aW9uIGF0dGFjaExWaWV3RGVidWcobFZpZXcpIHtcbiAgICBhdHRhY2hEZWJ1Z09iamVjdChsVmlldywgbmV3IExWaWV3RGVidWcobFZpZXcpKTtcbn1cbmZ1bmN0aW9uIGF0dGFjaExDb250YWluZXJEZWJ1ZyhsQ29udGFpbmVyKSB7XG4gICAgYXR0YWNoRGVidWdPYmplY3QobENvbnRhaW5lciwgbmV3IExDb250YWluZXJEZWJ1ZyhsQ29udGFpbmVyKSk7XG59XG5mdW5jdGlvbiB0b0RlYnVnKG9iaikge1xuICAgIGlmIChvYmopIHtcbiAgICAgICAgY29uc3QgZGVidWcgPSBvYmouZGVidWc7XG4gICAgICAgIGFzc2VydERlZmluZWQoZGVidWcsICdPYmplY3QgZG9lcyBub3QgaGF2ZSBhIGRlYnVnIHJlcHJlc2VudGF0aW9uLicpO1xuICAgICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cbn1cbi8qKlxuICogVXNlIHRoaXMgbWV0aG9kIHRvIHVud3JhcCBhIG5hdGl2ZSBlbGVtZW50IGluIGBMVmlld2AgYW5kIGNvbnZlcnQgaXQgaW50byBIVE1MIGZvciBlYXNpZXJcbiAqIHJlYWRpbmcuXG4gKlxuICogQHBhcmFtIHZhbHVlIHBvc3NpYmx5IHdyYXBwZWQgbmF0aXZlIERPTSBub2RlLlxuICogQHBhcmFtIGluY2x1ZGVDaGlsZHJlbiBJZiBgdHJ1ZWAgdGhlbiB0aGUgc2VyaWFsaXplZCBIVE1MIGZvcm0gd2lsbCBpbmNsdWRlIGNoaWxkIGVsZW1lbnRzXG4gKiAoc2FtZVxuICogYXMgYG91dGVySFRNTGApLiBJZiBgZmFsc2VgIHRoZW4gdGhlIHNlcmlhbGl6ZWQgSFRNTCBmb3JtIHdpbGwgb25seSBjb250YWluIHRoZSBlbGVtZW50XG4gKiBpdHNlbGZcbiAqICh3aWxsIG5vdCBzZXJpYWxpemUgY2hpbGQgZWxlbWVudHMpLlxuICovXG5mdW5jdGlvbiB0b0h0bWwodmFsdWUsIGluY2x1ZGVDaGlsZHJlbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgbm9kZSA9IHVud3JhcFJOb2RlKHZhbHVlKTtcbiAgICBpZiAobm9kZSkge1xuICAgICAgICBzd2l0Y2ggKG5vZGUubm9kZVR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgTm9kZS5URVhUX05PREU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBjYXNlIE5vZGUuQ09NTUVOVF9OT0RFOlxuICAgICAgICAgICAgICAgIHJldHVybiBgPCEtLSR7bm9kZS50ZXh0Q29udGVudH0tLT5gO1xuICAgICAgICAgICAgY2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRlckhUTUwgPSBub2RlLm91dGVySFRNTDtcbiAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZUNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRlckhUTUw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbm5lckhUTUwgPSAnPicgKyBub2RlLmlubmVySFRNTCArICc8JztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvdXRlckhUTUwuc3BsaXQoaW5uZXJIVE1MKVswXSkgKyAnPic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuY2xhc3MgTFZpZXdEZWJ1ZyB7XG4gICAgY29uc3RydWN0b3IoX3Jhd19sVmlldykge1xuICAgICAgICB0aGlzLl9yYXdfbFZpZXcgPSBfcmF3X2xWaWV3O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGbGFncyBhc3NvY2lhdGVkIHdpdGggdGhlIGBMVmlld2AgdW5wYWNrZWQgaW50byBhIG1vcmUgcmVhZGFibGUgc3RhdGUuXG4gICAgICovXG4gICAgZ2V0IGZsYWdzKCkge1xuICAgICAgICBjb25zdCBmbGFncyA9IHRoaXMuX3Jhd19sVmlld1tGTEFHU107XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBfX3Jhd19fZmxhZ3NfXzogZmxhZ3MsXG4gICAgICAgICAgICBpbml0UGhhc2VTdGF0ZTogZmxhZ3MgJiAzIC8qIEluaXRQaGFzZVN0YXRlTWFzayAqLyxcbiAgICAgICAgICAgIGNyZWF0aW9uTW9kZTogISEoZmxhZ3MgJiA0IC8qIENyZWF0aW9uTW9kZSAqLyksXG4gICAgICAgICAgICBmaXJzdFZpZXdQYXNzOiAhIShmbGFncyAmIDggLyogRmlyc3RMVmlld1Bhc3MgKi8pLFxuICAgICAgICAgICAgY2hlY2tBbHdheXM6ICEhKGZsYWdzICYgMTYgLyogQ2hlY2tBbHdheXMgKi8pLFxuICAgICAgICAgICAgZGlydHk6ICEhKGZsYWdzICYgNjQgLyogRGlydHkgKi8pLFxuICAgICAgICAgICAgYXR0YWNoZWQ6ICEhKGZsYWdzICYgMTI4IC8qIEF0dGFjaGVkICovKSxcbiAgICAgICAgICAgIGRlc3Ryb3llZDogISEoZmxhZ3MgJiAyNTYgLyogRGVzdHJveWVkICovKSxcbiAgICAgICAgICAgIGlzUm9vdDogISEoZmxhZ3MgJiA1MTIgLyogSXNSb290ICovKSxcbiAgICAgICAgICAgIGluZGV4V2l0aGluSW5pdFBoYXNlOiBmbGFncyA+PiAxMSAvKiBJbmRleFdpdGhpbkluaXRQaGFzZVNoaWZ0ICovLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICByZXR1cm4gdG9EZWJ1Zyh0aGlzLl9yYXdfbFZpZXdbUEFSRU5UXSk7XG4gICAgfVxuICAgIGdldCBob3N0SFRNTCgpIHtcbiAgICAgICAgcmV0dXJuIHRvSHRtbCh0aGlzLl9yYXdfbFZpZXdbSE9TVF0sIHRydWUpO1xuICAgIH1cbiAgICBnZXQgaHRtbCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm5vZGVzIHx8IFtdKS5tYXAobWFwVG9IVE1MKS5qb2luKCcnKTtcbiAgICB9XG4gICAgZ2V0IGNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdfbFZpZXdbQ09OVEVYVF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB0cmVlIG9mIG5vZGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBgTFZpZXdgLiBUaGUgbm9kZXMgaGF2ZSBiZWVuIG5vcm1hbGl6ZWQgaW50b1xuICAgICAqIGEgdHJlZSBzdHJ1Y3R1cmUgd2l0aCByZWxldmFudCBkZXRhaWxzIHB1bGxlZCBvdXQgZm9yIHJlYWRhYmlsaXR5LlxuICAgICAqL1xuICAgIGdldCBub2RlcygpIHtcbiAgICAgICAgY29uc3QgbFZpZXcgPSB0aGlzLl9yYXdfbFZpZXc7XG4gICAgICAgIGNvbnN0IHROb2RlID0gbFZpZXdbVFZJRVddLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHJldHVybiB0b0RlYnVnTm9kZXModE5vZGUsIGxWaWV3KTtcbiAgICB9XG4gICAgZ2V0IHRlbXBsYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50Vmlldy50ZW1wbGF0ZV87XG4gICAgfVxuICAgIGdldCB0VmlldygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd19sVmlld1tUVklFV107XG4gICAgfVxuICAgIGdldCBjbGVhbnVwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3X2xWaWV3W0NMRUFOVVBdO1xuICAgIH1cbiAgICBnZXQgaW5qZWN0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdfbFZpZXdbSU5KRUNUT1IkMV07XG4gICAgfVxuICAgIGdldCByZW5kZXJlckZhY3RvcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdfbFZpZXdbUkVOREVSRVJfRkFDVE9SWV07XG4gICAgfVxuICAgIGdldCByZW5kZXJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd19sVmlld1tSRU5ERVJFUl07XG4gICAgfVxuICAgIGdldCBzYW5pdGl6ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdfbFZpZXdbU0FOSVRJWkVSXTtcbiAgICB9XG4gICAgZ2V0IGNoaWxkSGVhZCgpIHtcbiAgICAgICAgcmV0dXJuIHRvRGVidWcodGhpcy5fcmF3X2xWaWV3W0NISUxEX0hFQURdKTtcbiAgICB9XG4gICAgZ2V0IG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0b0RlYnVnKHRoaXMuX3Jhd19sVmlld1tORVhUXSk7XG4gICAgfVxuICAgIGdldCBjaGlsZFRhaWwoKSB7XG4gICAgICAgIHJldHVybiB0b0RlYnVnKHRoaXMuX3Jhd19sVmlld1tDSElMRF9UQUlMXSk7XG4gICAgfVxuICAgIGdldCBkZWNsYXJhdGlvblZpZXcoKSB7XG4gICAgICAgIHJldHVybiB0b0RlYnVnKHRoaXMuX3Jhd19sVmlld1tERUNMQVJBVElPTl9WSUVXXSk7XG4gICAgfVxuICAgIGdldCBxdWVyaWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3X2xWaWV3W1FVRVJJRVNdO1xuICAgIH1cbiAgICBnZXQgdEhvc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdfbFZpZXdbVF9IT1NUXTtcbiAgICB9XG4gICAgZ2V0IGRlY2xzKCkge1xuICAgICAgICByZXR1cm4gdG9MVmlld1JhbmdlKHRoaXMudFZpZXcsIHRoaXMuX3Jhd19sVmlldywgSEVBREVSX09GRlNFVCwgdGhpcy50Vmlldy5iaW5kaW5nU3RhcnRJbmRleCk7XG4gICAgfVxuICAgIGdldCB2YXJzKCkge1xuICAgICAgICByZXR1cm4gdG9MVmlld1JhbmdlKHRoaXMudFZpZXcsIHRoaXMuX3Jhd19sVmlldywgdGhpcy50Vmlldy5iaW5kaW5nU3RhcnRJbmRleCwgdGhpcy50Vmlldy5leHBhbmRvU3RhcnRJbmRleCk7XG4gICAgfVxuICAgIGdldCBleHBhbmRvKCkge1xuICAgICAgICByZXR1cm4gdG9MVmlld1JhbmdlKHRoaXMudFZpZXcsIHRoaXMuX3Jhd19sVmlldywgdGhpcy50Vmlldy5leHBhbmRvU3RhcnRJbmRleCwgdGhpcy5fcmF3X2xWaWV3Lmxlbmd0aCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6ZWQgdmlldyBvZiBjaGlsZCB2aWV3cyAoYW5kIGNvbnRhaW5lcnMpIGF0dGFjaGVkIGF0IHRoaXMgbG9jYXRpb24uXG4gICAgICovXG4gICAgZ2V0IGNoaWxkVmlld3MoKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkVmlld3MgPSBbXTtcbiAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jaGlsZEhlYWQ7XG4gICAgICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgICAgICAgY2hpbGRWaWV3cy5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgIGNoaWxkID0gY2hpbGQubmV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hpbGRWaWV3cztcbiAgICB9XG59XG5mdW5jdGlvbiBtYXBUb0hUTUwobm9kZSkge1xuICAgIGlmIChub2RlLnR5cGUgPT09ICdFbGVtZW50Q29udGFpbmVyJykge1xuICAgICAgICByZXR1cm4gKG5vZGUuY2hpbGRyZW4gfHwgW10pLm1hcChtYXBUb0hUTUwpLmpvaW4oJycpO1xuICAgIH1cbiAgICBlbHNlIGlmIChub2RlLnR5cGUgPT09ICdJY3VDb250YWluZXInKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGltcGxlbWVudGVkJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdG9IdG1sKG5vZGUubmF0aXZlLCB0cnVlKSB8fCAnJztcbiAgICB9XG59XG5mdW5jdGlvbiB0b0xWaWV3UmFuZ2UodFZpZXcsIGxWaWV3LCBzdGFydCwgZW5kKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBbXTtcbiAgICBmb3IgKGxldCBpbmRleCA9IHN0YXJ0OyBpbmRleCA8IGVuZDsgaW5kZXgrKykge1xuICAgICAgICBjb250ZW50LnB1c2goeyBpbmRleDogaW5kZXgsIHQ6IHRWaWV3LmRhdGFbaW5kZXhdLCBsOiBsVmlld1tpbmRleF0gfSk7XG4gICAgfVxuICAgIHJldHVybiB7IHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQsIGxlbmd0aDogZW5kIC0gc3RhcnQsIGNvbnRlbnQ6IGNvbnRlbnQgfTtcbn1cbi8qKlxuICogVHVybnMgYSBmbGF0IGxpc3Qgb2Ygbm9kZXMgaW50byBhIHRyZWUgYnkgd2Fsa2luZyB0aGUgYXNzb2NpYXRlZCBgVE5vZGVgIHRyZWUuXG4gKlxuICogQHBhcmFtIHROb2RlXG4gKiBAcGFyYW0gbFZpZXdcbiAqL1xuZnVuY3Rpb24gdG9EZWJ1Z05vZGVzKHROb2RlLCBsVmlldykge1xuICAgIGlmICh0Tm9kZSkge1xuICAgICAgICBjb25zdCBkZWJ1Z05vZGVzID0gW107XG4gICAgICAgIGxldCB0Tm9kZUN1cnNvciA9IHROb2RlO1xuICAgICAgICB3aGlsZSAodE5vZGVDdXJzb3IpIHtcbiAgICAgICAgICAgIGRlYnVnTm9kZXMucHVzaChidWlsZERlYnVnTm9kZSh0Tm9kZUN1cnNvciwgbFZpZXcpKTtcbiAgICAgICAgICAgIHROb2RlQ3Vyc29yID0gdE5vZGVDdXJzb3IubmV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVidWdOb2RlcztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59XG5mdW5jdGlvbiBidWlsZERlYnVnTm9kZSh0Tm9kZSwgbFZpZXcpIHtcbiAgICBjb25zdCByYXdWYWx1ZSA9IGxWaWV3W3ROb2RlLmluZGV4XTtcbiAgICBjb25zdCBuYXRpdmUgPSB1bndyYXBSTm9kZShyYXdWYWx1ZSk7XG4gICAgY29uc3QgZmFjdG9yaWVzID0gW107XG4gICAgY29uc3QgaW5zdGFuY2VzID0gW107XG4gICAgY29uc3QgdFZpZXcgPSBsVmlld1tUVklFV107XG4gICAgZm9yIChsZXQgaSA9IHROb2RlLmRpcmVjdGl2ZVN0YXJ0OyBpIDwgdE5vZGUuZGlyZWN0aXZlRW5kOyBpKyspIHtcbiAgICAgICAgY29uc3QgZGVmID0gdFZpZXcuZGF0YVtpXTtcbiAgICAgICAgZmFjdG9yaWVzLnB1c2goZGVmLnR5cGUpO1xuICAgICAgICBpbnN0YW5jZXMucHVzaChsVmlld1tpXSk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGh0bWw6IHRvSHRtbChuYXRpdmUpLFxuICAgICAgICB0eXBlOiB0b1ROb2RlVHlwZUFzU3RyaW5nKHROb2RlLnR5cGUpLFxuICAgICAgICB0Tm9kZSxcbiAgICAgICAgbmF0aXZlOiBuYXRpdmUsXG4gICAgICAgIGNoaWxkcmVuOiB0b0RlYnVnTm9kZXModE5vZGUuY2hpbGQsIGxWaWV3KSxcbiAgICAgICAgZmFjdG9yaWVzLFxuICAgICAgICBpbnN0YW5jZXMsXG4gICAgICAgIGluamVjdG9yOiBidWlsZE5vZGVJbmplY3RvckRlYnVnKHROb2RlLCB0VmlldywgbFZpZXcpLFxuICAgICAgICBnZXQgaW5qZWN0b3JSZXNvbHV0aW9uUGF0aCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0Tm9kZS5kZWJ1Z05vZGVJbmplY3RvclBhdGgobFZpZXcpO1xuICAgICAgICB9LFxuICAgIH07XG59XG5mdW5jdGlvbiBidWlsZE5vZGVJbmplY3RvckRlYnVnKHROb2RlLCB0VmlldywgbFZpZXcpIHtcbiAgICBjb25zdCB2aWV3UHJvdmlkZXJzID0gW107XG4gICAgZm9yIChsZXQgaSA9IHROb2RlLnByb3ZpZGVySW5kZXhTdGFydF87IGkgPCB0Tm9kZS5wcm92aWRlckluZGV4RW5kXzsgaSsrKSB7XG4gICAgICAgIHZpZXdQcm92aWRlcnMucHVzaCh0Vmlldy5kYXRhW2ldKTtcbiAgICB9XG4gICAgY29uc3QgcHJvdmlkZXJzID0gW107XG4gICAgZm9yIChsZXQgaSA9IHROb2RlLnByb3ZpZGVySW5kZXhFbmRfOyBpIDwgdE5vZGUuZGlyZWN0aXZlRW5kOyBpKyspIHtcbiAgICAgICAgcHJvdmlkZXJzLnB1c2godFZpZXcuZGF0YVtpXSk7XG4gICAgfVxuICAgIGNvbnN0IG5vZGVJbmplY3RvckRlYnVnID0ge1xuICAgICAgICBibG9vbTogdG9CbG9vbShsVmlldywgdE5vZGUuaW5qZWN0b3JJbmRleCksXG4gICAgICAgIGN1bXVsYXRpdmVCbG9vbTogdG9CbG9vbSh0Vmlldy5kYXRhLCB0Tm9kZS5pbmplY3RvckluZGV4KSxcbiAgICAgICAgcHJvdmlkZXJzLFxuICAgICAgICB2aWV3UHJvdmlkZXJzLFxuICAgICAgICBwYXJlbnRJbmplY3RvckluZGV4OiBsVmlld1t0Tm9kZS5wcm92aWRlckluZGV4U3RhcnRfIC0gMV0sXG4gICAgfTtcbiAgICByZXR1cm4gbm9kZUluamVjdG9yRGVidWc7XG59XG4vKipcbiAqIENvbnZlcnQgYSBudW1iZXIgYXQgYGlkeGAgbG9jYXRpb24gaW4gYGFycmF5YCBpbnRvIGJpbmFyeSByZXByZXNlbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gYXJyYXlcbiAqIEBwYXJhbSBpZHhcbiAqL1xuZnVuY3Rpb24gYmluYXJ5KGFycmF5LCBpZHgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IGFycmF5W2lkeF07XG4gICAgLy8gSWYgbm90IGEgbnVtYmVyIHdlIHByaW50IDggYD9gIHRvIHJldGFpbiBhbGlnbm1lbnQgYnV0IGxldCB1c2VyIGtub3cgdGhhdCBpdCB3YXMgY2FsbGVkIG9uXG4gICAgLy8gd3JvbmcgdHlwZS5cbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJylcbiAgICAgICAgcmV0dXJuICc/Pz8/Pz8/Pyc7XG4gICAgLy8gV2UgcHJlZml4IDBzIHNvIHRoYXQgd2UgaGF2ZSBjb25zdGFudCBsZW5ndGggbnVtYmVyXG4gICAgY29uc3QgdGV4dCA9ICcwMDAwMDAwMCcgKyB2YWx1ZS50b1N0cmluZygyKTtcbiAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcodGV4dC5sZW5ndGggLSA4KTtcbn1cbi8qKlxuICogQ29udmVydCBhIGJsb29tIGZpbHRlciBhdCBsb2NhdGlvbiBgaWR4YCBpbiBgYXJyYXlgIGludG8gYmluYXJ5IHJlcHJlc2VudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBhcnJheVxuICogQHBhcmFtIGlkeFxuICovXG5mdW5jdGlvbiB0b0Jsb29tKGFycmF5LCBpZHgpIHtcbiAgICBpZiAoaWR4IDwgMCkge1xuICAgICAgICByZXR1cm4gJ05PX05PREVfSU5KRUNUT1InO1xuICAgIH1cbiAgICByZXR1cm4gYCR7YmluYXJ5KGFycmF5LCBpZHggKyA3KX1fJHtiaW5hcnkoYXJyYXksIGlkeCArIDYpfV8ke2JpbmFyeShhcnJheSwgaWR4ICsgNSl9XyR7YmluYXJ5KGFycmF5LCBpZHggKyA0KX1fJHtiaW5hcnkoYXJyYXksIGlkeCArIDMpfV8ke2JpbmFyeShhcnJheSwgaWR4ICsgMil9XyR7YmluYXJ5KGFycmF5LCBpZHggKyAxKX1fJHtiaW5hcnkoYXJyYXksIGlkeCArIDApfWA7XG59XG5jbGFzcyBMQ29udGFpbmVyRGVidWcge1xuICAgIGNvbnN0cnVjdG9yKF9yYXdfbENvbnRhaW5lcikge1xuICAgICAgICB0aGlzLl9yYXdfbENvbnRhaW5lciA9IF9yYXdfbENvbnRhaW5lcjtcbiAgICB9XG4gICAgZ2V0IGhhc1RyYW5zcGxhbnRlZFZpZXdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3X2xDb250YWluZXJbSEFTX1RSQU5TUExBTlRFRF9WSUVXU107XG4gICAgfVxuICAgIGdldCB2aWV3cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd19sQ29udGFpbmVyLnNsaWNlKENPTlRBSU5FUl9IRUFERVJfT0ZGU0VUKVxuICAgICAgICAgICAgLm1hcCh0b0RlYnVnKTtcbiAgICB9XG4gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRvRGVidWcodGhpcy5fcmF3X2xDb250YWluZXJbUEFSRU5UXSk7XG4gICAgfVxuICAgIGdldCBtb3ZlZFZpZXdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3X2xDb250YWluZXJbTU9WRURfVklFV1NdO1xuICAgIH1cbiAgICBnZXQgaG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd19sQ29udGFpbmVyW0hPU1RdO1xuICAgIH1cbiAgICBnZXQgbmF0aXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3X2xDb250YWluZXJbTkFUSVZFXTtcbiAgICB9XG4gICAgZ2V0IG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0b0RlYnVnKHRoaXMuX3Jhd19sQ29udGFpbmVyW05FWFRdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBwZXJtYW5lbnQgbWFya2VyIHByb21pc2Ugd2hpY2ggc2lnbmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgQ0QgdHJlZSBpc1xuICogY2xlYW4uXG4gKi9cbmNvbnN0IF9DTEVBTl9QUk9NSVNFID0gKCgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSkoKTtcbi8qKlxuICogSW52b2tlIGBIb3N0QmluZGluZ3NGdW5jdGlvbmBzIGZvciB2aWV3LlxuICpcbiAqIFRoaXMgbWV0aG9kcyBleGVjdXRlcyBgVFZpZXcuaG9zdEJpbmRpbmdPcENvZGVzYC4gSXQgaXMgdXNlZCB0byBleGVjdXRlIHRoZVxuICogYEhvc3RCaW5kaW5nc0Z1bmN0aW9uYHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IGBMVmlld2AuXG4gKlxuICogQHBhcmFtIHRWaWV3IEN1cnJlbnQgYFRWaWV3YC5cbiAqIEBwYXJhbSBsVmlldyBDdXJyZW50IGBMVmlld2AuXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NIb3N0QmluZGluZ09wQ29kZXModFZpZXcsIGxWaWV3KSB7XG4gICAgY29uc3QgaG9zdEJpbmRpbmdPcENvZGVzID0gdFZpZXcuaG9zdEJpbmRpbmdPcENvZGVzO1xuICAgIGlmIChob3N0QmluZGluZ09wQ29kZXMgPT09IG51bGwpXG4gICAgICAgIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhvc3RCaW5kaW5nT3BDb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgb3BDb2RlID0gaG9zdEJpbmRpbmdPcENvZGVzW2ldO1xuICAgICAgICAgICAgaWYgKG9wQ29kZSA8IDApIHtcbiAgICAgICAgICAgICAgICAvLyBOZWdhdGl2ZSBudW1iZXJzIGFyZSBlbGVtZW50IGluZGV4ZXMuXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRJbmRleCh+b3BDb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFBvc2l0aXZlIG51bWJlcnMgYXJlIE51bWJlclR1cGxlIHdoaWNoIHN0b3JlIGJpbmRpbmdSb290SW5kZXggYW5kIGRpcmVjdGl2ZUluZGV4LlxuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZUlkeCA9IG9wQ29kZTtcbiAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5nUm9vdEluZHggPSBob3N0QmluZGluZ09wQ29kZXNbKytpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBob3N0QmluZGluZ0ZuID0gaG9zdEJpbmRpbmdPcENvZGVzWysraV07XG4gICAgICAgICAgICAgICAgc2V0QmluZGluZ1Jvb3RGb3JIb3N0QmluZGluZ3MoYmluZGluZ1Jvb3RJbmR4LCBkaXJlY3RpdmVJZHgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBsVmlld1tkaXJlY3RpdmVJZHhdO1xuICAgICAgICAgICAgICAgIGhvc3RCaW5kaW5nRm4oMiAvKiBVcGRhdGUgKi8sIGNvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICBzZXRTZWxlY3RlZEluZGV4KC0xKTtcbiAgICB9XG59XG4vKiogUmVmcmVzaGVzIGFsbCBjb250ZW50IHF1ZXJpZXMgZGVjbGFyZWQgYnkgZGlyZWN0aXZlcyBpbiBhIGdpdmVuIHZpZXcgKi9cbmZ1bmN0aW9uIHJlZnJlc2hDb250ZW50UXVlcmllcyh0VmlldywgbFZpZXcpIHtcbiAgICBjb25zdCBjb250ZW50UXVlcmllcyA9IHRWaWV3LmNvbnRlbnRRdWVyaWVzO1xuICAgIGlmIChjb250ZW50UXVlcmllcyAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRlbnRRdWVyaWVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVN0YXJ0SWR4ID0gY29udGVudFF1ZXJpZXNbaV07XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmVEZWZJZHggPSBjb250ZW50UXVlcmllc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoZGlyZWN0aXZlRGVmSWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZURlZiA9IHRWaWV3LmRhdGFbZGlyZWN0aXZlRGVmSWR4XTtcbiAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChkaXJlY3RpdmVEZWYsICdEaXJlY3RpdmVEZWYgbm90IGZvdW5kLicpO1xuICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICBhc3NlcnREZWZpbmVkKGRpcmVjdGl2ZURlZi5jb250ZW50UXVlcmllcywgJ2NvbnRlbnRRdWVyaWVzIGZ1bmN0aW9uIHNob3VsZCBiZSBkZWZpbmVkJyk7XG4gICAgICAgICAgICAgICAgc2V0Q3VycmVudFF1ZXJ5SW5kZXgocXVlcnlTdGFydElkeCk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlRGVmLmNvbnRlbnRRdWVyaWVzKDIgLyogVXBkYXRlICovLCBsVmlld1tkaXJlY3RpdmVEZWZJZHhdLCBkaXJlY3RpdmVEZWZJZHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqIFJlZnJlc2hlcyBjaGlsZCBjb21wb25lbnRzIGluIHRoZSBjdXJyZW50IHZpZXcgKHVwZGF0ZSBtb2RlKS4gKi9cbmZ1bmN0aW9uIHJlZnJlc2hDaGlsZENvbXBvbmVudHMoaG9zdExWaWV3LCBjb21wb25lbnRzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wb25lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlZnJlc2hDb21wb25lbnQoaG9zdExWaWV3LCBjb21wb25lbnRzW2ldKTtcbiAgICB9XG59XG4vKiogUmVuZGVycyBjaGlsZCBjb21wb25lbnRzIGluIHRoZSBjdXJyZW50IHZpZXcgKGNyZWF0aW9uIG1vZGUpLiAqL1xuZnVuY3Rpb24gcmVuZGVyQ2hpbGRDb21wb25lbnRzKGhvc3RMVmlldywgY29tcG9uZW50cykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZW5kZXJDb21wb25lbnQkMShob3N0TFZpZXcsIGNvbXBvbmVudHNbaV0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZUxWaWV3KHBhcmVudExWaWV3LCB0VmlldywgY29udGV4dCwgZmxhZ3MsIGhvc3QsIHRIb3N0Tm9kZSwgcmVuZGVyZXJGYWN0b3J5LCByZW5kZXJlciwgc2FuaXRpemVyLCBpbmplY3Rvcikge1xuICAgIGNvbnN0IGxWaWV3ID0gbmdEZXZNb2RlID8gY2xvbmVUb0xWaWV3RnJvbVRWaWV3Qmx1ZXByaW50KHRWaWV3KSA6IHRWaWV3LmJsdWVwcmludC5zbGljZSgpO1xuICAgIGxWaWV3W0hPU1RdID0gaG9zdDtcbiAgICBsVmlld1tGTEFHU10gPSBmbGFncyB8IDQgLyogQ3JlYXRpb25Nb2RlICovIHwgMTI4IC8qIEF0dGFjaGVkICovIHwgOCAvKiBGaXJzdExWaWV3UGFzcyAqLztcbiAgICByZXNldFByZU9yZGVySG9va0ZsYWdzKGxWaWV3KTtcbiAgICBuZ0Rldk1vZGUgJiYgdFZpZXcuZGVjbFROb2RlICYmIHBhcmVudExWaWV3ICYmIGFzc2VydFROb2RlRm9yTFZpZXcodFZpZXcuZGVjbFROb2RlLCBwYXJlbnRMVmlldyk7XG4gICAgbFZpZXdbUEFSRU5UXSA9IGxWaWV3W0RFQ0xBUkFUSU9OX1ZJRVddID0gcGFyZW50TFZpZXc7XG4gICAgbFZpZXdbQ09OVEVYVF0gPSBjb250ZXh0O1xuICAgIGxWaWV3W1JFTkRFUkVSX0ZBQ1RPUlldID0gKHJlbmRlcmVyRmFjdG9yeSB8fCBwYXJlbnRMVmlldyAmJiBwYXJlbnRMVmlld1tSRU5ERVJFUl9GQUNUT1JZXSk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQobFZpZXdbUkVOREVSRVJfRkFDVE9SWV0sICdSZW5kZXJlckZhY3RvcnkgaXMgcmVxdWlyZWQnKTtcbiAgICBsVmlld1tSRU5ERVJFUl0gPSAocmVuZGVyZXIgfHwgcGFyZW50TFZpZXcgJiYgcGFyZW50TFZpZXdbUkVOREVSRVJdKTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChsVmlld1tSRU5ERVJFUl0sICdSZW5kZXJlciBpcyByZXF1aXJlZCcpO1xuICAgIGxWaWV3W1NBTklUSVpFUl0gPSBzYW5pdGl6ZXIgfHwgcGFyZW50TFZpZXcgJiYgcGFyZW50TFZpZXdbU0FOSVRJWkVSXSB8fCBudWxsO1xuICAgIGxWaWV3W0lOSkVDVE9SJDFdID0gaW5qZWN0b3IgfHwgcGFyZW50TFZpZXcgJiYgcGFyZW50TFZpZXdbSU5KRUNUT1IkMV0gfHwgbnVsbDtcbiAgICBsVmlld1tUX0hPU1RdID0gdEhvc3ROb2RlO1xuICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICBhc3NlcnRFcXVhbCh0Vmlldy50eXBlID09IDIgLyogRW1iZWRkZWQgKi8gPyBwYXJlbnRMVmlldyAhPT0gbnVsbCA6IHRydWUsIHRydWUsICdFbWJlZGRlZCB2aWV3cyBtdXN0IGhhdmUgcGFyZW50TFZpZXcnKTtcbiAgICBsVmlld1tERUNMQVJBVElPTl9DT01QT05FTlRfVklFV10gPVxuICAgICAgICB0Vmlldy50eXBlID09IDIgLyogRW1iZWRkZWQgKi8gPyBwYXJlbnRMVmlld1tERUNMQVJBVElPTl9DT01QT05FTlRfVklFV10gOiBsVmlldztcbiAgICBuZ0Rldk1vZGUgJiYgYXR0YWNoTFZpZXdEZWJ1ZyhsVmlldyk7XG4gICAgcmV0dXJuIGxWaWV3O1xufVxuZnVuY3Rpb24gZ2V0T3JDcmVhdGVUTm9kZSh0VmlldywgaW5kZXgsIHR5cGUsIG5hbWUsIGF0dHJzKSB7XG4gICAgbmdEZXZNb2RlICYmIGluZGV4ICE9PSAwICYmIC8vIDAgYXJlIGJvZ3VzIG5vZGVzIGFuZCB0aGV5IGFyZSBPSy4gU2VlIGBjcmVhdGVDb250YWluZXJSZWZgIGluXG4gICAgICAgIC8vIGB2aWV3X2VuZ2luZV9jb21wYXRpYmlsaXR5YCBmb3IgYWRkaXRpb25hbCBjb250ZXh0LlxuICAgICAgICBhc3NlcnRHcmVhdGVyVGhhbk9yRXF1YWwoaW5kZXgsIEhFQURFUl9PRkZTRVQsICdUTm9kZXMgY2FuXFwndCBiZSBpbiB0aGUgTFZpZXcgaGVhZGVyLicpO1xuICAgIC8vIEtlZXAgdGhpcyBmdW5jdGlvbiBzaG9ydCwgc28gdGhhdCB0aGUgVk0gd2lsbCBpbmxpbmUgaXQuXG4gICAgbmdEZXZNb2RlICYmIGFzc2VydFB1cmVUTm9kZVR5cGUodHlwZSk7XG4gICAgbGV0IHROb2RlID0gdFZpZXcuZGF0YVtpbmRleF07XG4gICAgaWYgKHROb2RlID09PSBudWxsKSB7XG4gICAgICAgIHROb2RlID0gY3JlYXRlVE5vZGVBdEluZGV4KHRWaWV3LCBpbmRleCwgdHlwZSwgbmFtZSwgYXR0cnMpO1xuICAgICAgICBpZiAoaXNJbkkxOG5CbG9jaygpKSB7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgaW4gaTE4biBibG9jayB0aGVuIGFsbCBlbGVtZW50cyBzaG91bGQgYmUgcHJlIGRlY2xhcmVkIHRocm91Z2ggYFBsYWNlaG9sZGVyYFxuICAgICAgICAgICAgLy8gU2VlIGBUTm9kZVR5cGUuUGxhY2Vob2xkZXJgIGFuZCBgTEZyYW1lLmluSTE4bmAgZm9yIG1vcmUgY29udGV4dC5cbiAgICAgICAgICAgIC8vIElmIHRoZSBgVE5vZGVgIHdhcyBub3QgcHJlLWRlY2xhcmVkIHRoYW4gaXQgbWVhbnMgaXQgd2FzIG5vdCBtZW50aW9uZWQgd2hpY2ggbWVhbnMgaXQgd2FzXG4gICAgICAgICAgICAvLyByZW1vdmVkLCBzbyB3ZSBtYXJrIGl0IGFzIGRldGFjaGVkLlxuICAgICAgICAgICAgdE5vZGUuZmxhZ3MgfD0gNjQgLyogaXNEZXRhY2hlZCAqLztcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0Tm9kZS50eXBlICYgNjQgLyogUGxhY2Vob2xkZXIgKi8pIHtcbiAgICAgICAgdE5vZGUudHlwZSA9IHR5cGU7XG4gICAgICAgIHROb2RlLnZhbHVlID0gbmFtZTtcbiAgICAgICAgdE5vZGUuYXR0cnMgPSBhdHRycztcbiAgICAgICAgY29uc3QgcGFyZW50ID0gZ2V0Q3VycmVudFBhcmVudFROb2RlKCk7XG4gICAgICAgIHROb2RlLmluamVjdG9ySW5kZXggPSBwYXJlbnQgPT09IG51bGwgPyAtMSA6IHBhcmVudC5pbmplY3RvckluZGV4O1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VE5vZGVGb3JUVmlldyh0Tm9kZSwgdFZpZXcpO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RXF1YWwoaW5kZXgsIHROb2RlLmluZGV4LCAnRXhwZWN0aW5nIHNhbWUgaW5kZXgnKTtcbiAgICB9XG4gICAgc2V0Q3VycmVudFROb2RlKHROb2RlLCB0cnVlKTtcbiAgICByZXR1cm4gdE5vZGU7XG59XG5mdW5jdGlvbiBjcmVhdGVUTm9kZUF0SW5kZXgodFZpZXcsIGluZGV4LCB0eXBlLCBuYW1lLCBhdHRycykge1xuICAgIGNvbnN0IGN1cnJlbnRUTm9kZSA9IGdldEN1cnJlbnRUTm9kZVBsYWNlaG9sZGVyT2soKTtcbiAgICBjb25zdCBpc1BhcmVudCA9IGlzQ3VycmVudFROb2RlUGFyZW50KCk7XG4gICAgY29uc3QgcGFyZW50ID0gaXNQYXJlbnQgPyBjdXJyZW50VE5vZGUgOiBjdXJyZW50VE5vZGUgJiYgY3VycmVudFROb2RlLnBhcmVudDtcbiAgICAvLyBQYXJlbnRzIGNhbm5vdCBjcm9zcyBjb21wb25lbnQgYm91bmRhcmllcyBiZWNhdXNlIGNvbXBvbmVudHMgd2lsbCBiZSB1c2VkIGluIG11bHRpcGxlIHBsYWNlcy5cbiAgICBjb25zdCB0Tm9kZSA9IHRWaWV3LmRhdGFbaW5kZXhdID1cbiAgICAgICAgY3JlYXRlVE5vZGUodFZpZXcsIHBhcmVudCwgdHlwZSwgaW5kZXgsIG5hbWUsIGF0dHJzKTtcbiAgICAvLyBBc3NpZ24gYSBwb2ludGVyIHRvIHRoZSBmaXJzdCBjaGlsZCBub2RlIG9mIGEgZ2l2ZW4gdmlldy4gVGhlIGZpcnN0IG5vZGUgaXMgbm90IGFsd2F5cyB0aGUgb25lXG4gICAgLy8gYXQgaW5kZXggMCwgaW4gY2FzZSBvZiBpMThuLCBpbmRleCAwIGNhbiBiZSB0aGUgaW5zdHJ1Y3Rpb24gYGkxOG5TdGFydGAgYW5kIHRoZSBmaXJzdCBub2RlIGhhc1xuICAgIC8vIHRoZSBpbmRleCAxIG9yIG1vcmUsIHNvIHdlIGNhbid0IGp1c3QgY2hlY2sgbm9kZSBpbmRleC5cbiAgICBpZiAodFZpZXcuZmlyc3RDaGlsZCA9PT0gbnVsbCkge1xuICAgICAgICB0Vmlldy5maXJzdENoaWxkID0gdE5vZGU7XG4gICAgfVxuICAgIGlmIChjdXJyZW50VE5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKGlzUGFyZW50KSB7XG4gICAgICAgICAgICAvLyBGSVhNRShtaXNrbyk6IFRoaXMgbG9naWMgbG9va3MgdW5uZWNlc3NhcmlseSBjb21wbGljYXRlZC4gQ291bGQgd2Ugc2ltcGxpZnk/XG4gICAgICAgICAgICBpZiAoY3VycmVudFROb2RlLmNoaWxkID09IG51bGwgJiYgdE5vZGUucGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgYXJlIGluIHRoZSBzYW1lIHZpZXcsIHdoaWNoIG1lYW5zIHdlIGFyZSBhZGRpbmcgY29udGVudCBub2RlIHRvIHRoZSBwYXJlbnQgdmlldy5cbiAgICAgICAgICAgICAgICBjdXJyZW50VE5vZGUuY2hpbGQgPSB0Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50VE5vZGUubmV4dCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIGkxOG4gdGhlIGBjdXJyZW50VE5vZGVgIG1heSBhbHJlYWR5IGJlIGxpbmtlZCwgaW4gd2hpY2ggY2FzZSB3ZSBkb24ndCB3YW50XG4gICAgICAgICAgICAgICAgLy8gdG8gYnJlYWsgdGhlIGxpbmtzIHdoaWNoIGkxOG4gY3JlYXRlZC5cbiAgICAgICAgICAgICAgICBjdXJyZW50VE5vZGUubmV4dCA9IHROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0Tm9kZTtcbn1cbi8qKlxuICogV2hlbiBlbGVtZW50cyBhcmUgY3JlYXRlZCBkeW5hbWljYWxseSBhZnRlciBhIHZpZXcgYmx1ZXByaW50IGlzIGNyZWF0ZWQgKGUuZy4gdGhyb3VnaFxuICogaTE4bkFwcGx5KCkpLCB3ZSBuZWVkIHRvIGFkanVzdCB0aGUgYmx1ZXByaW50IGZvciBmdXR1cmVcbiAqIHRlbXBsYXRlIHBhc3Nlcy5cbiAqXG4gKiBAcGFyYW0gdFZpZXcgYFRWaWV3YCBhc3NvY2lhdGVkIHdpdGggYExWaWV3YFxuICogQHBhcmFtIGxWaWV3IFRoZSBgTFZpZXdgIGNvbnRhaW5pbmcgdGhlIGJsdWVwcmludCB0byBhZGp1c3RcbiAqIEBwYXJhbSBudW1TbG90c1RvQWxsb2MgVGhlIG51bWJlciBvZiBzbG90cyB0byBhbGxvYyBpbiB0aGUgTFZpZXcsIHNob3VsZCBiZSA+MFxuICogQHBhcmFtIGluaXRpYWxWYWx1ZSBJbml0aWFsIHZhbHVlIHRvIHN0b3JlIGluIGJsdWVwcmludFxuICovXG5mdW5jdGlvbiBhbGxvY0V4cGFuZG8odFZpZXcsIGxWaWV3LCBudW1TbG90c1RvQWxsb2MsIGluaXRpYWxWYWx1ZSkge1xuICAgIGlmIChudW1TbG90c1RvQWxsb2MgPT09IDApXG4gICAgICAgIHJldHVybiAtMTtcbiAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgIGFzc2VydEZpcnN0Q3JlYXRlUGFzcyh0Vmlldyk7XG4gICAgICAgIGFzc2VydFNhbWUodFZpZXcsIGxWaWV3W1RWSUVXXSwgJ2BMVmlld2AgbXVzdCBiZSBhc3NvY2lhdGVkIHdpdGggYFRWaWV3YCEnKTtcbiAgICAgICAgYXNzZXJ0RXF1YWwodFZpZXcuZGF0YS5sZW5ndGgsIGxWaWV3Lmxlbmd0aCwgJ0V4cGVjdGluZyBMVmlldyB0byBiZSBzYW1lIHNpemUgYXMgVFZpZXcnKTtcbiAgICAgICAgYXNzZXJ0RXF1YWwodFZpZXcuZGF0YS5sZW5ndGgsIHRWaWV3LmJsdWVwcmludC5sZW5ndGgsICdFeHBlY3RpbmcgQmx1ZXByaW50IHRvIGJlIHNhbWUgc2l6ZSBhcyBUVmlldycpO1xuICAgICAgICBhc3NlcnRGaXJzdFVwZGF0ZVBhc3ModFZpZXcpO1xuICAgIH1cbiAgICBjb25zdCBhbGxvY0lkeCA9IGxWaWV3Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVNsb3RzVG9BbGxvYzsgaSsrKSB7XG4gICAgICAgIGxWaWV3LnB1c2goaW5pdGlhbFZhbHVlKTtcbiAgICAgICAgdFZpZXcuYmx1ZXByaW50LnB1c2goaW5pdGlhbFZhbHVlKTtcbiAgICAgICAgdFZpZXcuZGF0YS5wdXNoKG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gYWxsb2NJZHg7XG59XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLyBSZW5kZXJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKipcbiAqIFByb2Nlc3NlcyBhIHZpZXcgaW4gdGhlIGNyZWF0aW9uIG1vZGUuIFRoaXMgaW5jbHVkZXMgYSBudW1iZXIgb2Ygc3RlcHMgaW4gYSBzcGVjaWZpYyBvcmRlcjpcbiAqIC0gY3JlYXRpbmcgdmlldyBxdWVyeSBmdW5jdGlvbnMgKGlmIGFueSk7XG4gKiAtIGV4ZWN1dGluZyBhIHRlbXBsYXRlIGZ1bmN0aW9uIGluIHRoZSBjcmVhdGlvbiBtb2RlO1xuICogLSB1cGRhdGluZyBzdGF0aWMgcXVlcmllcyAoaWYgYW55KTtcbiAqIC0gY3JlYXRpbmcgY2hpbGQgY29tcG9uZW50cyBkZWZpbmVkIGluIGEgZ2l2ZW4gdmlldy5cbiAqL1xuZnVuY3Rpb24gcmVuZGVyVmlldyh0VmlldywgbFZpZXcsIGNvbnRleHQpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RXF1YWwoaXNDcmVhdGlvbk1vZGUobFZpZXcpLCB0cnVlLCAnU2hvdWxkIGJlIHJ1biBpbiBjcmVhdGlvbiBtb2RlJyk7XG4gICAgZW50ZXJWaWV3KGxWaWV3KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB2aWV3UXVlcnkgPSB0Vmlldy52aWV3UXVlcnk7XG4gICAgICAgIGlmICh2aWV3UXVlcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV4ZWN1dGVWaWV3UXVlcnlGbigxIC8qIENyZWF0ZSAqLywgdmlld1F1ZXJ5LCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFeGVjdXRlIGEgdGVtcGxhdGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgdmlldywgaWYgaXQgZXhpc3RzLiBBIHRlbXBsYXRlIGZ1bmN0aW9uIG1pZ2h0IG5vdCBiZVxuICAgICAgICAvLyBkZWZpbmVkIGZvciB0aGUgcm9vdCBjb21wb25lbnQgdmlld3MuXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRm4gPSB0Vmlldy50ZW1wbGF0ZTtcbiAgICAgICAgaWYgKHRlbXBsYXRlRm4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV4ZWN1dGVUZW1wbGF0ZSh0VmlldywgbFZpZXcsIHRlbXBsYXRlRm4sIDEgLyogQ3JlYXRlICovLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIG5lZWRzIHRvIGJlIHNldCBiZWZvcmUgY2hpbGRyZW4gYXJlIHByb2Nlc3NlZCB0byBzdXBwb3J0IHJlY3Vyc2l2ZSBjb21wb25lbnRzLlxuICAgICAgICAvLyBUaGlzIG11c3QgYmUgc2V0IHRvIGZhbHNlIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBmaXJzdCBjcmVhdGlvbiBydW4gYmVjYXVzZSBpbiBhblxuICAgICAgICAvLyBuZ0ZvciBsb29wLCBhbGwgdGhlIHZpZXdzIHdpbGwgYmUgY3JlYXRlZCB0b2dldGhlciBiZWZvcmUgdXBkYXRlIG1vZGUgcnVucyBhbmQgdHVybnNcbiAgICAgICAgLy8gb2ZmIGZpcnN0Q3JlYXRlUGFzcy4gSWYgd2UgZG9uJ3Qgc2V0IGl0IGhlcmUsIGluc3RhbmNlcyB3aWxsIHBlcmZvcm0gZGlyZWN0aXZlXG4gICAgICAgIC8vIG1hdGNoaW5nLCBldGMgYWdhaW4gYW5kIGFnYWluLlxuICAgICAgICBpZiAodFZpZXcuZmlyc3RDcmVhdGVQYXNzKSB7XG4gICAgICAgICAgICB0Vmlldy5maXJzdENyZWF0ZVBhc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSByZXNvbHZlIGNvbnRlbnQgcXVlcmllcyBzcGVjaWZpY2FsbHkgbWFya2VkIGFzIGBzdGF0aWNgIGluIGNyZWF0aW9uIG1vZGUuIER5bmFtaWNcbiAgICAgICAgLy8gY29udGVudCBxdWVyaWVzIGFyZSByZXNvbHZlZCBkdXJpbmcgY2hhbmdlIGRldGVjdGlvbiAoaS5lLiB1cGRhdGUgbW9kZSksIGFmdGVyIGVtYmVkZGVkXG4gICAgICAgIC8vIHZpZXdzIGFyZSByZWZyZXNoZWQgKHNlZSBibG9jayBhYm92ZSkuXG4gICAgICAgIGlmICh0Vmlldy5zdGF0aWNDb250ZW50UXVlcmllcykge1xuICAgICAgICAgICAgcmVmcmVzaENvbnRlbnRRdWVyaWVzKHRWaWV3LCBsVmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgbXVzdCBtYXRlcmlhbGl6ZSBxdWVyeSByZXN1bHRzIGJlZm9yZSBjaGlsZCBjb21wb25lbnRzIGFyZSBwcm9jZXNzZWRcbiAgICAgICAgLy8gaW4gY2FzZSBhIGNoaWxkIGNvbXBvbmVudCBoYXMgcHJvamVjdGVkIGEgY29udGFpbmVyLiBUaGUgTENvbnRhaW5lciBuZWVkc1xuICAgICAgICAvLyB0byBleGlzdCBzbyB0aGUgZW1iZWRkZWQgdmlld3MgYXJlIHByb3Blcmx5IGF0dGFjaGVkIGJ5IHRoZSBjb250YWluZXIuXG4gICAgICAgIGlmICh0Vmlldy5zdGF0aWNWaWV3UXVlcmllcykge1xuICAgICAgICAgICAgZXhlY3V0ZVZpZXdRdWVyeUZuKDIgLyogVXBkYXRlICovLCB0Vmlldy52aWV3UXVlcnksIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlbmRlciBjaGlsZCBjb21wb25lbnQgdmlld3MuXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB0Vmlldy5jb21wb25lbnRzO1xuICAgICAgICBpZiAoY29tcG9uZW50cyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmVuZGVyQ2hpbGRDb21wb25lbnRzKGxWaWV3LCBjb21wb25lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSWYgd2UgZGlkbid0IG1hbmFnZSB0byBnZXQgcGFzdCB0aGUgZmlyc3QgdGVtcGxhdGUgcGFzcyBkdWUgdG9cbiAgICAgICAgLy8gYW4gZXJyb3IsIG1hcmsgdGhlIHZpZXcgYXMgY29ycnVwdGVkIHNvIHdlIGNhbiB0cnkgdG8gcmVjb3Zlci5cbiAgICAgICAgaWYgKHRWaWV3LmZpcnN0Q3JlYXRlUGFzcykge1xuICAgICAgICAgICAgdFZpZXcuaW5jb21wbGV0ZUZpcnN0UGFzcyA9IHRydWU7XG4gICAgICAgICAgICB0Vmlldy5maXJzdENyZWF0ZVBhc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGxWaWV3W0ZMQUdTXSAmPSB+NCAvKiBDcmVhdGlvbk1vZGUgKi87XG4gICAgICAgIGxlYXZlVmlldygpO1xuICAgIH1cbn1cbi8qKlxuICogUHJvY2Vzc2VzIGEgdmlldyBpbiB1cGRhdGUgbW9kZS4gVGhpcyBpbmNsdWRlcyBhIG51bWJlciBvZiBzdGVwcyBpbiBhIHNwZWNpZmljIG9yZGVyOlxuICogLSBleGVjdXRpbmcgYSB0ZW1wbGF0ZSBmdW5jdGlvbiBpbiB1cGRhdGUgbW9kZTtcbiAqIC0gZXhlY3V0aW5nIGhvb2tzO1xuICogLSByZWZyZXNoaW5nIHF1ZXJpZXM7XG4gKiAtIHNldHRpbmcgaG9zdCBiaW5kaW5ncztcbiAqIC0gcmVmcmVzaGluZyBjaGlsZCAoZW1iZWRkZWQgYW5kIGNvbXBvbmVudCkgdmlld3MuXG4gKi9cbmZ1bmN0aW9uIHJlZnJlc2hWaWV3KHRWaWV3LCBsVmlldywgdGVtcGxhdGVGbiwgY29udGV4dCkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRFcXVhbChpc0NyZWF0aW9uTW9kZShsVmlldyksIGZhbHNlLCAnU2hvdWxkIGJlIHJ1biBpbiB1cGRhdGUgbW9kZScpO1xuICAgIGNvbnN0IGZsYWdzID0gbFZpZXdbRkxBR1NdO1xuICAgIGlmICgoZmxhZ3MgJiAyNTYgLyogRGVzdHJveWVkICovKSA9PT0gMjU2IC8qIERlc3Ryb3llZCAqLylcbiAgICAgICAgcmV0dXJuO1xuICAgIGVudGVyVmlldyhsVmlldyk7XG4gICAgLy8gQ2hlY2sgbm8gY2hhbmdlcyBtb2RlIGlzIGEgZGV2IG9ubHkgbW9kZSB1c2VkIHRvIHZlcmlmeSB0aGF0IGJpbmRpbmdzIGhhdmUgbm90IGNoYW5nZWRcbiAgICAvLyBzaW5jZSB0aGV5IHdlcmUgYXNzaWduZWQuIFdlIGRvIG5vdCB3YW50IHRvIGV4ZWN1dGUgbGlmZWN5Y2xlIGhvb2tzIGluIHRoYXQgbW9kZS5cbiAgICBjb25zdCBpc0luQ2hlY2tOb0NoYW5nZXNQYXNzID0gaXNJbkNoZWNrTm9DaGFuZ2VzTW9kZSgpO1xuICAgIHRyeSB7XG4gICAgICAgIHJlc2V0UHJlT3JkZXJIb29rRmxhZ3MobFZpZXcpO1xuICAgICAgICBzZXRCaW5kaW5nSW5kZXgodFZpZXcuYmluZGluZ1N0YXJ0SW5kZXgpO1xuICAgICAgICBpZiAodGVtcGxhdGVGbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZXhlY3V0ZVRlbXBsYXRlKHRWaWV3LCBsVmlldywgdGVtcGxhdGVGbiwgMiAvKiBVcGRhdGUgKi8sIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvb2tzSW5pdFBoYXNlQ29tcGxldGVkID0gKGZsYWdzICYgMyAvKiBJbml0UGhhc2VTdGF0ZU1hc2sgKi8pID09PSAzIC8qIEluaXRQaGFzZUNvbXBsZXRlZCAqLztcbiAgICAgICAgLy8gZXhlY3V0ZSBwcmUtb3JkZXIgaG9va3MgKE9uSW5pdCwgT25DaGFuZ2VzLCBEb0NoZWNrKVxuICAgICAgICAvLyBQRVJGIFdBUk5JTkc6IGRvIE5PVCBleHRyYWN0IHRoaXMgdG8gYSBzZXBhcmF0ZSBmdW5jdGlvbiB3aXRob3V0IHJ1bm5pbmcgYmVuY2htYXJrc1xuICAgICAgICBpZiAoIWlzSW5DaGVja05vQ2hhbmdlc1Bhc3MpIHtcbiAgICAgICAgICAgIGlmIChob29rc0luaXRQaGFzZUNvbXBsZXRlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZU9yZGVyQ2hlY2tIb29rcyA9IHRWaWV3LnByZU9yZGVyQ2hlY2tIb29rcztcbiAgICAgICAgICAgICAgICBpZiAocHJlT3JkZXJDaGVja0hvb2tzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVDaGVja0hvb2tzKGxWaWV3LCBwcmVPcmRlckNoZWNrSG9va3MsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZU9yZGVySG9va3MgPSB0Vmlldy5wcmVPcmRlckhvb2tzO1xuICAgICAgICAgICAgICAgIGlmIChwcmVPcmRlckhvb2tzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVJbml0QW5kQ2hlY2tIb29rcyhsVmlldywgcHJlT3JkZXJIb29rcywgMCAvKiBPbkluaXRIb29rc1RvQmVSdW4gKi8sIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbmNyZW1lbnRJbml0UGhhc2VGbGFncyhsVmlldywgMCAvKiBPbkluaXRIb29rc1RvQmVSdW4gKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZpcnN0IG1hcmsgdHJhbnNwbGFudGVkIHZpZXdzIHRoYXQgYXJlIGRlY2xhcmVkIGluIHRoaXMgbFZpZXcgYXMgbmVlZGluZyBhIHJlZnJlc2ggYXQgdGhlaXJcbiAgICAgICAgLy8gaW5zZXJ0aW9uIHBvaW50cy4gVGhpcyBpcyBuZWVkZWQgdG8gYXZvaWQgdGhlIHNpdHVhdGlvbiB3aGVyZSB0aGUgdGVtcGxhdGUgaXMgZGVmaW5lZCBpbiB0aGlzXG4gICAgICAgIC8vIGBMVmlld2AgYnV0IGl0cyBkZWNsYXJhdGlvbiBhcHBlYXJzIGFmdGVyIHRoZSBpbnNlcnRpb24gY29tcG9uZW50LlxuICAgICAgICBtYXJrVHJhbnNwbGFudGVkVmlld3NGb3JSZWZyZXNoKGxWaWV3KTtcbiAgICAgICAgcmVmcmVzaEVtYmVkZGVkVmlld3MobFZpZXcpO1xuICAgICAgICAvLyBDb250ZW50IHF1ZXJ5IHJlc3VsdHMgbXVzdCBiZSByZWZyZXNoZWQgYmVmb3JlIGNvbnRlbnQgaG9va3MgYXJlIGNhbGxlZC5cbiAgICAgICAgaWYgKHRWaWV3LmNvbnRlbnRRdWVyaWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZWZyZXNoQ29udGVudFF1ZXJpZXModFZpZXcsIGxWaWV3KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBleGVjdXRlIGNvbnRlbnQgaG9va3MgKEFmdGVyQ29udGVudEluaXQsIEFmdGVyQ29udGVudENoZWNrZWQpXG4gICAgICAgIC8vIFBFUkYgV0FSTklORzogZG8gTk9UIGV4dHJhY3QgdGhpcyB0byBhIHNlcGFyYXRlIGZ1bmN0aW9uIHdpdGhvdXQgcnVubmluZyBiZW5jaG1hcmtzXG4gICAgICAgIGlmICghaXNJbkNoZWNrTm9DaGFuZ2VzUGFzcykge1xuICAgICAgICAgICAgaWYgKGhvb2tzSW5pdFBoYXNlQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudENoZWNrSG9va3MgPSB0Vmlldy5jb250ZW50Q2hlY2tIb29rcztcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudENoZWNrSG9va3MgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZUNoZWNrSG9va3MobFZpZXcsIGNvbnRlbnRDaGVja0hvb2tzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50SG9va3MgPSB0Vmlldy5jb250ZW50SG9va3M7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRIb29rcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBleGVjdXRlSW5pdEFuZENoZWNrSG9va3MobFZpZXcsIGNvbnRlbnRIb29rcywgMSAvKiBBZnRlckNvbnRlbnRJbml0SG9va3NUb0JlUnVuICovKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5jcmVtZW50SW5pdFBoYXNlRmxhZ3MobFZpZXcsIDEgLyogQWZ0ZXJDb250ZW50SW5pdEhvb2tzVG9CZVJ1biAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJvY2Vzc0hvc3RCaW5kaW5nT3BDb2Rlcyh0VmlldywgbFZpZXcpO1xuICAgICAgICAvLyBSZWZyZXNoIGNoaWxkIGNvbXBvbmVudCB2aWV3cy5cbiAgICAgICAgY29uc3QgY29tcG9uZW50cyA9IHRWaWV3LmNvbXBvbmVudHM7XG4gICAgICAgIGlmIChjb21wb25lbnRzICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZWZyZXNoQ2hpbGRDb21wb25lbnRzKGxWaWV3LCBjb21wb25lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBWaWV3IHF1ZXJpZXMgbXVzdCBleGVjdXRlIGFmdGVyIHJlZnJlc2hpbmcgY2hpbGQgY29tcG9uZW50cyBiZWNhdXNlIGEgdGVtcGxhdGUgaW4gdGhpcyB2aWV3XG4gICAgICAgIC8vIGNvdWxkIGJlIGluc2VydGVkIGluIGEgY2hpbGQgY29tcG9uZW50LiBJZiB0aGUgdmlldyBxdWVyeSBleGVjdXRlcyBiZWZvcmUgY2hpbGQgY29tcG9uZW50XG4gICAgICAgIC8vIHJlZnJlc2gsIHRoZSB0ZW1wbGF0ZSBtaWdodCBub3QgeWV0IGJlIGluc2VydGVkLlxuICAgICAgICBjb25zdCB2aWV3UXVlcnkgPSB0Vmlldy52aWV3UXVlcnk7XG4gICAgICAgIGlmICh2aWV3UXVlcnkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV4ZWN1dGVWaWV3UXVlcnlGbigyIC8qIFVwZGF0ZSAqLywgdmlld1F1ZXJ5LCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBleGVjdXRlIHZpZXcgaG9va3MgKEFmdGVyVmlld0luaXQsIEFmdGVyVmlld0NoZWNrZWQpXG4gICAgICAgIC8vIFBFUkYgV0FSTklORzogZG8gTk9UIGV4dHJhY3QgdGhpcyB0byBhIHNlcGFyYXRlIGZ1bmN0aW9uIHdpdGhvdXQgcnVubmluZyBiZW5jaG1hcmtzXG4gICAgICAgIGlmICghaXNJbkNoZWNrTm9DaGFuZ2VzUGFzcykge1xuICAgICAgICAgICAgaWYgKGhvb2tzSW5pdFBoYXNlQ29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld0NoZWNrSG9va3MgPSB0Vmlldy52aWV3Q2hlY2tIb29rcztcbiAgICAgICAgICAgICAgICBpZiAodmlld0NoZWNrSG9va3MgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZUNoZWNrSG9va3MobFZpZXcsIHZpZXdDaGVja0hvb2tzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3SG9va3MgPSB0Vmlldy52aWV3SG9va3M7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXdIb29rcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBleGVjdXRlSW5pdEFuZENoZWNrSG9va3MobFZpZXcsIHZpZXdIb29rcywgMiAvKiBBZnRlclZpZXdJbml0SG9va3NUb0JlUnVuICovKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5jcmVtZW50SW5pdFBoYXNlRmxhZ3MobFZpZXcsIDIgLyogQWZ0ZXJWaWV3SW5pdEhvb2tzVG9CZVJ1biAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRWaWV3LmZpcnN0VXBkYXRlUGFzcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBtYWtlIHN1cmUgdGhhdCB3ZSBvbmx5IGZsaXAgdGhlIGZsYWcgb24gc3VjY2Vzc2Z1bCBgcmVmcmVzaFZpZXdgIG9ubHlcbiAgICAgICAgICAgIC8vIERvbid0IGRvIHRoaXMgaW4gYGZpbmFsbHlgIGJsb2NrLlxuICAgICAgICAgICAgLy8gSWYgd2UgZGlkIHRoaXMgaW4gYGZpbmFsbHlgIGJsb2NrIHRoZW4gYW4gZXhjZXB0aW9uIGNvdWxkIGJsb2NrIHRoZSBleGVjdXRpb24gb2Ygc3R5bGluZ1xuICAgICAgICAgICAgLy8gaW5zdHJ1Y3Rpb25zIHdoaWNoIGluIHR1cm4gd291bGQgYmUgdW5hYmxlIHRvIGluc2VydCB0aGVtc2VsdmVzIGludG8gdGhlIHN0eWxpbmcgbGlua2VkXG4gICAgICAgICAgICAvLyBsaXN0LiBUaGUgcmVzdWx0IG9mIHRoaXMgd291bGQgYmUgdGhhdCBpZiB0aGUgZXhjZXB0aW9uIHdvdWxkIG5vdCBiZSB0aHJvdyBvbiBzdWJzZXF1ZW50IENEXG4gICAgICAgICAgICAvLyB0aGUgc3R5bGluZyB3b3VsZCBiZSB1bmFibGUgdG8gcHJvY2VzcyBpdCBkYXRhIGFuZCByZWZsZWN0IHRvIHRoZSBET00uXG4gICAgICAgICAgICB0Vmlldy5maXJzdFVwZGF0ZVBhc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEbyBub3QgcmVzZXQgdGhlIGRpcnR5IHN0YXRlIHdoZW4gcnVubmluZyBpbiBjaGVjayBubyBjaGFuZ2VzIG1vZGUuIFdlIGRvbid0IHdhbnQgY29tcG9uZW50c1xuICAgICAgICAvLyB0byBiZWhhdmUgZGlmZmVyZW50bHkgZGVwZW5kaW5nIG9uIHdoZXRoZXIgY2hlY2sgbm8gY2hhbmdlcyBpcyBlbmFibGVkIG9yIG5vdC4gRm9yIGV4YW1wbGU6XG4gICAgICAgIC8vIE1hcmtpbmcgYW4gT25QdXNoIGNvbXBvbmVudCBhcyBkaXJ0eSBmcm9tIHdpdGhpbiB0aGUgYG5nQWZ0ZXJWaWV3SW5pdGAgaG9vayBpbiBvcmRlciB0b1xuICAgICAgICAvLyByZWZyZXNoIGEgYE5nQ2xhc3NgIGJpbmRpbmcgc2hvdWxkIHdvcmsuIElmIHdlIHdvdWxkIHJlc2V0IHRoZSBkaXJ0eSBzdGF0ZSBpbiB0aGUgY2hlY2tcbiAgICAgICAgLy8gbm8gY2hhbmdlcyBjeWNsZSwgdGhlIGNvbXBvbmVudCB3b3VsZCBiZSBub3QgYmUgZGlydHkgZm9yIHRoZSBuZXh0IHVwZGF0ZSBwYXNzLiBUaGlzIHdvdWxkXG4gICAgICAgIC8vIGJlIGRpZmZlcmVudCBpbiBwcm9kdWN0aW9uIG1vZGUgd2hlcmUgdGhlIGNvbXBvbmVudCBkaXJ0eSBzdGF0ZSBpcyBub3QgcmVzZXQuXG4gICAgICAgIGlmICghaXNJbkNoZWNrTm9DaGFuZ2VzUGFzcykge1xuICAgICAgICAgICAgbFZpZXdbRkxBR1NdICY9IH4oNjQgLyogRGlydHkgKi8gfCA4IC8qIEZpcnN0TFZpZXdQYXNzICovKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobFZpZXdbRkxBR1NdICYgMTAyNCAvKiBSZWZyZXNoVHJhbnNwbGFudGVkVmlldyAqLykge1xuICAgICAgICAgICAgbFZpZXdbRkxBR1NdICY9IH4xMDI0IC8qIFJlZnJlc2hUcmFuc3BsYW50ZWRWaWV3ICovO1xuICAgICAgICAgICAgdXBkYXRlVHJhbnNwbGFudGVkVmlld0NvdW50KGxWaWV3W1BBUkVOVF0sIC0xKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgbGVhdmVWaWV3KCk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVuZGVyQ29tcG9uZW50T3JUZW1wbGF0ZSh0VmlldywgbFZpZXcsIHRlbXBsYXRlRm4sIGNvbnRleHQpIHtcbiAgICBjb25zdCByZW5kZXJlckZhY3RvcnkgPSBsVmlld1tSRU5ERVJFUl9GQUNUT1JZXTtcbiAgICBjb25zdCBub3JtYWxFeGVjdXRpb25QYXRoID0gIWlzSW5DaGVja05vQ2hhbmdlc01vZGUoKTtcbiAgICBjb25zdCBjcmVhdGlvbk1vZGVJc0FjdGl2ZSA9IGlzQ3JlYXRpb25Nb2RlKGxWaWV3KTtcbiAgICB0cnkge1xuICAgICAgICBpZiAobm9ybWFsRXhlY3V0aW9uUGF0aCAmJiAhY3JlYXRpb25Nb2RlSXNBY3RpdmUgJiYgcmVuZGVyZXJGYWN0b3J5LmJlZ2luKSB7XG4gICAgICAgICAgICByZW5kZXJlckZhY3RvcnkuYmVnaW4oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3JlYXRpb25Nb2RlSXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHJlbmRlclZpZXcodFZpZXcsIGxWaWV3LCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZWZyZXNoVmlldyh0VmlldywgbFZpZXcsIHRlbXBsYXRlRm4sIGNvbnRleHQpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgaWYgKG5vcm1hbEV4ZWN1dGlvblBhdGggJiYgIWNyZWF0aW9uTW9kZUlzQWN0aXZlICYmIHJlbmRlcmVyRmFjdG9yeS5lbmQpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyRmFjdG9yeS5lbmQoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGV4ZWN1dGVUZW1wbGF0ZSh0VmlldywgbFZpZXcsIHRlbXBsYXRlRm4sIHJmLCBjb250ZXh0KSB7XG4gICAgY29uc3QgcHJldlNlbGVjdGVkSW5kZXggPSBnZXRTZWxlY3RlZEluZGV4KCk7XG4gICAgY29uc3QgaXNVcGRhdGVQaGFzZSA9IHJmICYgMiAvKiBVcGRhdGUgKi87XG4gICAgdHJ5IHtcbiAgICAgICAgc2V0U2VsZWN0ZWRJbmRleCgtMSk7XG4gICAgICAgIGlmIChpc1VwZGF0ZVBoYXNlICYmIGxWaWV3Lmxlbmd0aCA+IEhFQURFUl9PRkZTRVQpIHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UncmUgdXBkYXRpbmcsIGluaGVyZW50bHkgc2VsZWN0IDAgc28gd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIGhhdmUgdG8gZ2VuZXJhdGUgdGhhdCBpbnN0cnVjdGlvbiBmb3IgbW9zdCB1cGRhdGUgYmxvY2tzLlxuICAgICAgICAgICAgc2VsZWN0SW5kZXhJbnRlcm5hbCh0VmlldywgbFZpZXcsIEhFQURFUl9PRkZTRVQsIGlzSW5DaGVja05vQ2hhbmdlc01vZGUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJlSG9va1R5cGUgPSBpc1VwZGF0ZVBoYXNlID8gMiAvKiBUZW1wbGF0ZVVwZGF0ZVN0YXJ0ICovIDogMCAvKiBUZW1wbGF0ZUNyZWF0ZVN0YXJ0ICovO1xuICAgICAgICBwcm9maWxlcihwcmVIb29rVHlwZSwgY29udGV4dCk7XG4gICAgICAgIHRlbXBsYXRlRm4ocmYsIGNvbnRleHQpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgc2V0U2VsZWN0ZWRJbmRleChwcmV2U2VsZWN0ZWRJbmRleCk7XG4gICAgICAgIGNvbnN0IHBvc3RIb29rVHlwZSA9IGlzVXBkYXRlUGhhc2UgPyAzIC8qIFRlbXBsYXRlVXBkYXRlRW5kICovIDogMSAvKiBUZW1wbGF0ZUNyZWF0ZUVuZCAqLztcbiAgICAgICAgcHJvZmlsZXIocG9zdEhvb2tUeXBlLCBjb250ZXh0KTtcbiAgICB9XG59XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLyBFbGVtZW50XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gZXhlY3V0ZUNvbnRlbnRRdWVyaWVzKHRWaWV3LCB0Tm9kZSwgbFZpZXcpIHtcbiAgICBpZiAoaXNDb250ZW50UXVlcnlIb3N0KHROb2RlKSkge1xuICAgICAgICBjb25zdCBzdGFydCA9IHROb2RlLmRpcmVjdGl2ZVN0YXJ0O1xuICAgICAgICBjb25zdCBlbmQgPSB0Tm9kZS5kaXJlY3RpdmVFbmQ7XG4gICAgICAgIGZvciAobGV0IGRpcmVjdGl2ZUluZGV4ID0gc3RhcnQ7IGRpcmVjdGl2ZUluZGV4IDwgZW5kOyBkaXJlY3RpdmVJbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBkZWYgPSB0Vmlldy5kYXRhW2RpcmVjdGl2ZUluZGV4XTtcbiAgICAgICAgICAgIGlmIChkZWYuY29udGVudFF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBkZWYuY29udGVudFF1ZXJpZXMoMSAvKiBDcmVhdGUgKi8sIGxWaWV3W2RpcmVjdGl2ZUluZGV4XSwgZGlyZWN0aXZlSW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGRpcmVjdGl2ZSBpbnN0YW5jZXMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZURpcmVjdGl2ZXNJbnN0YW5jZXModFZpZXcsIGxWaWV3LCB0Tm9kZSkge1xuICAgIGlmICghZ2V0QmluZGluZ3NFbmFibGVkKCkpXG4gICAgICAgIHJldHVybjtcbiAgICBpbnN0YW50aWF0ZUFsbERpcmVjdGl2ZXModFZpZXcsIGxWaWV3LCB0Tm9kZSwgZ2V0TmF0aXZlQnlUTm9kZSh0Tm9kZSwgbFZpZXcpKTtcbiAgICBpZiAoKHROb2RlLmZsYWdzICYgMTI4IC8qIGhhc0hvc3RCaW5kaW5ncyAqLykgPT09IDEyOCAvKiBoYXNIb3N0QmluZGluZ3MgKi8pIHtcbiAgICAgICAgaW52b2tlRGlyZWN0aXZlc0hvc3RCaW5kaW5ncyh0VmlldywgbFZpZXcsIHROb2RlKTtcbiAgICB9XG59XG4vKipcbiAqIFRha2VzIGEgbGlzdCBvZiBsb2NhbCBuYW1lcyBhbmQgaW5kaWNlcyBhbmQgcHVzaGVzIHRoZSByZXNvbHZlZCBsb2NhbCB2YXJpYWJsZSB2YWx1ZXNcbiAqIHRvIExWaWV3IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZXkgYXJlIGxvYWRlZCBpbiB0aGUgdGVtcGxhdGUgd2l0aCBsb2FkKCkuXG4gKi9cbmZ1bmN0aW9uIHNhdmVSZXNvbHZlZExvY2Fsc0luRGF0YSh2aWV3RGF0YSwgdE5vZGUsIGxvY2FsUmVmRXh0cmFjdG9yID0gZ2V0TmF0aXZlQnlUTm9kZSkge1xuICAgIGNvbnN0IGxvY2FsTmFtZXMgPSB0Tm9kZS5sb2NhbE5hbWVzO1xuICAgIGlmIChsb2NhbE5hbWVzICE9PSBudWxsKSB7XG4gICAgICAgIGxldCBsb2NhbEluZGV4ID0gdE5vZGUuaW5kZXggKyAxO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsTmFtZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbG9jYWxOYW1lc1tpICsgMV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGluZGV4ID09PSAtMSA/XG4gICAgICAgICAgICAgICAgbG9jYWxSZWZFeHRyYWN0b3IodE5vZGUsIHZpZXdEYXRhKSA6XG4gICAgICAgICAgICAgICAgdmlld0RhdGFbaW5kZXhdO1xuICAgICAgICAgICAgdmlld0RhdGFbbG9jYWxJbmRleCsrXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBHZXRzIFRWaWV3IGZyb20gYSB0ZW1wbGF0ZSBmdW5jdGlvbiBvciBjcmVhdGVzIGEgbmV3IFRWaWV3XG4gKiBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3QuXG4gKlxuICogQHBhcmFtIGRlZiBDb21wb25lbnREZWZcbiAqIEByZXR1cm5zIFRWaWV3XG4gKi9cbmZ1bmN0aW9uIGdldE9yQ3JlYXRlVENvbXBvbmVudFZpZXcoZGVmKSB7XG4gICAgY29uc3QgdFZpZXcgPSBkZWYudFZpZXc7XG4gICAgLy8gQ3JlYXRlIGEgVFZpZXcgaWYgdGhlcmUgaXNuJ3Qgb25lLCBvciByZWNyZWF0ZSBpdCBpZiB0aGUgZmlyc3QgY3JlYXRlIHBhc3MgZGlkbid0XG4gICAgLy8gY29tcGxldGUgc3VjY2Vzc2Z1bGx5IHNpbmNlIHdlIGNhbid0IGtub3cgZm9yIHN1cmUgd2hldGhlciBpdCdzIGluIGEgdXNhYmxlIHNoYXBlLlxuICAgIGlmICh0VmlldyA9PT0gbnVsbCB8fCB0Vmlldy5pbmNvbXBsZXRlRmlyc3RQYXNzKSB7XG4gICAgICAgIC8vIERlY2xhcmF0aW9uIG5vZGUgaGVyZSBpcyBudWxsIHNpbmNlIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHdoZW4gd2UgZHluYW1pY2FsbHkgY3JlYXRlIGFcbiAgICAgICAgLy8gY29tcG9uZW50IGFuZCBoZW5jZSB0aGVyZSBpcyBubyBkZWNsYXJhdGlvbi5cbiAgICAgICAgY29uc3QgZGVjbFROb2RlID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGRlZi50VmlldyA9IGNyZWF0ZVRWaWV3KDEgLyogQ29tcG9uZW50ICovLCBkZWNsVE5vZGUsIGRlZi50ZW1wbGF0ZSwgZGVmLmRlY2xzLCBkZWYudmFycywgZGVmLmRpcmVjdGl2ZURlZnMsIGRlZi5waXBlRGVmcywgZGVmLnZpZXdRdWVyeSwgZGVmLnNjaGVtYXMsIGRlZi5jb25zdHMpO1xuICAgIH1cbiAgICByZXR1cm4gdFZpZXc7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBUVmlldyBpbnN0YW5jZVxuICpcbiAqIEBwYXJhbSB0eXBlIFR5cGUgb2YgYFRWaWV3YC5cbiAqIEBwYXJhbSBkZWNsVE5vZGUgRGVjbGFyYXRpb24gbG9jYXRpb24gb2YgdGhpcyBgVFZpZXdgLlxuICogQHBhcmFtIHRlbXBsYXRlRm4gVGVtcGxhdGUgZnVuY3Rpb25cbiAqIEBwYXJhbSBkZWNscyBUaGUgbnVtYmVyIG9mIG5vZGVzLCBsb2NhbCByZWZzLCBhbmQgcGlwZXMgaW4gdGhpcyB0ZW1wbGF0ZVxuICogQHBhcmFtIGRpcmVjdGl2ZXMgUmVnaXN0cnkgb2YgZGlyZWN0aXZlcyBmb3IgdGhpcyB2aWV3XG4gKiBAcGFyYW0gcGlwZXMgUmVnaXN0cnkgb2YgcGlwZXMgZm9yIHRoaXMgdmlld1xuICogQHBhcmFtIHZpZXdRdWVyeSBWaWV3IHF1ZXJpZXMgZm9yIHRoaXMgdmlld1xuICogQHBhcmFtIHNjaGVtYXMgU2NoZW1hcyBmb3IgdGhpcyB2aWV3XG4gKiBAcGFyYW0gY29uc3RzIENvbnN0YW50cyBmb3IgdGhpcyB2aWV3XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRWaWV3KHR5cGUsIGRlY2xUTm9kZSwgdGVtcGxhdGVGbiwgZGVjbHMsIHZhcnMsIGRpcmVjdGl2ZXMsIHBpcGVzLCB2aWV3UXVlcnksIHNjaGVtYXMsIGNvbnN0c09yRmFjdG9yeSkge1xuICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUudFZpZXcrKztcbiAgICBjb25zdCBiaW5kaW5nU3RhcnRJbmRleCA9IEhFQURFUl9PRkZTRVQgKyBkZWNscztcbiAgICAvLyBUaGlzIGxlbmd0aCBkb2VzIG5vdCB5ZXQgY29udGFpbiBob3N0IGJpbmRpbmdzIGZyb20gY2hpbGQgZGlyZWN0aXZlcyBiZWNhdXNlIGF0IHRoaXMgcG9pbnQsXG4gICAgLy8gd2UgZG9uJ3Qga25vdyB3aGljaCBkaXJlY3RpdmVzIGFyZSBhY3RpdmUgb24gdGhpcyB0ZW1wbGF0ZS4gQXMgc29vbiBhcyBhIGRpcmVjdGl2ZSBpcyBtYXRjaGVkXG4gICAgLy8gdGhhdCBoYXMgYSBob3N0IGJpbmRpbmcsIHdlIHdpbGwgdXBkYXRlIHRoZSBibHVlcHJpbnQgd2l0aCB0aGF0IGRlZidzIGhvc3RWYXJzIGNvdW50LlxuICAgIGNvbnN0IGluaXRpYWxWaWV3TGVuZ3RoID0gYmluZGluZ1N0YXJ0SW5kZXggKyB2YXJzO1xuICAgIGNvbnN0IGJsdWVwcmludCA9IGNyZWF0ZVZpZXdCbHVlcHJpbnQoYmluZGluZ1N0YXJ0SW5kZXgsIGluaXRpYWxWaWV3TGVuZ3RoKTtcbiAgICBjb25zdCBjb25zdHMgPSB0eXBlb2YgY29uc3RzT3JGYWN0b3J5ID09PSAnZnVuY3Rpb24nID8gY29uc3RzT3JGYWN0b3J5KCkgOiBjb25zdHNPckZhY3Rvcnk7XG4gICAgY29uc3QgdFZpZXcgPSBibHVlcHJpbnRbVFZJRVddID0gbmdEZXZNb2RlID9cbiAgICAgICAgbmV3IFRWaWV3Q29uc3RydWN0b3IodHlwZSwgLy8gdHlwZTogVFZpZXdUeXBlLFxuICAgICAgICBibHVlcHJpbnQsIC8vIGJsdWVwcmludDogTFZpZXcsXG4gICAgICAgIHRlbXBsYXRlRm4sIC8vIHRlbXBsYXRlOiBDb21wb25lbnRUZW1wbGF0ZTx7fT58bnVsbCxcbiAgICAgICAgbnVsbCwgLy8gcXVlcmllczogVFF1ZXJpZXN8bnVsbFxuICAgICAgICB2aWV3UXVlcnksIC8vIHZpZXdRdWVyeTogVmlld1F1ZXJpZXNGdW5jdGlvbjx7fT58bnVsbCxcbiAgICAgICAgZGVjbFROb2RlLCAvLyBkZWNsVE5vZGU6IFROb2RlfG51bGwsXG4gICAgICAgIGNsb25lVG9UVmlld0RhdGEoYmx1ZXByaW50KS5maWxsKG51bGwsIGJpbmRpbmdTdGFydEluZGV4KSwgLy8gZGF0YTogVERhdGEsXG4gICAgICAgIGJpbmRpbmdTdGFydEluZGV4LCAvLyBiaW5kaW5nU3RhcnRJbmRleDogbnVtYmVyLFxuICAgICAgICBpbml0aWFsVmlld0xlbmd0aCwgLy8gZXhwYW5kb1N0YXJ0SW5kZXg6IG51bWJlcixcbiAgICAgICAgbnVsbCwgLy8gaG9zdEJpbmRpbmdPcENvZGVzOiBIb3N0QmluZGluZ09wQ29kZXMsXG4gICAgICAgIHRydWUsIC8vIGZpcnN0Q3JlYXRlUGFzczogYm9vbGVhbixcbiAgICAgICAgdHJ1ZSwgLy8gZmlyc3RVcGRhdGVQYXNzOiBib29sZWFuLFxuICAgICAgICBmYWxzZSwgLy8gc3RhdGljVmlld1F1ZXJpZXM6IGJvb2xlYW4sXG4gICAgICAgIGZhbHNlLCAvLyBzdGF0aWNDb250ZW50UXVlcmllczogYm9vbGVhbixcbiAgICAgICAgbnVsbCwgLy8gcHJlT3JkZXJIb29rczogSG9va0RhdGF8bnVsbCxcbiAgICAgICAgbnVsbCwgLy8gcHJlT3JkZXJDaGVja0hvb2tzOiBIb29rRGF0YXxudWxsLFxuICAgICAgICBudWxsLCAvLyBjb250ZW50SG9va3M6IEhvb2tEYXRhfG51bGwsXG4gICAgICAgIG51bGwsIC8vIGNvbnRlbnRDaGVja0hvb2tzOiBIb29rRGF0YXxudWxsLFxuICAgICAgICBudWxsLCAvLyB2aWV3SG9va3M6IEhvb2tEYXRhfG51bGwsXG4gICAgICAgIG51bGwsIC8vIHZpZXdDaGVja0hvb2tzOiBIb29rRGF0YXxudWxsLFxuICAgICAgICBudWxsLCAvLyBkZXN0cm95SG9va3M6IERlc3Ryb3lIb29rRGF0YXxudWxsLFxuICAgICAgICBudWxsLCAvLyBjbGVhbnVwOiBhbnlbXXxudWxsLFxuICAgICAgICBudWxsLCAvLyBjb250ZW50UXVlcmllczogbnVtYmVyW118bnVsbCxcbiAgICAgICAgbnVsbCwgLy8gY29tcG9uZW50czogbnVtYmVyW118bnVsbCxcbiAgICAgICAgdHlwZW9mIGRpcmVjdGl2ZXMgPT09ICdmdW5jdGlvbicgPyAvL1xuICAgICAgICAgICAgZGlyZWN0aXZlcygpIDogLy9cbiAgICAgICAgICAgIGRpcmVjdGl2ZXMsIC8vIGRpcmVjdGl2ZVJlZ2lzdHJ5OiBEaXJlY3RpdmVEZWZMaXN0fG51bGwsXG4gICAgICAgIHR5cGVvZiBwaXBlcyA9PT0gJ2Z1bmN0aW9uJyA/IHBpcGVzKCkgOiBwaXBlcywgLy8gcGlwZVJlZ2lzdHJ5OiBQaXBlRGVmTGlzdHxudWxsLFxuICAgICAgICBudWxsLCAvLyBmaXJzdENoaWxkOiBUTm9kZXxudWxsLFxuICAgICAgICBzY2hlbWFzLCAvLyBzY2hlbWFzOiBTY2hlbWFNZXRhZGF0YVtdfG51bGwsXG4gICAgICAgIGNvbnN0cywgLy8gY29uc3RzOiBUQ29uc3RhbnRzfG51bGxcbiAgICAgICAgZmFsc2UsIC8vIGluY29tcGxldGVGaXJzdFBhc3M6IGJvb2xlYW5cbiAgICAgICAgZGVjbHMsIC8vIG5nRGV2TW9kZSBvbmx5OiBkZWNsc1xuICAgICAgICB2YXJzKSA6XG4gICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBibHVlcHJpbnQ6IGJsdWVwcmludCxcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZUZuLFxuICAgICAgICAgICAgcXVlcmllczogbnVsbCxcbiAgICAgICAgICAgIHZpZXdRdWVyeTogdmlld1F1ZXJ5LFxuICAgICAgICAgICAgZGVjbFROb2RlOiBkZWNsVE5vZGUsXG4gICAgICAgICAgICBkYXRhOiBibHVlcHJpbnQuc2xpY2UoKS5maWxsKG51bGwsIGJpbmRpbmdTdGFydEluZGV4KSxcbiAgICAgICAgICAgIGJpbmRpbmdTdGFydEluZGV4OiBiaW5kaW5nU3RhcnRJbmRleCxcbiAgICAgICAgICAgIGV4cGFuZG9TdGFydEluZGV4OiBpbml0aWFsVmlld0xlbmd0aCxcbiAgICAgICAgICAgIGhvc3RCaW5kaW5nT3BDb2RlczogbnVsbCxcbiAgICAgICAgICAgIGZpcnN0Q3JlYXRlUGFzczogdHJ1ZSxcbiAgICAgICAgICAgIGZpcnN0VXBkYXRlUGFzczogdHJ1ZSxcbiAgICAgICAgICAgIHN0YXRpY1ZpZXdRdWVyaWVzOiBmYWxzZSxcbiAgICAgICAgICAgIHN0YXRpY0NvbnRlbnRRdWVyaWVzOiBmYWxzZSxcbiAgICAgICAgICAgIHByZU9yZGVySG9va3M6IG51bGwsXG4gICAgICAgICAgICBwcmVPcmRlckNoZWNrSG9va3M6IG51bGwsXG4gICAgICAgICAgICBjb250ZW50SG9va3M6IG51bGwsXG4gICAgICAgICAgICBjb250ZW50Q2hlY2tIb29rczogbnVsbCxcbiAgICAgICAgICAgIHZpZXdIb29rczogbnVsbCxcbiAgICAgICAgICAgIHZpZXdDaGVja0hvb2tzOiBudWxsLFxuICAgICAgICAgICAgZGVzdHJveUhvb2tzOiBudWxsLFxuICAgICAgICAgICAgY2xlYW51cDogbnVsbCxcbiAgICAgICAgICAgIGNvbnRlbnRRdWVyaWVzOiBudWxsLFxuICAgICAgICAgICAgY29tcG9uZW50czogbnVsbCxcbiAgICAgICAgICAgIGRpcmVjdGl2ZVJlZ2lzdHJ5OiB0eXBlb2YgZGlyZWN0aXZlcyA9PT0gJ2Z1bmN0aW9uJyA/IGRpcmVjdGl2ZXMoKSA6IGRpcmVjdGl2ZXMsXG4gICAgICAgICAgICBwaXBlUmVnaXN0cnk6IHR5cGVvZiBwaXBlcyA9PT0gJ2Z1bmN0aW9uJyA/IHBpcGVzKCkgOiBwaXBlcyxcbiAgICAgICAgICAgIGZpcnN0Q2hpbGQ6IG51bGwsXG4gICAgICAgICAgICBzY2hlbWFzOiBzY2hlbWFzLFxuICAgICAgICAgICAgY29uc3RzOiBjb25zdHMsXG4gICAgICAgICAgICBpbmNvbXBsZXRlRmlyc3RQYXNzOiBmYWxzZVxuICAgICAgICB9O1xuICAgIGlmIChuZ0Rldk1vZGUpIHtcbiAgICAgICAgLy8gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgaXQgaXMgaW1wb3J0YW50IHRoYXQgdGhlIHRWaWV3IHJldGFpbnMgdGhlIHNhbWUgc2hhcGUgZHVyaW5nIHJ1bnRpbWUuXG4gICAgICAgIC8vIChUbyBtYWtlIHN1cmUgdGhhdCBhbGwgb2YgdGhlIGNvZGUgaXMgbW9ub21vcnBoaWMuKSBGb3IgdGhpcyByZWFzb24gd2Ugc2VhbCB0aGUgb2JqZWN0IHRvXG4gICAgICAgIC8vIHByZXZlbnQgY2xhc3MgdHJhbnNpdGlvbnMuXG4gICAgICAgIE9iamVjdC5zZWFsKHRWaWV3KTtcbiAgICB9XG4gICAgcmV0dXJuIHRWaWV3O1xufVxuZnVuY3Rpb24gY3JlYXRlVmlld0JsdWVwcmludChiaW5kaW5nU3RhcnRJbmRleCwgaW5pdGlhbFZpZXdMZW5ndGgpIHtcbiAgICBjb25zdCBibHVlcHJpbnQgPSBuZ0Rldk1vZGUgPyBuZXcgTFZpZXdCbHVlcHJpbnQoKSA6IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5pdGlhbFZpZXdMZW5ndGg7IGkrKykge1xuICAgICAgICBibHVlcHJpbnQucHVzaChpIDwgYmluZGluZ1N0YXJ0SW5kZXggPyBudWxsIDogTk9fQ0hBTkdFKTtcbiAgICB9XG4gICAgcmV0dXJuIGJsdWVwcmludDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUVycm9yKHRleHQsIHRva2VuKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihgUmVuZGVyZXI6ICR7dGV4dH0gWyR7c3RyaW5naWZ5Rm9yRXJyb3IodG9rZW4pfV1gKTtcbn1cbmZ1bmN0aW9uIGFzc2VydEhvc3ROb2RlRXhpc3RzKHJFbGVtZW50LCBlbGVtZW50T3JTZWxlY3Rvcikge1xuICAgIGlmICghckVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50T3JTZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IGNyZWF0ZUVycm9yKCdIb3N0IG5vZGUgd2l0aCBzZWxlY3RvciBub3QgZm91bmQ6JywgZWxlbWVudE9yU2VsZWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ0hvc3Qgbm9kZSBpcyByZXF1aXJlZDonLCBlbGVtZW50T3JTZWxlY3Rvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIExvY2F0ZXMgdGhlIGhvc3QgbmF0aXZlIGVsZW1lbnQsIHVzZWQgZm9yIGJvb3RzdHJhcHBpbmcgZXhpc3Rpbmcgbm9kZXMgaW50byByZW5kZXJpbmcgcGlwZWxpbmUuXG4gKlxuICogQHBhcmFtIHJlbmRlcmVyRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIHRvIGNyZWF0ZSByZW5kZXJlciBpbnN0YW5jZS5cbiAqIEBwYXJhbSBlbGVtZW50T3JTZWxlY3RvciBSZW5kZXIgZWxlbWVudCBvciBDU1Mgc2VsZWN0b3IgdG8gbG9jYXRlIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIGVuY2Fwc3VsYXRpb24gVmlldyBFbmNhcHN1bGF0aW9uIGRlZmluZWQgZm9yIGNvbXBvbmVudCB0aGF0IHJlcXVlc3RzIGhvc3QgZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gbG9jYXRlSG9zdEVsZW1lbnQocmVuZGVyZXIsIGVsZW1lbnRPclNlbGVjdG9yLCBlbmNhcHN1bGF0aW9uKSB7XG4gICAgaWYgKGlzUHJvY2VkdXJhbFJlbmRlcmVyKHJlbmRlcmVyKSkge1xuICAgICAgICAvLyBXaGVuIHVzaW5nIG5hdGl2ZSBTaGFkb3cgRE9NLCBkbyBub3QgY2xlYXIgaG9zdCBlbGVtZW50IHRvIGFsbG93IG5hdGl2ZSBzbG90IHByb2plY3Rpb25cbiAgICAgICAgY29uc3QgcHJlc2VydmVDb250ZW50ID0gZW5jYXBzdWxhdGlvbiA9PT0gVmlld0VuY2Fwc3VsYXRpb24kMS5TaGFkb3dEb207XG4gICAgICAgIHJldHVybiByZW5kZXJlci5zZWxlY3RSb290RWxlbWVudChlbGVtZW50T3JTZWxlY3RvciwgcHJlc2VydmVDb250ZW50KTtcbiAgICB9XG4gICAgbGV0IHJFbGVtZW50ID0gdHlwZW9mIGVsZW1lbnRPclNlbGVjdG9yID09PSAnc3RyaW5nJyA/XG4gICAgICAgIHJlbmRlcmVyLnF1ZXJ5U2VsZWN0b3IoZWxlbWVudE9yU2VsZWN0b3IpIDpcbiAgICAgICAgZWxlbWVudE9yU2VsZWN0b3I7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEhvc3ROb2RlRXhpc3RzKHJFbGVtZW50LCBlbGVtZW50T3JTZWxlY3Rvcik7XG4gICAgLy8gQWx3YXlzIGNsZWFyIGhvc3QgZWxlbWVudCdzIGNvbnRlbnQgd2hlbiBSZW5kZXJlcjMgaXMgaW4gdXNlLiBGb3IgcHJvY2VkdXJhbCByZW5kZXJlciBjYXNlIHdlXG4gICAgLy8gbWFrZSBpdCBkZXBlbmQgb24gd2hldGhlciBTaGFkb3dEb20gZW5jYXBzdWxhdGlvbiBpcyB1c2VkIChpbiB3aGljaCBjYXNlIHRoZSBjb250ZW50IHNob3VsZCBiZVxuICAgIC8vIHByZXNlcnZlZCB0byBhbGxvdyBuYXRpdmUgc2xvdCBwcm9qZWN0aW9uKS4gU2hhZG93RG9tIGVuY2Fwc3VsYXRpb24gcmVxdWlyZXMgcHJvY2VkdXJhbFxuICAgIC8vIHJlbmRlcmVyLCBhbmQgcHJvY2VkdXJhbCByZW5kZXJlciBjYXNlIGlzIGhhbmRsZWQgYWJvdmUuXG4gICAgckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICByZXR1cm4gckVsZW1lbnQ7XG59XG4vKipcbiAqIFNhdmVzIGNvbnRleHQgZm9yIHRoaXMgY2xlYW51cCBmdW5jdGlvbiBpbiBMVmlldy5jbGVhbnVwSW5zdGFuY2VzLlxuICpcbiAqIE9uIHRoZSBmaXJzdCB0ZW1wbGF0ZSBwYXNzLCBzYXZlcyBpbiBUVmlldzpcbiAqIC0gQ2xlYW51cCBmdW5jdGlvblxuICogLSBJbmRleCBvZiBjb250ZXh0IHdlIGp1c3Qgc2F2ZWQgaW4gTFZpZXcuY2xlYW51cEluc3RhbmNlc1xuICpcbiAqIFRoaXMgZnVuY3Rpb24gY2FuIGFsc28gYmUgdXNlZCB0byBzdG9yZSBpbnN0YW5jZSBzcGVjaWZpYyBjbGVhbnVwIGZucy4gSW4gdGhhdCBjYXNlIHRoZSBgY29udGV4dGBcbiAqIGlzIGBudWxsYCBhbmQgdGhlIGZ1bmN0aW9uIGlzIHN0b3JlIGluIGBMVmlld2AgKHJhdGhlciB0aGFuIGl0IGBUVmlld2ApLlxuICovXG5mdW5jdGlvbiBzdG9yZUNsZWFudXBXaXRoQ29udGV4dCh0VmlldywgbFZpZXcsIGNvbnRleHQsIGNsZWFudXBGbikge1xuICAgIGNvbnN0IGxDbGVhbnVwID0gZ2V0T3JDcmVhdGVMVmlld0NsZWFudXAobFZpZXcpO1xuICAgIGlmIChjb250ZXh0ID09PSBudWxsKSB7XG4gICAgICAgIC8vIElmIGNvbnRleHQgaXMgbnVsbCB0aGF0IHRoaXMgaXMgaW5zdGFuY2Ugc3BlY2lmaWMgY2FsbGJhY2suIFRoZXNlIGNhbGxiYWNrcyBjYW4gb25seSBiZVxuICAgICAgICAvLyBpbnNlcnRlZCBhZnRlciB0ZW1wbGF0ZSBzaGFyZWQgaW5zdGFuY2VzLiBGb3IgdGhpcyByZWFzb24gaW4gbmdEZXZNb2RlIHdlIGZyZWV6ZSB0aGUgVFZpZXcuXG4gICAgICAgIGlmIChuZ0Rldk1vZGUpIHtcbiAgICAgICAgICAgIE9iamVjdC5mcmVlemUoZ2V0T3JDcmVhdGVUVmlld0NsZWFudXAodFZpZXcpKTtcbiAgICAgICAgfVxuICAgICAgICBsQ2xlYW51cC5wdXNoKGNsZWFudXBGbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsQ2xlYW51cC5wdXNoKGNvbnRleHQpO1xuICAgICAgICBpZiAodFZpZXcuZmlyc3RDcmVhdGVQYXNzKSB7XG4gICAgICAgICAgICBnZXRPckNyZWF0ZVRWaWV3Q2xlYW51cCh0VmlldykucHVzaChjbGVhbnVwRm4sIGxDbGVhbnVwLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlVE5vZGUodFZpZXcsIHRQYXJlbnQsIHR5cGUsIGluZGV4LCB2YWx1ZSwgYXR0cnMpIHtcbiAgICBuZ0Rldk1vZGUgJiYgaW5kZXggIT09IDAgJiYgLy8gMCBhcmUgYm9ndXMgbm9kZXMgYW5kIHRoZXkgYXJlIE9LLiBTZWUgYGNyZWF0ZUNvbnRhaW5lclJlZmAgaW5cbiAgICAgICAgLy8gYHZpZXdfZW5naW5lX2NvbXBhdGliaWxpdHlgIGZvciBhZGRpdGlvbmFsIGNvbnRleHQuXG4gICAgICAgIGFzc2VydEdyZWF0ZXJUaGFuT3JFcXVhbChpbmRleCwgSEVBREVSX09GRlNFVCwgJ1ROb2RlcyBjYW5cXCd0IGJlIGluIHRoZSBMVmlldyBoZWFkZXIuJyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydE5vdFNhbWUoYXR0cnMsIHVuZGVmaW5lZCwgJ1xcJ3VuZGVmaW5lZFxcJyBpcyBub3QgdmFsaWQgdmFsdWUgZm9yIFxcJ2F0dHJzXFwnJyk7XG4gICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS50Tm9kZSsrO1xuICAgIG5nRGV2TW9kZSAmJiB0UGFyZW50ICYmIGFzc2VydFROb2RlRm9yVFZpZXcodFBhcmVudCwgdFZpZXcpO1xuICAgIGxldCBpbmplY3RvckluZGV4ID0gdFBhcmVudCA/IHRQYXJlbnQuaW5qZWN0b3JJbmRleCA6IC0xO1xuICAgIGNvbnN0IHROb2RlID0gbmdEZXZNb2RlID9cbiAgICAgICAgbmV3IFROb2RlRGVidWcodFZpZXcsIC8vIHRWaWV3XzogVFZpZXdcbiAgICAgICAgdHlwZSwgLy8gdHlwZTogVE5vZGVUeXBlXG4gICAgICAgIGluZGV4LCAvLyBpbmRleDogbnVtYmVyXG4gICAgICAgIG51bGwsIC8vIGluc2VydEJlZm9yZUluZGV4OiBudWxsfC0xfG51bWJlcnxudW1iZXJbXVxuICAgICAgICBpbmplY3RvckluZGV4LCAvLyBpbmplY3RvckluZGV4OiBudW1iZXJcbiAgICAgICAgLTEsIC8vIGRpcmVjdGl2ZVN0YXJ0OiBudW1iZXJcbiAgICAgICAgLTEsIC8vIGRpcmVjdGl2ZUVuZDogbnVtYmVyXG4gICAgICAgIC0xLCAvLyBkaXJlY3RpdmVTdHlsaW5nTGFzdDogbnVtYmVyXG4gICAgICAgIG51bGwsIC8vIHByb3BlcnR5QmluZGluZ3M6IG51bWJlcltdfG51bGxcbiAgICAgICAgMCwgLy8gZmxhZ3M6IFROb2RlRmxhZ3NcbiAgICAgICAgMCwgLy8gcHJvdmlkZXJJbmRleGVzOiBUTm9kZVByb3ZpZGVySW5kZXhlc1xuICAgICAgICB2YWx1ZSwgLy8gdmFsdWU6IHN0cmluZ3xudWxsXG4gICAgICAgIGF0dHJzLCAvLyBhdHRyczogKHN0cmluZ3xBdHRyaWJ1dGVNYXJrZXJ8KHN0cmluZ3xTZWxlY3RvckZsYWdzKVtdKVtdfG51bGxcbiAgICAgICAgbnVsbCwgLy8gbWVyZ2VkQXR0cnNcbiAgICAgICAgbnVsbCwgLy8gbG9jYWxOYW1lczogKHN0cmluZ3xudW1iZXIpW118bnVsbFxuICAgICAgICB1bmRlZmluZWQsIC8vIGluaXRpYWxJbnB1dHM6IChzdHJpbmdbXXxudWxsKVtdfG51bGx8dW5kZWZpbmVkXG4gICAgICAgIG51bGwsIC8vIGlucHV0czogUHJvcGVydHlBbGlhc2VzfG51bGxcbiAgICAgICAgbnVsbCwgLy8gb3V0cHV0czogUHJvcGVydHlBbGlhc2VzfG51bGxcbiAgICAgICAgbnVsbCwgLy8gdFZpZXdzOiBJVFZpZXd8SVRWaWV3W118bnVsbFxuICAgICAgICBudWxsLCAvLyBuZXh0OiBJVE5vZGV8bnVsbFxuICAgICAgICBudWxsLCAvLyBwcm9qZWN0aW9uTmV4dDogSVROb2RlfG51bGxcbiAgICAgICAgbnVsbCwgLy8gY2hpbGQ6IElUTm9kZXxudWxsXG4gICAgICAgIHRQYXJlbnQsIC8vIHBhcmVudDogVEVsZW1lbnROb2RlfFRDb250YWluZXJOb2RlfG51bGxcbiAgICAgICAgbnVsbCwgLy8gcHJvamVjdGlvbjogbnVtYmVyfChJVE5vZGV8Uk5vZGVbXSlbXXxudWxsXG4gICAgICAgIG51bGwsIC8vIHN0eWxlczogc3RyaW5nfG51bGxcbiAgICAgICAgbnVsbCwgLy8gc3R5bGVzV2l0aG91dEhvc3Q6IHN0cmluZ3xudWxsXG4gICAgICAgIHVuZGVmaW5lZCwgLy8gcmVzaWR1YWxTdHlsZXM6IHN0cmluZ3xudWxsXG4gICAgICAgIG51bGwsIC8vIGNsYXNzZXM6IHN0cmluZ3xudWxsXG4gICAgICAgIG51bGwsIC8vIGNsYXNzZXNXaXRob3V0SG9zdDogc3RyaW5nfG51bGxcbiAgICAgICAgdW5kZWZpbmVkLCAvLyByZXNpZHVhbENsYXNzZXM6IHN0cmluZ3xudWxsXG4gICAgICAgIDAsIC8vIGNsYXNzQmluZGluZ3M6IFRTdHlsaW5nUmFuZ2U7XG4gICAgICAgIDApIDpcbiAgICAgICAge1xuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgaW5zZXJ0QmVmb3JlSW5kZXg6IG51bGwsXG4gICAgICAgICAgICBpbmplY3RvckluZGV4LFxuICAgICAgICAgICAgZGlyZWN0aXZlU3RhcnQ6IC0xLFxuICAgICAgICAgICAgZGlyZWN0aXZlRW5kOiAtMSxcbiAgICAgICAgICAgIGRpcmVjdGl2ZVN0eWxpbmdMYXN0OiAtMSxcbiAgICAgICAgICAgIHByb3BlcnR5QmluZGluZ3M6IG51bGwsXG4gICAgICAgICAgICBmbGFnczogMCxcbiAgICAgICAgICAgIHByb3ZpZGVySW5kZXhlczogMCxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGF0dHJzOiBhdHRycyxcbiAgICAgICAgICAgIG1lcmdlZEF0dHJzOiBudWxsLFxuICAgICAgICAgICAgbG9jYWxOYW1lczogbnVsbCxcbiAgICAgICAgICAgIGluaXRpYWxJbnB1dHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGlucHV0czogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dHM6IG51bGwsXG4gICAgICAgICAgICB0Vmlld3M6IG51bGwsXG4gICAgICAgICAgICBuZXh0OiBudWxsLFxuICAgICAgICAgICAgcHJvamVjdGlvbk5leHQ6IG51bGwsXG4gICAgICAgICAgICBjaGlsZDogbnVsbCxcbiAgICAgICAgICAgIHBhcmVudDogdFBhcmVudCxcbiAgICAgICAgICAgIHByb2plY3Rpb246IG51bGwsXG4gICAgICAgICAgICBzdHlsZXM6IG51bGwsXG4gICAgICAgICAgICBzdHlsZXNXaXRob3V0SG9zdDogbnVsbCxcbiAgICAgICAgICAgIHJlc2lkdWFsU3R5bGVzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjbGFzc2VzOiBudWxsLFxuICAgICAgICAgICAgY2xhc3Nlc1dpdGhvdXRIb3N0OiBudWxsLFxuICAgICAgICAgICAgcmVzaWR1YWxDbGFzc2VzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjbGFzc0JpbmRpbmdzOiAwLFxuICAgICAgICAgICAgc3R5bGVCaW5kaW5nczogMCxcbiAgICAgICAgfTtcbiAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgIC8vIEZvciBwZXJmb3JtYW5jZSByZWFzb25zIGl0IGlzIGltcG9ydGFudCB0aGF0IHRoZSB0Tm9kZSByZXRhaW5zIHRoZSBzYW1lIHNoYXBlIGR1cmluZyBydW50aW1lLlxuICAgICAgICAvLyAoVG8gbWFrZSBzdXJlIHRoYXQgYWxsIG9mIHRoZSBjb2RlIGlzIG1vbm9tb3JwaGljLikgRm9yIHRoaXMgcmVhc29uIHdlIHNlYWwgdGhlIG9iamVjdCB0b1xuICAgICAgICAvLyBwcmV2ZW50IGNsYXNzIHRyYW5zaXRpb25zLlxuICAgICAgICBPYmplY3Quc2VhbCh0Tm9kZSk7XG4gICAgfVxuICAgIHJldHVybiB0Tm9kZTtcbn1cbmZ1bmN0aW9uIGdlbmVyYXRlUHJvcGVydHlBbGlhc2VzKGlucHV0QWxpYXNNYXAsIGRpcmVjdGl2ZURlZklkeCwgcHJvcFN0b3JlKSB7XG4gICAgZm9yIChsZXQgcHVibGljTmFtZSBpbiBpbnB1dEFsaWFzTWFwKSB7XG4gICAgICAgIGlmIChpbnB1dEFsaWFzTWFwLmhhc093blByb3BlcnR5KHB1YmxpY05hbWUpKSB7XG4gICAgICAgICAgICBwcm9wU3RvcmUgPSBwcm9wU3RvcmUgPT09IG51bGwgPyB7fSA6IHByb3BTdG9yZTtcbiAgICAgICAgICAgIGNvbnN0IGludGVybmFsTmFtZSA9IGlucHV0QWxpYXNNYXBbcHVibGljTmFtZV07XG4gICAgICAgICAgICBpZiAocHJvcFN0b3JlLmhhc093blByb3BlcnR5KHB1YmxpY05hbWUpKSB7XG4gICAgICAgICAgICAgICAgcHJvcFN0b3JlW3B1YmxpY05hbWVdLnB1c2goZGlyZWN0aXZlRGVmSWR4LCBpbnRlcm5hbE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgKHByb3BTdG9yZVtwdWJsaWNOYW1lXSA9IFtkaXJlY3RpdmVEZWZJZHgsIGludGVybmFsTmFtZV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwcm9wU3RvcmU7XG59XG4vKipcbiAqIEluaXRpYWxpemVzIGRhdGEgc3RydWN0dXJlcyByZXF1aXJlZCB0byB3b3JrIHdpdGggZGlyZWN0aXZlIGlucHV0cyBhbmQgb3V0cHV0cy5cbiAqIEluaXRpYWxpemF0aW9uIGlzIGRvbmUgZm9yIGFsbCBkaXJlY3RpdmVzIG1hdGNoZWQgb24gYSBnaXZlbiBUTm9kZS5cbiAqL1xuZnVuY3Rpb24gaW5pdGlhbGl6ZUlucHV0QW5kT3V0cHV0QWxpYXNlcyh0VmlldywgdE5vZGUpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Rmlyc3RDcmVhdGVQYXNzKHRWaWV3KTtcbiAgICBjb25zdCBzdGFydCA9IHROb2RlLmRpcmVjdGl2ZVN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHROb2RlLmRpcmVjdGl2ZUVuZDtcbiAgICBjb25zdCB0Vmlld0RhdGEgPSB0Vmlldy5kYXRhO1xuICAgIGNvbnN0IHROb2RlQXR0cnMgPSB0Tm9kZS5hdHRycztcbiAgICBjb25zdCBpbnB1dHNGcm9tQXR0cnMgPSBuZ0Rldk1vZGUgPyBuZXcgVE5vZGVJbml0aWFsSW5wdXRzKCkgOiBbXTtcbiAgICBsZXQgaW5wdXRzU3RvcmUgPSBudWxsO1xuICAgIGxldCBvdXRwdXRzU3RvcmUgPSBudWxsO1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGRpcmVjdGl2ZURlZiA9IHRWaWV3RGF0YVtpXTtcbiAgICAgICAgY29uc3QgZGlyZWN0aXZlSW5wdXRzID0gZGlyZWN0aXZlRGVmLmlucHV0cztcbiAgICAgICAgLy8gRG8gbm90IHVzZSB1bmJvdW5kIGF0dHJpYnV0ZXMgYXMgaW5wdXRzIHRvIHN0cnVjdHVyYWwgZGlyZWN0aXZlcywgc2luY2Ugc3RydWN0dXJhbFxuICAgICAgICAvLyBkaXJlY3RpdmUgaW5wdXRzIGNhbiBvbmx5IGJlIHNldCB1c2luZyBtaWNyb3N5bnRheCAoZS5nLiBgPGRpdiAqZGlyPVwiZXhwXCI+YCkuXG4gICAgICAgIC8vIFRPRE8oRlctMTkzMCk6IG1pY3Jvc3ludGF4IGV4cHJlc3Npb25zIG1heSBhbHNvIGNvbnRhaW4gdW5ib3VuZC9zdGF0aWMgYXR0cmlidXRlcywgd2hpY2hcbiAgICAgICAgLy8gc2hvdWxkIGJlIHNldCBmb3IgaW5saW5lIHRlbXBsYXRlcy5cbiAgICAgICAgY29uc3QgaW5pdGlhbElucHV0cyA9ICh0Tm9kZUF0dHJzICE9PSBudWxsICYmICFpc0lubGluZVRlbXBsYXRlKHROb2RlKSkgP1xuICAgICAgICAgICAgZ2VuZXJhdGVJbml0aWFsSW5wdXRzKGRpcmVjdGl2ZUlucHV0cywgdE5vZGVBdHRycykgOlxuICAgICAgICAgICAgbnVsbDtcbiAgICAgICAgaW5wdXRzRnJvbUF0dHJzLnB1c2goaW5pdGlhbElucHV0cyk7XG4gICAgICAgIGlucHV0c1N0b3JlID0gZ2VuZXJhdGVQcm9wZXJ0eUFsaWFzZXMoZGlyZWN0aXZlSW5wdXRzLCBpLCBpbnB1dHNTdG9yZSk7XG4gICAgICAgIG91dHB1dHNTdG9yZSA9IGdlbmVyYXRlUHJvcGVydHlBbGlhc2VzKGRpcmVjdGl2ZURlZi5vdXRwdXRzLCBpLCBvdXRwdXRzU3RvcmUpO1xuICAgIH1cbiAgICBpZiAoaW5wdXRzU3RvcmUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKGlucHV0c1N0b3JlLmhhc093blByb3BlcnR5KCdjbGFzcycpKSB7XG4gICAgICAgICAgICB0Tm9kZS5mbGFncyB8PSAxNiAvKiBoYXNDbGFzc0lucHV0ICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dHNTdG9yZS5oYXNPd25Qcm9wZXJ0eSgnc3R5bGUnKSkge1xuICAgICAgICAgICAgdE5vZGUuZmxhZ3MgfD0gMzIgLyogaGFzU3R5bGVJbnB1dCAqLztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0Tm9kZS5pbml0aWFsSW5wdXRzID0gaW5wdXRzRnJvbUF0dHJzO1xuICAgIHROb2RlLmlucHV0cyA9IGlucHV0c1N0b3JlO1xuICAgIHROb2RlLm91dHB1dHMgPSBvdXRwdXRzU3RvcmU7XG59XG4vKipcbiAqIE1hcHBpbmcgYmV0d2VlbiBhdHRyaWJ1dGVzIG5hbWVzIHRoYXQgZG9uJ3QgY29ycmVzcG9uZCB0byB0aGVpciBlbGVtZW50IHByb3BlcnR5IG5hbWVzLlxuICpcbiAqIFBlcmZvcm1hbmNlIG5vdGU6IHRoaXMgZnVuY3Rpb24gaXMgd3JpdHRlbiBhcyBhIHNlcmllcyBvZiBpZiBjaGVja3MgKGluc3RlYWQgb2YsIHNheSwgYSBwcm9wZXJ0eVxuICogb2JqZWN0IGxvb2t1cCkgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgLSB0aGUgc2VyaWVzIG9mIGBpZmAgY2hlY2tzIHNlZW1zIHRvIGJlIHRoZSBmYXN0ZXN0IHdheSBvZlxuICogbWFwcGluZyBwcm9wZXJ0eSBuYW1lcy4gRG8gTk9UIGNoYW5nZSB3aXRob3V0IGJlbmNobWFya2luZy5cbiAqXG4gKiBOb3RlOiB0aGlzIG1hcHBpbmcgaGFzIHRvIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBlcXVhbGx5IG5hbWVkIG1hcHBpbmcgaW4gdGhlIHRlbXBsYXRlXG4gKiB0eXBlLWNoZWNraW5nIG1hY2hpbmVyeSBvZiBuZ3RzYy5cbiAqL1xuZnVuY3Rpb24gbWFwUHJvcE5hbWUobmFtZSkge1xuICAgIGlmIChuYW1lID09PSAnY2xhc3MnKVxuICAgICAgICByZXR1cm4gJ2NsYXNzTmFtZSc7XG4gICAgaWYgKG5hbWUgPT09ICdmb3InKVxuICAgICAgICByZXR1cm4gJ2h0bWxGb3InO1xuICAgIGlmIChuYW1lID09PSAnZm9ybWFjdGlvbicpXG4gICAgICAgIHJldHVybiAnZm9ybUFjdGlvbic7XG4gICAgaWYgKG5hbWUgPT09ICdpbm5lckh0bWwnKVxuICAgICAgICByZXR1cm4gJ2lubmVySFRNTCc7XG4gICAgaWYgKG5hbWUgPT09ICdyZWFkb25seScpXG4gICAgICAgIHJldHVybiAncmVhZE9ubHknO1xuICAgIGlmIChuYW1lID09PSAndGFiaW5kZXgnKVxuICAgICAgICByZXR1cm4gJ3RhYkluZGV4JztcbiAgICByZXR1cm4gbmFtZTtcbn1cbmZ1bmN0aW9uIGVsZW1lbnRQcm9wZXJ0eUludGVybmFsKHRWaWV3LCB0Tm9kZSwgbFZpZXcsIHByb3BOYW1lLCB2YWx1ZSwgcmVuZGVyZXIsIHNhbml0aXplciwgbmF0aXZlT25seSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROb3RTYW1lKHZhbHVlLCBOT19DSEFOR0UsICdJbmNvbWluZyB2YWx1ZSBzaG91bGQgbmV2ZXIgYmUgTk9fQ0hBTkdFLicpO1xuICAgIGNvbnN0IGVsZW1lbnQgPSBnZXROYXRpdmVCeVROb2RlKHROb2RlLCBsVmlldyk7XG4gICAgbGV0IGlucHV0RGF0YSA9IHROb2RlLmlucHV0cztcbiAgICBsZXQgZGF0YVZhbHVlO1xuICAgIGlmICghbmF0aXZlT25seSAmJiBpbnB1dERhdGEgIT0gbnVsbCAmJiAoZGF0YVZhbHVlID0gaW5wdXREYXRhW3Byb3BOYW1lXSkpIHtcbiAgICAgICAgc2V0SW5wdXRzRm9yUHJvcGVydHkodFZpZXcsIGxWaWV3LCBkYXRhVmFsdWUsIHByb3BOYW1lLCB2YWx1ZSk7XG4gICAgICAgIGlmIChpc0NvbXBvbmVudEhvc3QodE5vZGUpKVxuICAgICAgICAgICAgbWFya0RpcnR5SWZPblB1c2gobFZpZXcsIHROb2RlLmluZGV4KTtcbiAgICAgICAgaWYgKG5nRGV2TW9kZSkge1xuICAgICAgICAgICAgc2V0TmdSZWZsZWN0UHJvcGVydGllcyhsVmlldywgZWxlbWVudCwgdE5vZGUudHlwZSwgZGF0YVZhbHVlLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodE5vZGUudHlwZSAmIDMgLyogQW55Uk5vZGUgKi8pIHtcbiAgICAgICAgcHJvcE5hbWUgPSBtYXBQcm9wTmFtZShwcm9wTmFtZSk7XG4gICAgICAgIGlmIChuZ0Rldk1vZGUpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlQWdhaW5zdEV2ZW50UHJvcGVydGllcyhwcm9wTmFtZSk7XG4gICAgICAgICAgICBpZiAoIXZhbGlkYXRlUHJvcGVydHkodFZpZXcsIGVsZW1lbnQsIHByb3BOYW1lLCB0Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gaGVyZSBzaW5jZSB3ZSBvbmx5IGxvZyB3YXJuaW5ncyBmb3IgdW5rbm93biBwcm9wZXJ0aWVzLlxuICAgICAgICAgICAgICAgIGxvZ1Vua25vd25Qcm9wZXJ0eUVycm9yKHByb3BOYW1lLCB0Tm9kZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmdEZXZNb2RlLnJlbmRlcmVyU2V0UHJvcGVydHkrKztcbiAgICAgICAgfVxuICAgICAgICAvLyBJdCBpcyBhc3N1bWVkIHRoYXQgdGhlIHNhbml0aXplciBpcyBvbmx5IGFkZGVkIHdoZW4gdGhlIGNvbXBpbGVyIGRldGVybWluZXMgdGhhdCB0aGVcbiAgICAgICAgLy8gcHJvcGVydHkgaXMgcmlza3ksIHNvIHNhbml0aXphdGlvbiBjYW4gYmUgZG9uZSB3aXRob3V0IGZ1cnRoZXIgY2hlY2tzLlxuICAgICAgICB2YWx1ZSA9IHNhbml0aXplciAhPSBudWxsID8gc2FuaXRpemVyKHZhbHVlLCB0Tm9kZS52YWx1ZSB8fCAnJywgcHJvcE5hbWUpIDogdmFsdWU7XG4gICAgICAgIGlmIChpc1Byb2NlZHVyYWxSZW5kZXJlcihyZW5kZXJlcikpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldFByb3BlcnR5KGVsZW1lbnQsIHByb3BOYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWlzQW5pbWF0aW9uUHJvcChwcm9wTmFtZSkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc2V0UHJvcGVydHkgPyBlbGVtZW50LnNldFByb3BlcnR5KHByb3BOYW1lLCB2YWx1ZSkgOlxuICAgICAgICAgICAgICAgIGVsZW1lbnRbcHJvcE5hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodE5vZGUudHlwZSAmIDEyIC8qIEFueUNvbnRhaW5lciAqLykge1xuICAgICAgICAvLyBJZiB0aGUgbm9kZSBpcyBhIGNvbnRhaW5lciBhbmQgdGhlIHByb3BlcnR5IGRpZG4ndFxuICAgICAgICAvLyBtYXRjaCBhbnkgb2YgdGhlIGlucHV0cyBvciBzY2hlbWFzIHdlIHNob3VsZCB0aHJvdy5cbiAgICAgICAgaWYgKG5nRGV2TW9kZSAmJiAhbWF0Y2hpbmdTY2hlbWFzKHRWaWV3LCB0Tm9kZS52YWx1ZSkpIHtcbiAgICAgICAgICAgIGxvZ1Vua25vd25Qcm9wZXJ0eUVycm9yKHByb3BOYW1lLCB0Tm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKiogSWYgbm9kZSBpcyBhbiBPblB1c2ggY29tcG9uZW50LCBtYXJrcyBpdHMgTFZpZXcgZGlydHkuICovXG5mdW5jdGlvbiBtYXJrRGlydHlJZk9uUHVzaChsVmlldywgdmlld0luZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExWaWV3KGxWaWV3KTtcbiAgICBjb25zdCBjaGlsZENvbXBvbmVudExWaWV3ID0gZ2V0Q29tcG9uZW50TFZpZXdCeUluZGV4KHZpZXdJbmRleCwgbFZpZXcpO1xuICAgIGlmICghKGNoaWxkQ29tcG9uZW50TFZpZXdbRkxBR1NdICYgMTYgLyogQ2hlY2tBbHdheXMgKi8pKSB7XG4gICAgICAgIGNoaWxkQ29tcG9uZW50TFZpZXdbRkxBR1NdIHw9IDY0IC8qIERpcnR5ICovO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHNldE5nUmVmbGVjdFByb3BlcnR5KGxWaWV3LCBlbGVtZW50LCB0eXBlLCBhdHRyTmFtZSwgdmFsdWUpIHtcbiAgICBjb25zdCByZW5kZXJlciA9IGxWaWV3W1JFTkRFUkVSXTtcbiAgICBhdHRyTmFtZSA9IG5vcm1hbGl6ZURlYnVnQmluZGluZ05hbWUoYXR0ck5hbWUpO1xuICAgIGNvbnN0IGRlYnVnVmFsdWUgPSBub3JtYWxpemVEZWJ1Z0JpbmRpbmdWYWx1ZSh2YWx1ZSk7XG4gICAgaWYgKHR5cGUgJiAzIC8qIEFueVJOb2RlICovKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBpc1Byb2NlZHVyYWxSZW5kZXJlcihyZW5kZXJlcikgPyByZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgYXR0ck5hbWUpIDpcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpc1Byb2NlZHVyYWxSZW5kZXJlcihyZW5kZXJlcikgP1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyTmFtZSwgZGVidWdWYWx1ZSkgOlxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJOYW1lLCBkZWJ1Z1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgdGV4dENvbnRlbnQgPSBlc2NhcGVDb21tZW50VGV4dChgYmluZGluZ3M9JHtKU09OLnN0cmluZ2lmeSh7IFthdHRyTmFtZV06IGRlYnVnVmFsdWUgfSwgbnVsbCwgMil9YCk7XG4gICAgICAgIGlmIChpc1Byb2NlZHVyYWxSZW5kZXJlcihyZW5kZXJlcikpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldFZhbHVlKGVsZW1lbnQsIHRleHRDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0Q29udGVudDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHNldE5nUmVmbGVjdFByb3BlcnRpZXMobFZpZXcsIGVsZW1lbnQsIHR5cGUsIGRhdGFWYWx1ZSwgdmFsdWUpIHtcbiAgICBpZiAodHlwZSAmICgzIC8qIEFueVJOb2RlICovIHwgNCAvKiBDb250YWluZXIgKi8pKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBkYXRhVmFsdWUgaXMgYW4gYXJyYXkgY29udGFpbmluZyBydW50aW1lIGlucHV0IG9yIG91dHB1dCBuYW1lcyBmb3IgdGhlIGRpcmVjdGl2ZXM6XG4gICAgICAgICAqIGkrMDogZGlyZWN0aXZlIGluc3RhbmNlIGluZGV4XG4gICAgICAgICAqIGkrMTogcHJpdmF0ZU5hbWVcbiAgICAgICAgICpcbiAgICAgICAgICogZS5nLiBbMCwgJ2NoYW5nZScsICdjaGFuZ2UtbWluaWZpZWQnXVxuICAgICAgICAgKiB3ZSB3YW50IHRvIHNldCB0aGUgcmVmbGVjdGVkIHByb3BlcnR5IHdpdGggdGhlIHByaXZhdGVOYW1lOiBkYXRhVmFsdWVbaSsxXVxuICAgICAgICAgKi9cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhVmFsdWUubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIHNldE5nUmVmbGVjdFByb3BlcnR5KGxWaWV3LCBlbGVtZW50LCB0eXBlLCBkYXRhVmFsdWVbaSArIDFdLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BlcnR5KHRWaWV3LCBlbGVtZW50LCBwcm9wTmFtZSwgdE5vZGUpIHtcbiAgICAvLyBJZiBgc2NoZW1hc2AgaXMgc2V0IHRvIGBudWxsYCwgdGhhdCdzIGFuIGluZGljYXRpb24gdGhhdCB0aGlzIENvbXBvbmVudCB3YXMgY29tcGlsZWQgaW4gQU9UXG4gICAgLy8gbW9kZSB3aGVyZSB0aGlzIGNoZWNrIGhhcHBlbnMgYXQgY29tcGlsZSB0aW1lLiBJbiBKSVQgbW9kZSwgYHNjaGVtYXNgIGlzIGFsd2F5cyBwcmVzZW50IGFuZFxuICAgIC8vIGRlZmluZWQgYXMgYW4gYXJyYXkgKGFzIGFuIGVtcHR5IGFycmF5IGluIGNhc2UgYHNjaGVtYXNgIGZpZWxkIGlzIG5vdCBkZWZpbmVkKSBhbmQgd2Ugc2hvdWxkXG4gICAgLy8gZXhlY3V0ZSB0aGUgY2hlY2sgYmVsb3cuXG4gICAgaWYgKHRWaWV3LnNjaGVtYXMgPT09IG51bGwpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIC8vIFRoZSBwcm9wZXJ0eSBpcyBjb25zaWRlcmVkIHZhbGlkIGlmIHRoZSBlbGVtZW50IG1hdGNoZXMgdGhlIHNjaGVtYSwgaXQgZXhpc3RzIG9uIHRoZSBlbGVtZW50XG4gICAgLy8gb3IgaXQgaXMgc3ludGhldGljLCBhbmQgd2UgYXJlIGluIGEgYnJvd3NlciBjb250ZXh0ICh3ZWIgd29ya2VyIG5vZGVzIHNob3VsZCBiZSBza2lwcGVkKS5cbiAgICBpZiAobWF0Y2hpbmdTY2hlbWFzKHRWaWV3LCB0Tm9kZS52YWx1ZSkgfHwgcHJvcE5hbWUgaW4gZWxlbWVudCB8fCBpc0FuaW1hdGlvblByb3AocHJvcE5hbWUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBOb3RlOiBgdHlwZW9mIE5vZGVgIHJldHVybnMgJ2Z1bmN0aW9uJyBpbiBtb3N0IGJyb3dzZXJzLCBidXQgb24gSUUgaXQgaXMgJ29iamVjdCcgc28gd2VcbiAgICAvLyBuZWVkIHRvIGFjY291bnQgZm9yIGJvdGggaGVyZSwgd2hpbGUgYmVpbmcgY2FyZWZ1bCBmb3IgYHR5cGVvZiBudWxsYCBhbHNvIHJldHVybmluZyAnb2JqZWN0Jy5cbiAgICByZXR1cm4gdHlwZW9mIE5vZGUgPT09ICd1bmRlZmluZWQnIHx8IE5vZGUgPT09IG51bGwgfHwgIShlbGVtZW50IGluc3RhbmNlb2YgTm9kZSk7XG59XG5mdW5jdGlvbiBtYXRjaGluZ1NjaGVtYXModFZpZXcsIHRhZ05hbWUpIHtcbiAgICBjb25zdCBzY2hlbWFzID0gdFZpZXcuc2NoZW1hcztcbiAgICBpZiAoc2NoZW1hcyAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNjaGVtYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHNjaGVtYXNbaV07XG4gICAgICAgICAgICBpZiAoc2NoZW1hID09PSBOT19FUlJPUlNfU0NIRU1BIHx8XG4gICAgICAgICAgICAgICAgc2NoZW1hID09PSBDVVNUT01fRUxFTUVOVFNfU0NIRU1BICYmIHRhZ05hbWUgJiYgdGFnTmFtZS5pbmRleE9mKCctJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogTG9ncyBhbiBlcnJvciB0aGF0IGEgcHJvcGVydHkgaXMgbm90IHN1cHBvcnRlZCBvbiBhbiBlbGVtZW50LlxuICogQHBhcmFtIHByb3BOYW1lIE5hbWUgb2YgdGhlIGludmFsaWQgcHJvcGVydHkuXG4gKiBAcGFyYW0gdE5vZGUgTm9kZSBvbiB3aGljaCB3ZSBlbmNvdW50ZXJlZCB0aGUgcHJvcGVydHkuXG4gKi9cbmZ1bmN0aW9uIGxvZ1Vua25vd25Qcm9wZXJ0eUVycm9yKHByb3BOYW1lLCB0Tm9kZSkge1xuICAgIGxldCBtZXNzYWdlID0gYENhbid0IGJpbmQgdG8gJyR7cHJvcE5hbWV9JyBzaW5jZSBpdCBpc24ndCBhIGtub3duIHByb3BlcnR5IG9mICcke3ROb2RlLnZhbHVlfScuYDtcbiAgICBjb25zb2xlLmVycm9yKGZvcm1hdFJ1bnRpbWVFcnJvcigzMDMgLyogVU5LTk9XTl9CSU5ESU5HICovLCBtZXNzYWdlKSk7XG59XG4vKipcbiAqIEluc3RhbnRpYXRlIGEgcm9vdCBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIGluc3RhbnRpYXRlUm9vdENvbXBvbmVudCh0VmlldywgbFZpZXcsIGRlZikge1xuICAgIGNvbnN0IHJvb3RUTm9kZSA9IGdldEN1cnJlbnRUTm9kZSgpO1xuICAgIGlmICh0Vmlldy5maXJzdENyZWF0ZVBhc3MpIHtcbiAgICAgICAgaWYgKGRlZi5wcm92aWRlcnNSZXNvbHZlcilcbiAgICAgICAgICAgIGRlZi5wcm92aWRlcnNSZXNvbHZlcihkZWYpO1xuICAgICAgICBjb25zdCBkaXJlY3RpdmVJbmRleCA9IGFsbG9jRXhwYW5kbyh0VmlldywgbFZpZXcsIDEsIG51bGwpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIGFzc2VydEVxdWFsKGRpcmVjdGl2ZUluZGV4LCByb290VE5vZGUuZGlyZWN0aXZlU3RhcnQsICdCZWNhdXNlIHRoaXMgaXMgYSByb290IGNvbXBvbmVudCB0aGUgYWxsb2NhdGVkIGV4cGFuZG8gc2hvdWxkIG1hdGNoIHRoZSBUTm9kZSBjb21wb25lbnQuJyk7XG4gICAgICAgIGNvbmZpZ3VyZVZpZXdXaXRoRGlyZWN0aXZlKHRWaWV3LCByb290VE5vZGUsIGxWaWV3LCBkaXJlY3RpdmVJbmRleCwgZGVmKTtcbiAgICB9XG4gICAgY29uc3QgZGlyZWN0aXZlID0gZ2V0Tm9kZUluamVjdGFibGUobFZpZXcsIHRWaWV3LCByb290VE5vZGUuZGlyZWN0aXZlU3RhcnQsIHJvb3RUTm9kZSk7XG4gICAgYXR0YWNoUGF0Y2hEYXRhKGRpcmVjdGl2ZSwgbFZpZXcpO1xuICAgIGNvbnN0IG5hdGl2ZSA9IGdldE5hdGl2ZUJ5VE5vZGUocm9vdFROb2RlLCBsVmlldyk7XG4gICAgaWYgKG5hdGl2ZSkge1xuICAgICAgICBhdHRhY2hQYXRjaERhdGEobmF0aXZlLCBsVmlldyk7XG4gICAgfVxuICAgIHJldHVybiBkaXJlY3RpdmU7XG59XG4vKipcbiAqIFJlc29sdmUgdGhlIG1hdGNoZWQgZGlyZWN0aXZlcyBvbiBhIG5vZGUuXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVEaXJlY3RpdmVzKHRWaWV3LCBsVmlldywgdE5vZGUsIGxvY2FsUmVmcykge1xuICAgIC8vIFBsZWFzZSBtYWtlIHN1cmUgdG8gaGF2ZSBleHBsaWNpdCB0eXBlIGZvciBgZXhwb3J0c01hcGAuIEluZmVycmVkIHR5cGUgdHJpZ2dlcnMgYnVnIGluXG4gICAgLy8gdHNpY2tsZS5cbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Rmlyc3RDcmVhdGVQYXNzKHRWaWV3KTtcbiAgICBsZXQgaGFzRGlyZWN0aXZlcyA9IGZhbHNlO1xuICAgIGlmIChnZXRCaW5kaW5nc0VuYWJsZWQoKSkge1xuICAgICAgICBjb25zdCBkaXJlY3RpdmVEZWZzID0gZmluZERpcmVjdGl2ZURlZk1hdGNoZXModFZpZXcsIGxWaWV3LCB0Tm9kZSk7XG4gICAgICAgIGNvbnN0IGV4cG9ydHNNYXAgPSBsb2NhbFJlZnMgPT09IG51bGwgPyBudWxsIDogeyAnJzogLTEgfTtcbiAgICAgICAgaWYgKGRpcmVjdGl2ZURlZnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGhhc0RpcmVjdGl2ZXMgPSB0cnVlO1xuICAgICAgICAgICAgaW5pdFROb2RlRmxhZ3ModE5vZGUsIHRWaWV3LmRhdGEubGVuZ3RoLCBkaXJlY3RpdmVEZWZzLmxlbmd0aCk7XG4gICAgICAgICAgICAvLyBXaGVuIHRoZSBzYW1lIHRva2VuIGlzIHByb3ZpZGVkIGJ5IHNldmVyYWwgZGlyZWN0aXZlcyBvbiB0aGUgc2FtZSBub2RlLCBzb21lIHJ1bGVzIGFwcGx5IGluXG4gICAgICAgICAgICAvLyB0aGUgdmlld0VuZ2luZTpcbiAgICAgICAgICAgIC8vIC0gdmlld1Byb3ZpZGVycyBoYXZlIHByaW9yaXR5IG92ZXIgcHJvdmlkZXJzXG4gICAgICAgICAgICAvLyAtIHRoZSBsYXN0IGRpcmVjdGl2ZSBpbiBOZ01vZHVsZS5kZWNsYXJhdGlvbnMgaGFzIHByaW9yaXR5IG92ZXIgdGhlIHByZXZpb3VzIG9uZVxuICAgICAgICAgICAgLy8gU28gdG8gbWF0Y2ggdGhlc2UgcnVsZXMsIHRoZSBvcmRlciBpbiB3aGljaCBwcm92aWRlcnMgYXJlIGFkZGVkIGluIHRoZSBhcnJheXMgaXMgdmVyeVxuICAgICAgICAgICAgLy8gaW1wb3J0YW50LlxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXJlY3RpdmVEZWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmID0gZGlyZWN0aXZlRGVmc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoZGVmLnByb3ZpZGVyc1Jlc29sdmVyKVxuICAgICAgICAgICAgICAgICAgICBkZWYucHJvdmlkZXJzUmVzb2x2ZXIoZGVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwcmVPcmRlckhvb2tzRm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBwcmVPcmRlckNoZWNrSG9va3NGb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGRpcmVjdGl2ZUlkeCA9IGFsbG9jRXhwYW5kbyh0VmlldywgbFZpZXcsIGRpcmVjdGl2ZURlZnMubGVuZ3RoLCBudWxsKTtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgICAgIGFzc2VydFNhbWUoZGlyZWN0aXZlSWR4LCB0Tm9kZS5kaXJlY3RpdmVTdGFydCwgJ1ROb2RlLmRpcmVjdGl2ZVN0YXJ0IHNob3VsZCBwb2ludCB0byBqdXN0IGFsbG9jYXRlZCBzcGFjZScpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXJlY3RpdmVEZWZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmID0gZGlyZWN0aXZlRGVmc1tpXTtcbiAgICAgICAgICAgICAgICAvLyBNZXJnZSB0aGUgYXR0cnMgaW4gdGhlIG9yZGVyIG9mIG1hdGNoZXMuIFRoaXMgYXNzdW1lcyB0aGF0IHRoZSBmaXJzdCBkaXJlY3RpdmUgaXMgdGhlXG4gICAgICAgICAgICAgICAgLy8gY29tcG9uZW50IGl0c2VsZiwgc28gdGhhdCB0aGUgY29tcG9uZW50IGhhcyB0aGUgbGVhc3QgcHJpb3JpdHkuXG4gICAgICAgICAgICAgICAgdE5vZGUubWVyZ2VkQXR0cnMgPSBtZXJnZUhvc3RBdHRycyh0Tm9kZS5tZXJnZWRBdHRycywgZGVmLmhvc3RBdHRycyk7XG4gICAgICAgICAgICAgICAgY29uZmlndXJlVmlld1dpdGhEaXJlY3RpdmUodFZpZXcsIHROb2RlLCBsVmlldywgZGlyZWN0aXZlSWR4LCBkZWYpO1xuICAgICAgICAgICAgICAgIHNhdmVOYW1lVG9FeHBvcnRNYXAoZGlyZWN0aXZlSWR4LCBkZWYsIGV4cG9ydHNNYXApO1xuICAgICAgICAgICAgICAgIGlmIChkZWYuY29udGVudFF1ZXJpZXMgIT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHROb2RlLmZsYWdzIHw9IDggLyogaGFzQ29udGVudFF1ZXJ5ICovO1xuICAgICAgICAgICAgICAgIGlmIChkZWYuaG9zdEJpbmRpbmdzICE9PSBudWxsIHx8IGRlZi5ob3N0QXR0cnMgIT09IG51bGwgfHwgZGVmLmhvc3RWYXJzICE9PSAwKVxuICAgICAgICAgICAgICAgICAgICB0Tm9kZS5mbGFncyB8PSAxMjggLyogaGFzSG9zdEJpbmRpbmdzICovO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpZmVDeWNsZUhvb2tzID0gZGVmLnR5cGUucHJvdG90eXBlO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgcHVzaCBhIG5vZGUgaW5kZXggaW50byB0aGUgcHJlT3JkZXJIb29rcyBhcnJheSBpZiB0aGlzIGlzIHRoZSBmaXJzdFxuICAgICAgICAgICAgICAgIC8vIHByZS1vcmRlciBob29rIGZvdW5kIG9uIHRoaXMgbm9kZS5cbiAgICAgICAgICAgICAgICBpZiAoIXByZU9yZGVySG9va3NGb3VuZCAmJlxuICAgICAgICAgICAgICAgICAgICAobGlmZUN5Y2xlSG9va3MubmdPbkNoYW5nZXMgfHwgbGlmZUN5Y2xlSG9va3MubmdPbkluaXQgfHwgbGlmZUN5Y2xlSG9va3MubmdEb0NoZWNrKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSB3aWxsIHB1c2ggdGhlIGFjdHVhbCBob29rIGZ1bmN0aW9uIGludG8gdGhpcyBhcnJheSBsYXRlciBkdXJpbmcgZGlyIGluc3RhbnRpYXRpb24uXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhbm5vdCBkbyBpdCBub3cgYmVjYXVzZSB3ZSBtdXN0IGVuc3VyZSBob29rcyBhcmUgcmVnaXN0ZXJlZCBpbiB0aGUgc2FtZVxuICAgICAgICAgICAgICAgICAgICAvLyBvcmRlciB0aGF0IGRpcmVjdGl2ZXMgYXJlIGNyZWF0ZWQgKGkuZS4gaW5qZWN0aW9uIG9yZGVyKS5cbiAgICAgICAgICAgICAgICAgICAgKHRWaWV3LnByZU9yZGVySG9va3MgfHwgKHRWaWV3LnByZU9yZGVySG9va3MgPSBbXSkpLnB1c2godE5vZGUuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBwcmVPcmRlckhvb2tzRm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXByZU9yZGVyQ2hlY2tIb29rc0ZvdW5kICYmIChsaWZlQ3ljbGVIb29rcy5uZ09uQ2hhbmdlcyB8fCBsaWZlQ3ljbGVIb29rcy5uZ0RvQ2hlY2spKSB7XG4gICAgICAgICAgICAgICAgICAgICh0Vmlldy5wcmVPcmRlckNoZWNrSG9va3MgfHwgKHRWaWV3LnByZU9yZGVyQ2hlY2tIb29rcyA9IFtdKSkucHVzaCh0Tm9kZS5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHByZU9yZGVyQ2hlY2tIb29rc0ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGlyZWN0aXZlSWR4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbml0aWFsaXplSW5wdXRBbmRPdXRwdXRBbGlhc2VzKHRWaWV3LCB0Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cG9ydHNNYXApXG4gICAgICAgICAgICBjYWNoZU1hdGNoaW5nTG9jYWxOYW1lcyh0Tm9kZSwgbG9jYWxSZWZzLCBleHBvcnRzTWFwKTtcbiAgICB9XG4gICAgLy8gTWVyZ2UgdGhlIHRlbXBsYXRlIGF0dHJzIGxhc3Qgc28gdGhhdCB0aGV5IGhhdmUgdGhlIGhpZ2hlc3QgcHJpb3JpdHkuXG4gICAgdE5vZGUubWVyZ2VkQXR0cnMgPSBtZXJnZUhvc3RBdHRycyh0Tm9kZS5tZXJnZWRBdHRycywgdE5vZGUuYXR0cnMpO1xuICAgIHJldHVybiBoYXNEaXJlY3RpdmVzO1xufVxuLyoqXG4gKiBBZGQgYGhvc3RCaW5kaW5nc2AgdG8gdGhlIGBUVmlldy5ob3N0QmluZGluZ09wQ29kZXNgLlxuICpcbiAqIEBwYXJhbSB0VmlldyBgVFZpZXdgIHRvIHdoaWNoIHRoZSBgaG9zdEJpbmRpbmdzYCBzaG91bGQgYmUgYWRkZWQuXG4gKiBAcGFyYW0gdE5vZGUgYFROb2RlYCB0aGUgZWxlbWVudCB3aGljaCBjb250YWlucyB0aGUgZGlyZWN0aXZlXG4gKiBAcGFyYW0gbFZpZXcgYExWaWV3YCBjdXJyZW50IGBMVmlld2BcbiAqIEBwYXJhbSBkaXJlY3RpdmVJZHggRGlyZWN0aXZlIGluZGV4IGluIHZpZXcuXG4gKiBAcGFyYW0gZGlyZWN0aXZlVmFyc0lkeCBXaGVyZSB3aWxsIHRoZSBkaXJlY3RpdmUncyB2YXJzIGJlIHN0b3JlZFxuICogQHBhcmFtIGRlZiBgQ29tcG9uZW50RGVmYC9gRGlyZWN0aXZlRGVmYCwgd2hpY2ggY29udGFpbnMgdGhlIGBob3N0VmFyc2AvYGhvc3RCaW5kaW5nc2AgdG8gYWRkLlxuICovXG5mdW5jdGlvbiByZWdpc3Rlckhvc3RCaW5kaW5nT3BDb2Rlcyh0VmlldywgdE5vZGUsIGxWaWV3LCBkaXJlY3RpdmVJZHgsIGRpcmVjdGl2ZVZhcnNJZHgsIGRlZikge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRGaXJzdENyZWF0ZVBhc3ModFZpZXcpO1xuICAgIGNvbnN0IGhvc3RCaW5kaW5ncyA9IGRlZi5ob3N0QmluZGluZ3M7XG4gICAgaWYgKGhvc3RCaW5kaW5ncykge1xuICAgICAgICBsZXQgaG9zdEJpbmRpbmdPcENvZGVzID0gdFZpZXcuaG9zdEJpbmRpbmdPcENvZGVzO1xuICAgICAgICBpZiAoaG9zdEJpbmRpbmdPcENvZGVzID09PSBudWxsKSB7XG4gICAgICAgICAgICBob3N0QmluZGluZ09wQ29kZXMgPSB0Vmlldy5ob3N0QmluZGluZ09wQ29kZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGVtZW50SW5keCA9IH50Tm9kZS5pbmRleDtcbiAgICAgICAgaWYgKGxhc3RTZWxlY3RlZEVsZW1lbnRJZHgoaG9zdEJpbmRpbmdPcENvZGVzKSAhPSBlbGVtZW50SW5keCkge1xuICAgICAgICAgICAgLy8gQ29uZGl0aW9uYWxseSBhZGQgc2VsZWN0IGVsZW1lbnQgc28gdGhhdCB3ZSBhcmUgbW9yZSBlZmZpY2llbnQgaW4gZXhlY3V0aW9uLlxuICAgICAgICAgICAgLy8gTk9URTogdGhpcyBpcyBzdHJpY3RseSBub3QgbmVjZXNzYXJ5IGFuZCBpdCB0cmFkZXMgY29kZSBzaXplIGZvciBydW50aW1lIHBlcmYuXG4gICAgICAgICAgICAvLyAoV2UgY291bGQganVzdCBhbHdheXMgYWRkIGl0LilcbiAgICAgICAgICAgIGhvc3RCaW5kaW5nT3BDb2Rlcy5wdXNoKGVsZW1lbnRJbmR4KTtcbiAgICAgICAgfVxuICAgICAgICBob3N0QmluZGluZ09wQ29kZXMucHVzaChkaXJlY3RpdmVJZHgsIGRpcmVjdGl2ZVZhcnNJZHgsIGhvc3RCaW5kaW5ncyk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXN0IHNlbGVjdGVkIGVsZW1lbnQgaW5kZXggaW4gdGhlIGBIb3N0QmluZGluZ09wQ29kZXNgXG4gKlxuICogRm9yIHBlcmYgcmVhc29ucyB3ZSBkb24ndCBuZWVkIHRvIHVwZGF0ZSB0aGUgc2VsZWN0ZWQgZWxlbWVudCBpbmRleCBpbiBgSG9zdEJpbmRpbmdPcENvZGVzYCBvbmx5XG4gKiBpZiBpdCBjaGFuZ2VzLiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBsYXN0IGluZGV4IChvciAnMCcgaWYgbm90IGZvdW5kLilcbiAqXG4gKiBTZWxlY3RlZCBlbGVtZW50IGluZGV4IGFyZSBvbmx5IHRoZSBvbmVzIHdoaWNoIGFyZSBuZWdhdGl2ZS5cbiAqL1xuZnVuY3Rpb24gbGFzdFNlbGVjdGVkRWxlbWVudElkeChob3N0QmluZGluZ09wQ29kZXMpIHtcbiAgICBsZXQgaSA9IGhvc3RCaW5kaW5nT3BDb2Rlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGkgPiAwKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaG9zdEJpbmRpbmdPcENvZGVzWy0taV07XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHZhbHVlIDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xufVxuLyoqXG4gKiBJbnN0YW50aWF0ZSBhbGwgdGhlIGRpcmVjdGl2ZXMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgcmVzb2x2ZWQgb24gdGhlIGN1cnJlbnQgbm9kZS5cbiAqL1xuZnVuY3Rpb24gaW5zdGFudGlhdGVBbGxEaXJlY3RpdmVzKHRWaWV3LCBsVmlldywgdE5vZGUsIG5hdGl2ZSkge1xuICAgIGNvbnN0IHN0YXJ0ID0gdE5vZGUuZGlyZWN0aXZlU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdE5vZGUuZGlyZWN0aXZlRW5kO1xuICAgIGlmICghdFZpZXcuZmlyc3RDcmVhdGVQYXNzKSB7XG4gICAgICAgIGdldE9yQ3JlYXRlTm9kZUluamVjdG9yRm9yTm9kZSh0Tm9kZSwgbFZpZXcpO1xuICAgIH1cbiAgICBhdHRhY2hQYXRjaERhdGEobmF0aXZlLCBsVmlldyk7XG4gICAgY29uc3QgaW5pdGlhbElucHV0cyA9IHROb2RlLmluaXRpYWxJbnB1dHM7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgY29uc3QgZGVmID0gdFZpZXcuZGF0YVtpXTtcbiAgICAgICAgY29uc3QgaXNDb21wb25lbnQgPSBpc0NvbXBvbmVudERlZihkZWYpO1xuICAgICAgICBpZiAoaXNDb21wb25lbnQpIHtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUTm9kZVR5cGUodE5vZGUsIDMgLyogQW55Uk5vZGUgKi8pO1xuICAgICAgICAgICAgYWRkQ29tcG9uZW50TG9naWMobFZpZXcsIHROb2RlLCBkZWYpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpcmVjdGl2ZSA9IGdldE5vZGVJbmplY3RhYmxlKGxWaWV3LCB0VmlldywgaSwgdE5vZGUpO1xuICAgICAgICBhdHRhY2hQYXRjaERhdGEoZGlyZWN0aXZlLCBsVmlldyk7XG4gICAgICAgIGlmIChpbml0aWFsSW5wdXRzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBzZXRJbnB1dHNGcm9tQXR0cnMobFZpZXcsIGkgLSBzdGFydCwgZGlyZWN0aXZlLCBkZWYsIHROb2RlLCBpbml0aWFsSW5wdXRzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNDb21wb25lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFZpZXcgPSBnZXRDb21wb25lbnRMVmlld0J5SW5kZXgodE5vZGUuaW5kZXgsIGxWaWV3KTtcbiAgICAgICAgICAgIGNvbXBvbmVudFZpZXdbQ09OVEVYVF0gPSBkaXJlY3RpdmU7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpbnZva2VEaXJlY3RpdmVzSG9zdEJpbmRpbmdzKHRWaWV3LCBsVmlldywgdE5vZGUpIHtcbiAgICBjb25zdCBzdGFydCA9IHROb2RlLmRpcmVjdGl2ZVN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHROb2RlLmRpcmVjdGl2ZUVuZDtcbiAgICBjb25zdCBmaXJzdENyZWF0ZVBhc3MgPSB0Vmlldy5maXJzdENyZWF0ZVBhc3M7XG4gICAgY29uc3QgZWxlbWVudEluZGV4ID0gdE5vZGUuaW5kZXg7XG4gICAgY29uc3QgY3VycmVudERpcmVjdGl2ZUluZGV4ID0gZ2V0Q3VycmVudERpcmVjdGl2ZUluZGV4KCk7XG4gICAgdHJ5IHtcbiAgICAgICAgc2V0U2VsZWN0ZWRJbmRleChlbGVtZW50SW5kZXgpO1xuICAgICAgICBmb3IgKGxldCBkaXJJbmRleCA9IHN0YXJ0OyBkaXJJbmRleCA8IGVuZDsgZGlySW5kZXgrKykge1xuICAgICAgICAgICAgY29uc3QgZGVmID0gdFZpZXcuZGF0YVtkaXJJbmRleF07XG4gICAgICAgICAgICBjb25zdCBkaXJlY3RpdmUgPSBsVmlld1tkaXJJbmRleF07XG4gICAgICAgICAgICBzZXRDdXJyZW50RGlyZWN0aXZlSW5kZXgoZGlySW5kZXgpO1xuICAgICAgICAgICAgaWYgKGRlZi5ob3N0QmluZGluZ3MgIT09IG51bGwgfHwgZGVmLmhvc3RWYXJzICE9PSAwIHx8IGRlZi5ob3N0QXR0cnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpbnZva2VIb3N0QmluZGluZ3NJbkNyZWF0aW9uTW9kZShkZWYsIGRpcmVjdGl2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIHNldFNlbGVjdGVkSW5kZXgoLTEpO1xuICAgICAgICBzZXRDdXJyZW50RGlyZWN0aXZlSW5kZXgoY3VycmVudERpcmVjdGl2ZUluZGV4KTtcbiAgICB9XG59XG4vKipcbiAqIEludm9rZSB0aGUgaG9zdCBiaW5kaW5ncyBpbiBjcmVhdGlvbiBtb2RlLlxuICpcbiAqIEBwYXJhbSBkZWYgYERpcmVjdGl2ZURlZmAgd2hpY2ggbWF5IGNvbnRhaW4gdGhlIGBob3N0QmluZGluZ3NgIGZ1bmN0aW9uLlxuICogQHBhcmFtIGRpcmVjdGl2ZSBJbnN0YW5jZSBvZiBkaXJlY3RpdmUuXG4gKi9cbmZ1bmN0aW9uIGludm9rZUhvc3RCaW5kaW5nc0luQ3JlYXRpb25Nb2RlKGRlZiwgZGlyZWN0aXZlKSB7XG4gICAgaWYgKGRlZi5ob3N0QmluZGluZ3MgIT09IG51bGwpIHtcbiAgICAgICAgZGVmLmhvc3RCaW5kaW5ncygxIC8qIENyZWF0ZSAqLywgZGlyZWN0aXZlKTtcbiAgICB9XG59XG4vKipcbiAqIE1hdGNoZXMgdGhlIGN1cnJlbnQgbm9kZSBhZ2FpbnN0IGFsbCBhdmFpbGFibGUgc2VsZWN0b3JzLlxuICogSWYgYSBjb21wb25lbnQgaXMgbWF0Y2hlZCAoYXQgbW9zdCBvbmUpLCBpdCBpcyByZXR1cm5lZCBpbiBmaXJzdCBwb3NpdGlvbiBpbiB0aGUgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGZpbmREaXJlY3RpdmVEZWZNYXRjaGVzKHRWaWV3LCB2aWV3RGF0YSwgdE5vZGUpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Rmlyc3RDcmVhdGVQYXNzKHRWaWV3KTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VE5vZGVUeXBlKHROb2RlLCAzIC8qIEFueVJOb2RlICovIHwgMTIgLyogQW55Q29udGFpbmVyICovKTtcbiAgICBjb25zdCByZWdpc3RyeSA9IHRWaWV3LmRpcmVjdGl2ZVJlZ2lzdHJ5O1xuICAgIGxldCBtYXRjaGVzID0gbnVsbDtcbiAgICBpZiAocmVnaXN0cnkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWdpc3RyeS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZGVmID0gcmVnaXN0cnlbaV07XG4gICAgICAgICAgICBpZiAoaXNOb2RlTWF0Y2hpbmdTZWxlY3Rvckxpc3QodE5vZGUsIGRlZi5zZWxlY3RvcnMsIC8qIGlzUHJvamVjdGlvbk1vZGUgKi8gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcyB8fCAobWF0Y2hlcyA9IG5nRGV2TW9kZSA/IG5ldyBNYXRjaGVzQXJyYXkoKSA6IFtdKTtcbiAgICAgICAgICAgICAgICBkaVB1YmxpY0luSW5qZWN0b3IoZ2V0T3JDcmVhdGVOb2RlSW5qZWN0b3JGb3JOb2RlKHROb2RlLCB2aWV3RGF0YSksIHRWaWV3LCBkZWYudHlwZSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzQ29tcG9uZW50RGVmKGRlZikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5nRGV2TW9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0VE5vZGVUeXBlKHROb2RlLCAyIC8qIEVsZW1lbnQgKi8sIGBcIiR7dE5vZGUudmFsdWV9XCIgdGFncyBjYW5ub3QgYmUgdXNlZCBhcyBjb21wb25lbnQgaG9zdHMuIGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBQbGVhc2UgdXNlIGEgZGlmZmVyZW50IHRhZyB0byBhY3RpdmF0ZSB0aGUgJHtzdHJpbmdpZnkoZGVmLnR5cGUpfSBjb21wb25lbnQuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodE5vZGUuZmxhZ3MgJiAyIC8qIGlzQ29tcG9uZW50SG9zdCAqLylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvd011bHRpcGxlQ29tcG9uZW50RXJyb3IodE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1hcmtBc0NvbXBvbmVudEhvc3QodFZpZXcsIHROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGNvbXBvbmVudCBpcyBhbHdheXMgc3RvcmVkIGZpcnN0IHdpdGggZGlyZWN0aXZlcyBhZnRlci5cbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy51bnNoaWZ0KGRlZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goZGVmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoZXM7XG59XG4vKipcbiAqIE1hcmtzIGEgZ2l2ZW4gVE5vZGUgYXMgYSBjb21wb25lbnQncyBob3N0LiBUaGlzIGNvbnNpc3RzIG9mOlxuICogLSBzZXR0aW5nIGFwcHJvcHJpYXRlIFROb2RlIGZsYWdzO1xuICogLSBzdG9yaW5nIGluZGV4IG9mIGNvbXBvbmVudCdzIGhvc3QgZWxlbWVudCBzbyBpdCB3aWxsIGJlIHF1ZXVlZCBmb3IgdmlldyByZWZyZXNoIGR1cmluZyBDRC5cbiAqL1xuZnVuY3Rpb24gbWFya0FzQ29tcG9uZW50SG9zdCh0VmlldywgaG9zdFROb2RlKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEZpcnN0Q3JlYXRlUGFzcyh0Vmlldyk7XG4gICAgaG9zdFROb2RlLmZsYWdzIHw9IDIgLyogaXNDb21wb25lbnRIb3N0ICovO1xuICAgICh0Vmlldy5jb21wb25lbnRzIHx8ICh0Vmlldy5jb21wb25lbnRzID0gbmdEZXZNb2RlID8gbmV3IFRWaWV3Q29tcG9uZW50cygpIDogW10pKVxuICAgICAgICAucHVzaChob3N0VE5vZGUuaW5kZXgpO1xufVxuLyoqIENhY2hlcyBsb2NhbCBuYW1lcyBhbmQgdGhlaXIgbWF0Y2hpbmcgZGlyZWN0aXZlIGluZGljZXMgZm9yIHF1ZXJ5IGFuZCB0ZW1wbGF0ZSBsb29rdXBzLiAqL1xuZnVuY3Rpb24gY2FjaGVNYXRjaGluZ0xvY2FsTmFtZXModE5vZGUsIGxvY2FsUmVmcywgZXhwb3J0c01hcCkge1xuICAgIGlmIChsb2NhbFJlZnMpIHtcbiAgICAgICAgY29uc3QgbG9jYWxOYW1lcyA9IHROb2RlLmxvY2FsTmFtZXMgPSBuZ0Rldk1vZGUgPyBuZXcgVE5vZGVMb2NhbE5hbWVzKCkgOiBbXTtcbiAgICAgICAgLy8gTG9jYWwgbmFtZXMgbXVzdCBiZSBzdG9yZWQgaW4gdE5vZGUgaW4gdGhlIHNhbWUgb3JkZXIgdGhhdCBsb2NhbFJlZnMgYXJlIGRlZmluZWRcbiAgICAgICAgLy8gaW4gdGhlIHRlbXBsYXRlIHRvIGVuc3VyZSB0aGUgZGF0YSBpcyBsb2FkZWQgaW4gdGhlIHNhbWUgc2xvdHMgYXMgdGhlaXIgcmVmc1xuICAgICAgICAvLyBpbiB0aGUgdGVtcGxhdGUgKGZvciB0ZW1wbGF0ZSBxdWVyaWVzKS5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhbFJlZnMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gZXhwb3J0c01hcFtsb2NhbFJlZnNbaSArIDFdXTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoLTMwMSAvKiBFWFBPUlRfTk9UX0ZPVU5EICovLCBuZ0Rldk1vZGUgJiYgYEV4cG9ydCBvZiBuYW1lICcke2xvY2FsUmVmc1tpICsgMV19JyBub3QgZm91bmQhYCk7XG4gICAgICAgICAgICBsb2NhbE5hbWVzLnB1c2gobG9jYWxSZWZzW2ldLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEJ1aWxkcyB1cCBhbiBleHBvcnQgbWFwIGFzIGRpcmVjdGl2ZXMgYXJlIGNyZWF0ZWQsIHNvIGxvY2FsIHJlZnMgY2FuIGJlIHF1aWNrbHkgbWFwcGVkXG4gKiB0byB0aGVpciBkaXJlY3RpdmUgaW5zdGFuY2VzLlxuICovXG5mdW5jdGlvbiBzYXZlTmFtZVRvRXhwb3J0TWFwKGRpcmVjdGl2ZUlkeCwgZGVmLCBleHBvcnRzTWFwKSB7XG4gICAgaWYgKGV4cG9ydHNNYXApIHtcbiAgICAgICAgaWYgKGRlZi5leHBvcnRBcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZWYuZXhwb3J0QXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzTWFwW2RlZi5leHBvcnRBc1tpXV0gPSBkaXJlY3RpdmVJZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RGVmKGRlZikpXG4gICAgICAgICAgICBleHBvcnRzTWFwWycnXSA9IGRpcmVjdGl2ZUlkeDtcbiAgICB9XG59XG4vKipcbiAqIEluaXRpYWxpemVzIHRoZSBmbGFncyBvbiB0aGUgY3VycmVudCBub2RlLCBzZXR0aW5nIGFsbCBpbmRpY2VzIHRvIHRoZSBpbml0aWFsIGluZGV4LFxuICogdGhlIGRpcmVjdGl2ZSBjb3VudCB0byAwLCBhbmQgYWRkaW5nIHRoZSBpc0NvbXBvbmVudCBmbGFnLlxuICogQHBhcmFtIGluZGV4IHRoZSBpbml0aWFsIGluZGV4XG4gKi9cbmZ1bmN0aW9uIGluaXRUTm9kZUZsYWdzKHROb2RlLCBpbmRleCwgbnVtYmVyT2ZEaXJlY3RpdmVzKSB7XG4gICAgbmdEZXZNb2RlICYmXG4gICAgICAgIGFzc2VydE5vdEVxdWFsKG51bWJlck9mRGlyZWN0aXZlcywgdE5vZGUuZGlyZWN0aXZlRW5kIC0gdE5vZGUuZGlyZWN0aXZlU3RhcnQsICdSZWFjaGVkIHRoZSBtYXggbnVtYmVyIG9mIGRpcmVjdGl2ZXMnKTtcbiAgICB0Tm9kZS5mbGFncyB8PSAxIC8qIGlzRGlyZWN0aXZlSG9zdCAqLztcbiAgICAvLyBXaGVuIHRoZSBmaXJzdCBkaXJlY3RpdmUgaXMgY3JlYXRlZCBvbiBhIG5vZGUsIHNhdmUgdGhlIGluZGV4XG4gICAgdE5vZGUuZGlyZWN0aXZlU3RhcnQgPSBpbmRleDtcbiAgICB0Tm9kZS5kaXJlY3RpdmVFbmQgPSBpbmRleCArIG51bWJlck9mRGlyZWN0aXZlcztcbiAgICB0Tm9kZS5wcm92aWRlckluZGV4ZXMgPSBpbmRleDtcbn1cbi8qKlxuICogU2V0dXAgZGlyZWN0aXZlIGZvciBpbnN0YW50aWF0aW9uLlxuICpcbiAqIFdlIG5lZWQgdG8gY3JlYXRlIGEgYE5vZGVJbmplY3RvckZhY3RvcnlgIHdoaWNoIGlzIHRoZW4gaW5zZXJ0ZWQgaW4gYm90aCB0aGUgYEJsdWVwcmludGAgYXMgd2VsbFxuICogYXMgYExWaWV3YC4gYFRWaWV3YCBnZXRzIHRoZSBgRGlyZWN0aXZlRGVmYC5cbiAqXG4gKiBAcGFyYW0gdFZpZXcgYFRWaWV3YFxuICogQHBhcmFtIHROb2RlIGBUTm9kZWBcbiAqIEBwYXJhbSBsVmlldyBgTFZpZXdgXG4gKiBAcGFyYW0gZGlyZWN0aXZlSW5kZXggSW5kZXggd2hlcmUgdGhlIGRpcmVjdGl2ZSB3aWxsIGJlIHN0b3JlZCBpbiB0aGUgRXhwYW5kby5cbiAqIEBwYXJhbSBkZWYgYERpcmVjdGl2ZURlZmBcbiAqL1xuZnVuY3Rpb24gY29uZmlndXJlVmlld1dpdGhEaXJlY3RpdmUodFZpZXcsIHROb2RlLCBsVmlldywgZGlyZWN0aXZlSW5kZXgsIGRlZikge1xuICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICBhc3NlcnRHcmVhdGVyVGhhbk9yRXF1YWwoZGlyZWN0aXZlSW5kZXgsIEhFQURFUl9PRkZTRVQsICdNdXN0IGJlIGluIEV4cGFuZG8gc2VjdGlvbicpO1xuICAgIHRWaWV3LmRhdGFbZGlyZWN0aXZlSW5kZXhdID0gZGVmO1xuICAgIGNvbnN0IGRpcmVjdGl2ZUZhY3RvcnkgPSBkZWYuZmFjdG9yeSB8fCAoZGVmLmZhY3RvcnkgPSBnZXRGYWN0b3J5RGVmKGRlZi50eXBlLCB0cnVlKSk7XG4gICAgY29uc3Qgbm9kZUluamVjdG9yRmFjdG9yeSA9IG5ldyBOb2RlSW5qZWN0b3JGYWN0b3J5KGRpcmVjdGl2ZUZhY3RvcnksIGlzQ29tcG9uZW50RGVmKGRlZiksIG51bGwpO1xuICAgIHRWaWV3LmJsdWVwcmludFtkaXJlY3RpdmVJbmRleF0gPSBub2RlSW5qZWN0b3JGYWN0b3J5O1xuICAgIGxWaWV3W2RpcmVjdGl2ZUluZGV4XSA9IG5vZGVJbmplY3RvckZhY3Rvcnk7XG4gICAgcmVnaXN0ZXJIb3N0QmluZGluZ09wQ29kZXModFZpZXcsIHROb2RlLCBsVmlldywgZGlyZWN0aXZlSW5kZXgsIGFsbG9jRXhwYW5kbyh0VmlldywgbFZpZXcsIGRlZi5ob3N0VmFycywgTk9fQ0hBTkdFKSwgZGVmKTtcbn1cbmZ1bmN0aW9uIGFkZENvbXBvbmVudExvZ2ljKGxWaWV3LCBob3N0VE5vZGUsIGRlZikge1xuICAgIGNvbnN0IG5hdGl2ZSA9IGdldE5hdGl2ZUJ5VE5vZGUoaG9zdFROb2RlLCBsVmlldyk7XG4gICAgY29uc3QgdFZpZXcgPSBnZXRPckNyZWF0ZVRDb21wb25lbnRWaWV3KGRlZik7XG4gICAgLy8gT25seSBjb21wb25lbnQgdmlld3Mgc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSB2aWV3IHRyZWUgZGlyZWN0bHkuIEVtYmVkZGVkIHZpZXdzIGFyZVxuICAgIC8vIGFjY2Vzc2VkIHRocm91Z2ggdGhlaXIgY29udGFpbmVycyBiZWNhdXNlIHRoZXkgbWF5IGJlIHJlbW92ZWQgLyByZS1hZGRlZCBsYXRlci5cbiAgICBjb25zdCByZW5kZXJlckZhY3RvcnkgPSBsVmlld1tSRU5ERVJFUl9GQUNUT1JZXTtcbiAgICBjb25zdCBjb21wb25lbnRWaWV3ID0gYWRkVG9WaWV3VHJlZShsVmlldywgY3JlYXRlTFZpZXcobFZpZXcsIHRWaWV3LCBudWxsLCBkZWYub25QdXNoID8gNjQgLyogRGlydHkgKi8gOiAxNiAvKiBDaGVja0Fsd2F5cyAqLywgbmF0aXZlLCBob3N0VE5vZGUsIHJlbmRlcmVyRmFjdG9yeSwgcmVuZGVyZXJGYWN0b3J5LmNyZWF0ZVJlbmRlcmVyKG5hdGl2ZSwgZGVmKSwgbnVsbCwgbnVsbCkpO1xuICAgIC8vIENvbXBvbmVudCB2aWV3IHdpbGwgYWx3YXlzIGJlIGNyZWF0ZWQgYmVmb3JlIGFueSBpbmplY3RlZCBMQ29udGFpbmVycyxcbiAgICAvLyBzbyB0aGlzIGlzIGEgcmVndWxhciBlbGVtZW50LCB3cmFwIGl0IHdpdGggdGhlIGNvbXBvbmVudCB2aWV3XG4gICAgbFZpZXdbaG9zdFROb2RlLmluZGV4XSA9IGNvbXBvbmVudFZpZXc7XG59XG5mdW5jdGlvbiBlbGVtZW50QXR0cmlidXRlSW50ZXJuYWwodE5vZGUsIGxWaWV3LCBuYW1lLCB2YWx1ZSwgc2FuaXRpemVyLCBuYW1lc3BhY2UpIHtcbiAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgIGFzc2VydE5vdFNhbWUodmFsdWUsIE5PX0NIQU5HRSwgJ0luY29taW5nIHZhbHVlIHNob3VsZCBuZXZlciBiZSBOT19DSEFOR0UuJyk7XG4gICAgICAgIHZhbGlkYXRlQWdhaW5zdEV2ZW50QXR0cmlidXRlcyhuYW1lKTtcbiAgICAgICAgYXNzZXJ0VE5vZGVUeXBlKHROb2RlLCAyIC8qIEVsZW1lbnQgKi8sIGBBdHRlbXB0ZWQgdG8gc2V0IGF0dHJpYnV0ZSBcXGAke25hbWV9XFxgIG9uIGEgY29udGFpbmVyIG5vZGUuIGAgK1xuICAgICAgICAgICAgYEhvc3QgYmluZGluZ3MgYXJlIG5vdCB2YWxpZCBvbiBuZy1jb250YWluZXIgb3IgbmctdGVtcGxhdGUuYCk7XG4gICAgfVxuICAgIGNvbnN0IGVsZW1lbnQgPSBnZXROYXRpdmVCeVROb2RlKHROb2RlLCBsVmlldyk7XG4gICAgc2V0RWxlbWVudEF0dHJpYnV0ZShsVmlld1tSRU5ERVJFUl0sIGVsZW1lbnQsIG5hbWVzcGFjZSwgdE5vZGUudmFsdWUsIG5hbWUsIHZhbHVlLCBzYW5pdGl6ZXIpO1xufVxuZnVuY3Rpb24gc2V0RWxlbWVudEF0dHJpYnV0ZShyZW5kZXJlciwgZWxlbWVudCwgbmFtZXNwYWNlLCB0YWdOYW1lLCBuYW1lLCB2YWx1ZSwgc2FuaXRpemVyKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5yZW5kZXJlclJlbW92ZUF0dHJpYnV0ZSsrO1xuICAgICAgICBpc1Byb2NlZHVyYWxSZW5kZXJlcihyZW5kZXJlcikgPyByZW5kZXJlci5yZW1vdmVBdHRyaWJ1dGUoZWxlbWVudCwgbmFtZSwgbmFtZXNwYWNlKSA6XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJTZXRBdHRyaWJ1dGUrKztcbiAgICAgICAgY29uc3Qgc3RyVmFsdWUgPSBzYW5pdGl6ZXIgPT0gbnVsbCA/IHJlbmRlclN0cmluZ2lmeSh2YWx1ZSkgOiBzYW5pdGl6ZXIodmFsdWUsIHRhZ05hbWUgfHwgJycsIG5hbWUpO1xuICAgICAgICBpZiAoaXNQcm9jZWR1cmFsUmVuZGVyZXIocmVuZGVyZXIpKSB7XG4gICAgICAgICAgICByZW5kZXJlci5zZXRBdHRyaWJ1dGUoZWxlbWVudCwgbmFtZSwgc3RyVmFsdWUsIG5hbWVzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuYW1lc3BhY2UgPyBlbGVtZW50LnNldEF0dHJpYnV0ZU5TKG5hbWVzcGFjZSwgbmFtZSwgc3RyVmFsdWUpIDpcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShuYW1lLCBzdHJWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFNldHMgaW5pdGlhbCBpbnB1dCBwcm9wZXJ0aWVzIG9uIGRpcmVjdGl2ZSBpbnN0YW5jZXMgZnJvbSBhdHRyaWJ1dGUgZGF0YVxuICpcbiAqIEBwYXJhbSBsVmlldyBDdXJyZW50IExWaWV3IHRoYXQgaXMgYmVpbmcgcHJvY2Vzc2VkLlxuICogQHBhcmFtIGRpcmVjdGl2ZUluZGV4IEluZGV4IG9mIHRoZSBkaXJlY3RpdmUgaW4gZGlyZWN0aXZlcyBhcnJheVxuICogQHBhcmFtIGluc3RhbmNlIEluc3RhbmNlIG9mIHRoZSBkaXJlY3RpdmUgb24gd2hpY2ggdG8gc2V0IHRoZSBpbml0aWFsIGlucHV0c1xuICogQHBhcmFtIGRlZiBUaGUgZGlyZWN0aXZlIGRlZiB0aGF0IGNvbnRhaW5zIHRoZSBsaXN0IG9mIGlucHV0c1xuICogQHBhcmFtIHROb2RlIFRoZSBzdGF0aWMgZGF0YSBmb3IgdGhpcyBub2RlXG4gKi9cbmZ1bmN0aW9uIHNldElucHV0c0Zyb21BdHRycyhsVmlldywgZGlyZWN0aXZlSW5kZXgsIGluc3RhbmNlLCBkZWYsIHROb2RlLCBpbml0aWFsSW5wdXREYXRhKSB7XG4gICAgY29uc3QgaW5pdGlhbElucHV0cyA9IGluaXRpYWxJbnB1dERhdGFbZGlyZWN0aXZlSW5kZXhdO1xuICAgIGlmIChpbml0aWFsSW5wdXRzICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHNldElucHV0ID0gZGVmLnNldElucHV0O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluaXRpYWxJbnB1dHMubGVuZ3RoOykge1xuICAgICAgICAgICAgY29uc3QgcHVibGljTmFtZSA9IGluaXRpYWxJbnB1dHNbaSsrXTtcbiAgICAgICAgICAgIGNvbnN0IHByaXZhdGVOYW1lID0gaW5pdGlhbElucHV0c1tpKytdO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBpbml0aWFsSW5wdXRzW2krK107XG4gICAgICAgICAgICBpZiAoc2V0SW5wdXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBkZWYuc2V0SW5wdXQoaW5zdGFuY2UsIHZhbHVlLCBwdWJsaWNOYW1lLCBwcml2YXRlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZVtwcml2YXRlTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZ0Rldk1vZGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYXRpdmVFbGVtZW50ID0gZ2V0TmF0aXZlQnlUTm9kZSh0Tm9kZSwgbFZpZXcpO1xuICAgICAgICAgICAgICAgIHNldE5nUmVmbGVjdFByb3BlcnR5KGxWaWV3LCBuYXRpdmVFbGVtZW50LCB0Tm9kZS50eXBlLCBwcml2YXRlTmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBHZW5lcmF0ZXMgaW5pdGlhbElucHV0RGF0YSBmb3IgYSBub2RlIGFuZCBzdG9yZXMgaXQgaW4gdGhlIHRlbXBsYXRlJ3Mgc3RhdGljIHN0b3JhZ2VcbiAqIHNvIHN1YnNlcXVlbnQgdGVtcGxhdGUgaW52b2NhdGlvbnMgZG9uJ3QgaGF2ZSB0byByZWNhbGN1bGF0ZSBpdC5cbiAqXG4gKiBpbml0aWFsSW5wdXREYXRhIGlzIGFuIGFycmF5IGNvbnRhaW5pbmcgdmFsdWVzIHRoYXQgbmVlZCB0byBiZSBzZXQgYXMgaW5wdXQgcHJvcGVydGllc1xuICogZm9yIGRpcmVjdGl2ZXMgb24gdGhpcyBub2RlLCBidXQgb25seSBvbmNlIG9uIGNyZWF0aW9uLiBXZSBuZWVkIHRoaXMgYXJyYXkgdG8gc3VwcG9ydFxuICogdGhlIGNhc2Ugd2hlcmUgeW91IHNldCBhbiBASW5wdXQgcHJvcGVydHkgb2YgYSBkaXJlY3RpdmUgdXNpbmcgYXR0cmlidXRlLWxpa2Ugc3ludGF4LlxuICogZS5nLiBpZiB5b3UgaGF2ZSBhIGBuYW1lYCBASW5wdXQsIHlvdSBjYW4gc2V0IGl0IG9uY2UgbGlrZSB0aGlzOlxuICpcbiAqIDxteS1jb21wb25lbnQgbmFtZT1cIkJlc3NcIj48L215LWNvbXBvbmVudD5cbiAqXG4gKiBAcGFyYW0gaW5wdXRzIFRoZSBsaXN0IG9mIGlucHV0cyBmcm9tIHRoZSBkaXJlY3RpdmUgZGVmXG4gKiBAcGFyYW0gYXR0cnMgVGhlIHN0YXRpYyBhdHRycyBvbiB0aGlzIG5vZGVcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVJbml0aWFsSW5wdXRzKGlucHV0cywgYXR0cnMpIHtcbiAgICBsZXQgaW5wdXRzVG9TdG9yZSA9IG51bGw7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgYXR0cnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGF0dHJOYW1lID0gYXR0cnNbaV07XG4gICAgICAgIGlmIChhdHRyTmFtZSA9PT0gMCAvKiBOYW1lc3BhY2VVUkkgKi8pIHtcbiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCBhbGxvdyBpbnB1dHMgb24gbmFtZXNwYWNlZCBhdHRyaWJ1dGVzLlxuICAgICAgICAgICAgaSArPSA0O1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXR0ck5hbWUgPT09IDUgLyogUHJvamVjdEFzICovKSB7XG4gICAgICAgICAgICAvLyBTa2lwIG92ZXIgdGhlIGBuZ1Byb2plY3RBc2AgdmFsdWUuXG4gICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSBoaXQgYW55IG90aGVyIGF0dHJpYnV0ZSBtYXJrZXJzLCB3ZSdyZSBkb25lIGFueXdheS4gTm9uZSBvZiB0aG9zZSBhcmUgdmFsaWQgaW5wdXRzLlxuICAgICAgICBpZiAodHlwZW9mIGF0dHJOYW1lID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAoaW5wdXRzLmhhc093blByb3BlcnR5KGF0dHJOYW1lKSkge1xuICAgICAgICAgICAgaWYgKGlucHV0c1RvU3RvcmUgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgaW5wdXRzVG9TdG9yZSA9IFtdO1xuICAgICAgICAgICAgaW5wdXRzVG9TdG9yZS5wdXNoKGF0dHJOYW1lLCBpbnB1dHNbYXR0ck5hbWVdLCBhdHRyc1tpICsgMV0pO1xuICAgICAgICB9XG4gICAgICAgIGkgKz0gMjtcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0c1RvU3RvcmU7XG59XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLyBWaWV3Q29udGFpbmVyICYgVmlld1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIE5vdCBzdXJlIHdoeSBJIG5lZWQgdG8gZG8gYGFueWAgaGVyZSBidXQgVFMgY29tcGxhaW5zIGxhdGVyLlxuY29uc3QgTENvbnRhaW5lckFycmF5ID0gY2xhc3MgTENvbnRhaW5lciBleHRlbmRzIEFycmF5IHtcbn07XG4vKipcbiAqIENyZWF0ZXMgYSBMQ29udGFpbmVyLCBlaXRoZXIgZnJvbSBhIGNvbnRhaW5lciBpbnN0cnVjdGlvbiwgb3IgZm9yIGEgVmlld0NvbnRhaW5lclJlZi5cbiAqXG4gKiBAcGFyYW0gaG9zdE5hdGl2ZSBUaGUgaG9zdCBlbGVtZW50IGZvciB0aGUgTENvbnRhaW5lclxuICogQHBhcmFtIGhvc3RUTm9kZSBUaGUgaG9zdCBUTm9kZSBmb3IgdGhlIExDb250YWluZXJcbiAqIEBwYXJhbSBjdXJyZW50VmlldyBUaGUgcGFyZW50IHZpZXcgb2YgdGhlIExDb250YWluZXJcbiAqIEBwYXJhbSBuYXRpdmUgVGhlIG5hdGl2ZSBjb21tZW50IGVsZW1lbnRcbiAqIEBwYXJhbSBpc0ZvclZpZXdDb250YWluZXJSZWYgT3B0aW9uYWwgYSBmbGFnIGluZGljYXRpbmcgdGhlIFZpZXdDb250YWluZXJSZWYgY2FzZVxuICogQHJldHVybnMgTENvbnRhaW5lclxuICovXG5mdW5jdGlvbiBjcmVhdGVMQ29udGFpbmVyKGhvc3ROYXRpdmUsIGN1cnJlbnRWaWV3LCBuYXRpdmUsIHROb2RlKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExWaWV3KGN1cnJlbnRWaWV3KTtcbiAgICBuZ0Rldk1vZGUgJiYgIWlzUHJvY2VkdXJhbFJlbmRlcmVyKGN1cnJlbnRWaWV3W1JFTkRFUkVSXSkgJiYgYXNzZXJ0RG9tTm9kZShuYXRpdmUpO1xuICAgIC8vIGh0dHBzOi8vanNwZXJmLmNvbS9hcnJheS1saXRlcmFsLXZzLW5ldy1hcnJheS1yZWFsbHlcbiAgICBjb25zdCBsQ29udGFpbmVyID0gbmV3IChuZ0Rldk1vZGUgPyBMQ29udGFpbmVyQXJyYXkgOiBBcnJheSkoaG9zdE5hdGl2ZSwgLy8gaG9zdCBuYXRpdmVcbiAgICB0cnVlLCAvLyBCb29sZWFuIGB0cnVlYCBpbiB0aGlzIHBvc2l0aW9uIHNpZ25pZmllcyB0aGF0IHRoaXMgaXMgYW4gYExDb250YWluZXJgXG4gICAgZmFsc2UsIC8vIGhhcyB0cmFuc3BsYW50ZWQgdmlld3NcbiAgICBjdXJyZW50VmlldywgLy8gcGFyZW50XG4gICAgbnVsbCwgLy8gbmV4dFxuICAgIDAsIC8vIHRyYW5zcGxhbnRlZCB2aWV3cyB0byByZWZyZXNoIGNvdW50XG4gICAgdE5vZGUsIC8vIHRfaG9zdFxuICAgIG5hdGl2ZSwgLy8gbmF0aXZlLFxuICAgIG51bGwsIC8vIHZpZXcgcmVmc1xuICAgIG51bGwpO1xuICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICBhc3NlcnRFcXVhbChsQ29udGFpbmVyLmxlbmd0aCwgQ09OVEFJTkVSX0hFQURFUl9PRkZTRVQsICdTaG91bGQgYWxsb2NhdGUgY29ycmVjdCBudW1iZXIgb2Ygc2xvdHMgZm9yIExDb250YWluZXIgaGVhZGVyLicpO1xuICAgIG5nRGV2TW9kZSAmJiBhdHRhY2hMQ29udGFpbmVyRGVidWcobENvbnRhaW5lcik7XG4gICAgcmV0dXJuIGxDb250YWluZXI7XG59XG4vKipcbiAqIEdvZXMgb3ZlciBlbWJlZGRlZCB2aWV3cyAob25lcyBjcmVhdGVkIHRocm91Z2ggVmlld0NvbnRhaW5lclJlZiBBUElzKSBhbmQgcmVmcmVzaGVzXG4gKiB0aGVtIGJ5IGV4ZWN1dGluZyBhbiBhc3NvY2lhdGVkIHRlbXBsYXRlIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiByZWZyZXNoRW1iZWRkZWRWaWV3cyhsVmlldykge1xuICAgIGZvciAobGV0IGxDb250YWluZXIgPSBnZXRGaXJzdExDb250YWluZXIobFZpZXcpOyBsQ29udGFpbmVyICE9PSBudWxsOyBsQ29udGFpbmVyID0gZ2V0TmV4dExDb250YWluZXIobENvbnRhaW5lcikpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IENPTlRBSU5FUl9IRUFERVJfT0ZGU0VUOyBpIDwgbENvbnRhaW5lci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZW1iZWRkZWRMVmlldyA9IGxDb250YWluZXJbaV07XG4gICAgICAgICAgICBjb25zdCBlbWJlZGRlZFRWaWV3ID0gZW1iZWRkZWRMVmlld1tUVklFV107XG4gICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChlbWJlZGRlZFRWaWV3LCAnVFZpZXcgbXVzdCBiZSBhbGxvY2F0ZWQnKTtcbiAgICAgICAgICAgIGlmICh2aWV3QXR0YWNoZWRUb0NoYW5nZURldGVjdG9yKGVtYmVkZGVkTFZpZXcpKSB7XG4gICAgICAgICAgICAgICAgcmVmcmVzaFZpZXcoZW1iZWRkZWRUVmlldywgZW1iZWRkZWRMVmlldywgZW1iZWRkZWRUVmlldy50ZW1wbGF0ZSwgZW1iZWRkZWRMVmlld1tDT05URVhUXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIE1hcmsgdHJhbnNwbGFudGVkIHZpZXdzIGFzIG5lZWRpbmcgdG8gYmUgcmVmcmVzaGVkIGF0IHRoZWlyIGluc2VydGlvbiBwb2ludHMuXG4gKlxuICogQHBhcmFtIGxWaWV3IFRoZSBgTFZpZXdgIHRoYXQgbWF5IGhhdmUgdHJhbnNwbGFudGVkIHZpZXdzLlxuICovXG5mdW5jdGlvbiBtYXJrVHJhbnNwbGFudGVkVmlld3NGb3JSZWZyZXNoKGxWaWV3KSB7XG4gICAgZm9yIChsZXQgbENvbnRhaW5lciA9IGdldEZpcnN0TENvbnRhaW5lcihsVmlldyk7IGxDb250YWluZXIgIT09IG51bGw7IGxDb250YWluZXIgPSBnZXROZXh0TENvbnRhaW5lcihsQ29udGFpbmVyKSkge1xuICAgICAgICBpZiAoIWxDb250YWluZXJbSEFTX1RSQU5TUExBTlRFRF9WSUVXU10pXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY29uc3QgbW92ZWRWaWV3cyA9IGxDb250YWluZXJbTU9WRURfVklFV1NdO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChtb3ZlZFZpZXdzLCAnVHJhbnNwbGFudGVkIFZpZXcgZmxhZ3Mgc2V0IGJ1dCBtaXNzaW5nIE1PVkVEX1ZJRVdTJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW92ZWRWaWV3cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbW92ZWRMVmlldyA9IG1vdmVkVmlld3NbaV07XG4gICAgICAgICAgICBjb25zdCBpbnNlcnRpb25MQ29udGFpbmVyID0gbW92ZWRMVmlld1tQQVJFTlRdO1xuICAgICAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydExDb250YWluZXIoaW5zZXJ0aW9uTENvbnRhaW5lcik7XG4gICAgICAgICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGluY3JlbWVudCB0aGUgY291bnRlciBpZiB0aGUgbW92ZWQgTFZpZXcgd2FzIGFscmVhZHkgbWFya2VkIGZvclxuICAgICAgICAgICAgLy8gcmVmcmVzaC5cbiAgICAgICAgICAgIGlmICgobW92ZWRMVmlld1tGTEFHU10gJiAxMDI0IC8qIFJlZnJlc2hUcmFuc3BsYW50ZWRWaWV3ICovKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZVRyYW5zcGxhbnRlZFZpZXdDb3VudChpbnNlcnRpb25MQ29udGFpbmVyLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vdGUsIGl0IGlzIHBvc3NpYmxlIHRoYXQgdGhlIGBtb3ZlZFZpZXdzYCBpcyB0cmFja2luZyB2aWV3cyB0aGF0IGFyZSB0cmFuc3BsYW50ZWQgKmFuZCpcbiAgICAgICAgICAgIC8vIHRob3NlIHRoYXQgYXJlbid0IChkZWNsYXJhdGlvbiBjb21wb25lbnQgPT09IGluc2VydGlvbiBjb21wb25lbnQpLiBJbiB0aGUgbGF0dGVyIGNhc2UsXG4gICAgICAgICAgICAvLyBpdCdzIGZpbmUgdG8gYWRkIHRoZSBmbGFnLCBhcyB3ZSB3aWxsIGNsZWFyIGl0IGltbWVkaWF0ZWx5IGluXG4gICAgICAgICAgICAvLyBgcmVmcmVzaEVtYmVkZGVkVmlld3NgIGZvciB0aGUgdmlldyBjdXJyZW50bHkgYmVpbmcgcmVmcmVzaGVkLlxuICAgICAgICAgICAgbW92ZWRMVmlld1tGTEFHU10gfD0gMTAyNCAvKiBSZWZyZXNoVHJhbnNwbGFudGVkVmlldyAqLztcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vLy8vLy8vLy8vLy9cbi8qKlxuICogUmVmcmVzaGVzIGNvbXBvbmVudHMgYnkgZW50ZXJpbmcgdGhlIGNvbXBvbmVudCB2aWV3IGFuZCBwcm9jZXNzaW5nIGl0cyBiaW5kaW5ncywgcXVlcmllcywgZXRjLlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRIb3N0SWR4ICBFbGVtZW50IGluZGV4IGluIExWaWV3W10gKGFkanVzdGVkIGZvciBIRUFERVJfT0ZGU0VUKVxuICovXG5mdW5jdGlvbiByZWZyZXNoQ29tcG9uZW50KGhvc3RMVmlldywgY29tcG9uZW50SG9zdElkeCkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRFcXVhbChpc0NyZWF0aW9uTW9kZShob3N0TFZpZXcpLCBmYWxzZSwgJ1Nob3VsZCBiZSBydW4gaW4gdXBkYXRlIG1vZGUnKTtcbiAgICBjb25zdCBjb21wb25lbnRWaWV3ID0gZ2V0Q29tcG9uZW50TFZpZXdCeUluZGV4KGNvbXBvbmVudEhvc3RJZHgsIGhvc3RMVmlldyk7XG4gICAgLy8gT25seSBhdHRhY2hlZCBjb21wb25lbnRzIHRoYXQgYXJlIENoZWNrQWx3YXlzIG9yIE9uUHVzaCBhbmQgZGlydHkgc2hvdWxkIGJlIHJlZnJlc2hlZFxuICAgIGlmICh2aWV3QXR0YWNoZWRUb0NoYW5nZURldGVjdG9yKGNvbXBvbmVudFZpZXcpKSB7XG4gICAgICAgIGNvbnN0IHRWaWV3ID0gY29tcG9uZW50Vmlld1tUVklFV107XG4gICAgICAgIGlmIChjb21wb25lbnRWaWV3W0ZMQUdTXSAmICgxNiAvKiBDaGVja0Fsd2F5cyAqLyB8IDY0IC8qIERpcnR5ICovKSkge1xuICAgICAgICAgICAgcmVmcmVzaFZpZXcodFZpZXcsIGNvbXBvbmVudFZpZXcsIHRWaWV3LnRlbXBsYXRlLCBjb21wb25lbnRWaWV3W0NPTlRFWFRdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb21wb25lbnRWaWV3W1RSQU5TUExBTlRFRF9WSUVXU19UT19SRUZSRVNIXSA+IDApIHtcbiAgICAgICAgICAgIC8vIE9ubHkgYXR0YWNoZWQgY29tcG9uZW50cyB0aGF0IGFyZSBDaGVja0Fsd2F5cyBvciBPblB1c2ggYW5kIGRpcnR5IHNob3VsZCBiZSByZWZyZXNoZWRcbiAgICAgICAgICAgIHJlZnJlc2hDb250YWluc0RpcnR5Vmlldyhjb21wb25lbnRWaWV3KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogUmVmcmVzaGVzIGFsbCB0cmFuc3BsYW50ZWQgdmlld3MgbWFya2VkIHdpdGggYExWaWV3RmxhZ3MuUmVmcmVzaFRyYW5zcGxhbnRlZFZpZXdgIHRoYXQgYXJlXG4gKiBjaGlsZHJlbiBvciBkZXNjZW5kYW50cyBvZiB0aGUgZ2l2ZW4gbFZpZXcuXG4gKlxuICogQHBhcmFtIGxWaWV3IFRoZSBsVmlldyB3aGljaCBjb250YWlucyBkZXNjZW5kYW50IHRyYW5zcGxhbnRlZCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVmcmVzaGVkLlxuICovXG5mdW5jdGlvbiByZWZyZXNoQ29udGFpbnNEaXJ0eVZpZXcobFZpZXcpIHtcbiAgICBmb3IgKGxldCBsQ29udGFpbmVyID0gZ2V0Rmlyc3RMQ29udGFpbmVyKGxWaWV3KTsgbENvbnRhaW5lciAhPT0gbnVsbDsgbENvbnRhaW5lciA9IGdldE5leHRMQ29udGFpbmVyKGxDb250YWluZXIpKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBDT05UQUlORVJfSEVBREVSX09GRlNFVDsgaSA8IGxDb250YWluZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVtYmVkZGVkTFZpZXcgPSBsQ29udGFpbmVyW2ldO1xuICAgICAgICAgICAgaWYgKGVtYmVkZGVkTFZpZXdbRkxBR1NdICYgMTAyNCAvKiBSZWZyZXNoVHJhbnNwbGFudGVkVmlldyAqLykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVtYmVkZGVkVFZpZXcgPSBlbWJlZGRlZExWaWV3W1RWSUVXXTtcbiAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChlbWJlZGRlZFRWaWV3LCAnVFZpZXcgbXVzdCBiZSBhbGxvY2F0ZWQnKTtcbiAgICAgICAgICAgICAgICByZWZyZXNoVmlldyhlbWJlZGRlZFRWaWV3LCBlbWJlZGRlZExWaWV3LCBlbWJlZGRlZFRWaWV3LnRlbXBsYXRlLCBlbWJlZGRlZExWaWV3W0NPTlRFWFRdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGVtYmVkZGVkTFZpZXdbVFJBTlNQTEFOVEVEX1ZJRVdTX1RPX1JFRlJFU0hdID4gMCkge1xuICAgICAgICAgICAgICAgIHJlZnJlc2hDb250YWluc0RpcnR5VmlldyhlbWJlZGRlZExWaWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0VmlldyA9IGxWaWV3W1RWSUVXXTtcbiAgICAvLyBSZWZyZXNoIGNoaWxkIGNvbXBvbmVudCB2aWV3cy5cbiAgICBjb25zdCBjb21wb25lbnRzID0gdFZpZXcuY29tcG9uZW50cztcbiAgICBpZiAoY29tcG9uZW50cyAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFZpZXcgPSBnZXRDb21wb25lbnRMVmlld0J5SW5kZXgoY29tcG9uZW50c1tpXSwgbFZpZXcpO1xuICAgICAgICAgICAgLy8gT25seSBhdHRhY2hlZCBjb21wb25lbnRzIHRoYXQgYXJlIENoZWNrQWx3YXlzIG9yIE9uUHVzaCBhbmQgZGlydHkgc2hvdWxkIGJlIHJlZnJlc2hlZFxuICAgICAgICAgICAgaWYgKHZpZXdBdHRhY2hlZFRvQ2hhbmdlRGV0ZWN0b3IoY29tcG9uZW50VmlldykgJiZcbiAgICAgICAgICAgICAgICBjb21wb25lbnRWaWV3W1RSQU5TUExBTlRFRF9WSUVXU19UT19SRUZSRVNIXSA+IDApIHtcbiAgICAgICAgICAgICAgICByZWZyZXNoQ29udGFpbnNEaXJ0eVZpZXcoY29tcG9uZW50Vmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiByZW5kZXJDb21wb25lbnQkMShob3N0TFZpZXcsIGNvbXBvbmVudEhvc3RJZHgpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RXF1YWwoaXNDcmVhdGlvbk1vZGUoaG9zdExWaWV3KSwgdHJ1ZSwgJ1Nob3VsZCBiZSBydW4gaW4gY3JlYXRpb24gbW9kZScpO1xuICAgIGNvbnN0IGNvbXBvbmVudFZpZXcgPSBnZXRDb21wb25lbnRMVmlld0J5SW5kZXgoY29tcG9uZW50SG9zdElkeCwgaG9zdExWaWV3KTtcbiAgICBjb25zdCBjb21wb25lbnRUVmlldyA9IGNvbXBvbmVudFZpZXdbVFZJRVddO1xuICAgIHN5bmNWaWV3V2l0aEJsdWVwcmludChjb21wb25lbnRUVmlldywgY29tcG9uZW50Vmlldyk7XG4gICAgcmVuZGVyVmlldyhjb21wb25lbnRUVmlldywgY29tcG9uZW50VmlldywgY29tcG9uZW50Vmlld1tDT05URVhUXSk7XG59XG4vKipcbiAqIFN5bmNzIGFuIExWaWV3IGluc3RhbmNlIHdpdGggaXRzIGJsdWVwcmludCBpZiB0aGV5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jLlxuICpcbiAqIFR5cGljYWxseSwgYmx1ZXByaW50cyBhbmQgdGhlaXIgdmlldyBpbnN0YW5jZXMgc2hvdWxkIGFsd2F5cyBiZSBpbiBzeW5jLCBzbyB0aGUgbG9vcCBoZXJlXG4gKiB3aWxsIGJlIHNraXBwZWQuIEhvd2V2ZXIsIGNvbnNpZGVyIHRoaXMgY2FzZSBvZiB0d28gY29tcG9uZW50cyBzaWRlLWJ5LXNpZGU6XG4gKlxuICogQXBwIHRlbXBsYXRlOlxuICogYGBgXG4gKiA8Y29tcD48L2NvbXA+XG4gKiA8Y29tcD48L2NvbXA+XG4gKiBgYGBcbiAqXG4gKiBUaGUgZm9sbG93aW5nIHdpbGwgaGFwcGVuOlxuICogMS4gQXBwIHRlbXBsYXRlIGJlZ2lucyBwcm9jZXNzaW5nLlxuICogMi4gRmlyc3QgPGNvbXA+IGlzIG1hdGNoZWQgYXMgYSBjb21wb25lbnQgYW5kIGl0cyBMVmlldyBpcyBjcmVhdGVkLlxuICogMy4gU2Vjb25kIDxjb21wPiBpcyBtYXRjaGVkIGFzIGEgY29tcG9uZW50IGFuZCBpdHMgTFZpZXcgaXMgY3JlYXRlZC5cbiAqIDQuIEFwcCB0ZW1wbGF0ZSBjb21wbGV0ZXMgcHJvY2Vzc2luZywgc28gaXQncyB0aW1lIHRvIGNoZWNrIGNoaWxkIHRlbXBsYXRlcy5cbiAqIDUuIEZpcnN0IDxjb21wPiB0ZW1wbGF0ZSBpcyBjaGVja2VkLiBJdCBoYXMgYSBkaXJlY3RpdmUsIHNvIGl0cyBkZWYgaXMgcHVzaGVkIHRvIGJsdWVwcmludC5cbiAqIDYuIFNlY29uZCA8Y29tcD4gdGVtcGxhdGUgaXMgY2hlY2tlZC4gSXRzIGJsdWVwcmludCBoYXMgYmVlbiB1cGRhdGVkIGJ5IHRoZSBmaXJzdFxuICogPGNvbXA+IHRlbXBsYXRlLCBidXQgaXRzIExWaWV3IHdhcyBjcmVhdGVkIGJlZm9yZSB0aGlzIHVwZGF0ZSwgc28gaXQgaXMgb3V0IG9mIHN5bmMuXG4gKlxuICogTm90ZSB0aGF0IGVtYmVkZGVkIHZpZXdzIGluc2lkZSBuZ0ZvciBsb29wcyB3aWxsIG5ldmVyIGJlIG91dCBvZiBzeW5jIGJlY2F1c2UgdGhlc2Ugdmlld3NcbiAqIGFyZSBwcm9jZXNzZWQgYXMgc29vbiBhcyB0aGV5IGFyZSBjcmVhdGVkLlxuICpcbiAqIEBwYXJhbSB0VmlldyBUaGUgYFRWaWV3YCB0aGF0IGNvbnRhaW5zIHRoZSBibHVlcHJpbnQgZm9yIHN5bmNpbmdcbiAqIEBwYXJhbSBsVmlldyBUaGUgdmlldyB0byBzeW5jXG4gKi9cbmZ1bmN0aW9uIHN5bmNWaWV3V2l0aEJsdWVwcmludCh0VmlldywgbFZpZXcpIHtcbiAgICBmb3IgKGxldCBpID0gbFZpZXcubGVuZ3RoOyBpIDwgdFZpZXcuYmx1ZXByaW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxWaWV3LnB1c2godFZpZXcuYmx1ZXByaW50W2ldKTtcbiAgICB9XG59XG4vKipcbiAqIEFkZHMgTFZpZXcgb3IgTENvbnRhaW5lciB0byB0aGUgZW5kIG9mIHRoZSBjdXJyZW50IHZpZXcgdHJlZS5cbiAqXG4gKiBUaGlzIHN0cnVjdHVyZSB3aWxsIGJlIHVzZWQgdG8gdHJhdmVyc2UgdGhyb3VnaCBuZXN0ZWQgdmlld3MgdG8gcmVtb3ZlIGxpc3RlbmVyc1xuICogYW5kIGNhbGwgb25EZXN0cm95IGNhbGxiYWNrcy5cbiAqXG4gKiBAcGFyYW0gbFZpZXcgVGhlIHZpZXcgd2hlcmUgTFZpZXcgb3IgTENvbnRhaW5lciBzaG91bGQgYmUgYWRkZWRcbiAqIEBwYXJhbSBhZGp1c3RlZEhvc3RJbmRleCBJbmRleCBvZiB0aGUgdmlldydzIGhvc3Qgbm9kZSBpbiBMVmlld1tdLCBhZGp1c3RlZCBmb3IgaGVhZGVyXG4gKiBAcGFyYW0gbFZpZXdPckxDb250YWluZXIgVGhlIExWaWV3IG9yIExDb250YWluZXIgdG8gYWRkIHRvIHRoZSB2aWV3IHRyZWVcbiAqIEByZXR1cm5zIFRoZSBzdGF0ZSBwYXNzZWQgaW5cbiAqL1xuZnVuY3Rpb24gYWRkVG9WaWV3VHJlZShsVmlldywgbFZpZXdPckxDb250YWluZXIpIHtcbiAgICAvLyBUT0RPKGJlbmxlc2gvbWlza28pOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIGluY29ycmVjdCwgYmVjYXVzZSBpdCBhbHdheXMgYWRkcyB0aGUgTENvbnRhaW5lclxuICAgIC8vIHRvIHRoZSBlbmQgb2YgdGhlIHF1ZXVlLCB3aGljaCBtZWFucyBpZiB0aGUgZGV2ZWxvcGVyIHJldHJpZXZlcyB0aGUgTENvbnRhaW5lcnMgZnJvbSBSTm9kZXMgb3V0XG4gICAgLy8gb2Ygb3JkZXIsIHRoZSBjaGFuZ2UgZGV0ZWN0aW9uIHdpbGwgcnVuIG91dCBvZiBvcmRlciwgYXMgdGhlIGFjdCBvZiByZXRyaWV2aW5nIHRoZSB0aGVcbiAgICAvLyBMQ29udGFpbmVyIGZyb20gdGhlIFJOb2RlIGlzIHdoYXQgYWRkcyBpdCB0byB0aGUgcXVldWUuXG4gICAgaWYgKGxWaWV3W0NISUxEX0hFQURdKSB7XG4gICAgICAgIGxWaWV3W0NISUxEX1RBSUxdW05FWFRdID0gbFZpZXdPckxDb250YWluZXI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsVmlld1tDSElMRF9IRUFEXSA9IGxWaWV3T3JMQ29udGFpbmVyO1xuICAgIH1cbiAgICBsVmlld1tDSElMRF9UQUlMXSA9IGxWaWV3T3JMQ29udGFpbmVyO1xuICAgIHJldHVybiBsVmlld09yTENvbnRhaW5lcjtcbn1cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8gQ2hhbmdlIGRldGVjdGlvblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLyoqXG4gKiBNYXJrcyBjdXJyZW50IHZpZXcgYW5kIGFsbCBhbmNlc3RvcnMgZGlydHkuXG4gKlxuICogUmV0dXJucyB0aGUgcm9vdCB2aWV3IGJlY2F1c2UgaXQgaXMgZm91bmQgYXMgYSBieXByb2R1Y3Qgb2YgbWFya2luZyB0aGUgdmlldyB0cmVlXG4gKiBkaXJ0eSwgYW5kIGNhbiBiZSB1c2VkIGJ5IG1ldGhvZHMgdGhhdCBjb25zdW1lIG1hcmtWaWV3RGlydHkoKSB0byBlYXNpbHkgc2NoZWR1bGVcbiAqIGNoYW5nZSBkZXRlY3Rpb24uIE90aGVyd2lzZSwgc3VjaCBtZXRob2RzIHdvdWxkIG5lZWQgdG8gdHJhdmVyc2UgdXAgdGhlIHZpZXcgdHJlZVxuICogYW4gYWRkaXRpb25hbCB0aW1lIHRvIGdldCB0aGUgcm9vdCB2aWV3IGFuZCBzY2hlZHVsZSBhIHRpY2sgb24gaXQuXG4gKlxuICogQHBhcmFtIGxWaWV3IFRoZSBzdGFydGluZyBMVmlldyB0byBtYXJrIGRpcnR5XG4gKiBAcmV0dXJucyB0aGUgcm9vdCBMVmlld1xuICovXG5mdW5jdGlvbiBtYXJrVmlld0RpcnR5KGxWaWV3KSB7XG4gICAgd2hpbGUgKGxWaWV3KSB7XG4gICAgICAgIGxWaWV3W0ZMQUdTXSB8PSA2NCAvKiBEaXJ0eSAqLztcbiAgICAgICAgY29uc3QgcGFyZW50ID0gZ2V0TFZpZXdQYXJlbnQobFZpZXcpO1xuICAgICAgICAvLyBTdG9wIHRyYXZlcnNpbmcgdXAgYXMgc29vbiBhcyB5b3UgZmluZCBhIHJvb3QgdmlldyB0aGF0IHdhc24ndCBhdHRhY2hlZCB0byBhbnkgY29udGFpbmVyXG4gICAgICAgIGlmIChpc1Jvb3RWaWV3KGxWaWV3KSAmJiAhcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gbFZpZXc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29udGludWUgb3RoZXJ3aXNlXG4gICAgICAgIGxWaWV3ID0gcGFyZW50O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVXNlZCB0byBzY2hlZHVsZSBjaGFuZ2UgZGV0ZWN0aW9uIG9uIHRoZSB3aG9sZSBhcHBsaWNhdGlvbi5cbiAqXG4gKiBVbmxpa2UgYHRpY2tgLCBgc2NoZWR1bGVUaWNrYCBjb2FsZXNjZXMgbXVsdGlwbGUgY2FsbHMgaW50byBvbmUgY2hhbmdlIGRldGVjdGlvbiBydW4uXG4gKiBJdCBpcyB1c3VhbGx5IGNhbGxlZCBpbmRpcmVjdGx5IGJ5IGNhbGxpbmcgYG1hcmtEaXJ0eWAgd2hlbiB0aGUgdmlldyBuZWVkcyB0byBiZVxuICogcmUtcmVuZGVyZWQuXG4gKlxuICogVHlwaWNhbGx5IGBzY2hlZHVsZVRpY2tgIHVzZXMgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAgdG8gY29hbGVzY2UgbXVsdGlwbGVcbiAqIGBzY2hlZHVsZVRpY2tgIHJlcXVlc3RzLiBUaGUgc2NoZWR1bGluZyBmdW5jdGlvbiBjYW4gYmUgb3ZlcnJpZGRlbiBpblxuICogYHJlbmRlckNvbXBvbmVudGAncyBgc2NoZWR1bGVyYCBvcHRpb24uXG4gKi9cbmZ1bmN0aW9uIHNjaGVkdWxlVGljayhyb290Q29udGV4dCwgZmxhZ3MpIHtcbiAgICBjb25zdCBub3RoaW5nU2NoZWR1bGVkID0gcm9vdENvbnRleHQuZmxhZ3MgPT09IDAgLyogRW1wdHkgKi87XG4gICAgaWYgKG5vdGhpbmdTY2hlZHVsZWQgJiYgcm9vdENvbnRleHQuY2xlYW4gPT0gX0NMRUFOX1BST01JU0UpIHtcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci9pc3N1ZXMvMzkyOTZcbiAgICAgICAgLy8gc2hvdWxkIG9ubHkgYXR0YWNoIHRoZSBmbGFncyB3aGVuIHJlYWxseSBzY2hlZHVsaW5nIGEgdGlja1xuICAgICAgICByb290Q29udGV4dC5mbGFncyB8PSBmbGFncztcbiAgICAgICAgbGV0IHJlcztcbiAgICAgICAgcm9vdENvbnRleHQuY2xlYW4gPSBuZXcgUHJvbWlzZSgocikgPT4gcmVzID0gcik7XG4gICAgICAgIHJvb3RDb250ZXh0LnNjaGVkdWxlcigoKSA9PiB7XG4gICAgICAgICAgICBpZiAocm9vdENvbnRleHQuZmxhZ3MgJiAxIC8qIERldGVjdENoYW5nZXMgKi8pIHtcbiAgICAgICAgICAgICAgICByb290Q29udGV4dC5mbGFncyAmPSB+MSAvKiBEZXRlY3RDaGFuZ2VzICovO1xuICAgICAgICAgICAgICAgIHRpY2tSb290Q29udGV4dChyb290Q29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocm9vdENvbnRleHQuZmxhZ3MgJiAyIC8qIEZsdXNoUGxheWVycyAqLykge1xuICAgICAgICAgICAgICAgIHJvb3RDb250ZXh0LmZsYWdzICY9IH4yIC8qIEZsdXNoUGxheWVycyAqLztcbiAgICAgICAgICAgICAgICBjb25zdCBwbGF5ZXJIYW5kbGVyID0gcm9vdENvbnRleHQucGxheWVySGFuZGxlcjtcbiAgICAgICAgICAgICAgICBpZiAocGxheWVySGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXJIYW5kbGVyLmZsdXNoUGxheWVycygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvb3RDb250ZXh0LmNsZWFuID0gX0NMRUFOX1BST01JU0U7XG4gICAgICAgICAgICByZXMobnVsbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRpY2tSb290Q29udGV4dChyb290Q29udGV4dCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm9vdENvbnRleHQuY29tcG9uZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByb290Q29tcG9uZW50ID0gcm9vdENvbnRleHQuY29tcG9uZW50c1tpXTtcbiAgICAgICAgY29uc3QgbFZpZXcgPSByZWFkUGF0Y2hlZExWaWV3KHJvb3RDb21wb25lbnQpO1xuICAgICAgICBjb25zdCB0VmlldyA9IGxWaWV3W1RWSUVXXTtcbiAgICAgICAgcmVuZGVyQ29tcG9uZW50T3JUZW1wbGF0ZSh0VmlldywgbFZpZXcsIHRWaWV3LnRlbXBsYXRlLCByb290Q29tcG9uZW50KTtcbiAgICB9XG59XG5mdW5jdGlvbiBkZXRlY3RDaGFuZ2VzSW50ZXJuYWwodFZpZXcsIGxWaWV3LCBjb250ZXh0KSB7XG4gICAgY29uc3QgcmVuZGVyZXJGYWN0b3J5ID0gbFZpZXdbUkVOREVSRVJfRkFDVE9SWV07XG4gICAgaWYgKHJlbmRlcmVyRmFjdG9yeS5iZWdpbilcbiAgICAgICAgcmVuZGVyZXJGYWN0b3J5LmJlZ2luKCk7XG4gICAgdHJ5IHtcbiAgICAgICAgcmVmcmVzaFZpZXcodFZpZXcsIGxWaWV3LCB0Vmlldy50ZW1wbGF0ZSwgY29udGV4dCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBoYW5kbGVFcnJvcihsVmlldywgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIGlmIChyZW5kZXJlckZhY3RvcnkuZW5kKVxuICAgICAgICAgICAgcmVuZGVyZXJGYWN0b3J5LmVuZCgpO1xuICAgIH1cbn1cbi8qKlxuICogU3luY2hyb25vdXNseSBwZXJmb3JtIGNoYW5nZSBkZXRlY3Rpb24gb24gYSByb290IHZpZXcgYW5kIGl0cyBjb21wb25lbnRzLlxuICpcbiAqIEBwYXJhbSBsVmlldyBUaGUgdmlldyB3aGljaCB0aGUgY2hhbmdlIGRldGVjdGlvbiBzaG91bGQgYmUgcGVyZm9ybWVkIG9uLlxuICovXG5mdW5jdGlvbiBkZXRlY3RDaGFuZ2VzSW5Sb290VmlldyhsVmlldykge1xuICAgIHRpY2tSb290Q29udGV4dChsVmlld1tDT05URVhUXSk7XG59XG5mdW5jdGlvbiBjaGVja05vQ2hhbmdlc0ludGVybmFsKHRWaWV3LCB2aWV3LCBjb250ZXh0KSB7XG4gICAgc2V0SXNJbkNoZWNrTm9DaGFuZ2VzTW9kZSh0cnVlKTtcbiAgICB0cnkge1xuICAgICAgICBkZXRlY3RDaGFuZ2VzSW50ZXJuYWwodFZpZXcsIHZpZXcsIGNvbnRleHQpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgc2V0SXNJbkNoZWNrTm9DaGFuZ2VzTW9kZShmYWxzZSk7XG4gICAgfVxufVxuLyoqXG4gKiBDaGVja3MgdGhlIGNoYW5nZSBkZXRlY3RvciBvbiBhIHJvb3QgdmlldyBhbmQgaXRzIGNvbXBvbmVudHMsIGFuZCB0aHJvd3MgaWYgYW55IGNoYW5nZXMgYXJlXG4gKiBkZXRlY3RlZC5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgaW4gZGV2ZWxvcG1lbnQgbW9kZSB0byB2ZXJpZnkgdGhhdCBydW5uaW5nIGNoYW5nZSBkZXRlY3Rpb24gZG9lc24ndFxuICogaW50cm9kdWNlIG90aGVyIGNoYW5nZXMuXG4gKlxuICogQHBhcmFtIGxWaWV3IFRoZSB2aWV3IHdoaWNoIHRoZSBjaGFuZ2UgZGV0ZWN0aW9uIHNob3VsZCBiZSBjaGVja2VkIG9uLlxuICovXG5mdW5jdGlvbiBjaGVja05vQ2hhbmdlc0luUm9vdFZpZXcobFZpZXcpIHtcbiAgICBzZXRJc0luQ2hlY2tOb0NoYW5nZXNNb2RlKHRydWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGRldGVjdENoYW5nZXNJblJvb3RWaWV3KGxWaWV3KTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIHNldElzSW5DaGVja05vQ2hhbmdlc01vZGUoZmFsc2UpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGV4ZWN1dGVWaWV3UXVlcnlGbihmbGFncywgdmlld1F1ZXJ5Rm4sIGNvbXBvbmVudCkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKHZpZXdRdWVyeUZuLCAnVmlldyBxdWVyaWVzIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgbXVzdCBiZSBkZWZpbmVkLicpO1xuICAgIHNldEN1cnJlbnRRdWVyeUluZGV4KDApO1xuICAgIHZpZXdRdWVyeUZuKGZsYWdzLCBjb21wb25lbnQpO1xufVxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLyBCaW5kaW5ncyAmIGludGVycG9sYXRpb25zXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vKipcbiAqIFN0b3JlcyBtZXRhLWRhdGEgZm9yIGEgcHJvcGVydHkgYmluZGluZyB0byBiZSB1c2VkIGJ5IFRlc3RCZWQncyBgRGVidWdFbGVtZW50LnByb3BlcnRpZXNgLlxuICpcbiAqIEluIG9yZGVyIHRvIHN1cHBvcnQgVGVzdEJlZCdzIGBEZWJ1Z0VsZW1lbnQucHJvcGVydGllc2Agd2UgbmVlZCB0byBzYXZlLCBmb3IgZWFjaCBiaW5kaW5nOlxuICogLSBhIGJvdW5kIHByb3BlcnR5IG5hbWU7XG4gKiAtIGEgc3RhdGljIHBhcnRzIG9mIGludGVycG9sYXRlZCBzdHJpbmdzO1xuICpcbiAqIEEgZ2l2ZW4gcHJvcGVydHkgbWV0YWRhdGEgaXMgc2F2ZWQgYXQgdGhlIGJpbmRpbmcncyBpbmRleCBpbiB0aGUgYFRWaWV3LmRhdGFgIChpbiBvdGhlciB3b3JkcywgYVxuICogcHJvcGVydHkgYmluZGluZyBtZXRhZGF0YSB3aWxsIGJlIHN0b3JlZCBpbiBgVFZpZXcuZGF0YWAgYXQgdGhlIHNhbWUgaW5kZXggYXMgYSBib3VuZCB2YWx1ZSBpblxuICogYExWaWV3YCkuIE1ldGFkYXRhIGFyZSByZXByZXNlbnRlZCBhcyBgSU5URVJQT0xBVElPTl9ERUxJTUlURVJgLWRlbGltaXRlZCBzdHJpbmcgd2l0aCB0aGVcbiAqIGZvbGxvd2luZyBmb3JtYXQ6XG4gKiAtIGBwcm9wZXJ0eU5hbWVgIGZvciBib3VuZCBwcm9wZXJ0aWVzO1xuICogLSBgcHJvcGVydHlOYW1l77+9cHJlZml477+9aW50ZXJwb2xhdGlvbl9zdGF0aWNfcGFydDHvv70uLmludGVycG9sYXRpb25fc3RhdGljX3BhcnRO77+9c3VmZml4YCBmb3JcbiAqIGludGVycG9sYXRlZCBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSB0RGF0YSBgVERhdGFgIHdoZXJlIG1ldGEtZGF0YSB3aWxsIGJlIHNhdmVkO1xuICogQHBhcmFtIHROb2RlIGBUTm9kZWAgdGhhdCBpcyBhIHRhcmdldCBvZiB0aGUgYmluZGluZztcbiAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgYm91bmQgcHJvcGVydHkgbmFtZTtcbiAqIEBwYXJhbSBiaW5kaW5nSW5kZXggYmluZGluZyBpbmRleCBpbiBgTFZpZXdgXG4gKiBAcGFyYW0gaW50ZXJwb2xhdGlvblBhcnRzIHN0YXRpYyBpbnRlcnBvbGF0aW9uIHBhcnRzIChmb3IgcHJvcGVydHkgaW50ZXJwb2xhdGlvbnMpXG4gKi9cbmZ1bmN0aW9uIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEodERhdGEsIHROb2RlLCBwcm9wZXJ0eU5hbWUsIGJpbmRpbmdJbmRleCwgLi4uaW50ZXJwb2xhdGlvblBhcnRzKSB7XG4gICAgLy8gQmluZGluZyBtZXRhLWRhdGEgYXJlIHN0b3JlZCBvbmx5IHRoZSBmaXJzdCB0aW1lIGEgZ2l2ZW4gcHJvcGVydHkgaW5zdHJ1Y3Rpb24gaXMgcHJvY2Vzc2VkLlxuICAgIC8vIFNpbmNlIHdlIGRvbid0IGhhdmUgYSBjb25jZXB0IG9mIHRoZSBcImZpcnN0IHVwZGF0ZSBwYXNzXCIgd2UgbmVlZCB0byBjaGVjayBmb3IgcHJlc2VuY2Ugb2YgdGhlXG4gICAgLy8gYmluZGluZyBtZXRhLWRhdGEgdG8gZGVjaWRlIGlmIG9uZSBzaG91bGQgYmUgc3RvcmVkIChvciBpZiB3YXMgc3RvcmVkIGFscmVhZHkpLlxuICAgIGlmICh0RGF0YVtiaW5kaW5nSW5kZXhdID09PSBudWxsKSB7XG4gICAgICAgIGlmICh0Tm9kZS5pbnB1dHMgPT0gbnVsbCB8fCAhdE5vZGUuaW5wdXRzW3Byb3BlcnR5TmFtZV0pIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BCaW5kaW5nSWR4cyA9IHROb2RlLnByb3BlcnR5QmluZGluZ3MgfHwgKHROb2RlLnByb3BlcnR5QmluZGluZ3MgPSBbXSk7XG4gICAgICAgICAgICBwcm9wQmluZGluZ0lkeHMucHVzaChiaW5kaW5nSW5kZXgpO1xuICAgICAgICAgICAgbGV0IGJpbmRpbmdNZXRhZGF0YSA9IHByb3BlcnR5TmFtZTtcbiAgICAgICAgICAgIGlmIChpbnRlcnBvbGF0aW9uUGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGJpbmRpbmdNZXRhZGF0YSArPVxuICAgICAgICAgICAgICAgICAgICBJTlRFUlBPTEFUSU9OX0RFTElNSVRFUiArIGludGVycG9sYXRpb25QYXJ0cy5qb2luKElOVEVSUE9MQVRJT05fREVMSU1JVEVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHREYXRhW2JpbmRpbmdJbmRleF0gPSBiaW5kaW5nTWV0YWRhdGE7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBDTEVBTl9QUk9NSVNFID0gX0NMRUFOX1BST01JU0U7XG5mdW5jdGlvbiBnZXRPckNyZWF0ZUxWaWV3Q2xlYW51cCh2aWV3KSB7XG4gICAgLy8gdG9wIGxldmVsIHZhcmlhYmxlcyBzaG91bGQgbm90IGJlIGV4cG9ydGVkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zIChQRVJGX05PVEVTLm1kKVxuICAgIHJldHVybiB2aWV3W0NMRUFOVVBdIHx8ICh2aWV3W0NMRUFOVVBdID0gbmdEZXZNb2RlID8gbmV3IExDbGVhbnVwKCkgOiBbXSk7XG59XG5mdW5jdGlvbiBnZXRPckNyZWF0ZVRWaWV3Q2xlYW51cCh0Vmlldykge1xuICAgIHJldHVybiB0Vmlldy5jbGVhbnVwIHx8ICh0Vmlldy5jbGVhbnVwID0gbmdEZXZNb2RlID8gbmV3IFRDbGVhbnVwKCkgOiBbXSk7XG59XG4vKipcbiAqIFRoZXJlIGFyZSBjYXNlcyB3aGVyZSB0aGUgc3ViIGNvbXBvbmVudCdzIHJlbmRlcmVyIG5lZWRzIHRvIGJlIGluY2x1ZGVkXG4gKiBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHJlbmRlcmVyIChzZWUgdGhlIGNvbXBvbmVudFN5bnRoZXRpY0hvc3QqIGluc3RydWN0aW9ucykuXG4gKi9cbmZ1bmN0aW9uIGxvYWRDb21wb25lbnRSZW5kZXJlcihjdXJyZW50RGVmLCB0Tm9kZSwgbFZpZXcpIHtcbiAgICAvLyBUT0RPKEZXLTIwNDMpOiB0aGUgYGN1cnJlbnREZWZgIGlzIG51bGwgd2hlbiBob3N0IGJpbmRpbmdzIGFyZSBpbnZva2VkIHdoaWxlIGNyZWF0aW5nIHJvb3RcbiAgICAvLyBjb21wb25lbnQgKHNlZSBwYWNrYWdlcy9jb3JlL3NyYy9yZW5kZXIzL2NvbXBvbmVudC50cykuIFRoaXMgaXMgbm90IGNvbnNpc3RlbnQgd2l0aCB0aGUgcHJvY2Vzc1xuICAgIC8vIG9mIGNyZWF0aW5nIGlubmVyIGNvbXBvbmVudHMsIHdoZW4gY3VycmVudCBkaXJlY3RpdmUgaW5kZXggaXMgYXZhaWxhYmxlIGluIHRoZSBzdGF0ZS4gSW4gb3JkZXJcbiAgICAvLyB0byBhdm9pZCByZWx5aW5nIG9uIGN1cnJlbnQgZGVmIGJlaW5nIGBudWxsYCAodGh1cyBzcGVjaWFsLWNhc2luZyByb290IGNvbXBvbmVudCBjcmVhdGlvbiksIHRoZVxuICAgIC8vIHByb2Nlc3Mgb2YgY3JlYXRpbmcgcm9vdCBjb21wb25lbnQgc2hvdWxkIGJlIHVuaWZpZWQgd2l0aCB0aGUgcHJvY2VzcyBvZiBjcmVhdGluZyBpbm5lclxuICAgIC8vIGNvbXBvbmVudHMuXG4gICAgaWYgKGN1cnJlbnREZWYgPT09IG51bGwgfHwgaXNDb21wb25lbnREZWYoY3VycmVudERlZikpIHtcbiAgICAgICAgbFZpZXcgPSB1bndyYXBMVmlldyhsVmlld1t0Tm9kZS5pbmRleF0pO1xuICAgIH1cbiAgICByZXR1cm4gbFZpZXdbUkVOREVSRVJdO1xufVxuLyoqIEhhbmRsZXMgYW4gZXJyb3IgdGhyb3duIGluIGFuIExWaWV3LiAqL1xuZnVuY3Rpb24gaGFuZGxlRXJyb3IobFZpZXcsIGVycm9yKSB7XG4gICAgY29uc3QgaW5qZWN0b3IgPSBsVmlld1tJTkpFQ1RPUiQxXTtcbiAgICBjb25zdCBlcnJvckhhbmRsZXIgPSBpbmplY3RvciA/IGluamVjdG9yLmdldChFcnJvckhhbmRsZXIsIG51bGwpIDogbnVsbDtcbiAgICBlcnJvckhhbmRsZXIgJiYgZXJyb3JIYW5kbGVyLmhhbmRsZUVycm9yKGVycm9yKTtcbn1cbi8qKlxuICogU2V0IHRoZSBpbnB1dHMgb2YgZGlyZWN0aXZlcyBhdCB0aGUgY3VycmVudCBub2RlIHRvIGNvcnJlc3BvbmRpbmcgdmFsdWUuXG4gKlxuICogQHBhcmFtIHRWaWV3IFRoZSBjdXJyZW50IFRWaWV3XG4gKiBAcGFyYW0gbFZpZXcgdGhlIGBMVmlld2Agd2hpY2ggY29udGFpbnMgdGhlIGRpcmVjdGl2ZXMuXG4gKiBAcGFyYW0gaW5wdXRzIG1hcHBpbmcgYmV0d2VlbiB0aGUgcHVibGljIFwiaW5wdXRcIiBuYW1lIGFuZCBwcml2YXRlbHkta25vd24sXG4gKiAgICAgICAgcG9zc2libHkgbWluaWZpZWQsIHByb3BlcnR5IG5hbWVzIHRvIHdyaXRlIHRvLlxuICogQHBhcmFtIHZhbHVlIFZhbHVlIHRvIHNldC5cbiAqL1xuZnVuY3Rpb24gc2V0SW5wdXRzRm9yUHJvcGVydHkodFZpZXcsIGxWaWV3LCBpbnB1dHMsIHB1YmxpY05hbWUsIHZhbHVlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dHMubGVuZ3RoOykge1xuICAgICAgICBjb25zdCBpbmRleCA9IGlucHV0c1tpKytdO1xuICAgICAgICBjb25zdCBwcml2YXRlTmFtZSA9IGlucHV0c1tpKytdO1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGxWaWV3W2luZGV4XTtcbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShsVmlldywgaW5kZXgpO1xuICAgICAgICBjb25zdCBkZWYgPSB0Vmlldy5kYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKGRlZi5zZXRJbnB1dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZGVmLnNldElucHV0KGluc3RhbmNlLCB2YWx1ZSwgcHVibGljTmFtZSwgcHJpdmF0ZU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5zdGFuY2VbcHJpdmF0ZU5hbWVdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFVwZGF0ZXMgYSB0ZXh0IGJpbmRpbmcgYXQgYSBnaXZlbiBpbmRleCBpbiBhIGdpdmVuIExWaWV3LlxuICovXG5mdW5jdGlvbiB0ZXh0QmluZGluZ0ludGVybmFsKGxWaWV3LCBpbmRleCwgdmFsdWUpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0U3RyaW5nKHZhbHVlLCAnVmFsdWUgc2hvdWxkIGJlIGEgc3RyaW5nJyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydE5vdFNhbWUodmFsdWUsIE5PX0NIQU5HRSwgJ3ZhbHVlIHNob3VsZCBub3QgYmUgTk9fQ0hBTkdFJyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShsVmlldywgaW5kZXgpO1xuICAgIGNvbnN0IGVsZW1lbnQgPSBnZXROYXRpdmVCeUluZGV4KGluZGV4LCBsVmlldyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQoZWxlbWVudCwgJ25hdGl2ZSBlbGVtZW50IHNob3VsZCBleGlzdCcpO1xuICAgIHVwZGF0ZVRleHROb2RlKGxWaWV3W1JFTkRFUkVSXSwgZWxlbWVudCwgdmFsdWUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQ29tcHV0ZSB0aGUgc3RhdGljIHN0eWxpbmcgKGNsYXNzL3N0eWxlKSBmcm9tIGBUQXR0cmlidXRlc2AuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgY2FsbGVkIGR1cmluZyBgZmlyc3RDcmVhdGVQYXNzYCBvbmx5LlxuICpcbiAqIEBwYXJhbSB0Tm9kZSBUaGUgYFROb2RlYCBpbnRvIHdoaWNoIHRoZSBzdHlsaW5nIGluZm9ybWF0aW9uIHNob3VsZCBiZSBsb2FkZWQuXG4gKiBAcGFyYW0gYXR0cnMgYFRBdHRyaWJ1dGVzYCBjb250YWluaW5nIHRoZSBzdHlsaW5nIGluZm9ybWF0aW9uLlxuICogQHBhcmFtIHdyaXRlVG9Ib3N0IFdoZXJlIHNob3VsZCB0aGUgcmVzdWx0aW5nIHN0YXRpYyBzdHlsZXMgYmUgd3JpdHRlbj9cbiAqICAgLSBgZmFsc2VgIFdyaXRlIHRvIGBUTm9kZS5zdHlsZXNXaXRob3V0SG9zdGAgLyBgVE5vZGUuY2xhc3Nlc1dpdGhvdXRIb3N0YFxuICogICAtIGB0cnVlYCBXcml0ZSB0byBgVE5vZGUuc3R5bGVzYCAvIGBUTm9kZS5jbGFzc2VzYFxuICovXG5mdW5jdGlvbiBjb21wdXRlU3RhdGljU3R5bGluZyh0Tm9kZSwgYXR0cnMsIHdyaXRlVG9Ib3N0KSB7XG4gICAgbmdEZXZNb2RlICYmXG4gICAgICAgIGFzc2VydEZpcnN0Q3JlYXRlUGFzcyhnZXRUVmlldygpLCAnRXhwZWN0aW5nIHRvIGJlIGNhbGxlZCBpbiBmaXJzdCB0ZW1wbGF0ZSBwYXNzIG9ubHknKTtcbiAgICBsZXQgc3R5bGVzID0gd3JpdGVUb0hvc3QgPyB0Tm9kZS5zdHlsZXMgOiBudWxsO1xuICAgIGxldCBjbGFzc2VzID0gd3JpdGVUb0hvc3QgPyB0Tm9kZS5jbGFzc2VzIDogbnVsbDtcbiAgICBsZXQgbW9kZSA9IDA7XG4gICAgaWYgKGF0dHJzICE9PSBudWxsKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXR0cnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXR0cnNbaV07XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIG1vZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1vZGUgPT0gMSAvKiBDbGFzc2VzICovKSB7XG4gICAgICAgICAgICAgICAgY2xhc3NlcyA9IGNvbmNhdFN0cmluZ3NXaXRoU3BhY2UoY2xhc3NlcywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobW9kZSA9PSAyIC8qIFN0eWxlcyAqLykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0eWxlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGVWYWx1ZSA9IGF0dHJzWysraV07XG4gICAgICAgICAgICAgICAgc3R5bGVzID0gY29uY2F0U3RyaW5nc1dpdGhTcGFjZShzdHlsZXMsIHN0eWxlICsgJzogJyArIHN0eWxlVmFsdWUgKyAnOycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHdyaXRlVG9Ib3N0ID8gdE5vZGUuc3R5bGVzID0gc3R5bGVzIDogdE5vZGUuc3R5bGVzV2l0aG91dEhvc3QgPSBzdHlsZXM7XG4gICAgd3JpdGVUb0hvc3QgPyB0Tm9kZS5jbGFzc2VzID0gY2xhc3NlcyA6IHROb2RlLmNsYXNzZXNXaXRob3V0SG9zdCA9IGNsYXNzZXM7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBTeW5jaHJvbm91c2x5IHBlcmZvcm0gY2hhbmdlIGRldGVjdGlvbiBvbiBhIGNvbXBvbmVudCAoYW5kIHBvc3NpYmx5IGl0cyBzdWItY29tcG9uZW50cykuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0cmlnZ2VycyBjaGFuZ2UgZGV0ZWN0aW9uIGluIGEgc3luY2hyb25vdXMgd2F5IG9uIGEgY29tcG9uZW50LlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnQgVGhlIGNvbXBvbmVudCB3aGljaCB0aGUgY2hhbmdlIGRldGVjdGlvbiBzaG91bGQgYmUgcGVyZm9ybWVkIG9uLlxuICovXG5mdW5jdGlvbiBkZXRlY3RDaGFuZ2VzKGNvbXBvbmVudCkge1xuICAgIGNvbnN0IHZpZXcgPSBnZXRDb21wb25lbnRWaWV3QnlJbnN0YW5jZShjb21wb25lbnQpO1xuICAgIGRldGVjdENoYW5nZXNJbnRlcm5hbCh2aWV3W1RWSUVXXSwgdmlldywgY29tcG9uZW50KTtcbn1cbi8qKlxuICogTWFya3MgdGhlIGNvbXBvbmVudCBhcyBkaXJ0eSAobmVlZGluZyBjaGFuZ2UgZGV0ZWN0aW9uKS4gTWFya2luZyBhIGNvbXBvbmVudCBkaXJ0eSB3aWxsXG4gKiBzY2hlZHVsZSBhIGNoYW5nZSBkZXRlY3Rpb24gb24gaXQgYXQgc29tZSBwb2ludCBpbiB0aGUgZnV0dXJlLlxuICpcbiAqIE1hcmtpbmcgYW4gYWxyZWFkeSBkaXJ0eSBjb21wb25lbnQgYXMgZGlydHkgd29uJ3QgZG8gYW55dGhpbmcuIE9ubHkgb25lIG91dHN0YW5kaW5nIGNoYW5nZVxuICogZGV0ZWN0aW9uIGNhbiBiZSBzY2hlZHVsZWQgcGVyIGNvbXBvbmVudCB0cmVlLlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IHRvIG1hcmsgYXMgZGlydHkuXG4gKi9cbmZ1bmN0aW9uIG1hcmtEaXJ0eShjb21wb25lbnQpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChjb21wb25lbnQsICdjb21wb25lbnQnKTtcbiAgICBjb25zdCByb290VmlldyA9IG1hcmtWaWV3RGlydHkoZ2V0Q29tcG9uZW50Vmlld0J5SW5zdGFuY2UoY29tcG9uZW50KSk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQocm9vdFZpZXdbQ09OVEVYVF0sICdyb290Q29udGV4dCBzaG91bGQgYmUgZGVmaW5lZCcpO1xuICAgIHNjaGVkdWxlVGljayhyb290Vmlld1tDT05URVhUXSwgMSAvKiBEZXRlY3RDaGFuZ2VzICovKTtcbn1cbi8qKlxuICogVXNlZCB0byBwZXJmb3JtIGNoYW5nZSBkZXRlY3Rpb24gb24gdGhlIHdob2xlIGFwcGxpY2F0aW9uLlxuICpcbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byBgZGV0ZWN0Q2hhbmdlc2AsIGJ1dCBpbnZva2VkIG9uIHJvb3QgY29tcG9uZW50LiBBZGRpdGlvbmFsbHksIGB0aWNrYFxuICogZXhlY3V0ZXMgbGlmZWN5Y2xlIGhvb2tzIGFuZCBjb25kaXRpb25hbGx5IGNoZWNrcyBjb21wb25lbnRzIGJhc2VkIG9uIHRoZWlyXG4gKiBgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3lgIGFuZCBkaXJ0aW5lc3MuXG4gKlxuICogVGhlIHByZWZlcnJlZCB3YXkgdG8gdHJpZ2dlciBjaGFuZ2UgZGV0ZWN0aW9uIGlzIHRvIGNhbGwgYG1hcmtEaXJ0eWAuIGBtYXJrRGlydHlgIGludGVybmFsbHlcbiAqIHNjaGVkdWxlcyBgdGlja2AgdXNpbmcgYSBzY2hlZHVsZXIgaW4gb3JkZXIgdG8gY29hbGVzY2UgbXVsdGlwbGUgYG1hcmtEaXJ0eWAgY2FsbHMgaW50byBhXG4gKiBzaW5nbGUgY2hhbmdlIGRldGVjdGlvbiBydW4uIEJ5IGRlZmF1bHQsIHRoZSBzY2hlZHVsZXIgaXMgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAsIGJ1dCBjYW5cbiAqIGJlIGNoYW5nZWQgd2hlbiBjYWxsaW5nIGByZW5kZXJDb21wb25lbnRgIGFuZCBwcm92aWRpbmcgdGhlIGBzY2hlZHVsZXJgIG9wdGlvbi5cbiAqL1xuZnVuY3Rpb24gdGljayhjb21wb25lbnQpIHtcbiAgICBjb25zdCByb290VmlldyA9IGdldFJvb3RWaWV3KGNvbXBvbmVudCk7XG4gICAgY29uc3Qgcm9vdENvbnRleHQgPSByb290Vmlld1tDT05URVhUXTtcbiAgICB0aWNrUm9vdENvbnRleHQocm9vdENvbnRleHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQW4gSW5qZWN0aW9uVG9rZW4gdGhhdCBnZXRzIHRoZSBjdXJyZW50IGBJbmplY3RvcmAgZm9yIGBjcmVhdGVJbmplY3RvcigpYC1zdHlsZSBpbmplY3RvcnMuXG4gKlxuICogUmVxdWVzdGluZyB0aGlzIHRva2VuIGluc3RlYWQgb2YgYEluamVjdG9yYCBhbGxvd3MgYFN0YXRpY0luamVjdG9yYCB0byBiZSB0cmVlLXNoYWtlbiBmcm9tIGFcbiAqIHByb2plY3QuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBJTkpFQ1RPUiA9IG5ldyBJbmplY3Rpb25Ub2tlbignSU5KRUNUT1InLCBcbi8vIERpc3NhYmxlIHRzbGludCBiZWNhdXNlIHRoaXMgaXMgY29uc3QgZW51bSB3aGljaCBnZXRzIGlubGluZWQgbm90IHRvcCBsZXZlbCBwcm9wIGFjY2Vzcy5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tdG9wbGV2ZWwtcHJvcGVydHktYWNjZXNzXG4tMSAvKiBJbmplY3RvciAqLyk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuY2xhc3MgTnVsbEluamVjdG9yIHtcbiAgICBnZXQodG9rZW4sIG5vdEZvdW5kVmFsdWUgPSBUSFJPV19JRl9OT1RfRk9VTkQpIHtcbiAgICAgICAgaWYgKG5vdEZvdW5kVmFsdWUgPT09IFRIUk9XX0lGX05PVF9GT1VORCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYE51bGxJbmplY3RvckVycm9yOiBObyBwcm92aWRlciBmb3IgJHtzdHJpbmdpZnkodG9rZW4pfSFgKTtcbiAgICAgICAgICAgIGVycm9yLm5hbWUgPSAnTnVsbEluamVjdG9yRXJyb3InO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vdEZvdW5kVmFsdWU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQW4gaW50ZXJuYWwgdG9rZW4gd2hvc2UgcHJlc2VuY2UgaW4gYW4gaW5qZWN0b3IgaW5kaWNhdGVzIHRoYXQgdGhlIGluamVjdG9yIHNob3VsZCB0cmVhdCBpdHNlbGZcbiAqIGFzIGEgcm9vdCBzY29wZWQgaW5qZWN0b3Igd2hlbiBwcm9jZXNzaW5nIHJlcXVlc3RzIGZvciB1bmtub3duIHRva2VucyB3aGljaCBtYXkgaW5kaWNhdGVcbiAqIHRoZXkgYXJlIHByb3ZpZGVkIGluIHRoZSByb290IHNjb3BlLlxuICovXG5jb25zdCBJTkpFQ1RPUl9TQ09QRSA9IG5ldyBJbmplY3Rpb25Ub2tlbignU2V0IEluamVjdG9yIHNjb3BlLicpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogTWFya2VyIHdoaWNoIGluZGljYXRlcyB0aGF0IGEgdmFsdWUgaGFzIG5vdCB5ZXQgYmVlbiBjcmVhdGVkIGZyb20gdGhlIGZhY3RvcnkgZnVuY3Rpb24uXG4gKi9cbmNvbnN0IE5PVF9ZRVQgPSB7fTtcbi8qKlxuICogTWFya2VyIHdoaWNoIGluZGljYXRlcyB0aGF0IHRoZSBmYWN0b3J5IGZ1bmN0aW9uIGZvciBhIHRva2VuIGlzIGluIHRoZSBwcm9jZXNzIG9mIGJlaW5nIGNhbGxlZC5cbiAqXG4gKiBJZiB0aGUgaW5qZWN0b3IgaXMgYXNrZWQgdG8gaW5qZWN0IGEgdG9rZW4gd2l0aCBpdHMgdmFsdWUgc2V0IHRvIENJUkNVTEFSLCB0aGF0IGluZGljYXRlc1xuICogaW5qZWN0aW9uIG9mIGEgZGVwZW5kZW5jeSBoYXMgcmVjdXJzaXZlbHkgYXR0ZW1wdGVkIHRvIGluamVjdCB0aGUgb3JpZ2luYWwgdG9rZW4sIGFuZCB0aGVyZSBpc1xuICogYSBjaXJjdWxhciBkZXBlbmRlbmN5IGFtb25nIHRoZSBwcm92aWRlcnMuXG4gKi9cbmNvbnN0IENJUkNVTEFSID0ge307XG4vKipcbiAqIEEgbGF6aWx5IGluaXRpYWxpemVkIE51bGxJbmplY3Rvci5cbiAqL1xubGV0IE5VTExfSU5KRUNUT1IkMSA9IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIGdldE51bGxJbmplY3RvcigpIHtcbiAgICBpZiAoTlVMTF9JTkpFQ1RPUiQxID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgTlVMTF9JTkpFQ1RPUiQxID0gbmV3IE51bGxJbmplY3RvcigpO1xuICAgIH1cbiAgICByZXR1cm4gTlVMTF9JTkpFQ1RPUiQxO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgYEluamVjdG9yYCB3aGljaCBpcyBjb25maWd1cmVkIHVzaW5nIGEgYGRlZlR5cGVgIG9mIGBJbmplY3RvclR5cGU8YW55PmBzLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5qZWN0b3IoZGVmVHlwZSwgcGFyZW50ID0gbnVsbCwgYWRkaXRpb25hbFByb3ZpZGVycyA9IG51bGwsIG5hbWUpIHtcbiAgICBjb25zdCBpbmplY3RvciA9IGNyZWF0ZUluamVjdG9yV2l0aG91dEluamVjdG9ySW5zdGFuY2VzKGRlZlR5cGUsIHBhcmVudCwgYWRkaXRpb25hbFByb3ZpZGVycywgbmFtZSk7XG4gICAgaW5qZWN0b3IuX3Jlc29sdmVJbmplY3RvckRlZlR5cGVzKCk7XG4gICAgcmV0dXJuIGluamVjdG9yO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGluamVjdG9yIHdpdGhvdXQgZWFnZXJseSByZXNvbHZpbmcgaXRzIGluamVjdG9yIHR5cGVzLiBDYW4gYmUgdXNlZCBpbiBwbGFjZXNcbiAqIHdoZXJlIHJlc29sdmluZyB0aGUgaW5qZWN0b3IgdHlwZXMgaW1tZWRpYXRlbHkgY2FuIGxlYWQgdG8gYW4gaW5maW5pdGUgbG9vcC4gVGhlIGluamVjdG9yIHR5cGVzXG4gKiBzaG91bGQgYmUgcmVzb2x2ZWQgYXQgYSBsYXRlciBwb2ludCBieSBjYWxsaW5nIGBfcmVzb2x2ZUluamVjdG9yRGVmVHlwZXNgLlxuICovXG5mdW5jdGlvbiBjcmVhdGVJbmplY3RvcldpdGhvdXRJbmplY3Rvckluc3RhbmNlcyhkZWZUeXBlLCBwYXJlbnQgPSBudWxsLCBhZGRpdGlvbmFsUHJvdmlkZXJzID0gbnVsbCwgbmFtZSkge1xuICAgIHJldHVybiBuZXcgUjNJbmplY3RvcihkZWZUeXBlLCBhZGRpdGlvbmFsUHJvdmlkZXJzLCBwYXJlbnQgfHwgZ2V0TnVsbEluamVjdG9yKCksIG5hbWUpO1xufVxuY2xhc3MgUjNJbmplY3RvciB7XG4gICAgY29uc3RydWN0b3IoZGVmLCBhZGRpdGlvbmFsUHJvdmlkZXJzLCBwYXJlbnQsIHNvdXJjZSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXAgb2YgdG9rZW5zIHRvIHJlY29yZHMgd2hpY2ggY29udGFpbiB0aGUgaW5zdGFuY2VzIG9mIHRob3NlIHRva2Vucy5cbiAgICAgICAgICogLSBgbnVsbGAgdmFsdWUgaW1wbGllcyB0aGF0IHdlIGRvbid0IGhhdmUgdGhlIHJlY29yZC4gVXNlZCBieSB0cmVlLXNoYWthYmxlIGluamVjdG9yc1xuICAgICAgICAgKiB0byBwcmV2ZW50IGZ1cnRoZXIgc2VhcmNoZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlY29yZHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHJhbnNpdGl2ZSBzZXQgb2YgYEluamVjdG9yVHlwZWBzIHdoaWNoIGRlZmluZSB0aGlzIGluamVjdG9yLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbmplY3RvckRlZlR5cGVzID0gbmV3IFNldCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9mIHZhbHVlcyBpbnN0YW50aWF0ZWQgYnkgdGhpcyBpbmplY3RvciB3aGljaCBjb250YWluIGBuZ09uRGVzdHJveWAgbGlmZWN5Y2xlIGhvb2tzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkRlc3Ryb3kgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBkZWR1cFN0YWNrID0gW107XG4gICAgICAgIC8vIFN0YXJ0IG9mZiBieSBjcmVhdGluZyBSZWNvcmRzIGZvciBldmVyeSBwcm92aWRlciBkZWNsYXJlZCBpbiBldmVyeSBJbmplY3RvclR5cGVcbiAgICAgICAgLy8gaW5jbHVkZWQgdHJhbnNpdGl2ZWx5IGluIGFkZGl0aW9uYWwgcHJvdmlkZXJzIHRoZW4gZG8gdGhlIHNhbWUgZm9yIGBkZWZgLiBUaGlzIG9yZGVyIGlzXG4gICAgICAgIC8vIGltcG9ydGFudCBiZWNhdXNlIGBkZWZgIG1heSBpbmNsdWRlIHByb3ZpZGVycyB0aGF0IG92ZXJyaWRlIG9uZXMgaW4gYWRkaXRpb25hbFByb3ZpZGVycy5cbiAgICAgICAgYWRkaXRpb25hbFByb3ZpZGVycyAmJlxuICAgICAgICAgICAgZGVlcEZvckVhY2goYWRkaXRpb25hbFByb3ZpZGVycywgcHJvdmlkZXIgPT4gdGhpcy5wcm9jZXNzUHJvdmlkZXIocHJvdmlkZXIsIGRlZiwgYWRkaXRpb25hbFByb3ZpZGVycykpO1xuICAgICAgICBkZWVwRm9yRWFjaChbZGVmXSwgaW5qZWN0b3JEZWYgPT4gdGhpcy5wcm9jZXNzSW5qZWN0b3JUeXBlKGluamVjdG9yRGVmLCBbXSwgZGVkdXBTdGFjaykpO1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIElOSkVDVE9SIHRva2VuIHByb3ZpZGVzIHRoaXMgaW5qZWN0b3IuXG4gICAgICAgIHRoaXMucmVjb3Jkcy5zZXQoSU5KRUNUT1IsIG1ha2VSZWNvcmQodW5kZWZpbmVkLCB0aGlzKSk7XG4gICAgICAgIC8vIERldGVjdCB3aGV0aGVyIHRoaXMgaW5qZWN0b3IgaGFzIHRoZSBBUFBfUk9PVF9TQ09QRSB0b2tlbiBhbmQgdGh1cyBzaG91bGQgcHJvdmlkZVxuICAgICAgICAvLyBhbnkgaW5qZWN0YWJsZSBzY29wZWQgdG8gQVBQX1JPT1RfU0NPUEUuXG4gICAgICAgIGNvbnN0IHJlY29yZCA9IHRoaXMucmVjb3Jkcy5nZXQoSU5KRUNUT1JfU0NPUEUpO1xuICAgICAgICB0aGlzLnNjb3BlID0gcmVjb3JkICE9IG51bGwgPyByZWNvcmQudmFsdWUgOiBudWxsO1xuICAgICAgICAvLyBTb3VyY2UgbmFtZSwgdXNlZCBmb3IgZGVidWdnaW5nXG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlIHx8ICh0eXBlb2YgZGVmID09PSAnb2JqZWN0JyA/IG51bGwgOiBzdHJpbmdpZnkoZGVmKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZsYWcgaW5kaWNhdGluZyB0aGF0IHRoaXMgaW5qZWN0b3Igd2FzIHByZXZpb3VzbHkgZGVzdHJveWVkLlxuICAgICAqL1xuICAgIGdldCBkZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXN0cm95ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc3Ryb3kgdGhlIGluamVjdG9yIGFuZCByZWxlYXNlIHJlZmVyZW5jZXMgdG8gZXZlcnkgaW5zdGFuY2Ugb3IgcHJvdmlkZXIgYXNzb2NpYXRlZCB3aXRoIGl0LlxuICAgICAqXG4gICAgICogQWxzbyBjYWxscyB0aGUgYE9uRGVzdHJveWAgbGlmZWN5Y2xlIGhvb2tzIG9mIGV2ZXJ5IGluc3RhbmNlIHRoYXQgd2FzIGNyZWF0ZWQgZm9yIHdoaWNoIGFcbiAgICAgKiBob29rIHdhcyBmb3VuZC5cbiAgICAgKi9cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xuICAgICAgICAvLyBTZXQgZGVzdHJveWVkID0gdHJ1ZSBmaXJzdCwgaW4gY2FzZSBsaWZlY3ljbGUgaG9va3MgcmUtZW50ZXIgZGVzdHJveSgpLlxuICAgICAgICB0aGlzLl9kZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2FsbCBhbGwgdGhlIGxpZmVjeWNsZSBob29rcy5cbiAgICAgICAgICAgIHRoaXMub25EZXN0cm95LmZvckVhY2goc2VydmljZSA9PiBzZXJ2aWNlLm5nT25EZXN0cm95KCkpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgLy8gUmVsZWFzZSBhbGwgcmVmZXJlbmNlcy5cbiAgICAgICAgICAgIHRoaXMucmVjb3Jkcy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5vbkRlc3Ryb3kuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuaW5qZWN0b3JEZWZUeXBlcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCh0b2tlbiwgbm90Rm91bmRWYWx1ZSA9IFRIUk9XX0lGX05PVF9GT1VORCwgZmxhZ3MgPSBJbmplY3RGbGFncy5EZWZhdWx0KSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XG4gICAgICAgIC8vIFNldCB0aGUgaW5qZWN0aW9uIGNvbnRleHQuXG4gICAgICAgIGNvbnN0IHByZXZpb3VzSW5qZWN0b3IgPSBzZXRDdXJyZW50SW5qZWN0b3IodGhpcyk7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzSW5qZWN0SW1wbGVtZW50YXRpb24gPSBzZXRJbmplY3RJbXBsZW1lbnRhdGlvbih1bmRlZmluZWQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHRoZSBTa2lwU2VsZiBmbGFnLlxuICAgICAgICAgICAgaWYgKCEoZmxhZ3MgJiBJbmplY3RGbGFncy5Ta2lwU2VsZikpIHtcbiAgICAgICAgICAgICAgICAvLyBTa2lwU2VsZiBpc24ndCBzZXQsIGNoZWNrIGlmIHRoZSByZWNvcmQgYmVsb25ncyB0byB0aGlzIGluamVjdG9yLlxuICAgICAgICAgICAgICAgIGxldCByZWNvcmQgPSB0aGlzLnJlY29yZHMuZ2V0KHRva2VuKTtcbiAgICAgICAgICAgICAgICBpZiAocmVjb3JkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTm8gcmVjb3JkLCBidXQgbWF5YmUgdGhlIHRva2VuIGlzIHNjb3BlZCB0byB0aGlzIGluamVjdG9yLiBMb29rIGZvciBhbiBpbmplY3RhYmxlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZiB3aXRoIGEgc2NvcGUgbWF0Y2hpbmcgdGhpcyBpbmplY3Rvci5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmID0gY291bGRCZUluamVjdGFibGVUeXBlKHRva2VuKSAmJiBnZXRJbmplY3RhYmxlRGVmKHRva2VuKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlZiAmJiB0aGlzLmluamVjdGFibGVEZWZJblNjb3BlKGRlZikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGluamVjdGFibGUgZGVmIGFuZCBpdCdzIHNjb3BlZCB0byB0aGlzIGluamVjdG9yLiBQcmV0ZW5kIGFzIGlmIGl0IHdhcyBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbGwgYWxvbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmQgPSBtYWtlUmVjb3JkKGluamVjdGFibGVEZWZPckluamVjdG9yRGVmRmFjdG9yeSh0b2tlbiksIE5PVF9ZRVQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29yZHMuc2V0KHRva2VuLCByZWNvcmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiBhIHJlY29yZCB3YXMgZm91bmQsIGdldCB0aGUgaW5zdGFuY2UgZm9yIGl0IGFuZCByZXR1cm4gaXQuXG4gICAgICAgICAgICAgICAgaWYgKHJlY29yZCAhPSBudWxsIC8qIE5PVCBudWxsIHx8IHVuZGVmaW5lZCAqLykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oeWRyYXRlKHRva2VuLCByZWNvcmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNlbGVjdCB0aGUgbmV4dCBpbmplY3RvciBiYXNlZCBvbiB0aGUgU2VsZiBmbGFnIC0gaWYgc2VsZiBpcyBzZXQsIHRoZSBuZXh0IGluamVjdG9yIGlzXG4gICAgICAgICAgICAvLyB0aGUgTnVsbEluamVjdG9yLCBvdGhlcndpc2UgaXQncyB0aGUgcGFyZW50LlxuICAgICAgICAgICAgY29uc3QgbmV4dEluamVjdG9yID0gIShmbGFncyAmIEluamVjdEZsYWdzLlNlbGYpID8gdGhpcy5wYXJlbnQgOiBnZXROdWxsSW5qZWN0b3IoKTtcbiAgICAgICAgICAgIC8vIFNldCB0aGUgbm90Rm91bmRWYWx1ZSBiYXNlZCBvbiB0aGUgT3B0aW9uYWwgZmxhZyAtIGlmIG9wdGlvbmFsIGlzIHNldCBhbmQgbm90Rm91bmRWYWx1ZVxuICAgICAgICAgICAgLy8gaXMgdW5kZWZpbmVkLCB0aGUgdmFsdWUgaXMgbnVsbCwgb3RoZXJ3aXNlIGl0J3MgdGhlIG5vdEZvdW5kVmFsdWUuXG4gICAgICAgICAgICBub3RGb3VuZFZhbHVlID0gKGZsYWdzICYgSW5qZWN0RmxhZ3MuT3B0aW9uYWwpICYmIG5vdEZvdW5kVmFsdWUgPT09IFRIUk9XX0lGX05PVF9GT1VORCA/XG4gICAgICAgICAgICAgICAgbnVsbCA6XG4gICAgICAgICAgICAgICAgbm90Rm91bmRWYWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBuZXh0SW5qZWN0b3IuZ2V0KHRva2VuLCBub3RGb3VuZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUubmFtZSA9PT0gJ051bGxJbmplY3RvckVycm9yJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBlW05HX1RFTVBfVE9LRU5fUEFUSF0gPSBlW05HX1RFTVBfVE9LRU5fUEFUSF0gfHwgW107XG4gICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KHN0cmluZ2lmeSh0b2tlbikpO1xuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0luamVjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHN0aWxsIGhhdmUgYSBwYXJlbnQgaW5qZWN0b3IsIGtlZXAgdGhyb3dpbmdcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvcm1hdCAmIHRocm93IHRoZSBmaW5hbCBlcnJvciBtZXNzYWdlIHdoZW4gd2UgZG9uJ3QgaGF2ZSBhbnkgcHJldmlvdXMgaW5qZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoSW5qZWN0b3JFcnJvcihlLCB0b2tlbiwgJ1IzSW5qZWN0b3JFcnJvcicsIHRoaXMuc291cmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgLy8gTGFzdGx5LCByZXN0b3JlIHRoZSBwcmV2aW91cyBpbmplY3Rpb24gY29udGV4dC5cbiAgICAgICAgICAgIHNldEluamVjdEltcGxlbWVudGF0aW9uKHByZXZpb3VzSW5qZWN0SW1wbGVtZW50YXRpb24pO1xuICAgICAgICAgICAgc2V0Q3VycmVudEluamVjdG9yKHByZXZpb3VzSW5qZWN0b3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfcmVzb2x2ZUluamVjdG9yRGVmVHlwZXMoKSB7XG4gICAgICAgIHRoaXMuaW5qZWN0b3JEZWZUeXBlcy5mb3JFYWNoKGRlZlR5cGUgPT4gdGhpcy5nZXQoZGVmVHlwZSkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdG9rZW5zID0gW10sIHJlY29yZHMgPSB0aGlzLnJlY29yZHM7XG4gICAgICAgIHJlY29yZHMuZm9yRWFjaCgodiwgdG9rZW4pID0+IHRva2Vucy5wdXNoKHN0cmluZ2lmeSh0b2tlbikpKTtcbiAgICAgICAgcmV0dXJuIGBSM0luamVjdG9yWyR7dG9rZW5zLmpvaW4oJywgJyl9XWA7XG4gICAgfVxuICAgIGFzc2VydE5vdERlc3Ryb3llZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Rlc3Ryb3llZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcigyMDUgLyogSU5KRUNUT1JfQUxSRUFEWV9ERVNUUk9ZRUQgKi8sIG5nRGV2TW9kZSAmJiAnSW5qZWN0b3IgaGFzIGFscmVhZHkgYmVlbiBkZXN0cm95ZWQuJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIGFuIGBJbmplY3RvclR5cGVgIG9yIGBJbmplY3RvclR5cGVXaXRoUHJvdmlkZXJzYCBhbmQgYWxsIG9mIGl0cyB0cmFuc2l0aXZlIHByb3ZpZGVyc1xuICAgICAqIHRvIHRoaXMgaW5qZWN0b3IuXG4gICAgICpcbiAgICAgKiBJZiBhbiBgSW5qZWN0b3JUeXBlV2l0aFByb3ZpZGVyc2AgdGhhdCBkZWNsYXJlcyBwcm92aWRlcnMgYmVzaWRlcyB0aGUgdHlwZSBpcyBzcGVjaWZpZWQsXG4gICAgICogdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIFwidHJ1ZVwiIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVycyBvZiB0aGUgdHlwZSBkZWZpbml0aW9uIG5lZWRcbiAgICAgKiB0byBiZSBwcm9jZXNzZWQuIFRoaXMgYWxsb3dzIHVzIHRvIHByb2Nlc3MgcHJvdmlkZXJzIG9mIGluamVjdG9yIHR5cGVzIGFmdGVyIGFsbCBpbXBvcnRzIG9mXG4gICAgICogYW4gaW5qZWN0b3IgZGVmaW5pdGlvbiBhcmUgcHJvY2Vzc2VkLiAoZm9sbG93aW5nIFZpZXcgRW5naW5lIHNlbWFudGljczogc2VlIEZXLTEzNDkpXG4gICAgICovXG4gICAgcHJvY2Vzc0luamVjdG9yVHlwZShkZWZPcldyYXBwZWREZWYsIHBhcmVudHMsIGRlZHVwU3RhY2spIHtcbiAgICAgICAgZGVmT3JXcmFwcGVkRGVmID0gcmVzb2x2ZUZvcndhcmRSZWYoZGVmT3JXcmFwcGVkRGVmKTtcbiAgICAgICAgaWYgKCFkZWZPcldyYXBwZWREZWYpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIEVpdGhlciB0aGUgZGVmT3JXcmFwcGVkRGVmIGlzIGFuIEluamVjdG9yVHlwZSAod2l0aCBpbmplY3RvciBkZWYpIG9yIGFuXG4gICAgICAgIC8vIEluamVjdG9yRGVmVHlwZVdpdGhQcm92aWRlcnMgKGFrYSBNb2R1bGVXaXRoUHJvdmlkZXJzKS4gRGV0ZWN0aW5nIGVpdGhlciBpcyBhIG1lZ2Ftb3JwaGljXG4gICAgICAgIC8vIHJlYWQsIHNvIGNhcmUgaXMgdGFrZW4gdG8gb25seSBkbyB0aGUgcmVhZCBvbmNlLlxuICAgICAgICAvLyBGaXJzdCBhdHRlbXB0IHRvIHJlYWQgdGhlIGluamVjdG9yIGRlZiAoYMm1aW5qYCkuXG4gICAgICAgIGxldCBkZWYgPSBnZXRJbmplY3RvckRlZihkZWZPcldyYXBwZWREZWYpO1xuICAgICAgICAvLyBJZiB0aGF0J3Mgbm90IHByZXNlbnQsIHRoZW4gYXR0ZW1wdCB0byByZWFkIG5nTW9kdWxlIGZyb20gdGhlIEluamVjdG9yRGVmVHlwZVdpdGhQcm92aWRlcnMuXG4gICAgICAgIGNvbnN0IG5nTW9kdWxlID0gKGRlZiA9PSBudWxsKSAmJiBkZWZPcldyYXBwZWREZWYubmdNb2R1bGUgfHwgdW5kZWZpbmVkO1xuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIEluamVjdG9yVHlwZS4gSW4gdGhlIGNhc2Ugd2hlcmUgYGRlZk9yV3JhcHBlZERlZmAgaXMgYW4gYEluamVjdG9yVHlwZWAsXG4gICAgICAgIC8vIHRoZW4gdGhpcyBpcyBlYXN5LiBJbiB0aGUgY2FzZSBvZiBhbiBJbmplY3RvckRlZlR5cGVXaXRoUHJvdmlkZXJzLCB0aGVuIHRoZSBkZWZpbml0aW9uIHR5cGVcbiAgICAgICAgLy8gaXMgdGhlIGBuZ01vZHVsZWAuXG4gICAgICAgIGNvbnN0IGRlZlR5cGUgPSAobmdNb2R1bGUgPT09IHVuZGVmaW5lZCkgPyBkZWZPcldyYXBwZWREZWYgOiBuZ01vZHVsZTtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNpcmN1bGFyIGRlcGVuZGVuY2llcy5cbiAgICAgICAgaWYgKG5nRGV2TW9kZSAmJiBwYXJlbnRzLmluZGV4T2YoZGVmVHlwZSkgIT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZOYW1lID0gc3RyaW5naWZ5KGRlZlR5cGUpO1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IHBhcmVudHMubWFwKHN0cmluZ2lmeSk7XG4gICAgICAgICAgICB0aHJvd0N5Y2xpY0RlcGVuZGVuY3lFcnJvcihkZWZOYW1lLCBwYXRoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGVjayBmb3IgbXVsdGlwbGUgaW1wb3J0cyBvZiB0aGUgc2FtZSBtb2R1bGVcbiAgICAgICAgY29uc3QgaXNEdXBsaWNhdGUgPSBkZWR1cFN0YWNrLmluZGV4T2YoZGVmVHlwZSkgIT09IC0xO1xuICAgICAgICAvLyBGaW5hbGx5LCBpZiBkZWZPcldyYXBwZWRUeXBlIHdhcyBhbiBgSW5qZWN0b3JEZWZUeXBlV2l0aFByb3ZpZGVyc2AsIHRoZW4gdGhlIGFjdHVhbFxuICAgICAgICAvLyBgSW5qZWN0b3JEZWZgIGlzIG9uIGl0cyBgbmdNb2R1bGVgLlxuICAgICAgICBpZiAobmdNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVmID0gZ2V0SW5qZWN0b3JEZWYobmdNb2R1bGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIG5vIGRlZmluaXRpb24gd2FzIGZvdW5kLCBpdCBtaWdodCBiZSBmcm9tIGV4cG9ydHMuIFJlbW92ZSBpdC5cbiAgICAgICAgaWYgKGRlZiA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIHByb3ZpZGVycyBpbiB0aGUgc2FtZSB3YXkgdGhhdCBATmdNb2R1bGUgcmVzb2x1dGlvbiBkaWQ6XG4gICAgICAgIC8vIEZpcnN0LCBpbmNsdWRlIHByb3ZpZGVycyBmcm9tIGFueSBpbXBvcnRzLlxuICAgICAgICBpZiAoZGVmLmltcG9ydHMgIT0gbnVsbCAmJiAhaXNEdXBsaWNhdGUpIHtcbiAgICAgICAgICAgIC8vIEJlZm9yZSBwcm9jZXNzaW5nIGRlZlR5cGUncyBpbXBvcnRzLCBhZGQgaXQgdG8gdGhlIHNldCBvZiBwYXJlbnRzLiBUaGlzIHdheSwgaWYgaXQgZW5kc1xuICAgICAgICAgICAgLy8gdXAgZGVlcGx5IGltcG9ydGluZyBpdHNlbGYsIHRoaXMgY2FuIGJlIGRldGVjdGVkLlxuICAgICAgICAgICAgbmdEZXZNb2RlICYmIHBhcmVudHMucHVzaChkZWZUeXBlKTtcbiAgICAgICAgICAgIC8vIEFkZCBpdCB0byB0aGUgc2V0IG9mIGRlZHVwcy4gVGhpcyB3YXkgd2UgY2FuIGRldGVjdCBtdWx0aXBsZSBpbXBvcnRzIG9mIHRoZSBzYW1lIG1vZHVsZVxuICAgICAgICAgICAgZGVkdXBTdGFjay5wdXNoKGRlZlR5cGUpO1xuICAgICAgICAgICAgbGV0IGltcG9ydFR5cGVzV2l0aFByb3ZpZGVycztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGVlcEZvckVhY2goZGVmLmltcG9ydHMsIGltcG9ydGVkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc0luamVjdG9yVHlwZShpbXBvcnRlZCwgcGFyZW50cywgZGVkdXBTdGFjaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbXBvcnRUeXBlc1dpdGhQcm92aWRlcnMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRUeXBlc1dpdGhQcm92aWRlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBwcm9jZXNzZWQgaW1wb3J0IGlzIGFuIGluamVjdG9yIHR5cGUgd2l0aCBwcm92aWRlcnMsIHdlIHN0b3JlIGl0IGluIHRoZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGlzdCBvZiBpbXBvcnQgdHlwZXMgd2l0aCBwcm92aWRlcnMsIHNvIHRoYXQgd2UgY2FuIHByb2Nlc3MgdGhvc2UgYWZ0ZXJ3YXJkcy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGltcG9ydFR5cGVzV2l0aFByb3ZpZGVycy5wdXNoKGltcG9ydGVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGl0IGZyb20gdGhlIHBhcmVudHMgc2V0IHdoZW4gZmluaXNoZWQuXG4gICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIHBhcmVudHMucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJbXBvcnRzIHdoaWNoIGFyZSBkZWNsYXJlZCB3aXRoIHByb3ZpZGVycyAoVHlwZVdpdGhQcm92aWRlcnMpIG5lZWQgdG8gYmUgcHJvY2Vzc2VkXG4gICAgICAgICAgICAvLyBhZnRlciBhbGwgaW1wb3J0ZWQgbW9kdWxlcyBhcmUgcHJvY2Vzc2VkLiBUaGlzIGlzIHNpbWlsYXIgdG8gaG93IFZpZXcgRW5naW5lXG4gICAgICAgICAgICAvLyBwcm9jZXNzZXMvbWVyZ2VzIG1vZHVsZSBpbXBvcnRzIGluIHRoZSBtZXRhZGF0YSByZXNvbHZlci4gU2VlOiBGVy0xMzQ5LlxuICAgICAgICAgICAgaWYgKGltcG9ydFR5cGVzV2l0aFByb3ZpZGVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbXBvcnRUeXBlc1dpdGhQcm92aWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBuZ01vZHVsZSwgcHJvdmlkZXJzIH0gPSBpbXBvcnRUeXBlc1dpdGhQcm92aWRlcnNbaV07XG4gICAgICAgICAgICAgICAgICAgIGRlZXBGb3JFYWNoKHByb3ZpZGVycywgcHJvdmlkZXIgPT4gdGhpcy5wcm9jZXNzUHJvdmlkZXIocHJvdmlkZXIsIG5nTW9kdWxlLCBwcm92aWRlcnMgfHwgRU1QVFlfQVJSQVkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVHJhY2sgdGhlIEluamVjdG9yVHlwZSBhbmQgYWRkIGEgcHJvdmlkZXIgZm9yIGl0LiBJdCdzIGltcG9ydGFudCB0aGF0IHRoaXMgaXMgZG9uZSBhZnRlciB0aGVcbiAgICAgICAgLy8gZGVmJ3MgaW1wb3J0cy5cbiAgICAgICAgdGhpcy5pbmplY3RvckRlZlR5cGVzLmFkZChkZWZUeXBlKTtcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IGdldEZhY3RvcnlEZWYoZGVmVHlwZSkgfHwgKCgpID0+IG5ldyBkZWZUeXBlKCkpO1xuICAgICAgICB0aGlzLnJlY29yZHMuc2V0KGRlZlR5cGUsIG1ha2VSZWNvcmQoZmFjdG9yeSwgTk9UX1lFVCkpO1xuICAgICAgICAvLyBOZXh0LCBpbmNsdWRlIHByb3ZpZGVycyBsaXN0ZWQgb24gdGhlIGRlZmluaXRpb24gaXRzZWxmLlxuICAgICAgICBjb25zdCBkZWZQcm92aWRlcnMgPSBkZWYucHJvdmlkZXJzO1xuICAgICAgICBpZiAoZGVmUHJvdmlkZXJzICE9IG51bGwgJiYgIWlzRHVwbGljYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBpbmplY3RvclR5cGUgPSBkZWZPcldyYXBwZWREZWY7XG4gICAgICAgICAgICBkZWVwRm9yRWFjaChkZWZQcm92aWRlcnMsIHByb3ZpZGVyID0+IHRoaXMucHJvY2Vzc1Byb3ZpZGVyKHByb3ZpZGVyLCBpbmplY3RvclR5cGUsIGRlZlByb3ZpZGVycykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmdNb2R1bGUgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgZGVmT3JXcmFwcGVkRGVmLnByb3ZpZGVycyAhPT0gdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2VzcyBhIGBTaW5nbGVQcm92aWRlcmAgYW5kIGFkZCBpdC5cbiAgICAgKi9cbiAgICBwcm9jZXNzUHJvdmlkZXIocHJvdmlkZXIsIG5nTW9kdWxlVHlwZSwgcHJvdmlkZXJzKSB7XG4gICAgICAgIC8vIERldGVybWluZSB0aGUgdG9rZW4gZnJvbSB0aGUgcHJvdmlkZXIuIEVpdGhlciBpdCdzIGl0cyBvd24gdG9rZW4sIG9yIGhhcyBhIHtwcm92aWRlOiAuLi59XG4gICAgICAgIC8vIHByb3BlcnR5LlxuICAgICAgICBwcm92aWRlciA9IHJlc29sdmVGb3J3YXJkUmVmKHByb3ZpZGVyKTtcbiAgICAgICAgbGV0IHRva2VuID0gaXNUeXBlUHJvdmlkZXIocHJvdmlkZXIpID8gcHJvdmlkZXIgOiByZXNvbHZlRm9yd2FyZFJlZihwcm92aWRlciAmJiBwcm92aWRlci5wcm92aWRlKTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgYFJlY29yZGAgZm9yIHRoZSBwcm92aWRlci5cbiAgICAgICAgY29uc3QgcmVjb3JkID0gcHJvdmlkZXJUb1JlY29yZChwcm92aWRlciwgbmdNb2R1bGVUeXBlLCBwcm92aWRlcnMpO1xuICAgICAgICBpZiAoIWlzVHlwZVByb3ZpZGVyKHByb3ZpZGVyKSAmJiBwcm92aWRlci5tdWx0aSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHByb3ZpZGVyIGluZGljYXRlcyB0aGF0IGl0J3MgYSBtdWx0aS1wcm92aWRlciwgcHJvY2VzcyBpdCBzcGVjaWFsbHkuXG4gICAgICAgICAgICAvLyBGaXJzdCBjaGVjayB3aGV0aGVyIGl0J3MgYmVlbiBkZWZpbmVkIGFscmVhZHkuXG4gICAgICAgICAgICBsZXQgbXVsdGlSZWNvcmQgPSB0aGlzLnJlY29yZHMuZ2V0KHRva2VuKTtcbiAgICAgICAgICAgIGlmIChtdWx0aVJlY29yZCkge1xuICAgICAgICAgICAgICAgIC8vIEl0IGhhcy4gVGhyb3cgYSBuaWNlIGVycm9yIGlmXG4gICAgICAgICAgICAgICAgaWYgKG5nRGV2TW9kZSAmJiBtdWx0aVJlY29yZC5tdWx0aSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93TWl4ZWRNdWx0aVByb3ZpZGVyRXJyb3IoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtdWx0aVJlY29yZCA9IG1ha2VSZWNvcmQodW5kZWZpbmVkLCBOT1RfWUVULCB0cnVlKTtcbiAgICAgICAgICAgICAgICBtdWx0aVJlY29yZC5mYWN0b3J5ID0gKCkgPT4gaW5qZWN0QXJncyhtdWx0aVJlY29yZC5tdWx0aSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmRzLnNldCh0b2tlbiwgbXVsdGlSZWNvcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9rZW4gPSBwcm92aWRlcjtcbiAgICAgICAgICAgIG11bHRpUmVjb3JkLm11bHRpLnB1c2gocHJvdmlkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLnJlY29yZHMuZ2V0KHRva2VuKTtcbiAgICAgICAgICAgIGlmIChuZ0Rldk1vZGUgJiYgZXhpc3RpbmcgJiYgZXhpc3RpbmcubXVsdGkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93TWl4ZWRNdWx0aVByb3ZpZGVyRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlY29yZHMuc2V0KHRva2VuLCByZWNvcmQpO1xuICAgIH1cbiAgICBoeWRyYXRlKHRva2VuLCByZWNvcmQpIHtcbiAgICAgICAgaWYgKG5nRGV2TW9kZSAmJiByZWNvcmQudmFsdWUgPT09IENJUkNVTEFSKSB7XG4gICAgICAgICAgICB0aHJvd0N5Y2xpY0RlcGVuZGVuY3lFcnJvcihzdHJpbmdpZnkodG9rZW4pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZWNvcmQudmFsdWUgPT09IE5PVF9ZRVQpIHtcbiAgICAgICAgICAgIHJlY29yZC52YWx1ZSA9IENJUkNVTEFSO1xuICAgICAgICAgICAgcmVjb3JkLnZhbHVlID0gcmVjb3JkLmZhY3RvcnkoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlY29yZC52YWx1ZSA9PT0gJ29iamVjdCcgJiYgcmVjb3JkLnZhbHVlICYmIGhhc09uRGVzdHJveShyZWNvcmQudmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLm9uRGVzdHJveS5hZGQocmVjb3JkLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVjb3JkLnZhbHVlO1xuICAgIH1cbiAgICBpbmplY3RhYmxlRGVmSW5TY29wZShkZWYpIHtcbiAgICAgICAgaWYgKCFkZWYucHJvdmlkZWRJbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb3ZpZGVkSW4gPSByZXNvbHZlRm9yd2FyZFJlZihkZWYucHJvdmlkZWRJbik7XG4gICAgICAgIGlmICh0eXBlb2YgcHJvdmlkZWRJbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm92aWRlZEluID09PSAnYW55JyB8fCAocHJvdmlkZWRJbiA9PT0gdGhpcy5zY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3RvckRlZlR5cGVzLmhhcyhwcm92aWRlZEluKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGluamVjdGFibGVEZWZPckluamVjdG9yRGVmRmFjdG9yeSh0b2tlbikge1xuICAgIC8vIE1vc3QgdG9rZW5zIHdpbGwgaGF2ZSBhbiBpbmplY3RhYmxlIGRlZiBkaXJlY3RseSBvbiB0aGVtLCB3aGljaCBzcGVjaWZpZXMgYSBmYWN0b3J5IGRpcmVjdGx5LlxuICAgIGNvbnN0IGluamVjdGFibGVEZWYgPSBnZXRJbmplY3RhYmxlRGVmKHRva2VuKTtcbiAgICBjb25zdCBmYWN0b3J5ID0gaW5qZWN0YWJsZURlZiAhPT0gbnVsbCA/IGluamVjdGFibGVEZWYuZmFjdG9yeSA6IGdldEZhY3RvcnlEZWYodG9rZW4pO1xuICAgIGlmIChmYWN0b3J5ICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xuICAgIH1cbiAgICAvLyBJbmplY3Rpb25Ub2tlbnMgc2hvdWxkIGhhdmUgYW4gaW5qZWN0YWJsZSBkZWYgKMm1cHJvdikgYW5kIHRodXMgc2hvdWxkIGJlIGhhbmRsZWQgYWJvdmUuXG4gICAgLy8gSWYgaXQncyBtaXNzaW5nIHRoYXQsIGl0J3MgYW4gZXJyb3IuXG4gICAgaWYgKHRva2VuIGluc3RhbmNlb2YgSW5qZWN0aW9uVG9rZW4pIHtcbiAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcigyMDQgLyogSU5WQUxJRF9JTkpFQ1RJT05fVE9LRU4gKi8sIG5nRGV2TW9kZSAmJiBgVG9rZW4gJHtzdHJpbmdpZnkodG9rZW4pfSBpcyBtaXNzaW5nIGEgybVwcm92IGRlZmluaXRpb24uYCk7XG4gICAgfVxuICAgIC8vIFVuZGVjb3JhdGVkIHR5cGVzIGNhbiBzb21ldGltZXMgYmUgY3JlYXRlZCBpZiB0aGV5IGhhdmUgbm8gY29uc3RydWN0b3IgYXJndW1lbnRzLlxuICAgIGlmICh0b2tlbiBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgIHJldHVybiBnZXRVbmRlY29yYXRlZEluamVjdGFibGVGYWN0b3J5KHRva2VuKTtcbiAgICB9XG4gICAgLy8gVGhlcmUgd2FzIG5vIHdheSB0byByZXNvbHZlIGEgZmFjdG9yeSBmb3IgdGhpcyB0b2tlbi5cbiAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDIwNCAvKiBJTlZBTElEX0lOSkVDVElPTl9UT0tFTiAqLywgbmdEZXZNb2RlICYmICd1bnJlYWNoYWJsZScpO1xufVxuZnVuY3Rpb24gZ2V0VW5kZWNvcmF0ZWRJbmplY3RhYmxlRmFjdG9yeSh0b2tlbikge1xuICAgIC8vIElmIHRoZSB0b2tlbiBoYXMgcGFyYW1ldGVycyB0aGVuIGl0IGhhcyBkZXBlbmRlbmNpZXMgdGhhdCB3ZSBjYW5ub3QgcmVzb2x2ZSBpbXBsaWNpdGx5LlxuICAgIGNvbnN0IHBhcmFtTGVuZ3RoID0gdG9rZW4ubGVuZ3RoO1xuICAgIGlmIChwYXJhbUxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgYXJncyA9IG5ld0FycmF5KHBhcmFtTGVuZ3RoLCAnPycpO1xuICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDIwNCAvKiBJTlZBTElEX0lOSkVDVElPTl9UT0tFTiAqLywgbmdEZXZNb2RlICYmIGBDYW4ndCByZXNvbHZlIGFsbCBwYXJhbWV0ZXJzIGZvciAke3N0cmluZ2lmeSh0b2tlbil9OiAoJHthcmdzLmpvaW4oJywgJyl9KS5gKTtcbiAgICB9XG4gICAgLy8gVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGFwcGVhcnMgdG8gaGF2ZSBubyBwYXJhbWV0ZXJzLlxuICAgIC8vIFRoaXMgbWlnaHQgYmUgYmVjYXVzZSBpdCBpbmhlcml0cyBmcm9tIGEgc3VwZXItY2xhc3MuIEluIHdoaWNoIGNhc2UsIHVzZSBhbiBpbmplY3RhYmxlXG4gICAgLy8gZGVmIGZyb20gYW4gYW5jZXN0b3IgaWYgdGhlcmUgaXMgb25lLlxuICAgIC8vIE90aGVyd2lzZSB0aGlzIHJlYWxseSBpcyBhIHNpbXBsZSBjbGFzcyB3aXRoIG5vIGRlcGVuZGVuY2llcywgc28gcmV0dXJuIGEgZmFjdG9yeSB0aGF0XG4gICAgLy8ganVzdCBpbnN0YW50aWF0ZXMgdGhlIHplcm8tYXJnIGNvbnN0cnVjdG9yLlxuICAgIGNvbnN0IGluaGVyaXRlZEluamVjdGFibGVEZWYgPSBnZXRJbmhlcml0ZWRJbmplY3RhYmxlRGVmKHRva2VuKTtcbiAgICBpZiAoaW5oZXJpdGVkSW5qZWN0YWJsZURlZiAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gKCkgPT4gaW5oZXJpdGVkSW5qZWN0YWJsZURlZi5mYWN0b3J5KHRva2VuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAoKSA9PiBuZXcgdG9rZW4oKTtcbiAgICB9XG59XG5mdW5jdGlvbiBwcm92aWRlclRvUmVjb3JkKHByb3ZpZGVyLCBuZ01vZHVsZVR5cGUsIHByb3ZpZGVycykge1xuICAgIGlmIChpc1ZhbHVlUHJvdmlkZXIocHJvdmlkZXIpKSB7XG4gICAgICAgIHJldHVybiBtYWtlUmVjb3JkKHVuZGVmaW5lZCwgcHJvdmlkZXIudXNlVmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IHByb3ZpZGVyVG9GYWN0b3J5KHByb3ZpZGVyLCBuZ01vZHVsZVR5cGUsIHByb3ZpZGVycyk7XG4gICAgICAgIHJldHVybiBtYWtlUmVjb3JkKGZhY3RvcnksIE5PVF9ZRVQpO1xuICAgIH1cbn1cbi8qKlxuICogQ29udmVydHMgYSBgU2luZ2xlUHJvdmlkZXJgIGludG8gYSBmYWN0b3J5IGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSBwcm92aWRlciBwcm92aWRlciB0byBjb252ZXJ0IHRvIGZhY3RvcnlcbiAqL1xuZnVuY3Rpb24gcHJvdmlkZXJUb0ZhY3RvcnkocHJvdmlkZXIsIG5nTW9kdWxlVHlwZSwgcHJvdmlkZXJzKSB7XG4gICAgbGV0IGZhY3RvcnkgPSB1bmRlZmluZWQ7XG4gICAgaWYgKGlzVHlwZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xuICAgICAgICBjb25zdCB1bndyYXBwZWRQcm92aWRlciA9IHJlc29sdmVGb3J3YXJkUmVmKHByb3ZpZGVyKTtcbiAgICAgICAgcmV0dXJuIGdldEZhY3RvcnlEZWYodW53cmFwcGVkUHJvdmlkZXIpIHx8IGluamVjdGFibGVEZWZPckluamVjdG9yRGVmRmFjdG9yeSh1bndyYXBwZWRQcm92aWRlcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoaXNWYWx1ZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xuICAgICAgICAgICAgZmFjdG9yeSA9ICgpID0+IHJlc29sdmVGb3J3YXJkUmVmKHByb3ZpZGVyLnVzZVZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0ZhY3RvcnlQcm92aWRlcihwcm92aWRlcikpIHtcbiAgICAgICAgICAgIGZhY3RvcnkgPSAoKSA9PiBwcm92aWRlci51c2VGYWN0b3J5KC4uLmluamVjdEFyZ3MocHJvdmlkZXIuZGVwcyB8fCBbXSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlzRXhpc3RpbmdQcm92aWRlcihwcm92aWRlcikpIHtcbiAgICAgICAgICAgIGZhY3RvcnkgPSAoKSA9PiDJtcm1aW5qZWN0KHJlc29sdmVGb3J3YXJkUmVmKHByb3ZpZGVyLnVzZUV4aXN0aW5nKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjbGFzc1JlZiA9IHJlc29sdmVGb3J3YXJkUmVmKHByb3ZpZGVyICYmXG4gICAgICAgICAgICAgICAgKHByb3ZpZGVyLnVzZUNsYXNzIHx8IHByb3ZpZGVyLnByb3ZpZGUpKTtcbiAgICAgICAgICAgIGlmIChuZ0Rldk1vZGUgJiYgIWNsYXNzUmVmKSB7XG4gICAgICAgICAgICAgICAgdGhyb3dJbnZhbGlkUHJvdmlkZXJFcnJvcihuZ01vZHVsZVR5cGUsIHByb3ZpZGVycywgcHJvdmlkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc0RlcHMocHJvdmlkZXIpKSB7XG4gICAgICAgICAgICAgICAgZmFjdG9yeSA9ICgpID0+IG5ldyAoY2xhc3NSZWYpKC4uLmluamVjdEFyZ3MocHJvdmlkZXIuZGVwcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEZhY3RvcnlEZWYoY2xhc3NSZWYpIHx8IGluamVjdGFibGVEZWZPckluamVjdG9yRGVmRmFjdG9yeShjbGFzc1JlZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhY3Rvcnk7XG59XG5mdW5jdGlvbiBtYWtlUmVjb3JkKGZhY3RvcnksIHZhbHVlLCBtdWx0aSA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmFjdG9yeTogZmFjdG9yeSxcbiAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICBtdWx0aTogbXVsdGkgPyBbXSA6IHVuZGVmaW5lZCxcbiAgICB9O1xufVxuZnVuY3Rpb24gaXNWYWx1ZVByb3ZpZGVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0JyAmJiBVU0VfVkFMVUUkMSBpbiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGlzRXhpc3RpbmdQcm92aWRlcih2YWx1ZSkge1xuICAgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS51c2VFeGlzdGluZyk7XG59XG5mdW5jdGlvbiBpc0ZhY3RvcnlQcm92aWRlcih2YWx1ZSkge1xuICAgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS51c2VGYWN0b3J5KTtcbn1cbmZ1bmN0aW9uIGlzVHlwZVByb3ZpZGVyKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbn1cbmZ1bmN0aW9uIGlzQ2xhc3NQcm92aWRlcih2YWx1ZSkge1xuICAgIHJldHVybiAhIXZhbHVlLnVzZUNsYXNzO1xufVxuZnVuY3Rpb24gaGFzRGVwcyh2YWx1ZSkge1xuICAgIHJldHVybiAhIXZhbHVlLmRlcHM7XG59XG5mdW5jdGlvbiBoYXNPbkRlc3Ryb3kodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUubmdPbkRlc3Ryb3kgPT09ICdmdW5jdGlvbic7XG59XG5mdW5jdGlvbiBjb3VsZEJlSW5qZWN0YWJsZVR5cGUodmFsdWUpIHtcbiAgICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykgfHxcbiAgICAgICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgaW5zdGFuY2VvZiBJbmplY3Rpb25Ub2tlbik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBDb25jcmV0ZSBpbmplY3RvcnMgaW1wbGVtZW50IHRoaXMgaW50ZXJmYWNlLiBJbmplY3RvcnMgYXJlIGNvbmZpZ3VyZWRcbiAqIHdpdGggW3Byb3ZpZGVyc10oZ3VpZGUvZ2xvc3NhcnkjcHJvdmlkZXIpIHRoYXQgYXNzb2NpYXRlXG4gKiBkZXBlbmRlbmNpZXMgb2YgdmFyaW91cyB0eXBlcyB3aXRoIFtpbmplY3Rpb24gdG9rZW5zXShndWlkZS9nbG9zc2FyeSNkaS10b2tlbikuXG4gKlxuICogQHNlZSBbXCJESSBQcm92aWRlcnNcIl0oZ3VpZGUvZGVwZW5kZW5jeS1pbmplY3Rpb24tcHJvdmlkZXJzKS5cbiAqIEBzZWUgYFN0YXRpY1Byb3ZpZGVyYFxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKlxuICogIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBjcmVhdGVzIGEgc2VydmljZSBpbmplY3RvciBpbnN0YW5jZS5cbiAqXG4gKiB7QGV4YW1wbGUgY29yZS9kaS90cy9wcm92aWRlcl9zcGVjLnRzIHJlZ2lvbj0nQ29uc3RydWN0b3JQcm92aWRlcid9XG4gKlxuICogIyMjIFVzYWdlIGV4YW1wbGVcbiAqXG4gKiB7QGV4YW1wbGUgY29yZS9kaS90cy9pbmplY3Rvcl9zcGVjLnRzIHJlZ2lvbj0nSW5qZWN0b3InfVxuICpcbiAqIGBJbmplY3RvcmAgcmV0dXJucyBpdHNlbGYgd2hlbiBnaXZlbiBgSW5qZWN0b3JgIGFzIGEgdG9rZW46XG4gKlxuICoge0BleGFtcGxlIGNvcmUvZGkvdHMvaW5qZWN0b3Jfc3BlYy50cyByZWdpb249J2luamVjdEluamVjdG9yJ31cbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIEluamVjdG9yIHtcbiAgICBzdGF0aWMgY3JlYXRlKG9wdGlvbnMsIHBhcmVudCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUluamVjdG9yKHsgbmFtZTogJycgfSwgcGFyZW50LCBvcHRpb25zLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lID8/ICcnO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUluamVjdG9yKHsgbmFtZSB9LCBvcHRpb25zLnBhcmVudCwgb3B0aW9ucy5wcm92aWRlcnMsIG5hbWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuSW5qZWN0b3IuVEhST1dfSUZfTk9UX0ZPVU5EID0gVEhST1dfSUZfTk9UX0ZPVU5EO1xuSW5qZWN0b3IuTlVMTCA9ICggLyogQF9fUFVSRV9fICovbmV3IE51bGxJbmplY3RvcigpKTtcbi8qKiBAbm9jb2xsYXBzZSAqL1xuSW5qZWN0b3IuybVwcm92ID0gybXJtWRlZmluZUluamVjdGFibGUoe1xuICAgIHRva2VuOiBJbmplY3RvcixcbiAgICBwcm92aWRlZEluOiAnYW55JyxcbiAgICBmYWN0b3J5OiAoKSA9PiDJtcm1aW5qZWN0KElOSkVDVE9SKSxcbn0pO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEBub2NvbGxhcHNlXG4gKi9cbkluamVjdG9yLl9fTkdfRUxFTUVOVF9JRF9fID0gLTEgLyogSW5qZWN0b3IgKi87XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGNvbXBvbmVudCBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBET00gZWxlbWVudC5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogR2l2ZW4gdGhlIGZvbGxvd2luZyBET00gc3RydWN0dXJlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxhcHAtcm9vdD5cbiAqICAgPGRpdj5cbiAqICAgICA8Y2hpbGQtY29tcD48L2NoaWxkLWNvbXA+XG4gKiAgIDwvZGl2PlxuICogPC9hcHAtcm9vdD5cbiAqIGBgYFxuICpcbiAqIENhbGxpbmcgYGdldENvbXBvbmVudGAgb24gYDxjaGlsZC1jb21wPmAgd2lsbCByZXR1cm4gdGhlIGluc3RhbmNlIG9mIGBDaGlsZENvbXBvbmVudGBcbiAqIGFzc29jaWF0ZWQgd2l0aCB0aGlzIERPTSBlbGVtZW50LlxuICpcbiAqIENhbGxpbmcgdGhlIGZ1bmN0aW9uIG9uIGA8YXBwLXJvb3Q+YCB3aWxsIHJldHVybiB0aGUgYE15QXBwYCBpbnN0YW5jZS5cbiAqXG4gKlxuICogQHBhcmFtIGVsZW1lbnQgRE9NIGVsZW1lbnQgZnJvbSB3aGljaCB0aGUgY29tcG9uZW50IHNob3VsZCBiZSByZXRyaWV2ZWQuXG4gKiBAcmV0dXJucyBDb21wb25lbnQgaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50IG9yIGBudWxsYCBpZiB0aGVyZVxuICogICAgaXMgbm8gY29tcG9uZW50IGFzc29jaWF0ZWQgd2l0aCBpdC5cbiAqXG4gKiBAcHVibGljQXBpXG4gKiBAZ2xvYmFsQXBpIG5nXG4gKi9cbmZ1bmN0aW9uIGdldENvbXBvbmVudCQxKGVsZW1lbnQpIHtcbiAgICBhc3NlcnREb21FbGVtZW50KGVsZW1lbnQpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRMQ29udGV4dChlbGVtZW50KTtcbiAgICBpZiAoY29udGV4dCA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKGNvbnRleHQuY29tcG9uZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGV4dC5jb21wb25lbnQgPSBnZXRDb21wb25lbnRBdE5vZGVJbmRleChjb250ZXh0Lm5vZGVJbmRleCwgY29udGV4dC5sVmlldyk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0LmNvbXBvbmVudDtcbn1cbi8qKlxuICogSWYgaW5zaWRlIGFuIGVtYmVkZGVkIHZpZXcgKGUuZy4gYCpuZ0lmYCBvciBgKm5nRm9yYCksIHJldHJpZXZlcyB0aGUgY29udGV4dCBvZiB0aGUgZW1iZWRkZWRcbiAqIHZpZXcgdGhhdCB0aGUgZWxlbWVudCBpcyBwYXJ0IG9mLiBPdGhlcndpc2UgcmV0cmlldmVzIHRoZSBpbnN0YW5jZSBvZiB0aGUgY29tcG9uZW50IHdob3NlIHZpZXdcbiAqIG93bnMgdGhlIGVsZW1lbnQgKGluIHRoaXMgY2FzZSwgdGhlIHJlc3VsdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nIGBnZXRPd25pbmdDb21wb25lbnRgKS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudCBFbGVtZW50IGZvciB3aGljaCB0byBnZXQgdGhlIHN1cnJvdW5kaW5nIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqIEByZXR1cm5zIEluc3RhbmNlIG9mIHRoZSBjb21wb25lbnQgdGhhdCBpcyBhcm91bmQgdGhlIGVsZW1lbnQgb3IgbnVsbCBpZiB0aGUgZWxlbWVudCBpc24ndFxuICogICAgaW5zaWRlIGFueSBjb21wb25lbnQuXG4gKlxuICogQHB1YmxpY0FwaVxuICogQGdsb2JhbEFwaSBuZ1xuICovXG5mdW5jdGlvbiBnZXRDb250ZXh0KGVsZW1lbnQpIHtcbiAgICBhc3NlcnREb21FbGVtZW50KGVsZW1lbnQpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRMQ29udGV4dChlbGVtZW50KTtcbiAgICByZXR1cm4gY29udGV4dCA9PT0gbnVsbCA/IG51bGwgOiBjb250ZXh0LmxWaWV3W0NPTlRFWFRdO1xufVxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGNvbXBvbmVudCBpbnN0YW5jZSB3aG9zZSB2aWV3IGNvbnRhaW5zIHRoZSBET00gZWxlbWVudC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgaWYgYDxjaGlsZC1jb21wPmAgaXMgdXNlZCBpbiB0aGUgdGVtcGxhdGUgb2YgYDxhcHAtY29tcD5gXG4gKiAoaS5lLiBhIGBWaWV3Q2hpbGRgIG9mIGA8YXBwLWNvbXA+YCksIGNhbGxpbmcgYGdldE93bmluZ0NvbXBvbmVudGAgb24gYDxjaGlsZC1jb21wPmBcbiAqIHdvdWxkIHJldHVybiBgPGFwcC1jb21wPmAuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRPckRpciBET00gZWxlbWVudCwgY29tcG9uZW50IG9yIGRpcmVjdGl2ZSBpbnN0YW5jZVxuICogICAgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZSByb290IGNvbXBvbmVudHMuXG4gKiBAcmV0dXJucyBDb21wb25lbnQgaW5zdGFuY2Ugd2hvc2UgdmlldyBvd25zIHRoZSBET00gZWxlbWVudCBvciBudWxsIGlmIHRoZSBlbGVtZW50IGlzIG5vdFxuICogICAgcGFydCBvZiBhIGNvbXBvbmVudCB2aWV3LlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqIEBnbG9iYWxBcGkgbmdcbiAqL1xuZnVuY3Rpb24gZ2V0T3duaW5nQ29tcG9uZW50KGVsZW1lbnRPckRpcikge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRMQ29udGV4dChlbGVtZW50T3JEaXIpO1xuICAgIGlmIChjb250ZXh0ID09PSBudWxsKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICBsZXQgbFZpZXcgPSBjb250ZXh0LmxWaWV3O1xuICAgIGxldCBwYXJlbnQ7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydExWaWV3KGxWaWV3KTtcbiAgICB3aGlsZSAobFZpZXdbVFZJRVddLnR5cGUgPT09IDIgLyogRW1iZWRkZWQgKi8gJiYgKHBhcmVudCA9IGdldExWaWV3UGFyZW50KGxWaWV3KSkpIHtcbiAgICAgICAgbFZpZXcgPSBwYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiBsVmlld1tGTEFHU10gJiA1MTIgLyogSXNSb290ICovID8gbnVsbCA6IGxWaWV3W0NPTlRFWFRdO1xufVxuLyoqXG4gKiBSZXRyaWV2ZXMgYWxsIHJvb3QgY29tcG9uZW50cyBhc3NvY2lhdGVkIHdpdGggYSBET00gZWxlbWVudCwgZGlyZWN0aXZlIG9yIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAqIFJvb3QgY29tcG9uZW50cyBhcmUgdGhvc2Ugd2hpY2ggaGF2ZSBiZWVuIGJvb3RzdHJhcHBlZCBieSBBbmd1bGFyLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50T3JEaXIgRE9NIGVsZW1lbnQsIGNvbXBvbmVudCBvciBkaXJlY3RpdmUgaW5zdGFuY2VcbiAqICAgIGZvciB3aGljaCB0byByZXRyaWV2ZSB0aGUgcm9vdCBjb21wb25lbnRzLlxuICogQHJldHVybnMgUm9vdCBjb21wb25lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdGFyZ2V0IG9iamVjdC5cbiAqXG4gKiBAcHVibGljQXBpXG4gKiBAZ2xvYmFsQXBpIG5nXG4gKi9cbmZ1bmN0aW9uIGdldFJvb3RDb21wb25lbnRzKGVsZW1lbnRPckRpcikge1xuICAgIHJldHVybiBbLi4uZ2V0Um9vdENvbnRleHQoZWxlbWVudE9yRGlyKS5jb21wb25lbnRzXTtcbn1cbi8qKlxuICogUmV0cmlldmVzIGFuIGBJbmplY3RvcmAgYXNzb2NpYXRlZCB3aXRoIGFuIGVsZW1lbnQsIGNvbXBvbmVudCBvciBkaXJlY3RpdmUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRPckRpciBET00gZWxlbWVudCwgY29tcG9uZW50IG9yIGRpcmVjdGl2ZSBpbnN0YW5jZSBmb3Igd2hpY2ggdG9cbiAqICAgIHJldHJpZXZlIHRoZSBpbmplY3Rvci5cbiAqIEByZXR1cm5zIEluamVjdG9yIGFzc29jaWF0ZWQgd2l0aCB0aGUgZWxlbWVudCwgY29tcG9uZW50IG9yIGRpcmVjdGl2ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcHVibGljQXBpXG4gKiBAZ2xvYmFsQXBpIG5nXG4gKi9cbmZ1bmN0aW9uIGdldEluamVjdG9yKGVsZW1lbnRPckRpcikge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRMQ29udGV4dChlbGVtZW50T3JEaXIpO1xuICAgIGlmIChjb250ZXh0ID09PSBudWxsKVxuICAgICAgICByZXR1cm4gSW5qZWN0b3IuTlVMTDtcbiAgICBjb25zdCB0Tm9kZSA9IGNvbnRleHQubFZpZXdbVFZJRVddLmRhdGFbY29udGV4dC5ub2RlSW5kZXhdO1xuICAgIHJldHVybiBuZXcgTm9kZUluamVjdG9yKHROb2RlLCBjb250ZXh0LmxWaWV3KTtcbn1cbi8qKlxuICogUmV0cmlldmUgYSBzZXQgb2YgaW5qZWN0aW9uIHRva2VucyBhdCBhIGdpdmVuIERPTSBub2RlLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50IEVsZW1lbnQgZm9yIHdoaWNoIHRoZSBpbmplY3Rpb24gdG9rZW5zIHNob3VsZCBiZSByZXRyaWV2ZWQuXG4gKi9cbmZ1bmN0aW9uIGdldEluamVjdGlvblRva2VucyhlbGVtZW50KSB7XG4gICAgY29uc3QgY29udGV4dCA9IGdldExDb250ZXh0KGVsZW1lbnQpO1xuICAgIGlmIChjb250ZXh0ID09PSBudWxsKVxuICAgICAgICByZXR1cm4gW107XG4gICAgY29uc3QgbFZpZXcgPSBjb250ZXh0LmxWaWV3O1xuICAgIGNvbnN0IHRWaWV3ID0gbFZpZXdbVFZJRVddO1xuICAgIGNvbnN0IHROb2RlID0gdFZpZXcuZGF0YVtjb250ZXh0Lm5vZGVJbmRleF07XG4gICAgY29uc3QgcHJvdmlkZXJUb2tlbnMgPSBbXTtcbiAgICBjb25zdCBzdGFydEluZGV4ID0gdE5vZGUucHJvdmlkZXJJbmRleGVzICYgMTA0ODU3NSAvKiBQcm92aWRlcnNTdGFydEluZGV4TWFzayAqLztcbiAgICBjb25zdCBlbmRJbmRleCA9IHROb2RlLmRpcmVjdGl2ZUVuZDtcbiAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IGVuZEluZGV4OyBpKyspIHtcbiAgICAgICAgbGV0IHZhbHVlID0gdFZpZXcuZGF0YVtpXTtcbiAgICAgICAgaWYgKGlzRGlyZWN0aXZlRGVmSGFjayh2YWx1ZSkpIHtcbiAgICAgICAgICAgIC8vIFRoZSBmYWN0IHRoYXQgd2Ugc29tZXRpbWVzIHN0b3JlIFR5cGUgYW5kIHNvbWV0aW1lcyBEaXJlY3RpdmVEZWYgaW4gdGhpcyBsb2NhdGlvbiBpcyBhXG4gICAgICAgICAgICAvLyBkZXNpZ24gZmxhdy4gIFdlIHNob3VsZCBhbHdheXMgc3RvcmUgc2FtZSB0eXBlIHNvIHRoYXQgd2UgY2FuIGJlIG1vbm9tb3JwaGljLiBUaGUgaXNzdWVcbiAgICAgICAgICAgIC8vIGlzIHRoYXQgZm9yIENvbXBvbmVudHMvRGlyZWN0aXZlcyB3ZSBzdG9yZSB0aGUgZGVmIGluc3RlYWQgdGhlIHR5cGUuIFRoZSBjb3JyZWN0IGJlaGF2aW9yXG4gICAgICAgICAgICAvLyBpcyB0aGF0IHdlIHNob3VsZCBhbHdheXMgYmUgc3RvcmluZyBpbmplY3RhYmxlIHR5cGUgaW4gdGhpcyBsb2NhdGlvbi5cbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudHlwZTtcbiAgICAgICAgfVxuICAgICAgICBwcm92aWRlclRva2Vucy5wdXNoKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb3ZpZGVyVG9rZW5zO1xufVxuLyoqXG4gKiBSZXRyaWV2ZXMgZGlyZWN0aXZlIGluc3RhbmNlcyBhc3NvY2lhdGVkIHdpdGggYSBnaXZlbiBET00gbm9kZS4gRG9lcyBub3QgaW5jbHVkZVxuICogY29tcG9uZW50IGluc3RhbmNlcy5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogR2l2ZW4gdGhlIGZvbGxvd2luZyBET00gc3RydWN0dXJlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxhcHAtcm9vdD5cbiAqICAgPGJ1dHRvbiBteS1idXR0b24+PC9idXR0b24+XG4gKiAgIDxteS1jb21wPjwvbXktY29tcD5cbiAqIDwvYXBwLXJvb3Q+XG4gKiBgYGBcbiAqXG4gKiBDYWxsaW5nIGBnZXREaXJlY3RpdmVzYCBvbiBgPGJ1dHRvbj5gIHdpbGwgcmV0dXJuIGFuIGFycmF5IHdpdGggYW4gaW5zdGFuY2Ugb2YgdGhlIGBNeUJ1dHRvbmBcbiAqIGRpcmVjdGl2ZSB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgRE9NIG5vZGUuXG4gKlxuICogQ2FsbGluZyBgZ2V0RGlyZWN0aXZlc2Agb24gYDxteS1jb21wPmAgd2lsbCByZXR1cm4gYW4gZW1wdHkgYXJyYXkuXG4gKlxuICogQHBhcmFtIG5vZGUgRE9NIG5vZGUgZm9yIHdoaWNoIHRvIGdldCB0aGUgZGlyZWN0aXZlcy5cbiAqIEByZXR1cm5zIEFycmF5IG9mIGRpcmVjdGl2ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBub2RlLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqIEBnbG9iYWxBcGkgbmdcbiAqL1xuZnVuY3Rpb24gZ2V0RGlyZWN0aXZlcyhub2RlKSB7XG4gICAgLy8gU2tpcCB0ZXh0IG5vZGVzIGJlY2F1c2Ugd2UgY2FuJ3QgaGF2ZSBkaXJlY3RpdmVzIGFzc29jaWF0ZWQgd2l0aCB0aGVtLlxuICAgIGlmIChub2RlIGluc3RhbmNlb2YgVGV4dCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRMQ29udGV4dChub2RlKTtcbiAgICBpZiAoY29udGV4dCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIGNvbnN0IGxWaWV3ID0gY29udGV4dC5sVmlldztcbiAgICBjb25zdCB0VmlldyA9IGxWaWV3W1RWSUVXXTtcbiAgICBjb25zdCBub2RlSW5kZXggPSBjb250ZXh0Lm5vZGVJbmRleDtcbiAgICBpZiAoIXRWaWV3Py5kYXRhW25vZGVJbmRleF0pIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAoY29udGV4dC5kaXJlY3RpdmVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGV4dC5kaXJlY3RpdmVzID0gZ2V0RGlyZWN0aXZlc0F0Tm9kZUluZGV4KG5vZGVJbmRleCwgbFZpZXcsIGZhbHNlKTtcbiAgICB9XG4gICAgLy8gVGhlIGBkaXJlY3RpdmVzYCBpbiB0aGlzIGNhc2UgYXJlIGEgbmFtZWQgYXJyYXkgY2FsbGVkIGBMQ29tcG9uZW50Vmlld2AuIENsb25lIHRoZVxuICAgIC8vIHJlc3VsdCBzbyB3ZSBkb24ndCBleHBvc2UgYW4gaW50ZXJuYWwgZGF0YSBzdHJ1Y3R1cmUgaW4gdGhlIHVzZXIncyBjb25zb2xlLlxuICAgIHJldHVybiBjb250ZXh0LmRpcmVjdGl2ZXMgPT09IG51bGwgPyBbXSA6IFsuLi5jb250ZXh0LmRpcmVjdGl2ZXNdO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZWJ1ZyAocGFydGlhbCkgbWV0YWRhdGEgZm9yIGEgcGFydGljdWxhciBkaXJlY3RpdmUgb3IgY29tcG9uZW50IGluc3RhbmNlLlxuICogVGhlIGZ1bmN0aW9uIGFjY2VwdHMgYW4gaW5zdGFuY2Ugb2YgYSBkaXJlY3RpdmUgb3IgY29tcG9uZW50IGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBtZXRhZGF0YS5cbiAqXG4gKiBAcGFyYW0gZGlyZWN0aXZlT3JDb21wb25lbnRJbnN0YW5jZSBJbnN0YW5jZSBvZiBhIGRpcmVjdGl2ZSBvciBjb21wb25lbnRcbiAqIEByZXR1cm5zIG1ldGFkYXRhIG9mIHRoZSBwYXNzZWQgZGlyZWN0aXZlIG9yIGNvbXBvbmVudFxuICpcbiAqIEBwdWJsaWNBcGlcbiAqIEBnbG9iYWxBcGkgbmdcbiAqL1xuZnVuY3Rpb24gZ2V0RGlyZWN0aXZlTWV0YWRhdGEkMShkaXJlY3RpdmVPckNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgY29uc3QgeyBjb25zdHJ1Y3RvciB9ID0gZGlyZWN0aXZlT3JDb21wb25lbnRJbnN0YW5jZTtcbiAgICBpZiAoIWNvbnN0cnVjdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZpbmQgdGhlIGluc3RhbmNlIGNvbnN0cnVjdG9yJyk7XG4gICAgfVxuICAgIC8vIEluIGNhc2UgYSBjb21wb25lbnQgaW5oZXJpdHMgZnJvbSBhIGRpcmVjdGl2ZSwgd2UgbWF5IGhhdmUgY29tcG9uZW50IGFuZCBkaXJlY3RpdmUgbWV0YWRhdGFcbiAgICAvLyBUbyBlbnN1cmUgd2UgZG9uJ3QgZ2V0IHRoZSBtZXRhZGF0YSBvZiB0aGUgZGlyZWN0aXZlLCB3ZSB3YW50IHRvIGNhbGwgYGdldENvbXBvbmVudERlZmAgZmlyc3QuXG4gICAgY29uc3QgY29tcG9uZW50RGVmID0gZ2V0Q29tcG9uZW50RGVmKGNvbnN0cnVjdG9yKTtcbiAgICBpZiAoY29tcG9uZW50RGVmKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnB1dHM6IGNvbXBvbmVudERlZi5pbnB1dHMsXG4gICAgICAgICAgICBvdXRwdXRzOiBjb21wb25lbnREZWYub3V0cHV0cyxcbiAgICAgICAgICAgIGVuY2Fwc3VsYXRpb246IGNvbXBvbmVudERlZi5lbmNhcHN1bGF0aW9uLFxuICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBjb21wb25lbnREZWYub25QdXNoID8gQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoIDpcbiAgICAgICAgICAgICAgICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5EZWZhdWx0XG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGRpcmVjdGl2ZURlZiA9IGdldERpcmVjdGl2ZURlZihjb25zdHJ1Y3Rvcik7XG4gICAgaWYgKGRpcmVjdGl2ZURlZikge1xuICAgICAgICByZXR1cm4geyBpbnB1dHM6IGRpcmVjdGl2ZURlZi5pbnB1dHMsIG91dHB1dHM6IGRpcmVjdGl2ZURlZi5vdXRwdXRzIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBSZXRyaWV2ZSBtYXAgb2YgbG9jYWwgcmVmZXJlbmNlcy5cbiAqXG4gKiBUaGUgcmVmZXJlbmNlcyBhcmUgcmV0cmlldmVkIGFzIGEgbWFwIG9mIGxvY2FsIHJlZmVyZW5jZSBuYW1lIHRvIGVsZW1lbnQgb3IgZGlyZWN0aXZlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB0YXJnZXQgRE9NIGVsZW1lbnQsIGNvbXBvbmVudCBvciBkaXJlY3RpdmUgaW5zdGFuY2UgZm9yIHdoaWNoIHRvIHJldHJpZXZlXG4gKiAgICB0aGUgbG9jYWwgcmVmZXJlbmNlcy5cbiAqL1xuZnVuY3Rpb24gZ2V0TG9jYWxSZWZzKHRhcmdldCkge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRMQ29udGV4dCh0YXJnZXQpO1xuICAgIGlmIChjb250ZXh0ID09PSBudWxsKVxuICAgICAgICByZXR1cm4ge307XG4gICAgaWYgKGNvbnRleHQubG9jYWxSZWZzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGV4dC5sb2NhbFJlZnMgPSBkaXNjb3ZlckxvY2FsUmVmcyhjb250ZXh0LmxWaWV3LCBjb250ZXh0Lm5vZGVJbmRleCk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0LmxvY2FsUmVmcyB8fCB7fTtcbn1cbi8qKlxuICogUmV0cmlldmVzIHRoZSBob3N0IGVsZW1lbnQgb2YgYSBjb21wb25lbnQgb3IgZGlyZWN0aXZlIGluc3RhbmNlLlxuICogVGhlIGhvc3QgZWxlbWVudCBpcyB0aGUgRE9NIGVsZW1lbnQgdGhhdCBtYXRjaGVkIHRoZSBzZWxlY3RvciBvZiB0aGUgZGlyZWN0aXZlLlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRPckRpcmVjdGl2ZSBDb21wb25lbnQgb3IgZGlyZWN0aXZlIGluc3RhbmNlIGZvciB3aGljaCB0aGUgaG9zdFxuICogICAgIGVsZW1lbnQgc2hvdWxkIGJlIHJldHJpZXZlZC5cbiAqIEByZXR1cm5zIEhvc3QgZWxlbWVudCBvZiB0aGUgdGFyZ2V0LlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqIEBnbG9iYWxBcGkgbmdcbiAqL1xuZnVuY3Rpb24gZ2V0SG9zdEVsZW1lbnQoY29tcG9uZW50T3JEaXJlY3RpdmUpIHtcbiAgICByZXR1cm4gZ2V0TENvbnRleHQoY29tcG9uZW50T3JEaXJlY3RpdmUpLm5hdGl2ZTtcbn1cbi8qKlxuICogUmV0cmlldmVzIHRoZSByZW5kZXJlZCB0ZXh0IGZvciBhIGdpdmVuIGNvbXBvbmVudC5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHJldHJpZXZlcyB0aGUgaG9zdCBlbGVtZW50IG9mIGEgY29tcG9uZW50IGFuZFxuICogYW5kIHRoZW4gcmV0dXJucyB0aGUgYHRleHRDb250ZW50YCBmb3IgdGhhdCBlbGVtZW50LiBUaGlzIGltcGxpZXNcbiAqIHRoYXQgdGhlIHRleHQgcmV0dXJuZWQgd2lsbCBpbmNsdWRlIHJlLXByb2plY3RlZCBjb250ZW50IG9mXG4gKiB0aGUgY29tcG9uZW50IGFzIHdlbGwuXG4gKlxuICogQHBhcmFtIGNvbXBvbmVudCBUaGUgY29tcG9uZW50IHRvIHJldHVybiB0aGUgY29udGVudCB0ZXh0IGZvci5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVuZGVyZWRUZXh0KGNvbXBvbmVudCkge1xuICAgIGNvbnN0IGhvc3RFbGVtZW50ID0gZ2V0SG9zdEVsZW1lbnQoY29tcG9uZW50KTtcbiAgICByZXR1cm4gaG9zdEVsZW1lbnQudGV4dENvbnRlbnQgfHwgJyc7XG59XG4vKipcbiAqIFJldHJpZXZlcyBhIGxpc3Qgb2YgZXZlbnQgbGlzdGVuZXJzIGFzc29jaWF0ZWQgd2l0aCBhIERPTSBlbGVtZW50LiBUaGUgbGlzdCBkb2VzIGluY2x1ZGUgaG9zdFxuICogbGlzdGVuZXJzLCBidXQgaXQgZG9lcyBub3QgaW5jbHVkZSBldmVudCBsaXN0ZW5lcnMgZGVmaW5lZCBvdXRzaWRlIG9mIHRoZSBBbmd1bGFyIGNvbnRleHRcbiAqIChlLmcuIHRocm91Z2ggYGFkZEV2ZW50TGlzdGVuZXJgKS5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogR2l2ZW4gdGhlIGZvbGxvd2luZyBET00gc3RydWN0dXJlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxhcHAtcm9vdD5cbiAqICAgPGRpdiAoY2xpY2spPVwiZG9Tb21ldGhpbmcoKVwiPjwvZGl2PlxuICogPC9hcHAtcm9vdD5cbiAqIGBgYFxuICpcbiAqIENhbGxpbmcgYGdldExpc3RlbmVyc2Agb24gYDxkaXY+YCB3aWxsIHJldHVybiBhbiBvYmplY3QgdGhhdCBsb29rcyBhcyBmb2xsb3dzOlxuICpcbiAqIGBgYHRzXG4gKiB7XG4gKiAgIG5hbWU6ICdjbGljaycsXG4gKiAgIGVsZW1lbnQ6IDxkaXY+LFxuICogICBjYWxsYmFjazogKCkgPT4gZG9Tb21ldGhpbmcoKSxcbiAqICAgdXNlQ2FwdHVyZTogZmFsc2VcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBlbGVtZW50IEVsZW1lbnQgZm9yIHdoaWNoIHRoZSBET00gbGlzdGVuZXJzIHNob3VsZCBiZSByZXRyaWV2ZWQuXG4gKiBAcmV0dXJucyBBcnJheSBvZiBldmVudCBsaXN0ZW5lcnMgb24gdGhlIERPTSBlbGVtZW50LlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqIEBnbG9iYWxBcGkgbmdcbiAqL1xuZnVuY3Rpb24gZ2V0TGlzdGVuZXJzKGVsZW1lbnQpIHtcbiAgICBhc3NlcnREb21FbGVtZW50KGVsZW1lbnQpO1xuICAgIGNvbnN0IGxDb250ZXh0ID0gZ2V0TENvbnRleHQoZWxlbWVudCk7XG4gICAgaWYgKGxDb250ZXh0ID09PSBudWxsKVxuICAgICAgICByZXR1cm4gW107XG4gICAgY29uc3QgbFZpZXcgPSBsQ29udGV4dC5sVmlldztcbiAgICBjb25zdCB0VmlldyA9IGxWaWV3W1RWSUVXXTtcbiAgICBjb25zdCBsQ2xlYW51cCA9IGxWaWV3W0NMRUFOVVBdO1xuICAgIGNvbnN0IHRDbGVhbnVwID0gdFZpZXcuY2xlYW51cDtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSBbXTtcbiAgICBpZiAodENsZWFudXAgJiYgbENsZWFudXApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0Q2xlYW51cC5sZW5ndGg7KSB7XG4gICAgICAgICAgICBjb25zdCBmaXJzdFBhcmFtID0gdENsZWFudXBbaSsrXTtcbiAgICAgICAgICAgIGNvbnN0IHNlY29uZFBhcmFtID0gdENsZWFudXBbaSsrXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZmlyc3RQYXJhbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gZmlyc3RQYXJhbTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0ZW5lckVsZW1lbnQgPSB1bndyYXBSTm9kZShsVmlld1tzZWNvbmRQYXJhbV0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gbENsZWFudXBbdENsZWFudXBbaSsrXV07XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlQ2FwdHVyZU9ySW5keCA9IHRDbGVhbnVwW2krK107XG4gICAgICAgICAgICAgICAgLy8gaWYgdXNlQ2FwdHVyZU9ySW5keCBpcyBib29sZWFuIHRoZW4gcmVwb3J0IGl0IGFzIGlzLlxuICAgICAgICAgICAgICAgIC8vIGlmIHVzZUNhcHR1cmVPckluZHggaXMgcG9zaXRpdmUgbnVtYmVyIHRoZW4gaXQgaW4gdW5zdWJzY3JpYmUgbWV0aG9kXG4gICAgICAgICAgICAgICAgLy8gaWYgdXNlQ2FwdHVyZU9ySW5keCBpcyBuZWdhdGl2ZSBudW1iZXIgdGhlbiBpdCBpcyBhIFN1YnNjcmlwdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSAodHlwZW9mIHVzZUNhcHR1cmVPckluZHggPT09ICdib29sZWFuJyB8fCB1c2VDYXB0dXJlT3JJbmR4ID49IDApID8gJ2RvbScgOiAnb3V0cHV0JztcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VDYXB0dXJlID0gdHlwZW9mIHVzZUNhcHR1cmVPckluZHggPT09ICdib29sZWFuJyA/IHVzZUNhcHR1cmVPckluZHggOiBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSBsaXN0ZW5lckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzLnB1c2goeyBlbGVtZW50LCBuYW1lLCBjYWxsYmFjaywgdXNlQ2FwdHVyZSwgdHlwZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGlzdGVuZXJzLnNvcnQoc29ydExpc3RlbmVycyk7XG4gICAgcmV0dXJuIGxpc3RlbmVycztcbn1cbmZ1bmN0aW9uIHNvcnRMaXN0ZW5lcnMoYSwgYikge1xuICAgIGlmIChhLm5hbWUgPT0gYi5uYW1lKVxuICAgICAgICByZXR1cm4gMDtcbiAgICByZXR1cm4gYS5uYW1lIDwgYi5uYW1lID8gLTEgOiAxO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHNob3VsZCBub3QgZXhpc3QgYmVjYXVzZSBpdCBpcyBtZWdhbW9ycGhpYyBhbmQgb25seSBtb3N0bHkgY29ycmVjdC5cbiAqXG4gKiBTZWUgY2FsbCBzaXRlIGZvciBtb3JlIGluZm8uXG4gKi9cbmZ1bmN0aW9uIGlzRGlyZWN0aXZlRGVmSGFjayhvYmopIHtcbiAgICByZXR1cm4gb2JqLnR5cGUgIT09IHVuZGVmaW5lZCAmJiBvYmoudGVtcGxhdGUgIT09IHVuZGVmaW5lZCAmJiBvYmouZGVjbGFyZWRJbnB1dHMgIT09IHVuZGVmaW5lZDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgYXR0YWNoZWQgYERlYnVnTm9kZWAgaW5zdGFuY2UgZm9yIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudCBET00gZWxlbWVudCB3aGljaCBpcyBvd25lZCBieSBhbiBleGlzdGluZyBjb21wb25lbnQncyB2aWV3LlxuICovXG5mdW5jdGlvbiBnZXREZWJ1Z05vZGUkMShlbGVtZW50KSB7XG4gICAgaWYgKG5nRGV2TW9kZSAmJiAhKGVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBpbnN0YW5jZSBvZiBET00gRWxlbWVudCcpO1xuICAgIH1cbiAgICBjb25zdCBsQ29udGV4dCA9IGdldExDb250ZXh0KGVsZW1lbnQpO1xuICAgIGlmIChsQ29udGV4dCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgbFZpZXcgPSBsQ29udGV4dC5sVmlldztcbiAgICBjb25zdCBub2RlSW5kZXggPSBsQ29udGV4dC5ub2RlSW5kZXg7XG4gICAgaWYgKG5vZGVJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgdmFsdWVJbkxWaWV3ID0gbFZpZXdbbm9kZUluZGV4XTtcbiAgICAgICAgLy8gdGhpcyBtZWFucyB0aGF0IHZhbHVlIGluIHRoZSBsVmlldyBpcyBhIGNvbXBvbmVudCB3aXRoIGl0cyBvd25cbiAgICAgICAgLy8gZGF0YS4gSW4gdGhpcyBzaXR1YXRpb24gdGhlIFROb2RlIGlzIG5vdCBhY2Nlc3NlZCBhdCB0aGUgc2FtZSBzcG90LlxuICAgICAgICBjb25zdCB0Tm9kZSA9IGlzTFZpZXcodmFsdWVJbkxWaWV3KSA/IHZhbHVlSW5MVmlld1tUX0hPU1RdIDogZ2V0VE5vZGUobFZpZXdbVFZJRVddLCBub2RlSW5kZXgpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIGFzc2VydEVxdWFsKHROb2RlLmluZGV4LCBub2RlSW5kZXgsICdFeHBlY3RpbmcgdGhhdCBUTm9kZSBhdCBpbmRleCBpcyBzYW1lIGFzIGluZGV4Jyk7XG4gICAgICAgIHJldHVybiBidWlsZERlYnVnTm9kZSh0Tm9kZSwgbFZpZXcpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogUmV0cmlldmUgdGhlIGNvbXBvbmVudCBgTFZpZXdgIGZyb20gY29tcG9uZW50L2VsZW1lbnQuXG4gKlxuICogTk9URTogYExWaWV3YCBpcyBhIHByaXZhdGUgYW5kIHNob3VsZCBub3QgYmUgbGVha2VkIG91dHNpZGUuXG4gKiAgICAgICBEb24ndCBleHBvcnQgdGhpcyBtZXRob2QgdG8gYG5nLipgIG9uIHdpbmRvdy5cbiAqXG4gKiBAcGFyYW0gdGFyZ2V0IERPTSBlbGVtZW50IG9yIGNvbXBvbmVudCBpbnN0YW5jZSBmb3Igd2hpY2ggdG8gcmV0cmlldmUgdGhlIExWaWV3LlxuICovXG5mdW5jdGlvbiBnZXRDb21wb25lbnRMVmlldyh0YXJnZXQpIHtcbiAgICBjb25zdCBsQ29udGV4dCA9IGdldExDb250ZXh0KHRhcmdldCk7XG4gICAgY29uc3Qgbm9kZUluZHggPSBsQ29udGV4dC5ub2RlSW5kZXg7XG4gICAgY29uc3QgbFZpZXcgPSBsQ29udGV4dC5sVmlldztcbiAgICBjb25zdCBjb21wb25lbnRMVmlldyA9IGxWaWV3W25vZGVJbmR4XTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TFZpZXcoY29tcG9uZW50TFZpZXcpO1xuICAgIHJldHVybiBjb21wb25lbnRMVmlldztcbn1cbi8qKiBBc3NlcnRzIHRoYXQgYSB2YWx1ZSBpcyBhIERPTSBFbGVtZW50LiAqL1xuZnVuY3Rpb24gYXNzZXJ0RG9tRWxlbWVudCh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgISh2YWx1ZSBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0aW5nIGluc3RhbmNlIG9mIERPTSBFbGVtZW50Jyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogTWFya3MgYSBjb21wb25lbnQgZm9yIGNoZWNrIChpbiBjYXNlIG9mIE9uUHVzaCBjb21wb25lbnRzKSBhbmQgc3luY2hyb25vdXNseVxuICogcGVyZm9ybXMgY2hhbmdlIGRldGVjdGlvbiBvbiB0aGUgYXBwbGljYXRpb24gdGhpcyBjb21wb25lbnQgYmVsb25ncyB0by5cbiAqXG4gKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCB0byB7QGxpbmsgQ2hhbmdlRGV0ZWN0b3JSZWYjbWFya0ZvckNoZWNrIG1hcmsgZm9yIGNoZWNrfS5cbiAqXG4gKiBAcHVibGljQXBpXG4gKiBAZ2xvYmFsQXBpIG5nXG4gKi9cbmZ1bmN0aW9uIGFwcGx5Q2hhbmdlcyhjb21wb25lbnQpIHtcbiAgICBtYXJrRGlydHkoY29tcG9uZW50KTtcbiAgICBnZXRSb290Q29tcG9uZW50cyhjb21wb25lbnQpLmZvckVhY2gocm9vdENvbXBvbmVudCA9PiBkZXRlY3RDaGFuZ2VzKHJvb3RDb21wb25lbnQpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFRoaXMgZmlsZSBpbnRyb2R1Y2VzIHNlcmllcyBvZiBnbG9iYWxseSBhY2Nlc3NpYmxlIGRlYnVnIHRvb2xzXG4gKiB0byBhbGxvdyBmb3IgdGhlIEFuZ3VsYXIgZGVidWdnaW5nIHN0b3J5IHRvIGZ1bmN0aW9uLlxuICpcbiAqIFRvIHNlZSB0aGlzIGluIGFjdGlvbiBydW4gdGhlIGZvbGxvd2luZyBjb21tYW5kOlxuICpcbiAqICAgYmF6ZWwgcnVuIC8vcGFja2FnZXMvY29yZS90ZXN0L2J1bmRsaW5nL3RvZG86ZGV2c2VydmVyXG4gKlxuICogIFRoZW4gbG9hZCBgbG9jYWxob3N0OjU0MzJgIGFuZCBzdGFydCB1c2luZyB0aGUgY29uc29sZSB0b29scy5cbiAqL1xuLyoqXG4gKiBUaGlzIHZhbHVlIHJlZmxlY3RzIHRoZSBwcm9wZXJ0eSBvbiB0aGUgd2luZG93IHdoZXJlIHRoZSBkZXZcbiAqIHRvb2xzIGFyZSBwYXRjaGVkICh3aW5kb3cubmcpLlxuICogKi9cbmNvbnN0IEdMT0JBTF9QVUJMSVNIX0VYUEFORE9fS0VZID0gJ25nJztcbmxldCBfcHVibGlzaGVkID0gZmFsc2U7XG4vKipcbiAqIFB1Ymxpc2hlcyBhIGNvbGxlY3Rpb24gb2YgZGVmYXVsdCBkZWJ1ZyB0b29scyBvbnRvYHdpbmRvdy5uZ2AuXG4gKlxuICogVGhlc2UgZnVuY3Rpb25zIGFyZSBhdmFpbGFibGUgZ2xvYmFsbHkgd2hlbiBBbmd1bGFyIGlzIGluIGRldmVsb3BtZW50XG4gKiBtb2RlIGFuZCBhcmUgYXV0b21hdGljYWxseSBzdHJpcHBlZCBhd2F5IGZyb20gcHJvZCBtb2RlIGlzIG9uLlxuICovXG5mdW5jdGlvbiBwdWJsaXNoRGVmYXVsdEdsb2JhbFV0aWxzJDEoKSB7XG4gICAgaWYgKCFfcHVibGlzaGVkKSB7XG4gICAgICAgIF9wdWJsaXNoZWQgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2FybmluZzogdGhpcyBmdW5jdGlvbiBpcyAqSU5URVJOQUwqIGFuZCBzaG91bGQgbm90IGJlIHJlbGllZCB1cG9uIGluIGFwcGxpY2F0aW9uJ3MgY29kZS5cbiAgICAgICAgICogVGhlIGNvbnRyYWN0IG9mIHRoZSBmdW5jdGlvbiBtaWdodCBiZSBjaGFuZ2VkIGluIGFueSByZWxlYXNlIGFuZC9vciB0aGUgZnVuY3Rpb24gY2FuIGJlXG4gICAgICAgICAqIHJlbW92ZWQgY29tcGxldGVseS5cbiAgICAgICAgICovXG4gICAgICAgIHB1Ymxpc2hHbG9iYWxVdGlsKCfJtXNldFByb2ZpbGVyJywgc2V0UHJvZmlsZXIpO1xuICAgICAgICBwdWJsaXNoR2xvYmFsVXRpbCgnZ2V0RGlyZWN0aXZlTWV0YWRhdGEnLCBnZXREaXJlY3RpdmVNZXRhZGF0YSQxKTtcbiAgICAgICAgcHVibGlzaEdsb2JhbFV0aWwoJ2dldENvbXBvbmVudCcsIGdldENvbXBvbmVudCQxKTtcbiAgICAgICAgcHVibGlzaEdsb2JhbFV0aWwoJ2dldENvbnRleHQnLCBnZXRDb250ZXh0KTtcbiAgICAgICAgcHVibGlzaEdsb2JhbFV0aWwoJ2dldExpc3RlbmVycycsIGdldExpc3RlbmVycyk7XG4gICAgICAgIHB1Ymxpc2hHbG9iYWxVdGlsKCdnZXRPd25pbmdDb21wb25lbnQnLCBnZXRPd25pbmdDb21wb25lbnQpO1xuICAgICAgICBwdWJsaXNoR2xvYmFsVXRpbCgnZ2V0SG9zdEVsZW1lbnQnLCBnZXRIb3N0RWxlbWVudCk7XG4gICAgICAgIHB1Ymxpc2hHbG9iYWxVdGlsKCdnZXRJbmplY3RvcicsIGdldEluamVjdG9yKTtcbiAgICAgICAgcHVibGlzaEdsb2JhbFV0aWwoJ2dldFJvb3RDb21wb25lbnRzJywgZ2V0Um9vdENvbXBvbmVudHMpO1xuICAgICAgICBwdWJsaXNoR2xvYmFsVXRpbCgnZ2V0RGlyZWN0aXZlcycsIGdldERpcmVjdGl2ZXMpO1xuICAgICAgICBwdWJsaXNoR2xvYmFsVXRpbCgnYXBwbHlDaGFuZ2VzJywgYXBwbHlDaGFuZ2VzKTtcbiAgICB9XG59XG4vKipcbiAqIFB1Ymxpc2hlcyB0aGUgZ2l2ZW4gZnVuY3Rpb24gdG8gYHdpbmRvdy5uZ2Agc28gdGhhdCBpdCBjYW4gYmVcbiAqIHVzZWQgZnJvbSB0aGUgYnJvd3NlciBjb25zb2xlIHdoZW4gYW4gYXBwbGljYXRpb24gaXMgbm90IGluIHByb2R1Y3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHB1Ymxpc2hHbG9iYWxVdGlsKG5hbWUsIGZuKSB7XG4gICAgaWYgKHR5cGVvZiBDT01QSUxFRCA9PT0gJ3VuZGVmaW5lZCcgfHwgIUNPTVBJTEVEKSB7XG4gICAgICAgIC8vIE5vdGU6IHdlIGNhbid0IGV4cG9ydCBgbmdgIHdoZW4gdXNpbmcgY2xvc3VyZSBlbmhhbmNlZCBvcHRpbWl6YXRpb24gYXM6XG4gICAgICAgIC8vIC0gY2xvc3VyZSBkZWNsYXJlcyBnbG9iYWxzIGl0c2VsZiBmb3IgbWluaWZpZWQgbmFtZXMsIHdoaWNoIHNvbWV0aW1lcyBjbG9iYmVyIG91ciBgbmdgIGdsb2JhbFxuICAgICAgICAvLyAtIHdlIGNhbid0IGRlY2xhcmUgYSBjbG9zdXJlIGV4dGVybiBhcyB0aGUgbmFtZXNwYWNlIGBuZ2AgaXMgYWxyZWFkeSB1c2VkIHdpdGhpbiBHb29nbGVcbiAgICAgICAgLy8gICBmb3IgdHlwaW5ncyBmb3IgQW5ndWxhckpTICh2aWEgYGdvb2cucHJvdmlkZSgnbmcuLi4uJylgKS5cbiAgICAgICAgY29uc3QgdyA9IF9nbG9iYWw7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKGZuLCAnZnVuY3Rpb24gbm90IGRlZmluZWQnKTtcbiAgICAgICAgaWYgKHcpIHtcbiAgICAgICAgICAgIGxldCBjb250YWluZXIgPSB3W0dMT0JBTF9QVUJMSVNIX0VYUEFORE9fS0VZXTtcbiAgICAgICAgICAgIGlmICghY29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gd1tHTE9CQUxfUFVCTElTSF9FWFBBTkRPX0tFWV0gPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRhaW5lcltuYW1lXSA9IGZuO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8vIFRPRE86IEEgaGFjayB0byBub3QgcHVsbCBpbiB0aGUgTnVsbEluamVjdG9yIGZyb20gQGFuZ3VsYXIvY29yZS5cbmNvbnN0IE5VTExfSU5KRUNUT1IgPSB7XG4gICAgZ2V0OiAodG9rZW4sIG5vdEZvdW5kVmFsdWUpID0+IHtcbiAgICAgICAgdGhyb3dQcm92aWRlck5vdEZvdW5kRXJyb3IodG9rZW4sICdOdWxsSW5qZWN0b3InKTtcbiAgICB9XG59O1xuLyoqXG4gKiBCb290c3RyYXBzIGEgQ29tcG9uZW50IGludG8gYW4gZXhpc3RpbmcgaG9zdCBlbGVtZW50IGFuZCByZXR1cm5zIGFuIGluc3RhbmNlXG4gKiBvZiB0aGUgY29tcG9uZW50LlxuICpcbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIGJvb3RzdHJhcCBhIGNvbXBvbmVudCBpbnRvIHRoZSBET00gdHJlZS4gRWFjaCBpbnZvY2F0aW9uXG4gKiBvZiB0aGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgc2VwYXJhdGUgdHJlZSBvZiBjb21wb25lbnRzLCBpbmplY3RvcnMgYW5kXG4gKiBjaGFuZ2UgZGV0ZWN0aW9uIGN5Y2xlcyBhbmQgbGlmZXRpbWVzLiBUbyBkeW5hbWljYWxseSBpbnNlcnQgYSBuZXcgY29tcG9uZW50XG4gKiBpbnRvIGFuIGV4aXN0aW5nIHRyZWUgc3VjaCB0aGF0IGl0IHNoYXJlcyB0aGUgc2FtZSBpbmplY3Rpb24sIGNoYW5nZSBkZXRlY3Rpb25cbiAqIGFuZCBvYmplY3QgbGlmZXRpbWUsIHVzZSB7QGxpbmsgVmlld0NvbnRhaW5lciNjcmVhdGVDb21wb25lbnR9LlxuICpcbiAqIEBwYXJhbSBjb21wb25lbnRUeXBlIENvbXBvbmVudCB0byBib290c3RyYXBcbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsIHBhcmFtZXRlcnMgd2hpY2ggY29udHJvbCBib290c3RyYXBwaW5nXG4gKi9cbmZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudChjb21wb25lbnRUeXBlIC8qIFR5cGUgYXMgd29ya2Fyb3VuZCBmb3I6IE1pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy80ODgxICovLCBvcHRzID0ge30pIHtcbiAgICBuZ0Rldk1vZGUgJiYgcHVibGlzaERlZmF1bHRHbG9iYWxVdGlscyQxKCk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydENvbXBvbmVudFR5cGUoY29tcG9uZW50VHlwZSk7XG4gICAgY29uc3QgcmVuZGVyZXJGYWN0b3J5ID0gb3B0cy5yZW5kZXJlckZhY3RvcnkgfHwgZG9tUmVuZGVyZXJGYWN0b3J5MztcbiAgICBjb25zdCBzYW5pdGl6ZXIgPSBvcHRzLnNhbml0aXplciB8fCBudWxsO1xuICAgIGNvbnN0IGNvbXBvbmVudERlZiA9IGdldENvbXBvbmVudERlZihjb21wb25lbnRUeXBlKTtcbiAgICBpZiAoY29tcG9uZW50RGVmLnR5cGUgIT0gY29tcG9uZW50VHlwZSlcbiAgICAgICAgY29tcG9uZW50RGVmLnR5cGUgPSBjb21wb25lbnRUeXBlO1xuICAgIC8vIFRoZSBmaXJzdCBpbmRleCBvZiB0aGUgZmlyc3Qgc2VsZWN0b3IgaXMgdGhlIHRhZyBuYW1lLlxuICAgIGNvbnN0IGNvbXBvbmVudFRhZyA9IGNvbXBvbmVudERlZi5zZWxlY3RvcnNbMF1bMF07XG4gICAgY29uc3QgaG9zdFJlbmRlcmVyID0gcmVuZGVyZXJGYWN0b3J5LmNyZWF0ZVJlbmRlcmVyKG51bGwsIG51bGwpO1xuICAgIGNvbnN0IGhvc3RSTm9kZSA9IGxvY2F0ZUhvc3RFbGVtZW50KGhvc3RSZW5kZXJlciwgb3B0cy5ob3N0IHx8IGNvbXBvbmVudFRhZywgY29tcG9uZW50RGVmLmVuY2Fwc3VsYXRpb24pO1xuICAgIGNvbnN0IHJvb3RGbGFncyA9IGNvbXBvbmVudERlZi5vblB1c2ggPyA2NCAvKiBEaXJ0eSAqLyB8IDUxMiAvKiBJc1Jvb3QgKi8gOlxuICAgICAgICAxNiAvKiBDaGVja0Fsd2F5cyAqLyB8IDUxMiAvKiBJc1Jvb3QgKi87XG4gICAgY29uc3Qgcm9vdENvbnRleHQgPSBjcmVhdGVSb290Q29udGV4dChvcHRzLnNjaGVkdWxlciwgb3B0cy5wbGF5ZXJIYW5kbGVyKTtcbiAgICBjb25zdCByZW5kZXJlciA9IHJlbmRlcmVyRmFjdG9yeS5jcmVhdGVSZW5kZXJlcihob3N0Uk5vZGUsIGNvbXBvbmVudERlZik7XG4gICAgY29uc3Qgcm9vdFRWaWV3ID0gY3JlYXRlVFZpZXcoMCAvKiBSb290ICovLCBudWxsLCBudWxsLCAxLCAwLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsKTtcbiAgICBjb25zdCByb290VmlldyA9IGNyZWF0ZUxWaWV3KG51bGwsIHJvb3RUVmlldywgcm9vdENvbnRleHQsIHJvb3RGbGFncywgbnVsbCwgbnVsbCwgcmVuZGVyZXJGYWN0b3J5LCByZW5kZXJlciwgbnVsbCwgb3B0cy5pbmplY3RvciB8fCBudWxsKTtcbiAgICBlbnRlclZpZXcocm9vdFZpZXcpO1xuICAgIGxldCBjb21wb25lbnQ7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHJlbmRlcmVyRmFjdG9yeS5iZWdpbilcbiAgICAgICAgICAgIHJlbmRlcmVyRmFjdG9yeS5iZWdpbigpO1xuICAgICAgICBjb25zdCBjb21wb25lbnRWaWV3ID0gY3JlYXRlUm9vdENvbXBvbmVudFZpZXcoaG9zdFJOb2RlLCBjb21wb25lbnREZWYsIHJvb3RWaWV3LCByZW5kZXJlckZhY3RvcnksIHJlbmRlcmVyLCBzYW5pdGl6ZXIpO1xuICAgICAgICBjb21wb25lbnQgPSBjcmVhdGVSb290Q29tcG9uZW50KGNvbXBvbmVudFZpZXcsIGNvbXBvbmVudERlZiwgcm9vdFZpZXcsIHJvb3RDb250ZXh0LCBvcHRzLmhvc3RGZWF0dXJlcyB8fCBudWxsKTtcbiAgICAgICAgLy8gY3JlYXRlIG1vZGUgcGFzc1xuICAgICAgICByZW5kZXJWaWV3KHJvb3RUVmlldywgcm9vdFZpZXcsIG51bGwpO1xuICAgICAgICAvLyB1cGRhdGUgbW9kZSBwYXNzXG4gICAgICAgIHJlZnJlc2hWaWV3KHJvb3RUVmlldywgcm9vdFZpZXcsIG51bGwsIG51bGwpO1xuICAgIH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgbGVhdmVWaWV3KCk7XG4gICAgICAgIGlmIChyZW5kZXJlckZhY3RvcnkuZW5kKVxuICAgICAgICAgICAgcmVuZGVyZXJGYWN0b3J5LmVuZCgpO1xuICAgIH1cbiAgICByZXR1cm4gY29tcG9uZW50O1xufVxuLyoqXG4gKiBDcmVhdGVzIHRoZSByb290IGNvbXBvbmVudCB2aWV3IGFuZCB0aGUgcm9vdCBjb21wb25lbnQgbm9kZS5cbiAqXG4gKiBAcGFyYW0gck5vZGUgUmVuZGVyIGhvc3QgZWxlbWVudC5cbiAqIEBwYXJhbSBkZWYgQ29tcG9uZW50RGVmXG4gKiBAcGFyYW0gcm9vdFZpZXcgVGhlIHBhcmVudCB2aWV3IHdoZXJlIHRoZSBob3N0IG5vZGUgaXMgc3RvcmVkXG4gKiBAcGFyYW0gcmVuZGVyZXJGYWN0b3J5IEZhY3RvcnkgdG8gYmUgdXNlZCBmb3IgY3JlYXRpbmcgY2hpbGQgcmVuZGVyZXJzLlxuICogQHBhcmFtIGhvc3RSZW5kZXJlciBUaGUgY3VycmVudCByZW5kZXJlclxuICogQHBhcmFtIHNhbml0aXplciBUaGUgc2FuaXRpemVyLCBpZiBwcm92aWRlZFxuICpcbiAqIEByZXR1cm5zIENvbXBvbmVudCB2aWV3IGNyZWF0ZWRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUm9vdENvbXBvbmVudFZpZXcock5vZGUsIGRlZiwgcm9vdFZpZXcsIHJlbmRlcmVyRmFjdG9yeSwgaG9zdFJlbmRlcmVyLCBzYW5pdGl6ZXIpIHtcbiAgICBjb25zdCB0VmlldyA9IHJvb3RWaWV3W1RWSUVXXTtcbiAgICBjb25zdCBpbmRleCA9IEhFQURFUl9PRkZTRVQ7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShyb290VmlldywgaW5kZXgpO1xuICAgIHJvb3RWaWV3W2luZGV4XSA9IHJOb2RlO1xuICAgIC8vICcjaG9zdCcgaXMgYWRkZWQgaGVyZSBhcyB3ZSBkb24ndCBrbm93IHRoZSByZWFsIGhvc3QgRE9NIG5hbWUgKHdlIGRvbid0IHdhbnQgdG8gcmVhZCBpdCkgYW5kIGF0XG4gICAgLy8gdGhlIHNhbWUgdGltZSB3ZSB3YW50IHRvIGNvbW11bmljYXRlIHRoZSBkZWJ1ZyBgVE5vZGVgIHRoYXQgdGhpcyBpcyBhIHNwZWNpYWwgYFROb2RlYFxuICAgIC8vIHJlcHJlc2VudGluZyBhIGhvc3QgZWxlbWVudC5cbiAgICBjb25zdCB0Tm9kZSA9IGdldE9yQ3JlYXRlVE5vZGUodFZpZXcsIGluZGV4LCAyIC8qIEVsZW1lbnQgKi8sICcjaG9zdCcsIG51bGwpO1xuICAgIGNvbnN0IG1lcmdlZEF0dHJzID0gdE5vZGUubWVyZ2VkQXR0cnMgPSBkZWYuaG9zdEF0dHJzO1xuICAgIGlmIChtZXJnZWRBdHRycyAhPT0gbnVsbCkge1xuICAgICAgICBjb21wdXRlU3RhdGljU3R5bGluZyh0Tm9kZSwgbWVyZ2VkQXR0cnMsIHRydWUpO1xuICAgICAgICBpZiAock5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHNldFVwQXR0cmlidXRlcyhob3N0UmVuZGVyZXIsIHJOb2RlLCBtZXJnZWRBdHRycyk7XG4gICAgICAgICAgICBpZiAodE5vZGUuY2xhc3NlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHdyaXRlRGlyZWN0Q2xhc3MoaG9zdFJlbmRlcmVyLCByTm9kZSwgdE5vZGUuY2xhc3Nlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodE5vZGUuc3R5bGVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVEaXJlY3RTdHlsZShob3N0UmVuZGVyZXIsIHJOb2RlLCB0Tm9kZS5zdHlsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHZpZXdSZW5kZXJlciA9IHJlbmRlcmVyRmFjdG9yeS5jcmVhdGVSZW5kZXJlcihyTm9kZSwgZGVmKTtcbiAgICBjb25zdCBjb21wb25lbnRWaWV3ID0gY3JlYXRlTFZpZXcocm9vdFZpZXcsIGdldE9yQ3JlYXRlVENvbXBvbmVudFZpZXcoZGVmKSwgbnVsbCwgZGVmLm9uUHVzaCA/IDY0IC8qIERpcnR5ICovIDogMTYgLyogQ2hlY2tBbHdheXMgKi8sIHJvb3RWaWV3W2luZGV4XSwgdE5vZGUsIHJlbmRlcmVyRmFjdG9yeSwgdmlld1JlbmRlcmVyLCBzYW5pdGl6ZXIgfHwgbnVsbCwgbnVsbCk7XG4gICAgaWYgKHRWaWV3LmZpcnN0Q3JlYXRlUGFzcykge1xuICAgICAgICBkaVB1YmxpY0luSW5qZWN0b3IoZ2V0T3JDcmVhdGVOb2RlSW5qZWN0b3JGb3JOb2RlKHROb2RlLCByb290VmlldyksIHRWaWV3LCBkZWYudHlwZSk7XG4gICAgICAgIG1hcmtBc0NvbXBvbmVudEhvc3QodFZpZXcsIHROb2RlKTtcbiAgICAgICAgaW5pdFROb2RlRmxhZ3ModE5vZGUsIHJvb3RWaWV3Lmxlbmd0aCwgMSk7XG4gICAgfVxuICAgIGFkZFRvVmlld1RyZWUocm9vdFZpZXcsIGNvbXBvbmVudFZpZXcpO1xuICAgIC8vIFN0b3JlIGNvbXBvbmVudCB2aWV3IGF0IG5vZGUgaW5kZXgsIHdpdGggbm9kZSBhcyB0aGUgSE9TVFxuICAgIHJldHVybiByb290Vmlld1tpbmRleF0gPSBjb21wb25lbnRWaWV3O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgcm9vdCBjb21wb25lbnQgYW5kIHNldHMgaXQgdXAgd2l0aCBmZWF0dXJlcyBhbmQgaG9zdCBiaW5kaW5ncy4gU2hhcmVkIGJ5XG4gKiByZW5kZXJDb21wb25lbnQoKSBhbmQgVmlld0NvbnRhaW5lclJlZi5jcmVhdGVDb21wb25lbnQoKS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUm9vdENvbXBvbmVudChjb21wb25lbnRWaWV3LCBjb21wb25lbnREZWYsIHJvb3RMVmlldywgcm9vdENvbnRleHQsIGhvc3RGZWF0dXJlcykge1xuICAgIGNvbnN0IHRWaWV3ID0gcm9vdExWaWV3W1RWSUVXXTtcbiAgICAvLyBDcmVhdGUgZGlyZWN0aXZlIGluc3RhbmNlIHdpdGggZmFjdG9yeSgpIGFuZCBzdG9yZSBhdCBuZXh0IGluZGV4IGluIHZpZXdEYXRhXG4gICAgY29uc3QgY29tcG9uZW50ID0gaW5zdGFudGlhdGVSb290Q29tcG9uZW50KHRWaWV3LCByb290TFZpZXcsIGNvbXBvbmVudERlZik7XG4gICAgcm9vdENvbnRleHQuY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XG4gICAgY29tcG9uZW50Vmlld1tDT05URVhUXSA9IGNvbXBvbmVudDtcbiAgICBob3N0RmVhdHVyZXMgJiYgaG9zdEZlYXR1cmVzLmZvckVhY2goKGZlYXR1cmUpID0+IGZlYXR1cmUoY29tcG9uZW50LCBjb21wb25lbnREZWYpKTtcbiAgICAvLyBXZSB3YW50IHRvIGdlbmVyYXRlIGFuIGVtcHR5IFF1ZXJ5TGlzdCBmb3Igcm9vdCBjb250ZW50IHF1ZXJpZXMgZm9yIGJhY2t3YXJkc1xuICAgIC8vIGNvbXBhdGliaWxpdHkgd2l0aCBWaWV3RW5naW5lLlxuICAgIGlmIChjb21wb25lbnREZWYuY29udGVudFF1ZXJpZXMpIHtcbiAgICAgICAgY29uc3QgdE5vZGUgPSBnZXRDdXJyZW50VE5vZGUoKTtcbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQodE5vZGUsICdUTm9kZSBleHBlY3RlZCcpO1xuICAgICAgICBjb21wb25lbnREZWYuY29udGVudFF1ZXJpZXMoMSAvKiBDcmVhdGUgKi8sIGNvbXBvbmVudCwgdE5vZGUuZGlyZWN0aXZlU3RhcnQpO1xuICAgIH1cbiAgICBjb25zdCByb290VE5vZGUgPSBnZXRDdXJyZW50VE5vZGUoKTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChyb290VE5vZGUsICd0Tm9kZSBzaG91bGQgaGF2ZSBiZWVuIGFscmVhZHkgY3JlYXRlZCcpO1xuICAgIGlmICh0Vmlldy5maXJzdENyZWF0ZVBhc3MgJiZcbiAgICAgICAgKGNvbXBvbmVudERlZi5ob3N0QmluZGluZ3MgIT09IG51bGwgfHwgY29tcG9uZW50RGVmLmhvc3RBdHRycyAhPT0gbnVsbCkpIHtcbiAgICAgICAgc2V0U2VsZWN0ZWRJbmRleChyb290VE5vZGUuaW5kZXgpO1xuICAgICAgICBjb25zdCByb290VFZpZXcgPSByb290TFZpZXdbVFZJRVddO1xuICAgICAgICByZWdpc3Rlckhvc3RCaW5kaW5nT3BDb2Rlcyhyb290VFZpZXcsIHJvb3RUTm9kZSwgcm9vdExWaWV3LCByb290VE5vZGUuZGlyZWN0aXZlU3RhcnQsIHJvb3RUTm9kZS5kaXJlY3RpdmVFbmQsIGNvbXBvbmVudERlZik7XG4gICAgICAgIGludm9rZUhvc3RCaW5kaW5nc0luQ3JlYXRpb25Nb2RlKGNvbXBvbmVudERlZiwgY29tcG9uZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJvb3RDb250ZXh0KHNjaGVkdWxlciwgcGxheWVySGFuZGxlcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbXBvbmVudHM6IFtdLFxuICAgICAgICBzY2hlZHVsZXI6IHNjaGVkdWxlciB8fCBkZWZhdWx0U2NoZWR1bGVyLFxuICAgICAgICBjbGVhbjogQ0xFQU5fUFJPTUlTRSxcbiAgICAgICAgcGxheWVySGFuZGxlcjogcGxheWVySGFuZGxlciB8fCBudWxsLFxuICAgICAgICBmbGFnczogMCAvKiBFbXB0eSAqL1xuICAgIH07XG59XG4vKipcbiAqIFVzZWQgdG8gZW5hYmxlIGxpZmVjeWNsZSBob29rcyBvbiB0aGUgcm9vdCBjb21wb25lbnQuXG4gKlxuICogSW5jbHVkZSB0aGlzIGZlYXR1cmUgd2hlbiBjYWxsaW5nIGByZW5kZXJDb21wb25lbnRgIGlmIHRoZSByb290IGNvbXBvbmVudFxuICogeW91IGFyZSByZW5kZXJpbmcgaGFzIGxpZmVjeWNsZSBob29rcyBkZWZpbmVkLiBPdGhlcndpc2UsIHRoZSBob29rcyB3b24ndFxuICogYmUgY2FsbGVkIHByb3Blcmx5LlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiByZW5kZXJDb21wb25lbnQoQXBwQ29tcG9uZW50LCB7aG9zdEZlYXR1cmVzOiBbTGlmZWN5Y2xlSG9va3NGZWF0dXJlXX0pO1xuICogYGBgXG4gKi9cbmZ1bmN0aW9uIExpZmVjeWNsZUhvb2tzRmVhdHVyZShjb21wb25lbnQsIGRlZikge1xuICAgIGNvbnN0IGxWaWV3ID0gcmVhZFBhdGNoZWRMVmlldyhjb21wb25lbnQpO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKGxWaWV3LCAnTFZpZXcgaXMgcmVxdWlyZWQnKTtcbiAgICBjb25zdCB0VmlldyA9IGxWaWV3W1RWSUVXXTtcbiAgICBjb25zdCB0Tm9kZSA9IGdldEN1cnJlbnRUTm9kZSgpO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKHROb2RlLCAnVE5vZGUgaXMgcmVxdWlyZWQnKTtcbiAgICByZWdpc3RlclBvc3RPcmRlckhvb2tzKHRWaWV3LCB0Tm9kZSk7XG59XG4vKipcbiAqIFdhaXQgb24gY29tcG9uZW50IHVudGlsIGl0IGlzIHJlbmRlcmVkLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIGBQcm9taXNlYCB3aGljaCBpcyByZXNvbHZlZCB3aGVuIHRoZSBjb21wb25lbnQnc1xuICogY2hhbmdlIGRldGVjdGlvbiBpcyBleGVjdXRlZC4gVGhpcyBpcyBkZXRlcm1pbmVkIGJ5IGZpbmRpbmcgdGhlIHNjaGVkdWxlclxuICogYXNzb2NpYXRlZCB3aXRoIHRoZSBgY29tcG9uZW50YCdzIHJlbmRlciB0cmVlIGFuZCB3YWl0aW5nIHVudGlsIHRoZSBzY2hlZHVsZXJcbiAqIGZsdXNoZXMuIElmIG5vdGhpbmcgaXMgc2NoZWR1bGVkLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIHJlc29sdmVkIHByb21pc2UuXG4gKlxuICogRXhhbXBsZTpcbiAqIGBgYFxuICogYXdhaXQgd2hlblJlbmRlcmVkKG15Q29tcG9uZW50KTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IHRvIHdhaXQgdXBvblxuICogQHJldHVybnMgUHJvbWlzZSB3aGljaCByZXNvbHZlcyB3aGVuIHRoZSBjb21wb25lbnQgaXMgcmVuZGVyZWQuXG4gKi9cbmZ1bmN0aW9uIHdoZW5SZW5kZXJlZChjb21wb25lbnQpIHtcbiAgICByZXR1cm4gZ2V0Um9vdENvbnRleHQoY29tcG9uZW50KS5jbGVhbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5mdW5jdGlvbiBnZXRTdXBlclR5cGUodHlwZSkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodHlwZS5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO1xufVxuLyoqXG4gKiBNZXJnZXMgdGhlIGRlZmluaXRpb24gZnJvbSBhIHN1cGVyIGNsYXNzIHRvIGEgc3ViIGNsYXNzLlxuICogQHBhcmFtIGRlZmluaXRpb24gVGhlIGRlZmluaXRpb24gdGhhdCBpcyBhIFN1YkNsYXNzIG9mIGFub3RoZXIgZGlyZWN0aXZlIG9mIGNvbXBvbmVudFxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVJbmhlcml0RGVmaW5pdGlvbkZlYXR1cmUoZGVmaW5pdGlvbikge1xuICAgIGxldCBzdXBlclR5cGUgPSBnZXRTdXBlclR5cGUoZGVmaW5pdGlvbi50eXBlKTtcbiAgICBsZXQgc2hvdWxkSW5oZXJpdEZpZWxkcyA9IHRydWU7XG4gICAgY29uc3QgaW5oZXJpdGFuY2VDaGFpbiA9IFtkZWZpbml0aW9uXTtcbiAgICB3aGlsZSAoc3VwZXJUeXBlKSB7XG4gICAgICAgIGxldCBzdXBlckRlZiA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RGVmKGRlZmluaXRpb24pKSB7XG4gICAgICAgICAgICAvLyBEb24ndCB1c2UgZ2V0Q29tcG9uZW50RGVmL2dldERpcmVjdGl2ZURlZi4gVGhpcyBsb2dpYyByZWxpZXMgb24gaW5oZXJpdGFuY2UuXG4gICAgICAgICAgICBzdXBlckRlZiA9IHN1cGVyVHlwZS7JtWNtcCB8fCBzdXBlclR5cGUuybVkaXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoc3VwZXJUeXBlLsm1Y21wKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gKHR5cGVvZiBuZ0Rldk1vZGUgPT09ICd1bmRlZmluZWQnIHx8IG5nRGV2TW9kZSkgP1xuICAgICAgICAgICAgICAgICAgICAnRGlyZWN0aXZlcyBjYW5ub3QgaW5oZXJpdCBDb21wb25lbnRzJyA6XG4gICAgICAgICAgICAgICAgICAgICcnO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoOTAzIC8qIElOVkFMSURfSU5IRVJJVEFOQ0UgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEb24ndCB1c2UgZ2V0Q29tcG9uZW50RGVmL2dldERpcmVjdGl2ZURlZi4gVGhpcyBsb2dpYyByZWxpZXMgb24gaW5oZXJpdGFuY2UuXG4gICAgICAgICAgICBzdXBlckRlZiA9IHN1cGVyVHlwZS7JtWRpcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VwZXJEZWYpIHtcbiAgICAgICAgICAgIGlmIChzaG91bGRJbmhlcml0RmllbGRzKSB7XG4gICAgICAgICAgICAgICAgaW5oZXJpdGFuY2VDaGFpbi5wdXNoKHN1cGVyRGVmKTtcbiAgICAgICAgICAgICAgICAvLyBTb21lIGZpZWxkcyBpbiB0aGUgZGVmaW5pdGlvbiBtYXkgYmUgZW1wdHksIGlmIHRoZXJlIHdlcmUgbm8gdmFsdWVzIHRvIHB1dCBpbiB0aGVtIHRoYXRcbiAgICAgICAgICAgICAgICAvLyB3b3VsZCd2ZSBqdXN0aWZpZWQgb2JqZWN0IGNyZWF0aW9uLiBVbndyYXAgdGhlbSBpZiBuZWNlc3NhcnkuXG4gICAgICAgICAgICAgICAgY29uc3Qgd3JpdGVhYmxlRGVmID0gZGVmaW5pdGlvbjtcbiAgICAgICAgICAgICAgICB3cml0ZWFibGVEZWYuaW5wdXRzID0gbWF5YmVVbndyYXBFbXB0eShkZWZpbml0aW9uLmlucHV0cyk7XG4gICAgICAgICAgICAgICAgd3JpdGVhYmxlRGVmLmRlY2xhcmVkSW5wdXRzID0gbWF5YmVVbndyYXBFbXB0eShkZWZpbml0aW9uLmRlY2xhcmVkSW5wdXRzKTtcbiAgICAgICAgICAgICAgICB3cml0ZWFibGVEZWYub3V0cHV0cyA9IG1heWJlVW53cmFwRW1wdHkoZGVmaW5pdGlvbi5vdXRwdXRzKTtcbiAgICAgICAgICAgICAgICAvLyBNZXJnZSBob3N0QmluZGluZ3NcbiAgICAgICAgICAgICAgICBjb25zdCBzdXBlckhvc3RCaW5kaW5ncyA9IHN1cGVyRGVmLmhvc3RCaW5kaW5ncztcbiAgICAgICAgICAgICAgICBzdXBlckhvc3RCaW5kaW5ncyAmJiBpbmhlcml0SG9zdEJpbmRpbmdzKGRlZmluaXRpb24sIHN1cGVySG9zdEJpbmRpbmdzKTtcbiAgICAgICAgICAgICAgICAvLyBNZXJnZSBxdWVyaWVzXG4gICAgICAgICAgICAgICAgY29uc3Qgc3VwZXJWaWV3UXVlcnkgPSBzdXBlckRlZi52aWV3UXVlcnk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3VwZXJDb250ZW50UXVlcmllcyA9IHN1cGVyRGVmLmNvbnRlbnRRdWVyaWVzO1xuICAgICAgICAgICAgICAgIHN1cGVyVmlld1F1ZXJ5ICYmIGluaGVyaXRWaWV3UXVlcnkoZGVmaW5pdGlvbiwgc3VwZXJWaWV3UXVlcnkpO1xuICAgICAgICAgICAgICAgIHN1cGVyQ29udGVudFF1ZXJpZXMgJiYgaW5oZXJpdENvbnRlbnRRdWVyaWVzKGRlZmluaXRpb24sIHN1cGVyQ29udGVudFF1ZXJpZXMpO1xuICAgICAgICAgICAgICAgIC8vIE1lcmdlIGlucHV0cyBhbmQgb3V0cHV0c1xuICAgICAgICAgICAgICAgIGZpbGxQcm9wZXJ0aWVzKGRlZmluaXRpb24uaW5wdXRzLCBzdXBlckRlZi5pbnB1dHMpO1xuICAgICAgICAgICAgICAgIGZpbGxQcm9wZXJ0aWVzKGRlZmluaXRpb24uZGVjbGFyZWRJbnB1dHMsIHN1cGVyRGVmLmRlY2xhcmVkSW5wdXRzKTtcbiAgICAgICAgICAgICAgICBmaWxsUHJvcGVydGllcyhkZWZpbml0aW9uLm91dHB1dHMsIHN1cGVyRGVmLm91dHB1dHMpO1xuICAgICAgICAgICAgICAgIC8vIE1lcmdlIGFuaW1hdGlvbnMgbWV0YWRhdGEuXG4gICAgICAgICAgICAgICAgLy8gSWYgYHN1cGVyRGVmYCBpcyBhIENvbXBvbmVudCwgdGhlIGBkYXRhYCBmaWVsZCBpcyBwcmVzZW50IChkZWZhdWx0cyB0byBhbiBlbXB0eSBvYmplY3QpLlxuICAgICAgICAgICAgICAgIGlmIChpc0NvbXBvbmVudERlZihzdXBlckRlZikgJiYgc3VwZXJEZWYuZGF0YS5hbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgc3VwZXIgZGVmIGlzIGEgQ29tcG9uZW50LCB0aGUgYGRlZmluaXRpb25gIGlzIGFsc28gYSBDb21wb25lbnQsIHNpbmNlIERpcmVjdGl2ZXMgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBpbmhlcml0IENvbXBvbmVudHMgKHdlIHRocm93IGFuIGVycm9yIGFib3ZlIGFuZCBjYW5ub3QgcmVhY2ggdGhpcyBjb2RlKS5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVmRGF0YSA9IGRlZmluaXRpb24uZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgZGVmRGF0YS5hbmltYXRpb24gPSAoZGVmRGF0YS5hbmltYXRpb24gfHwgW10pLmNvbmNhdChzdXBlckRlZi5kYXRhLmFuaW1hdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUnVuIHBhcmVudCBmZWF0dXJlc1xuICAgICAgICAgICAgY29uc3QgZmVhdHVyZXMgPSBzdXBlckRlZi5mZWF0dXJlcztcbiAgICAgICAgICAgIGlmIChmZWF0dXJlcykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVhdHVyZSA9IGZlYXR1cmVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZSAmJiBmZWF0dXJlLm5nSW5oZXJpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZShkZWZpbml0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBgSW5oZXJpdERlZmluaXRpb25GZWF0dXJlYCBpcyBhIHBhcnQgb2YgdGhlIGN1cnJlbnQgYHN1cGVyRGVmYCwgaXQgbWVhbnMgdGhhdCB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZiBhbHJlYWR5IGhhcyBhbGwgdGhlIG5lY2Vzc2FyeSBpbmZvcm1hdGlvbiBpbmhlcml0ZWQgZnJvbSBpdHMgc3VwZXIgY2xhc3MoZXMpLCBzbyB3ZVxuICAgICAgICAgICAgICAgICAgICAvLyBjYW4gc3RvcCBtZXJnaW5nIGZpZWxkcyBmcm9tIHN1cGVyIGNsYXNzZXMuIEhvd2V2ZXIgd2UgbmVlZCB0byBpdGVyYXRlIHRocm91Z2ggdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHByb3RvdHlwZSBjaGFpbiB0byBsb29rIGZvciBjbGFzc2VzIHRoYXQgbWlnaHQgY29udGFpbiBvdGhlciBcImZlYXR1cmVzXCIgKGxpa2VcbiAgICAgICAgICAgICAgICAgICAgLy8gTmdPbkNoYW5nZXMpLCB3aGljaCB3ZSBzaG91bGQgaW52b2tlIGZvciB0aGUgb3JpZ2luYWwgYGRlZmluaXRpb25gLiBXZSBzZXQgdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGBzaG91bGRJbmhlcml0RmllbGRzYCBmbGFnIHRvIGluZGljYXRlIHRoYXQsIGVzc2VudGlhbGx5IHNraXBwaW5nIGZpZWxkcyBpbmhlcml0YW5jZVxuICAgICAgICAgICAgICAgICAgICAvLyBsb2dpYyBhbmQgb25seSBpbnZva2luZyBmdW5jdGlvbnMgZnJvbSB0aGUgXCJmZWF0dXJlc1wiIGxpc3QuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlID09PSDJtcm1SW5oZXJpdERlZmluaXRpb25GZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG91bGRJbmhlcml0RmllbGRzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXJUeXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHN1cGVyVHlwZSk7XG4gICAgfVxuICAgIG1lcmdlSG9zdEF0dHJzQWNyb3NzSW5oZXJpdGFuY2UoaW5oZXJpdGFuY2VDaGFpbik7XG59XG4vKipcbiAqIE1lcmdlIHRoZSBgaG9zdEF0dHJzYCBhbmQgYGhvc3RWYXJzYCBmcm9tIHRoZSBpbmhlcml0ZWQgcGFyZW50IHRvIHRoZSBiYXNlIGNsYXNzLlxuICpcbiAqIEBwYXJhbSBpbmhlcml0YW5jZUNoYWluIEEgbGlzdCBvZiBgV3JpdGFibGVEZWZzYCBzdGFydGluZyBhdCB0aGUgdG9wIG1vc3QgdHlwZSBhbmQgbGlzdGluZ1xuICogc3ViLXR5cGVzIGluIG9yZGVyLiBGb3IgZWFjaCB0eXBlIHRha2UgdGhlIGBob3N0QXR0cnNgIGFuZCBgaG9zdFZhcnNgIGFuZCBtZXJnZSBpdCB3aXRoIHRoZSBjaGlsZFxuICogdHlwZS5cbiAqL1xuZnVuY3Rpb24gbWVyZ2VIb3N0QXR0cnNBY3Jvc3NJbmhlcml0YW5jZShpbmhlcml0YW5jZUNoYWluKSB7XG4gICAgbGV0IGhvc3RWYXJzID0gMDtcbiAgICBsZXQgaG9zdEF0dHJzID0gbnVsbDtcbiAgICAvLyBXZSBwcm9jZXNzIHRoZSBpbmhlcml0YW5jZSBvcmRlciBmcm9tIHRoZSBiYXNlIHRvIHRoZSBsZWF2ZXMgaGVyZS5cbiAgICBmb3IgKGxldCBpID0gaW5oZXJpdGFuY2VDaGFpbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBjb25zdCBkZWYgPSBpbmhlcml0YW5jZUNoYWluW2ldO1xuICAgICAgICAvLyBGb3IgZWFjaCBgaG9zdFZhcnNgLCB3ZSBuZWVkIHRvIGFkZCB0aGUgc3VwZXJjbGFzcyBhbW91bnQuXG4gICAgICAgIGRlZi5ob3N0VmFycyA9IChob3N0VmFycyArPSBkZWYuaG9zdFZhcnMpO1xuICAgICAgICAvLyBmb3IgZWFjaCBgaG9zdEF0dHJzYCB3ZSBuZWVkIHRvIG1lcmdlIGl0IHdpdGggc3VwZXJjbGFzcy5cbiAgICAgICAgZGVmLmhvc3RBdHRycyA9XG4gICAgICAgICAgICBtZXJnZUhvc3RBdHRycyhkZWYuaG9zdEF0dHJzLCBob3N0QXR0cnMgPSBtZXJnZUhvc3RBdHRycyhob3N0QXR0cnMsIGRlZi5ob3N0QXR0cnMpKTtcbiAgICB9XG59XG5mdW5jdGlvbiBtYXliZVVud3JhcEVtcHR5KHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSBFTVBUWV9PQkopIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZSA9PT0gRU1QVFlfQVJSQVkpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGluaGVyaXRWaWV3UXVlcnkoZGVmaW5pdGlvbiwgc3VwZXJWaWV3UXVlcnkpIHtcbiAgICBjb25zdCBwcmV2Vmlld1F1ZXJ5ID0gZGVmaW5pdGlvbi52aWV3UXVlcnk7XG4gICAgaWYgKHByZXZWaWV3UXVlcnkpIHtcbiAgICAgICAgZGVmaW5pdGlvbi52aWV3UXVlcnkgPSAocmYsIGN0eCkgPT4ge1xuICAgICAgICAgICAgc3VwZXJWaWV3UXVlcnkocmYsIGN0eCk7XG4gICAgICAgICAgICBwcmV2Vmlld1F1ZXJ5KHJmLCBjdHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZGVmaW5pdGlvbi52aWV3UXVlcnkgPSBzdXBlclZpZXdRdWVyeTtcbiAgICB9XG59XG5mdW5jdGlvbiBpbmhlcml0Q29udGVudFF1ZXJpZXMoZGVmaW5pdGlvbiwgc3VwZXJDb250ZW50UXVlcmllcykge1xuICAgIGNvbnN0IHByZXZDb250ZW50UXVlcmllcyA9IGRlZmluaXRpb24uY29udGVudFF1ZXJpZXM7XG4gICAgaWYgKHByZXZDb250ZW50UXVlcmllcykge1xuICAgICAgICBkZWZpbml0aW9uLmNvbnRlbnRRdWVyaWVzID0gKHJmLCBjdHgsIGRpcmVjdGl2ZUluZGV4KSA9PiB7XG4gICAgICAgICAgICBzdXBlckNvbnRlbnRRdWVyaWVzKHJmLCBjdHgsIGRpcmVjdGl2ZUluZGV4KTtcbiAgICAgICAgICAgIHByZXZDb250ZW50UXVlcmllcyhyZiwgY3R4LCBkaXJlY3RpdmVJbmRleCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkZWZpbml0aW9uLmNvbnRlbnRRdWVyaWVzID0gc3VwZXJDb250ZW50UXVlcmllcztcbiAgICB9XG59XG5mdW5jdGlvbiBpbmhlcml0SG9zdEJpbmRpbmdzKGRlZmluaXRpb24sIHN1cGVySG9zdEJpbmRpbmdzKSB7XG4gICAgY29uc3QgcHJldkhvc3RCaW5kaW5ncyA9IGRlZmluaXRpb24uaG9zdEJpbmRpbmdzO1xuICAgIGlmIChwcmV2SG9zdEJpbmRpbmdzKSB7XG4gICAgICAgIGRlZmluaXRpb24uaG9zdEJpbmRpbmdzID0gKHJmLCBjdHgpID0+IHtcbiAgICAgICAgICAgIHN1cGVySG9zdEJpbmRpbmdzKHJmLCBjdHgpO1xuICAgICAgICAgICAgcHJldkhvc3RCaW5kaW5ncyhyZiwgY3R4KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRlZmluaXRpb24uaG9zdEJpbmRpbmdzID0gc3VwZXJIb3N0QmluZGluZ3M7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogRmllbGRzIHdoaWNoIGV4aXN0IG9uIGVpdGhlciBkaXJlY3RpdmUgb3IgY29tcG9uZW50IGRlZmluaXRpb25zLCBhbmQgbmVlZCB0byBiZSBjb3BpZWQgZnJvbVxuICogcGFyZW50IHRvIGNoaWxkIGNsYXNzZXMgYnkgdGhlIGDJtcm1Q29weURlZmluaXRpb25GZWF0dXJlYC5cbiAqL1xuY29uc3QgQ09QWV9ESVJFQ1RJVkVfRklFTERTID0gW1xuICAgIC8vIFRoZSBjaGlsZCBjbGFzcyBzaG91bGQgdXNlIHRoZSBwcm92aWRlcnMgb2YgaXRzIHBhcmVudC5cbiAgICAncHJvdmlkZXJzUmVzb2x2ZXInLFxuICAgIC8vIE5vdCBsaXN0ZWQgaGVyZSBhcmUgYW55IGZpZWxkcyB3aGljaCBhcmUgaGFuZGxlZCBieSB0aGUgYMm1ybVJbmhlcml0RGVmaW5pdGlvbkZlYXR1cmVgLCBzdWNoXG4gICAgLy8gYXMgaW5wdXRzLCBvdXRwdXRzLCBhbmQgaG9zdCBiaW5kaW5nIGZ1bmN0aW9ucy5cbl07XG4vKipcbiAqIEZpZWxkcyB3aGljaCBleGlzdCBvbmx5IG9uIGNvbXBvbmVudCBkZWZpbml0aW9ucywgYW5kIG5lZWQgdG8gYmUgY29waWVkIGZyb20gcGFyZW50IHRvIGNoaWxkXG4gKiBjbGFzc2VzIGJ5IHRoZSBgybXJtUNvcHlEZWZpbml0aW9uRmVhdHVyZWAuXG4gKlxuICogVGhlIHR5cGUgaGVyZSBhbGxvd3MgYW55IGZpZWxkIG9mIGBDb21wb25lbnREZWZgIHdoaWNoIGlzIG5vdCBhbHNvIGEgcHJvcGVydHkgb2YgYERpcmVjdGl2ZURlZmAsXG4gKiBzaW5jZSB0aG9zZSBzaG91bGQgZ28gaW4gYENPUFlfRElSRUNUSVZFX0ZJRUxEU2AgYWJvdmUuXG4gKi9cbmNvbnN0IENPUFlfQ09NUE9ORU5UX0ZJRUxEUyA9IFtcbiAgICAvLyBUaGUgY2hpbGQgY2xhc3Mgc2hvdWxkIHVzZSB0aGUgdGVtcGxhdGUgZnVuY3Rpb24gb2YgaXRzIHBhcmVudCwgaW5jbHVkaW5nIGFsbCB0ZW1wbGF0ZVxuICAgIC8vIHNlbWFudGljcy5cbiAgICAndGVtcGxhdGUnLFxuICAgICdkZWNscycsXG4gICAgJ2NvbnN0cycsXG4gICAgJ3ZhcnMnLFxuICAgICdvblB1c2gnLFxuICAgICduZ0NvbnRlbnRTZWxlY3RvcnMnLFxuICAgIC8vIFRoZSBjaGlsZCBjbGFzcyBzaG91bGQgdXNlIHRoZSBDU1Mgc3R5bGVzIG9mIGl0cyBwYXJlbnQsIGluY2x1ZGluZyBhbGwgc3R5bGluZyBzZW1hbnRpY3MuXG4gICAgJ3N0eWxlcycsXG4gICAgJ2VuY2Fwc3VsYXRpb24nLFxuICAgIC8vIFRoZSBjaGlsZCBjbGFzcyBzaG91bGQgYmUgY2hlY2tlZCBieSB0aGUgcnVudGltZSBpbiB0aGUgc2FtZSB3YXkgYXMgaXRzIHBhcmVudC5cbiAgICAnc2NoZW1hcycsXG5dO1xuLyoqXG4gKiBDb3BpZXMgdGhlIGZpZWxkcyBub3QgaGFuZGxlZCBieSB0aGUgYMm1ybVJbmhlcml0RGVmaW5pdGlvbkZlYXR1cmVgIGZyb20gdGhlIHN1cGVydHlwZSBvZiBhXG4gKiBkZWZpbml0aW9uLlxuICpcbiAqIFRoaXMgZXhpc3RzIHByaW1hcmlseSB0byBzdXBwb3J0IG5nY2MgbWlncmF0aW9uIG9mIGFuIGV4aXN0aW5nIFZpZXcgRW5naW5lIHBhdHRlcm4sIHdoZXJlIGFuXG4gKiBlbnRpcmUgZGVjb3JhdG9yIGlzIGluaGVyaXRlZCBmcm9tIGEgcGFyZW50IHRvIGEgY2hpbGQgY2xhc3MuIFdoZW4gbmdjYyBkZXRlY3RzIHRoaXMgY2FzZSwgaXRcbiAqIGdlbmVyYXRlcyBhIHNrZWxldG9uIGRlZmluaXRpb24gb24gdGhlIGNoaWxkIGNsYXNzLCBhbmQgYXBwbGllcyB0aGlzIGZlYXR1cmUuXG4gKlxuICogVGhlIGDJtcm1Q29weURlZmluaXRpb25GZWF0dXJlYCB0aGVuIGNvcGllcyBhbnkgbmVlZGVkIGZpZWxkcyBmcm9tIHRoZSBwYXJlbnQgY2xhc3MnIGRlZmluaXRpb24sXG4gKiBpbmNsdWRpbmcgdGhpbmdzIGxpa2UgdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gZGVmaW5pdGlvbiBUaGUgZGVmaW5pdGlvbiBvZiBhIGNoaWxkIGNsYXNzIHdoaWNoIGluaGVyaXRzIGZyb20gYSBwYXJlbnQgY2xhc3Mgd2l0aCBpdHNcbiAqIG93biBkZWZpbml0aW9uLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVDb3B5RGVmaW5pdGlvbkZlYXR1cmUoZGVmaW5pdGlvbikge1xuICAgIGxldCBzdXBlclR5cGUgPSBnZXRTdXBlclR5cGUoZGVmaW5pdGlvbi50eXBlKTtcbiAgICBsZXQgc3VwZXJEZWYgPSB1bmRlZmluZWQ7XG4gICAgaWYgKGlzQ29tcG9uZW50RGVmKGRlZmluaXRpb24pKSB7XG4gICAgICAgIC8vIERvbid0IHVzZSBnZXRDb21wb25lbnREZWYvZ2V0RGlyZWN0aXZlRGVmLiBUaGlzIGxvZ2ljIHJlbGllcyBvbiBpbmhlcml0YW5jZS5cbiAgICAgICAgc3VwZXJEZWYgPSBzdXBlclR5cGUuybVjbXA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBEb24ndCB1c2UgZ2V0Q29tcG9uZW50RGVmL2dldERpcmVjdGl2ZURlZi4gVGhpcyBsb2dpYyByZWxpZXMgb24gaW5oZXJpdGFuY2UuXG4gICAgICAgIHN1cGVyRGVmID0gc3VwZXJUeXBlLsm1ZGlyO1xuICAgIH1cbiAgICAvLyBOZWVkZWQgYmVjYXVzZSBgZGVmaW5pdGlvbmAgZmllbGRzIGFyZSByZWFkb25seS5cbiAgICBjb25zdCBkZWZBbnkgPSBkZWZpbml0aW9uO1xuICAgIC8vIENvcHkgb3ZlciBhbnkgZmllbGRzIHRoYXQgYXBwbHkgdG8gZWl0aGVyIGRpcmVjdGl2ZXMgb3IgY29tcG9uZW50cy5cbiAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIENPUFlfRElSRUNUSVZFX0ZJRUxEUykge1xuICAgICAgICBkZWZBbnlbZmllbGRdID0gc3VwZXJEZWZbZmllbGRdO1xuICAgIH1cbiAgICBpZiAoaXNDb21wb25lbnREZWYoc3VwZXJEZWYpKSB7XG4gICAgICAgIC8vIENvcHkgb3ZlciBhbnkgY29tcG9uZW50LXNwZWNpZmljIGZpZWxkcy5cbiAgICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBDT1BZX0NPTVBPTkVOVF9GSUVMRFMpIHtcbiAgICAgICAgICAgIGRlZkFueVtmaWVsZF0gPSBzdXBlckRlZltmaWVsZF07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xubGV0IF9zeW1ib2xJdGVyYXRvciA9IG51bGw7XG5mdW5jdGlvbiBnZXRTeW1ib2xJdGVyYXRvcigpIHtcbiAgICBpZiAoIV9zeW1ib2xJdGVyYXRvcikge1xuICAgICAgICBjb25zdCBTeW1ib2wgPSBfZ2xvYmFsWydTeW1ib2wnXTtcbiAgICAgICAgaWYgKFN5bWJvbCAmJiBTeW1ib2wuaXRlcmF0b3IpIHtcbiAgICAgICAgICAgIF9zeW1ib2xJdGVyYXRvciA9IFN5bWJvbC5pdGVyYXRvcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVzNi1zaGltIHNwZWNpZmljIGxvZ2ljXG4gICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoTWFwLnByb3RvdHlwZSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgIT09ICdlbnRyaWVzJyAmJiBrZXkgIT09ICdzaXplJyAmJlxuICAgICAgICAgICAgICAgICAgICBNYXAucHJvdG90eXBlW2tleV0gPT09IE1hcC5wcm90b3R5cGVbJ2VudHJpZXMnXSkge1xuICAgICAgICAgICAgICAgICAgICBfc3ltYm9sSXRlcmF0b3IgPSBrZXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBfc3ltYm9sSXRlcmF0b3I7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gZGV2TW9kZUVxdWFsKGEsIGIpIHtcbiAgICBjb25zdCBpc0xpc3RMaWtlSXRlcmFibGVBID0gaXNMaXN0TGlrZUl0ZXJhYmxlKGEpO1xuICAgIGNvbnN0IGlzTGlzdExpa2VJdGVyYWJsZUIgPSBpc0xpc3RMaWtlSXRlcmFibGUoYik7XG4gICAgaWYgKGlzTGlzdExpa2VJdGVyYWJsZUEgJiYgaXNMaXN0TGlrZUl0ZXJhYmxlQikge1xuICAgICAgICByZXR1cm4gYXJlSXRlcmFibGVzRXF1YWwoYSwgYiwgZGV2TW9kZUVxdWFsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IGlzQU9iamVjdCA9IGEgJiYgKHR5cGVvZiBhID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgYSA9PT0gJ2Z1bmN0aW9uJyk7XG4gICAgICAgIGNvbnN0IGlzQk9iamVjdCA9IGIgJiYgKHR5cGVvZiBiID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgYiA9PT0gJ2Z1bmN0aW9uJyk7XG4gICAgICAgIGlmICghaXNMaXN0TGlrZUl0ZXJhYmxlQSAmJiBpc0FPYmplY3QgJiYgIWlzTGlzdExpa2VJdGVyYWJsZUIgJiYgaXNCT2JqZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuaXMoYSwgYik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc0xpc3RMaWtlSXRlcmFibGUob2JqKSB7XG4gICAgaWYgKCFpc0pzT2JqZWN0KG9iaikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvYmopIHx8XG4gICAgICAgICghKG9iaiBpbnN0YW5jZW9mIE1hcCkgJiYgLy8gSlMgTWFwIGFyZSBpdGVyYWJsZXMgYnV0IHJldHVybiBlbnRyaWVzIGFzIFtrLCB2XVxuICAgICAgICAgICAgZ2V0U3ltYm9sSXRlcmF0b3IoKSBpbiBvYmopOyAvLyBKUyBJdGVyYWJsZSBoYXZlIGEgU3ltYm9sLml0ZXJhdG9yIHByb3Bcbn1cbmZ1bmN0aW9uIGFyZUl0ZXJhYmxlc0VxdWFsKGEsIGIsIGNvbXBhcmF0b3IpIHtcbiAgICBjb25zdCBpdGVyYXRvcjEgPSBhW2dldFN5bWJvbEl0ZXJhdG9yKCldKCk7XG4gICAgY29uc3QgaXRlcmF0b3IyID0gYltnZXRTeW1ib2xJdGVyYXRvcigpXSgpO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0xID0gaXRlcmF0b3IxLm5leHQoKTtcbiAgICAgICAgY29uc3QgaXRlbTIgPSBpdGVyYXRvcjIubmV4dCgpO1xuICAgICAgICBpZiAoaXRlbTEuZG9uZSAmJiBpdGVtMi5kb25lKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChpdGVtMS5kb25lIHx8IGl0ZW0yLmRvbmUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmICghY29tcGFyYXRvcihpdGVtMS52YWx1ZSwgaXRlbTIudmFsdWUpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGl0ZXJhdGVMaXN0TGlrZShvYmosIGZuKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9iai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm4ob2JqW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgaXRlcmF0b3IgPSBvYmpbZ2V0U3ltYm9sSXRlcmF0b3IoKV0oKTtcbiAgICAgICAgbGV0IGl0ZW07XG4gICAgICAgIHdoaWxlICghKChpdGVtID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSkge1xuICAgICAgICAgICAgZm4oaXRlbS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc0pzT2JqZWN0KG8pIHtcbiAgICByZXR1cm4gbyAhPT0gbnVsbCAmJiAodHlwZW9mIG8gPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIG8gPT09ICdvYmplY3QnKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vLyBUT0RPKG1pc2tvKTogY29uc2lkZXIgaW5saW5pbmdcbi8qKiBVcGRhdGVzIGJpbmRpbmcgYW5kIHJldHVybnMgdGhlIHZhbHVlLiAqL1xuZnVuY3Rpb24gdXBkYXRlQmluZGluZyhsVmlldywgYmluZGluZ0luZGV4LCB2YWx1ZSkge1xuICAgIHJldHVybiBsVmlld1tiaW5kaW5nSW5kZXhdID0gdmFsdWU7XG59XG4vKiogR2V0cyB0aGUgY3VycmVudCBiaW5kaW5nIHZhbHVlLiAqL1xuZnVuY3Rpb24gZ2V0QmluZGluZyhsVmlldywgYmluZGluZ0luZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShsVmlldywgYmluZGluZ0luZGV4KTtcbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0Tm90U2FtZShsVmlld1tiaW5kaW5nSW5kZXhdLCBOT19DSEFOR0UsICdTdG9yZWQgdmFsdWUgc2hvdWxkIG5ldmVyIGJlIE5PX0NIQU5HRS4nKTtcbiAgICByZXR1cm4gbFZpZXdbYmluZGluZ0luZGV4XTtcbn1cbi8qKlxuICogVXBkYXRlcyBiaW5kaW5nIGlmIGNoYW5nZWQsIHRoZW4gcmV0dXJucyB3aGV0aGVyIGl0IHdhcyB1cGRhdGVkLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gYWxzbyBjaGVja3MgdGhlIGBDaGVja05vQ2hhbmdlc01vZGVgIGFuZCB0aHJvd3MgaWYgY2hhbmdlcyBhcmUgbWFkZS5cbiAqIFNvbWUgY2hhbmdlcyAoT2JqZWN0cy9pdGVyYWJsZXMpIGR1cmluZyBgQ2hlY2tOb0NoYW5nZXNNb2RlYCBhcmUgZXhlbXB0IHRvIGNvbXBseSB3aXRoIFZFXG4gKiBiZWhhdmlvci5cbiAqXG4gKiBAcGFyYW0gbFZpZXcgY3VycmVudCBgTFZpZXdgXG4gKiBAcGFyYW0gYmluZGluZ0luZGV4IFRoZSBiaW5kaW5nIGluIHRoZSBgTFZpZXdgIHRvIGNoZWNrXG4gKiBAcGFyYW0gdmFsdWUgTmV3IHZhbHVlIHRvIGNoZWNrIGFnYWluc3QgYGxWaWV3W2JpbmRpbmdJbmRleF1gXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGJpbmRpbmdzIGhhcyBjaGFuZ2VkLiAoVGhyb3dzIGlmIGJpbmRpbmcgaGFzIGNoYW5nZWQgZHVyaW5nXG4gKiAgICAgICAgICBgQ2hlY2tOb0NoYW5nZXNNb2RlYClcbiAqL1xuZnVuY3Rpb24gYmluZGluZ1VwZGF0ZWQobFZpZXcsIGJpbmRpbmdJbmRleCwgdmFsdWUpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Tm90U2FtZSh2YWx1ZSwgTk9fQ0hBTkdFLCAnSW5jb21pbmcgdmFsdWUgc2hvdWxkIG5ldmVyIGJlIE5PX0NIQU5HRS4nKTtcbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0TGVzc1RoYW4oYmluZGluZ0luZGV4LCBsVmlldy5sZW5ndGgsIGBTbG90IHNob3VsZCBoYXZlIGJlZW4gaW5pdGlhbGl6ZWQgdG8gTk9fQ0hBTkdFYCk7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSBsVmlld1tiaW5kaW5nSW5kZXhdO1xuICAgIGlmIChPYmplY3QuaXMob2xkVmFsdWUsIHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAobmdEZXZNb2RlICYmIGlzSW5DaGVja05vQ2hhbmdlc01vZGUoKSkge1xuICAgICAgICAgICAgLy8gVmlldyBlbmdpbmUgZGlkbid0IHJlcG9ydCB1bmRlZmluZWQgdmFsdWVzIGFzIGNoYW5nZWQgb24gdGhlIGZpcnN0IGNoZWNrTm9DaGFuZ2VzIHBhc3NcbiAgICAgICAgICAgIC8vIChiZWZvcmUgdGhlIGNoYW5nZSBkZXRlY3Rpb24gd2FzIHJ1bikuXG4gICAgICAgICAgICBjb25zdCBvbGRWYWx1ZVRvQ29tcGFyZSA9IG9sZFZhbHVlICE9PSBOT19DSEFOR0UgPyBvbGRWYWx1ZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmICghZGV2TW9kZUVxdWFsKG9sZFZhbHVlVG9Db21wYXJlLCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gZ2V0RXhwcmVzc2lvbkNoYW5nZWRFcnJvckRldGFpbHMobFZpZXcsIGJpbmRpbmdJbmRleCwgb2xkVmFsdWVUb0NvbXBhcmUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aHJvd0Vycm9ySWZOb0NoYW5nZXNNb2RlKG9sZFZhbHVlID09PSBOT19DSEFOR0UsIGRldGFpbHMub2xkVmFsdWUsIGRldGFpbHMubmV3VmFsdWUsIGRldGFpbHMucHJvcE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhlcmUgd2FzIGEgY2hhbmdlLCBidXQgdGhlIGBkZXZNb2RlRXF1YWxgIGRlY2lkZWQgdGhhdCB0aGUgY2hhbmdlIGlzIGV4ZW1wdCBmcm9tIGFuIGVycm9yLlxuICAgICAgICAgICAgLy8gRm9yIHRoaXMgcmVhc29uIHdlIGV4aXQgYXMgaWYgbm8gY2hhbmdlLiBUaGUgZWFybHkgZXhpdCBpcyBuZWVkZWQgdG8gcHJldmVudCB0aGUgY2hhbmdlZFxuICAgICAgICAgICAgLy8gdmFsdWUgdG8gYmUgd3JpdHRlbiBpbnRvIGBMVmlld2AgKElmIHdlIHdvdWxkIHdyaXRlIHRoZSBuZXcgdmFsdWUgdGhhdCB3ZSB3b3VsZCBub3Qgc2VlIGl0XG4gICAgICAgICAgICAvLyBhcyBjaGFuZ2Ugb24gbmV4dCBDRC4pXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbFZpZXdbYmluZGluZ0luZGV4XSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG4vKiogVXBkYXRlcyAyIGJpbmRpbmdzIGlmIGNoYW5nZWQsIHRoZW4gcmV0dXJucyB3aGV0aGVyIGVpdGhlciB3YXMgdXBkYXRlZC4gKi9cbmZ1bmN0aW9uIGJpbmRpbmdVcGRhdGVkMihsVmlldywgYmluZGluZ0luZGV4LCBleHAxLCBleHAyKSB7XG4gICAgY29uc3QgZGlmZmVyZW50ID0gYmluZGluZ1VwZGF0ZWQobFZpZXcsIGJpbmRpbmdJbmRleCwgZXhwMSk7XG4gICAgcmV0dXJuIGJpbmRpbmdVcGRhdGVkKGxWaWV3LCBiaW5kaW5nSW5kZXggKyAxLCBleHAyKSB8fCBkaWZmZXJlbnQ7XG59XG4vKiogVXBkYXRlcyAzIGJpbmRpbmdzIGlmIGNoYW5nZWQsIHRoZW4gcmV0dXJucyB3aGV0aGVyIGFueSB3YXMgdXBkYXRlZC4gKi9cbmZ1bmN0aW9uIGJpbmRpbmdVcGRhdGVkMyhsVmlldywgYmluZGluZ0luZGV4LCBleHAxLCBleHAyLCBleHAzKSB7XG4gICAgY29uc3QgZGlmZmVyZW50ID0gYmluZGluZ1VwZGF0ZWQyKGxWaWV3LCBiaW5kaW5nSW5kZXgsIGV4cDEsIGV4cDIpO1xuICAgIHJldHVybiBiaW5kaW5nVXBkYXRlZChsVmlldywgYmluZGluZ0luZGV4ICsgMiwgZXhwMykgfHwgZGlmZmVyZW50O1xufVxuLyoqIFVwZGF0ZXMgNCBiaW5kaW5ncyBpZiBjaGFuZ2VkLCB0aGVuIHJldHVybnMgd2hldGhlciBhbnkgd2FzIHVwZGF0ZWQuICovXG5mdW5jdGlvbiBiaW5kaW5nVXBkYXRlZDQobFZpZXcsIGJpbmRpbmdJbmRleCwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCkge1xuICAgIGNvbnN0IGRpZmZlcmVudCA9IGJpbmRpbmdVcGRhdGVkMihsVmlldywgYmluZGluZ0luZGV4LCBleHAxLCBleHAyKTtcbiAgICByZXR1cm4gYmluZGluZ1VwZGF0ZWQyKGxWaWV3LCBiaW5kaW5nSW5kZXggKyAyLCBleHAzLCBleHA0KSB8fCBkaWZmZXJlbnQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBVcGRhdGVzIHRoZSB2YWx1ZSBvZiBvciByZW1vdmVzIGEgYm91bmQgYXR0cmlidXRlIG9uIGFuIEVsZW1lbnQuXG4gKlxuICogVXNlZCBpbiB0aGUgY2FzZSBvZiBgW2F0dHIudGl0bGVdPVwidmFsdWVcImBcbiAqXG4gKiBAcGFyYW0gbmFtZSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0gdmFsdWUgdmFsdWUgVGhlIGF0dHJpYnV0ZSBpcyByZW1vdmVkIHdoZW4gdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLlxuICogICAgICAgICAgICAgICAgICBPdGhlcndpc2UgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBpcyBzZXQgdG8gdGhlIHN0cmluZ2lmaWVkIHZhbHVlLlxuICogQHBhcmFtIHNhbml0aXplciBBbiBvcHRpb25hbCBmdW5jdGlvbiB1c2VkIHRvIHNhbml0aXplIHRoZSB2YWx1ZS5cbiAqIEBwYXJhbSBuYW1lc3BhY2UgT3B0aW9uYWwgbmFtZXNwYWNlIHRvIHVzZSB3aGVuIHNldHRpbmcgdGhlIGF0dHJpYnV0ZS5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1YXR0cmlidXRlKG5hbWUsIHZhbHVlLCBzYW5pdGl6ZXIsIG5hbWVzcGFjZSkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBiaW5kaW5nSW5kZXggPSBuZXh0QmluZGluZ0luZGV4KCk7XG4gICAgaWYgKGJpbmRpbmdVcGRhdGVkKGxWaWV3LCBiaW5kaW5nSW5kZXgsIHZhbHVlKSkge1xuICAgICAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgICAgIGNvbnN0IHROb2RlID0gZ2V0U2VsZWN0ZWRUTm9kZSgpO1xuICAgICAgICBlbGVtZW50QXR0cmlidXRlSW50ZXJuYWwodE5vZGUsIGxWaWV3LCBuYW1lLCB2YWx1ZSwgc2FuaXRpemVyLCBuYW1lc3BhY2UpO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgc3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YSh0Vmlldy5kYXRhLCB0Tm9kZSwgJ2F0dHIuJyArIG5hbWUsIGJpbmRpbmdJbmRleCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1YXR0cmlidXRlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQ3JlYXRlIGludGVycG9sYXRpb24gYmluZGluZ3Mgd2l0aCBhIHZhcmlhYmxlIG51bWJlciBvZiBleHByZXNzaW9ucy5cbiAqXG4gKiBJZiB0aGVyZSBhcmUgMSB0byA4IGV4cHJlc3Npb25zIGBpbnRlcnBvbGF0aW9uMSgpYCB0byBgaW50ZXJwb2xhdGlvbjgoKWAgc2hvdWxkIGJlIHVzZWQgaW5zdGVhZC5cbiAqIFRob3NlIGFyZSBmYXN0ZXIgYmVjYXVzZSB0aGVyZSBpcyBubyBuZWVkIHRvIGNyZWF0ZSBhbiBhcnJheSBvZiBleHByZXNzaW9ucyBhbmQgaXRlcmF0ZSBvdmVyIGl0LlxuICpcbiAqIGB2YWx1ZXNgOlxuICogLSBoYXMgc3RhdGljIHRleHQgYXQgZXZlbiBpbmRleGVzLFxuICogLSBoYXMgZXZhbHVhdGVkIGV4cHJlc3Npb25zIGF0IG9kZCBpbmRleGVzLlxuICpcbiAqIFJldHVybnMgdGhlIGNvbmNhdGVuYXRlZCBzdHJpbmcgd2hlbiBhbnkgb2YgdGhlIGFyZ3VtZW50cyBjaGFuZ2VzLCBgTk9fQ0hBTkdFYCBvdGhlcndpc2UuXG4gKi9cbmZ1bmN0aW9uIGludGVycG9sYXRpb25WKGxWaWV3LCB2YWx1ZXMpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TGVzc1RoYW4oMiwgdmFsdWVzLmxlbmd0aCwgJ3Nob3VsZCBoYXZlIGF0IGxlYXN0IDMgdmFsdWVzJyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEVxdWFsKHZhbHVlcy5sZW5ndGggJSAyLCAxLCAnc2hvdWxkIGhhdmUgYW4gb2RkIG51bWJlciBvZiB2YWx1ZXMnKTtcbiAgICBsZXQgaXNCaW5kaW5nVXBkYXRlZCA9IGZhbHNlO1xuICAgIGxldCBiaW5kaW5nSW5kZXggPSBnZXRCaW5kaW5nSW5kZXgoKTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHZhbHVlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAvLyBDaGVjayBpZiBiaW5kaW5ncyAob2RkIGluZGV4ZXMpIGhhdmUgY2hhbmdlZFxuICAgICAgICBpc0JpbmRpbmdVcGRhdGVkID0gYmluZGluZ1VwZGF0ZWQobFZpZXcsIGJpbmRpbmdJbmRleCsrLCB2YWx1ZXNbaV0pIHx8IGlzQmluZGluZ1VwZGF0ZWQ7XG4gICAgfVxuICAgIHNldEJpbmRpbmdJbmRleChiaW5kaW5nSW5kZXgpO1xuICAgIGlmICghaXNCaW5kaW5nVXBkYXRlZCkge1xuICAgICAgICByZXR1cm4gTk9fQ0hBTkdFO1xuICAgIH1cbiAgICAvLyBCdWlsZCB0aGUgdXBkYXRlZCBjb250ZW50XG4gICAgbGV0IGNvbnRlbnQgPSB2YWx1ZXNbMF07XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgY29udGVudCArPSByZW5kZXJTdHJpbmdpZnkodmFsdWVzW2ldKSArIHZhbHVlc1tpICsgMV07XG4gICAgfVxuICAgIHJldHVybiBjb250ZW50O1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIGludGVycG9sYXRpb24gYmluZGluZyB3aXRoIDEgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0gcHJlZml4IHN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgdmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBzdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICovXG5mdW5jdGlvbiBpbnRlcnBvbGF0aW9uMShsVmlldywgcHJlZml4LCB2MCwgc3VmZml4KSB7XG4gICAgY29uc3QgZGlmZmVyZW50ID0gYmluZGluZ1VwZGF0ZWQobFZpZXcsIG5leHRCaW5kaW5nSW5kZXgoKSwgdjApO1xuICAgIHJldHVybiBkaWZmZXJlbnQgPyBwcmVmaXggKyByZW5kZXJTdHJpbmdpZnkodjApICsgc3VmZml4IDogTk9fQ0hBTkdFO1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIGludGVycG9sYXRpb24gYmluZGluZyB3aXRoIDIgZXhwcmVzc2lvbnMuXG4gKi9cbmZ1bmN0aW9uIGludGVycG9sYXRpb24yKGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGdldEJpbmRpbmdJbmRleCgpO1xuICAgIGNvbnN0IGRpZmZlcmVudCA9IGJpbmRpbmdVcGRhdGVkMihsVmlldywgYmluZGluZ0luZGV4LCB2MCwgdjEpO1xuICAgIGluY3JlbWVudEJpbmRpbmdJbmRleCgyKTtcbiAgICByZXR1cm4gZGlmZmVyZW50ID8gcHJlZml4ICsgcmVuZGVyU3RyaW5naWZ5KHYwKSArIGkwICsgcmVuZGVyU3RyaW5naWZ5KHYxKSArIHN1ZmZpeCA6IE5PX0NIQU5HRTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBpbnRlcnBvbGF0aW9uIGJpbmRpbmcgd2l0aCAzIGV4cHJlc3Npb25zLlxuICovXG5mdW5jdGlvbiBpbnRlcnBvbGF0aW9uMyhsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGdldEJpbmRpbmdJbmRleCgpO1xuICAgIGNvbnN0IGRpZmZlcmVudCA9IGJpbmRpbmdVcGRhdGVkMyhsVmlldywgYmluZGluZ0luZGV4LCB2MCwgdjEsIHYyKTtcbiAgICBpbmNyZW1lbnRCaW5kaW5nSW5kZXgoMyk7XG4gICAgcmV0dXJuIGRpZmZlcmVudCA/XG4gICAgICAgIHByZWZpeCArIHJlbmRlclN0cmluZ2lmeSh2MCkgKyBpMCArIHJlbmRlclN0cmluZ2lmeSh2MSkgKyBpMSArIHJlbmRlclN0cmluZ2lmeSh2MikgKyBzdWZmaXggOlxuICAgICAgICBOT19DSEFOR0U7XG59XG4vKipcbiAqIENyZWF0ZSBhbiBpbnRlcnBvbGF0aW9uIGJpbmRpbmcgd2l0aCA0IGV4cHJlc3Npb25zLlxuICovXG5mdW5jdGlvbiBpbnRlcnBvbGF0aW9uNChsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2Mywgc3VmZml4KSB7XG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gZ2V0QmluZGluZ0luZGV4KCk7XG4gICAgY29uc3QgZGlmZmVyZW50ID0gYmluZGluZ1VwZGF0ZWQ0KGxWaWV3LCBiaW5kaW5nSW5kZXgsIHYwLCB2MSwgdjIsIHYzKTtcbiAgICBpbmNyZW1lbnRCaW5kaW5nSW5kZXgoNCk7XG4gICAgcmV0dXJuIGRpZmZlcmVudCA/IHByZWZpeCArIHJlbmRlclN0cmluZ2lmeSh2MCkgKyBpMCArIHJlbmRlclN0cmluZ2lmeSh2MSkgKyBpMSArXG4gICAgICAgIHJlbmRlclN0cmluZ2lmeSh2MikgKyBpMiArIHJlbmRlclN0cmluZ2lmeSh2MykgKyBzdWZmaXggOlxuICAgICAgICBOT19DSEFOR0U7XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gaW50ZXJwb2xhdGlvbiBiaW5kaW5nIHdpdGggNSBleHByZXNzaW9ucy5cbiAqL1xuZnVuY3Rpb24gaW50ZXJwb2xhdGlvbjUobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgc3VmZml4KSB7XG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gZ2V0QmluZGluZ0luZGV4KCk7XG4gICAgbGV0IGRpZmZlcmVudCA9IGJpbmRpbmdVcGRhdGVkNChsVmlldywgYmluZGluZ0luZGV4LCB2MCwgdjEsIHYyLCB2Myk7XG4gICAgZGlmZmVyZW50ID0gYmluZGluZ1VwZGF0ZWQobFZpZXcsIGJpbmRpbmdJbmRleCArIDQsIHY0KSB8fCBkaWZmZXJlbnQ7XG4gICAgaW5jcmVtZW50QmluZGluZ0luZGV4KDUpO1xuICAgIHJldHVybiBkaWZmZXJlbnQgPyBwcmVmaXggKyByZW5kZXJTdHJpbmdpZnkodjApICsgaTAgKyByZW5kZXJTdHJpbmdpZnkodjEpICsgaTEgK1xuICAgICAgICByZW5kZXJTdHJpbmdpZnkodjIpICsgaTIgKyByZW5kZXJTdHJpbmdpZnkodjMpICsgaTMgKyByZW5kZXJTdHJpbmdpZnkodjQpICsgc3VmZml4IDpcbiAgICAgICAgTk9fQ0hBTkdFO1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIGludGVycG9sYXRpb24gYmluZGluZyB3aXRoIDYgZXhwcmVzc2lvbnMuXG4gKi9cbmZ1bmN0aW9uIGludGVycG9sYXRpb242KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgc3VmZml4KSB7XG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gZ2V0QmluZGluZ0luZGV4KCk7XG4gICAgbGV0IGRpZmZlcmVudCA9IGJpbmRpbmdVcGRhdGVkNChsVmlldywgYmluZGluZ0luZGV4LCB2MCwgdjEsIHYyLCB2Myk7XG4gICAgZGlmZmVyZW50ID0gYmluZGluZ1VwZGF0ZWQyKGxWaWV3LCBiaW5kaW5nSW5kZXggKyA0LCB2NCwgdjUpIHx8IGRpZmZlcmVudDtcbiAgICBpbmNyZW1lbnRCaW5kaW5nSW5kZXgoNik7XG4gICAgcmV0dXJuIGRpZmZlcmVudCA/XG4gICAgICAgIHByZWZpeCArIHJlbmRlclN0cmluZ2lmeSh2MCkgKyBpMCArIHJlbmRlclN0cmluZ2lmeSh2MSkgKyBpMSArIHJlbmRlclN0cmluZ2lmeSh2MikgKyBpMiArXG4gICAgICAgICAgICByZW5kZXJTdHJpbmdpZnkodjMpICsgaTMgKyByZW5kZXJTdHJpbmdpZnkodjQpICsgaTQgKyByZW5kZXJTdHJpbmdpZnkodjUpICsgc3VmZml4IDpcbiAgICAgICAgTk9fQ0hBTkdFO1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIGludGVycG9sYXRpb24gYmluZGluZyB3aXRoIDcgZXhwcmVzc2lvbnMuXG4gKi9cbmZ1bmN0aW9uIGludGVycG9sYXRpb243KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBzdWZmaXgpIHtcbiAgICBjb25zdCBiaW5kaW5nSW5kZXggPSBnZXRCaW5kaW5nSW5kZXgoKTtcbiAgICBsZXQgZGlmZmVyZW50ID0gYmluZGluZ1VwZGF0ZWQ0KGxWaWV3LCBiaW5kaW5nSW5kZXgsIHYwLCB2MSwgdjIsIHYzKTtcbiAgICBkaWZmZXJlbnQgPSBiaW5kaW5nVXBkYXRlZDMobFZpZXcsIGJpbmRpbmdJbmRleCArIDQsIHY0LCB2NSwgdjYpIHx8IGRpZmZlcmVudDtcbiAgICBpbmNyZW1lbnRCaW5kaW5nSW5kZXgoNyk7XG4gICAgcmV0dXJuIGRpZmZlcmVudCA/IHByZWZpeCArIHJlbmRlclN0cmluZ2lmeSh2MCkgKyBpMCArIHJlbmRlclN0cmluZ2lmeSh2MSkgKyBpMSArXG4gICAgICAgIHJlbmRlclN0cmluZ2lmeSh2MikgKyBpMiArIHJlbmRlclN0cmluZ2lmeSh2MykgKyBpMyArIHJlbmRlclN0cmluZ2lmeSh2NCkgKyBpNCArXG4gICAgICAgIHJlbmRlclN0cmluZ2lmeSh2NSkgKyBpNSArIHJlbmRlclN0cmluZ2lmeSh2NikgKyBzdWZmaXggOlxuICAgICAgICBOT19DSEFOR0U7XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gaW50ZXJwb2xhdGlvbiBiaW5kaW5nIHdpdGggOCBleHByZXNzaW9ucy5cbiAqL1xuZnVuY3Rpb24gaW50ZXJwb2xhdGlvbjgobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgaTQsIHY1LCBpNSwgdjYsIGk2LCB2Nywgc3VmZml4KSB7XG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gZ2V0QmluZGluZ0luZGV4KCk7XG4gICAgbGV0IGRpZmZlcmVudCA9IGJpbmRpbmdVcGRhdGVkNChsVmlldywgYmluZGluZ0luZGV4LCB2MCwgdjEsIHYyLCB2Myk7XG4gICAgZGlmZmVyZW50ID0gYmluZGluZ1VwZGF0ZWQ0KGxWaWV3LCBiaW5kaW5nSW5kZXggKyA0LCB2NCwgdjUsIHY2LCB2NykgfHwgZGlmZmVyZW50O1xuICAgIGluY3JlbWVudEJpbmRpbmdJbmRleCg4KTtcbiAgICByZXR1cm4gZGlmZmVyZW50ID8gcHJlZml4ICsgcmVuZGVyU3RyaW5naWZ5KHYwKSArIGkwICsgcmVuZGVyU3RyaW5naWZ5KHYxKSArIGkxICtcbiAgICAgICAgcmVuZGVyU3RyaW5naWZ5KHYyKSArIGkyICsgcmVuZGVyU3RyaW5naWZ5KHYzKSArIGkzICsgcmVuZGVyU3RyaW5naWZ5KHY0KSArIGk0ICtcbiAgICAgICAgcmVuZGVyU3RyaW5naWZ5KHY1KSArIGk1ICsgcmVuZGVyU3RyaW5naWZ5KHY2KSArIGk2ICsgcmVuZGVyU3RyaW5naWZ5KHY3KSArIHN1ZmZpeCA6XG4gICAgICAgIE5PX0NIQU5HRTtcbn1cblxuLyoqXG4gKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBhdHRyaWJ1dGUgb24gYW4gZWxlbWVudCB3aXRoIHNpbmdsZSBib3VuZCB2YWx1ZSBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgMSBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBhdHRyLnRpdGxlPVwicHJlZml4e3t2MH19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGUxKCd0aXRsZScsICdwcmVmaXgnLCB2MCwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIGF0dHJOYW1lIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdG8gdXBkYXRlXG4gKiBAcGFyYW0gcHJlZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHNhbml0aXplciBBbiBvcHRpb25hbCBzYW5pdGl6ZXIgZnVuY3Rpb25cbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTEoYXR0ck5hbWUsIHByZWZpeCwgdjAsIHN1ZmZpeCwgc2FuaXRpemVyLCBuYW1lc3BhY2UpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uMShsVmlldywgcHJlZml4LCB2MCwgc3VmZml4KTtcbiAgICBpZiAoaW50ZXJwb2xhdGVkVmFsdWUgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudEF0dHJpYnV0ZUludGVybmFsKHROb2RlLCBsVmlldywgYXR0ck5hbWUsIGludGVycG9sYXRlZFZhbHVlLCBzYW5pdGl6ZXIsIG5hbWVzcGFjZSk7XG4gICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgc3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YShnZXRUVmlldygpLmRhdGEsIHROb2RlLCAnYXR0ci4nICsgYXR0ck5hbWUsIGdldEJpbmRpbmdJbmRleCgpIC0gMSwgcHJlZml4LCBzdWZmaXgpO1xuICAgIH1cbiAgICByZXR1cm4gybXJtWF0dHJpYnV0ZUludGVycG9sYXRlMTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgYXR0cmlidXRlIG9uIGFuIGVsZW1lbnQgd2l0aCAyIGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgMiBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgYXR0ci50aXRsZT1cInByZWZpeHt7djB9fS17e3YxfX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczo6XG4gKlxuICogYGBgdHNcbiAqIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTIoJ3RpdGxlJywgJ3ByZWZpeCcsIHYwLCAnLScsIHYxLCAnc3VmZml4Jyk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gYXR0ck5hbWUgVGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0byB1cGRhdGVcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gc2FuaXRpemVyIEFuIG9wdGlvbmFsIHNhbml0aXplciBmdW5jdGlvblxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWF0dHJpYnV0ZUludGVycG9sYXRlMihhdHRyTmFtZSwgcHJlZml4LCB2MCwgaTAsIHYxLCBzdWZmaXgsIHNhbml0aXplciwgbmFtZXNwYWNlKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjIobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgc3VmZml4KTtcbiAgICBpZiAoaW50ZXJwb2xhdGVkVmFsdWUgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudEF0dHJpYnV0ZUludGVybmFsKHROb2RlLCBsVmlldywgYXR0ck5hbWUsIGludGVycG9sYXRlZFZhbHVlLCBzYW5pdGl6ZXIsIG5hbWVzcGFjZSk7XG4gICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgc3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YShnZXRUVmlldygpLmRhdGEsIHROb2RlLCAnYXR0ci4nICsgYXR0ck5hbWUsIGdldEJpbmRpbmdJbmRleCgpIC0gMiwgcHJlZml4LCBpMCwgc3VmZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTI7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50IHdpdGggMyBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDMgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGF0dHIudGl0bGU9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOjpcbiAqXG4gKiBgYGB0c1xuICogybXJtWF0dHJpYnV0ZUludGVycG9sYXRlMyhcbiAqICd0aXRsZScsICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIGF0dHJOYW1lIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdG8gdXBkYXRlXG4gKiBAcGFyYW0gcHJlZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkwIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjEgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkxIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjIgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHNhbml0aXplciBBbiBvcHRpb25hbCBzYW5pdGl6ZXIgZnVuY3Rpb25cbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTMoYXR0ck5hbWUsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBzdWZmaXgsIHNhbml0aXplciwgbmFtZXNwYWNlKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjMobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBzdWZmaXgpO1xuICAgIGlmIChpbnRlcnBvbGF0ZWRWYWx1ZSAhPT0gTk9fQ0hBTkdFKSB7XG4gICAgICAgIGNvbnN0IHROb2RlID0gZ2V0U2VsZWN0ZWRUTm9kZSgpO1xuICAgICAgICBlbGVtZW50QXR0cmlidXRlSW50ZXJuYWwodE5vZGUsIGxWaWV3LCBhdHRyTmFtZSwgaW50ZXJwb2xhdGVkVmFsdWUsIHNhbml0aXplciwgbmFtZXNwYWNlKTtcbiAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICBzdG9yZVByb3BlcnR5QmluZGluZ01ldGFkYXRhKGdldFRWaWV3KCkuZGF0YSwgdE5vZGUsICdhdHRyLicgKyBhdHRyTmFtZSwgZ2V0QmluZGluZ0luZGV4KCkgLSAzLCBwcmVmaXgsIGkwLCBpMSwgc3VmZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTM7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50IHdpdGggNCBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDQgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGF0dHIudGl0bGU9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczo6XG4gKlxuICogYGBgdHNcbiAqIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTQoXG4gKiAndGl0bGUnLCAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBhdHRyTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHRvIHVwZGF0ZVxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSBzYW5pdGl6ZXIgQW4gb3B0aW9uYWwgc2FuaXRpemVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU0KGF0dHJOYW1lLCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBzdWZmaXgsIHNhbml0aXplciwgbmFtZXNwYWNlKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjQobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIHN1ZmZpeCk7XG4gICAgaWYgKGludGVycG9sYXRlZFZhbHVlICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgY29uc3QgdE5vZGUgPSBnZXRTZWxlY3RlZFROb2RlKCk7XG4gICAgICAgIGVsZW1lbnRBdHRyaWJ1dGVJbnRlcm5hbCh0Tm9kZSwgbFZpZXcsIGF0dHJOYW1lLCBpbnRlcnBvbGF0ZWRWYWx1ZSwgc2FuaXRpemVyLCBuYW1lc3BhY2UpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEoZ2V0VFZpZXcoKS5kYXRhLCB0Tm9kZSwgJ2F0dHIuJyArIGF0dHJOYW1lLCBnZXRCaW5kaW5nSW5kZXgoKSAtIDQsIHByZWZpeCwgaTAsIGkxLCBpMiwgc3VmZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTQ7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50IHdpdGggNSBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDUgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGF0dHIudGl0bGU9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU1KFxuICogJ3RpdGxlJywgJ3ByZWZpeCcsIHYwLCAnLScsIHYxLCAnLScsIHYyLCAnLScsIHYzLCAnLScsIHY0LCAnc3VmZml4Jyk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gYXR0ck5hbWUgVGhlIG5hbWUgb2YgdGhlIGF0dHJpYnV0ZSB0byB1cGRhdGVcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTMgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gc2FuaXRpemVyIEFuIG9wdGlvbmFsIHNhbml0aXplciBmdW5jdGlvblxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWF0dHJpYnV0ZUludGVycG9sYXRlNShhdHRyTmFtZSwgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBzdWZmaXgsIHNhbml0aXplciwgbmFtZXNwYWNlKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjUobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgc3VmZml4KTtcbiAgICBpZiAoaW50ZXJwb2xhdGVkVmFsdWUgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudEF0dHJpYnV0ZUludGVybmFsKHROb2RlLCBsVmlldywgYXR0ck5hbWUsIGludGVycG9sYXRlZFZhbHVlLCBzYW5pdGl6ZXIsIG5hbWVzcGFjZSk7XG4gICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgc3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YShnZXRUVmlldygpLmRhdGEsIHROb2RlLCAnYXR0ci4nICsgYXR0ck5hbWUsIGdldEJpbmRpbmdJbmRleCgpIC0gNSwgcHJlZml4LCBpMCwgaTEsIGkyLCBpMywgc3VmZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTU7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50IHdpdGggNiBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDYgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGF0dHIudGl0bGU9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19LXt7djV9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOjpcbiAqXG4gKiBgYGB0c1xuICogybXJtWF0dHJpYnV0ZUludGVycG9sYXRlNihcbiAqICAgICd0aXRsZScsICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIGF0dHJOYW1lIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdG8gdXBkYXRlXG4gKiBAcGFyYW0gcHJlZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkwIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjEgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkxIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjIgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkyIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjMgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkzIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjQgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGk0IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjUgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHNhbml0aXplciBBbiBvcHRpb25hbCBzYW5pdGl6ZXIgZnVuY3Rpb25cbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTYoYXR0ck5hbWUsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgaTQsIHY1LCBzdWZmaXgsIHNhbml0aXplciwgbmFtZXNwYWNlKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjYobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgaTQsIHY1LCBzdWZmaXgpO1xuICAgIGlmIChpbnRlcnBvbGF0ZWRWYWx1ZSAhPT0gTk9fQ0hBTkdFKSB7XG4gICAgICAgIGNvbnN0IHROb2RlID0gZ2V0U2VsZWN0ZWRUTm9kZSgpO1xuICAgICAgICBlbGVtZW50QXR0cmlidXRlSW50ZXJuYWwodE5vZGUsIGxWaWV3LCBhdHRyTmFtZSwgaW50ZXJwb2xhdGVkVmFsdWUsIHNhbml0aXplciwgbmFtZXNwYWNlKTtcbiAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICBzdG9yZVByb3BlcnR5QmluZGluZ01ldGFkYXRhKGdldFRWaWV3KCkuZGF0YSwgdE5vZGUsICdhdHRyLicgKyBhdHRyTmFtZSwgZ2V0QmluZGluZ0luZGV4KCkgLSA2LCBwcmVmaXgsIGkwLCBpMSwgaTIsIGkzLCBpNCwgc3VmZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTY7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50IHdpdGggNyBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDcgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGF0dHIudGl0bGU9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19LXt7djV9fS17e3Y2fX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczo6XG4gKlxuICogYGBgdHNcbiAqIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTcoXG4gKiAgICAndGl0bGUnLCAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICctJywgdjQsICctJywgdjUsICctJywgdjYsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBhdHRyTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHRvIHVwZGF0ZVxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMyBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY0IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY1IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY2IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSBzYW5pdGl6ZXIgQW4gb3B0aW9uYWwgc2FuaXRpemVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU3KGF0dHJOYW1lLCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBzdWZmaXgsIHNhbml0aXplciwgbmFtZXNwYWNlKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjcobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgaTQsIHY1LCBpNSwgdjYsIHN1ZmZpeCk7XG4gICAgaWYgKGludGVycG9sYXRlZFZhbHVlICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgY29uc3QgdE5vZGUgPSBnZXRTZWxlY3RlZFROb2RlKCk7XG4gICAgICAgIGVsZW1lbnRBdHRyaWJ1dGVJbnRlcm5hbCh0Tm9kZSwgbFZpZXcsIGF0dHJOYW1lLCBpbnRlcnBvbGF0ZWRWYWx1ZSwgc2FuaXRpemVyLCBuYW1lc3BhY2UpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEoZ2V0VFZpZXcoKS5kYXRhLCB0Tm9kZSwgJ2F0dHIuJyArIGF0dHJOYW1lLCBnZXRCaW5kaW5nSW5kZXgoKSAtIDcsIHByZWZpeCwgaTAsIGkxLCBpMiwgaTMsIGk0LCBpNSwgc3VmZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTc7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50IHdpdGggOCBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDggaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGF0dHIudGl0bGU9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19LXt7djV9fS17e3Y2fX0te3t2N319c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU4KFxuICogICd0aXRsZScsICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJy0nLCB2NiwgJy0nLCB2NywgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIGF0dHJOYW1lIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdG8gdXBkYXRlXG4gKiBAcGFyYW0gcHJlZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkwIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjEgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkxIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjIgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkyIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjMgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkzIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjQgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGk0IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjUgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGk1IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjYgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGk2IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjcgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHNhbml0aXplciBBbiBvcHRpb25hbCBzYW5pdGl6ZXIgZnVuY3Rpb25cbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTgoYXR0ck5hbWUsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgaTQsIHY1LCBpNSwgdjYsIGk2LCB2Nywgc3VmZml4LCBzYW5pdGl6ZXIsIG5hbWVzcGFjZSkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb244KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBpNiwgdjcsIHN1ZmZpeCk7XG4gICAgaWYgKGludGVycG9sYXRlZFZhbHVlICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgY29uc3QgdE5vZGUgPSBnZXRTZWxlY3RlZFROb2RlKCk7XG4gICAgICAgIGVsZW1lbnRBdHRyaWJ1dGVJbnRlcm5hbCh0Tm9kZSwgbFZpZXcsIGF0dHJOYW1lLCBpbnRlcnBvbGF0ZWRWYWx1ZSwgc2FuaXRpemVyLCBuYW1lc3BhY2UpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEoZ2V0VFZpZXcoKS5kYXRhLCB0Tm9kZSwgJ2F0dHIuJyArIGF0dHJOYW1lLCBnZXRCaW5kaW5nSW5kZXgoKSAtIDgsIHByZWZpeCwgaTAsIGkxLCBpMiwgaTMsIGk0LCBpNSwgaTYsIHN1ZmZpeCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU4O1xufVxuLyoqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIGF0dHJpYnV0ZSBvbiBhbiBlbGVtZW50IHdpdGggOSBvciBtb3JlIGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSBudW1iZXIgb2YgaW50ZXJwb2xhdGVkIHZhbHVlcyBleGNlZWRzIDguXG4gKlxuICogYGBgaHRtbFxuICogPGRpdlxuICogIHRpdGxlPVwicHJlZml4e3t2MH19LXt7djF9fS17e3YyfX0te3t2M319LXt7djR9fS17e3Y1fX0te3t2Nn19LXt7djd9fS17e3Y4fX0te3t2OX19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGVWKFxuICogICd0aXRsZScsIFsncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICctJywgdjQsICctJywgdjUsICctJywgdjYsICctJywgdjcsICctJywgdjksXG4gKiAgJ3N1ZmZpeCddKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBhdHRyTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB2YWx1ZXMgVGhlIGNvbGxlY3Rpb24gb2YgdmFsdWVzIGFuZCB0aGUgc3RyaW5ncyBpbi1iZXR3ZWVuIHRob3NlIHZhbHVlcywgYmVnaW5uaW5nIHdpdGhcbiAqIGEgc3RyaW5nIHByZWZpeCBhbmQgZW5kaW5nIHdpdGggYSBzdHJpbmcgc3VmZml4LlxuICogKGUuZy4gYFsncHJlZml4JywgdmFsdWUwLCAnLScsIHZhbHVlMSwgJy0nLCB2YWx1ZTIsIC4uLiwgdmFsdWU5OSwgJ3N1ZmZpeCddYClcbiAqIEBwYXJhbSBzYW5pdGl6ZXIgQW4gb3B0aW9uYWwgc2FuaXRpemVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGVWKGF0dHJOYW1lLCB2YWx1ZXMsIHNhbml0aXplciwgbmFtZXNwYWNlKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZCA9IGludGVycG9sYXRpb25WKGxWaWV3LCB2YWx1ZXMpO1xuICAgIGlmIChpbnRlcnBvbGF0ZWQgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudEF0dHJpYnV0ZUludGVybmFsKHROb2RlLCBsVmlldywgYXR0ck5hbWUsIGludGVycG9sYXRlZCwgc2FuaXRpemVyLCBuYW1lc3BhY2UpO1xuICAgICAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgICAgICBjb25zdCBpbnRlcnBvbGF0aW9uSW5CZXR3ZWVuID0gW3ZhbHVlc1swXV07IC8vIHByZWZpeFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDI7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0aW9uSW5CZXR3ZWVuLnB1c2godmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEoZ2V0VFZpZXcoKS5kYXRhLCB0Tm9kZSwgJ2F0dHIuJyArIGF0dHJOYW1lLCBnZXRCaW5kaW5nSW5kZXgoKSAtIGludGVycG9sYXRpb25JbkJldHdlZW4ubGVuZ3RoICsgMSwgLi4uaW50ZXJwb2xhdGlvbkluQmV0d2Vlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZVY7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gdGVtcGxhdGVGaXJzdENyZWF0ZVBhc3MoaW5kZXgsIHRWaWV3LCBsVmlldywgdGVtcGxhdGVGbiwgZGVjbHMsIHZhcnMsIHRhZ05hbWUsIGF0dHJzSW5kZXgsIGxvY2FsUmVmc0luZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEZpcnN0Q3JlYXRlUGFzcyh0Vmlldyk7XG4gICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5maXJzdENyZWF0ZVBhc3MrKztcbiAgICBjb25zdCB0Vmlld0NvbnN0cyA9IHRWaWV3LmNvbnN0cztcbiAgICAvLyBUT0RPKHBrKTogcmVmYWN0b3IgZ2V0T3JDcmVhdGVUTm9kZSB0byBoYXZlIHRoZSBcImNyZWF0ZVwiIG9ubHkgdmVyc2lvblxuICAgIGNvbnN0IHROb2RlID0gZ2V0T3JDcmVhdGVUTm9kZSh0VmlldywgaW5kZXgsIDQgLyogQ29udGFpbmVyICovLCB0YWdOYW1lIHx8IG51bGwsIGdldENvbnN0YW50KHRWaWV3Q29uc3RzLCBhdHRyc0luZGV4KSk7XG4gICAgcmVzb2x2ZURpcmVjdGl2ZXModFZpZXcsIGxWaWV3LCB0Tm9kZSwgZ2V0Q29uc3RhbnQodFZpZXdDb25zdHMsIGxvY2FsUmVmc0luZGV4KSk7XG4gICAgcmVnaXN0ZXJQb3N0T3JkZXJIb29rcyh0VmlldywgdE5vZGUpO1xuICAgIGNvbnN0IGVtYmVkZGVkVFZpZXcgPSB0Tm9kZS50Vmlld3MgPSBjcmVhdGVUVmlldygyIC8qIEVtYmVkZGVkICovLCB0Tm9kZSwgdGVtcGxhdGVGbiwgZGVjbHMsIHZhcnMsIHRWaWV3LmRpcmVjdGl2ZVJlZ2lzdHJ5LCB0Vmlldy5waXBlUmVnaXN0cnksIG51bGwsIHRWaWV3LnNjaGVtYXMsIHRWaWV3Q29uc3RzKTtcbiAgICBpZiAodFZpZXcucXVlcmllcyAhPT0gbnVsbCkge1xuICAgICAgICB0Vmlldy5xdWVyaWVzLnRlbXBsYXRlKHRWaWV3LCB0Tm9kZSk7XG4gICAgICAgIGVtYmVkZGVkVFZpZXcucXVlcmllcyA9IHRWaWV3LnF1ZXJpZXMuZW1iZWRkZWRUVmlldyh0Tm9kZSk7XG4gICAgfVxuICAgIHJldHVybiB0Tm9kZTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBMQ29udGFpbmVyIGZvciBhbiBuZy10ZW1wbGF0ZSAoZHluYW1pY2FsbHktaW5zZXJ0ZWQgdmlldyksIGUuZy5cbiAqXG4gKiA8bmctdGVtcGxhdGUgI2Zvbz5cbiAqICAgIDxkaXY+PC9kaXY+XG4gKiA8L25nLXRlbXBsYXRlPlxuICpcbiAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGNvbnRhaW5lciBpbiB0aGUgZGF0YSBhcnJheVxuICogQHBhcmFtIHRlbXBsYXRlRm4gSW5saW5lIHRlbXBsYXRlXG4gKiBAcGFyYW0gZGVjbHMgVGhlIG51bWJlciBvZiBub2RlcywgbG9jYWwgcmVmcywgYW5kIHBpcGVzIGZvciB0aGlzIHRlbXBsYXRlXG4gKiBAcGFyYW0gdmFycyBUaGUgbnVtYmVyIG9mIGJpbmRpbmdzIGZvciB0aGlzIHRlbXBsYXRlXG4gKiBAcGFyYW0gdGFnTmFtZSBUaGUgbmFtZSBvZiB0aGUgY29udGFpbmVyIGVsZW1lbnQsIGlmIGFwcGxpY2FibGVcbiAqIEBwYXJhbSBhdHRyc0luZGV4IEluZGV4IG9mIHRlbXBsYXRlIGF0dHJpYnV0ZXMgaW4gdGhlIGBjb25zdHNgIGFycmF5LlxuICogQHBhcmFtIGxvY2FsUmVmcyBJbmRleCBvZiB0aGUgbG9jYWwgcmVmZXJlbmNlcyBpbiB0aGUgYGNvbnN0c2AgYXJyYXkuXG4gKiBAcGFyYW0gbG9jYWxSZWZFeHRyYWN0b3IgQSBmdW5jdGlvbiB3aGljaCBleHRyYWN0cyBsb2NhbC1yZWZzIHZhbHVlcyBmcm9tIHRoZSB0ZW1wbGF0ZS5cbiAqICAgICAgICBEZWZhdWx0cyB0byB0aGUgY3VycmVudCBlbGVtZW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgbG9jYWwtcmVmLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybV0ZW1wbGF0ZShpbmRleCwgdGVtcGxhdGVGbiwgZGVjbHMsIHZhcnMsIHRhZ05hbWUsIGF0dHJzSW5kZXgsIGxvY2FsUmVmc0luZGV4LCBsb2NhbFJlZkV4dHJhY3Rvcikge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgY29uc3QgYWRqdXN0ZWRJbmRleCA9IGluZGV4ICsgSEVBREVSX09GRlNFVDtcbiAgICBjb25zdCB0Tm9kZSA9IHRWaWV3LmZpcnN0Q3JlYXRlUGFzcyA/IHRlbXBsYXRlRmlyc3RDcmVhdGVQYXNzKGFkanVzdGVkSW5kZXgsIHRWaWV3LCBsVmlldywgdGVtcGxhdGVGbiwgZGVjbHMsIHZhcnMsIHRhZ05hbWUsIGF0dHJzSW5kZXgsIGxvY2FsUmVmc0luZGV4KSA6XG4gICAgICAgIHRWaWV3LmRhdGFbYWRqdXN0ZWRJbmRleF07XG4gICAgc2V0Q3VycmVudFROb2RlKHROb2RlLCBmYWxzZSk7XG4gICAgY29uc3QgY29tbWVudCA9IGxWaWV3W1JFTkRFUkVSXS5jcmVhdGVDb21tZW50KG5nRGV2TW9kZSA/ICdjb250YWluZXInIDogJycpO1xuICAgIGFwcGVuZENoaWxkKHRWaWV3LCBsVmlldywgY29tbWVudCwgdE5vZGUpO1xuICAgIGF0dGFjaFBhdGNoRGF0YShjb21tZW50LCBsVmlldyk7XG4gICAgYWRkVG9WaWV3VHJlZShsVmlldywgbFZpZXdbYWRqdXN0ZWRJbmRleF0gPSBjcmVhdGVMQ29udGFpbmVyKGNvbW1lbnQsIGxWaWV3LCBjb21tZW50LCB0Tm9kZSkpO1xuICAgIGlmIChpc0RpcmVjdGl2ZUhvc3QodE5vZGUpKSB7XG4gICAgICAgIGNyZWF0ZURpcmVjdGl2ZXNJbnN0YW5jZXModFZpZXcsIGxWaWV3LCB0Tm9kZSk7XG4gICAgfVxuICAgIGlmIChsb2NhbFJlZnNJbmRleCAhPSBudWxsKSB7XG4gICAgICAgIHNhdmVSZXNvbHZlZExvY2Fsc0luRGF0YShsVmlldywgdE5vZGUsIGxvY2FsUmVmRXh0cmFjdG9yKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqIFN0b3JlIGEgdmFsdWUgaW4gdGhlIGBkYXRhYCBhdCBhIGdpdmVuIGBpbmRleGAuICovXG5mdW5jdGlvbiBzdG9yZSh0VmlldywgbFZpZXcsIGluZGV4LCB2YWx1ZSkge1xuICAgIC8vIFdlIGRvbid0IHN0b3JlIGFueSBzdGF0aWMgZGF0YSBmb3IgbG9jYWwgdmFyaWFibGVzLCBzbyB0aGUgZmlyc3QgdGltZVxuICAgIC8vIHdlIHNlZSB0aGUgdGVtcGxhdGUsIHdlIHNob3VsZCBzdG9yZSBhcyBudWxsIHRvIGF2b2lkIGEgc3BhcnNlIGFycmF5XG4gICAgaWYgKGluZGV4ID49IHRWaWV3LmRhdGEubGVuZ3RoKSB7XG4gICAgICAgIHRWaWV3LmRhdGFbaW5kZXhdID0gbnVsbDtcbiAgICAgICAgdFZpZXcuYmx1ZXByaW50W2luZGV4XSA9IG51bGw7XG4gICAgfVxuICAgIGxWaWV3W2luZGV4XSA9IHZhbHVlO1xufVxuLyoqXG4gKiBSZXRyaWV2ZXMgYSBsb2NhbCByZWZlcmVuY2UgZnJvbSB0aGUgY3VycmVudCBjb250ZXh0Vmlld0RhdGEuXG4gKlxuICogSWYgdGhlIHJlZmVyZW5jZSB0byByZXRyaWV2ZSBpcyBpbiBhIHBhcmVudCB2aWV3LCB0aGlzIGluc3RydWN0aW9uIGlzIHVzZWQgaW4gY29uanVuY3Rpb25cbiAqIHdpdGggYSBuZXh0Q29udGV4dCgpIGNhbGwsIHdoaWNoIHdhbGtzIHVwIHRoZSB0cmVlIGFuZCB1cGRhdGVzIHRoZSBjb250ZXh0Vmlld0RhdGEgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbG9jYWwgcmVmIGluIGNvbnRleHRWaWV3RGF0YS5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cmVmZXJlbmNlKGluZGV4KSB7XG4gICAgY29uc3QgY29udGV4dExWaWV3ID0gZ2V0Q29udGV4dExWaWV3KCk7XG4gICAgcmV0dXJuIGxvYWQoY29udGV4dExWaWV3LCBIRUFERVJfT0ZGU0VUICsgaW5kZXgpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQSBtYXBwaW5nIG9mIHRoZSBAYW5ndWxhci9jb3JlIEFQSSBzdXJmYWNlIHVzZWQgaW4gZ2VuZXJhdGVkIGV4cHJlc3Npb25zIHRvIHRoZSBhY3R1YWwgc3ltYm9scy5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSBrZXB0IHVwIHRvIGRhdGUgd2l0aCB0aGUgcHVibGljIGV4cG9ydHMgb2YgQGFuZ3VsYXIvY29yZS5cbiAqL1xuY29uc3QgYW5ndWxhckNvcmVEaUVudiA9IHtcbiAgICAnybXJtWRlZmluZUluamVjdGFibGUnOiDJtcm1ZGVmaW5lSW5qZWN0YWJsZSxcbiAgICAnybXJtWRlZmluZUluamVjdG9yJzogybXJtWRlZmluZUluamVjdG9yLFxuICAgICfJtcm1aW5qZWN0JzogybXJtWluamVjdCxcbiAgICAnybXJtWludmFsaWRGYWN0b3J5RGVwJzogybXJtWludmFsaWRGYWN0b3J5RGVwLFxuICAgICdyZXNvbHZlRm9yd2FyZFJlZic6IHJlc29sdmVGb3J3YXJkUmVmLFxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIENvbXBpbGUgYW4gQW5ndWxhciBpbmplY3RhYmxlIGFjY29yZGluZyB0byBpdHMgYEluamVjdGFibGVgIG1ldGFkYXRhLCBhbmQgcGF0Y2ggdGhlIHJlc3VsdGluZ1xuICogaW5qZWN0YWJsZSBkZWYgKGDJtXByb3ZgKSBvbnRvIHRoZSBpbmplY3RhYmxlIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIGNvbXBpbGVJbmplY3RhYmxlKHR5cGUsIG1ldGEpIHtcbiAgICBsZXQgbmdJbmplY3RhYmxlRGVmID0gbnVsbDtcbiAgICBsZXQgbmdGYWN0b3J5RGVmID0gbnVsbDtcbiAgICAvLyBpZiBOR19QUk9WX0RFRiBpcyBhbHJlYWR5IGRlZmluZWQgb24gdGhpcyBjbGFzcyB0aGVuIGRvbid0IG92ZXJ3cml0ZSBpdFxuICAgIGlmICghdHlwZS5oYXNPd25Qcm9wZXJ0eShOR19QUk9WX0RFRikpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIE5HX1BST1ZfREVGLCB7XG4gICAgICAgICAgICBnZXQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobmdJbmplY3RhYmxlRGVmID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBpbGVyID0gZ2V0Q29tcGlsZXJGYWNhZGUoeyB1c2FnZTogMCAvKiBEZWNvcmF0b3IgKi8sIGtpbmQ6ICdpbmplY3RhYmxlJywgdHlwZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgbmdJbmplY3RhYmxlRGVmID0gY29tcGlsZXIuY29tcGlsZUluamVjdGFibGUoYW5ndWxhckNvcmVEaUVudiwgYG5nOi8vLyR7dHlwZS5uYW1lfS/JtXByb3YuanNgLCBnZXRJbmplY3RhYmxlTWV0YWRhdGEodHlwZSwgbWV0YSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmdJbmplY3RhYmxlRGVmO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGlmIE5HX0ZBQ1RPUllfREVGIGlzIGFscmVhZHkgZGVmaW5lZCBvbiB0aGlzIGNsYXNzIHRoZW4gZG9uJ3Qgb3ZlcndyaXRlIGl0XG4gICAgaWYgKCF0eXBlLmhhc093blByb3BlcnR5KE5HX0ZBQ1RPUllfREVGKSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgTkdfRkFDVE9SWV9ERUYsIHtcbiAgICAgICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuZ0ZhY3RvcnlEZWYgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7IHVzYWdlOiAwIC8qIERlY29yYXRvciAqLywga2luZDogJ2luamVjdGFibGUnLCB0eXBlIH0pO1xuICAgICAgICAgICAgICAgICAgICBuZ0ZhY3RvcnlEZWYgPSBjb21waWxlci5jb21waWxlRmFjdG9yeShhbmd1bGFyQ29yZURpRW52LCBgbmc6Ly8vJHt0eXBlLm5hbWV9L8m1ZmFjLmpzYCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdHlwZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVBcmd1bWVudENvdW50OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVwczogcmVmbGVjdERlcGVuZGVuY2llcyh0eXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogY29tcGlsZXIuRmFjdG9yeVRhcmdldC5JbmplY3RhYmxlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmdGYWN0b3J5RGVmO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIExlYXZlIHRoaXMgY29uZmlndXJhYmxlIHNvIHRoYXQgdGhlIGZhY3RvcmllcyBmcm9tIGRpcmVjdGl2ZXMgb3IgcGlwZXMgY2FuIHRha2UgcHJlY2VkZW5jZS5cbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG59XG5jb25zdCBVU0VfVkFMVUUgPSBnZXRDbG9zdXJlU2FmZVByb3BlcnR5KHsgcHJvdmlkZTogU3RyaW5nLCB1c2VWYWx1ZTogZ2V0Q2xvc3VyZVNhZmVQcm9wZXJ0eSB9KTtcbmZ1bmN0aW9uIGlzVXNlQ2xhc3NQcm92aWRlcihtZXRhKSB7XG4gICAgcmV0dXJuIG1ldGEudXNlQ2xhc3MgIT09IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGlzVXNlVmFsdWVQcm92aWRlcihtZXRhKSB7XG4gICAgcmV0dXJuIFVTRV9WQUxVRSBpbiBtZXRhO1xufVxuZnVuY3Rpb24gaXNVc2VGYWN0b3J5UHJvdmlkZXIobWV0YSkge1xuICAgIHJldHVybiBtZXRhLnVzZUZhY3RvcnkgIT09IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGlzVXNlRXhpc3RpbmdQcm92aWRlcihtZXRhKSB7XG4gICAgcmV0dXJuIG1ldGEudXNlRXhpc3RpbmcgIT09IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIGdldEluamVjdGFibGVNZXRhZGF0YSh0eXBlLCBzcmNNZXRhKSB7XG4gICAgLy8gQWxsb3cgdGhlIGNvbXBpbGF0aW9uIG9mIGEgY2xhc3Mgd2l0aCBhIGBASW5qZWN0YWJsZSgpYCBkZWNvcmF0b3Igd2l0aG91dCBwYXJhbWV0ZXJzXG4gICAgY29uc3QgbWV0YSA9IHNyY01ldGEgfHwgeyBwcm92aWRlZEluOiBudWxsIH07XG4gICAgY29uc3QgY29tcGlsZXJNZXRhID0ge1xuICAgICAgICBuYW1lOiB0eXBlLm5hbWUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVBcmd1bWVudENvdW50OiAwLFxuICAgICAgICBwcm92aWRlZEluOiBtZXRhLnByb3ZpZGVkSW4sXG4gICAgfTtcbiAgICBpZiAoKGlzVXNlQ2xhc3NQcm92aWRlcihtZXRhKSB8fCBpc1VzZUZhY3RvcnlQcm92aWRlcihtZXRhKSkgJiYgbWV0YS5kZXBzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29tcGlsZXJNZXRhLmRlcHMgPSBjb252ZXJ0RGVwZW5kZW5jaWVzKG1ldGEuZGVwcyk7XG4gICAgfVxuICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgdXNlciBleHBsaWNpdGx5IHByb3ZpZGVkIGEgYHVzZVh4eHhgIHByb3BlcnR5LlxuICAgIGlmIChpc1VzZUNsYXNzUHJvdmlkZXIobWV0YSkpIHtcbiAgICAgICAgY29tcGlsZXJNZXRhLnVzZUNsYXNzID0gbWV0YS51c2VDbGFzcztcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNVc2VWYWx1ZVByb3ZpZGVyKG1ldGEpKSB7XG4gICAgICAgIGNvbXBpbGVyTWV0YS51c2VWYWx1ZSA9IG1ldGEudXNlVmFsdWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzVXNlRmFjdG9yeVByb3ZpZGVyKG1ldGEpKSB7XG4gICAgICAgIGNvbXBpbGVyTWV0YS51c2VGYWN0b3J5ID0gbWV0YS51c2VGYWN0b3J5O1xuICAgIH1cbiAgICBlbHNlIGlmIChpc1VzZUV4aXN0aW5nUHJvdmlkZXIobWV0YSkpIHtcbiAgICAgICAgY29tcGlsZXJNZXRhLnVzZUV4aXN0aW5nID0gbWV0YS51c2VFeGlzdGluZztcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBpbGVyTWV0YTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEluamVjdGFibGUgZGVjb3JhdG9yIGFuZCBtZXRhZGF0YS5cbiAqXG4gKiBAQW5ub3RhdGlvblxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBJbmplY3RhYmxlID0gbWFrZURlY29yYXRvcignSW5qZWN0YWJsZScsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsICh0eXBlLCBtZXRhKSA9PiBjb21waWxlSW5qZWN0YWJsZSh0eXBlLCBtZXRhKSk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gZmluZEZpcnN0Q2xvc2VkQ3ljbGUoa2V5cykge1xuICAgIGNvbnN0IHJlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAocmVzLmluZGV4T2Yoa2V5c1tpXSkgPiAtMSkge1xuICAgICAgICAgICAgcmVzLnB1c2goa2V5c1tpXSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5wdXNoKGtleXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuZnVuY3Rpb24gY29uc3RydWN0UmVzb2x2aW5nUGF0aChrZXlzKSB7XG4gICAgaWYgKGtleXMubGVuZ3RoID4gMSkge1xuICAgICAgICBjb25zdCByZXZlcnNlZCA9IGZpbmRGaXJzdENsb3NlZEN5Y2xlKGtleXMuc2xpY2UoKS5yZXZlcnNlKCkpO1xuICAgICAgICBjb25zdCB0b2tlblN0cnMgPSByZXZlcnNlZC5tYXAoayA9PiBzdHJpbmdpZnkoay50b2tlbikpO1xuICAgICAgICByZXR1cm4gJyAoJyArIHRva2VuU3Rycy5qb2luKCcgLT4gJykgKyAnKSc7XG4gICAgfVxuICAgIHJldHVybiAnJztcbn1cbmZ1bmN0aW9uIGluamVjdGlvbkVycm9yKGluamVjdG9yLCBrZXksIGNvbnN0cnVjdFJlc29sdmluZ01lc3NhZ2UsIG9yaWdpbmFsRXJyb3IpIHtcbiAgICBjb25zdCBrZXlzID0gW2tleV07XG4gICAgY29uc3QgZXJyTXNnID0gY29uc3RydWN0UmVzb2x2aW5nTWVzc2FnZShrZXlzKTtcbiAgICBjb25zdCBlcnJvciA9IChvcmlnaW5hbEVycm9yID8gd3JhcHBlZEVycm9yKGVyck1zZywgb3JpZ2luYWxFcnJvcikgOiBFcnJvcihlcnJNc2cpKTtcbiAgICBlcnJvci5hZGRLZXkgPSBhZGRLZXk7XG4gICAgZXJyb3Iua2V5cyA9IGtleXM7XG4gICAgZXJyb3IuaW5qZWN0b3JzID0gW2luamVjdG9yXTtcbiAgICBlcnJvci5jb25zdHJ1Y3RSZXNvbHZpbmdNZXNzYWdlID0gY29uc3RydWN0UmVzb2x2aW5nTWVzc2FnZTtcbiAgICBlcnJvcltFUlJPUl9PUklHSU5BTF9FUlJPUl0gPSBvcmlnaW5hbEVycm9yO1xuICAgIHJldHVybiBlcnJvcjtcbn1cbmZ1bmN0aW9uIGFkZEtleShpbmplY3Rvciwga2V5KSB7XG4gICAgdGhpcy5pbmplY3RvcnMucHVzaChpbmplY3Rvcik7XG4gICAgdGhpcy5rZXlzLnB1c2goa2V5KTtcbiAgICAvLyBOb3RlOiBUaGlzIHVwZGF0ZWQgbWVzc2FnZSB3b24ndCBiZSByZWZsZWN0ZWQgaW4gdGhlIGAuc3RhY2tgIHByb3BlcnR5XG4gICAgdGhpcy5tZXNzYWdlID0gdGhpcy5jb25zdHJ1Y3RSZXNvbHZpbmdNZXNzYWdlKHRoaXMua2V5cyk7XG59XG4vKipcbiAqIFRocm93biB3aGVuIHRyeWluZyB0byByZXRyaWV2ZSBhIGRlcGVuZGVuY3kgYnkga2V5IGZyb20ge0BsaW5rIEluamVjdG9yfSwgYnV0IHRoZVxuICoge0BsaW5rIEluamVjdG9yfSBkb2VzIG5vdCBoYXZlIGEge0BsaW5rIFByb3ZpZGVyfSBmb3IgdGhlIGdpdmVuIGtleS5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjbGFzcyBBIHtcbiAqICAgY29uc3RydWN0b3IoYjpCKSB7fVxuICogfVxuICpcbiAqIGV4cGVjdCgoKSA9PiBJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFtBXSkpLnRvVGhyb3dFcnJvcigpO1xuICogYGBgXG4gKi9cbmZ1bmN0aW9uIG5vUHJvdmlkZXJFcnJvcihpbmplY3Rvciwga2V5KSB7XG4gICAgcmV0dXJuIGluamVjdGlvbkVycm9yKGluamVjdG9yLCBrZXksIGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0ID0gc3RyaW5naWZ5KGtleXNbMF0udG9rZW4pO1xuICAgICAgICByZXR1cm4gYE5vIHByb3ZpZGVyIGZvciAke2ZpcnN0fSEke2NvbnN0cnVjdFJlc29sdmluZ1BhdGgoa2V5cyl9YDtcbiAgICB9KTtcbn1cbi8qKlxuICogVGhyb3duIHdoZW4gZGVwZW5kZW5jaWVzIGZvcm0gYSBjeWNsZS5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiB2YXIgaW5qZWN0b3IgPSBJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFtcbiAqICAge3Byb3ZpZGU6IFwib25lXCIsIHVzZUZhY3Rvcnk6ICh0d28pID0+IFwidHdvXCIsIGRlcHM6IFtbbmV3IEluamVjdChcInR3b1wiKV1dfSxcbiAqICAge3Byb3ZpZGU6IFwidHdvXCIsIHVzZUZhY3Rvcnk6IChvbmUpID0+IFwib25lXCIsIGRlcHM6IFtbbmV3IEluamVjdChcIm9uZVwiKV1dfVxuICogXSk7XG4gKlxuICogZXhwZWN0KCgpID0+IGluamVjdG9yLmdldChcIm9uZVwiKSkudG9UaHJvd0Vycm9yKCk7XG4gKiBgYGBcbiAqXG4gKiBSZXRyaWV2aW5nIGBBYCBvciBgQmAgdGhyb3dzIGEgYEN5Y2xpY0RlcGVuZGVuY3lFcnJvcmAgYXMgdGhlIGdyYXBoIGFib3ZlIGNhbm5vdCBiZSBjb25zdHJ1Y3RlZC5cbiAqL1xuZnVuY3Rpb24gY3ljbGljRGVwZW5kZW5jeUVycm9yKGluamVjdG9yLCBrZXkpIHtcbiAgICByZXR1cm4gaW5qZWN0aW9uRXJyb3IoaW5qZWN0b3IsIGtleSwgZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgcmV0dXJuIGBDYW5ub3QgaW5zdGFudGlhdGUgY3ljbGljIGRlcGVuZGVuY3khJHtjb25zdHJ1Y3RSZXNvbHZpbmdQYXRoKGtleXMpfWA7XG4gICAgfSk7XG59XG4vKipcbiAqIFRocm93biB3aGVuIGEgY29uc3RydWN0aW5nIHR5cGUgcmV0dXJucyB3aXRoIGFuIEVycm9yLlxuICpcbiAqIFRoZSBgSW5zdGFudGlhdGlvbkVycm9yYCBjbGFzcyBjb250YWlucyB0aGUgb3JpZ2luYWwgZXJyb3IgcGx1cyB0aGUgZGVwZW5kZW5jeSBncmFwaCB3aGljaCBjYXVzZWRcbiAqIHRoaXMgb2JqZWN0IHRvIGJlIGluc3RhbnRpYXRlZC5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjbGFzcyBBIHtcbiAqICAgY29uc3RydWN0b3IoKSB7XG4gKiAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXNzYWdlJyk7XG4gKiAgIH1cbiAqIH1cbiAqXG4gKiB2YXIgaW5qZWN0b3IgPSBJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFtBXSk7XG5cbiAqIHRyeSB7XG4gKiAgIGluamVjdG9yLmdldChBKTtcbiAqIH0gY2F0Y2ggKGUpIHtcbiAqICAgZXhwZWN0KGUgaW5zdGFuY2VvZiBJbnN0YW50aWF0aW9uRXJyb3IpLnRvQmUodHJ1ZSk7XG4gKiAgIGV4cGVjdChlLm9yaWdpbmFsRXhjZXB0aW9uLm1lc3NhZ2UpLnRvRXF1YWwoXCJtZXNzYWdlXCIpO1xuICogICBleHBlY3QoZS5vcmlnaW5hbFN0YWNrKS50b0JlRGVmaW5lZCgpO1xuICogfVxuICogYGBgXG4gKi9cbmZ1bmN0aW9uIGluc3RhbnRpYXRpb25FcnJvcihpbmplY3Rvciwgb3JpZ2luYWxFeGNlcHRpb24sIG9yaWdpbmFsU3RhY2ssIGtleSkge1xuICAgIHJldHVybiBpbmplY3Rpb25FcnJvcihpbmplY3Rvciwga2V5LCBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICBjb25zdCBmaXJzdCA9IHN0cmluZ2lmeShrZXlzWzBdLnRva2VuKTtcbiAgICAgICAgcmV0dXJuIGAke29yaWdpbmFsRXhjZXB0aW9uLm1lc3NhZ2V9OiBFcnJvciBkdXJpbmcgaW5zdGFudGlhdGlvbiBvZiAke2ZpcnN0fSEke2NvbnN0cnVjdFJlc29sdmluZ1BhdGgoa2V5cyl9LmA7XG4gICAgfSwgb3JpZ2luYWxFeGNlcHRpb24pO1xufVxuLyoqXG4gKiBUaHJvd24gd2hlbiBhbiBvYmplY3Qgb3RoZXIgdGhlbiB7QGxpbmsgUHJvdmlkZXJ9IChvciBgVHlwZWApIGlzIHBhc3NlZCB0byB7QGxpbmsgSW5qZWN0b3J9XG4gKiBjcmVhdGlvbi5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBleHBlY3QoKCkgPT4gSW5qZWN0b3IucmVzb2x2ZUFuZENyZWF0ZShbXCJub3QgYSB0eXBlXCJdKSkudG9UaHJvd0Vycm9yKCk7XG4gKiBgYGBcbiAqL1xuZnVuY3Rpb24gaW52YWxpZFByb3ZpZGVyRXJyb3IocHJvdmlkZXIpIHtcbiAgICByZXR1cm4gRXJyb3IoYEludmFsaWQgcHJvdmlkZXIgLSBvbmx5IGluc3RhbmNlcyBvZiBQcm92aWRlciBhbmQgVHlwZSBhcmUgYWxsb3dlZCwgZ290OiAke3Byb3ZpZGVyfWApO1xufVxuLyoqXG4gKiBUaHJvd24gd2hlbiB0aGUgY2xhc3MgaGFzIG5vIGFubm90YXRpb24gaW5mb3JtYXRpb24uXG4gKlxuICogTGFjayBvZiBhbm5vdGF0aW9uIGluZm9ybWF0aW9uIHByZXZlbnRzIHRoZSB7QGxpbmsgSW5qZWN0b3J9IGZyb20gZGV0ZXJtaW5pbmcgd2hpY2ggZGVwZW5kZW5jaWVzXG4gKiBuZWVkIHRvIGJlIGluamVjdGVkIGludG8gdGhlIGNvbnN0cnVjdG9yLlxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKiAjIyMgRXhhbXBsZVxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNsYXNzIEEge1xuICogICBjb25zdHJ1Y3RvcihiKSB7fVxuICogfVxuICpcbiAqIGV4cGVjdCgoKSA9PiBJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFtBXSkpLnRvVGhyb3dFcnJvcigpO1xuICogYGBgXG4gKlxuICogVGhpcyBlcnJvciBpcyBhbHNvIHRocm93biB3aGVuIHRoZSBjbGFzcyBub3QgbWFya2VkIHdpdGgge0BsaW5rIEluamVjdGFibGV9IGhhcyBwYXJhbWV0ZXIgdHlwZXMuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogY2xhc3MgQiB7fVxuICpcbiAqIGNsYXNzIEEge1xuICogICBjb25zdHJ1Y3RvcihiOkIpIHt9IC8vIG5vIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwYXJhbWV0ZXIgdHlwZXMgb2YgQSBpcyBhdmFpbGFibGUgYXQgcnVudGltZS5cbiAqIH1cbiAqXG4gKiBleHBlY3QoKCkgPT4gSW5qZWN0b3IucmVzb2x2ZUFuZENyZWF0ZShbQSxCXSkpLnRvVGhyb3dFcnJvcigpO1xuICogYGBgXG4gKlxuICovXG5mdW5jdGlvbiBub0Fubm90YXRpb25FcnJvcih0eXBlT3JGdW5jLCBwYXJhbXMpIHtcbiAgICBjb25zdCBzaWduYXR1cmUgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwYXJhbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXIgPSBwYXJhbXNbaV07XG4gICAgICAgIGlmICghcGFyYW1ldGVyIHx8IHBhcmFtZXRlci5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgc2lnbmF0dXJlLnB1c2goJz8nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNpZ25hdHVyZS5wdXNoKHBhcmFtZXRlci5tYXAoc3RyaW5naWZ5KS5qb2luKCcgJykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBFcnJvcignQ2Fubm90IHJlc29sdmUgYWxsIHBhcmFtZXRlcnMgZm9yIFxcJycgKyBzdHJpbmdpZnkodHlwZU9yRnVuYykgKyAnXFwnKCcgK1xuICAgICAgICBzaWduYXR1cmUuam9pbignLCAnKSArICcpLiAnICtcbiAgICAgICAgJ01ha2Ugc3VyZSB0aGF0IGFsbCB0aGUgcGFyYW1ldGVycyBhcmUgZGVjb3JhdGVkIHdpdGggSW5qZWN0IG9yIGhhdmUgdmFsaWQgdHlwZSBhbm5vdGF0aW9ucyBhbmQgdGhhdCBcXCcnICtcbiAgICAgICAgc3RyaW5naWZ5KHR5cGVPckZ1bmMpICsgJ1xcJyBpcyBkZWNvcmF0ZWQgd2l0aCBJbmplY3RhYmxlLicpO1xufVxuLyoqXG4gKiBUaHJvd24gd2hlbiBnZXR0aW5nIGFuIG9iamVjdCBieSBpbmRleC5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjbGFzcyBBIHt9XG4gKlxuICogdmFyIGluamVjdG9yID0gSW5qZWN0b3IucmVzb2x2ZUFuZENyZWF0ZShbQV0pO1xuICpcbiAqIGV4cGVjdCgoKSA9PiBpbmplY3Rvci5nZXRBdCgxMDApKS50b1Rocm93RXJyb3IoKTtcbiAqIGBgYFxuICpcbiAqL1xuZnVuY3Rpb24gb3V0T2ZCb3VuZHNFcnJvcihpbmRleCkge1xuICAgIHJldHVybiBFcnJvcihgSW5kZXggJHtpbmRleH0gaXMgb3V0LW9mLWJvdW5kcy5gKTtcbn1cbi8vIFRPRE86IGFkZCBhIHdvcmtpbmcgZXhhbXBsZSBhZnRlciBhbHBoYTM4IGlzIHJlbGVhc2VkXG4vKipcbiAqIFRocm93biB3aGVuIGEgbXVsdGkgcHJvdmlkZXIgYW5kIGEgcmVndWxhciBwcm92aWRlciBhcmUgYm91bmQgdG8gdGhlIHNhbWUgdG9rZW4uXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqICMjIyBFeGFtcGxlXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogZXhwZWN0KCgpID0+IEluamVjdG9yLnJlc29sdmVBbmRDcmVhdGUoW1xuICogICB7IHByb3ZpZGU6IFwiU3RyaW5nc1wiLCB1c2VWYWx1ZTogXCJzdHJpbmcxXCIsIG11bHRpOiB0cnVlfSxcbiAqICAgeyBwcm92aWRlOiBcIlN0cmluZ3NcIiwgdXNlVmFsdWU6IFwic3RyaW5nMlwiLCBtdWx0aTogZmFsc2V9XG4gKiBdKSkudG9UaHJvd0Vycm9yKCk7XG4gKiBgYGBcbiAqL1xuZnVuY3Rpb24gbWl4aW5nTXVsdGlQcm92aWRlcnNXaXRoUmVndWxhclByb3ZpZGVyc0Vycm9yKHByb3ZpZGVyMSwgcHJvdmlkZXIyKSB7XG4gICAgcmV0dXJuIEVycm9yKGBDYW5ub3QgbWl4IG11bHRpIHByb3ZpZGVycyBhbmQgcmVndWxhciBwcm92aWRlcnMsIGdvdDogJHtwcm92aWRlcjF9ICR7cHJvdmlkZXIyfWApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQSB1bmlxdWUgb2JqZWN0IHVzZWQgZm9yIHJldHJpZXZpbmcgaXRlbXMgZnJvbSB0aGUge0BsaW5rIFJlZmxlY3RpdmVJbmplY3Rvcn0uXG4gKlxuICogS2V5cyBoYXZlOlxuICogLSBhIHN5c3RlbS13aWRlIHVuaXF1ZSBgaWRgLlxuICogLSBhIGB0b2tlbmAuXG4gKlxuICogYEtleWAgaXMgdXNlZCBpbnRlcm5hbGx5IGJ5IHtAbGluayBSZWZsZWN0aXZlSW5qZWN0b3J9IGJlY2F1c2UgaXRzIHN5c3RlbS13aWRlIHVuaXF1ZSBgaWRgIGFsbG93c1xuICogdGhlXG4gKiBpbmplY3RvciB0byBzdG9yZSBjcmVhdGVkIG9iamVjdHMgaW4gYSBtb3JlIGVmZmljaWVudCB3YXkuXG4gKlxuICogYEtleWAgc2hvdWxkIG5vdCBiZSBjcmVhdGVkIGRpcmVjdGx5LiB7QGxpbmsgUmVmbGVjdGl2ZUluamVjdG9yfSBjcmVhdGVzIGtleXMgYXV0b21hdGljYWxseSB3aGVuXG4gKiByZXNvbHZpbmdcbiAqIHByb3ZpZGVycy5cbiAqXG4gKiBAZGVwcmVjYXRlZCBObyByZXBsYWNlbWVudFxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBSZWZsZWN0aXZlS2V5IHtcbiAgICAvKipcbiAgICAgKiBQcml2YXRlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodG9rZW4sIGlkKSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rva2VuIG11c3QgYmUgZGVmaW5lZCEnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gc3RyaW5naWZ5KHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYSBgS2V5YCBmb3IgYSB0b2tlbi5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0KHRva2VuKSB7XG4gICAgICAgIHJldHVybiBfZ2xvYmFsS2V5UmVnaXN0cnkuZ2V0KHJlc29sdmVGb3J3YXJkUmVmKHRva2VuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHRoZSBudW1iZXIgb2Yga2V5cyByZWdpc3RlcmVkIGluIHRoZSBzeXN0ZW0uXG4gICAgICovXG4gICAgc3RhdGljIGdldCBudW1iZXJPZktleXMoKSB7XG4gICAgICAgIHJldHVybiBfZ2xvYmFsS2V5UmVnaXN0cnkubnVtYmVyT2ZLZXlzO1xuICAgIH1cbn1cbmNsYXNzIEtleVJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fYWxsS2V5cyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgZ2V0KHRva2VuKSB7XG4gICAgICAgIGlmICh0b2tlbiBpbnN0YW5jZW9mIFJlZmxlY3RpdmVLZXkpXG4gICAgICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICAgIGlmICh0aGlzLl9hbGxLZXlzLmhhcyh0b2tlbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hbGxLZXlzLmdldCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3S2V5ID0gbmV3IFJlZmxlY3RpdmVLZXkodG9rZW4sIFJlZmxlY3RpdmVLZXkubnVtYmVyT2ZLZXlzKTtcbiAgICAgICAgdGhpcy5fYWxsS2V5cy5zZXQodG9rZW4sIG5ld0tleSk7XG4gICAgICAgIHJldHVybiBuZXdLZXk7XG4gICAgfVxuICAgIGdldCBudW1iZXJPZktleXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbGxLZXlzLnNpemU7XG4gICAgfVxufVxuY29uc3QgX2dsb2JhbEtleVJlZ2lzdHJ5ID0gbmV3IEtleVJlZ2lzdHJ5KCk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBQcm92aWRlcyBhY2Nlc3MgdG8gcmVmbGVjdGlvbiBkYXRhIGFib3V0IHN5bWJvbHMuIFVzZWQgaW50ZXJuYWxseSBieSBBbmd1bGFyXG4gKiB0byBwb3dlciBkZXBlbmRlbmN5IGluamVjdGlvbiBhbmQgY29tcGlsYXRpb24uXG4gKi9cbmNsYXNzIFJlZmxlY3RvciB7XG4gICAgY29uc3RydWN0b3IocmVmbGVjdGlvbkNhcGFiaWxpdGllcykge1xuICAgICAgICB0aGlzLnJlZmxlY3Rpb25DYXBhYmlsaXRpZXMgPSByZWZsZWN0aW9uQ2FwYWJpbGl0aWVzO1xuICAgIH1cbiAgICB1cGRhdGVDYXBhYmlsaXRpZXMoY2Fwcykge1xuICAgICAgICB0aGlzLnJlZmxlY3Rpb25DYXBhYmlsaXRpZXMgPSBjYXBzO1xuICAgIH1cbiAgICBmYWN0b3J5KHR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbkNhcGFiaWxpdGllcy5mYWN0b3J5KHR5cGUpO1xuICAgIH1cbiAgICBwYXJhbWV0ZXJzKHR5cGVPckZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbkNhcGFiaWxpdGllcy5wYXJhbWV0ZXJzKHR5cGVPckZ1bmMpO1xuICAgIH1cbiAgICBhbm5vdGF0aW9ucyh0eXBlT3JGdW5jKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmxlY3Rpb25DYXBhYmlsaXRpZXMuYW5ub3RhdGlvbnModHlwZU9yRnVuYyk7XG4gICAgfVxuICAgIHByb3BNZXRhZGF0YSh0eXBlT3JGdW5jKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmxlY3Rpb25DYXBhYmlsaXRpZXMucHJvcE1ldGFkYXRhKHR5cGVPckZ1bmMpO1xuICAgIH1cbiAgICBoYXNMaWZlY3ljbGVIb29rKHR5cGUsIGxjUHJvcGVydHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbkNhcGFiaWxpdGllcy5oYXNMaWZlY3ljbGVIb29rKHR5cGUsIGxjUHJvcGVydHkpO1xuICAgIH1cbiAgICBnZXR0ZXIobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9uQ2FwYWJpbGl0aWVzLmdldHRlcihuYW1lKTtcbiAgICB9XG4gICAgc2V0dGVyKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbkNhcGFiaWxpdGllcy5zZXR0ZXIobmFtZSk7XG4gICAgfVxuICAgIG1ldGhvZChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmxlY3Rpb25DYXBhYmlsaXRpZXMubWV0aG9kKG5hbWUpO1xuICAgIH1cbiAgICBpbXBvcnRVcmkodHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9uQ2FwYWJpbGl0aWVzLmltcG9ydFVyaSh0eXBlKTtcbiAgICB9XG4gICAgcmVzb3VyY2VVcmkodHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9uQ2FwYWJpbGl0aWVzLnJlc291cmNlVXJpKHR5cGUpO1xuICAgIH1cbiAgICByZXNvbHZlSWRlbnRpZmllcihuYW1lLCBtb2R1bGVVcmwsIG1lbWJlcnMsIHJ1bnRpbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbkNhcGFiaWxpdGllcy5yZXNvbHZlSWRlbnRpZmllcihuYW1lLCBtb2R1bGVVcmwsIG1lbWJlcnMsIHJ1bnRpbWUpO1xuICAgIH1cbiAgICByZXNvbHZlRW51bShpZGVudGlmaWVyLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmxlY3Rpb25DYXBhYmlsaXRpZXMucmVzb2x2ZUVudW0oaWRlbnRpZmllciwgbmFtZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVGhlIHtAbGluayBSZWZsZWN0b3J9IHVzZWQgaW50ZXJuYWxseSBpbiBBbmd1bGFyIHRvIGFjY2VzcyBtZXRhZGF0YVxuICogYWJvdXQgc3ltYm9scy5cbiAqL1xuY29uc3QgcmVmbGVjdG9yID0gbmV3IFJlZmxlY3RvcihuZXcgUmVmbGVjdGlvbkNhcGFiaWxpdGllcygpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIGBEZXBlbmRlbmN5YCBpcyB1c2VkIGJ5IHRoZSBmcmFtZXdvcmsgdG8gZXh0ZW5kIERJLlxuICogVGhpcyBpcyBpbnRlcm5hbCB0byBBbmd1bGFyIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZGlyZWN0bHkuXG4gKi9cbmNsYXNzIFJlZmxlY3RpdmVEZXBlbmRlbmN5IHtcbiAgICBjb25zdHJ1Y3RvcihrZXksIG9wdGlvbmFsLCB2aXNpYmlsaXR5KSB7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gb3B0aW9uYWw7XG4gICAgICAgIHRoaXMudmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tS2V5KGtleSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlZmxlY3RpdmVEZXBlbmRlbmN5KGtleSwgZmFsc2UsIG51bGwpO1xuICAgIH1cbn1cbmNvbnN0IF9FTVBUWV9MSVNUID0gW107XG5jbGFzcyBSZXNvbHZlZFJlZmxlY3RpdmVQcm92aWRlcl8ge1xuICAgIGNvbnN0cnVjdG9yKGtleSwgcmVzb2x2ZWRGYWN0b3JpZXMsIG11bHRpUHJvdmlkZXIpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgIHRoaXMucmVzb2x2ZWRGYWN0b3JpZXMgPSByZXNvbHZlZEZhY3RvcmllcztcbiAgICAgICAgdGhpcy5tdWx0aVByb3ZpZGVyID0gbXVsdGlQcm92aWRlcjtcbiAgICAgICAgdGhpcy5yZXNvbHZlZEZhY3RvcnkgPSB0aGlzLnJlc29sdmVkRmFjdG9yaWVzWzBdO1xuICAgIH1cbn1cbi8qKlxuICogQW4gaW50ZXJuYWwgcmVzb2x2ZWQgcmVwcmVzZW50YXRpb24gb2YgYSBmYWN0b3J5IGZ1bmN0aW9uIGNyZWF0ZWQgYnkgcmVzb2x2aW5nIGBQcm92aWRlcmAuXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIFJlc29sdmVkUmVmbGVjdGl2ZUZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEZhY3RvcnkgZnVuY3Rpb24gd2hpY2ggY2FuIHJldHVybiBhbiBpbnN0YW5jZSBvZiBhbiBvYmplY3QgcmVwcmVzZW50ZWQgYnkgYSBrZXkuXG4gICAgICovXG4gICAgZmFjdG9yeSwgXG4gICAgLyoqXG4gICAgICogQXJndW1lbnRzIChkZXBlbmRlbmNpZXMpIHRvIHRoZSBgZmFjdG9yeWAgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZGVwZW5kZW5jaWVzKSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xuICAgIH1cbn1cbi8qKlxuICogUmVzb2x2ZSBhIHNpbmdsZSBwcm92aWRlci5cbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZVJlZmxlY3RpdmVGYWN0b3J5KHByb3ZpZGVyKSB7XG4gICAgbGV0IGZhY3RvcnlGbjtcbiAgICBsZXQgcmVzb2x2ZWREZXBzO1xuICAgIGlmIChwcm92aWRlci51c2VDbGFzcykge1xuICAgICAgICBjb25zdCB1c2VDbGFzcyA9IHJlc29sdmVGb3J3YXJkUmVmKHByb3ZpZGVyLnVzZUNsYXNzKTtcbiAgICAgICAgZmFjdG9yeUZuID0gcmVmbGVjdG9yLmZhY3RvcnkodXNlQ2xhc3MpO1xuICAgICAgICByZXNvbHZlZERlcHMgPSBfZGVwZW5kZW5jaWVzRm9yKHVzZUNsYXNzKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocHJvdmlkZXIudXNlRXhpc3RpbmcpIHtcbiAgICAgICAgZmFjdG9yeUZuID0gKGFsaWFzSW5zdGFuY2UpID0+IGFsaWFzSW5zdGFuY2U7XG4gICAgICAgIHJlc29sdmVkRGVwcyA9IFtSZWZsZWN0aXZlRGVwZW5kZW5jeS5mcm9tS2V5KFJlZmxlY3RpdmVLZXkuZ2V0KHByb3ZpZGVyLnVzZUV4aXN0aW5nKSldO1xuICAgIH1cbiAgICBlbHNlIGlmIChwcm92aWRlci51c2VGYWN0b3J5KSB7XG4gICAgICAgIGZhY3RvcnlGbiA9IHByb3ZpZGVyLnVzZUZhY3Rvcnk7XG4gICAgICAgIHJlc29sdmVkRGVwcyA9IGNvbnN0cnVjdERlcGVuZGVuY2llcyhwcm92aWRlci51c2VGYWN0b3J5LCBwcm92aWRlci5kZXBzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGZhY3RvcnlGbiA9ICgpID0+IHByb3ZpZGVyLnVzZVZhbHVlO1xuICAgICAgICByZXNvbHZlZERlcHMgPSBfRU1QVFlfTElTVDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZXNvbHZlZFJlZmxlY3RpdmVGYWN0b3J5KGZhY3RvcnlGbiwgcmVzb2x2ZWREZXBzKTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGBQcm92aWRlcmAgaW50byBgUmVzb2x2ZWRQcm92aWRlcmAuXG4gKlxuICogYEluamVjdG9yYCBpbnRlcm5hbGx5IG9ubHkgdXNlcyBgUmVzb2x2ZWRQcm92aWRlcmAsIGBQcm92aWRlcmAgY29udGFpbnMgY29udmVuaWVuY2UgcHJvdmlkZXJcbiAqIHN5bnRheC5cbiAqL1xuZnVuY3Rpb24gcmVzb2x2ZVJlZmxlY3RpdmVQcm92aWRlcihwcm92aWRlcikge1xuICAgIHJldHVybiBuZXcgUmVzb2x2ZWRSZWZsZWN0aXZlUHJvdmlkZXJfKFJlZmxlY3RpdmVLZXkuZ2V0KHByb3ZpZGVyLnByb3ZpZGUpLCBbcmVzb2x2ZVJlZmxlY3RpdmVGYWN0b3J5KHByb3ZpZGVyKV0sIHByb3ZpZGVyLm11bHRpIHx8IGZhbHNlKTtcbn1cbi8qKlxuICogUmVzb2x2ZSBhIGxpc3Qgb2YgUHJvdmlkZXJzLlxuICovXG5mdW5jdGlvbiByZXNvbHZlUmVmbGVjdGl2ZVByb3ZpZGVycyhwcm92aWRlcnMpIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gX25vcm1hbGl6ZVByb3ZpZGVycyhwcm92aWRlcnMsIFtdKTtcbiAgICBjb25zdCByZXNvbHZlZCA9IG5vcm1hbGl6ZWQubWFwKHJlc29sdmVSZWZsZWN0aXZlUHJvdmlkZXIpO1xuICAgIGNvbnN0IHJlc29sdmVkUHJvdmlkZXJNYXAgPSBtZXJnZVJlc29sdmVkUmVmbGVjdGl2ZVByb3ZpZGVycyhyZXNvbHZlZCwgbmV3IE1hcCgpKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShyZXNvbHZlZFByb3ZpZGVyTWFwLnZhbHVlcygpKTtcbn1cbi8qKlxuICogTWVyZ2VzIGEgbGlzdCBvZiBSZXNvbHZlZFByb3ZpZGVycyBpbnRvIGEgbGlzdCB3aGVyZSBlYWNoIGtleSBpcyBjb250YWluZWQgZXhhY3RseSBvbmNlIGFuZFxuICogbXVsdGkgcHJvdmlkZXJzIGhhdmUgYmVlbiBtZXJnZWQuXG4gKi9cbmZ1bmN0aW9uIG1lcmdlUmVzb2x2ZWRSZWZsZWN0aXZlUHJvdmlkZXJzKHByb3ZpZGVycywgbm9ybWFsaXplZFByb3ZpZGVyc01hcCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvdmlkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gcHJvdmlkZXJzW2ldO1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IG5vcm1hbGl6ZWRQcm92aWRlcnNNYXAuZ2V0KHByb3ZpZGVyLmtleS5pZCk7XG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgaWYgKHByb3ZpZGVyLm11bHRpUHJvdmlkZXIgIT09IGV4aXN0aW5nLm11bHRpUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBtaXhpbmdNdWx0aVByb3ZpZGVyc1dpdGhSZWd1bGFyUHJvdmlkZXJzRXJyb3IoZXhpc3RpbmcsIHByb3ZpZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm92aWRlci5tdWx0aVByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwcm92aWRlci5yZXNvbHZlZEZhY3Rvcmllcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5yZXNvbHZlZEZhY3Rvcmllcy5wdXNoKHByb3ZpZGVyLnJlc29sdmVkRmFjdG9yaWVzW2pdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkUHJvdmlkZXJzTWFwLnNldChwcm92aWRlci5rZXkuaWQsIHByb3ZpZGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCByZXNvbHZlZFByb3ZpZGVyO1xuICAgICAgICAgICAgaWYgKHByb3ZpZGVyLm11bHRpUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlZFByb3ZpZGVyID0gbmV3IFJlc29sdmVkUmVmbGVjdGl2ZVByb3ZpZGVyXyhwcm92aWRlci5rZXksIHByb3ZpZGVyLnJlc29sdmVkRmFjdG9yaWVzLnNsaWNlKCksIHByb3ZpZGVyLm11bHRpUHJvdmlkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZWRQcm92aWRlciA9IHByb3ZpZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm9ybWFsaXplZFByb3ZpZGVyc01hcC5zZXQocHJvdmlkZXIua2V5LmlkLCByZXNvbHZlZFByb3ZpZGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9ybWFsaXplZFByb3ZpZGVyc01hcDtcbn1cbmZ1bmN0aW9uIF9ub3JtYWxpemVQcm92aWRlcnMocHJvdmlkZXJzLCByZXMpIHtcbiAgICBwcm92aWRlcnMuZm9yRWFjaChiID0+IHtcbiAgICAgICAgaWYgKGIgaW5zdGFuY2VvZiBUeXBlKSB7XG4gICAgICAgICAgICByZXMucHVzaCh7IHByb3ZpZGU6IGIsIHVzZUNsYXNzOiBiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGIgJiYgdHlwZW9mIGIgPT0gJ29iamVjdCcgJiYgYi5wcm92aWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlcy5wdXNoKGIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgICAgICAgIF9ub3JtYWxpemVQcm92aWRlcnMoYiwgcmVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IGludmFsaWRQcm92aWRlckVycm9yKGIpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlcztcbn1cbmZ1bmN0aW9uIGNvbnN0cnVjdERlcGVuZGVuY2llcyh0eXBlT3JGdW5jLCBkZXBlbmRlbmNpZXMpIHtcbiAgICBpZiAoIWRlcGVuZGVuY2llcykge1xuICAgICAgICByZXR1cm4gX2RlcGVuZGVuY2llc0Zvcih0eXBlT3JGdW5jKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IGRlcGVuZGVuY2llcy5tYXAodCA9PiBbdF0pO1xuICAgICAgICByZXR1cm4gZGVwZW5kZW5jaWVzLm1hcCh0ID0+IF9leHRyYWN0VG9rZW4odHlwZU9yRnVuYywgdCwgcGFyYW1zKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gX2RlcGVuZGVuY2llc0Zvcih0eXBlT3JGdW5jKSB7XG4gICAgY29uc3QgcGFyYW1zID0gcmVmbGVjdG9yLnBhcmFtZXRlcnModHlwZU9yRnVuYyk7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiBbXTtcbiAgICBpZiAocGFyYW1zLnNvbWUocCA9PiBwID09IG51bGwpKSB7XG4gICAgICAgIHRocm93IG5vQW5ub3RhdGlvbkVycm9yKHR5cGVPckZ1bmMsIHBhcmFtcyk7XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXMubWFwKHAgPT4gX2V4dHJhY3RUb2tlbih0eXBlT3JGdW5jLCBwLCBwYXJhbXMpKTtcbn1cbmZ1bmN0aW9uIF9leHRyYWN0VG9rZW4odHlwZU9yRnVuYywgbWV0YWRhdGEsIHBhcmFtcykge1xuICAgIGxldCB0b2tlbiA9IG51bGw7XG4gICAgbGV0IG9wdGlvbmFsID0gZmFsc2U7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KG1ldGFkYXRhKSkge1xuICAgICAgICBpZiAobWV0YWRhdGEgaW5zdGFuY2VvZiBJbmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBfY3JlYXRlRGVwZW5kZW5jeShtZXRhZGF0YS50b2tlbiwgb3B0aW9uYWwsIG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9jcmVhdGVEZXBlbmRlbmN5KG1ldGFkYXRhLCBvcHRpb25hbCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IHZpc2liaWxpdHkgPSBudWxsO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWV0YWRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgcGFyYW1NZXRhZGF0YSA9IG1ldGFkYXRhW2ldO1xuICAgICAgICBpZiAocGFyYW1NZXRhZGF0YSBpbnN0YW5jZW9mIFR5cGUpIHtcbiAgICAgICAgICAgIHRva2VuID0gcGFyYW1NZXRhZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJhbU1ldGFkYXRhIGluc3RhbmNlb2YgSW5qZWN0KSB7XG4gICAgICAgICAgICB0b2tlbiA9IHBhcmFtTWV0YWRhdGEudG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyYW1NZXRhZGF0YSBpbnN0YW5jZW9mIE9wdGlvbmFsKSB7XG4gICAgICAgICAgICBvcHRpb25hbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyYW1NZXRhZGF0YSBpbnN0YW5jZW9mIFNlbGYgfHwgcGFyYW1NZXRhZGF0YSBpbnN0YW5jZW9mIFNraXBTZWxmKSB7XG4gICAgICAgICAgICB2aXNpYmlsaXR5ID0gcGFyYW1NZXRhZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJhbU1ldGFkYXRhIGluc3RhbmNlb2YgSW5qZWN0aW9uVG9rZW4pIHtcbiAgICAgICAgICAgIHRva2VuID0gcGFyYW1NZXRhZGF0YTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2tlbiA9IHJlc29sdmVGb3J3YXJkUmVmKHRva2VuKTtcbiAgICBpZiAodG9rZW4gIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gX2NyZWF0ZURlcGVuZGVuY3kodG9rZW4sIG9wdGlvbmFsLCB2aXNpYmlsaXR5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5vQW5ub3RhdGlvbkVycm9yKHR5cGVPckZ1bmMsIHBhcmFtcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gX2NyZWF0ZURlcGVuZGVuY3kodG9rZW4sIG9wdGlvbmFsLCB2aXNpYmlsaXR5KSB7XG4gICAgcmV0dXJuIG5ldyBSZWZsZWN0aXZlRGVwZW5kZW5jeShSZWZsZWN0aXZlS2V5LmdldCh0b2tlbiksIG9wdGlvbmFsLCB2aXNpYmlsaXR5KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vLyBUaHJlc2hvbGQgZm9yIHRoZSBkeW5hbWljIHZlcnNpb25cbmNvbnN0IFVOREVGSU5FRCA9IHt9O1xuLyoqXG4gKiBBIFJlZmxlY3RpdmVEZXBlbmRlbmN5IGluamVjdGlvbiBjb250YWluZXIgdXNlZCBmb3IgaW5zdGFudGlhdGluZyBvYmplY3RzIGFuZCByZXNvbHZpbmdcbiAqIGRlcGVuZGVuY2llcy5cbiAqXG4gKiBBbiBgSW5qZWN0b3JgIGlzIGEgcmVwbGFjZW1lbnQgZm9yIGEgYG5ld2Agb3BlcmF0b3IsIHdoaWNoIGNhbiBhdXRvbWF0aWNhbGx5IHJlc29sdmUgdGhlXG4gKiBjb25zdHJ1Y3RvciBkZXBlbmRlbmNpZXMuXG4gKlxuICogSW4gdHlwaWNhbCB1c2UsIGFwcGxpY2F0aW9uIGNvZGUgYXNrcyBmb3IgdGhlIGRlcGVuZGVuY2llcyBpbiB0aGUgY29uc3RydWN0b3IgYW5kIHRoZXkgYXJlXG4gKiByZXNvbHZlZCBieSB0aGUgYEluamVjdG9yYC5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogIyMjIEV4YW1wbGVcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgY3JlYXRlcyBhbiBgSW5qZWN0b3JgIGNvbmZpZ3VyZWQgdG8gY3JlYXRlIGBFbmdpbmVgIGFuZCBgQ2FyYC5cbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBASW5qZWN0YWJsZSgpXG4gKiBjbGFzcyBFbmdpbmUge1xuICogfVxuICpcbiAqIEBJbmplY3RhYmxlKClcbiAqIGNsYXNzIENhciB7XG4gKiAgIGNvbnN0cnVjdG9yKHB1YmxpYyBlbmdpbmU6RW5naW5lKSB7fVxuICogfVxuICpcbiAqIHZhciBpbmplY3RvciA9IFJlZmxlY3RpdmVJbmplY3Rvci5yZXNvbHZlQW5kQ3JlYXRlKFtDYXIsIEVuZ2luZV0pO1xuICogdmFyIGNhciA9IGluamVjdG9yLmdldChDYXIpO1xuICogZXhwZWN0KGNhciBpbnN0YW5jZW9mIENhcikudG9CZSh0cnVlKTtcbiAqIGV4cGVjdChjYXIuZW5naW5lIGluc3RhbmNlb2YgRW5naW5lKS50b0JlKHRydWUpO1xuICogYGBgXG4gKlxuICogTm90aWNlLCB3ZSBkb24ndCB1c2UgdGhlIGBuZXdgIG9wZXJhdG9yIGJlY2F1c2Ugd2UgZXhwbGljaXRseSB3YW50IHRvIGhhdmUgdGhlIGBJbmplY3RvcmBcbiAqIHJlc29sdmUgYWxsIG9mIHRoZSBvYmplY3QncyBkZXBlbmRlbmNpZXMgYXV0b21hdGljYWxseS5cbiAqXG4gKiBUT0RPOiBkZWxldGUgaW4gdjE0LlxuICpcbiAqIEBkZXByZWNhdGVkIGZyb20gdjUgLSBzbG93IGFuZCBicmluZ3MgaW4gYSBsb3Qgb2YgY29kZSwgVXNlIGBJbmplY3Rvci5jcmVhdGVgIGluc3RlYWQuXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIFJlZmxlY3RpdmVJbmplY3RvciB7XG4gICAgLyoqXG4gICAgICogVHVybnMgYW4gYXJyYXkgb2YgcHJvdmlkZXIgZGVmaW5pdGlvbnMgaW50byBhbiBhcnJheSBvZiByZXNvbHZlZCBwcm92aWRlcnMuXG4gICAgICpcbiAgICAgKiBBIHJlc29sdXRpb24gaXMgYSBwcm9jZXNzIG9mIGZsYXR0ZW5pbmcgbXVsdGlwbGUgbmVzdGVkIGFycmF5cyBhbmQgY29udmVydGluZyBpbmRpdmlkdWFsXG4gICAgICogcHJvdmlkZXJzIGludG8gYW4gYXJyYXkgb2YgYFJlc29sdmVkUmVmbGVjdGl2ZVByb3ZpZGVyYHMuXG4gICAgICpcbiAgICAgKiBAdXNhZ2VOb3Rlc1xuICAgICAqICMjIyBFeGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogQEluamVjdGFibGUoKVxuICAgICAqIGNsYXNzIEVuZ2luZSB7XG4gICAgICogfVxuICAgICAqXG4gICAgICogQEluamVjdGFibGUoKVxuICAgICAqIGNsYXNzIENhciB7XG4gICAgICogICBjb25zdHJ1Y3RvcihwdWJsaWMgZW5naW5lOkVuZ2luZSkge31cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiB2YXIgcHJvdmlkZXJzID0gUmVmbGVjdGl2ZUluamVjdG9yLnJlc29sdmUoW0NhciwgW1tFbmdpbmVdXV0pO1xuICAgICAqXG4gICAgICogZXhwZWN0KHByb3ZpZGVycy5sZW5ndGgpLnRvRXF1YWwoMik7XG4gICAgICpcbiAgICAgKiBleHBlY3QocHJvdmlkZXJzWzBdIGluc3RhbmNlb2YgUmVzb2x2ZWRSZWZsZWN0aXZlUHJvdmlkZXIpLnRvQmUodHJ1ZSk7XG4gICAgICogZXhwZWN0KHByb3ZpZGVyc1swXS5rZXkuZGlzcGxheU5hbWUpLnRvQmUoXCJDYXJcIik7XG4gICAgICogZXhwZWN0KHByb3ZpZGVyc1swXS5kZXBlbmRlbmNpZXMubGVuZ3RoKS50b0VxdWFsKDEpO1xuICAgICAqIGV4cGVjdChwcm92aWRlcnNbMF0uZmFjdG9yeSkudG9CZURlZmluZWQoKTtcbiAgICAgKlxuICAgICAqIGV4cGVjdChwcm92aWRlcnNbMV0ua2V5LmRpc3BsYXlOYW1lKS50b0JlKFwiRW5naW5lXCIpO1xuICAgICAqIH0pO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICovXG4gICAgc3RhdGljIHJlc29sdmUocHJvdmlkZXJzKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlUmVmbGVjdGl2ZVByb3ZpZGVycyhwcm92aWRlcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNvbHZlcyBhbiBhcnJheSBvZiBwcm92aWRlcnMgYW5kIGNyZWF0ZXMgYW4gaW5qZWN0b3IgZnJvbSB0aG9zZSBwcm92aWRlcnMuXG4gICAgICpcbiAgICAgKiBUaGUgcGFzc2VkLWluIHByb3ZpZGVycyBjYW4gYmUgYW4gYXJyYXkgb2YgYFR5cGVgLCBgUHJvdmlkZXJgLFxuICAgICAqIG9yIGEgcmVjdXJzaXZlIGFycmF5IG9mIG1vcmUgcHJvdmlkZXJzLlxuICAgICAqXG4gICAgICogQHVzYWdlTm90ZXNcbiAgICAgKiAjIyMgRXhhbXBsZVxuICAgICAqXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIEBJbmplY3RhYmxlKClcbiAgICAgKiBjbGFzcyBFbmdpbmUge1xuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEBJbmplY3RhYmxlKClcbiAgICAgKiBjbGFzcyBDYXIge1xuICAgICAqICAgY29uc3RydWN0b3IocHVibGljIGVuZ2luZTpFbmdpbmUpIHt9XG4gICAgICogfVxuICAgICAqXG4gICAgICogdmFyIGluamVjdG9yID0gUmVmbGVjdGl2ZUluamVjdG9yLnJlc29sdmVBbmRDcmVhdGUoW0NhciwgRW5naW5lXSk7XG4gICAgICogZXhwZWN0KGluamVjdG9yLmdldChDYXIpIGluc3RhbmNlb2YgQ2FyKS50b0JlKHRydWUpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyByZXNvbHZlQW5kQ3JlYXRlKHByb3ZpZGVycywgcGFyZW50KSB7XG4gICAgICAgIGNvbnN0IFJlc29sdmVkUmVmbGVjdGl2ZVByb3ZpZGVycyA9IFJlZmxlY3RpdmVJbmplY3Rvci5yZXNvbHZlKHByb3ZpZGVycyk7XG4gICAgICAgIHJldHVybiBSZWZsZWN0aXZlSW5qZWN0b3IuZnJvbVJlc29sdmVkUHJvdmlkZXJzKFJlc29sdmVkUmVmbGVjdGl2ZVByb3ZpZGVycywgcGFyZW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbmplY3RvciBmcm9tIHByZXZpb3VzbHkgcmVzb2x2ZWQgcHJvdmlkZXJzLlxuICAgICAqXG4gICAgICogVGhpcyBBUEkgaXMgdGhlIHJlY29tbWVuZGVkIHdheSB0byBjb25zdHJ1Y3QgaW5qZWN0b3JzIGluIHBlcmZvcm1hbmNlLXNlbnNpdGl2ZSBwYXJ0cy5cbiAgICAgKlxuICAgICAqIEB1c2FnZU5vdGVzXG4gICAgICogIyMjIEV4YW1wbGVcbiAgICAgKlxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBASW5qZWN0YWJsZSgpXG4gICAgICogY2xhc3MgRW5naW5lIHtcbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBASW5qZWN0YWJsZSgpXG4gICAgICogY2xhc3MgQ2FyIHtcbiAgICAgKiAgIGNvbnN0cnVjdG9yKHB1YmxpYyBlbmdpbmU6RW5naW5lKSB7fVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqIHZhciBwcm92aWRlcnMgPSBSZWZsZWN0aXZlSW5qZWN0b3IucmVzb2x2ZShbQ2FyLCBFbmdpbmVdKTtcbiAgICAgKiB2YXIgaW5qZWN0b3IgPSBSZWZsZWN0aXZlSW5qZWN0b3IuZnJvbVJlc29sdmVkUHJvdmlkZXJzKHByb3ZpZGVycyk7XG4gICAgICogZXhwZWN0KGluamVjdG9yLmdldChDYXIpIGluc3RhbmNlb2YgQ2FyKS50b0JlKHRydWUpO1xuICAgICAqIGBgYFxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tUmVzb2x2ZWRQcm92aWRlcnMocHJvdmlkZXJzLCBwYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWZsZWN0aXZlSW5qZWN0b3JfKHByb3ZpZGVycywgcGFyZW50KTtcbiAgICB9XG59XG5jbGFzcyBSZWZsZWN0aXZlSW5qZWN0b3JfIHtcbiAgICAvKipcbiAgICAgKiBQcml2YXRlXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoX3Byb3ZpZGVycywgX3BhcmVudCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX2NvbnN0cnVjdGlvbkNvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLl9wcm92aWRlcnMgPSBfcHJvdmlkZXJzO1xuICAgICAgICB0aGlzLnBhcmVudCA9IF9wYXJlbnQgfHwgbnVsbDtcbiAgICAgICAgY29uc3QgbGVuID0gX3Byb3ZpZGVycy5sZW5ndGg7XG4gICAgICAgIHRoaXMua2V5SWRzID0gW107XG4gICAgICAgIHRoaXMub2JqcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmtleUlkc1tpXSA9IF9wcm92aWRlcnNbaV0ua2V5LmlkO1xuICAgICAgICAgICAgdGhpcy5vYmpzW2ldID0gVU5ERUZJTkVEO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCh0b2tlbiwgbm90Rm91bmRWYWx1ZSA9IFRIUk9XX0lGX05PVF9GT1VORCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0QnlLZXkoUmVmbGVjdGl2ZUtleS5nZXQodG9rZW4pLCBudWxsLCBub3RGb3VuZFZhbHVlKTtcbiAgICB9XG4gICAgcmVzb2x2ZUFuZENyZWF0ZUNoaWxkKHByb3ZpZGVycykge1xuICAgICAgICBjb25zdCBSZXNvbHZlZFJlZmxlY3RpdmVQcm92aWRlcnMgPSBSZWZsZWN0aXZlSW5qZWN0b3IucmVzb2x2ZShwcm92aWRlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVDaGlsZEZyb21SZXNvbHZlZChSZXNvbHZlZFJlZmxlY3RpdmVQcm92aWRlcnMpO1xuICAgIH1cbiAgICBjcmVhdGVDaGlsZEZyb21SZXNvbHZlZChwcm92aWRlcnMpIHtcbiAgICAgICAgY29uc3QgaW5qID0gbmV3IFJlZmxlY3RpdmVJbmplY3Rvcl8ocHJvdmlkZXJzKTtcbiAgICAgICAgaW5qLnBhcmVudCA9IHRoaXM7XG4gICAgICAgIHJldHVybiBpbmo7XG4gICAgfVxuICAgIHJlc29sdmVBbmRJbnN0YW50aWF0ZShwcm92aWRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW50aWF0ZVJlc29sdmVkKFJlZmxlY3RpdmVJbmplY3Rvci5yZXNvbHZlKFtwcm92aWRlcl0pWzBdKTtcbiAgICB9XG4gICAgaW5zdGFudGlhdGVSZXNvbHZlZChwcm92aWRlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5zdGFudGlhdGVQcm92aWRlcihwcm92aWRlcik7XG4gICAgfVxuICAgIGdldFByb3ZpZGVyQXRJbmRleChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuX3Byb3ZpZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG91dE9mQm91bmRzRXJyb3IoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm92aWRlcnNbaW5kZXhdO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX25ldyhwcm92aWRlcikge1xuICAgICAgICBpZiAodGhpcy5fY29uc3RydWN0aW9uQ291bnRlcisrID4gdGhpcy5fZ2V0TWF4TnVtYmVyT2ZPYmplY3RzKCkpIHtcbiAgICAgICAgICAgIHRocm93IGN5Y2xpY0RlcGVuZGVuY3lFcnJvcih0aGlzLCBwcm92aWRlci5rZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW50aWF0ZVByb3ZpZGVyKHByb3ZpZGVyKTtcbiAgICB9XG4gICAgX2dldE1heE51bWJlck9mT2JqZWN0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Jqcy5sZW5ndGg7XG4gICAgfVxuICAgIF9pbnN0YW50aWF0ZVByb3ZpZGVyKHByb3ZpZGVyKSB7XG4gICAgICAgIGlmIChwcm92aWRlci5tdWx0aVByb3ZpZGVyKSB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvdmlkZXIucmVzb2x2ZWRGYWN0b3JpZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICByZXNbaV0gPSB0aGlzLl9pbnN0YW50aWF0ZShwcm92aWRlciwgcHJvdmlkZXIucmVzb2x2ZWRGYWN0b3JpZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW50aWF0ZShwcm92aWRlciwgcHJvdmlkZXIucmVzb2x2ZWRGYWN0b3JpZXNbMF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9pbnN0YW50aWF0ZShwcm92aWRlciwgUmVzb2x2ZWRSZWZsZWN0aXZlRmFjdG9yeSkge1xuICAgICAgICBjb25zdCBmYWN0b3J5ID0gUmVzb2x2ZWRSZWZsZWN0aXZlRmFjdG9yeS5mYWN0b3J5O1xuICAgICAgICBsZXQgZGVwcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlcHMgPVxuICAgICAgICAgICAgICAgIFJlc29sdmVkUmVmbGVjdGl2ZUZhY3RvcnkuZGVwZW5kZW5jaWVzLm1hcChkZXAgPT4gdGhpcy5fZ2V0QnlSZWZsZWN0aXZlRGVwZW5kZW5jeShkZXApKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUuYWRkS2V5KSB7XG4gICAgICAgICAgICAgICAgZS5hZGRLZXkodGhpcywgcHJvdmlkZXIua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9iajtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG9iaiA9IGZhY3RvcnkoLi4uZGVwcyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IGluc3RhbnRpYXRpb25FcnJvcih0aGlzLCBlLCBlLnN0YWNrLCBwcm92aWRlci5rZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIF9nZXRCeVJlZmxlY3RpdmVEZXBlbmRlbmN5KGRlcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0QnlLZXkoZGVwLmtleSwgZGVwLnZpc2liaWxpdHksIGRlcC5vcHRpb25hbCA/IG51bGwgOiBUSFJPV19JRl9OT1RfRk9VTkQpO1xuICAgIH1cbiAgICBfZ2V0QnlLZXkoa2V5LCB2aXNpYmlsaXR5LCBub3RGb3VuZFZhbHVlKSB7XG4gICAgICAgIGlmIChrZXkgPT09IFJlZmxlY3RpdmVJbmplY3Rvcl8uSU5KRUNUT1JfS0VZKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAodmlzaWJpbGl0eSBpbnN0YW5jZW9mIFNlbGYpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRCeUtleVNlbGYoa2V5LCBub3RGb3VuZFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRCeUtleURlZmF1bHQoa2V5LCBub3RGb3VuZFZhbHVlLCB2aXNpYmlsaXR5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0T2JqQnlLZXlJZChrZXlJZCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMua2V5SWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5rZXlJZHNbaV0gPT09IGtleUlkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub2Jqc1tpXSA9PT0gVU5ERUZJTkVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2Jqc1tpXSA9IHRoaXMuX25ldyh0aGlzLl9wcm92aWRlcnNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vYmpzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBVTkRFRklORUQ7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfdGhyb3dPck51bGwoa2V5LCBub3RGb3VuZFZhbHVlKSB7XG4gICAgICAgIGlmIChub3RGb3VuZFZhbHVlICE9PSBUSFJPV19JRl9OT1RfRk9VTkQpIHtcbiAgICAgICAgICAgIHJldHVybiBub3RGb3VuZFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbm9Qcm92aWRlckVycm9yKHRoaXMsIGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9nZXRCeUtleVNlbGYoa2V5LCBub3RGb3VuZFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMuX2dldE9iakJ5S2V5SWQoa2V5LmlkKTtcbiAgICAgICAgcmV0dXJuIChvYmogIT09IFVOREVGSU5FRCkgPyBvYmogOiB0aGlzLl90aHJvd09yTnVsbChrZXksIG5vdEZvdW5kVmFsdWUpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2dldEJ5S2V5RGVmYXVsdChrZXksIG5vdEZvdW5kVmFsdWUsIHZpc2liaWxpdHkpIHtcbiAgICAgICAgbGV0IGluajtcbiAgICAgICAgaWYgKHZpc2liaWxpdHkgaW5zdGFuY2VvZiBTa2lwU2VsZikge1xuICAgICAgICAgICAgaW5qID0gdGhpcy5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbmogPSB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChpbmogaW5zdGFuY2VvZiBSZWZsZWN0aXZlSW5qZWN0b3JfKSB7XG4gICAgICAgICAgICBjb25zdCBpbmpfID0gaW5qO1xuICAgICAgICAgICAgY29uc3Qgb2JqID0gaW5qXy5fZ2V0T2JqQnlLZXlJZChrZXkuaWQpO1xuICAgICAgICAgICAgaWYgKG9iaiAhPT0gVU5ERUZJTkVEKVxuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICBpbmogPSBpbmpfLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5qICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5qLmdldChrZXkudG9rZW4sIG5vdEZvdW5kVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Rocm93T3JOdWxsKGtleSwgbm90Rm91bmRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc3BsYXlOYW1lKCkge1xuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSBfbWFwUHJvdmlkZXJzKHRoaXMsIChiKSA9PiAnIFwiJyArIGIua2V5LmRpc3BsYXlOYW1lICsgJ1wiICcpXG4gICAgICAgICAgICAuam9pbignLCAnKTtcbiAgICAgICAgcmV0dXJuIGBSZWZsZWN0aXZlSW5qZWN0b3IocHJvdmlkZXJzOiBbJHtwcm92aWRlcnN9XSlgO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheU5hbWU7XG4gICAgfVxufVxuUmVmbGVjdGl2ZUluamVjdG9yXy5JTkpFQ1RPUl9LRVkgPSAoIC8qIEBfX1BVUkVfXyAqL1JlZmxlY3RpdmVLZXkuZ2V0KEluamVjdG9yKSk7XG5mdW5jdGlvbiBfbWFwUHJvdmlkZXJzKGluamVjdG9yLCBmbikge1xuICAgIGNvbnN0IHJlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5qZWN0b3IuX3Byb3ZpZGVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICByZXNbaV0gPSBmbihpbmplY3Rvci5nZXRQcm92aWRlckF0SW5kZXgoaSkpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gybXJtWRpcmVjdGl2ZUluamVjdCh0b2tlbiwgZmxhZ3MgPSBJbmplY3RGbGFncy5EZWZhdWx0KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIC8vIEZhbGwgYmFjayB0byBpbmplY3QoKSBpZiB2aWV3IGhhc24ndCBiZWVuIGNyZWF0ZWQuIFRoaXMgc2l0dWF0aW9uIGNhbiBoYXBwZW4gaW4gdGVzdHNcbiAgICAvLyBpZiBpbmplY3QgdXRpbGl0aWVzIGFyZSB1c2VkIGJlZm9yZSBib290c3RyYXBwaW5nLlxuICAgIGlmIChsVmlldyA9PT0gbnVsbCkge1xuICAgICAgICAvLyBWZXJpZnkgdGhhdCB3ZSB3aWxsIG5vdCBnZXQgaW50byBpbmZpbml0ZSBsb29wLlxuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0SW5qZWN0SW1wbGVtZW50YXRpb25Ob3RFcXVhbCjJtcm1ZGlyZWN0aXZlSW5qZWN0KTtcbiAgICAgICAgcmV0dXJuIMm1ybVpbmplY3QodG9rZW4sIGZsYWdzKTtcbiAgICB9XG4gICAgY29uc3QgdE5vZGUgPSBnZXRDdXJyZW50VE5vZGUoKTtcbiAgICByZXR1cm4gZ2V0T3JDcmVhdGVJbmplY3RhYmxlKHROb2RlLCBsVmlldywgcmVzb2x2ZUZvcndhcmRSZWYodG9rZW4pLCBmbGFncyk7XG59XG4vKipcbiAqIFRocm93cyBhbiBlcnJvciBpbmRpY2F0aW5nIHRoYXQgYSBmYWN0b3J5IGZ1bmN0aW9uIGNvdWxkIG5vdCBiZSBnZW5lcmF0ZWQgYnkgdGhlIGNvbXBpbGVyIGZvciBhXG4gKiBwYXJ0aWN1bGFyIGNsYXNzLlxuICpcbiAqIFRoaXMgaW5zdHJ1Y3Rpb24gYWxsb3dzIHRoZSBhY3R1YWwgZXJyb3IgbWVzc2FnZSB0byBiZSBvcHRpbWl6ZWQgYXdheSB3aGVuIG5nRGV2TW9kZSBpcyB0dXJuZWRcbiAqIG9mZiwgc2F2aW5nIGJ5dGVzIG9mIGdlbmVyYXRlZCBjb2RlIHdoaWxlIHN0aWxsIHByb3ZpZGluZyBhIGdvb2QgZXhwZXJpZW5jZSBpbiBkZXYgbW9kZS5cbiAqXG4gKiBUaGUgbmFtZSBvZiB0aGUgY2xhc3MgaXMgbm90IG1lbnRpb25lZCBoZXJlLCBidXQgd2lsbCBiZSBpbiB0aGUgZ2VuZXJhdGVkIGZhY3RvcnkgZnVuY3Rpb24gbmFtZVxuICogYW5kIHRodXMgaW4gdGhlIHN0YWNrIHRyYWNlLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVpbnZhbGlkRmFjdG9yeSgpIHtcbiAgICBjb25zdCBtc2cgPSBuZ0Rldk1vZGUgPyBgVGhpcyBjb25zdHJ1Y3RvciB3YXMgbm90IGNvbXBhdGlibGUgd2l0aCBEZXBlbmRlbmN5IEluamVjdGlvbi5gIDogJ2ludmFsaWQnO1xuICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVXBkYXRlIGEgcHJvcGVydHkgb24gYSBzZWxlY3RlZCBlbGVtZW50LlxuICpcbiAqIE9wZXJhdGVzIG9uIHRoZSBlbGVtZW50IHNlbGVjdGVkIGJ5IGluZGV4IHZpYSB0aGUge0BsaW5rIHNlbGVjdH0gaW5zdHJ1Y3Rpb24uXG4gKlxuICogSWYgdGhlIHByb3BlcnR5IG5hbWUgYWxzbyBleGlzdHMgYXMgYW4gaW5wdXQgcHJvcGVydHkgb24gb25lIG9mIHRoZSBlbGVtZW50J3MgZGlyZWN0aXZlcyxcbiAqIHRoZSBjb21wb25lbnQgcHJvcGVydHkgd2lsbCBiZSBzZXQgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBwcm9wZXJ0eS4gVGhpcyBjaGVjayBtdXN0XG4gKiBiZSBjb25kdWN0ZWQgYXQgcnVudGltZSBzbyBjaGlsZCBjb21wb25lbnRzIHRoYXQgYWRkIG5ldyBgQElucHV0c2AgZG9uJ3QgaGF2ZSB0byBiZSByZS1jb21waWxlZFxuICpcbiAqIEBwYXJhbSBwcm9wTmFtZSBOYW1lIG9mIHByb3BlcnR5LiBCZWNhdXNlIGl0IGlzIGdvaW5nIHRvIERPTSwgdGhpcyBpcyBub3Qgc3ViamVjdCB0b1xuICogICAgICAgIHJlbmFtaW5nIGFzIHBhcnQgb2YgbWluaWZpY2F0aW9uLlxuICogQHBhcmFtIHZhbHVlIE5ldyB2YWx1ZSB0byB3cml0ZS5cbiAqIEBwYXJhbSBzYW5pdGl6ZXIgQW4gb3B0aW9uYWwgZnVuY3Rpb24gdXNlZCB0byBzYW5pdGl6ZSB0aGUgdmFsdWUuXG4gKiBAcmV0dXJucyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgaXRzZWxmIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWRcbiAqIChlLmcuIGBwcm9wZXJ0eSgnbmFtZScsIGN0eC5uYW1lKSgndGl0bGUnLCBjdHgudGl0bGUpYClcbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cHJvcGVydHkocHJvcE5hbWUsIHZhbHVlLCBzYW5pdGl6ZXIpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gbmV4dEJpbmRpbmdJbmRleCgpO1xuICAgIGlmIChiaW5kaW5nVXBkYXRlZChsVmlldywgYmluZGluZ0luZGV4LCB2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudFByb3BlcnR5SW50ZXJuYWwodFZpZXcsIHROb2RlLCBsVmlldywgcHJvcE5hbWUsIHZhbHVlLCBsVmlld1tSRU5ERVJFUl0sIHNhbml0aXplciwgZmFsc2UpO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgc3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YSh0Vmlldy5kYXRhLCB0Tm9kZSwgcHJvcE5hbWUsIGJpbmRpbmdJbmRleCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1cHJvcGVydHk7XG59XG4vKipcbiAqIEdpdmVuIGA8ZGl2IHN0eWxlPVwiLi4uXCIgbXktZGlyPmAgYW5kIGBNeURpcmAgd2l0aCBgQElucHV0KCdzdHlsZScpYCB3ZSBuZWVkIHRvIHdyaXRlIHRvXG4gKiBkaXJlY3RpdmUgaW5wdXQuXG4gKi9cbmZ1bmN0aW9uIHNldERpcmVjdGl2ZUlucHV0c1doaWNoU2hhZG93c1N0eWxpbmcodFZpZXcsIHROb2RlLCBsVmlldywgdmFsdWUsIGlzQ2xhc3NCYXNlZCkge1xuICAgIGNvbnN0IGlucHV0cyA9IHROb2RlLmlucHV0cztcbiAgICBjb25zdCBwcm9wZXJ0eSA9IGlzQ2xhc3NCYXNlZCA/ICdjbGFzcycgOiAnc3R5bGUnO1xuICAgIC8vIFdlIHN1cHBvcnQgYm90aCAnY2xhc3MnIGFuZCBgY2xhc3NOYW1lYCBoZW5jZSB0aGUgZmFsbGJhY2suXG4gICAgc2V0SW5wdXRzRm9yUHJvcGVydHkodFZpZXcsIGxWaWV3LCBpbnB1dHNbcHJvcGVydHldLCBwcm9wZXJ0eSwgdmFsdWUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmZ1bmN0aW9uIGVsZW1lbnRTdGFydEZpcnN0Q3JlYXRlUGFzcyhpbmRleCwgdFZpZXcsIGxWaWV3LCBuYXRpdmUsIG5hbWUsIGF0dHJzSW5kZXgsIGxvY2FsUmVmc0luZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEZpcnN0Q3JlYXRlUGFzcyh0Vmlldyk7XG4gICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5maXJzdENyZWF0ZVBhc3MrKztcbiAgICBjb25zdCB0Vmlld0NvbnN0cyA9IHRWaWV3LmNvbnN0cztcbiAgICBjb25zdCBhdHRycyA9IGdldENvbnN0YW50KHRWaWV3Q29uc3RzLCBhdHRyc0luZGV4KTtcbiAgICBjb25zdCB0Tm9kZSA9IGdldE9yQ3JlYXRlVE5vZGUodFZpZXcsIGluZGV4LCAyIC8qIEVsZW1lbnQgKi8sIG5hbWUsIGF0dHJzKTtcbiAgICBjb25zdCBoYXNEaXJlY3RpdmVzID0gcmVzb2x2ZURpcmVjdGl2ZXModFZpZXcsIGxWaWV3LCB0Tm9kZSwgZ2V0Q29uc3RhbnQodFZpZXdDb25zdHMsIGxvY2FsUmVmc0luZGV4KSk7XG4gICAgbmdEZXZNb2RlICYmIGxvZ1Vua25vd25FbGVtZW50RXJyb3IodFZpZXcsIG5hdGl2ZSwgdE5vZGUsIGhhc0RpcmVjdGl2ZXMpO1xuICAgIGlmICh0Tm9kZS5hdHRycyAhPT0gbnVsbCkge1xuICAgICAgICBjb21wdXRlU3RhdGljU3R5bGluZyh0Tm9kZSwgdE5vZGUuYXR0cnMsIGZhbHNlKTtcbiAgICB9XG4gICAgaWYgKHROb2RlLm1lcmdlZEF0dHJzICE9PSBudWxsKSB7XG4gICAgICAgIGNvbXB1dGVTdGF0aWNTdHlsaW5nKHROb2RlLCB0Tm9kZS5tZXJnZWRBdHRycywgdHJ1ZSk7XG4gICAgfVxuICAgIGlmICh0Vmlldy5xdWVyaWVzICE9PSBudWxsKSB7XG4gICAgICAgIHRWaWV3LnF1ZXJpZXMuZWxlbWVudFN0YXJ0KHRWaWV3LCB0Tm9kZSk7XG4gICAgfVxuICAgIHJldHVybiB0Tm9kZTtcbn1cbi8qKlxuICogQ3JlYXRlIERPTSBlbGVtZW50LiBUaGUgaW5zdHJ1Y3Rpb24gbXVzdCBsYXRlciBiZSBmb2xsb3dlZCBieSBgZWxlbWVudEVuZCgpYCBjYWxsLlxuICpcbiAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiB0aGUgZWxlbWVudCBpbiB0aGUgTFZpZXcgYXJyYXlcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIERPTSBOb2RlXG4gKiBAcGFyYW0gYXR0cnNJbmRleCBJbmRleCBvZiB0aGUgZWxlbWVudCdzIGF0dHJpYnV0ZXMgaW4gdGhlIGBjb25zdHNgIGFycmF5LlxuICogQHBhcmFtIGxvY2FsUmVmc0luZGV4IEluZGV4IG9mIHRoZSBlbGVtZW50J3MgbG9jYWwgcmVmZXJlbmNlcyBpbiB0aGUgYGNvbnN0c2AgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgaXRzZWxmIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKlxuICogQXR0cmlidXRlcyBhbmQgbG9jYWxSZWZzIGFyZSBwYXNzZWQgYXMgYW4gYXJyYXkgb2Ygc3RyaW5ncyB3aGVyZSBlbGVtZW50cyB3aXRoIGFuIGV2ZW4gaW5kZXhcbiAqIGhvbGQgYW4gYXR0cmlidXRlIG5hbWUgYW5kIGVsZW1lbnRzIHdpdGggYW4gb2RkIGluZGV4IGhvbGQgYW4gYXR0cmlidXRlIHZhbHVlLCBleC46XG4gKiBbJ2lkJywgJ3dhcm5pbmc1JywgJ2NsYXNzJywgJ2FsZXJ0J11cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1ZWxlbWVudFN0YXJ0KGluZGV4LCBuYW1lLCBhdHRyc0luZGV4LCBsb2NhbFJlZnNJbmRleCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgY29uc3QgYWRqdXN0ZWRJbmRleCA9IEhFQURFUl9PRkZTRVQgKyBpbmRleDtcbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0RXF1YWwoZ2V0QmluZGluZ0luZGV4KCksIHRWaWV3LmJpbmRpbmdTdGFydEluZGV4LCAnZWxlbWVudHMgc2hvdWxkIGJlIGNyZWF0ZWQgYmVmb3JlIGFueSBiaW5kaW5ncycpO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRJbmRleEluUmFuZ2UobFZpZXcsIGFkanVzdGVkSW5kZXgpO1xuICAgIGNvbnN0IHJlbmRlcmVyID0gbFZpZXdbUkVOREVSRVJdO1xuICAgIGNvbnN0IG5hdGl2ZSA9IGxWaWV3W2FkanVzdGVkSW5kZXhdID0gY3JlYXRlRWxlbWVudE5vZGUocmVuZGVyZXIsIG5hbWUsIGdldE5hbWVzcGFjZSQxKCkpO1xuICAgIGNvbnN0IHROb2RlID0gdFZpZXcuZmlyc3RDcmVhdGVQYXNzID9cbiAgICAgICAgZWxlbWVudFN0YXJ0Rmlyc3RDcmVhdGVQYXNzKGFkanVzdGVkSW5kZXgsIHRWaWV3LCBsVmlldywgbmF0aXZlLCBuYW1lLCBhdHRyc0luZGV4LCBsb2NhbFJlZnNJbmRleCkgOlxuICAgICAgICB0Vmlldy5kYXRhW2FkanVzdGVkSW5kZXhdO1xuICAgIHNldEN1cnJlbnRUTm9kZSh0Tm9kZSwgdHJ1ZSk7XG4gICAgY29uc3QgbWVyZ2VkQXR0cnMgPSB0Tm9kZS5tZXJnZWRBdHRycztcbiAgICBpZiAobWVyZ2VkQXR0cnMgIT09IG51bGwpIHtcbiAgICAgICAgc2V0VXBBdHRyaWJ1dGVzKHJlbmRlcmVyLCBuYXRpdmUsIG1lcmdlZEF0dHJzKTtcbiAgICB9XG4gICAgY29uc3QgY2xhc3NlcyA9IHROb2RlLmNsYXNzZXM7XG4gICAgaWYgKGNsYXNzZXMgIT09IG51bGwpIHtcbiAgICAgICAgd3JpdGVEaXJlY3RDbGFzcyhyZW5kZXJlciwgbmF0aXZlLCBjbGFzc2VzKTtcbiAgICB9XG4gICAgY29uc3Qgc3R5bGVzID0gdE5vZGUuc3R5bGVzO1xuICAgIGlmIChzdHlsZXMgIT09IG51bGwpIHtcbiAgICAgICAgd3JpdGVEaXJlY3RTdHlsZShyZW5kZXJlciwgbmF0aXZlLCBzdHlsZXMpO1xuICAgIH1cbiAgICBpZiAoKHROb2RlLmZsYWdzICYgNjQgLyogaXNEZXRhY2hlZCAqLykgIT09IDY0IC8qIGlzRGV0YWNoZWQgKi8pIHtcbiAgICAgICAgLy8gSW4gdGhlIGkxOG4gY2FzZSwgdGhlIHRyYW5zbGF0aW9uIG1heSBoYXZlIHJlbW92ZWQgdGhpcyBlbGVtZW50LCBzbyBvbmx5IGFkZCBpdCBpZiBpdCBpcyBub3RcbiAgICAgICAgLy8gZGV0YWNoZWQuIFNlZSBgVE5vZGVUeXBlLlBsYWNlaG9sZGVyYCBhbmQgYExGcmFtZS5pbkkxOG5gIGZvciBtb3JlIGNvbnRleHQuXG4gICAgICAgIGFwcGVuZENoaWxkKHRWaWV3LCBsVmlldywgbmF0aXZlLCB0Tm9kZSk7XG4gICAgfVxuICAgIC8vIGFueSBpbW1lZGlhdGUgY2hpbGRyZW4gb2YgYSBjb21wb25lbnQgb3IgdGVtcGxhdGUgY29udGFpbmVyIG11c3QgYmUgcHJlLWVtcHRpdmVseVxuICAgIC8vIG1vbmtleS1wYXRjaGVkIHdpdGggdGhlIGNvbXBvbmVudCB2aWV3IGRhdGEgc28gdGhhdCB0aGUgZWxlbWVudCBjYW4gYmUgaW5zcGVjdGVkXG4gICAgLy8gbGF0ZXIgb24gdXNpbmcgYW55IGVsZW1lbnQgZGlzY292ZXJ5IHV0aWxpdHkgbWV0aG9kcyAoc2VlIGBlbGVtZW50X2Rpc2NvdmVyeS50c2ApXG4gICAgaWYgKGdldEVsZW1lbnREZXB0aENvdW50KCkgPT09IDApIHtcbiAgICAgICAgYXR0YWNoUGF0Y2hEYXRhKG5hdGl2ZSwgbFZpZXcpO1xuICAgIH1cbiAgICBpbmNyZWFzZUVsZW1lbnREZXB0aENvdW50KCk7XG4gICAgaWYgKGlzRGlyZWN0aXZlSG9zdCh0Tm9kZSkpIHtcbiAgICAgICAgY3JlYXRlRGlyZWN0aXZlc0luc3RhbmNlcyh0VmlldywgbFZpZXcsIHROb2RlKTtcbiAgICAgICAgZXhlY3V0ZUNvbnRlbnRRdWVyaWVzKHRWaWV3LCB0Tm9kZSwgbFZpZXcpO1xuICAgIH1cbiAgICBpZiAobG9jYWxSZWZzSW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgc2F2ZVJlc29sdmVkTG9jYWxzSW5EYXRhKGxWaWV3LCB0Tm9kZSk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1ZWxlbWVudFN0YXJ0O1xufVxuLyoqXG4gKiBNYXJrIHRoZSBlbmQgb2YgdGhlIGVsZW1lbnQuXG4gKiBAcmV0dXJucyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgaXRzZWxmIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWVsZW1lbnRFbmQoKSB7XG4gICAgbGV0IGN1cnJlbnRUTm9kZSA9IGdldEN1cnJlbnRUTm9kZSgpO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKGN1cnJlbnRUTm9kZSwgJ05vIHBhcmVudCBub2RlIHRvIGNsb3NlLicpO1xuICAgIGlmIChpc0N1cnJlbnRUTm9kZVBhcmVudCgpKSB7XG4gICAgICAgIHNldEN1cnJlbnRUTm9kZUFzTm90UGFyZW50KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0SGFzUGFyZW50KGdldEN1cnJlbnRUTm9kZSgpKTtcbiAgICAgICAgY3VycmVudFROb2RlID0gY3VycmVudFROb2RlLnBhcmVudDtcbiAgICAgICAgc2V0Q3VycmVudFROb2RlKGN1cnJlbnRUTm9kZSwgZmFsc2UpO1xuICAgIH1cbiAgICBjb25zdCB0Tm9kZSA9IGN1cnJlbnRUTm9kZTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VE5vZGVUeXBlKHROb2RlLCAzIC8qIEFueVJOb2RlICovKTtcbiAgICBkZWNyZWFzZUVsZW1lbnREZXB0aENvdW50KCk7XG4gICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgIGlmICh0Vmlldy5maXJzdENyZWF0ZVBhc3MpIHtcbiAgICAgICAgcmVnaXN0ZXJQb3N0T3JkZXJIb29rcyh0VmlldywgY3VycmVudFROb2RlKTtcbiAgICAgICAgaWYgKGlzQ29udGVudFF1ZXJ5SG9zdChjdXJyZW50VE5vZGUpKSB7XG4gICAgICAgICAgICB0Vmlldy5xdWVyaWVzLmVsZW1lbnRFbmQoY3VycmVudFROb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodE5vZGUuY2xhc3Nlc1dpdGhvdXRIb3N0ICE9IG51bGwgJiYgaGFzQ2xhc3NJbnB1dCh0Tm9kZSkpIHtcbiAgICAgICAgc2V0RGlyZWN0aXZlSW5wdXRzV2hpY2hTaGFkb3dzU3R5bGluZyh0VmlldywgdE5vZGUsIGdldExWaWV3KCksIHROb2RlLmNsYXNzZXNXaXRob3V0SG9zdCwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmICh0Tm9kZS5zdHlsZXNXaXRob3V0SG9zdCAhPSBudWxsICYmIGhhc1N0eWxlSW5wdXQodE5vZGUpKSB7XG4gICAgICAgIHNldERpcmVjdGl2ZUlucHV0c1doaWNoU2hhZG93c1N0eWxpbmcodFZpZXcsIHROb2RlLCBnZXRMVmlldygpLCB0Tm9kZS5zdHlsZXNXaXRob3V0SG9zdCwgZmFsc2UpO1xuICAgIH1cbiAgICByZXR1cm4gybXJtWVsZW1lbnRFbmQ7XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gZW1wdHkgZWxlbWVudCB1c2luZyB7QGxpbmsgZWxlbWVudFN0YXJ0fSBhbmQge0BsaW5rIGVsZW1lbnRFbmR9XG4gKlxuICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoZSBkYXRhIGFycmF5XG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBET00gTm9kZVxuICogQHBhcmFtIGF0dHJzSW5kZXggSW5kZXggb2YgdGhlIGVsZW1lbnQncyBhdHRyaWJ1dGVzIGluIHRoZSBgY29uc3RzYCBhcnJheS5cbiAqIEBwYXJhbSBsb2NhbFJlZnNJbmRleCBJbmRleCBvZiB0aGUgZWxlbWVudCdzIGxvY2FsIHJlZmVyZW5jZXMgaW4gdGhlIGBjb25zdHNgIGFycmF5LlxuICogQHJldHVybnMgVGhpcyBmdW5jdGlvbiByZXR1cm5zIGl0c2VsZiBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVlbGVtZW50KGluZGV4LCBuYW1lLCBhdHRyc0luZGV4LCBsb2NhbFJlZnNJbmRleCkge1xuICAgIMm1ybVlbGVtZW50U3RhcnQoaW5kZXgsIG5hbWUsIGF0dHJzSW5kZXgsIGxvY2FsUmVmc0luZGV4KTtcbiAgICDJtcm1ZWxlbWVudEVuZCgpO1xuICAgIHJldHVybiDJtcm1ZWxlbWVudDtcbn1cbmZ1bmN0aW9uIGxvZ1Vua25vd25FbGVtZW50RXJyb3IodFZpZXcsIGVsZW1lbnQsIHROb2RlLCBoYXNEaXJlY3RpdmVzKSB7XG4gICAgY29uc3Qgc2NoZW1hcyA9IHRWaWV3LnNjaGVtYXM7XG4gICAgLy8gSWYgYHNjaGVtYXNgIGlzIHNldCB0byBgbnVsbGAsIHRoYXQncyBhbiBpbmRpY2F0aW9uIHRoYXQgdGhpcyBDb21wb25lbnQgd2FzIGNvbXBpbGVkIGluIEFPVFxuICAgIC8vIG1vZGUgd2hlcmUgdGhpcyBjaGVjayBoYXBwZW5zIGF0IGNvbXBpbGUgdGltZS4gSW4gSklUIG1vZGUsIGBzY2hlbWFzYCBpcyBhbHdheXMgcHJlc2VudCBhbmRcbiAgICAvLyBkZWZpbmVkIGFzIGFuIGFycmF5IChhcyBhbiBlbXB0eSBhcnJheSBpbiBjYXNlIGBzY2hlbWFzYCBmaWVsZCBpcyBub3QgZGVmaW5lZCkgYW5kIHdlIHNob3VsZFxuICAgIC8vIGV4ZWN1dGUgdGhlIGNoZWNrIGJlbG93LlxuICAgIGlmIChzY2hlbWFzID09PSBudWxsKVxuICAgICAgICByZXR1cm47XG4gICAgY29uc3QgdGFnTmFtZSA9IHROb2RlLnZhbHVlO1xuICAgIC8vIElmIHRoZSBlbGVtZW50IG1hdGNoZXMgYW55IGRpcmVjdGl2ZSwgaXQncyBjb25zaWRlcmVkIGFzIHZhbGlkLlxuICAgIGlmICghaGFzRGlyZWN0aXZlcyAmJiB0YWdOYW1lICE9PSBudWxsKSB7XG4gICAgICAgIC8vIFRoZSBlbGVtZW50IGlzIHVua25vd24gaWYgaXQncyBhbiBpbnN0YW5jZSBvZiBIVE1MVW5rbm93bkVsZW1lbnQgb3IgaXQgaXNuJ3QgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBhcyBhIGN1c3RvbSBlbGVtZW50LiBOb3RlIHRoYXQgdW5rbm93biBlbGVtZW50cyB3aXRoIGEgZGFzaCBpbiB0aGVpciBuYW1lIHdvbid0IGJlIGluc3RhbmNlc1xuICAgICAgICAvLyBvZiBIVE1MVW5rbm93bkVsZW1lbnQgaW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IHdlYiBjb21wb25lbnRzLlxuICAgICAgICBjb25zdCBpc1Vua25vd24gPSBcbiAgICAgICAgLy8gTm90ZSB0aGF0IHdlIGNhbid0IGNoZWNrIGZvciBgdHlwZW9mIEhUTUxVbmtub3duRWxlbWVudCA9PT0gJ2Z1bmN0aW9uJ2AsXG4gICAgICAgIC8vIGJlY2F1c2Ugd2hpbGUgbW9zdCBicm93c2VycyByZXR1cm4gJ2Z1bmN0aW9uJywgSUUgcmV0dXJucyAnb2JqZWN0Jy5cbiAgICAgICAgKHR5cGVvZiBIVE1MVW5rbm93bkVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIEhUTUxVbmtub3duRWxlbWVudCAmJlxuICAgICAgICAgICAgZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxVbmtub3duRWxlbWVudCkgfHxcbiAgICAgICAgICAgICh0eXBlb2YgY3VzdG9tRWxlbWVudHMgIT09ICd1bmRlZmluZWQnICYmIHRhZ05hbWUuaW5kZXhPZignLScpID4gLTEgJiZcbiAgICAgICAgICAgICAgICAhY3VzdG9tRWxlbWVudHMuZ2V0KHRhZ05hbWUpKTtcbiAgICAgICAgaWYgKGlzVW5rbm93biAmJiAhbWF0Y2hpbmdTY2hlbWFzKHRWaWV3LCB0YWdOYW1lKSkge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBgJyR7dGFnTmFtZX0nIGlzIG5vdCBhIGtub3duIGVsZW1lbnQ6XFxuYDtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYDEuIElmICcke3RhZ05hbWV9JyBpcyBhbiBBbmd1bGFyIGNvbXBvbmVudCwgdGhlbiB2ZXJpZnkgdGhhdCBpdCBpcyBwYXJ0IG9mIHRoaXMgbW9kdWxlLlxcbmA7XG4gICAgICAgICAgICBpZiAodGFnTmFtZSAmJiB0YWdOYW1lLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSArPSBgMi4gSWYgJyR7dGFnTmFtZX0nIGlzIGEgV2ViIENvbXBvbmVudCB0aGVuIGFkZCAnQ1VTVE9NX0VMRU1FTlRTX1NDSEVNQScgdG8gdGhlICdATmdNb2R1bGUuc2NoZW1hcycgb2YgdGhpcyBjb21wb25lbnQgdG8gc3VwcHJlc3MgdGhpcyBtZXNzYWdlLmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlICs9XG4gICAgICAgICAgICAgICAgICAgIGAyLiBUbyBhbGxvdyBhbnkgZWxlbWVudCBhZGQgJ05PX0VSUk9SU19TQ0hFTUEnIHRvIHRoZSAnQE5nTW9kdWxlLnNjaGVtYXMnIG9mIHRoaXMgY29tcG9uZW50LmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGZvcm1hdFJ1bnRpbWVFcnJvcigzMDQgLyogVU5LTk9XTl9FTEVNRU5UICovLCBtZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gZWxlbWVudENvbnRhaW5lclN0YXJ0Rmlyc3RDcmVhdGVQYXNzKGluZGV4LCB0VmlldywgbFZpZXcsIGF0dHJzSW5kZXgsIGxvY2FsUmVmc0luZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5maXJzdENyZWF0ZVBhc3MrKztcbiAgICBjb25zdCB0Vmlld0NvbnN0cyA9IHRWaWV3LmNvbnN0cztcbiAgICBjb25zdCBhdHRycyA9IGdldENvbnN0YW50KHRWaWV3Q29uc3RzLCBhdHRyc0luZGV4KTtcbiAgICBjb25zdCB0Tm9kZSA9IGdldE9yQ3JlYXRlVE5vZGUodFZpZXcsIGluZGV4LCA4IC8qIEVsZW1lbnRDb250YWluZXIgKi8sICduZy1jb250YWluZXInLCBhdHRycyk7XG4gICAgLy8gV2hpbGUgbmctY29udGFpbmVyIGRvZXNuJ3QgbmVjZXNzYXJpbHkgc3VwcG9ydCBzdHlsaW5nLCB3ZSB1c2UgdGhlIHN0eWxlIGNvbnRleHQgdG8gaWRlbnRpZnlcbiAgICAvLyBhbmQgZXhlY3V0ZSBkaXJlY3RpdmVzIG9uIHRoZSBuZy1jb250YWluZXIuXG4gICAgaWYgKGF0dHJzICE9PSBudWxsKSB7XG4gICAgICAgIGNvbXB1dGVTdGF0aWNTdHlsaW5nKHROb2RlLCBhdHRycywgdHJ1ZSk7XG4gICAgfVxuICAgIGNvbnN0IGxvY2FsUmVmcyA9IGdldENvbnN0YW50KHRWaWV3Q29uc3RzLCBsb2NhbFJlZnNJbmRleCk7XG4gICAgcmVzb2x2ZURpcmVjdGl2ZXModFZpZXcsIGxWaWV3LCB0Tm9kZSwgbG9jYWxSZWZzKTtcbiAgICBpZiAodFZpZXcucXVlcmllcyAhPT0gbnVsbCkge1xuICAgICAgICB0Vmlldy5xdWVyaWVzLmVsZW1lbnRTdGFydCh0VmlldywgdE5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gdE5vZGU7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBsb2dpY2FsIGNvbnRhaW5lciBmb3Igb3RoZXIgbm9kZXMgKDxuZy1jb250YWluZXI+KSBiYWNrZWQgYnkgYSBjb21tZW50IG5vZGUgaW4gdGhlIERPTS5cbiAqIFRoZSBpbnN0cnVjdGlvbiBtdXN0IGxhdGVyIGJlIGZvbGxvd2VkIGJ5IGBlbGVtZW50Q29udGFpbmVyRW5kKClgIGNhbGwuXG4gKlxuICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoZSBMVmlldyBhcnJheVxuICogQHBhcmFtIGF0dHJzSW5kZXggSW5kZXggb2YgdGhlIGNvbnRhaW5lciBhdHRyaWJ1dGVzIGluIHRoZSBgY29uc3RzYCBhcnJheS5cbiAqIEBwYXJhbSBsb2NhbFJlZnNJbmRleCBJbmRleCBvZiB0aGUgY29udGFpbmVyJ3MgbG9jYWwgcmVmZXJlbmNlcyBpbiB0aGUgYGNvbnN0c2AgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgaXRzZWxmIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKlxuICogRXZlbiBpZiB0aGlzIGluc3RydWN0aW9uIGFjY2VwdHMgYSBzZXQgb2YgYXR0cmlidXRlcyBubyBhY3R1YWwgYXR0cmlidXRlIHZhbHVlcyBhcmUgcHJvcGFnYXRlZCB0b1xuICogdGhlIERPTSAoYXMgYSBjb21tZW50IG5vZGUgY2FuJ3QgaGF2ZSBhdHRyaWJ1dGVzKS4gQXR0cmlidXRlcyBhcmUgaGVyZSBvbmx5IGZvciBkaXJlY3RpdmVcbiAqIG1hdGNoaW5nIHB1cnBvc2VzIGFuZCBzZXR0aW5nIGluaXRpYWwgaW5wdXRzIG9mIGRpcmVjdGl2ZXMuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWVsZW1lbnRDb250YWluZXJTdGFydChpbmRleCwgYXR0cnNJbmRleCwgbG9jYWxSZWZzSW5kZXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgIGNvbnN0IGFkanVzdGVkSW5kZXggPSBpbmRleCArIEhFQURFUl9PRkZTRVQ7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShsVmlldywgYWRqdXN0ZWRJbmRleCk7XG4gICAgbmdEZXZNb2RlICYmXG4gICAgICAgIGFzc2VydEVxdWFsKGdldEJpbmRpbmdJbmRleCgpLCB0Vmlldy5iaW5kaW5nU3RhcnRJbmRleCwgJ2VsZW1lbnQgY29udGFpbmVycyBzaG91bGQgYmUgY3JlYXRlZCBiZWZvcmUgYW55IGJpbmRpbmdzJyk7XG4gICAgY29uc3QgdE5vZGUgPSB0Vmlldy5maXJzdENyZWF0ZVBhc3MgP1xuICAgICAgICBlbGVtZW50Q29udGFpbmVyU3RhcnRGaXJzdENyZWF0ZVBhc3MoYWRqdXN0ZWRJbmRleCwgdFZpZXcsIGxWaWV3LCBhdHRyc0luZGV4LCBsb2NhbFJlZnNJbmRleCkgOlxuICAgICAgICB0Vmlldy5kYXRhW2FkanVzdGVkSW5kZXhdO1xuICAgIHNldEN1cnJlbnRUTm9kZSh0Tm9kZSwgdHJ1ZSk7XG4gICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5yZW5kZXJlckNyZWF0ZUNvbW1lbnQrKztcbiAgICBjb25zdCBuYXRpdmUgPSBsVmlld1thZGp1c3RlZEluZGV4XSA9XG4gICAgICAgIGxWaWV3W1JFTkRFUkVSXS5jcmVhdGVDb21tZW50KG5nRGV2TW9kZSA/ICduZy1jb250YWluZXInIDogJycpO1xuICAgIGFwcGVuZENoaWxkKHRWaWV3LCBsVmlldywgbmF0aXZlLCB0Tm9kZSk7XG4gICAgYXR0YWNoUGF0Y2hEYXRhKG5hdGl2ZSwgbFZpZXcpO1xuICAgIGlmIChpc0RpcmVjdGl2ZUhvc3QodE5vZGUpKSB7XG4gICAgICAgIGNyZWF0ZURpcmVjdGl2ZXNJbnN0YW5jZXModFZpZXcsIGxWaWV3LCB0Tm9kZSk7XG4gICAgICAgIGV4ZWN1dGVDb250ZW50UXVlcmllcyh0VmlldywgdE5vZGUsIGxWaWV3KTtcbiAgICB9XG4gICAgaWYgKGxvY2FsUmVmc0luZGV4ICE9IG51bGwpIHtcbiAgICAgICAgc2F2ZVJlc29sdmVkTG9jYWxzSW5EYXRhKGxWaWV3LCB0Tm9kZSk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1ZWxlbWVudENvbnRhaW5lclN0YXJ0O1xufVxuLyoqXG4gKiBNYXJrIHRoZSBlbmQgb2YgdGhlIDxuZy1jb250YWluZXI+LlxuICogQHJldHVybnMgVGhpcyBmdW5jdGlvbiByZXR1cm5zIGl0c2VsZiBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVlbGVtZW50Q29udGFpbmVyRW5kKCkge1xuICAgIGxldCBjdXJyZW50VE5vZGUgPSBnZXRDdXJyZW50VE5vZGUoKTtcbiAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgaWYgKGlzQ3VycmVudFROb2RlUGFyZW50KCkpIHtcbiAgICAgICAgc2V0Q3VycmVudFROb2RlQXNOb3RQYXJlbnQoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRIYXNQYXJlbnQoY3VycmVudFROb2RlKTtcbiAgICAgICAgY3VycmVudFROb2RlID0gY3VycmVudFROb2RlLnBhcmVudDtcbiAgICAgICAgc2V0Q3VycmVudFROb2RlKGN1cnJlbnRUTm9kZSwgZmFsc2UpO1xuICAgIH1cbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VE5vZGVUeXBlKGN1cnJlbnRUTm9kZSwgOCAvKiBFbGVtZW50Q29udGFpbmVyICovKTtcbiAgICBpZiAodFZpZXcuZmlyc3RDcmVhdGVQYXNzKSB7XG4gICAgICAgIHJlZ2lzdGVyUG9zdE9yZGVySG9va3ModFZpZXcsIGN1cnJlbnRUTm9kZSk7XG4gICAgICAgIGlmIChpc0NvbnRlbnRRdWVyeUhvc3QoY3VycmVudFROb2RlKSkge1xuICAgICAgICAgICAgdFZpZXcucXVlcmllcy5lbGVtZW50RW5kKGN1cnJlbnRUTm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIMm1ybVlbGVtZW50Q29udGFpbmVyRW5kO1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIGVtcHR5IGxvZ2ljYWwgY29udGFpbmVyIHVzaW5nIHtAbGluayBlbGVtZW50Q29udGFpbmVyU3RhcnR9XG4gKiBhbmQge0BsaW5rIGVsZW1lbnRDb250YWluZXJFbmR9XG4gKlxuICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoZSBMVmlldyBhcnJheVxuICogQHBhcmFtIGF0dHJzSW5kZXggSW5kZXggb2YgdGhlIGNvbnRhaW5lciBhdHRyaWJ1dGVzIGluIHRoZSBgY29uc3RzYCBhcnJheS5cbiAqIEBwYXJhbSBsb2NhbFJlZnNJbmRleCBJbmRleCBvZiB0aGUgY29udGFpbmVyJ3MgbG9jYWwgcmVmZXJlbmNlcyBpbiB0aGUgYGNvbnN0c2AgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgaXRzZWxmIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWVsZW1lbnRDb250YWluZXIoaW5kZXgsIGF0dHJzSW5kZXgsIGxvY2FsUmVmc0luZGV4KSB7XG4gICAgybXJtWVsZW1lbnRDb250YWluZXJTdGFydChpbmRleCwgYXR0cnNJbmRleCwgbG9jYWxSZWZzSW5kZXgpO1xuICAgIMm1ybVlbGVtZW50Q29udGFpbmVyRW5kKCk7XG4gICAgcmV0dXJuIMm1ybVlbGVtZW50Q29udGFpbmVyO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgT3BhcXVlVmlld1N0YXRlIGluc3RhbmNlLlxuICpcbiAqIFVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgcmVzdG9yZVZpZXcoKSBpbnN0cnVjdGlvbiB0byBzYXZlIGEgc25hcHNob3RcbiAqIG9mIHRoZSBjdXJyZW50IHZpZXcgYW5kIHJlc3RvcmUgaXQgd2hlbiBsaXN0ZW5lcnMgYXJlIGludm9rZWQuIFRoaXMgYWxsb3dzXG4gKiB3YWxraW5nIHRoZSBkZWNsYXJhdGlvbiB2aWV3IHRyZWUgaW4gbGlzdGVuZXJzIHRvIGdldCB2YXJzIGZyb20gcGFyZW50IHZpZXdzLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVnZXRDdXJyZW50VmlldygpIHtcbiAgICByZXR1cm4gZ2V0TFZpZXcoKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgYXJndW1lbnQgaXMgc2hhcGVkIGxpa2UgYSBQcm9taXNlXG4gKi9cbmZ1bmN0aW9uIGlzUHJvbWlzZShvYmopIHtcbiAgICAvLyBhbGxvdyBhbnkgUHJvbWlzZS9BKyBjb21wbGlhbnQgdGhlbmFibGUuXG4gICAgLy8gSXQncyB1cCB0byB0aGUgY2FsbGVyIHRvIGVuc3VyZSB0aGF0IG9iai50aGVuIGNvbmZvcm1zIHRvIHRoZSBzcGVjXG4gICAgcmV0dXJuICEhb2JqICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHRoZSBhcmd1bWVudCBpcyBhIFN1YnNjcmliYWJsZVxuICovXG5mdW5jdGlvbiBpc1N1YnNjcmliYWJsZShvYmopIHtcbiAgICByZXR1cm4gISFvYmogJiYgdHlwZW9mIG9iai5zdWJzY3JpYmUgPT09ICdmdW5jdGlvbic7XG59XG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgYXJndW1lbnQgaXMgYW4gT2JzZXJ2YWJsZVxuICpcbiAqIFN0cmljdGx5IHRoaXMgdGVzdHMgdGhhdCB0aGUgYG9iamAgaXMgYFN1YnNjcmliYWJsZWAsIHNpbmNlIGBPYnNlcnZhYmxlYFxuICogdHlwZXMgbmVlZCBhZGRpdGlvbmFsIG1ldGhvZHMsIHN1Y2ggYXMgYGxpZnQoKWAuIEJ1dCBpdCBpcyBhZGVxdWF0ZSBmb3Igb3VyXG4gKiBuZWVkcyBzaW5jZSB3aXRoaW4gdGhlIEFuZ3VsYXIgZnJhbWV3b3JrIGNvZGUgd2Ugb25seSBldmVyIG5lZWQgdG8gdXNlIHRoZVxuICogYHN1YnNjcmliZSgpYCBtZXRob2QsIGFuZCBSeEpTIGhhcyBtZWNoYW5pc21zIHRvIHdyYXAgYFN1YnNjcmliYWJsZWAgb2JqZWN0c1xuICogaW50byBgT2JzZXJ2YWJsZWAgYXMgbmVlZGVkLlxuICovXG5jb25zdCBpc09ic2VydmFibGUgPSBpc1N1YnNjcmliYWJsZTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGN1cnJlbnQgbm9kZS5cbiAqXG4gKiBJZiBhbiBvdXRwdXQgZXhpc3RzIG9uIG9uZSBvZiB0aGUgbm9kZSdzIGRpcmVjdGl2ZXMsIGl0IGFsc28gc3Vic2NyaWJlcyB0byB0aGUgb3V0cHV0XG4gKiBhbmQgc2F2ZXMgdGhlIHN1YnNjcmlwdGlvbiBmb3IgbGF0ZXIgY2xlYW51cC5cbiAqXG4gKiBAcGFyYW0gZXZlbnROYW1lIE5hbWUgb2YgdGhlIGV2ZW50XG4gKiBAcGFyYW0gbGlzdGVuZXJGbiBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gZXZlbnQgZW1pdHNcbiAqIEBwYXJhbSB1c2VDYXB0dXJlIFdoZXRoZXIgb3Igbm90IHRvIHVzZSBjYXB0dXJlIGluIGV2ZW50IGxpc3RlbmVyXG4gKiBAcGFyYW0gZXZlbnRUYXJnZXRSZXNvbHZlciBGdW5jdGlvbiB0aGF0IHJldHVybnMgZ2xvYmFsIHRhcmdldCBpbmZvcm1hdGlvbiBpbiBjYXNlIHRoaXMgbGlzdGVuZXJcbiAqIHNob3VsZCBiZSBhdHRhY2hlZCB0byBhIGdsb2JhbCBvYmplY3QgbGlrZSB3aW5kb3csIGRvY3VtZW50IG9yIGJvZHlcbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1bGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lckZuLCB1c2VDYXB0dXJlLCBldmVudFRhcmdldFJlc29sdmVyKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IHRWaWV3ID0gZ2V0VFZpZXcoKTtcbiAgICBjb25zdCB0Tm9kZSA9IGdldEN1cnJlbnRUTm9kZSgpO1xuICAgIGxpc3RlbmVySW50ZXJuYWwodFZpZXcsIGxWaWV3LCBsVmlld1tSRU5ERVJFUl0sIHROb2RlLCBldmVudE5hbWUsIGxpc3RlbmVyRm4sICEhdXNlQ2FwdHVyZSwgZXZlbnRUYXJnZXRSZXNvbHZlcik7XG4gICAgcmV0dXJuIMm1ybVsaXN0ZW5lcjtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIGEgc3ludGhldGljIGhvc3QgbGlzdGVuZXIgKGUuZy4gYChAZm9vLnN0YXJ0KWApIG9uIGEgY29tcG9uZW50IG9yIGRpcmVjdGl2ZS5cbiAqXG4gKiBUaGlzIGluc3RydWN0aW9uIGlzIGZvciBjb21wYXRpYmlsaXR5IHB1cnBvc2VzIGFuZCBpcyBkZXNpZ25lZCB0byBlbnN1cmUgdGhhdCBhXG4gKiBzeW50aGV0aWMgaG9zdCBsaXN0ZW5lciAoZS5nLiBgQEhvc3RMaXN0ZW5lcignQGZvby5zdGFydCcpYCkgcHJvcGVybHkgZ2V0cyByZW5kZXJlZFxuICogaW4gdGhlIGNvbXBvbmVudCdzIHJlbmRlcmVyLiBOb3JtYWxseSBhbGwgaG9zdCBsaXN0ZW5lcnMgYXJlIGV2YWx1YXRlZCB3aXRoIHRoZVxuICogcGFyZW50IGNvbXBvbmVudCdzIHJlbmRlcmVyLCBidXQsIGluIHRoZSBjYXNlIG9mIGFuaW1hdGlvbiBAdHJpZ2dlcnMsIHRoZXkgbmVlZFxuICogdG8gYmUgZXZhbHVhdGVkIHdpdGggdGhlIHN1YiBjb21wb25lbnQncyByZW5kZXJlciAoYmVjYXVzZSB0aGF0J3Mgd2hlcmUgdGhlXG4gKiBhbmltYXRpb24gdHJpZ2dlcnMgYXJlIGRlZmluZWQpLlxuICpcbiAqIERvIG5vdCB1c2UgdGhpcyBpbnN0cnVjdGlvbiBhcyBhIHJlcGxhY2VtZW50IGZvciBgbGlzdGVuZXJgLiBUaGlzIGluc3RydWN0aW9uXG4gKiBvbmx5IGV4aXN0cyB0byBlbnN1cmUgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBWaWV3RW5naW5lJ3MgaG9zdCBiaW5kaW5nIGJlaGF2aW9yLlxuICpcbiAqIEBwYXJhbSBldmVudE5hbWUgTmFtZSBvZiB0aGUgZXZlbnRcbiAqIEBwYXJhbSBsaXN0ZW5lckZuIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBldmVudCBlbWl0c1xuICogQHBhcmFtIHVzZUNhcHR1cmUgV2hldGhlciBvciBub3QgdG8gdXNlIGNhcHR1cmUgaW4gZXZlbnQgbGlzdGVuZXJcbiAqIEBwYXJhbSBldmVudFRhcmdldFJlc29sdmVyIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyBnbG9iYWwgdGFyZ2V0IGluZm9ybWF0aW9uIGluIGNhc2UgdGhpcyBsaXN0ZW5lclxuICogc2hvdWxkIGJlIGF0dGFjaGVkIHRvIGEgZ2xvYmFsIG9iamVjdCBsaWtlIHdpbmRvdywgZG9jdW1lbnQgb3IgYm9keVxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzeW50aGV0aWNIb3N0TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lckZuKSB7XG4gICAgY29uc3QgdE5vZGUgPSBnZXRDdXJyZW50VE5vZGUoKTtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgIGNvbnN0IGN1cnJlbnREZWYgPSBnZXRDdXJyZW50RGlyZWN0aXZlRGVmKHRWaWV3LmRhdGEpO1xuICAgIGNvbnN0IHJlbmRlcmVyID0gbG9hZENvbXBvbmVudFJlbmRlcmVyKGN1cnJlbnREZWYsIHROb2RlLCBsVmlldyk7XG4gICAgbGlzdGVuZXJJbnRlcm5hbCh0VmlldywgbFZpZXcsIHJlbmRlcmVyLCB0Tm9kZSwgZXZlbnROYW1lLCBsaXN0ZW5lckZuLCBmYWxzZSk7XG4gICAgcmV0dXJuIMm1ybVzeW50aGV0aWNIb3N0TGlzdGVuZXI7XG59XG4vKipcbiAqIEEgdXRpbGl0eSBmdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiBhIGdpdmVuIGVsZW1lbnQgaGFzIGFscmVhZHkgYW4gZXZlbnQgaGFuZGxlciByZWdpc3RlcmVkIGZvciBhblxuICogZXZlbnQgd2l0aCBhIHNwZWNpZmllZCBuYW1lLiBUaGUgVFZpZXcuY2xlYW51cCBkYXRhIHN0cnVjdHVyZSBpcyB1c2VkIHRvIGZpbmQgb3V0IHdoaWNoIGV2ZW50c1xuICogYXJlIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gZmluZEV4aXN0aW5nTGlzdGVuZXIodFZpZXcsIGxWaWV3LCBldmVudE5hbWUsIHROb2RlSWR4KSB7XG4gICAgY29uc3QgdENsZWFudXAgPSB0Vmlldy5jbGVhbnVwO1xuICAgIGlmICh0Q2xlYW51cCAhPSBudWxsKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdENsZWFudXAubGVuZ3RoIC0gMTsgaSArPSAyKSB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbnVwRXZlbnROYW1lID0gdENsZWFudXBbaV07XG4gICAgICAgICAgICBpZiAoY2xlYW51cEV2ZW50TmFtZSA9PT0gZXZlbnROYW1lICYmIHRDbGVhbnVwW2kgKyAxXSA9PT0gdE5vZGVJZHgpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIGZvdW5kIGEgbWF0Y2hpbmcgZXZlbnQgbmFtZSBvbiB0aGUgc2FtZSBub2RlIGJ1dCBpdCBtaWdodCBub3QgaGF2ZSBiZWVuXG4gICAgICAgICAgICAgICAgLy8gcmVnaXN0ZXJlZCB5ZXQsIHNvIHdlIG11c3QgZXhwbGljaXRseSB2ZXJpZnkgZW50cmllcyBpbiB0aGUgTFZpZXcgY2xlYW51cCBkYXRhXG4gICAgICAgICAgICAgICAgLy8gc3RydWN0dXJlcy5cbiAgICAgICAgICAgICAgICBjb25zdCBsQ2xlYW51cCA9IGxWaWV3W0NMRUFOVVBdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVySWR4SW5MQ2xlYW51cCA9IHRDbGVhbnVwW2kgKyAyXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbENsZWFudXAubGVuZ3RoID4gbGlzdGVuZXJJZHhJbkxDbGVhbnVwID8gbENsZWFudXBbbGlzdGVuZXJJZHhJbkxDbGVhbnVwXSA6IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUVmlldy5jbGVhbnVwIGNhbiBoYXZlIGEgbWl4IG9mIDQtZWxlbWVudHMgZW50cmllcyAoZm9yIGV2ZW50IGhhbmRsZXIgY2xlYW51cHMpIG9yXG4gICAgICAgICAgICAvLyAyLWVsZW1lbnQgZW50cmllcyAoZm9yIGRpcmVjdGl2ZSBhbmQgcXVlcmllcyBkZXN0cm95IGhvb2tzKS4gQXMgc3VjaCB3ZSBjYW4gZW5jb3VudGVyXG4gICAgICAgICAgICAvLyBibG9ja3Mgb2YgNCBvciAyIGl0ZW1zIGluIHRoZSB0Vmlldy5jbGVhbnVwIGFuZCB0aGlzIGlzIHdoeSB3ZSBpdGVyYXRlIG92ZXIgMiBlbGVtZW50c1xuICAgICAgICAgICAgLy8gZmlyc3QgYW5kIGp1bXAgYW5vdGhlciAyIGVsZW1lbnRzIGlmIHdlIGRldGVjdCBsaXN0ZW5lcnMgY2xlYW51cCAoNCBlbGVtZW50cykuIEFsc28gY2hlY2tcbiAgICAgICAgICAgIC8vIGRvY3VtZW50YXRpb24gb2YgVFZpZXcuY2xlYW51cCBmb3IgbW9yZSBkZXRhaWxzIG9mIHRoaXMgZGF0YSBzdHJ1Y3R1cmUgbGF5b3V0LlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjbGVhbnVwRXZlbnROYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGxpc3RlbmVySW50ZXJuYWwodFZpZXcsIGxWaWV3LCByZW5kZXJlciwgdE5vZGUsIGV2ZW50TmFtZSwgbGlzdGVuZXJGbiwgdXNlQ2FwdHVyZSwgZXZlbnRUYXJnZXRSZXNvbHZlcikge1xuICAgIGNvbnN0IGlzVE5vZGVEaXJlY3RpdmVIb3N0ID0gaXNEaXJlY3RpdmVIb3N0KHROb2RlKTtcbiAgICBjb25zdCBmaXJzdENyZWF0ZVBhc3MgPSB0Vmlldy5maXJzdENyZWF0ZVBhc3M7XG4gICAgY29uc3QgdENsZWFudXAgPSBmaXJzdENyZWF0ZVBhc3MgJiYgZ2V0T3JDcmVhdGVUVmlld0NsZWFudXAodFZpZXcpO1xuICAgIGNvbnN0IGNvbnRleHQgPSBsVmlld1tDT05URVhUXTtcbiAgICAvLyBXaGVuIHRoZSDJtcm1bGlzdGVuZXIgaW5zdHJ1Y3Rpb24gd2FzIGdlbmVyYXRlZCBhbmQgaXMgZXhlY3V0ZWQgd2Uga25vdyB0aGF0IHRoZXJlIGlzIGVpdGhlciBhXG4gICAgLy8gbmF0aXZlIGxpc3RlbmVyIG9yIGEgZGlyZWN0aXZlIG91dHB1dCBvbiB0aGlzIGVsZW1lbnQuIEFzIHN1Y2ggd2Ugd2Uga25vdyB0aGF0IHdlIHdpbGwgaGF2ZSB0b1xuICAgIC8vIHJlZ2lzdGVyIGEgbGlzdGVuZXIgYW5kIHN0b3JlIGl0cyBjbGVhbnVwIGZ1bmN0aW9uIG9uIExWaWV3LlxuICAgIGNvbnN0IGxDbGVhbnVwID0gZ2V0T3JDcmVhdGVMVmlld0NsZWFudXAobFZpZXcpO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUTm9kZVR5cGUodE5vZGUsIDMgLyogQW55Uk5vZGUgKi8gfCAxMiAvKiBBbnlDb250YWluZXIgKi8pO1xuICAgIGxldCBwcm9jZXNzT3V0cHV0cyA9IHRydWU7XG4gICAgLy8gQWRkaW5nIGEgbmF0aXZlIGV2ZW50IGxpc3RlbmVyIGlzIGFwcGxpY2FibGUgd2hlbjpcbiAgICAvLyAtIFRoZSBjb3JyZXNwb25kaW5nIFROb2RlIHJlcHJlc2VudHMgYSBET00gZWxlbWVudC5cbiAgICAvLyAtIFRoZSBldmVudCB0YXJnZXQgaGFzIGEgcmVzb2x2ZXIgKHVzdWFsbHkgcmVzdWx0aW5nIGluIGEgZ2xvYmFsIG9iamVjdCxcbiAgICAvLyAgIHN1Y2ggYXMgYHdpbmRvd2Agb3IgYGRvY3VtZW50YCkuXG4gICAgaWYgKCh0Tm9kZS50eXBlICYgMyAvKiBBbnlSTm9kZSAqLykgfHwgZXZlbnRUYXJnZXRSZXNvbHZlcikge1xuICAgICAgICBjb25zdCBuYXRpdmUgPSBnZXROYXRpdmVCeVROb2RlKHROb2RlLCBsVmlldyk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50VGFyZ2V0UmVzb2x2ZXIgPyBldmVudFRhcmdldFJlc29sdmVyKG5hdGl2ZSkgOiBuYXRpdmU7XG4gICAgICAgIGNvbnN0IGxDbGVhbnVwSW5kZXggPSBsQ2xlYW51cC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGlkeE9yVGFyZ2V0R2V0dGVyID0gZXZlbnRUYXJnZXRSZXNvbHZlciA/XG4gICAgICAgICAgICAoX2xWaWV3KSA9PiBldmVudFRhcmdldFJlc29sdmVyKHVud3JhcFJOb2RlKF9sVmlld1t0Tm9kZS5pbmRleF0pKSA6XG4gICAgICAgICAgICB0Tm9kZS5pbmRleDtcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gbWF0Y2ggY3VycmVudCBiZWhhdmlvciwgbmF0aXZlIERPTSBldmVudCBsaXN0ZW5lcnMgbXVzdCBiZSBhZGRlZCBmb3IgYWxsXG4gICAgICAgIC8vIGV2ZW50cyAoaW5jbHVkaW5nIG91dHB1dHMpLlxuICAgICAgICBpZiAoaXNQcm9jZWR1cmFsUmVuZGVyZXIocmVuZGVyZXIpKSB7XG4gICAgICAgICAgICAvLyBUaGVyZSBtaWdodCBiZSBjYXNlcyB3aGVyZSBtdWx0aXBsZSBkaXJlY3RpdmVzIG9uIHRoZSBzYW1lIGVsZW1lbnQgdHJ5IHRvIHJlZ2lzdGVyIGFuIGV2ZW50XG4gICAgICAgICAgICAvLyBoYW5kbGVyIGZ1bmN0aW9uIGZvciB0aGUgc2FtZSBldmVudC4gSW4gdGhpcyBzaXR1YXRpb24gd2Ugd2FudCB0byBhdm9pZCByZWdpc3RyYXRpb24gb2ZcbiAgICAgICAgICAgIC8vIHNldmVyYWwgbmF0aXZlIGxpc3RlbmVycyBhcyBlYWNoIHJlZ2lzdHJhdGlvbiB3b3VsZCBiZSBpbnRlcmNlcHRlZCBieSBOZ1pvbmUgYW5kXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIGNoYW5nZSBkZXRlY3Rpb24uIFRoaXMgd291bGQgbWVhbiB0aGF0IGEgc2luZ2xlIHVzZXIgYWN0aW9uIHdvdWxkIHJlc3VsdCBpbiBzZXZlcmFsXG4gICAgICAgICAgICAvLyBjaGFuZ2UgZGV0ZWN0aW9ucyBiZWluZyBpbnZva2VkLiBUbyBhdm9pZCB0aGlzIHNpdHVhdGlvbiB3ZSB3YW50IHRvIGhhdmUgb25seSBvbmUgY2FsbCB0b1xuICAgICAgICAgICAgLy8gbmF0aXZlIGhhbmRsZXIgcmVnaXN0cmF0aW9uIChmb3IgdGhlIHNhbWUgZWxlbWVudCBhbmQgc2FtZSB0eXBlIG9mIGV2ZW50KS5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBJbiBvcmRlciB0byBoYXZlIGp1c3Qgb25lIG5hdGl2ZSBldmVudCBoYW5kbGVyIGluIHByZXNlbmNlIG9mIG11bHRpcGxlIGhhbmRsZXIgZnVuY3Rpb25zLFxuICAgICAgICAgICAgLy8gd2UganVzdCByZWdpc3RlciBhIGZpcnN0IGhhbmRsZXIgZnVuY3Rpb24gYXMgYSBuYXRpdmUgZXZlbnQgbGlzdGVuZXIgYW5kIHRoZW4gY2hhaW5cbiAgICAgICAgICAgIC8vIChjb2FsZXNjZSkgb3RoZXIgaGFuZGxlciBmdW5jdGlvbnMgb24gdG9wIG9mIHRoZSBmaXJzdCBuYXRpdmUgaGFuZGxlciBmdW5jdGlvbi5cbiAgICAgICAgICAgIGxldCBleGlzdGluZ0xpc3RlbmVyID0gbnVsbDtcbiAgICAgICAgICAgIC8vIFBsZWFzZSBub3RlIHRoYXQgdGhlIGNvYWxlc2NpbmcgZGVzY3JpYmVkIGhlcmUgZG9lc24ndCBoYXBwZW4gZm9yIGV2ZW50cyBzcGVjaWZ5aW5nIGFuXG4gICAgICAgICAgICAvLyBhbHRlcm5hdGl2ZSB0YXJnZXQgKGV4LiAoZG9jdW1lbnQ6Y2xpY2spKSAtIHRoaXMgaXMgdG8ga2VlcCBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHdpdGggdGhlXG4gICAgICAgICAgICAvLyB2aWV3IGVuZ2luZS5cbiAgICAgICAgICAgIC8vIEFsc28sIHdlIGRvbid0IGhhdmUgdG8gc2VhcmNoIGZvciBleGlzdGluZyBsaXN0ZW5lcnMgaXMgdGhlcmUgYXJlIG5vIGRpcmVjdGl2ZXNcbiAgICAgICAgICAgIC8vIG1hdGNoaW5nIG9uIGEgZ2l2ZW4gbm9kZSBhcyB3ZSBjYW4ndCByZWdpc3RlciBtdWx0aXBsZSBldmVudCBoYW5kbGVycyBmb3IgdGhlIHNhbWUgZXZlbnQgaW5cbiAgICAgICAgICAgIC8vIGEgdGVtcGxhdGUgKHRoaXMgd291bGQgbWVhbiBoYXZpbmcgZHVwbGljYXRlIGF0dHJpYnV0ZXMpLlxuICAgICAgICAgICAgaWYgKCFldmVudFRhcmdldFJlc29sdmVyICYmIGlzVE5vZGVEaXJlY3RpdmVIb3N0KSB7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdMaXN0ZW5lciA9IGZpbmRFeGlzdGluZ0xpc3RlbmVyKHRWaWV3LCBsVmlldywgZXZlbnROYW1lLCB0Tm9kZS5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdMaXN0ZW5lciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIEF0dGFjaCBhIG5ldyBsaXN0ZW5lciB0byBjb2FsZXNjZWQgbGlzdGVuZXJzIGxpc3QsIG1haW50YWluaW5nIHRoZSBvcmRlciBpbiB3aGljaFxuICAgICAgICAgICAgICAgIC8vIGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZC4gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIHdlIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIGxhc3RcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5lciBpbiB0aGF0IGxpc3QgKGluIGBfX25nTGFzdExpc3RlbmVyRm5fX2AgZmllbGQpLCBzbyB3ZSBjYW4gYXZvaWQgZ29pbmcgdGhyb3VnaFxuICAgICAgICAgICAgICAgIC8vIHRoZSBlbnRpcmUgc2V0IGVhY2ggdGltZSB3ZSBuZWVkIHRvIGFkZCBhIG5ldyBsaXN0ZW5lci5cbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0TGlzdGVuZXJGbiA9IGV4aXN0aW5nTGlzdGVuZXIuX19uZ0xhc3RMaXN0ZW5lckZuX18gfHwgZXhpc3RpbmdMaXN0ZW5lcjtcbiAgICAgICAgICAgICAgICBsYXN0TGlzdGVuZXJGbi5fX25nTmV4dExpc3RlbmVyRm5fXyA9IGxpc3RlbmVyRm47XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdMaXN0ZW5lci5fX25nTGFzdExpc3RlbmVyRm5fXyA9IGxpc3RlbmVyRm47XG4gICAgICAgICAgICAgICAgcHJvY2Vzc091dHB1dHMgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyRm4gPSB3cmFwTGlzdGVuZXIodE5vZGUsIGxWaWV3LCBjb250ZXh0LCBsaXN0ZW5lckZuLCBmYWxzZSAvKiogcHJldmVudERlZmF1bHQgKi8pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsZWFudXBGbiA9IHJlbmRlcmVyLmxpc3Rlbih0YXJnZXQsIGV2ZW50TmFtZSwgbGlzdGVuZXJGbik7XG4gICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5yZW5kZXJlckFkZEV2ZW50TGlzdGVuZXIrKztcbiAgICAgICAgICAgICAgICBsQ2xlYW51cC5wdXNoKGxpc3RlbmVyRm4sIGNsZWFudXBGbik7XG4gICAgICAgICAgICAgICAgdENsZWFudXAgJiYgdENsZWFudXAucHVzaChldmVudE5hbWUsIGlkeE9yVGFyZ2V0R2V0dGVyLCBsQ2xlYW51cEluZGV4LCBsQ2xlYW51cEluZGV4ICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsaXN0ZW5lckZuID0gd3JhcExpc3RlbmVyKHROb2RlLCBsVmlldywgY29udGV4dCwgbGlzdGVuZXJGbiwgdHJ1ZSAvKiogcHJldmVudERlZmF1bHQgKi8pO1xuICAgICAgICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lckZuLCB1c2VDYXB0dXJlKTtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJBZGRFdmVudExpc3RlbmVyKys7XG4gICAgICAgICAgICBsQ2xlYW51cC5wdXNoKGxpc3RlbmVyRm4pO1xuICAgICAgICAgICAgdENsZWFudXAgJiYgdENsZWFudXAucHVzaChldmVudE5hbWUsIGlkeE9yVGFyZ2V0R2V0dGVyLCBsQ2xlYW51cEluZGV4LCB1c2VDYXB0dXJlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gRXZlbiBpZiB0aGVyZSBpcyBubyBuYXRpdmUgbGlzdGVuZXIgdG8gYWRkLCB3ZSBzdGlsbCBuZWVkIHRvIHdyYXAgdGhlIGxpc3RlbmVyIHNvIHRoYXQgT25QdXNoXG4gICAgICAgIC8vIGFuY2VzdG9ycyBhcmUgbWFya2VkIGRpcnR5IHdoZW4gYW4gZXZlbnQgb2NjdXJzLlxuICAgICAgICBsaXN0ZW5lckZuID0gd3JhcExpc3RlbmVyKHROb2RlLCBsVmlldywgY29udGV4dCwgbGlzdGVuZXJGbiwgZmFsc2UgLyoqIHByZXZlbnREZWZhdWx0ICovKTtcbiAgICB9XG4gICAgLy8gc3Vic2NyaWJlIHRvIGRpcmVjdGl2ZSBvdXRwdXRzXG4gICAgY29uc3Qgb3V0cHV0cyA9IHROb2RlLm91dHB1dHM7XG4gICAgbGV0IHByb3BzO1xuICAgIGlmIChwcm9jZXNzT3V0cHV0cyAmJiBvdXRwdXRzICE9PSBudWxsICYmIChwcm9wcyA9IG91dHB1dHNbZXZlbnROYW1lXSkpIHtcbiAgICAgICAgY29uc3QgcHJvcHNMZW5ndGggPSBwcm9wcy5sZW5ndGg7XG4gICAgICAgIGlmIChwcm9wc0xlbmd0aCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wc0xlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwcm9wc1tpXTtcbiAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0SW5kZXhJblJhbmdlKGxWaWV3LCBpbmRleCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWluaWZpZWROYW1lID0gcHJvcHNbaSArIDFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdGl2ZUluc3RhbmNlID0gbFZpZXdbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGRpcmVjdGl2ZUluc3RhbmNlW21pbmlmaWVkTmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKG5nRGV2TW9kZSAmJiAhaXNPYnNlcnZhYmxlKG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBAT3V0cHV0ICR7bWluaWZpZWROYW1lfSBub3QgaW5pdGlhbGl6ZWQgaW4gJyR7ZGlyZWN0aXZlSW5zdGFuY2UuY29uc3RydWN0b3IubmFtZX0nLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBvdXRwdXQuc3Vic2NyaWJlKGxpc3RlbmVyRm4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IGxDbGVhbnVwLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsQ2xlYW51cC5wdXNoKGxpc3RlbmVyRm4sIHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgdENsZWFudXAgJiYgdENsZWFudXAucHVzaChldmVudE5hbWUsIHROb2RlLmluZGV4LCBpZHgsIC0oaWR4ICsgMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZXhlY3V0ZUxpc3RlbmVyV2l0aEVycm9ySGFuZGxpbmcobFZpZXcsIGNvbnRleHQsIGxpc3RlbmVyRm4sIGUpIHtcbiAgICB0cnkge1xuICAgICAgICBwcm9maWxlcig2IC8qIE91dHB1dFN0YXJ0ICovLCBjb250ZXh0LCBsaXN0ZW5lckZuKTtcbiAgICAgICAgLy8gT25seSBleHBsaWNpdGx5IHJldHVybmluZyBmYWxzZSBmcm9tIGEgbGlzdGVuZXIgc2hvdWxkIHByZXZlbnREZWZhdWx0XG4gICAgICAgIHJldHVybiBsaXN0ZW5lckZuKGUpICE9PSBmYWxzZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGhhbmRsZUVycm9yKGxWaWV3LCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIHByb2ZpbGVyKDcgLyogT3V0cHV0RW5kICovLCBjb250ZXh0LCBsaXN0ZW5lckZuKTtcbiAgICB9XG59XG4vKipcbiAqIFdyYXBzIGFuIGV2ZW50IGxpc3RlbmVyIHdpdGggYSBmdW5jdGlvbiB0aGF0IG1hcmtzIGFuY2VzdG9ycyBkaXJ0eSBhbmQgcHJldmVudHMgZGVmYXVsdCBiZWhhdmlvcixcbiAqIGlmIGFwcGxpY2FibGUuXG4gKlxuICogQHBhcmFtIHROb2RlIFRoZSBUTm9kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBsaXN0ZW5lclxuICogQHBhcmFtIGxWaWV3IFRoZSBMVmlldyB0aGF0IGNvbnRhaW5zIHRoaXMgbGlzdGVuZXJcbiAqIEBwYXJhbSBsaXN0ZW5lckZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byBjYWxsXG4gKiBAcGFyYW0gd3JhcFdpdGhQcmV2ZW50RGVmYXVsdCBXaGV0aGVyIG9yIG5vdCB0byBwcmV2ZW50IGRlZmF1bHQgYmVoYXZpb3JcbiAqICh0aGUgcHJvY2VkdXJhbCByZW5kZXJlciBkb2VzIHRoaXMgYWxyZWFkeSwgc28gaW4gdGhvc2UgY2FzZXMsIHdlIHNob3VsZCBza2lwKVxuICovXG5mdW5jdGlvbiB3cmFwTGlzdGVuZXIodE5vZGUsIGxWaWV3LCBjb250ZXh0LCBsaXN0ZW5lckZuLCB3cmFwV2l0aFByZXZlbnREZWZhdWx0KSB7XG4gICAgLy8gTm90ZTogd2UgYXJlIHBlcmZvcm1pbmcgbW9zdCBvZiB0aGUgd29yayBpbiB0aGUgbGlzdGVuZXIgZnVuY3Rpb24gaXRzZWxmXG4gICAgLy8gdG8gb3B0aW1pemUgbGlzdGVuZXIgcmVnaXN0cmF0aW9uLlxuICAgIHJldHVybiBmdW5jdGlvbiB3cmFwTGlzdGVuZXJJbl9tYXJrRGlydHlBbmRQcmV2ZW50RGVmYXVsdChlKSB7XG4gICAgICAgIC8vIEl2eSB1c2VzIGBGdW5jdGlvbmAgYXMgYSBzcGVjaWFsIHRva2VuIHRoYXQgYWxsb3dzIHVzIHRvIHVud3JhcCB0aGUgZnVuY3Rpb25cbiAgICAgICAgLy8gc28gdGhhdCBpdCBjYW4gYmUgaW52b2tlZCBwcm9ncmFtbWF0aWNhbGx5IGJ5IGBEZWJ1Z05vZGUudHJpZ2dlckV2ZW50SGFuZGxlcmAuXG4gICAgICAgIGlmIChlID09PSBGdW5jdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyRm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gYmUgYmFja3dhcmRzIGNvbXBhdGlibGUgd2l0aCBWaWV3IEVuZ2luZSwgZXZlbnRzIG9uIGNvbXBvbmVudCBob3N0IG5vZGVzXG4gICAgICAgIC8vIG11c3QgYWxzbyBtYXJrIHRoZSBjb21wb25lbnQgdmlldyBpdHNlbGYgZGlydHkgKGkuZS4gdGhlIHZpZXcgdGhhdCBpdCBvd25zKS5cbiAgICAgICAgY29uc3Qgc3RhcnRWaWV3ID0gdE5vZGUuZmxhZ3MgJiAyIC8qIGlzQ29tcG9uZW50SG9zdCAqLyA/XG4gICAgICAgICAgICBnZXRDb21wb25lbnRMVmlld0J5SW5kZXgodE5vZGUuaW5kZXgsIGxWaWV3KSA6XG4gICAgICAgICAgICBsVmlldztcbiAgICAgICAgLy8gU2VlIGludGVyZmFjZXMvdmlldy50cyBmb3IgbW9yZSBvbiBMVmlld0ZsYWdzLk1hbnVhbE9uUHVzaFxuICAgICAgICBpZiAoKGxWaWV3W0ZMQUdTXSAmIDMyIC8qIE1hbnVhbE9uUHVzaCAqLykgPT09IDApIHtcbiAgICAgICAgICAgIG1hcmtWaWV3RGlydHkoc3RhcnRWaWV3KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcmVzdWx0ID0gZXhlY3V0ZUxpc3RlbmVyV2l0aEVycm9ySGFuZGxpbmcobFZpZXcsIGNvbnRleHQsIGxpc3RlbmVyRm4sIGUpO1xuICAgICAgICAvLyBBIGp1c3QtaW52b2tlZCBsaXN0ZW5lciBmdW5jdGlvbiBtaWdodCBoYXZlIGNvYWxlc2NlZCBsaXN0ZW5lcnMgc28gd2UgbmVlZCB0byBjaGVjayBmb3JcbiAgICAgICAgLy8gdGhlaXIgcHJlc2VuY2UgYW5kIGludm9rZSBhcyBuZWVkZWQuXG4gICAgICAgIGxldCBuZXh0TGlzdGVuZXJGbiA9IHdyYXBMaXN0ZW5lckluX21hcmtEaXJ0eUFuZFByZXZlbnREZWZhdWx0Ll9fbmdOZXh0TGlzdGVuZXJGbl9fO1xuICAgICAgICB3aGlsZSAobmV4dExpc3RlbmVyRm4pIHtcbiAgICAgICAgICAgIC8vIFdlIHNob3VsZCBwcmV2ZW50IGRlZmF1bHQgaWYgYW55IG9mIHRoZSBsaXN0ZW5lcnMgZXhwbGljaXRseSByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgIHJlc3VsdCA9IGV4ZWN1dGVMaXN0ZW5lcldpdGhFcnJvckhhbmRsaW5nKGxWaWV3LCBjb250ZXh0LCBuZXh0TGlzdGVuZXJGbiwgZSkgJiYgcmVzdWx0O1xuICAgICAgICAgICAgbmV4dExpc3RlbmVyRm4gPSBuZXh0TGlzdGVuZXJGbi5fX25nTmV4dExpc3RlbmVyRm5fXztcbiAgICAgICAgfVxuICAgICAgICBpZiAod3JhcFdpdGhQcmV2ZW50RGVmYXVsdCAmJiByZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAvLyBOZWNlc3NhcnkgZm9yIGxlZ2FjeSBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgcHJldmVudERlZmF1bHQgKGUuZy4gSUUpXG4gICAgICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFJldHJpZXZlcyBhIGNvbnRleHQgYXQgdGhlIGxldmVsIHNwZWNpZmllZCBhbmQgc2F2ZXMgaXQgYXMgdGhlIGdsb2JhbCwgY29udGV4dFZpZXdEYXRhLlxuICogV2lsbCBnZXQgdGhlIG5leHQgbGV2ZWwgdXAgaWYgbGV2ZWwgaXMgbm90IHNwZWNpZmllZC5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgdG8gc2F2ZSBjb250ZXh0cyBvZiBwYXJlbnQgdmlld3Mgc28gdGhleSBjYW4gYmUgYm91bmQgaW4gZW1iZWRkZWQgdmlld3MsIG9yXG4gKiBpbiBjb25qdW5jdGlvbiB3aXRoIHJlZmVyZW5jZSgpIHRvIGJpbmQgYSByZWYgZnJvbSBhIHBhcmVudCB2aWV3LlxuICpcbiAqIEBwYXJhbSBsZXZlbCBUaGUgcmVsYXRpdmUgbGV2ZWwgb2YgdGhlIHZpZXcgZnJvbSB3aGljaCB0byBncmFiIGNvbnRleHQgY29tcGFyZWQgdG8gY29udGV4dFZld0RhdGFcbiAqIEByZXR1cm5zIGNvbnRleHRcbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1bmV4dENvbnRleHQobGV2ZWwgPSAxKSB7XG4gICAgcmV0dXJuIG5leHRDb250ZXh0SW1wbChsZXZlbCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBDaGVja3MgYSBnaXZlbiBub2RlIGFnYWluc3QgbWF0Y2hpbmcgcHJvamVjdGlvbiBzbG90cyBhbmQgcmV0dXJucyB0aGVcbiAqIGRldGVybWluZWQgc2xvdCBpbmRleC4gUmV0dXJucyBcIm51bGxcIiBpZiBubyBzbG90IG1hdGNoZWQgdGhlIGdpdmVuIG5vZGUuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBpbnRvIGFjY291bnQgdGhlIHBhcnNlZCBuZ1Byb2plY3RBcyBzZWxlY3RvciBmcm9tIHRoZVxuICogbm9kZSdzIGF0dHJpYnV0ZXMuIElmIHByZXNlbnQsIGl0IHdpbGwgY2hlY2sgd2hldGhlciB0aGUgbmdQcm9qZWN0QXMgc2VsZWN0b3JcbiAqIG1hdGNoZXMgYW55IG9mIHRoZSBwcm9qZWN0aW9uIHNsb3Qgc2VsZWN0b3JzLlxuICovXG5mdW5jdGlvbiBtYXRjaGluZ1Byb2plY3Rpb25TbG90SW5kZXgodE5vZGUsIHByb2plY3Rpb25TbG90cykge1xuICAgIGxldCB3aWxkY2FyZE5nQ29udGVudEluZGV4ID0gbnVsbDtcbiAgICBjb25zdCBuZ1Byb2plY3RBc0F0dHJWYWwgPSBnZXRQcm9qZWN0QXNBdHRyVmFsdWUodE5vZGUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdGlvblNsb3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHNsb3RWYWx1ZSA9IHByb2plY3Rpb25TbG90c1tpXTtcbiAgICAgICAgLy8gVGhlIGxhc3Qgd2lsZGNhcmQgcHJvamVjdGlvbiBzbG90IHNob3VsZCBtYXRjaCBhbGwgbm9kZXMgd2hpY2ggYXJlbid0IG1hdGNoaW5nXG4gICAgICAgIC8vIGFueSBzZWxlY3Rvci4gVGhpcyBpcyBuZWNlc3NhcnkgdG8gYmUgYmFja3dhcmRzIGNvbXBhdGlibGUgd2l0aCB2aWV3IGVuZ2luZS5cbiAgICAgICAgaWYgKHNsb3RWYWx1ZSA9PT0gJyonKSB7XG4gICAgICAgICAgICB3aWxkY2FyZE5nQ29udGVudEluZGV4ID0gaTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIHJhbiBpbnRvIGFuIGBuZ1Byb2plY3RBc2AgYXR0cmlidXRlLCB3ZSBzaG91bGQgbWF0Y2ggaXRzIHBhcnNlZCBzZWxlY3RvclxuICAgICAgICAvLyB0byB0aGUgbGlzdCBvZiBzZWxlY3RvcnMsIG90aGVyd2lzZSB3ZSBmYWxsIGJhY2sgdG8gbWF0Y2hpbmcgYWdhaW5zdCB0aGUgbm9kZS5cbiAgICAgICAgaWYgKG5nUHJvamVjdEFzQXR0clZhbCA9PT0gbnVsbCA/XG4gICAgICAgICAgICBpc05vZGVNYXRjaGluZ1NlbGVjdG9yTGlzdCh0Tm9kZSwgc2xvdFZhbHVlLCAvKiBpc1Byb2plY3Rpb25Nb2RlICovIHRydWUpIDpcbiAgICAgICAgICAgIGlzU2VsZWN0b3JJblNlbGVjdG9yTGlzdChuZ1Byb2plY3RBc0F0dHJWYWwsIHNsb3RWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBpOyAvLyBmaXJzdCBtYXRjaGluZyBzZWxlY3RvciBcImNhcHR1cmVzXCIgYSBnaXZlbiBub2RlXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHdpbGRjYXJkTmdDb250ZW50SW5kZXg7XG59XG4vKipcbiAqIEluc3RydWN0aW9uIHRvIGRpc3RyaWJ1dGUgcHJvamVjdGFibGUgbm9kZXMgYW1vbmcgPG5nLWNvbnRlbnQ+IG9jY3VycmVuY2VzIGluIGEgZ2l2ZW4gdGVtcGxhdGUuXG4gKiBJdCB0YWtlcyBhbGwgdGhlIHNlbGVjdG9ycyBmcm9tIHRoZSBlbnRpcmUgY29tcG9uZW50J3MgdGVtcGxhdGUgYW5kIGRlY2lkZXMgd2hlcmVcbiAqIGVhY2ggcHJvamVjdGVkIG5vZGUgYmVsb25ncyAoaXQgcmUtZGlzdHJpYnV0ZXMgbm9kZXMgYW1vbmcgXCJidWNrZXRzXCIgd2hlcmUgZWFjaCBcImJ1Y2tldFwiIGlzXG4gKiBiYWNrZWQgYnkgYSBzZWxlY3RvcikuXG4gKlxuICogVGhpcyBmdW5jdGlvbiByZXF1aXJlcyBDU1Mgc2VsZWN0b3JzIHRvIGJlIHByb3ZpZGVkIGluIDIgZm9ybXM6IHBhcnNlZCAoYnkgYSBjb21waWxlcikgYW5kIHRleHQsXG4gKiB1bi1wYXJzZWQgZm9ybS5cbiAqXG4gKiBUaGUgcGFyc2VkIGZvcm0gaXMgbmVlZGVkIGZvciBlZmZpY2llbnQgbWF0Y2hpbmcgb2YgYSBub2RlIGFnYWluc3QgYSBnaXZlbiBDU1Mgc2VsZWN0b3IuXG4gKiBUaGUgdW4tcGFyc2VkLCB0ZXh0dWFsIGZvcm0gaXMgbmVlZGVkIGZvciBzdXBwb3J0IG9mIHRoZSBuZ1Byb2plY3RBcyBhdHRyaWJ1dGUuXG4gKlxuICogSGF2aW5nIGEgQ1NTIHNlbGVjdG9yIGluIDIgZGlmZmVyZW50IGZvcm1hdHMgaXMgbm90IGlkZWFsLCBidXQgYWx0ZXJuYXRpdmVzIGhhdmUgZXZlbiBtb3JlXG4gKiBkcmF3YmFja3M6XG4gKiAtIGhhdmluZyBvbmx5IGEgdGV4dHVhbCBmb3JtIHdvdWxkIHJlcXVpcmUgcnVudGltZSBwYXJzaW5nIG9mIENTUyBzZWxlY3RvcnM7XG4gKiAtIHdlIGNhbid0IGhhdmUgb25seSBhIHBhcnNlZCBhcyB3ZSBjYW4ndCByZS1jb25zdHJ1Y3QgdGV4dHVhbCBmb3JtIGZyb20gaXQgKGFzIGVudGVyZWQgYnkgYVxuICogdGVtcGxhdGUgYXV0aG9yKS5cbiAqXG4gKiBAcGFyYW0gcHJvamVjdGlvblNsb3RzPyBBIGNvbGxlY3Rpb24gb2YgcHJvamVjdGlvbiBzbG90cy4gQSBwcm9qZWN0aW9uIHNsb3QgY2FuIGJlIGJhc2VkXG4gKiAgICAgICAgb24gYSBwYXJzZWQgQ1NTIHNlbGVjdG9ycyBvciBzZXQgdG8gdGhlIHdpbGRjYXJkIHNlbGVjdG9yIChcIipcIikgaW4gb3JkZXIgdG8gbWF0Y2hcbiAqICAgICAgICBhbGwgbm9kZXMgd2hpY2ggZG8gbm90IG1hdGNoIGFueSBzZWxlY3Rvci4gSWYgbm90IHNwZWNpZmllZCwgYSBzaW5nbGUgd2lsZGNhcmRcbiAqICAgICAgICBzZWxlY3RvciBwcm9qZWN0aW9uIHNsb3Qgd2lsbCBiZSBkZWZpbmVkLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwcm9qZWN0aW9uRGVmKHByb2plY3Rpb25TbG90cykge1xuICAgIGNvbnN0IGNvbXBvbmVudE5vZGUgPSBnZXRMVmlldygpW0RFQ0xBUkFUSU9OX0NPTVBPTkVOVF9WSUVXXVtUX0hPU1RdO1xuICAgIGlmICghY29tcG9uZW50Tm9kZS5wcm9qZWN0aW9uKSB7XG4gICAgICAgIC8vIElmIG5vIGV4cGxpY2l0IHByb2plY3Rpb24gc2xvdHMgYXJlIGRlZmluZWQsIGZhbGwgYmFjayB0byBhIHNpbmdsZVxuICAgICAgICAvLyBwcm9qZWN0aW9uIHNsb3Qgd2l0aCB0aGUgd2lsZGNhcmQgc2VsZWN0b3IuXG4gICAgICAgIGNvbnN0IG51bVByb2plY3Rpb25TbG90cyA9IHByb2plY3Rpb25TbG90cyA/IHByb2plY3Rpb25TbG90cy5sZW5ndGggOiAxO1xuICAgICAgICBjb25zdCBwcm9qZWN0aW9uSGVhZHMgPSBjb21wb25lbnROb2RlLnByb2plY3Rpb24gPVxuICAgICAgICAgICAgbmV3QXJyYXkobnVtUHJvamVjdGlvblNsb3RzLCBudWxsKTtcbiAgICAgICAgY29uc3QgdGFpbHMgPSBwcm9qZWN0aW9uSGVhZHMuc2xpY2UoKTtcbiAgICAgICAgbGV0IGNvbXBvbmVudENoaWxkID0gY29tcG9uZW50Tm9kZS5jaGlsZDtcbiAgICAgICAgd2hpbGUgKGNvbXBvbmVudENoaWxkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBzbG90SW5kZXggPSBwcm9qZWN0aW9uU2xvdHMgPyBtYXRjaGluZ1Byb2plY3Rpb25TbG90SW5kZXgoY29tcG9uZW50Q2hpbGQsIHByb2plY3Rpb25TbG90cykgOiAwO1xuICAgICAgICAgICAgaWYgKHNsb3RJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0YWlsc1tzbG90SW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhaWxzW3Nsb3RJbmRleF0ucHJvamVjdGlvbk5leHQgPSBjb21wb25lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb25IZWFkc1tzbG90SW5kZXhdID0gY29tcG9uZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhaWxzW3Nsb3RJbmRleF0gPSBjb21wb25lbnRDaGlsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbXBvbmVudENoaWxkID0gY29tcG9uZW50Q2hpbGQubmV4dDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogSW5zZXJ0cyBwcmV2aW91c2x5IHJlLWRpc3RyaWJ1dGVkIHByb2plY3RlZCBub2Rlcy4gVGhpcyBpbnN0cnVjdGlvbiBtdXN0IGJlIHByZWNlZGVkIGJ5IGEgY2FsbFxuICogdG8gdGhlIHByb2plY3Rpb25EZWYgaW5zdHJ1Y3Rpb24uXG4gKlxuICogQHBhcmFtIG5vZGVJbmRleFxuICogQHBhcmFtIHNlbGVjdG9ySW5kZXg6XG4gKiAgICAgICAgLSAwIHdoZW4gdGhlIHNlbGVjdG9yIGlzIGAqYCAob3IgdW5zcGVjaWZpZWQgYXMgdGhpcyBpcyB0aGUgZGVmYXVsdCB2YWx1ZSksXG4gKiAgICAgICAgLSAxIGJhc2VkIGluZGV4IG9mIHRoZSBzZWxlY3RvciBmcm9tIHRoZSB7QGxpbmsgcHJvamVjdGlvbkRlZn1cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cHJvamVjdGlvbihub2RlSW5kZXgsIHNlbGVjdG9ySW5kZXggPSAwLCBhdHRycykge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgY29uc3QgdFByb2plY3Rpb25Ob2RlID0gZ2V0T3JDcmVhdGVUTm9kZSh0VmlldywgSEVBREVSX09GRlNFVCArIG5vZGVJbmRleCwgMTYgLyogUHJvamVjdGlvbiAqLywgbnVsbCwgYXR0cnMgfHwgbnVsbCk7XG4gICAgLy8gV2UgY2FuJ3QgdXNlIHZpZXdEYXRhW0hPU1RfTk9ERV0gYmVjYXVzZSBwcm9qZWN0aW9uIG5vZGVzIGNhbiBiZSBuZXN0ZWQgaW4gZW1iZWRkZWQgdmlld3MuXG4gICAgaWYgKHRQcm9qZWN0aW9uTm9kZS5wcm9qZWN0aW9uID09PSBudWxsKVxuICAgICAgICB0UHJvamVjdGlvbk5vZGUucHJvamVjdGlvbiA9IHNlbGVjdG9ySW5kZXg7XG4gICAgLy8gYDxuZy1jb250ZW50PmAgaGFzIG5vIGNvbnRlbnRcbiAgICBzZXRDdXJyZW50VE5vZGVBc05vdFBhcmVudCgpO1xuICAgIGlmICgodFByb2plY3Rpb25Ob2RlLmZsYWdzICYgNjQgLyogaXNEZXRhY2hlZCAqLykgIT09IDY0IC8qIGlzRGV0YWNoZWQgKi8pIHtcbiAgICAgICAgLy8gcmUtZGlzdHJpYnV0aW9uIG9mIHByb2plY3RhYmxlIG5vZGVzIGlzIHN0b3JlZCBvbiBhIGNvbXBvbmVudCdzIHZpZXcgbGV2ZWxcbiAgICAgICAgYXBwbHlQcm9qZWN0aW9uKHRWaWV3LCBsVmlldywgdFByb2plY3Rpb25Ob2RlKTtcbiAgICB9XG59XG5cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgcHJvcGVydHkgb24gYW4gZWxlbWVudCB3aXRoIGEgbG9uZSBib3VuZCB2YWx1ZVxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDEgaW50ZXJwb2xhdGVkIHZhbHVlIGluIGl0LCBhbiBubyBhZGRpdGlvbmFsIHRleHRcbiAqIHN1cnJvdW5kcyB0aGF0IGludGVycG9sYXRlZCB2YWx1ZTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IHRpdGxlPVwie3t2MH19XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZSgndGl0bGUnLCB2MCk7XG4gKiBgYGBcbiAqXG4gKiBJZiB0aGUgcHJvcGVydHkgbmFtZSBhbHNvIGV4aXN0cyBhcyBhbiBpbnB1dCBwcm9wZXJ0eSBvbiBvbmUgb2YgdGhlIGVsZW1lbnQncyBkaXJlY3RpdmVzLFxuICogdGhlIGNvbXBvbmVudCBwcm9wZXJ0eSB3aWxsIGJlIHNldCBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IHByb3BlcnR5LiBUaGlzIGNoZWNrIG11c3RcbiAqIGJlIGNvbmR1Y3RlZCBhdCBydW50aW1lIHNvIGNoaWxkIGNvbXBvbmVudHMgdGhhdCBhZGQgbmV3IGBASW5wdXRzYCBkb24ndCBoYXZlIHRvIGJlIHJlLWNvbXBpbGVkLlxuICpcbiAqIEBwYXJhbSBwcm9wTmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gdXBkYXRlXG4gKiBAcGFyYW0gcHJlZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHNhbml0aXplciBBbiBvcHRpb25hbCBzYW5pdGl6ZXIgZnVuY3Rpb25cbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlKHByb3BOYW1lLCB2MCwgc2FuaXRpemVyKSB7XG4gICAgybXJtXByb3BlcnR5SW50ZXJwb2xhdGUxKHByb3BOYW1lLCAnJywgdjAsICcnLCBzYW5pdGl6ZXIpO1xuICAgIHJldHVybiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgcHJvcGVydHkgb24gYW4gZWxlbWVudCB3aXRoIHNpbmdsZSBib3VuZCB2YWx1ZSBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgMSBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiB0aXRsZT1cInByZWZpeHt7djB9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOjpcbiAqXG4gKiBgYGB0c1xuICogybXJtXByb3BlcnR5SW50ZXJwb2xhdGUxKCd0aXRsZScsICdwcmVmaXgnLCB2MCwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogSWYgdGhlIHByb3BlcnR5IG5hbWUgYWxzbyBleGlzdHMgYXMgYW4gaW5wdXQgcHJvcGVydHkgb24gb25lIG9mIHRoZSBlbGVtZW50J3MgZGlyZWN0aXZlcyxcbiAqIHRoZSBjb21wb25lbnQgcHJvcGVydHkgd2lsbCBiZSBzZXQgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBwcm9wZXJ0eS4gVGhpcyBjaGVjayBtdXN0XG4gKiBiZSBjb25kdWN0ZWQgYXQgcnVudGltZSBzbyBjaGlsZCBjb21wb25lbnRzIHRoYXQgYWRkIG5ldyBgQElucHV0c2AgZG9uJ3QgaGF2ZSB0byBiZSByZS1jb21waWxlZC5cbiAqXG4gKiBAcGFyYW0gcHJvcE5hbWUgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIHVwZGF0ZVxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSBzYW5pdGl6ZXIgQW4gb3B0aW9uYWwgc2FuaXRpemVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTEocHJvcE5hbWUsIHByZWZpeCwgdjAsIHN1ZmZpeCwgc2FuaXRpemVyKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjEobFZpZXcsIHByZWZpeCwgdjAsIHN1ZmZpeCk7XG4gICAgaWYgKGludGVycG9sYXRlZFZhbHVlICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudFByb3BlcnR5SW50ZXJuYWwodFZpZXcsIHROb2RlLCBsVmlldywgcHJvcE5hbWUsIGludGVycG9sYXRlZFZhbHVlLCBsVmlld1tSRU5ERVJFUl0sIHNhbml0aXplciwgZmFsc2UpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEodFZpZXcuZGF0YSwgdE5vZGUsIHByb3BOYW1lLCBnZXRCaW5kaW5nSW5kZXgoKSAtIDEsIHByZWZpeCwgc3VmZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlMTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgcHJvcGVydHkgb24gYW4gZWxlbWVudCB3aXRoIDIgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyAyIGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiB0aXRsZT1cInByZWZpeHt7djB9fS17e3YxfX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczo6XG4gKlxuICogYGBgdHNcbiAqIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlMigndGl0bGUnLCAncHJlZml4JywgdjAsICctJywgdjEsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIElmIHRoZSBwcm9wZXJ0eSBuYW1lIGFsc28gZXhpc3RzIGFzIGFuIGlucHV0IHByb3BlcnR5IG9uIG9uZSBvZiB0aGUgZWxlbWVudCdzIGRpcmVjdGl2ZXMsXG4gKiB0aGUgY29tcG9uZW50IHByb3BlcnR5IHdpbGwgYmUgc2V0IGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgcHJvcGVydHkuIFRoaXMgY2hlY2sgbXVzdFxuICogYmUgY29uZHVjdGVkIGF0IHJ1bnRpbWUgc28gY2hpbGQgY29tcG9uZW50cyB0aGF0IGFkZCBuZXcgYEBJbnB1dHNgIGRvbid0IGhhdmUgdG8gYmUgcmUtY29tcGlsZWQuXG4gKlxuICogQHBhcmFtIHByb3BOYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB1cGRhdGVcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gc2FuaXRpemVyIEFuIG9wdGlvbmFsIHNhbml0aXplciBmdW5jdGlvblxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXByb3BlcnR5SW50ZXJwb2xhdGUyKHByb3BOYW1lLCBwcmVmaXgsIHYwLCBpMCwgdjEsIHN1ZmZpeCwgc2FuaXRpemVyKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjIobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgc3VmZml4KTtcbiAgICBpZiAoaW50ZXJwb2xhdGVkVmFsdWUgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgICAgIGNvbnN0IHROb2RlID0gZ2V0U2VsZWN0ZWRUTm9kZSgpO1xuICAgICAgICBlbGVtZW50UHJvcGVydHlJbnRlcm5hbCh0VmlldywgdE5vZGUsIGxWaWV3LCBwcm9wTmFtZSwgaW50ZXJwb2xhdGVkVmFsdWUsIGxWaWV3W1JFTkRFUkVSXSwgc2FuaXRpemVyLCBmYWxzZSk7XG4gICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgc3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YSh0Vmlldy5kYXRhLCB0Tm9kZSwgcHJvcE5hbWUsIGdldEJpbmRpbmdJbmRleCgpIC0gMiwgcHJlZml4LCBpMCwgc3VmZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlMjtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgcHJvcGVydHkgb24gYW4gZWxlbWVudCB3aXRoIDMgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyAzIGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiB0aXRsZT1cInByZWZpeHt7djB9fS17e3YxfX0te3t2Mn19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTMoXG4gKiAndGl0bGUnLCAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIElmIHRoZSBwcm9wZXJ0eSBuYW1lIGFsc28gZXhpc3RzIGFzIGFuIGlucHV0IHByb3BlcnR5IG9uIG9uZSBvZiB0aGUgZWxlbWVudCdzIGRpcmVjdGl2ZXMsXG4gKiB0aGUgY29tcG9uZW50IHByb3BlcnR5IHdpbGwgYmUgc2V0IGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgcHJvcGVydHkuIFRoaXMgY2hlY2sgbXVzdFxuICogYmUgY29uZHVjdGVkIGF0IHJ1bnRpbWUgc28gY2hpbGQgY29tcG9uZW50cyB0aGF0IGFkZCBuZXcgYEBJbnB1dHNgIGRvbid0IGhhdmUgdG8gYmUgcmUtY29tcGlsZWQuXG4gKlxuICogQHBhcmFtIHByb3BOYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB1cGRhdGVcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gc2FuaXRpemVyIEFuIG9wdGlvbmFsIHNhbml0aXplciBmdW5jdGlvblxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXByb3BlcnR5SW50ZXJwb2xhdGUzKHByb3BOYW1lLCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2Miwgc3VmZml4LCBzYW5pdGl6ZXIpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uMyhsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIHN1ZmZpeCk7XG4gICAgaWYgKGludGVycG9sYXRlZFZhbHVlICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudFByb3BlcnR5SW50ZXJuYWwodFZpZXcsIHROb2RlLCBsVmlldywgcHJvcE5hbWUsIGludGVycG9sYXRlZFZhbHVlLCBsVmlld1tSRU5ERVJFUl0sIHNhbml0aXplciwgZmFsc2UpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEodFZpZXcuZGF0YSwgdE5vZGUsIHByb3BOYW1lLCBnZXRCaW5kaW5nSW5kZXgoKSAtIDMsIHByZWZpeCwgaTAsIGkxLCBzdWZmaXgpO1xuICAgIH1cbiAgICByZXR1cm4gybXJtXByb3BlcnR5SW50ZXJwb2xhdGUzO1xufVxuLyoqXG4gKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBwcm9wZXJ0eSBvbiBhbiBlbGVtZW50IHdpdGggNCBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDQgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IHRpdGxlPVwicHJlZml4e3t2MH19LXt7djF9fS17e3YyfX0te3t2M319c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTQoXG4gKiAndGl0bGUnLCAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIElmIHRoZSBwcm9wZXJ0eSBuYW1lIGFsc28gZXhpc3RzIGFzIGFuIGlucHV0IHByb3BlcnR5IG9uIG9uZSBvZiB0aGUgZWxlbWVudCdzIGRpcmVjdGl2ZXMsXG4gKiB0aGUgY29tcG9uZW50IHByb3BlcnR5IHdpbGwgYmUgc2V0IGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgcHJvcGVydHkuIFRoaXMgY2hlY2sgbXVzdFxuICogYmUgY29uZHVjdGVkIGF0IHJ1bnRpbWUgc28gY2hpbGQgY29tcG9uZW50cyB0aGF0IGFkZCBuZXcgYEBJbnB1dHNgIGRvbid0IGhhdmUgdG8gYmUgcmUtY29tcGlsZWQuXG4gKlxuICogQHBhcmFtIHByb3BOYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB1cGRhdGVcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gc2FuaXRpemVyIEFuIG9wdGlvbmFsIHNhbml0aXplciBmdW5jdGlvblxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXByb3BlcnR5SW50ZXJwb2xhdGU0KHByb3BOYW1lLCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBzdWZmaXgsIHNhbml0aXplcikge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb240KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBzdWZmaXgpO1xuICAgIGlmIChpbnRlcnBvbGF0ZWRWYWx1ZSAhPT0gTk9fQ0hBTkdFKSB7XG4gICAgICAgIGNvbnN0IHRWaWV3ID0gZ2V0VFZpZXcoKTtcbiAgICAgICAgY29uc3QgdE5vZGUgPSBnZXRTZWxlY3RlZFROb2RlKCk7XG4gICAgICAgIGVsZW1lbnRQcm9wZXJ0eUludGVybmFsKHRWaWV3LCB0Tm9kZSwgbFZpZXcsIHByb3BOYW1lLCBpbnRlcnBvbGF0ZWRWYWx1ZSwgbFZpZXdbUkVOREVSRVJdLCBzYW5pdGl6ZXIsIGZhbHNlKTtcbiAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICBzdG9yZVByb3BlcnR5QmluZGluZ01ldGFkYXRhKHRWaWV3LmRhdGEsIHROb2RlLCBwcm9wTmFtZSwgZ2V0QmluZGluZ0luZGV4KCkgLSA0LCBwcmVmaXgsIGkwLCBpMSwgaTIsIHN1ZmZpeCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTQ7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIHByb3BlcnR5IG9uIGFuIGVsZW1lbnQgd2l0aCA1IGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgNSBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdGl0bGU9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTUoXG4gKiAndGl0bGUnLCAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICctJywgdjQsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIElmIHRoZSBwcm9wZXJ0eSBuYW1lIGFsc28gZXhpc3RzIGFzIGFuIGlucHV0IHByb3BlcnR5IG9uIG9uZSBvZiB0aGUgZWxlbWVudCdzIGRpcmVjdGl2ZXMsXG4gKiB0aGUgY29tcG9uZW50IHByb3BlcnR5IHdpbGwgYmUgc2V0IGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgcHJvcGVydHkuIFRoaXMgY2hlY2sgbXVzdFxuICogYmUgY29uZHVjdGVkIGF0IHJ1bnRpbWUgc28gY2hpbGQgY29tcG9uZW50cyB0aGF0IGFkZCBuZXcgYEBJbnB1dHNgIGRvbid0IGhhdmUgdG8gYmUgcmUtY29tcGlsZWQuXG4gKlxuICogQHBhcmFtIHByb3BOYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB1cGRhdGVcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTMgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gc2FuaXRpemVyIEFuIG9wdGlvbmFsIHNhbml0aXplciBmdW5jdGlvblxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXByb3BlcnR5SW50ZXJwb2xhdGU1KHByb3BOYW1lLCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIHN1ZmZpeCwgc2FuaXRpemVyKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjUobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgc3VmZml4KTtcbiAgICBpZiAoaW50ZXJwb2xhdGVkVmFsdWUgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgICAgIGNvbnN0IHROb2RlID0gZ2V0U2VsZWN0ZWRUTm9kZSgpO1xuICAgICAgICBlbGVtZW50UHJvcGVydHlJbnRlcm5hbCh0VmlldywgdE5vZGUsIGxWaWV3LCBwcm9wTmFtZSwgaW50ZXJwb2xhdGVkVmFsdWUsIGxWaWV3W1JFTkRFUkVSXSwgc2FuaXRpemVyLCBmYWxzZSk7XG4gICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgc3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YSh0Vmlldy5kYXRhLCB0Tm9kZSwgcHJvcE5hbWUsIGdldEJpbmRpbmdJbmRleCgpIC0gNSwgcHJlZml4LCBpMCwgaTEsIGkyLCBpMywgc3VmZml4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlNTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgcHJvcGVydHkgb24gYW4gZWxlbWVudCB3aXRoIDYgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyA2IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiB0aXRsZT1cInByZWZpeHt7djB9fS17e3YxfX0te3t2Mn19LXt7djN9fS17e3Y0fX0te3t2NX19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTYoXG4gKiAgICAndGl0bGUnLCAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICctJywgdjQsICctJywgdjUsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIElmIHRoZSBwcm9wZXJ0eSBuYW1lIGFsc28gZXhpc3RzIGFzIGFuIGlucHV0IHByb3BlcnR5IG9uIG9uZSBvZiB0aGUgZWxlbWVudCdzIGRpcmVjdGl2ZXMsXG4gKiB0aGUgY29tcG9uZW50IHByb3BlcnR5IHdpbGwgYmUgc2V0IGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgcHJvcGVydHkuIFRoaXMgY2hlY2sgbXVzdFxuICogYmUgY29uZHVjdGVkIGF0IHJ1bnRpbWUgc28gY2hpbGQgY29tcG9uZW50cyB0aGF0IGFkZCBuZXcgYEBJbnB1dHNgIGRvbid0IGhhdmUgdG8gYmUgcmUtY29tcGlsZWQuXG4gKlxuICogQHBhcmFtIHByb3BOYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB1cGRhdGVcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTMgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTQgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gc2FuaXRpemVyIEFuIG9wdGlvbmFsIHNhbml0aXplciBmdW5jdGlvblxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXByb3BlcnR5SW50ZXJwb2xhdGU2KHByb3BOYW1lLCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgc3VmZml4LCBzYW5pdGl6ZXIpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uNihsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBpNCwgdjUsIHN1ZmZpeCk7XG4gICAgaWYgKGludGVycG9sYXRlZFZhbHVlICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudFByb3BlcnR5SW50ZXJuYWwodFZpZXcsIHROb2RlLCBsVmlldywgcHJvcE5hbWUsIGludGVycG9sYXRlZFZhbHVlLCBsVmlld1tSRU5ERVJFUl0sIHNhbml0aXplciwgZmFsc2UpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEodFZpZXcuZGF0YSwgdE5vZGUsIHByb3BOYW1lLCBnZXRCaW5kaW5nSW5kZXgoKSAtIDYsIHByZWZpeCwgaTAsIGkxLCBpMiwgaTMsIGk0LCBzdWZmaXgpO1xuICAgIH1cbiAgICByZXR1cm4gybXJtXByb3BlcnR5SW50ZXJwb2xhdGU2O1xufVxuLyoqXG4gKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBwcm9wZXJ0eSBvbiBhbiBlbGVtZW50IHdpdGggNyBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDcgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IHRpdGxlPVwicHJlZml4e3t2MH19LXt7djF9fS17e3YyfX0te3t2M319LXt7djR9fS17e3Y1fX0te3t2Nn19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTcoXG4gKiAgICAndGl0bGUnLCAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICctJywgdjQsICctJywgdjUsICctJywgdjYsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIElmIHRoZSBwcm9wZXJ0eSBuYW1lIGFsc28gZXhpc3RzIGFzIGFuIGlucHV0IHByb3BlcnR5IG9uIG9uZSBvZiB0aGUgZWxlbWVudCdzIGRpcmVjdGl2ZXMsXG4gKiB0aGUgY29tcG9uZW50IHByb3BlcnR5IHdpbGwgYmUgc2V0IGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgcHJvcGVydHkuIFRoaXMgY2hlY2sgbXVzdFxuICogYmUgY29uZHVjdGVkIGF0IHJ1bnRpbWUgc28gY2hpbGQgY29tcG9uZW50cyB0aGF0IGFkZCBuZXcgYEBJbnB1dHNgIGRvbid0IGhhdmUgdG8gYmUgcmUtY29tcGlsZWQuXG4gKlxuICogQHBhcmFtIHByb3BOYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB1cGRhdGVcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTMgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTQgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTUgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gc2FuaXRpemVyIEFuIG9wdGlvbmFsIHNhbml0aXplciBmdW5jdGlvblxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXByb3BlcnR5SW50ZXJwb2xhdGU3KHByb3BOYW1lLCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBzdWZmaXgsIHNhbml0aXplcikge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb243KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBzdWZmaXgpO1xuICAgIGlmIChpbnRlcnBvbGF0ZWRWYWx1ZSAhPT0gTk9fQ0hBTkdFKSB7XG4gICAgICAgIGNvbnN0IHRWaWV3ID0gZ2V0VFZpZXcoKTtcbiAgICAgICAgY29uc3QgdE5vZGUgPSBnZXRTZWxlY3RlZFROb2RlKCk7XG4gICAgICAgIGVsZW1lbnRQcm9wZXJ0eUludGVybmFsKHRWaWV3LCB0Tm9kZSwgbFZpZXcsIHByb3BOYW1lLCBpbnRlcnBvbGF0ZWRWYWx1ZSwgbFZpZXdbUkVOREVSRVJdLCBzYW5pdGl6ZXIsIGZhbHNlKTtcbiAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICBzdG9yZVByb3BlcnR5QmluZGluZ01ldGFkYXRhKHRWaWV3LmRhdGEsIHROb2RlLCBwcm9wTmFtZSwgZ2V0QmluZGluZ0luZGV4KCkgLSA3LCBwcmVmaXgsIGkwLCBpMSwgaTIsIGkzLCBpNCwgaTUsIHN1ZmZpeCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTc7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIHByb3BlcnR5IG9uIGFuIGVsZW1lbnQgd2l0aCA4IGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgOCBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgdGl0bGU9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19LXt7djV9fS17e3Y2fX0te3t2N319c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6OlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTgoXG4gKiAgJ3RpdGxlJywgJ3ByZWZpeCcsIHYwLCAnLScsIHYxLCAnLScsIHYyLCAnLScsIHYzLCAnLScsIHY0LCAnLScsIHY1LCAnLScsIHY2LCAnLScsIHY3LCAnc3VmZml4Jyk7XG4gKiBgYGBcbiAqXG4gKiBJZiB0aGUgcHJvcGVydHkgbmFtZSBhbHNvIGV4aXN0cyBhcyBhbiBpbnB1dCBwcm9wZXJ0eSBvbiBvbmUgb2YgdGhlIGVsZW1lbnQncyBkaXJlY3RpdmVzLFxuICogdGhlIGNvbXBvbmVudCBwcm9wZXJ0eSB3aWxsIGJlIHNldCBpbnN0ZWFkIG9mIHRoZSBlbGVtZW50IHByb3BlcnR5LiBUaGlzIGNoZWNrIG11c3RcbiAqIGJlIGNvbmR1Y3RlZCBhdCBydW50aW1lIHNvIGNoaWxkIGNvbXBvbmVudHMgdGhhdCBhZGQgbmV3IGBASW5wdXRzYCBkb24ndCBoYXZlIHRvIGJlIHJlLWNvbXBpbGVkLlxuICpcbiAqIEBwYXJhbSBwcm9wTmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gdXBkYXRlXG4gKiBAcGFyYW0gcHJlZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkwIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjEgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkxIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjIgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkyIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjMgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkzIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjQgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGk0IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjUgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGk1IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjYgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGk2IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjcgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHNhbml0aXplciBBbiBvcHRpb25hbCBzYW5pdGl6ZXIgZnVuY3Rpb25cbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlOChwcm9wTmFtZSwgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBpNCwgdjUsIGk1LCB2NiwgaTYsIHY3LCBzdWZmaXgsIHNhbml0aXplcikge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb244KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBpNiwgdjcsIHN1ZmZpeCk7XG4gICAgaWYgKGludGVycG9sYXRlZFZhbHVlICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudFByb3BlcnR5SW50ZXJuYWwodFZpZXcsIHROb2RlLCBsVmlldywgcHJvcE5hbWUsIGludGVycG9sYXRlZFZhbHVlLCBsVmlld1tSRU5ERVJFUl0sIHNhbml0aXplciwgZmFsc2UpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEodFZpZXcuZGF0YSwgdE5vZGUsIHByb3BOYW1lLCBnZXRCaW5kaW5nSW5kZXgoKSAtIDgsIHByZWZpeCwgaTAsIGkxLCBpMiwgaTMsIGk0LCBpNSwgaTYsIHN1ZmZpeCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTg7XG59XG4vKipcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgcHJvcGVydHkgb24gYW4gZWxlbWVudCB3aXRoIDkgb3IgbW9yZSBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgbnVtYmVyIG9mIGludGVycG9sYXRlZCB2YWx1ZXMgZXhjZWVkcyA4LlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXZcbiAqICB0aXRsZT1cInByZWZpeHt7djB9fS17e3YxfX0te3t2Mn19LXt7djN9fS17e3Y0fX0te3t2NX19LXt7djZ9fS17e3Y3fX0te3t2OH19LXt7djl9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOjpcbiAqXG4gKiBgYGB0c1xuICogybXJtXByb3BlcnR5SW50ZXJwb2xhdGVWKFxuICogICd0aXRsZScsIFsncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICctJywgdjQsICctJywgdjUsICctJywgdjYsICctJywgdjcsICctJywgdjksXG4gKiAgJ3N1ZmZpeCddKTtcbiAqIGBgYFxuICpcbiAqIElmIHRoZSBwcm9wZXJ0eSBuYW1lIGFsc28gZXhpc3RzIGFzIGFuIGlucHV0IHByb3BlcnR5IG9uIG9uZSBvZiB0aGUgZWxlbWVudCdzIGRpcmVjdGl2ZXMsXG4gKiB0aGUgY29tcG9uZW50IHByb3BlcnR5IHdpbGwgYmUgc2V0IGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgcHJvcGVydHkuIFRoaXMgY2hlY2sgbXVzdFxuICogYmUgY29uZHVjdGVkIGF0IHJ1bnRpbWUgc28gY2hpbGQgY29tcG9uZW50cyB0aGF0IGFkZCBuZXcgYEBJbnB1dHNgIGRvbid0IGhhdmUgdG8gYmUgcmUtY29tcGlsZWQuXG4gKlxuICogQHBhcmFtIHByb3BOYW1lIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byB1cGRhdGUuXG4gKiBAcGFyYW0gdmFsdWVzIFRoZSBjb2xsZWN0aW9uIG9mIHZhbHVlcyBhbmQgdGhlIHN0cmluZ3MgaW5iZXR3ZWVuIHRob3NlIHZhbHVlcywgYmVnaW5uaW5nIHdpdGggYVxuICogc3RyaW5nIHByZWZpeCBhbmQgZW5kaW5nIHdpdGggYSBzdHJpbmcgc3VmZml4LlxuICogKGUuZy4gYFsncHJlZml4JywgdmFsdWUwLCAnLScsIHZhbHVlMSwgJy0nLCB2YWx1ZTIsIC4uLiwgdmFsdWU5OSwgJ3N1ZmZpeCddYClcbiAqIEBwYXJhbSBzYW5pdGl6ZXIgQW4gb3B0aW9uYWwgc2FuaXRpemVyIGZ1bmN0aW9uXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZVYocHJvcE5hbWUsIHZhbHVlcywgc2FuaXRpemVyKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvblYobFZpZXcsIHZhbHVlcyk7XG4gICAgaWYgKGludGVycG9sYXRlZFZhbHVlICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgZWxlbWVudFByb3BlcnR5SW50ZXJuYWwodFZpZXcsIHROb2RlLCBsVmlldywgcHJvcE5hbWUsIGludGVycG9sYXRlZFZhbHVlLCBsVmlld1tSRU5ERVJFUl0sIHNhbml0aXplciwgZmFsc2UpO1xuICAgICAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgICAgICBjb25zdCBpbnRlcnBvbGF0aW9uSW5CZXR3ZWVuID0gW3ZhbHVlc1swXV07IC8vIHByZWZpeFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDI7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0aW9uSW5CZXR3ZWVuLnB1c2godmFsdWVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0b3JlUHJvcGVydHlCaW5kaW5nTWV0YWRhdGEodFZpZXcuZGF0YSwgdE5vZGUsIHByb3BOYW1lLCBnZXRCaW5kaW5nSW5kZXgoKSAtIGludGVycG9sYXRpb25JbkJldHdlZW4ubGVuZ3RoICsgMSwgLi4uaW50ZXJwb2xhdGlvbkluQmV0d2Vlbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlVjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIE5PVEU6IFRoZSB3b3JkIGBzdHlsaW5nYCBpcyB1c2VkIGludGVyY2hhbmdlYWJseSBhcyBzdHlsZSBvciBjbGFzcyBzdHlsaW5nLlxuICpcbiAqIFRoaXMgZmlsZSBjb250YWlucyBjb2RlIHRvIGxpbmsgc3R5bGluZyBpbnN0cnVjdGlvbnMgdG9nZXRoZXIgc28gdGhhdCB0aGV5IGNhbiBiZSByZXBsYXllZCBpblxuICogcHJpb3JpdHkgb3JkZXIuIFRoZSBmaWxlIGV4aXN0cyBiZWNhdXNlIEl2eSBzdHlsaW5nIGluc3RydWN0aW9uIGV4ZWN1dGlvbiBvcmRlciBkb2VzIG5vdCBtYXRjaFxuICogdGhhdCBvZiB0aGUgcHJpb3JpdHkgb3JkZXIuIFRoZSBwdXJwb3NlIG9mIHRoaXMgY29kZSBpcyB0byBjcmVhdGUgYSBsaW5rZWQgbGlzdCBzbyB0aGF0IHRoZVxuICogaW5zdHJ1Y3Rpb25zIGNhbiBiZSB0cmF2ZXJzZWQgaW4gcHJpb3JpdHkgb3JkZXIgd2hlbiBjb21wdXRpbmcgdGhlIHN0eWxlcy5cbiAqXG4gKiBBc3N1bWUgd2UgYXJlIGRlYWxpbmcgd2l0aCB0aGUgZm9sbG93aW5nIGNvZGU6XG4gKiBgYGBcbiAqIEBDb21wb25lbnQoe1xuICogICB0ZW1wbGF0ZTogYFxuICogICAgIDxteS1jbXAgW3N0eWxlXT1cIiB7Y29sb3I6ICcjMDAxJ30gXCJcbiAqICAgICAgICAgICAgIFtzdHlsZS5jb2xvcl09XCIgIzAwMiBcIlxuICogICAgICAgICAgICAgZGlyLXN0eWxlLWNvbG9yLTFcbiAqICAgICAgICAgICAgIGRpci1zdHlsZS1jb2xvci0yPiBgXG4gKiB9KVxuICogY2xhc3MgRXhhbXBsZUNvbXBvbmVudCB7XG4gKiAgIHN0YXRpYyBuZ0NvbXAgPSAuLi4ge1xuICogICAgIC4uLlxuICogICAgIC8vIENvbXBpbGVyIGVuc3VyZXMgdGhhdCBgybXJtXN0eWxlUHJvcGAgaXMgYWZ0ZXIgYMm1ybVzdHlsZU1hcGBcbiAqICAgICDJtcm1c3R5bGVNYXAoe2NvbG9yOiAnIzAwMSd9KTtcbiAqICAgICDJtcm1c3R5bGVQcm9wKCdjb2xvcicsICcjMDAyJyk7XG4gKiAgICAgLi4uXG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBARGlyZWN0aXZlKHtcbiAqICAgc2VsZWN0b3I6IGBbZGlyLXN0eWxlLWNvbG9yLTFdJyxcbiAqIH0pXG4gKiBjbGFzcyBTdHlsZTFEaXJlY3RpdmUge1xuICogICBASG9zdEJpbmRpbmcoJ3N0eWxlJykgc3R5bGUgPSB7Y29sb3I6ICcjMDA1J307XG4gKiAgIEBIb3N0QmluZGluZygnc3R5bGUuY29sb3InKSBjb2xvciA9ICcjMDA2JztcbiAqXG4gKiAgIHN0YXRpYyBuZ0RpciA9IC4uLiB7XG4gKiAgICAgLi4uXG4gKiAgICAgLy8gQ29tcGlsZXIgZW5zdXJlcyB0aGF0IGDJtcm1c3R5bGVQcm9wYCBpcyBhZnRlciBgybXJtXN0eWxlTWFwYFxuICogICAgIMm1ybVzdHlsZU1hcCh7Y29sb3I6ICcjMDA1J30pO1xuICogICAgIMm1ybVzdHlsZVByb3AoJ2NvbG9yJywgJyMwMDYnKTtcbiAqICAgICAuLi5cbiAqICAgfVxuICogfVxuICpcbiAqIEBEaXJlY3RpdmUoe1xuICogICBzZWxlY3RvcjogYFtkaXItc3R5bGUtY29sb3ItMl0nLFxuICogfSlcbiAqIGNsYXNzIFN0eWxlMkRpcmVjdGl2ZSB7XG4gKiAgIEBIb3N0QmluZGluZygnc3R5bGUnKSBzdHlsZSA9IHtjb2xvcjogJyMwMDcnfTtcbiAqICAgQEhvc3RCaW5kaW5nKCdzdHlsZS5jb2xvcicpIGNvbG9yID0gJyMwMDgnO1xuICpcbiAqICAgc3RhdGljIG5nRGlyID0gLi4uIHtcbiAqICAgICAuLi5cbiAqICAgICAvLyBDb21waWxlciBlbnN1cmVzIHRoYXQgYMm1ybVzdHlsZVByb3BgIGlzIGFmdGVyIGDJtcm1c3R5bGVNYXBgXG4gKiAgICAgybXJtXN0eWxlTWFwKHtjb2xvcjogJyMwMDcnfSk7XG4gKiAgICAgybXJtXN0eWxlUHJvcCgnY29sb3InLCAnIzAwOCcpO1xuICogICAgIC4uLlxuICogICB9XG4gKiB9XG4gKlxuICogQERpcmVjdGl2ZSh7XG4gKiAgIHNlbGVjdG9yOiBgbXktY21wJyxcbiAqIH0pXG4gKiBjbGFzcyBNeUNvbXBvbmVudCB7XG4gKiAgIEBIb3N0QmluZGluZygnc3R5bGUnKSBzdHlsZSA9IHtjb2xvcjogJyMwMDMnfTtcbiAqICAgQEhvc3RCaW5kaW5nKCdzdHlsZS5jb2xvcicpIGNvbG9yID0gJyMwMDQnO1xuICpcbiAqICAgc3RhdGljIG5nQ29tcCA9IC4uLiB7XG4gKiAgICAgLi4uXG4gKiAgICAgLy8gQ29tcGlsZXIgZW5zdXJlcyB0aGF0IGDJtcm1c3R5bGVQcm9wYCBpcyBhZnRlciBgybXJtXN0eWxlTWFwYFxuICogICAgIMm1ybVzdHlsZU1hcCh7Y29sb3I6ICcjMDAzJ30pO1xuICogICAgIMm1ybVzdHlsZVByb3AoJ2NvbG9yJywgJyMwMDQnKTtcbiAqICAgICAuLi5cbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogVGhlIE9yZGVyIG9mIGluc3RydWN0aW9uIGV4ZWN1dGlvbiBpczpcbiAqXG4gKiBOT1RFOiB0aGUgY29tbWVudCBiaW5kaW5nIGxvY2F0aW9uIGlzIGZvciBpbGx1c3RyYXRpdmUgcHVycG9zZXMgb25seS5cbiAqXG4gKiBgYGBcbiAqIC8vIFRlbXBsYXRlOiAoRXhhbXBsZUNvbXBvbmVudClcbiAqICAgICDJtcm1c3R5bGVNYXAoe2NvbG9yOiAnIzAwMSd9KTsgICAvLyBCaW5kaW5nIGluZGV4OiAxMFxuICogICAgIMm1ybVzdHlsZVByb3AoJ2NvbG9yJywgJyMwMDInKTsgIC8vIEJpbmRpbmcgaW5kZXg6IDEyXG4gKiAvLyBNeUNvbXBvbmVudFxuICogICAgIMm1ybVzdHlsZU1hcCh7Y29sb3I6ICcjMDAzJ30pOyAgIC8vIEJpbmRpbmcgaW5kZXg6IDIwXG4gKiAgICAgybXJtXN0eWxlUHJvcCgnY29sb3InLCAnIzAwNCcpOyAgLy8gQmluZGluZyBpbmRleDogMjJcbiAqIC8vIFN0eWxlMURpcmVjdGl2ZVxuICogICAgIMm1ybVzdHlsZU1hcCh7Y29sb3I6ICcjMDA1J30pOyAgIC8vIEJpbmRpbmcgaW5kZXg6IDI0XG4gKiAgICAgybXJtXN0eWxlUHJvcCgnY29sb3InLCAnIzAwNicpOyAgLy8gQmluZGluZyBpbmRleDogMjZcbiAqIC8vIFN0eWxlMkRpcmVjdGl2ZVxuICogICAgIMm1ybVzdHlsZU1hcCh7Y29sb3I6ICcjMDA3J30pOyAgIC8vIEJpbmRpbmcgaW5kZXg6IDI4XG4gKiAgICAgybXJtXN0eWxlUHJvcCgnY29sb3InLCAnIzAwOCcpOyAgLy8gQmluZGluZyBpbmRleDogMzBcbiAqIGBgYFxuICpcbiAqIFRoZSBjb3JyZWN0IHByaW9yaXR5IG9yZGVyIG9mIGNvbmNhdGVuYXRpb24gaXM6XG4gKlxuICogYGBgXG4gKiAvLyBNeUNvbXBvbmVudFxuICogICAgIMm1ybVzdHlsZU1hcCh7Y29sb3I6ICcjMDAzJ30pOyAgIC8vIEJpbmRpbmcgaW5kZXg6IDIwXG4gKiAgICAgybXJtXN0eWxlUHJvcCgnY29sb3InLCAnIzAwNCcpOyAgLy8gQmluZGluZyBpbmRleDogMjJcbiAqIC8vIFN0eWxlMURpcmVjdGl2ZVxuICogICAgIMm1ybVzdHlsZU1hcCh7Y29sb3I6ICcjMDA1J30pOyAgIC8vIEJpbmRpbmcgaW5kZXg6IDI0XG4gKiAgICAgybXJtXN0eWxlUHJvcCgnY29sb3InLCAnIzAwNicpOyAgLy8gQmluZGluZyBpbmRleDogMjZcbiAqIC8vIFN0eWxlMkRpcmVjdGl2ZVxuICogICAgIMm1ybVzdHlsZU1hcCh7Y29sb3I6ICcjMDA3J30pOyAgIC8vIEJpbmRpbmcgaW5kZXg6IDI4XG4gKiAgICAgybXJtXN0eWxlUHJvcCgnY29sb3InLCAnIzAwOCcpOyAgLy8gQmluZGluZyBpbmRleDogMzBcbiAqIC8vIFRlbXBsYXRlOiAoRXhhbXBsZUNvbXBvbmVudClcbiAqICAgICDJtcm1c3R5bGVNYXAoe2NvbG9yOiAnIzAwMSd9KTsgICAvLyBCaW5kaW5nIGluZGV4OiAxMFxuICogICAgIMm1ybVzdHlsZVByb3AoJ2NvbG9yJywgJyMwMDInKTsgIC8vIEJpbmRpbmcgaW5kZXg6IDEyXG4gKiBgYGBcbiAqXG4gKiBXaGF0IGNvbG9yIHNob3VsZCBiZSByZW5kZXJlZD9cbiAqXG4gKiBPbmNlIHRoZSBpdGVtcyBhcmUgY29ycmVjdGx5IHNvcnRlZCBpbiB0aGUgbGlzdCwgdGhlIGFuc3dlciBpcyBzaW1wbHkgdGhlIGxhc3QgaXRlbSBpbiB0aGVcbiAqIGNvbmNhdGVuYXRpb24gbGlzdCB3aGljaCBpcyBgIzAwMmAuXG4gKlxuICogVG8gZG8gc28gd2Uga2VlcCBhIGxpbmtlZCBsaXN0IG9mIGFsbCBvZiB0aGUgYmluZGluZ3Mgd2hpY2ggcGVydGFpbiB0byB0aGlzIGVsZW1lbnQuXG4gKiBOb3RpY2UgdGhhdCB0aGUgYmluZGluZ3MgYXJlIGluc2VydGVkIGluIHRoZSBvcmRlciBvZiBleGVjdXRpb24sIGJ1dCB0aGUgYFRWaWV3LmRhdGFgIGFsbG93c1xuICogdXMgdG8gdHJhdmVyc2UgdGhlbSBpbiB0aGUgb3JkZXIgb2YgcHJpb3JpdHkuXG4gKlxuICogfElkeHxgVFZpZXcuZGF0YWB8YExWaWV3YCAgICAgICAgICB8IE5vdGVzXG4gKiB8LS0tfC0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLVxuICogfC4uLnwgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICB8XG4gKiB8MTAgfGBudWxsYCAgICAgIHxge2NvbG9yOiAnIzAwMSd9YHwgYMm1ybVzdHlsZU1hcCgnY29sb3InLCB7Y29sb3I6ICcjMDAxJ30pYFxuICogfDExIHxgMzAgfCAxMmAgICB8IC4uLiAgICAgICAgICAgICB8XG4gKiB8MTIgfGBjb2xvcmAgICAgIHxgJyMwMDInYCAgICAgICAgIHwgYMm1ybVzdHlsZVByb3AoJ2NvbG9yJywgJyMwMDInKWBcbiAqIHwxMyB8YDEwIHwgMGAgICAgfCAuLi4gICAgICAgICAgICAgfFxuICogfC4uLnwgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICB8XG4gKiB8MjAgfGBudWxsYCAgICAgIHxge2NvbG9yOiAnIzAwMyd9YHwgYMm1ybVzdHlsZU1hcCgnY29sb3InLCB7Y29sb3I6ICcjMDAzJ30pYFxuICogfDIxIHxgMCB8IDIyYCAgICB8IC4uLiAgICAgICAgICAgICB8XG4gKiB8MjIgfGBjb2xvcmAgICAgIHxgJyMwMDQnYCAgICAgICAgIHwgYMm1ybVzdHlsZVByb3AoJ2NvbG9yJywgJyMwMDQnKWBcbiAqIHwyMyB8YDIwIHwgMjRgICAgfCAuLi4gICAgICAgICAgICAgfFxuICogfDI0IHxgbnVsbGAgICAgICB8YHtjb2xvcjogJyMwMDUnfWB8IGDJtcm1c3R5bGVNYXAoJ2NvbG9yJywge2NvbG9yOiAnIzAwNSd9KWBcbiAqIHwyNSB8YDIyIHwgMjZgICAgfCAuLi4gICAgICAgICAgICAgfFxuICogfDI2IHxgY29sb3JgICAgICB8YCcjMDA2J2AgICAgICAgICB8IGDJtcm1c3R5bGVQcm9wKCdjb2xvcicsICcjMDA2JylgXG4gKiB8MjcgfGAyNCB8IDI4YCAgIHwgLi4uICAgICAgICAgICAgIHxcbiAqIHwyOCB8YG51bGxgICAgICAgfGB7Y29sb3I6ICcjMDA3J31gfCBgybXJtXN0eWxlTWFwKCdjb2xvcicsIHtjb2xvcjogJyMwMDcnfSlgXG4gKiB8MjkgfGAyNiB8IDMwYCAgIHwgLi4uICAgICAgICAgICAgIHxcbiAqIHwzMCB8YGNvbG9yYCAgICAgfGAnIzAwOCdgICAgICAgICAgfCBgybXJtXN0eWxlUHJvcCgnY29sb3InLCAnIzAwOCcpYFxuICogfDMxIHxgMjggfCAxMGAgICB8IC4uLiAgICAgICAgICAgICB8XG4gKlxuICogVGhlIGFib3ZlIGRhdGEgc3RydWN0dXJlIGFsbG93cyB1cyB0byByZS1jb25jYXRlbmF0ZSB0aGUgc3R5bGluZyBubyBtYXR0ZXIgd2hpY2ggZGF0YSBiaW5kaW5nXG4gKiBjaGFuZ2VzLlxuICpcbiAqIE5PVEU6IGluIGFkZGl0aW9uIHRvIGtlZXBpbmcgdHJhY2sgb2YgbmV4dC9wcmV2aW91cyBpbmRleCB0aGUgYFRWaWV3LmRhdGFgIGFsc28gc3RvcmVzIHByZXYvbmV4dFxuICogZHVwbGljYXRlIGJpdC4gVGhlIGR1cGxpY2F0ZSBiaXQgaWYgdHJ1ZSBzYXlzIHRoZXJlIGVpdGhlciBpcyBhIGJpbmRpbmcgd2l0aCB0aGUgc2FtZSBuYW1lIG9yXG4gKiB0aGVyZSBpcyBhIG1hcCAod2hpY2ggbWF5IGNvbnRhaW4gdGhlIG5hbWUpLiBUaGlzIGluZm9ybWF0aW9uIGlzIHVzZWZ1bCBpbiBrbm93aW5nIGlmIG90aGVyXG4gKiBzdHlsZXMgd2l0aCBoaWdoZXIgcHJpb3JpdHkgbmVlZCB0byBiZSBzZWFyY2hlZCBmb3Igb3ZlcndyaXRlcy5cbiAqXG4gKiBOT1RFOiBTZWUgYHNob3VsZCBzdXBwb3J0IGV4YW1wbGUgaW4gJ3Rub2RlX2xpbmtlZF9saXN0LnRzJyBkb2N1bWVudGF0aW9uYCBpblxuICogYHRub2RlX2xpbmtlZF9saXN0X3NwZWMudHNgIGZvciB3b3JraW5nIGV4YW1wbGUuXG4gKi9cbmxldCBfX3VudXNlZF9jb25zdF9hc19jbG9zdXJlX2RvZXNfbm90X2xpa2Vfc3RhbmRhbG9uZV9jb21tZW50X2Jsb2Nrc19fO1xuLyoqXG4gKiBJbnNlcnQgbmV3IGB0U3R5bGVWYWx1ZWAgYXQgYFREYXRhYCBhbmQgbGluayBleGlzdGluZyBzdHlsZSBiaW5kaW5ncyBzdWNoIHRoYXQgd2UgbWFpbnRhaW4gbGlua2VkXG4gKiBsaXN0IG9mIHN0eWxlcyBhbmQgY29tcHV0ZSB0aGUgZHVwbGljYXRlIGZsYWcuXG4gKlxuICogTm90ZTogdGhpcyBmdW5jdGlvbiBpcyBleGVjdXRlZCBkdXJpbmcgYGZpcnN0VXBkYXRlUGFzc2Agb25seSB0byBwb3B1bGF0ZSB0aGUgYFRWaWV3LmRhdGFgLlxuICpcbiAqIFRoZSBmdW5jdGlvbiB3b3JrcyBieSBrZWVwaW5nIHRyYWNrIG9mIGB0U3R5bGluZ1JhbmdlYCB3aGljaCBjb250YWlucyB0d28gcG9pbnRlcnMgcG9pbnRpbmcgdG9cbiAqIHRoZSBoZWFkL3RhaWwgb2YgdGhlIHRlbXBsYXRlIHBvcnRpb24gb2YgdGhlIHN0eWxlcy5cbiAqICAtIGlmIGBpc0hvc3QgPT09IGZhbHNlYCAod2UgYXJlIHRlbXBsYXRlKSB0aGVuIGluc2VydGlvbiBpcyBhdCB0YWlsIG9mIGBUU3R5bGluZ1JhbmdlYFxuICogIC0gaWYgYGlzSG9zdCA9PT0gdHJ1ZWAgKHdlIGFyZSBob3N0IGJpbmRpbmcpIHRoZW4gaW5zZXJ0aW9uIGlzIGF0IGhlYWQgb2YgYFRTdHlsaW5nUmFuZ2VgXG4gKlxuICogQHBhcmFtIHREYXRhIFRoZSBgVERhdGFgIHRvIGluc2VydCBpbnRvLlxuICogQHBhcmFtIHROb2RlIGBUTm9kZWAgYXNzb2NpYXRlZCB3aXRoIHRoZSBzdHlsaW5nIGVsZW1lbnQuXG4gKiBAcGFyYW0gdFN0eWxpbmdLZXkgU2VlIGBUU3R5bGluZ0tleWAuXG4gKiBAcGFyYW0gaW5kZXggbG9jYXRpb24gb2Ygd2hlcmUgYHRTdHlsZVZhbHVlYCBzaG91bGQgYmUgc3RvcmVkIChhbmQgbGlua2VkIGludG8gbGlzdC4pXG4gKiBAcGFyYW0gaXNIb3N0QmluZGluZyBgdHJ1ZWAgaWYgdGhlIGluc2VydGlvbiBpcyBmb3IgYSBgaG9zdEJpbmRpbmdgLiAoaW5zZXJ0aW9uIGlzIGluIGZyb250IG9mXG4gKiAgICAgICAgICAgICAgIHRlbXBsYXRlLilcbiAqIEBwYXJhbSBpc0NsYXNzQmluZGluZyBUcnVlIGlmIHRoZSBhc3NvY2lhdGVkIGB0U3R5bGluZ0tleWAgYXMgYSBgY2xhc3NgIHN0eWxpbmcuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgYHROb2RlLmNsYXNzQmluZGluZ3NgIHNob3VsZCBiZSB1c2VkIChvciBgdE5vZGUuc3R5bGVCaW5kaW5nc2Agb3RoZXJ3aXNlLilcbiAqL1xuZnVuY3Rpb24gaW5zZXJ0VFN0eWxpbmdCaW5kaW5nKHREYXRhLCB0Tm9kZSwgdFN0eWxpbmdLZXlXaXRoU3RhdGljLCBpbmRleCwgaXNIb3N0QmluZGluZywgaXNDbGFzc0JpbmRpbmcpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Rmlyc3RVcGRhdGVQYXNzKGdldFRWaWV3KCkpO1xuICAgIGxldCB0QmluZGluZ3MgPSBpc0NsYXNzQmluZGluZyA/IHROb2RlLmNsYXNzQmluZGluZ3MgOiB0Tm9kZS5zdHlsZUJpbmRpbmdzO1xuICAgIGxldCB0bXBsSGVhZCA9IGdldFRTdHlsaW5nUmFuZ2VQcmV2KHRCaW5kaW5ncyk7XG4gICAgbGV0IHRtcGxUYWlsID0gZ2V0VFN0eWxpbmdSYW5nZU5leHQodEJpbmRpbmdzKTtcbiAgICB0RGF0YVtpbmRleF0gPSB0U3R5bGluZ0tleVdpdGhTdGF0aWM7XG4gICAgbGV0IGlzS2V5RHVwbGljYXRlT2ZTdGF0aWMgPSBmYWxzZTtcbiAgICBsZXQgdFN0eWxpbmdLZXk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodFN0eWxpbmdLZXlXaXRoU3RhdGljKSkge1xuICAgICAgICAvLyBXZSBhcmUgY2FzZSB3aGVuIHRoZSBgVFN0eWxpbmdLZXlgIGNvbnRhaW5zIHN0YXRpYyBmaWVsZHMgYXMgd2VsbC5cbiAgICAgICAgY29uc3Qgc3RhdGljS2V5VmFsdWVBcnJheSA9IHRTdHlsaW5nS2V5V2l0aFN0YXRpYztcbiAgICAgICAgdFN0eWxpbmdLZXkgPSBzdGF0aWNLZXlWYWx1ZUFycmF5WzFdOyAvLyB1bndyYXAuXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gY2hlY2sgaWYgb3VyIGtleSBpcyBwcmVzZW50IGluIHRoZSBzdGF0aWMgc28gdGhhdCB3ZSBjYW4gbWFyayBpdCBhcyBkdXBsaWNhdGUuXG4gICAgICAgIGlmICh0U3R5bGluZ0tleSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAga2V5VmFsdWVBcnJheUluZGV4T2Yoc3RhdGljS2V5VmFsdWVBcnJheSwgdFN0eWxpbmdLZXkpID4gMCkge1xuICAgICAgICAgICAgLy8gdFN0eWxpbmdLZXkgaXMgcHJlc2VudCBpbiB0aGUgc3RhdGljcywgbmVlZCB0byBtYXJrIGl0IGFzIGR1cGxpY2F0ZS5cbiAgICAgICAgICAgIGlzS2V5RHVwbGljYXRlT2ZTdGF0aWMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0U3R5bGluZ0tleSA9IHRTdHlsaW5nS2V5V2l0aFN0YXRpYztcbiAgICB9XG4gICAgaWYgKGlzSG9zdEJpbmRpbmcpIHtcbiAgICAgICAgLy8gV2UgYXJlIGluc2VydGluZyBob3N0IGJpbmRpbmdzXG4gICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgdGVtcGxhdGUgYmluZGluZ3MgdGhlbiBgdGFpbGAgaXMgMC5cbiAgICAgICAgY29uc3QgaGFzVGVtcGxhdGVCaW5kaW5ncyA9IHRtcGxUYWlsICE9PSAwO1xuICAgICAgICAvLyBUaGlzIGlzIGltcG9ydGFudCB0byBrbm93IGJlY2F1c2UgdGhhdCBtZWFucyB0aGF0IHRoZSBgaGVhZGAgY2FuJ3QgcG9pbnQgdG8gdGhlIGZpcnN0XG4gICAgICAgIC8vIHRlbXBsYXRlIGJpbmRpbmdzICh0aGVyZSBhcmUgbm9uZS4pIEluc3RlYWQgdGhlIGhlYWQgcG9pbnRzIHRvIHRoZSB0YWlsIG9mIHRoZSB0ZW1wbGF0ZS5cbiAgICAgICAgaWYgKGhhc1RlbXBsYXRlQmluZGluZ3MpIHtcbiAgICAgICAgICAgIC8vIHRlbXBsYXRlIGhlYWQncyBcInByZXZcIiB3aWxsIHBvaW50IHRvIGxhc3QgaG9zdCBiaW5kaW5nIG9yIHRvIDAgaWYgbm8gaG9zdCBiaW5kaW5ncyB5ZXRcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzTm9kZSA9IGdldFRTdHlsaW5nUmFuZ2VQcmV2KHREYXRhW3RtcGxIZWFkICsgMV0pO1xuICAgICAgICAgICAgdERhdGFbaW5kZXggKyAxXSA9IHRvVFN0eWxpbmdSYW5nZShwcmV2aW91c05vZGUsIHRtcGxIZWFkKTtcbiAgICAgICAgICAgIC8vIGlmIGEgaG9zdCBiaW5kaW5nIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCwgd2UgbmVlZCB0byB1cGRhdGUgdGhlIG5leHQgb2YgdGhhdCBob3N0XG4gICAgICAgICAgICAvLyBiaW5kaW5nIHRvIHBvaW50IHRvIHRoaXMgb25lXG4gICAgICAgICAgICBpZiAocHJldmlvdXNOb2RlICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byB1cGRhdGUgdGhlIHRlbXBsYXRlLXRhaWwgdmFsdWUgdG8gcG9pbnQgdG8gdXMuXG4gICAgICAgICAgICAgICAgdERhdGFbcHJldmlvdXNOb2RlICsgMV0gPVxuICAgICAgICAgICAgICAgICAgICBzZXRUU3R5bGluZ1JhbmdlTmV4dCh0RGF0YVtwcmV2aW91c05vZGUgKyAxXSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhlIFwicHJldmlvdXNcIiBvZiB0aGUgdGVtcGxhdGUgYmluZGluZyBoZWFkIHNob3VsZCBwb2ludCB0byB0aGlzIGhvc3QgYmluZGluZ1xuICAgICAgICAgICAgdERhdGFbdG1wbEhlYWQgKyAxXSA9IHNldFRTdHlsaW5nUmFuZ2VQcmV2KHREYXRhW3RtcGxIZWFkICsgMV0sIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHREYXRhW2luZGV4ICsgMV0gPSB0b1RTdHlsaW5nUmFuZ2UodG1wbEhlYWQsIDApO1xuICAgICAgICAgICAgLy8gaWYgYSBob3N0IGJpbmRpbmcgaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLCB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgbmV4dCBvZiB0aGF0IGhvc3RcbiAgICAgICAgICAgIC8vIGJpbmRpbmcgdG8gcG9pbnQgdG8gdGhpcyBvbmVcbiAgICAgICAgICAgIGlmICh0bXBsSGVhZCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gdXBkYXRlIHRoZSB0ZW1wbGF0ZS10YWlsIHZhbHVlIHRvIHBvaW50IHRvIHVzLlxuICAgICAgICAgICAgICAgIHREYXRhW3RtcGxIZWFkICsgMV0gPSBzZXRUU3R5bGluZ1JhbmdlTmV4dCh0RGF0YVt0bXBsSGVhZCArIDFdLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiB3ZSBkb24ndCBoYXZlIHRlbXBsYXRlLCB0aGUgaGVhZCBwb2ludHMgdG8gdGVtcGxhdGUtdGFpbCwgYW5kIG5lZWRzIHRvIGJlIGFkdmFuY2VkLlxuICAgICAgICAgICAgdG1wbEhlYWQgPSBpbmRleDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gV2UgYXJlIGluc2VydGluZyBpbiB0ZW1wbGF0ZSBzZWN0aW9uLlxuICAgICAgICAvLyBXZSBuZWVkIHRvIHNldCB0aGlzIGJpbmRpbmcncyBcInByZXZpb3VzXCIgdG8gdGhlIGN1cnJlbnQgdGVtcGxhdGUgdGFpbFxuICAgICAgICB0RGF0YVtpbmRleCArIDFdID0gdG9UU3R5bGluZ1JhbmdlKHRtcGxUYWlsLCAwKTtcbiAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICBhc3NlcnRFcXVhbCh0bXBsSGVhZCAhPT0gMCAmJiB0bXBsVGFpbCA9PT0gMCwgZmFsc2UsICdBZGRpbmcgdGVtcGxhdGUgYmluZGluZ3MgYWZ0ZXIgaG9zdEJpbmRpbmdzIGlzIG5vdCBhbGxvd2VkLicpO1xuICAgICAgICBpZiAodG1wbEhlYWQgPT09IDApIHtcbiAgICAgICAgICAgIHRtcGxIZWFkID0gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHVwZGF0ZSB0aGUgcHJldmlvdXMgdmFsdWUgXCJuZXh0XCIgdG8gcG9pbnQgdG8gdGhpcyBiaW5kaW5nXG4gICAgICAgICAgICB0RGF0YVt0bXBsVGFpbCArIDFdID0gc2V0VFN0eWxpbmdSYW5nZU5leHQodERhdGFbdG1wbFRhaWwgKyAxXSwgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHRtcGxUYWlsID0gaW5kZXg7XG4gICAgfVxuICAgIC8vIE5vdyB3ZSBuZWVkIHRvIHVwZGF0ZSAvIGNvbXB1dGUgdGhlIGR1cGxpY2F0ZXMuXG4gICAgLy8gU3RhcnRpbmcgd2l0aCBvdXIgbG9jYXRpb24gc2VhcmNoIHRvd2FyZHMgaGVhZCAobGVhc3QgcHJpb3JpdHkpXG4gICAgaWYgKGlzS2V5RHVwbGljYXRlT2ZTdGF0aWMpIHtcbiAgICAgICAgdERhdGFbaW5kZXggKyAxXSA9IHNldFRTdHlsaW5nUmFuZ2VQcmV2RHVwbGljYXRlKHREYXRhW2luZGV4ICsgMV0pO1xuICAgIH1cbiAgICBtYXJrRHVwbGljYXRlcyh0RGF0YSwgdFN0eWxpbmdLZXksIGluZGV4LCB0cnVlLCBpc0NsYXNzQmluZGluZyk7XG4gICAgbWFya0R1cGxpY2F0ZXModERhdGEsIHRTdHlsaW5nS2V5LCBpbmRleCwgZmFsc2UsIGlzQ2xhc3NCaW5kaW5nKTtcbiAgICBtYXJrRHVwbGljYXRlT2ZSZXNpZHVhbFN0eWxpbmcodE5vZGUsIHRTdHlsaW5nS2V5LCB0RGF0YSwgaW5kZXgsIGlzQ2xhc3NCaW5kaW5nKTtcbiAgICB0QmluZGluZ3MgPSB0b1RTdHlsaW5nUmFuZ2UodG1wbEhlYWQsIHRtcGxUYWlsKTtcbiAgICBpZiAoaXNDbGFzc0JpbmRpbmcpIHtcbiAgICAgICAgdE5vZGUuY2xhc3NCaW5kaW5ncyA9IHRCaW5kaW5ncztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHROb2RlLnN0eWxlQmluZGluZ3MgPSB0QmluZGluZ3M7XG4gICAgfVxufVxuLyoqXG4gKiBMb29rIGludG8gdGhlIHJlc2lkdWFsIHN0eWxpbmcgdG8gc2VlIGlmIHRoZSBjdXJyZW50IGB0U3R5bGluZ0tleWAgaXMgZHVwbGljYXRlIG9mIHJlc2lkdWFsLlxuICpcbiAqIEBwYXJhbSB0Tm9kZSBgVE5vZGVgIHdoZXJlIHRoZSByZXNpZHVhbCBpcyBzdG9yZWQuXG4gKiBAcGFyYW0gdFN0eWxpbmdLZXkgYFRTdHlsaW5nS2V5YCB0byBzdG9yZS5cbiAqIEBwYXJhbSB0RGF0YSBgVERhdGFgIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VycmVudCBgTFZpZXdgLlxuICogQHBhcmFtIGluZGV4IGxvY2F0aW9uIG9mIHdoZXJlIGB0U3R5bGVWYWx1ZWAgc2hvdWxkIGJlIHN0b3JlZCAoYW5kIGxpbmtlZCBpbnRvIGxpc3QuKVxuICogQHBhcmFtIGlzQ2xhc3NCaW5kaW5nIFRydWUgaWYgdGhlIGFzc29jaWF0ZWQgYHRTdHlsaW5nS2V5YCBhcyBhIGBjbGFzc2Agc3R5bGluZy5cbiAqICAgICAgICAgICAgICAgICAgICAgICBgdE5vZGUuY2xhc3NCaW5kaW5nc2Agc2hvdWxkIGJlIHVzZWQgKG9yIGB0Tm9kZS5zdHlsZUJpbmRpbmdzYCBvdGhlcndpc2UuKVxuICovXG5mdW5jdGlvbiBtYXJrRHVwbGljYXRlT2ZSZXNpZHVhbFN0eWxpbmcodE5vZGUsIHRTdHlsaW5nS2V5LCB0RGF0YSwgaW5kZXgsIGlzQ2xhc3NCaW5kaW5nKSB7XG4gICAgY29uc3QgcmVzaWR1YWwgPSBpc0NsYXNzQmluZGluZyA/IHROb2RlLnJlc2lkdWFsQ2xhc3NlcyA6IHROb2RlLnJlc2lkdWFsU3R5bGVzO1xuICAgIGlmIChyZXNpZHVhbCAhPSBudWxsIC8qIG9yIHVuZGVmaW5lZCAqLyAmJiB0eXBlb2YgdFN0eWxpbmdLZXkgPT0gJ3N0cmluZycgJiZcbiAgICAgICAga2V5VmFsdWVBcnJheUluZGV4T2YocmVzaWR1YWwsIHRTdHlsaW5nS2V5KSA+PSAwKSB7XG4gICAgICAgIC8vIFdlIGhhdmUgZHVwbGljYXRlIGluIHRoZSByZXNpZHVhbCBzbyBtYXJrIG91cnNlbHZlcyBhcyBkdXBsaWNhdGUuXG4gICAgICAgIHREYXRhW2luZGV4ICsgMV0gPSBzZXRUU3R5bGluZ1JhbmdlTmV4dER1cGxpY2F0ZSh0RGF0YVtpbmRleCArIDFdKTtcbiAgICB9XG59XG4vKipcbiAqIE1hcmtzIGBUU3R5bGVWYWx1ZWBzIGFzIGR1cGxpY2F0ZXMgaWYgYW5vdGhlciBzdHlsZSBiaW5kaW5nIGluIHRoZSBsaXN0IGhhcyB0aGUgc2FtZVxuICogYFRTdHlsZVZhbHVlYC5cbiAqXG4gKiBOT1RFOiB0aGlzIGZ1bmN0aW9uIGlzIGludGVuZGVkIHRvIGJlIGNhbGxlZCB0d2ljZSBvbmNlIHdpdGggYGlzUHJldkRpcmAgc2V0IHRvIGB0cnVlYCBhbmQgb25jZVxuICogd2l0aCBpdCBzZXQgdG8gYGZhbHNlYCB0byBzZWFyY2ggYm90aCB0aGUgcHJldmlvdXMgYXMgd2VsbCBhcyBuZXh0IGl0ZW1zIGluIHRoZSBsaXN0LlxuICpcbiAqIE5vIGR1cGxpY2F0ZSBjYXNlXG4gKiBgYGBcbiAqICAgW3N0eWxlLmNvbG9yXVxuICogICBbc3R5bGUud2lkdGgucHhdIDw8LSBpbmRleFxuICogICBbc3R5bGUuaGVpZ2h0LnB4XVxuICogYGBgXG4gKlxuICogSW4gdGhlIGFib3ZlIGNhc2UgYWRkaW5nIGBbc3R5bGUud2lkdGgucHhdYCB0byB0aGUgZXhpc3RpbmcgYFtzdHlsZS5jb2xvcl1gIHByb2R1Y2VzIG5vXG4gKiBkdXBsaWNhdGVzIGJlY2F1c2UgYHdpZHRoYCBpcyBub3QgZm91bmQgaW4gYW55IG90aGVyIHBhcnQgb2YgdGhlIGxpbmtlZCBsaXN0LlxuICpcbiAqIER1cGxpY2F0ZSBjYXNlXG4gKiBgYGBcbiAqICAgW3N0eWxlLmNvbG9yXVxuICogICBbc3R5bGUud2lkdGguZW1dXG4gKiAgIFtzdHlsZS53aWR0aC5weF0gPDwtIGluZGV4XG4gKiBgYGBcbiAqIEluIHRoZSBhYm92ZSBjYXNlIGFkZGluZyBgW3N0eWxlLndpZHRoLnB4XWAgd2lsbCBwcm9kdWNlIGEgZHVwbGljYXRlIHdpdGggYFtzdHlsZS53aWR0aC5lbV1gXG4gKiBiZWNhdXNlIGB3aWR0aGAgaXMgZm91bmQgaW4gdGhlIGNoYWluLlxuICpcbiAqIE1hcCBjYXNlIDFcbiAqIGBgYFxuICogICBbc3R5bGUud2lkdGgucHhdXG4gKiAgIFtzdHlsZS5jb2xvcl1cbiAqICAgW3N0eWxlXSAgPDwtIGluZGV4XG4gKiBgYGBcbiAqIEluIHRoZSBhYm92ZSBjYXNlIGFkZGluZyBgW3N0eWxlXWAgd2lsbCBwcm9kdWNlIGEgZHVwbGljYXRlIHdpdGggYW55IG90aGVyIGJpbmRpbmdzIGJlY2F1c2VcbiAqIGBbc3R5bGVdYCBpcyBhIE1hcCBhbmQgYXMgc3VjaCBpcyBmdWxseSBkeW5hbWljIGFuZCBjb3VsZCBwcm9kdWNlIGBjb2xvcmAgb3IgYHdpZHRoYC5cbiAqXG4gKiBNYXAgY2FzZSAyXG4gKiBgYGBcbiAqICAgW3N0eWxlXVxuICogICBbc3R5bGUud2lkdGgucHhdXG4gKiAgIFtzdHlsZS5jb2xvcl0gIDw8LSBpbmRleFxuICogYGBgXG4gKiBJbiB0aGUgYWJvdmUgY2FzZSBhZGRpbmcgYFtzdHlsZS5jb2xvcl1gIHdpbGwgcHJvZHVjZSBhIGR1cGxpY2F0ZSBiZWNhdXNlIHRoZXJlIGlzIGFscmVhZHkgYVxuICogYFtzdHlsZV1gIGJpbmRpbmcgd2hpY2ggaXMgYSBNYXAgYW5kIGFzIHN1Y2ggaXMgZnVsbHkgZHluYW1pYyBhbmQgY291bGQgcHJvZHVjZSBgY29sb3JgIG9yXG4gKiBgd2lkdGhgLlxuICpcbiAqIE5PVEU6IE9uY2UgYFtzdHlsZV1gIChNYXApIGlzIGFkZGVkIGludG8gdGhlIHN5c3RlbSBhbGwgdGhpbmdzIGFyZSBtYXBwZWQgYXMgZHVwbGljYXRlcy5cbiAqIE5PVEU6IFdlIHVzZSBgc3R5bGVgIGFzIGV4YW1wbGUsIGJ1dCBzYW1lIGxvZ2ljIGlzIGFwcGxpZWQgdG8gYGNsYXNzYGVzIGFzIHdlbGwuXG4gKlxuICogQHBhcmFtIHREYXRhIGBURGF0YWAgd2hlcmUgdGhlIGxpbmtlZCBsaXN0IGlzIHN0b3JlZC5cbiAqIEBwYXJhbSB0U3R5bGluZ0tleSBgVFN0eWxpbmdLZXlQcmltaXRpdmVgIHdoaWNoIGNvbnRhaW5zIHRoZSB2YWx1ZSB0byBjb21wYXJlIHRvIG90aGVyIGtleXMgaW5cbiAqICAgICAgICB0aGUgbGlua2VkIGxpc3QuXG4gKiBAcGFyYW0gaW5kZXggU3RhcnRpbmcgbG9jYXRpb24gaW4gdGhlIGxpbmtlZCBsaXN0IHRvIHNlYXJjaCBmcm9tXG4gKiBAcGFyYW0gaXNQcmV2RGlyIERpcmVjdGlvbi5cbiAqICAgICAgICAtIGB0cnVlYCBmb3IgcHJldmlvdXMgKGxvd2VyIHByaW9yaXR5KTtcbiAqICAgICAgICAtIGBmYWxzZWAgZm9yIG5leHQgKGhpZ2hlciBwcmlvcml0eSkuXG4gKi9cbmZ1bmN0aW9uIG1hcmtEdXBsaWNhdGVzKHREYXRhLCB0U3R5bGluZ0tleSwgaW5kZXgsIGlzUHJldkRpciwgaXNDbGFzc0JpbmRpbmcpIHtcbiAgICBjb25zdCB0U3R5bGluZ0F0SW5kZXggPSB0RGF0YVtpbmRleCArIDFdO1xuICAgIGNvbnN0IGlzTWFwID0gdFN0eWxpbmdLZXkgPT09IG51bGw7XG4gICAgbGV0IGN1cnNvciA9IGlzUHJldkRpciA/IGdldFRTdHlsaW5nUmFuZ2VQcmV2KHRTdHlsaW5nQXRJbmRleCkgOiBnZXRUU3R5bGluZ1JhbmdlTmV4dCh0U3R5bGluZ0F0SW5kZXgpO1xuICAgIGxldCBmb3VuZER1cGxpY2F0ZSA9IGZhbHNlO1xuICAgIC8vIFdlIGtlZXAgaXRlcmF0aW5nIGFzIGxvbmcgYXMgd2UgaGF2ZSBhIGN1cnNvclxuICAgIC8vIEFORCBlaXRoZXI6XG4gICAgLy8gLSB3ZSBmb3VuZCB3aGF0IHdlIGFyZSBsb29raW5nIGZvciwgT1JcbiAgICAvLyAtIHdlIGFyZSBhIG1hcCBpbiB3aGljaCBjYXNlIHdlIGhhdmUgdG8gY29udGludWUgc2VhcmNoaW5nIGV2ZW4gYWZ0ZXIgd2UgZmluZCB3aGF0IHdlIHdlcmVcbiAgICAvLyAgIGxvb2tpbmcgZm9yIHNpbmNlIHdlIGFyZSBhIHdpbGQgY2FyZCBhbmQgZXZlcnl0aGluZyBuZWVkcyB0byBiZSBmbGlwcGVkIHRvIGR1cGxpY2F0ZS5cbiAgICB3aGlsZSAoY3Vyc29yICE9PSAwICYmIChmb3VuZER1cGxpY2F0ZSA9PT0gZmFsc2UgfHwgaXNNYXApKSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRJbmRleEluUmFuZ2UodERhdGEsIGN1cnNvcik7XG4gICAgICAgIGNvbnN0IHRTdHlsaW5nVmFsdWVBdEN1cnNvciA9IHREYXRhW2N1cnNvcl07XG4gICAgICAgIGNvbnN0IHRTdHlsZVJhbmdlQXRDdXJzb3IgPSB0RGF0YVtjdXJzb3IgKyAxXTtcbiAgICAgICAgaWYgKGlzU3R5bGluZ01hdGNoKHRTdHlsaW5nVmFsdWVBdEN1cnNvciwgdFN0eWxpbmdLZXkpKSB7XG4gICAgICAgICAgICBmb3VuZER1cGxpY2F0ZSA9IHRydWU7XG4gICAgICAgICAgICB0RGF0YVtjdXJzb3IgKyAxXSA9IGlzUHJldkRpciA/IHNldFRTdHlsaW5nUmFuZ2VOZXh0RHVwbGljYXRlKHRTdHlsZVJhbmdlQXRDdXJzb3IpIDpcbiAgICAgICAgICAgICAgICBzZXRUU3R5bGluZ1JhbmdlUHJldkR1cGxpY2F0ZSh0U3R5bGVSYW5nZUF0Q3Vyc29yKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJzb3IgPSBpc1ByZXZEaXIgPyBnZXRUU3R5bGluZ1JhbmdlUHJldih0U3R5bGVSYW5nZUF0Q3Vyc29yKSA6XG4gICAgICAgICAgICBnZXRUU3R5bGluZ1JhbmdlTmV4dCh0U3R5bGVSYW5nZUF0Q3Vyc29yKTtcbiAgICB9XG4gICAgaWYgKGZvdW5kRHVwbGljYXRlKSB7XG4gICAgICAgIC8vIGlmIHdlIGZvdW5kIGEgZHVwbGljYXRlLCB0aGFuIG1hcmsgb3Vyc2VsdmVzLlxuICAgICAgICB0RGF0YVtpbmRleCArIDFdID0gaXNQcmV2RGlyID8gc2V0VFN0eWxpbmdSYW5nZVByZXZEdXBsaWNhdGUodFN0eWxpbmdBdEluZGV4KSA6XG4gICAgICAgICAgICBzZXRUU3R5bGluZ1JhbmdlTmV4dER1cGxpY2F0ZSh0U3R5bGluZ0F0SW5kZXgpO1xuICAgIH1cbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0d28gYFRTdHlsaW5nS2V5YHMgYXJlIGEgbWF0Y2guXG4gKlxuICogV2hlbiBjb21wdXRpbmcgd2hldGhlciBhIGJpbmRpbmcgY29udGFpbnMgYSBkdXBsaWNhdGUsIHdlIG5lZWQgdG8gY29tcGFyZSBpZiB0aGUgaW5zdHJ1Y3Rpb25cbiAqIGBUU3R5bGluZ0tleWAgaGFzIGEgbWF0Y2guXG4gKlxuICogSGVyZSBhcmUgZXhhbXBsZXMgb2YgYFRTdHlsaW5nS2V5YHMgd2hpY2ggbWF0Y2ggZ2l2ZW4gYHRTdHlsaW5nS2V5Q3Vyc29yYCBpczpcbiAqIC0gYGNvbG9yYFxuICogICAgLSBgY29sb3JgICAgIC8vIE1hdGNoIGFub3RoZXIgY29sb3JcbiAqICAgIC0gYG51bGxgICAgICAvLyBUaGF0IG1lYW5zIHRoYXQgYHRTdHlsaW5nS2V5YCBpcyBhIGBjbGFzc01hcGAvYHN0eWxlTWFwYCBpbnN0cnVjdGlvblxuICogICAgLSBgWycnLCAnY29sb3InLCAnb3RoZXInLCB0cnVlXWAgLy8gd3JhcHBlZCBgY29sb3JgIHNvIG1hdGNoXG4gKiAgICAtIGBbJycsIG51bGwsICdvdGhlcicsIHRydWVdYCAgICAgICAvLyB3cmFwcGVkIGBudWxsYCBzbyBtYXRjaFxuICogICAgLSBgWycnLCAnd2lkdGgnLCAnY29sb3InLCAndmFsdWUnXWAgLy8gd3JhcHBlZCBzdGF0aWMgdmFsdWUgY29udGFpbnMgYSBtYXRjaCBvbiBgJ2NvbG9yJ2BcbiAqIC0gYG51bGxgICAgICAgIC8vIGB0U3R5bGluZ0tleUN1cnNvcmAgYWx3YXlzIG1hdGNoIGFzIGl0IGlzIGBjbGFzc01hcGAvYHN0eWxlTWFwYCBpbnN0cnVjdGlvblxuICpcbiAqIEBwYXJhbSB0U3R5bGluZ0tleUN1cnNvclxuICogQHBhcmFtIHRTdHlsaW5nS2V5XG4gKi9cbmZ1bmN0aW9uIGlzU3R5bGluZ01hdGNoKHRTdHlsaW5nS2V5Q3Vyc29yLCB0U3R5bGluZ0tleSkge1xuICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICBhc3NlcnROb3RFcXVhbChBcnJheS5pc0FycmF5KHRTdHlsaW5nS2V5KSwgdHJ1ZSwgJ0V4cGVjdGVkIHRoYXQgXFwndFN0eWxpbmdLZXlcXCcgaGFzIGJlZW4gdW53cmFwcGVkJyk7XG4gICAgaWYgKHRTdHlsaW5nS2V5Q3Vyc29yID09PSBudWxsIHx8IC8vIElmIHRoZSBjdXJzb3IgaXMgYG51bGxgIGl0IG1lYW5zIHRoYXQgd2UgaGF2ZSBtYXAgYXQgdGhhdFxuICAgICAgICAvLyBsb2NhdGlvbiBzbyB3ZSBtdXN0IGFzc3VtZSB0aGF0IHdlIGhhdmUgYSBtYXRjaC5cbiAgICAgICAgdFN0eWxpbmdLZXkgPT0gbnVsbCB8fCAvLyBJZiBgdFN0eWxpbmdLZXlgIGlzIGBudWxsYCB0aGVuIGl0IGlzIGEgbWFwIHRoZXJlZm9yIGFzc3VtZSB0aGF0IGl0XG4gICAgICAgIC8vIGNvbnRhaW5zIGEgbWF0Y2guXG4gICAgICAgIChBcnJheS5pc0FycmF5KHRTdHlsaW5nS2V5Q3Vyc29yKSA/IHRTdHlsaW5nS2V5Q3Vyc29yWzFdIDogdFN0eWxpbmdLZXlDdXJzb3IpID09PVxuICAgICAgICAgICAgdFN0eWxpbmdLZXkgLy8gSWYgdGhlIGtleXMgbWF0Y2ggZXhwbGljaXRseSB0aGFuIHdlIGFyZSBhIG1hdGNoLlxuICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0U3R5bGluZ0tleUN1cnNvcikgJiYgdHlwZW9mIHRTdHlsaW5nS2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBpZiB3ZSBkaWQgbm90IGZpbmQgYSBtYXRjaCwgYnV0IGB0U3R5bGluZ0tleUN1cnNvcmAgaXMgYEtleVZhbHVlQXJyYXlgIHRoYXQgbWVhbnMgY3Vyc29yIGhhc1xuICAgICAgICAvLyBzdGF0aWNzIGFuZCB3ZSBuZWVkIHRvIGNoZWNrIHRob3NlIGFzIHdlbGwuXG4gICAgICAgIHJldHVybiBrZXlWYWx1ZUFycmF5SW5kZXhPZih0U3R5bGluZ0tleUN1cnNvciwgdFN0eWxpbmdLZXkpID49XG4gICAgICAgICAgICAwOyAvLyBzZWUgaWYgd2UgYXJlIG1hdGNoaW5nIHRoZSBrZXlcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8vIEdsb2JhbCBzdGF0ZSBvZiB0aGUgcGFyc2VyLiAoVGhpcyBtYWtlcyBwYXJzZXIgbm9uLXJlZW50cmFudCwgYnV0IHRoYXQgaXMgbm90IGFuIGlzc3VlKVxuY29uc3QgcGFyc2VyU3RhdGUgPSB7XG4gICAgdGV4dEVuZDogMCxcbiAgICBrZXk6IDAsXG4gICAga2V5RW5kOiAwLFxuICAgIHZhbHVlOiAwLFxuICAgIHZhbHVlRW5kOiAwLFxufTtcbi8qKlxuICogUmV0cmlldmVzIHRoZSBsYXN0IHBhcnNlZCBga2V5YCBvZiBzdHlsZS5cbiAqIEBwYXJhbSB0ZXh0IHRoZSB0ZXh0IHRvIHN1YnN0cmluZyB0aGUga2V5IGZyb20uXG4gKi9cbmZ1bmN0aW9uIGdldExhc3RQYXJzZWRLZXkodGV4dCkge1xuICAgIHJldHVybiB0ZXh0LnN1YnN0cmluZyhwYXJzZXJTdGF0ZS5rZXksIHBhcnNlclN0YXRlLmtleUVuZCk7XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgbGFzdCBwYXJzZWQgYHZhbHVlYCBvZiBzdHlsZS5cbiAqIEBwYXJhbSB0ZXh0IHRoZSB0ZXh0IHRvIHN1YnN0cmluZyB0aGUga2V5IGZyb20uXG4gKi9cbmZ1bmN0aW9uIGdldExhc3RQYXJzZWRWYWx1ZSh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQuc3Vic3RyaW5nKHBhcnNlclN0YXRlLnZhbHVlLCBwYXJzZXJTdGF0ZS52YWx1ZUVuZCk7XG59XG4vKipcbiAqIEluaXRpYWxpemVzIGBjbGFzc05hbWVgIHN0cmluZyBmb3IgcGFyc2luZyBhbmQgcGFyc2VzIHRoZSBmaXJzdCB0b2tlbi5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gdGhpcyBmb3JtYXQ6XG4gKiBgYGBcbiAqIGZvciAobGV0IGkgPSBwYXJzZUNsYXNzTmFtZSh0ZXh0KTsgaSA+PSAwOyBpID0gcGFyc2VDbGFzc05hbWVOZXh0KHRleHQsIGkpKSB7XG4gKiAgIGNvbnN0IGtleSA9IGdldExhc3RQYXJzZWRLZXkoKTtcbiAqICAgLi4uXG4gKiB9XG4gKiBgYGBcbiAqIEBwYXJhbSB0ZXh0IGBjbGFzc05hbWVgIHRvIHBhcnNlXG4gKiBAcmV0dXJucyBpbmRleCB3aGVyZSB0aGUgbmV4dCBpbnZvY2F0aW9uIG9mIGBwYXJzZUNsYXNzTmFtZU5leHRgIHNob3VsZCByZXN1bWUuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQ2xhc3NOYW1lKHRleHQpIHtcbiAgICByZXNldFBhcnNlclN0YXRlKHRleHQpO1xuICAgIHJldHVybiBwYXJzZUNsYXNzTmFtZU5leHQodGV4dCwgY29uc3VtZVdoaXRlc3BhY2UodGV4dCwgMCwgcGFyc2VyU3RhdGUudGV4dEVuZCkpO1xufVxuLyoqXG4gKiBQYXJzZXMgbmV4dCBgY2xhc3NOYW1lYCB0b2tlbi5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gdGhpcyBmb3JtYXQ6XG4gKiBgYGBcbiAqIGZvciAobGV0IGkgPSBwYXJzZUNsYXNzTmFtZSh0ZXh0KTsgaSA+PSAwOyBpID0gcGFyc2VDbGFzc05hbWVOZXh0KHRleHQsIGkpKSB7XG4gKiAgIGNvbnN0IGtleSA9IGdldExhc3RQYXJzZWRLZXkoKTtcbiAqICAgLi4uXG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdGV4dCBgY2xhc3NOYW1lYCB0byBwYXJzZVxuICogQHBhcmFtIGluZGV4IHdoZXJlIHRoZSBwYXJzaW5nIHNob3VsZCByZXN1bWUuXG4gKiBAcmV0dXJucyBpbmRleCB3aGVyZSB0aGUgbmV4dCBpbnZvY2F0aW9uIG9mIGBwYXJzZUNsYXNzTmFtZU5leHRgIHNob3VsZCByZXN1bWUuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQ2xhc3NOYW1lTmV4dCh0ZXh0LCBpbmRleCkge1xuICAgIGNvbnN0IGVuZCA9IHBhcnNlclN0YXRlLnRleHRFbmQ7XG4gICAgaWYgKGVuZCA9PT0gaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpbmRleCA9IHBhcnNlclN0YXRlLmtleUVuZCA9IGNvbnN1bWVDbGFzc1Rva2VuKHRleHQsIHBhcnNlclN0YXRlLmtleSA9IGluZGV4LCBlbmQpO1xuICAgIHJldHVybiBjb25zdW1lV2hpdGVzcGFjZSh0ZXh0LCBpbmRleCwgZW5kKTtcbn1cbi8qKlxuICogSW5pdGlhbGl6ZXMgYGNzc1RleHRgIHN0cmluZyBmb3IgcGFyc2luZyBhbmQgcGFyc2VzIHRoZSBmaXJzdCBrZXkvdmFsdWVzLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiB0aGlzIGZvcm1hdDpcbiAqIGBgYFxuICogZm9yIChsZXQgaSA9IHBhcnNlU3R5bGUodGV4dCk7IGkgPj0gMDsgaSA9IHBhcnNlU3R5bGVOZXh0KHRleHQsIGkpKSkge1xuICogICBjb25zdCBrZXkgPSBnZXRMYXN0UGFyc2VkS2V5KCk7XG4gKiAgIGNvbnN0IHZhbHVlID0gZ2V0TGFzdFBhcnNlZFZhbHVlKCk7XG4gKiAgIC4uLlxuICogfVxuICogYGBgXG4gKiBAcGFyYW0gdGV4dCBgY3NzVGV4dGAgdG8gcGFyc2VcbiAqIEByZXR1cm5zIGluZGV4IHdoZXJlIHRoZSBuZXh0IGludm9jYXRpb24gb2YgYHBhcnNlU3R5bGVOZXh0YCBzaG91bGQgcmVzdW1lLlxuICovXG5mdW5jdGlvbiBwYXJzZVN0eWxlKHRleHQpIHtcbiAgICByZXNldFBhcnNlclN0YXRlKHRleHQpO1xuICAgIHJldHVybiBwYXJzZVN0eWxlTmV4dCh0ZXh0LCBjb25zdW1lV2hpdGVzcGFjZSh0ZXh0LCAwLCBwYXJzZXJTdGF0ZS50ZXh0RW5kKSk7XG59XG4vKipcbiAqIFBhcnNlcyB0aGUgbmV4dCBgY3NzVGV4dGAga2V5L3ZhbHVlcy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgaW4gdGhpcyBmb3JtYXQ6XG4gKiBgYGBcbiAqIGZvciAobGV0IGkgPSBwYXJzZVN0eWxlKHRleHQpOyBpID49IDA7IGkgPSBwYXJzZVN0eWxlTmV4dCh0ZXh0LCBpKSkpIHtcbiAqICAgY29uc3Qga2V5ID0gZ2V0TGFzdFBhcnNlZEtleSgpO1xuICogICBjb25zdCB2YWx1ZSA9IGdldExhc3RQYXJzZWRWYWx1ZSgpO1xuICogICAuLi5cbiAqIH1cbiAqXG4gKiBAcGFyYW0gdGV4dCBgY3NzVGV4dGAgdG8gcGFyc2VcbiAqIEBwYXJhbSBpbmRleCB3aGVyZSB0aGUgcGFyc2luZyBzaG91bGQgcmVzdW1lLlxuICogQHJldHVybnMgaW5kZXggd2hlcmUgdGhlIG5leHQgaW52b2NhdGlvbiBvZiBgcGFyc2VTdHlsZU5leHRgIHNob3VsZCByZXN1bWUuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU3R5bGVOZXh0KHRleHQsIHN0YXJ0SW5kZXgpIHtcbiAgICBjb25zdCBlbmQgPSBwYXJzZXJTdGF0ZS50ZXh0RW5kO1xuICAgIGxldCBpbmRleCA9IHBhcnNlclN0YXRlLmtleSA9IGNvbnN1bWVXaGl0ZXNwYWNlKHRleHQsIHN0YXJ0SW5kZXgsIGVuZCk7XG4gICAgaWYgKGVuZCA9PT0gaW5kZXgpIHtcbiAgICAgICAgLy8gd2UgcmVhY2hlZCBhbiBlbmQgc28ganVzdCBxdWl0XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaW5kZXggPSBwYXJzZXJTdGF0ZS5rZXlFbmQgPSBjb25zdW1lU3R5bGVLZXkodGV4dCwgaW5kZXgsIGVuZCk7XG4gICAgaW5kZXggPSBjb25zdW1lU2VwYXJhdG9yKHRleHQsIGluZGV4LCBlbmQsIDU4IC8qIENPTE9OICovKTtcbiAgICBpbmRleCA9IHBhcnNlclN0YXRlLnZhbHVlID0gY29uc3VtZVdoaXRlc3BhY2UodGV4dCwgaW5kZXgsIGVuZCk7XG4gICAgaW5kZXggPSBwYXJzZXJTdGF0ZS52YWx1ZUVuZCA9IGNvbnN1bWVTdHlsZVZhbHVlKHRleHQsIGluZGV4LCBlbmQpO1xuICAgIHJldHVybiBjb25zdW1lU2VwYXJhdG9yKHRleHQsIGluZGV4LCBlbmQsIDU5IC8qIFNFTUlfQ09MT04gKi8pO1xufVxuLyoqXG4gKiBSZXNldCB0aGUgZ2xvYmFsIHN0YXRlIG9mIHRoZSBzdHlsaW5nIHBhcnNlci5cbiAqIEBwYXJhbSB0ZXh0IFRoZSBzdHlsaW5nIHRleHQgdG8gcGFyc2UuXG4gKi9cbmZ1bmN0aW9uIHJlc2V0UGFyc2VyU3RhdGUodGV4dCkge1xuICAgIHBhcnNlclN0YXRlLmtleSA9IDA7XG4gICAgcGFyc2VyU3RhdGUua2V5RW5kID0gMDtcbiAgICBwYXJzZXJTdGF0ZS52YWx1ZSA9IDA7XG4gICAgcGFyc2VyU3RhdGUudmFsdWVFbmQgPSAwO1xuICAgIHBhcnNlclN0YXRlLnRleHRFbmQgPSB0ZXh0Lmxlbmd0aDtcbn1cbi8qKlxuICogUmV0dXJucyBpbmRleCBvZiBuZXh0IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAqXG4gKiBAcGFyYW0gdGV4dCBUZXh0IHRvIHNjYW5cbiAqIEBwYXJhbSBzdGFydEluZGV4IFN0YXJ0aW5nIGluZGV4IG9mIGNoYXJhY3RlciB3aGVyZSB0aGUgc2NhbiBzaG91bGQgc3RhcnQuXG4gKiBAcGFyYW0gZW5kSW5kZXggRW5kaW5nIGluZGV4IG9mIGNoYXJhY3RlciB3aGVyZSB0aGUgc2NhbiBzaG91bGQgZW5kLlxuICogQHJldHVybnMgSW5kZXggb2YgbmV4dCBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXIgKE1heSBiZSB0aGUgc2FtZSBhcyBgc3RhcnRgIGlmIG5vIHdoaXRlc3BhY2UgYXRcbiAqICAgICAgICAgIHRoYXQgbG9jYXRpb24uKVxuICovXG5mdW5jdGlvbiBjb25zdW1lV2hpdGVzcGFjZSh0ZXh0LCBzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgIHdoaWxlIChzdGFydEluZGV4IDwgZW5kSW5kZXggJiYgdGV4dC5jaGFyQ29kZUF0KHN0YXJ0SW5kZXgpIDw9IDMyIC8qIFNQQUNFICovKSB7XG4gICAgICAgIHN0YXJ0SW5kZXgrKztcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0SW5kZXg7XG59XG4vKipcbiAqIFJldHVybnMgaW5kZXggb2YgbGFzdCBjaGFyIGluIGNsYXNzIHRva2VuLlxuICpcbiAqIEBwYXJhbSB0ZXh0IFRleHQgdG8gc2NhblxuICogQHBhcmFtIHN0YXJ0SW5kZXggU3RhcnRpbmcgaW5kZXggb2YgY2hhcmFjdGVyIHdoZXJlIHRoZSBzY2FuIHNob3VsZCBzdGFydC5cbiAqIEBwYXJhbSBlbmRJbmRleCBFbmRpbmcgaW5kZXggb2YgY2hhcmFjdGVyIHdoZXJlIHRoZSBzY2FuIHNob3VsZCBlbmQuXG4gKiBAcmV0dXJucyBJbmRleCBhZnRlciBsYXN0IGNoYXIgaW4gY2xhc3MgdG9rZW4uXG4gKi9cbmZ1bmN0aW9uIGNvbnN1bWVDbGFzc1Rva2VuKHRleHQsIHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgd2hpbGUgKHN0YXJ0SW5kZXggPCBlbmRJbmRleCAmJiB0ZXh0LmNoYXJDb2RlQXQoc3RhcnRJbmRleCkgPiAzMiAvKiBTUEFDRSAqLykge1xuICAgICAgICBzdGFydEluZGV4Kys7XG4gICAgfVxuICAgIHJldHVybiBzdGFydEluZGV4O1xufVxuLyoqXG4gKiBDb25zdW1lcyBhbGwgb2YgdGhlIGNoYXJhY3RlcnMgYmVsb25naW5nIHRvIHN0eWxlIGtleSBhbmQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHRleHQgVGV4dCB0byBzY2FuXG4gKiBAcGFyYW0gc3RhcnRJbmRleCBTdGFydGluZyBpbmRleCBvZiBjaGFyYWN0ZXIgd2hlcmUgdGhlIHNjYW4gc2hvdWxkIHN0YXJ0LlxuICogQHBhcmFtIGVuZEluZGV4IEVuZGluZyBpbmRleCBvZiBjaGFyYWN0ZXIgd2hlcmUgdGhlIHNjYW4gc2hvdWxkIGVuZC5cbiAqIEByZXR1cm5zIEluZGV4IGFmdGVyIGxhc3Qgc3R5bGUga2V5IGNoYXJhY3Rlci5cbiAqL1xuZnVuY3Rpb24gY29uc3VtZVN0eWxlS2V5KHRleHQsIHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgbGV0IGNoO1xuICAgIHdoaWxlIChzdGFydEluZGV4IDwgZW5kSW5kZXggJiZcbiAgICAgICAgKChjaCA9IHRleHQuY2hhckNvZGVBdChzdGFydEluZGV4KSkgPT09IDQ1IC8qIERBU0ggKi8gfHwgY2ggPT09IDk1IC8qIFVOREVSU0NPUkUgKi8gfHxcbiAgICAgICAgICAgICgoY2ggJiAtMzMgLyogVVBQRVJfQ0FTRSAqLykgPj0gNjUgLyogQSAqLyAmJiAoY2ggJiAtMzMgLyogVVBQRVJfQ0FTRSAqLykgPD0gOTAgLyogWiAqLykgfHxcbiAgICAgICAgICAgIChjaCA+PSA0OCAvKiBaRVJPICovICYmIGNoIDw9IDU3IC8qIE5JTkUgKi8pKSkge1xuICAgICAgICBzdGFydEluZGV4Kys7XG4gICAgfVxuICAgIHJldHVybiBzdGFydEluZGV4O1xufVxuLyoqXG4gKiBDb25zdW1lcyBhbGwgd2hpdGVzcGFjZSBhbmQgdGhlIHNlcGFyYXRvciBgOmAgYWZ0ZXIgdGhlIHN0eWxlIGtleS5cbiAqXG4gKiBAcGFyYW0gdGV4dCBUZXh0IHRvIHNjYW5cbiAqIEBwYXJhbSBzdGFydEluZGV4IFN0YXJ0aW5nIGluZGV4IG9mIGNoYXJhY3RlciB3aGVyZSB0aGUgc2NhbiBzaG91bGQgc3RhcnQuXG4gKiBAcGFyYW0gZW5kSW5kZXggRW5kaW5nIGluZGV4IG9mIGNoYXJhY3RlciB3aGVyZSB0aGUgc2NhbiBzaG91bGQgZW5kLlxuICogQHJldHVybnMgSW5kZXggYWZ0ZXIgc2VwYXJhdG9yIGFuZCBzdXJyb3VuZGluZyB3aGl0ZXNwYWNlLlxuICovXG5mdW5jdGlvbiBjb25zdW1lU2VwYXJhdG9yKHRleHQsIHN0YXJ0SW5kZXgsIGVuZEluZGV4LCBzZXBhcmF0b3IpIHtcbiAgICBzdGFydEluZGV4ID0gY29uc3VtZVdoaXRlc3BhY2UodGV4dCwgc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuICAgIGlmIChzdGFydEluZGV4IDwgZW5kSW5kZXgpIHtcbiAgICAgICAgaWYgKG5nRGV2TW9kZSAmJiB0ZXh0LmNoYXJDb2RlQXQoc3RhcnRJbmRleCkgIT09IHNlcGFyYXRvcikge1xuICAgICAgICAgICAgbWFsZm9ybWVkU3R5bGVFcnJvcih0ZXh0LCBTdHJpbmcuZnJvbUNoYXJDb2RlKHNlcGFyYXRvciksIHN0YXJ0SW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHN0YXJ0SW5kZXgrKztcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0SW5kZXg7XG59XG4vKipcbiAqIENvbnN1bWVzIHN0eWxlIHZhbHVlIGhvbm9yaW5nIGB1cmwoKWAgYW5kIGBcIlwiYCB0ZXh0LlxuICpcbiAqIEBwYXJhbSB0ZXh0IFRleHQgdG8gc2NhblxuICogQHBhcmFtIHN0YXJ0SW5kZXggU3RhcnRpbmcgaW5kZXggb2YgY2hhcmFjdGVyIHdoZXJlIHRoZSBzY2FuIHNob3VsZCBzdGFydC5cbiAqIEBwYXJhbSBlbmRJbmRleCBFbmRpbmcgaW5kZXggb2YgY2hhcmFjdGVyIHdoZXJlIHRoZSBzY2FuIHNob3VsZCBlbmQuXG4gKiBAcmV0dXJucyBJbmRleCBhZnRlciBsYXN0IHN0eWxlIHZhbHVlIGNoYXJhY3Rlci5cbiAqL1xuZnVuY3Rpb24gY29uc3VtZVN0eWxlVmFsdWUodGV4dCwgc3RhcnRJbmRleCwgZW5kSW5kZXgpIHtcbiAgICBsZXQgY2gxID0gLTE7IC8vIDFzdCBwcmV2aW91cyBjaGFyYWN0ZXJcbiAgICBsZXQgY2gyID0gLTE7IC8vIDJuZCBwcmV2aW91cyBjaGFyYWN0ZXJcbiAgICBsZXQgY2gzID0gLTE7IC8vIDNyZCBwcmV2aW91cyBjaGFyYWN0ZXJcbiAgICBsZXQgaSA9IHN0YXJ0SW5kZXg7XG4gICAgbGV0IGxhc3RDaEluZGV4ID0gaTtcbiAgICB3aGlsZSAoaSA8IGVuZEluZGV4KSB7XG4gICAgICAgIGNvbnN0IGNoID0gdGV4dC5jaGFyQ29kZUF0KGkrKyk7XG4gICAgICAgIGlmIChjaCA9PT0gNTkgLyogU0VNSV9DT0xPTiAqLykge1xuICAgICAgICAgICAgcmV0dXJuIGxhc3RDaEluZGV4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNoID09PSAzNCAvKiBET1VCTEVfUVVPVEUgKi8gfHwgY2ggPT09IDM5IC8qIFNJTkdMRV9RVU9URSAqLykge1xuICAgICAgICAgICAgbGFzdENoSW5kZXggPSBpID0gY29uc3VtZVF1b3RlZFRleHQodGV4dCwgY2gsIGksIGVuZEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGFydEluZGV4ID09PVxuICAgICAgICAgICAgaSAtIDQgJiYgLy8gV2UgaGF2ZSBzZWVuIG9ubHkgNCBjaGFyYWN0ZXJzIHNvIGZhciBcIlVSTChcIiAoSWdub3JlIFwiZm9vX1VSTCgpXCIpXG4gICAgICAgICAgICBjaDMgPT09IDg1IC8qIFUgKi8gJiZcbiAgICAgICAgICAgIGNoMiA9PT0gODIgLyogUiAqLyAmJiBjaDEgPT09IDc2IC8qIEwgKi8gJiYgY2ggPT09IDQwIC8qIE9QRU5fUEFSRU4gKi8pIHtcbiAgICAgICAgICAgIGxhc3RDaEluZGV4ID0gaSA9IGNvbnN1bWVRdW90ZWRUZXh0KHRleHQsIDQxIC8qIENMT1NFX1BBUkVOICovLCBpLCBlbmRJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2ggPiAzMiAvKiBTUEFDRSAqLykge1xuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlciB0aGVuIGNhcHR1cmUgaXRzIGxvY2F0aW9uXG4gICAgICAgICAgICBsYXN0Q2hJbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgY2gzID0gY2gyO1xuICAgICAgICBjaDIgPSBjaDE7XG4gICAgICAgIGNoMSA9IGNoICYgLTMzIC8qIFVQUEVSX0NBU0UgKi87XG4gICAgfVxuICAgIHJldHVybiBsYXN0Q2hJbmRleDtcbn1cbi8qKlxuICogQ29uc3VtZXMgYWxsIG9mIHRoZSBxdW90ZWQgY2hhcmFjdGVycy5cbiAqXG4gKiBAcGFyYW0gdGV4dCBUZXh0IHRvIHNjYW5cbiAqIEBwYXJhbSBxdW90ZUNoYXJDb2RlIENoYXJDb2RlIG9mIGVpdGhlciBgXCJgIG9yIGAnYCBxdW90ZSBvciBgKWAgZm9yIGB1cmwoLi4uKWAuXG4gKiBAcGFyYW0gc3RhcnRJbmRleCBTdGFydGluZyBpbmRleCBvZiBjaGFyYWN0ZXIgd2hlcmUgdGhlIHNjYW4gc2hvdWxkIHN0YXJ0LlxuICogQHBhcmFtIGVuZEluZGV4IEVuZGluZyBpbmRleCBvZiBjaGFyYWN0ZXIgd2hlcmUgdGhlIHNjYW4gc2hvdWxkIGVuZC5cbiAqIEByZXR1cm5zIEluZGV4IGFmdGVyIHF1b3RlZCBjaGFyYWN0ZXJzLlxuICovXG5mdW5jdGlvbiBjb25zdW1lUXVvdGVkVGV4dCh0ZXh0LCBxdW90ZUNoYXJDb2RlLCBzdGFydEluZGV4LCBlbmRJbmRleCkge1xuICAgIGxldCBjaDEgPSAtMTsgLy8gMXN0IHByZXZpb3VzIGNoYXJhY3RlclxuICAgIGxldCBpbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgd2hpbGUgKGluZGV4IDwgZW5kSW5kZXgpIHtcbiAgICAgICAgY29uc3QgY2ggPSB0ZXh0LmNoYXJDb2RlQXQoaW5kZXgrKyk7XG4gICAgICAgIGlmIChjaCA9PSBxdW90ZUNoYXJDb2RlICYmIGNoMSAhPT0gOTIgLyogQkFDS19TTEFTSCAqLykge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaCA9PSA5MiAvKiBCQUNLX1NMQVNIICovICYmIGNoMSA9PT0gOTIgLyogQkFDS19TTEFTSCAqLykge1xuICAgICAgICAgICAgLy8gdHdvIGJhY2sgc2xhc2hlcyBjYW5jZWwgZWFjaCBvdGhlciBvdXQuIEZvciBleGFtcGxlIGBcIlxcXFxcImAgc2hvdWxkIHByb3Blcmx5IGVuZCB0aGVcbiAgICAgICAgICAgIC8vIHF1b3RhdGlvbi4gKEl0IHNob3VsZCBub3QgYXNzdW1lIHRoYXQgdGhlIGxhc3QgYFwiYCBpcyBlc2NhcGVkLilcbiAgICAgICAgICAgIGNoMSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjaDEgPSBjaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZ0Rldk1vZGUgPyBtYWxmb3JtZWRTdHlsZUVycm9yKHRleHQsIFN0cmluZy5mcm9tQ2hhckNvZGUocXVvdGVDaGFyQ29kZSksIGVuZEluZGV4KSA6XG4gICAgICAgIG5ldyBFcnJvcigpO1xufVxuZnVuY3Rpb24gbWFsZm9ybWVkU3R5bGVFcnJvcih0ZXh0LCBleHBlY3RpbmcsIGluZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEVxdWFsKHR5cGVvZiB0ZXh0ID09PSAnc3RyaW5nJywgdHJ1ZSwgJ1N0cmluZyBleHBlY3RlZCBoZXJlJyk7XG4gICAgdGhyb3cgdGhyb3dFcnJvcihgTWFsZm9ybWVkIHN0eWxlIGF0IGxvY2F0aW9uICR7aW5kZXh9IGluIHN0cmluZyAnYCArIHRleHQuc3Vic3RyaW5nKDAsIGluZGV4KSArICdbPj4nICtcbiAgICAgICAgdGV4dC5zdWJzdHJpbmcoaW5kZXgsIGluZGV4ICsgMSkgKyAnPDxdJyArIHRleHQuc3Vic3RyKGluZGV4ICsgMSkgK1xuICAgICAgICBgJy4gRXhwZWN0aW5nICcke2V4cGVjdGluZ30nLmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVXBkYXRlIGEgc3R5bGUgYmluZGluZyBvbiBhbiBlbGVtZW50IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLlxuICpcbiAqIElmIHRoZSBzdHlsZSB2YWx1ZSBpcyBmYWxzeSB0aGVuIGl0IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XG4gKiAob3IgYXNzaWduZWQgYSBkaWZmZXJlbnQgdmFsdWUgZGVwZW5kaW5nIGlmIHRoZXJlIGFyZSBhbnkgc3R5bGVzIHBsYWNlZFxuICogb24gdGhlIGVsZW1lbnQgd2l0aCBgc3R5bGVNYXBgIG9yIGFueSBzdGF0aWMgc3R5bGVzIHRoYXQgYXJlXG4gKiBwcmVzZW50IGZyb20gd2hlbiB0aGUgZWxlbWVudCB3YXMgY3JlYXRlZCB3aXRoIGBzdHlsaW5nYCkuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBzdHlsaW5nIGVsZW1lbnQgaXMgdXBkYXRlZCBhcyBwYXJ0IG9mIGBzdHlsaW5nQXBwbHlgLlxuICpcbiAqIEBwYXJhbSBwcm9wIEEgdmFsaWQgQ1NTIHByb3BlcnR5LlxuICogQHBhcmFtIHZhbHVlIE5ldyB2YWx1ZSB0byB3cml0ZSAoYG51bGxgIG9yIGFuIGVtcHR5IHN0cmluZyB0byByZW1vdmUpLlxuICogQHBhcmFtIHN1ZmZpeCBPcHRpb25hbCBzdWZmaXguIFVzZWQgd2l0aCBzY2FsYXIgdmFsdWVzIHRvIGFkZCB1bml0IHN1Y2ggYXMgYHB4YC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyB3aWxsIGFwcGx5IHRoZSBwcm92aWRlZCBzdHlsZSB2YWx1ZSB0byB0aGUgaG9zdCBlbGVtZW50IGlmIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkXG4gKiB3aXRoaW4gYSBob3N0IGJpbmRpbmcgZnVuY3Rpb24uXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXN0eWxlUHJvcChwcm9wLCB2YWx1ZSwgc3VmZml4KSB7XG4gICAgY2hlY2tTdHlsaW5nUHJvcGVydHkocHJvcCwgdmFsdWUsIHN1ZmZpeCwgZmFsc2UpO1xuICAgIHJldHVybiDJtcm1c3R5bGVQcm9wO1xufVxuLyoqXG4gKiBVcGRhdGUgYSBjbGFzcyBiaW5kaW5nIG9uIGFuIGVsZW1lbnQgd2l0aCB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gKlxuICogVGhpcyBpbnN0cnVjdGlvbiBpcyBtZWFudCB0byBoYW5kbGUgdGhlIGBbY2xhc3MuZm9vXT1cImV4cFwiYCBjYXNlIGFuZCxcbiAqIHRoZXJlZm9yZSwgdGhlIGNsYXNzIGJpbmRpbmcgaXRzZWxmIG11c3QgYWxyZWFkeSBiZSBhbGxvY2F0ZWQgdXNpbmdcbiAqIGBzdHlsaW5nYCB3aXRoaW4gdGhlIGNyZWF0aW9uIGJsb2NrLlxuICpcbiAqIEBwYXJhbSBwcm9wIEEgdmFsaWQgQ1NTIGNsYXNzIChvbmx5IG9uZSkuXG4gKiBAcGFyYW0gdmFsdWUgQSB0cnVlL2ZhbHNlIHZhbHVlIHdoaWNoIHdpbGwgdHVybiB0aGUgY2xhc3Mgb24gb3Igb2ZmLlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgYXBwbHkgdGhlIHByb3ZpZGVkIGNsYXNzIHZhbHVlIHRvIHRoZSBob3N0IGVsZW1lbnQgaWYgdGhpcyBmdW5jdGlvblxuICogaXMgY2FsbGVkIHdpdGhpbiBhIGhvc3QgYmluZGluZyBmdW5jdGlvbi5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1Y2xhc3NQcm9wKGNsYXNzTmFtZSwgdmFsdWUpIHtcbiAgICBjaGVja1N0eWxpbmdQcm9wZXJ0eShjbGFzc05hbWUsIHZhbHVlLCBudWxsLCB0cnVlKTtcbiAgICByZXR1cm4gybXJtWNsYXNzUHJvcDtcbn1cbi8qKlxuICogVXBkYXRlIHN0eWxlIGJpbmRpbmdzIHVzaW5nIGFuIG9iamVjdCBsaXRlcmFsIG9uIGFuIGVsZW1lbnQuXG4gKlxuICogVGhpcyBpbnN0cnVjdGlvbiBpcyBtZWFudCB0byBhcHBseSBzdHlsaW5nIHZpYSB0aGUgYFtzdHlsZV09XCJleHBcImAgdGVtcGxhdGUgYmluZGluZ3MuXG4gKiBXaGVuIHN0eWxlcyBhcmUgYXBwbGllZCB0byB0aGUgZWxlbWVudCB0aGV5IHdpbGwgdGhlbiBiZSB1cGRhdGVkIHdpdGggcmVzcGVjdCB0b1xuICogYW55IHN0eWxlcy9jbGFzc2VzIHNldCB2aWEgYHN0eWxlUHJvcGAuIElmIGFueSBzdHlsZXMgYXJlIHNldCB0byBmYWxzeVxuICogdGhlbiB0aGV5IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgc3R5bGluZyBpbnN0cnVjdGlvbiB3aWxsIG5vdCBiZSBhcHBsaWVkIHVudGlsIGBzdHlsaW5nQXBwbHlgIGlzIGNhbGxlZC5cbiAqXG4gKiBAcGFyYW0gc3R5bGVzIEEga2V5L3ZhbHVlIHN0eWxlIG1hcCBvZiB0aGUgc3R5bGVzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBnaXZlbiBlbGVtZW50LlxuICogICAgICAgIEFueSBtaXNzaW5nIHN0eWxlcyAodGhhdCBoYXZlIGFscmVhZHkgYmVlbiBhcHBsaWVkIHRvIHRoZSBlbGVtZW50IGJlZm9yZWhhbmQpIHdpbGwgYmVcbiAqICAgICAgICByZW1vdmVkICh1bnNldCkgZnJvbSB0aGUgZWxlbWVudCdzIHN0eWxpbmcuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgd2lsbCBhcHBseSB0aGUgcHJvdmlkZWQgc3R5bGVNYXAgdmFsdWUgdG8gdGhlIGhvc3QgZWxlbWVudCBpZiB0aGlzIGZ1bmN0aW9uXG4gKiBpcyBjYWxsZWQgd2l0aGluIGEgaG9zdCBiaW5kaW5nLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzdHlsZU1hcChzdHlsZXMpIHtcbiAgICBjaGVja1N0eWxpbmdNYXAoc3R5bGVLZXlWYWx1ZUFycmF5U2V0LCBzdHlsZVN0cmluZ1BhcnNlciwgc3R5bGVzLCBmYWxzZSk7XG59XG4vKipcbiAqIFBhcnNlIHRleHQgYXMgc3R5bGUgYW5kIGFkZCB2YWx1ZXMgdG8gS2V5VmFsdWVBcnJheS5cbiAqXG4gKiBUaGlzIGNvZGUgaXMgcHVsbGVkIG91dCB0byBhIHNlcGFyYXRlIGZ1bmN0aW9uIHNvIHRoYXQgaXQgY2FuIGJlIHRyZWUgc2hha2VuIGF3YXkgaWYgaXQgaXMgbm90XG4gKiBuZWVkZWQuIEl0IGlzIG9ubHkgcmVmZXJlbmNlZCBmcm9tIGDJtcm1c3R5bGVNYXBgLlxuICpcbiAqIEBwYXJhbSBrZXlWYWx1ZUFycmF5IEtleVZhbHVlQXJyYXkgdG8gYWRkIHBhcnNlZCB2YWx1ZXMgdG8uXG4gKiBAcGFyYW0gdGV4dCB0ZXh0IHRvIHBhcnNlLlxuICovXG5mdW5jdGlvbiBzdHlsZVN0cmluZ1BhcnNlcihrZXlWYWx1ZUFycmF5LCB0ZXh0KSB7XG4gICAgZm9yIChsZXQgaSA9IHBhcnNlU3R5bGUodGV4dCk7IGkgPj0gMDsgaSA9IHBhcnNlU3R5bGVOZXh0KHRleHQsIGkpKSB7XG4gICAgICAgIHN0eWxlS2V5VmFsdWVBcnJheVNldChrZXlWYWx1ZUFycmF5LCBnZXRMYXN0UGFyc2VkS2V5KHRleHQpLCBnZXRMYXN0UGFyc2VkVmFsdWUodGV4dCkpO1xuICAgIH1cbn1cbi8qKlxuICogVXBkYXRlIGNsYXNzIGJpbmRpbmdzIHVzaW5nIGFuIG9iamVjdCBsaXRlcmFsIG9yIGNsYXNzLXN0cmluZyBvbiBhbiBlbGVtZW50LlxuICpcbiAqIFRoaXMgaW5zdHJ1Y3Rpb24gaXMgbWVhbnQgdG8gYXBwbHkgc3R5bGluZyB2aWEgdGhlIGBbY2xhc3NdPVwiZXhwXCJgIHRlbXBsYXRlIGJpbmRpbmdzLlxuICogV2hlbiBjbGFzc2VzIGFyZSBhcHBsaWVkIHRvIHRoZSBlbGVtZW50IHRoZXkgd2lsbCB0aGVuIGJlIHVwZGF0ZWQgd2l0aFxuICogcmVzcGVjdCB0byBhbnkgc3R5bGVzL2NsYXNzZXMgc2V0IHZpYSBgY2xhc3NQcm9wYC4gSWYgYW55XG4gKiBjbGFzc2VzIGFyZSBzZXQgdG8gZmFsc3kgdGhlbiB0aGV5IHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgc3R5bGluZyBpbnN0cnVjdGlvbiB3aWxsIG5vdCBiZSBhcHBsaWVkIHVudGlsIGBzdHlsaW5nQXBwbHlgIGlzIGNhbGxlZC5cbiAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgdGhlIHByb3ZpZGVkIGNsYXNzTWFwIHZhbHVlIHRvIHRoZSBob3N0IGVsZW1lbnQgaWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAqIHdpdGhpbiBhIGhvc3QgYmluZGluZy5cbiAqXG4gKiBAcGFyYW0gY2xhc3NlcyBBIGtleS92YWx1ZSBtYXAgb3Igc3RyaW5nIG9mIENTUyBjbGFzc2VzIHRoYXQgd2lsbCBiZSBhZGRlZCB0byB0aGVcbiAqICAgICAgICBnaXZlbiBlbGVtZW50LiBBbnkgbWlzc2luZyBjbGFzc2VzICh0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnRcbiAqICAgICAgICBiZWZvcmVoYW5kKSB3aWxsIGJlIHJlbW92ZWQgKHVuc2V0KSBmcm9tIHRoZSBlbGVtZW50J3MgbGlzdCBvZiBDU1MgY2xhc3Nlcy5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1Y2xhc3NNYXAoY2xhc3Nlcykge1xuICAgIGNoZWNrU3R5bGluZ01hcChrZXlWYWx1ZUFycmF5U2V0LCBjbGFzc1N0cmluZ1BhcnNlciwgY2xhc3NlcywgdHJ1ZSk7XG59XG4vKipcbiAqIFBhcnNlIHRleHQgYXMgY2xhc3MgYW5kIGFkZCB2YWx1ZXMgdG8gS2V5VmFsdWVBcnJheS5cbiAqXG4gKiBUaGlzIGNvZGUgaXMgcHVsbGVkIG91dCB0byBhIHNlcGFyYXRlIGZ1bmN0aW9uIHNvIHRoYXQgaXQgY2FuIGJlIHRyZWUgc2hha2VuIGF3YXkgaWYgaXQgaXMgbm90XG4gKiBuZWVkZWQuIEl0IGlzIG9ubHkgcmVmZXJlbmNlZCBmcm9tIGDJtcm1Y2xhc3NNYXBgLlxuICpcbiAqIEBwYXJhbSBrZXlWYWx1ZUFycmF5IEtleVZhbHVlQXJyYXkgdG8gYWRkIHBhcnNlZCB2YWx1ZXMgdG8uXG4gKiBAcGFyYW0gdGV4dCB0ZXh0IHRvIHBhcnNlLlxuICovXG5mdW5jdGlvbiBjbGFzc1N0cmluZ1BhcnNlcihrZXlWYWx1ZUFycmF5LCB0ZXh0KSB7XG4gICAgZm9yIChsZXQgaSA9IHBhcnNlQ2xhc3NOYW1lKHRleHQpOyBpID49IDA7IGkgPSBwYXJzZUNsYXNzTmFtZU5leHQodGV4dCwgaSkpIHtcbiAgICAgICAga2V5VmFsdWVBcnJheVNldChrZXlWYWx1ZUFycmF5LCBnZXRMYXN0UGFyc2VkS2V5KHRleHQpLCB0cnVlKTtcbiAgICB9XG59XG4vKipcbiAqIENvbW1vbiBjb2RlIGJldHdlZW4gYMm1ybVjbGFzc1Byb3BgIGFuZCBgybXJtXN0eWxlUHJvcGAuXG4gKlxuICogQHBhcmFtIHByb3AgcHJvcGVydHkgbmFtZS5cbiAqIEBwYXJhbSB2YWx1ZSBiaW5kaW5nIHZhbHVlLlxuICogQHBhcmFtIHN1ZmZpeCBzdWZmaXggZm9yIHRoZSBwcm9wZXJ0eSAoZS5nLiBgZW1gIG9yIGBweGApXG4gKiBAcGFyYW0gaXNDbGFzc0Jhc2VkIGB0cnVlYCBpZiBgY2xhc3NgIGNoYW5nZSAoYGZhbHNlYCBpZiBgc3R5bGVgKVxuICovXG5mdW5jdGlvbiBjaGVja1N0eWxpbmdQcm9wZXJ0eShwcm9wLCB2YWx1ZSwgc3VmZml4LCBpc0NsYXNzQmFzZWQpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgIC8vIFN0eWxpbmcgaW5zdHJ1Y3Rpb25zIHVzZSAyIHNsb3RzIHBlciBiaW5kaW5nLlxuICAgIC8vIDEuIG9uZSBmb3IgdGhlIHZhbHVlIC8gVFN0eWxpbmdLZXlcbiAgICAvLyAyLiBvbmUgZm9yIHRoZSBpbnRlcm1pdHRlbnQtdmFsdWUgLyBUU3R5bGluZ1JhbmdlXG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gaW5jcmVtZW50QmluZGluZ0luZGV4KDIpO1xuICAgIGlmICh0Vmlldy5maXJzdFVwZGF0ZVBhc3MpIHtcbiAgICAgICAgc3R5bGluZ0ZpcnN0VXBkYXRlUGFzcyh0VmlldywgcHJvcCwgYmluZGluZ0luZGV4LCBpc0NsYXNzQmFzZWQpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgIT09IE5PX0NIQU5HRSAmJiBiaW5kaW5nVXBkYXRlZChsVmlldywgYmluZGluZ0luZGV4LCB2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdE5vZGUgPSB0Vmlldy5kYXRhW2dldFNlbGVjdGVkSW5kZXgoKV07XG4gICAgICAgIHVwZGF0ZVN0eWxpbmcodFZpZXcsIHROb2RlLCBsVmlldywgbFZpZXdbUkVOREVSRVJdLCBwcm9wLCBsVmlld1tiaW5kaW5nSW5kZXggKyAxXSA9IG5vcm1hbGl6ZVN1ZmZpeCh2YWx1ZSwgc3VmZml4KSwgaXNDbGFzc0Jhc2VkLCBiaW5kaW5nSW5kZXgpO1xuICAgIH1cbn1cbi8qKlxuICogQ29tbW9uIGNvZGUgYmV0d2VlbiBgybXJtWNsYXNzTWFwYCBhbmQgYMm1ybVzdHlsZU1hcGAuXG4gKlxuICogQHBhcmFtIGtleVZhbHVlQXJyYXlTZXQgKFNlZSBga2V5VmFsdWVBcnJheVNldGAgaW4gXCJ1dGlsL2FycmF5X3V0aWxzXCIpIEdldHMgcGFzc2VkIGluIGFzIGFcbiAqICAgICAgICBmdW5jdGlvbiBzbyB0aGF0IGBzdHlsZWAgY2FuIGJlIHByb2Nlc3NlZC4gVGhpcyBpcyBkb25lIGZvciB0cmVlIHNoYWtpbmcgcHVycG9zZXMuXG4gKiBAcGFyYW0gc3RyaW5nUGFyc2VyIFBhcnNlciB1c2VkIHRvIHBhcnNlIGB2YWx1ZWAgaWYgYHN0cmluZ2AuIChQYXNzZWQgaW4gYXMgYHN0eWxlYCBhbmQgYGNsYXNzYFxuICogICAgICAgIGhhdmUgZGlmZmVyZW50IHBhcnNlcnMuKVxuICogQHBhcmFtIHZhbHVlIGJvdW5kIHZhbHVlIGZyb20gYXBwbGljYXRpb25cbiAqIEBwYXJhbSBpc0NsYXNzQmFzZWQgYHRydWVgIGlmIGBjbGFzc2AgY2hhbmdlIChgZmFsc2VgIGlmIGBzdHlsZWApXG4gKi9cbmZ1bmN0aW9uIGNoZWNrU3R5bGluZ01hcChrZXlWYWx1ZUFycmF5U2V0LCBzdHJpbmdQYXJzZXIsIHZhbHVlLCBpc0NsYXNzQmFzZWQpIHtcbiAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gaW5jcmVtZW50QmluZGluZ0luZGV4KDIpO1xuICAgIGlmICh0Vmlldy5maXJzdFVwZGF0ZVBhc3MpIHtcbiAgICAgICAgc3R5bGluZ0ZpcnN0VXBkYXRlUGFzcyh0VmlldywgbnVsbCwgYmluZGluZ0luZGV4LCBpc0NsYXNzQmFzZWQpO1xuICAgIH1cbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgaWYgKHZhbHVlICE9PSBOT19DSEFOR0UgJiYgYmluZGluZ1VwZGF0ZWQobFZpZXcsIGJpbmRpbmdJbmRleCwgdmFsdWUpKSB7XG4gICAgICAgIC8vIGBnZXRTZWxlY3RlZEluZGV4KClgIHNob3VsZCBiZSBoZXJlIChyYXRoZXIgdGhhbiBpbiBpbnN0cnVjdGlvbikgc28gdGhhdCBpdCBpcyBndWFyZGVkIGJ5IHRoZVxuICAgICAgICAvLyBpZiBzbyBhcyBub3QgdG8gcmVhZCB1bm5lY2Vzc2FyaWx5LlxuICAgICAgICBjb25zdCB0Tm9kZSA9IHRWaWV3LmRhdGFbZ2V0U2VsZWN0ZWRJbmRleCgpXTtcbiAgICAgICAgaWYgKGhhc1N0eWxpbmdJbnB1dFNoYWRvdyh0Tm9kZSwgaXNDbGFzc0Jhc2VkKSAmJiAhaXNJbkhvc3RCaW5kaW5ncyh0VmlldywgYmluZGluZ0luZGV4KSkge1xuICAgICAgICAgICAgaWYgKG5nRGV2TW9kZSkge1xuICAgICAgICAgICAgICAgIC8vIHZlcmlmeSB0aGF0IGlmIHdlIGFyZSBzaGFkb3dpbmcgdGhlbiBgVERhdGFgIGlzIGFwcHJvcHJpYXRlbHkgbWFya2VkIHNvIHRoYXQgd2Ugc2tpcFxuICAgICAgICAgICAgICAgIC8vIHByb2Nlc3NpbmcgdGhpcyBiaW5kaW5nIGluIHN0eWxpbmcgcmVzb2x1dGlvbi5cbiAgICAgICAgICAgICAgICBjb25zdCB0U3R5bGluZ0tleSA9IHRWaWV3LmRhdGFbYmluZGluZ0luZGV4XTtcbiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbChBcnJheS5pc0FycmF5KHRTdHlsaW5nS2V5KSA/IHRTdHlsaW5nS2V5WzFdIDogdFN0eWxpbmdLZXksIGZhbHNlLCAnU3R5bGluZyBsaW5rZWQgbGlzdCBzaGFkb3cgaW5wdXQgc2hvdWxkIGJlIG1hcmtlZCBhcyBcXCdmYWxzZVxcJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVkUgZG9lcyBub3QgY29uY2F0ZW5hdGUgdGhlIHN0YXRpYyBwb3J0aW9uIGxpa2Ugd2UgYXJlIGRvaW5nIGhlcmUuXG4gICAgICAgICAgICAvLyBJbnN0ZWFkIFZFIGp1c3QgaWdub3JlcyB0aGUgc3RhdGljIGNvbXBsZXRlbHkgaWYgZHluYW1pYyBiaW5kaW5nIGlzIHByZXNlbnQuXG4gICAgICAgICAgICAvLyBCZWNhdXNlIG9mIGxvY2FsaXR5IHdlIGhhdmUgYWxyZWFkeSBzZXQgdGhlIHN0YXRpYyBwb3J0aW9uIGJlY2F1c2Ugd2UgZG9uJ3Qga25vdyBpZiB0aGVyZVxuICAgICAgICAgICAgLy8gaXMgYSBkeW5hbWljIHBvcnRpb24gdW50aWwgbGF0ZXIuIElmIHdlIHdvdWxkIGlnbm9yZSB0aGUgc3RhdGljIHBvcnRpb24gaXQgd291bGQgbG9vayBsaWtlXG4gICAgICAgICAgICAvLyB0aGUgYmluZGluZyBoYXMgcmVtb3ZlZCBpdC4gVGhpcyB3b3VsZCBjb25mdXNlIGBbbmdTdHlsZV1gL2BbbmdDbGFzc11gIHRvIGRvIHRoZSB3cm9uZ1xuICAgICAgICAgICAgLy8gdGhpbmcgYXMgaXQgd291bGQgdGhpbmsgdGhhdCB0aGUgc3RhdGljIHBvcnRpb24gd2FzIHJlbW92ZWQuIEZvciB0aGlzIHJlYXNvbiB3ZVxuICAgICAgICAgICAgLy8gY29uY2F0ZW5hdGUgaXQgc28gdGhhdCBgW25nU3R5bGVdYC9gW25nQ2xhc3NdYCAgY2FuIGNvbnRpbnVlIHRvIHdvcmsgb24gY2hhbmdlZC5cbiAgICAgICAgICAgIGxldCBzdGF0aWNQcmVmaXggPSBpc0NsYXNzQmFzZWQgPyB0Tm9kZS5jbGFzc2VzV2l0aG91dEhvc3QgOiB0Tm9kZS5zdHlsZXNXaXRob3V0SG9zdDtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBpc0NsYXNzQmFzZWQgPT09IGZhbHNlICYmIHN0YXRpY1ByZWZpeCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgIGFzc2VydEVxdWFsKHN0YXRpY1ByZWZpeC5lbmRzV2l0aCgnOycpLCB0cnVlLCAnRXhwZWN0aW5nIHN0YXRpYyBwb3J0aW9uIHRvIGVuZCB3aXRoIFxcJztcXCcnKTtcbiAgICAgICAgICAgIGlmIChzdGF0aWNQcmVmaXggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSB0aGF0IGZhbHN5IHZhbHVlcyBvZiBgdmFsdWVgIGJlY29tZSBlbXB0eSBzdHJpbmdzLlxuICAgICAgICAgICAgICAgIHZhbHVlID0gY29uY2F0U3RyaW5nc1dpdGhTcGFjZShzdGF0aWNQcmVmaXgsIHZhbHVlID8gdmFsdWUgOiAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBHaXZlbiBgPGRpdiBbc3R5bGVdIG15LWRpcj5gIHN1Y2ggdGhhdCBgbXktZGlyYCBoYXMgYEBJbnB1dCgnc3R5bGUnKWAuXG4gICAgICAgICAgICAvLyBUaGlzIHRha2VzIG92ZXIgdGhlIGBbc3R5bGVdYCBiaW5kaW5nLiAoU2FtZSBmb3IgYFtjbGFzc11gKVxuICAgICAgICAgICAgc2V0RGlyZWN0aXZlSW5wdXRzV2hpY2hTaGFkb3dzU3R5bGluZyh0VmlldywgdE5vZGUsIGxWaWV3LCB2YWx1ZSwgaXNDbGFzc0Jhc2VkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZVN0eWxpbmdNYXAodFZpZXcsIHROb2RlLCBsVmlldywgbFZpZXdbUkVOREVSRVJdLCBsVmlld1tiaW5kaW5nSW5kZXggKyAxXSwgbFZpZXdbYmluZGluZ0luZGV4ICsgMV0gPSB0b1N0eWxpbmdLZXlWYWx1ZUFycmF5KGtleVZhbHVlQXJyYXlTZXQsIHN0cmluZ1BhcnNlciwgdmFsdWUpLCBpc0NsYXNzQmFzZWQsIGJpbmRpbmdJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIERldGVybWluZXMgd2hlbiB0aGUgYmluZGluZyBpcyBpbiBgaG9zdEJpbmRpbmdzYCBzZWN0aW9uXG4gKlxuICogQHBhcmFtIHRWaWV3IEN1cnJlbnQgYFRWaWV3YFxuICogQHBhcmFtIGJpbmRpbmdJbmRleCBpbmRleCBvZiBiaW5kaW5nIHdoaWNoIHdlIHdvdWxkIGxpa2UgaWYgaXQgaXMgaW4gYGhvc3RCaW5kaW5nc2BcbiAqL1xuZnVuY3Rpb24gaXNJbkhvc3RCaW5kaW5ncyh0VmlldywgYmluZGluZ0luZGV4KSB7XG4gICAgLy8gQWxsIGhvc3QgYmluZGluZ3MgYXJlIHBsYWNlZCBhZnRlciB0aGUgZXhwYW5kbyBzZWN0aW9uLlxuICAgIHJldHVybiBiaW5kaW5nSW5kZXggPj0gdFZpZXcuZXhwYW5kb1N0YXJ0SW5kZXg7XG59XG4vKipcbiAqIENvbGxlY3RzIHRoZSBuZWNlc3NhcnkgaW5mb3JtYXRpb24gdG8gaW5zZXJ0IHRoZSBiaW5kaW5nIGludG8gYSBsaW5rZWQgbGlzdCBvZiBzdHlsZSBiaW5kaW5nc1xuICogdXNpbmcgYGluc2VydFRTdHlsaW5nQmluZGluZ2AuXG4gKlxuICogQHBhcmFtIHRWaWV3IGBUVmlld2Agd2hlcmUgdGhlIGJpbmRpbmcgbGlua2VkIGxpc3Qgd2lsbCBiZSBzdG9yZWQuXG4gKiBAcGFyYW0gdFN0eWxpbmdLZXkgUHJvcGVydHkva2V5IG9mIHRoZSBiaW5kaW5nLlxuICogQHBhcmFtIGJpbmRpbmdJbmRleCBJbmRleCBvZiBiaW5kaW5nIGFzc29jaWF0ZWQgd2l0aCB0aGUgYHByb3BgXG4gKiBAcGFyYW0gaXNDbGFzc0Jhc2VkIGB0cnVlYCBpZiBgY2xhc3NgIGNoYW5nZSAoYGZhbHNlYCBpZiBgc3R5bGVgKVxuICovXG5mdW5jdGlvbiBzdHlsaW5nRmlyc3RVcGRhdGVQYXNzKHRWaWV3LCB0U3R5bGluZ0tleSwgYmluZGluZ0luZGV4LCBpc0NsYXNzQmFzZWQpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0Rmlyc3RVcGRhdGVQYXNzKHRWaWV3KTtcbiAgICBjb25zdCB0RGF0YSA9IHRWaWV3LmRhdGE7XG4gICAgaWYgKHREYXRhW2JpbmRpbmdJbmRleCArIDFdID09PSBudWxsKSB7XG4gICAgICAgIC8vIFRoZSBhYm92ZSBjaGVjayBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBkb24ndCBjbGVhciBmaXJzdCB1cGRhdGUgcGFzcyB1bnRpbCBmaXJzdCBzdWNjZXNzZnVsXG4gICAgICAgIC8vIChubyBleGNlcHRpb24pIHRlbXBsYXRlIGV4ZWN1dGlvbi4gVGhpcyBwcmV2ZW50cyB0aGUgc3R5bGluZyBpbnN0cnVjdGlvbiBmcm9tIGRvdWJsZSBhZGRpbmdcbiAgICAgICAgLy8gaXRzZWxmIHRvIHRoZSBsaXN0LlxuICAgICAgICAvLyBgZ2V0U2VsZWN0ZWRJbmRleCgpYCBzaG91bGQgYmUgaGVyZSAocmF0aGVyIHRoYW4gaW4gaW5zdHJ1Y3Rpb24pIHNvIHRoYXQgaXQgaXMgZ3VhcmRlZCBieSB0aGVcbiAgICAgICAgLy8gaWYgc28gYXMgbm90IHRvIHJlYWQgdW5uZWNlc3NhcmlseS5cbiAgICAgICAgY29uc3QgdE5vZGUgPSB0RGF0YVtnZXRTZWxlY3RlZEluZGV4KCldO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0Tm9kZSwgJ1ROb2RlIGV4cGVjdGVkJyk7XG4gICAgICAgIGNvbnN0IGlzSG9zdEJpbmRpbmdzID0gaXNJbkhvc3RCaW5kaW5ncyh0VmlldywgYmluZGluZ0luZGV4KTtcbiAgICAgICAgaWYgKGhhc1N0eWxpbmdJbnB1dFNoYWRvdyh0Tm9kZSwgaXNDbGFzc0Jhc2VkKSAmJiB0U3R5bGluZ0tleSA9PT0gbnVsbCAmJiAhaXNIb3N0QmluZGluZ3MpIHtcbiAgICAgICAgICAgIC8vIGB0U3R5bGluZ0tleSA9PT0gbnVsbGAgaW1wbGllcyB0aGF0IHdlIGFyZSBlaXRoZXIgYFtzdHlsZV1gIG9yIGBbY2xhc3NdYCBiaW5kaW5nLlxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBkaXJlY3RpdmUgd2hpY2ggdXNlcyBgQElucHV0KCdzdHlsZScpYCBvciBgQElucHV0KCdjbGFzcycpYCB0aGFuXG4gICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIG5ldXRyYWxpemUgdGhpcyBiaW5kaW5nIHNpbmNlIHRoYXQgZGlyZWN0aXZlIGlzIHNoYWRvd2luZyBpdC5cbiAgICAgICAgICAgIC8vIFdlIHR1cm4gdGhpcyBpbnRvIGEgbm9vcCBieSBzZXR0aW5nIHRoZSBrZXkgdG8gYGZhbHNlYFxuICAgICAgICAgICAgdFN0eWxpbmdLZXkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0U3R5bGluZ0tleSA9IHdyYXBJblN0YXRpY1N0eWxpbmdLZXkodERhdGEsIHROb2RlLCB0U3R5bGluZ0tleSwgaXNDbGFzc0Jhc2VkKTtcbiAgICAgICAgaW5zZXJ0VFN0eWxpbmdCaW5kaW5nKHREYXRhLCB0Tm9kZSwgdFN0eWxpbmdLZXksIGJpbmRpbmdJbmRleCwgaXNIb3N0QmluZGluZ3MsIGlzQ2xhc3NCYXNlZCk7XG4gICAgfVxufVxuLyoqXG4gKiBBZGRzIHN0YXRpYyBzdHlsaW5nIGluZm9ybWF0aW9uIHRvIHRoZSBiaW5kaW5nIGlmIGFwcGxpY2FibGUuXG4gKlxuICogVGhlIGxpbmtlZCBsaXN0IG9mIHN0eWxlcyBub3Qgb25seSBzdG9yZXMgdGhlIGxpc3QgYW5kIGtleXMsIGJ1dCBhbHNvIHN0b3JlcyBzdGF0aWMgc3R5bGluZ1xuICogaW5mb3JtYXRpb24gb24gc29tZSBvZiB0aGUga2V5cy4gVGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIGlmIHRoZSBrZXkgc2hvdWxkIGNvbnRhaW4gdGhlIHN0eWxpbmdcbiAqIGluZm9ybWF0aW9uIGFuZCBjb21wdXRlcyBpdC5cbiAqXG4gKiBTZWUgYFRTdHlsaW5nU3RhdGljYCBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBwYXJhbSB0RGF0YSBgVERhdGFgIHdoZXJlIHRoZSBsaW5rZWQgbGlzdCBpcyBzdG9yZWQuXG4gKiBAcGFyYW0gdE5vZGUgYFROb2RlYCBmb3Igd2hpY2ggdGhlIHN0eWxpbmcgaXMgYmVpbmcgY29tcHV0ZWQuXG4gKiBAcGFyYW0gc3R5bGluZ0tleSBgVFN0eWxpbmdLZXlQcmltaXRpdmVgIHdoaWNoIG1heSBuZWVkIHRvIGJlIHdyYXBwZWQgaW50byBgVFN0eWxpbmdLZXlgXG4gKiBAcGFyYW0gaXNDbGFzc0Jhc2VkIGB0cnVlYCBpZiBgY2xhc3NgIChgZmFsc2VgIGlmIGBzdHlsZWApXG4gKi9cbmZ1bmN0aW9uIHdyYXBJblN0YXRpY1N0eWxpbmdLZXkodERhdGEsIHROb2RlLCBzdHlsaW5nS2V5LCBpc0NsYXNzQmFzZWQpIHtcbiAgICBjb25zdCBob3N0RGlyZWN0aXZlRGVmID0gZ2V0Q3VycmVudERpcmVjdGl2ZURlZih0RGF0YSk7XG4gICAgbGV0IHJlc2lkdWFsID0gaXNDbGFzc0Jhc2VkID8gdE5vZGUucmVzaWR1YWxDbGFzc2VzIDogdE5vZGUucmVzaWR1YWxTdHlsZXM7XG4gICAgaWYgKGhvc3REaXJlY3RpdmVEZWYgPT09IG51bGwpIHtcbiAgICAgICAgLy8gV2UgYXJlIGluIHRlbXBsYXRlIG5vZGUuXG4gICAgICAgIC8vIElmIHRlbXBsYXRlIG5vZGUgYWxyZWFkeSBoYWQgc3R5bGluZyBpbnN0cnVjdGlvbiB0aGVuIGl0IGhhcyBhbHJlYWR5IGNvbGxlY3RlZCB0aGUgc3RhdGljXG4gICAgICAgIC8vIHN0eWxpbmcgYW5kIHRoZXJlIGlzIG5vIG5lZWQgdG8gY29sbGVjdCB0aGVtIGFnYWluLiBXZSBrbm93IHRoYXQgd2UgYXJlIHRoZSBmaXJzdCBzdHlsaW5nXG4gICAgICAgIC8vIGluc3RydWN0aW9uIGJlY2F1c2UgdGhlIGBUTm9kZS4qQmluZGluZ3NgIHBvaW50cyB0byAwIChub3RoaW5nIGhhcyBiZWVuIGluc2VydGVkIHlldCkuXG4gICAgICAgIGNvbnN0IGlzRmlyc3RTdHlsaW5nSW5zdHJ1Y3Rpb25JblRlbXBsYXRlID0gKGlzQ2xhc3NCYXNlZCA/IHROb2RlLmNsYXNzQmluZGluZ3MgOiB0Tm9kZS5zdHlsZUJpbmRpbmdzKSA9PT0gMDtcbiAgICAgICAgaWYgKGlzRmlyc3RTdHlsaW5nSW5zdHJ1Y3Rpb25JblRlbXBsYXRlKSB7XG4gICAgICAgICAgICAvLyBJdCB3b3VsZCBiZSBuaWNlIHRvIGJlIGFibGUgdG8gZ2V0IHRoZSBzdGF0aWNzIGZyb20gYG1lcmdlQXR0cnNgLCBob3dldmVyLCBhdCB0aGlzIHBvaW50XG4gICAgICAgICAgICAvLyB0aGV5IGFyZSBhbHJlYWR5IG1lcmdlZCBhbmQgaXQgd291bGQgbm90IGJlIHBvc3NpYmxlIHRvIGZpZ3VyZSB3aGljaCBwcm9wZXJ0eSBiZWxvbmdzIHdoZXJlXG4gICAgICAgICAgICAvLyBpbiB0aGUgcHJpb3JpdHkuXG4gICAgICAgICAgICBzdHlsaW5nS2V5ID0gY29sbGVjdFN0eWxpbmdGcm9tRGlyZWN0aXZlcyhudWxsLCB0RGF0YSwgdE5vZGUsIHN0eWxpbmdLZXksIGlzQ2xhc3NCYXNlZCk7XG4gICAgICAgICAgICBzdHlsaW5nS2V5ID0gY29sbGVjdFN0eWxpbmdGcm9tVEF0dHJzKHN0eWxpbmdLZXksIHROb2RlLmF0dHJzLCBpc0NsYXNzQmFzZWQpO1xuICAgICAgICAgICAgLy8gV2Uga25vdyB0aGF0IGlmIHdlIGhhdmUgc3R5bGluZyBiaW5kaW5nIGluIHRlbXBsYXRlIHdlIGNhbid0IGhhdmUgcmVzaWR1YWwuXG4gICAgICAgICAgICByZXNpZHVhbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFdlIGFyZSBpbiBob3N0IGJpbmRpbmcgbm9kZSBhbmQgdGhlcmUgd2FzIG5vIGJpbmRpbmcgaW5zdHJ1Y3Rpb24gaW4gdGVtcGxhdGUgbm9kZS5cbiAgICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IHdlIG5lZWQgdG8gY29tcHV0ZSB0aGUgcmVzaWR1YWwuXG4gICAgICAgIGNvbnN0IGRpcmVjdGl2ZVN0eWxpbmdMYXN0ID0gdE5vZGUuZGlyZWN0aXZlU3R5bGluZ0xhc3Q7XG4gICAgICAgIGNvbnN0IGlzRmlyc3RTdHlsaW5nSW5zdHJ1Y3Rpb25Jbkhvc3RCaW5kaW5nID0gZGlyZWN0aXZlU3R5bGluZ0xhc3QgPT09IC0xIHx8IHREYXRhW2RpcmVjdGl2ZVN0eWxpbmdMYXN0XSAhPT0gaG9zdERpcmVjdGl2ZURlZjtcbiAgICAgICAgaWYgKGlzRmlyc3RTdHlsaW5nSW5zdHJ1Y3Rpb25Jbkhvc3RCaW5kaW5nKSB7XG4gICAgICAgICAgICBzdHlsaW5nS2V5ID1cbiAgICAgICAgICAgICAgICBjb2xsZWN0U3R5bGluZ0Zyb21EaXJlY3RpdmVzKGhvc3REaXJlY3RpdmVEZWYsIHREYXRhLCB0Tm9kZSwgc3R5bGluZ0tleSwgaXNDbGFzc0Jhc2VkKTtcbiAgICAgICAgICAgIGlmIChyZXNpZHVhbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIC0gSWYgYG51bGxgIHRoYW4gZWl0aGVyOlxuICAgICAgICAgICAgICAgIC8vICAgIC0gVGVtcGxhdGUgc3R5bGluZyBpbnN0cnVjdGlvbiBhbHJlYWR5IHJhbiBhbmQgaXQgaGFzIGNvbnN1bWVkIHRoZSBzdGF0aWNcbiAgICAgICAgICAgICAgICAvLyAgICAgIHN0eWxpbmcgaW50byBpdHMgYFRTdHlsaW5nS2V5YCBhbmQgc28gdGhlcmUgaXMgbm8gbmVlZCB0byB1cGRhdGUgcmVzaWR1YWwuIEluc3RlYWRcbiAgICAgICAgICAgICAgICAvLyAgICAgIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBgVFN0eWxpbmdLZXlgIGFzc29jaWF0ZWQgd2l0aCB0aGUgZmlyc3QgdGVtcGxhdGUgbm9kZVxuICAgICAgICAgICAgICAgIC8vICAgICAgaW5zdHJ1Y3Rpb24uIE9SXG4gICAgICAgICAgICAgICAgLy8gICAgLSBTb21lIG90aGVyIHN0eWxpbmcgaW5zdHJ1Y3Rpb24gcmFuIGFuZCBkZXRlcm1pbmVkIHRoYXQgdGhlcmUgYXJlIG5vIHJlc2lkdWFsc1xuICAgICAgICAgICAgICAgIGxldCB0ZW1wbGF0ZVN0eWxpbmdLZXkgPSBnZXRUZW1wbGF0ZUhlYWRUU3R5bGluZ0tleSh0RGF0YSwgdE5vZGUsIGlzQ2xhc3NCYXNlZCk7XG4gICAgICAgICAgICAgICAgaWYgKHRlbXBsYXRlU3R5bGluZ0tleSAhPT0gdW5kZWZpbmVkICYmIEFycmF5LmlzQXJyYXkodGVtcGxhdGVTdHlsaW5nS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHJlY29tcHV0ZSBpZiBgdGVtcGxhdGVTdHlsaW5nS2V5YCBoYWQgc3RhdGljIHZhbHVlcy4gKElmIG5vIHN0YXRpYyB2YWx1ZSBmb3VuZFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIHRoZXJlIGlzIG5vdGhpbmcgdG8gZG8gc2luY2UgdGhpcyBvcGVyYXRpb24gY2FuIG9ubHkgcHJvZHVjZSBsZXNzIHN0YXRpYyBrZXlzLCBub3RcbiAgICAgICAgICAgICAgICAgICAgLy8gbW9yZS4pXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlU3R5bGluZ0tleSA9IGNvbGxlY3RTdHlsaW5nRnJvbURpcmVjdGl2ZXMobnVsbCwgdERhdGEsIHROb2RlLCB0ZW1wbGF0ZVN0eWxpbmdLZXlbMV0gLyogdW53cmFwIHByZXZpb3VzIHN0YXRpY3MgKi8sIGlzQ2xhc3NCYXNlZCk7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlU3R5bGluZ0tleSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0U3R5bGluZ0Zyb21UQXR0cnModGVtcGxhdGVTdHlsaW5nS2V5LCB0Tm9kZS5hdHRycywgaXNDbGFzc0Jhc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGVtcGxhdGVIZWFkVFN0eWxpbmdLZXkodERhdGEsIHROb2RlLCBpc0NsYXNzQmFzZWQsIHRlbXBsYXRlU3R5bGluZ0tleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSBuZWVkIHRvIHJlY29tcHV0ZSByZXNpZHVhbCBpZiBpdCBpcyBub3QgYG51bGxgLlxuICAgICAgICAgICAgICAgIC8vIC0gSWYgZXhpc3RpbmcgcmVzaWR1YWwgKGltcGxpZXMgdGhlcmUgd2FzIG5vIHRlbXBsYXRlIHN0eWxpbmcpLiBUaGlzIG1lYW5zIHRoYXQgc29tZSBvZlxuICAgICAgICAgICAgICAgIC8vICAgdGhlIHN0YXRpY3MgbWF5IGhhdmUgbW92ZWQgZnJvbSB0aGUgcmVzaWR1YWwgdG8gdGhlIGBzdHlsaW5nS2V5YCBhbmQgc28gd2UgaGF2ZSB0b1xuICAgICAgICAgICAgICAgIC8vICAgcmVjb21wdXRlLlxuICAgICAgICAgICAgICAgIC8vIC0gSWYgYHVuZGVmaW5lZGAgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSB3ZSBhcmUgcnVubmluZy5cbiAgICAgICAgICAgICAgICByZXNpZHVhbCA9IGNvbGxlY3RSZXNpZHVhbCh0RGF0YSwgdE5vZGUsIGlzQ2xhc3NCYXNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlc2lkdWFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaXNDbGFzc0Jhc2VkID8gKHROb2RlLnJlc2lkdWFsQ2xhc3NlcyA9IHJlc2lkdWFsKSA6ICh0Tm9kZS5yZXNpZHVhbFN0eWxlcyA9IHJlc2lkdWFsKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxpbmdLZXk7XG59XG4vKipcbiAqIFJldHJpZXZlIHRoZSBgVFN0eWxpbmdLZXlgIGZvciB0aGUgdGVtcGxhdGUgc3R5bGluZyBpbnN0cnVjdGlvbi5cbiAqXG4gKiBUaGlzIGlzIG5lZWRlZCBzaW5jZSBgaG9zdEJpbmRpbmdgIHN0eWxpbmcgaW5zdHJ1Y3Rpb25zIGFyZSBpbnNlcnRlZCBhZnRlciB0aGUgdGVtcGxhdGVcbiAqIGluc3RydWN0aW9uLiBXaGlsZSB0aGUgdGVtcGxhdGUgaW5zdHJ1Y3Rpb24gbmVlZHMgdG8gdXBkYXRlIHRoZSByZXNpZHVhbCBpbiBgVE5vZGVgIHRoZVxuICogYGhvc3RCaW5kaW5nYCBpbnN0cnVjdGlvbnMgbmVlZCB0byB1cGRhdGUgdGhlIGBUU3R5bGluZ0tleWAgb2YgdGhlIHRlbXBsYXRlIGluc3RydWN0aW9uIGJlY2F1c2VcbiAqIHRoZSB0ZW1wbGF0ZSBpbnN0cnVjdGlvbiBpcyBkb3duc3RyZWFtIGZyb20gdGhlIGBob3N0QmluZGluZ3NgIGluc3RydWN0aW9ucy5cbiAqXG4gKiBAcGFyYW0gdERhdGEgYFREYXRhYCB3aGVyZSB0aGUgbGlua2VkIGxpc3QgaXMgc3RvcmVkLlxuICogQHBhcmFtIHROb2RlIGBUTm9kZWAgZm9yIHdoaWNoIHRoZSBzdHlsaW5nIGlzIGJlaW5nIGNvbXB1dGVkLlxuICogQHBhcmFtIGlzQ2xhc3NCYXNlZCBgdHJ1ZWAgaWYgYGNsYXNzYCAoYGZhbHNlYCBpZiBgc3R5bGVgKVxuICogQHJldHVybiBgVFN0eWxpbmdLZXlgIGlmIGZvdW5kIG9yIGB1bmRlZmluZWRgIGlmIG5vdCBmb3VuZC5cbiAqL1xuZnVuY3Rpb24gZ2V0VGVtcGxhdGVIZWFkVFN0eWxpbmdLZXkodERhdGEsIHROb2RlLCBpc0NsYXNzQmFzZWQpIHtcbiAgICBjb25zdCBiaW5kaW5ncyA9IGlzQ2xhc3NCYXNlZCA/IHROb2RlLmNsYXNzQmluZGluZ3MgOiB0Tm9kZS5zdHlsZUJpbmRpbmdzO1xuICAgIGlmIChnZXRUU3R5bGluZ1JhbmdlTmV4dChiaW5kaW5ncykgPT09IDApIHtcbiAgICAgICAgLy8gVGhlcmUgZG9lcyBub3Qgc2VlbSB0byBiZSBhIHN0eWxpbmcgaW5zdHJ1Y3Rpb24gaW4gdGhlIGB0ZW1wbGF0ZWAuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB0RGF0YVtnZXRUU3R5bGluZ1JhbmdlUHJldihiaW5kaW5ncyldO1xufVxuLyoqXG4gKiBVcGRhdGUgdGhlIGBUU3R5bGluZ0tleWAgb2YgdGhlIGZpcnN0IHRlbXBsYXRlIGluc3RydWN0aW9uIGluIGBUTm9kZWAuXG4gKlxuICogTG9naWNhbGx5IGBob3N0QmluZGluZ3NgIHN0eWxpbmcgaW5zdHJ1Y3Rpb25zIGFyZSBvZiBsb3dlciBwcmlvcml0eSB0aGFuIHRoYXQgb2YgdGhlIHRlbXBsYXRlLlxuICogSG93ZXZlciwgdGhleSBleGVjdXRlIGFmdGVyIHRoZSB0ZW1wbGF0ZSBzdHlsaW5nIGluc3RydWN0aW9ucy4gVGhpcyBtZWFucyB0aGF0IHRoZXkgZ2V0IGluc2VydGVkXG4gKiBpbiBmcm9udCBvZiB0aGUgdGVtcGxhdGUgc3R5bGluZyBpbnN0cnVjdGlvbnMuXG4gKlxuICogSWYgd2UgaGF2ZSBhIHRlbXBsYXRlIHN0eWxpbmcgaW5zdHJ1Y3Rpb24gYW5kIGEgbmV3IGBob3N0QmluZGluZ3NgIHN0eWxpbmcgaW5zdHJ1Y3Rpb24gaXNcbiAqIGV4ZWN1dGVkIGl0IG1lYW5zIHRoYXQgaXQgbWF5IG5lZWQgdG8gc3RlYWwgc3RhdGljIGZpZWxkcyBmcm9tIHRoZSB0ZW1wbGF0ZSBpbnN0cnVjdGlvbi4gVGhpc1xuICogbWV0aG9kIGFsbG93cyB1cyB0byB1cGRhdGUgdGhlIGZpcnN0IHRlbXBsYXRlIGluc3RydWN0aW9uIGBUU3R5bGluZ0tleWAgd2l0aCBhIG5ldyB2YWx1ZS5cbiAqXG4gKiBBc3N1bWU6XG4gKiBgYGBcbiAqIDxkaXYgbXktZGlyIHN0eWxlPVwiY29sb3I6IHJlZFwiIFtzdHlsZS5jb2xvcl09XCJ0bXBsRXhwXCI+PC9kaXY+XG4gKlxuICogQERpcmVjdGl2ZSh7XG4gKiAgIGhvc3Q6IHtcbiAqICAgICAnc3R5bGUnOiAnd2lkdGg6IDEwMHB4JyxcbiAqICAgICAnW3N0eWxlLmNvbG9yXSc6ICdkaXJFeHAnLFxuICogICB9XG4gKiB9KVxuICogY2xhc3MgTXlEaXIge31cbiAqIGBgYFxuICpcbiAqIHdoZW4gYFtzdHlsZS5jb2xvcl09XCJ0bXBsRXhwXCJgIGV4ZWN1dGVzIGl0IGNyZWF0ZXMgdGhpcyBkYXRhIHN0cnVjdHVyZS5cbiAqIGBgYFxuICogIFsnJywgJ2NvbG9yJywgJ2NvbG9yJywgJ3JlZCcsICd3aWR0aCcsICcxMDBweCddLFxuICogYGBgXG4gKlxuICogVGhlIHJlYXNvbiBmb3IgdGhpcyBpcyB0aGF0IHRoZSB0ZW1wbGF0ZSBpbnN0cnVjdGlvbiBkb2VzIG5vdCBrbm93IGlmIHRoZXJlIGFyZSBzdHlsaW5nXG4gKiBpbnN0cnVjdGlvbnMgYW5kIG11c3QgYXNzdW1lIHRoYXQgdGhlcmUgYXJlIG5vbmUgYW5kIG11c3QgY29sbGVjdCBhbGwgb2YgdGhlIHN0YXRpYyBzdHlsaW5nLlxuICogKGJvdGhcbiAqIGBjb2xvcicgYW5kICd3aWR0aGApXG4gKlxuICogV2hlbiBgJ1tzdHlsZS5jb2xvcl0nOiAnZGlyRXhwJyxgIGV4ZWN1dGVzIHdlIG5lZWQgdG8gaW5zZXJ0IGEgbmV3IGRhdGEgaW50byB0aGUgbGlua2VkIGxpc3QuXG4gKiBgYGBcbiAqICBbJycsICdjb2xvcicsICd3aWR0aCcsICcxMDBweCddLCAgLy8gbmV3bHkgaW5zZXJ0ZWRcbiAqICBbJycsICdjb2xvcicsICdjb2xvcicsICdyZWQnLCAnd2lkdGgnLCAnMTAwcHgnXSwgLy8gdGhpcyBpcyB3cm9uZ1xuICogYGBgXG4gKlxuICogTm90aWNlIHRoYXQgdGhlIHRlbXBsYXRlIHN0YXRpY3MgaXMgbm93IHdyb25nIGFzIGl0IGluY29ycmVjdGx5IGNvbnRhaW5zIGB3aWR0aGAgc28gd2UgbmVlZCB0b1xuICogdXBkYXRlIGl0IGxpa2Ugc286XG4gKiBgYGBcbiAqICBbJycsICdjb2xvcicsICd3aWR0aCcsICcxMDBweCddLFxuICogIFsnJywgJ2NvbG9yJywgJ2NvbG9yJywgJ3JlZCddLCAgICAvLyBVUERBVEVcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB0RGF0YSBgVERhdGFgIHdoZXJlIHRoZSBsaW5rZWQgbGlzdCBpcyBzdG9yZWQuXG4gKiBAcGFyYW0gdE5vZGUgYFROb2RlYCBmb3Igd2hpY2ggdGhlIHN0eWxpbmcgaXMgYmVpbmcgY29tcHV0ZWQuXG4gKiBAcGFyYW0gaXNDbGFzc0Jhc2VkIGB0cnVlYCBpZiBgY2xhc3NgIChgZmFsc2VgIGlmIGBzdHlsZWApXG4gKiBAcGFyYW0gdFN0eWxpbmdLZXkgTmV3IGBUU3R5bGluZ0tleWAgd2hpY2ggaXMgcmVwbGFjaW5nIHRoZSBvbGQgb25lLlxuICovXG5mdW5jdGlvbiBzZXRUZW1wbGF0ZUhlYWRUU3R5bGluZ0tleSh0RGF0YSwgdE5vZGUsIGlzQ2xhc3NCYXNlZCwgdFN0eWxpbmdLZXkpIHtcbiAgICBjb25zdCBiaW5kaW5ncyA9IGlzQ2xhc3NCYXNlZCA/IHROb2RlLmNsYXNzQmluZGluZ3MgOiB0Tm9kZS5zdHlsZUJpbmRpbmdzO1xuICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICBhc3NlcnROb3RFcXVhbChnZXRUU3R5bGluZ1JhbmdlTmV4dChiaW5kaW5ncyksIDAsICdFeHBlY3RpbmcgdG8gaGF2ZSBhdCBsZWFzdCBvbmUgdGVtcGxhdGUgc3R5bGluZyBiaW5kaW5nLicpO1xuICAgIHREYXRhW2dldFRTdHlsaW5nUmFuZ2VQcmV2KGJpbmRpbmdzKV0gPSB0U3R5bGluZ0tleTtcbn1cbi8qKlxuICogQ29sbGVjdCBhbGwgc3RhdGljIHZhbHVlcyBhZnRlciB0aGUgY3VycmVudCBgVE5vZGUuZGlyZWN0aXZlU3R5bGluZ0xhc3RgIGluZGV4LlxuICpcbiAqIENvbGxlY3QgdGhlIHJlbWFpbmluZyBzdHlsaW5nIGluZm9ybWF0aW9uIHdoaWNoIGhhcyBub3QgeWV0IGJlZW4gY29sbGVjdGVkIGJ5IGFuIGV4aXN0aW5nXG4gKiBzdHlsaW5nIGluc3RydWN0aW9uLlxuICpcbiAqIEBwYXJhbSB0RGF0YSBgVERhdGFgIHdoZXJlIHRoZSBgRGlyZWN0aXZlRGVmc2AgYXJlIHN0b3JlZC5cbiAqIEBwYXJhbSB0Tm9kZSBgVE5vZGVgIHdoaWNoIGNvbnRhaW5zIHRoZSBkaXJlY3RpdmUgcmFuZ2UuXG4gKiBAcGFyYW0gaXNDbGFzc0Jhc2VkIGB0cnVlYCBpZiBgY2xhc3NgIChgZmFsc2VgIGlmIGBzdHlsZWApXG4gKi9cbmZ1bmN0aW9uIGNvbGxlY3RSZXNpZHVhbCh0RGF0YSwgdE5vZGUsIGlzQ2xhc3NCYXNlZCkge1xuICAgIGxldCByZXNpZHVhbCA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBkaXJlY3RpdmVFbmQgPSB0Tm9kZS5kaXJlY3RpdmVFbmQ7XG4gICAgbmdEZXZNb2RlICYmXG4gICAgICAgIGFzc2VydE5vdEVxdWFsKHROb2RlLmRpcmVjdGl2ZVN0eWxpbmdMYXN0LCAtMSwgJ0J5IHRoZSB0aW1lIHRoaXMgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgYXQgbGVhc3Qgb25lIGhvc3RCaW5kaW5ncy1ub2RlIHN0eWxpbmcgaW5zdHJ1Y3Rpb24gbXVzdCBoYXZlIGV4ZWN1dGVkLicpO1xuICAgIC8vIFdlIGFkZCBgMSArIHROb2RlLmRpcmVjdGl2ZVN0YXJ0YCBiZWNhdXNlIHdlIG5lZWQgdG8gc2tpcCB0aGUgY3VycmVudCBkaXJlY3RpdmUgKGFzIHdlIGFyZVxuICAgIC8vIGNvbGxlY3RpbmcgdGhpbmdzIGFmdGVyIHRoZSBsYXN0IGBob3N0QmluZGluZ3NgIGRpcmVjdGl2ZSB3aGljaCBoYWQgYSBzdHlsaW5nIGluc3RydWN0aW9uLilcbiAgICBmb3IgKGxldCBpID0gMSArIHROb2RlLmRpcmVjdGl2ZVN0eWxpbmdMYXN0OyBpIDwgZGlyZWN0aXZlRW5kOyBpKyspIHtcbiAgICAgICAgY29uc3QgYXR0cnMgPSB0RGF0YVtpXS5ob3N0QXR0cnM7XG4gICAgICAgIHJlc2lkdWFsID0gY29sbGVjdFN0eWxpbmdGcm9tVEF0dHJzKHJlc2lkdWFsLCBhdHRycywgaXNDbGFzc0Jhc2VkKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbGxlY3RTdHlsaW5nRnJvbVRBdHRycyhyZXNpZHVhbCwgdE5vZGUuYXR0cnMsIGlzQ2xhc3NCYXNlZCk7XG59XG4vKipcbiAqIENvbGxlY3QgdGhlIHN0YXRpYyBzdHlsaW5nIGluZm9ybWF0aW9uIHdpdGggbG93ZXIgcHJpb3JpdHkgdGhhbiBgaG9zdERpcmVjdGl2ZURlZmAuXG4gKlxuICogKFRoaXMgaXMgb3Bwb3NpdGUgb2YgcmVzaWR1YWwgc3R5bGluZy4pXG4gKlxuICogQHBhcmFtIGhvc3REaXJlY3RpdmVEZWYgYERpcmVjdGl2ZURlZmAgZm9yIHdoaWNoIHdlIHdhbnQgdG8gY29sbGVjdCBsb3dlciBwcmlvcml0eSBzdGF0aWNcbiAqICAgICAgICBzdHlsaW5nLiAoT3IgYG51bGxgIGlmIHRlbXBsYXRlIHN0eWxpbmcpXG4gKiBAcGFyYW0gdERhdGEgYFREYXRhYCB3aGVyZSB0aGUgbGlua2VkIGxpc3QgaXMgc3RvcmVkLlxuICogQHBhcmFtIHROb2RlIGBUTm9kZWAgZm9yIHdoaWNoIHRoZSBzdHlsaW5nIGlzIGJlaW5nIGNvbXB1dGVkLlxuICogQHBhcmFtIHN0eWxpbmdLZXkgRXhpc3RpbmcgYFRTdHlsaW5nS2V5YCB0byB1cGRhdGUgb3Igd3JhcC5cbiAqIEBwYXJhbSBpc0NsYXNzQmFzZWQgYHRydWVgIGlmIGBjbGFzc2AgKGBmYWxzZWAgaWYgYHN0eWxlYClcbiAqL1xuZnVuY3Rpb24gY29sbGVjdFN0eWxpbmdGcm9tRGlyZWN0aXZlcyhob3N0RGlyZWN0aXZlRGVmLCB0RGF0YSwgdE5vZGUsIHN0eWxpbmdLZXksIGlzQ2xhc3NCYXNlZCkge1xuICAgIC8vIFdlIG5lZWQgdG8gbG9vcCBiZWNhdXNlIHRoZXJlIGNhbiBiZSBkaXJlY3RpdmVzIHdoaWNoIGhhdmUgYGhvc3RBdHRyc2AgYnV0IGRvbid0IGhhdmVcbiAgICAvLyBgaG9zdEJpbmRpbmdzYCBzbyB0aGlzIGxvb3AgY2F0Y2hlcyB1cCB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUuLlxuICAgIGxldCBjdXJyZW50RGlyZWN0aXZlID0gbnVsbDtcbiAgICBjb25zdCBkaXJlY3RpdmVFbmQgPSB0Tm9kZS5kaXJlY3RpdmVFbmQ7XG4gICAgbGV0IGRpcmVjdGl2ZVN0eWxpbmdMYXN0ID0gdE5vZGUuZGlyZWN0aXZlU3R5bGluZ0xhc3Q7XG4gICAgaWYgKGRpcmVjdGl2ZVN0eWxpbmdMYXN0ID09PSAtMSkge1xuICAgICAgICBkaXJlY3RpdmVTdHlsaW5nTGFzdCA9IHROb2RlLmRpcmVjdGl2ZVN0YXJ0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZGlyZWN0aXZlU3R5bGluZ0xhc3QrKztcbiAgICB9XG4gICAgd2hpbGUgKGRpcmVjdGl2ZVN0eWxpbmdMYXN0IDwgZGlyZWN0aXZlRW5kKSB7XG4gICAgICAgIGN1cnJlbnREaXJlY3RpdmUgPSB0RGF0YVtkaXJlY3RpdmVTdHlsaW5nTGFzdF07XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKGN1cnJlbnREaXJlY3RpdmUsICdleHBlY3RlZCB0byBiZSBkZWZpbmVkJyk7XG4gICAgICAgIHN0eWxpbmdLZXkgPSBjb2xsZWN0U3R5bGluZ0Zyb21UQXR0cnMoc3R5bGluZ0tleSwgY3VycmVudERpcmVjdGl2ZS5ob3N0QXR0cnMsIGlzQ2xhc3NCYXNlZCk7XG4gICAgICAgIGlmIChjdXJyZW50RGlyZWN0aXZlID09PSBob3N0RGlyZWN0aXZlRGVmKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRpcmVjdGl2ZVN0eWxpbmdMYXN0Kys7XG4gICAgfVxuICAgIGlmIChob3N0RGlyZWN0aXZlRGVmICE9PSBudWxsKSB7XG4gICAgICAgIC8vIHdlIG9ubHkgYWR2YW5jZSB0aGUgc3R5bGluZyBjdXJzb3IgaWYgd2UgYXJlIGNvbGxlY3RpbmcgZGF0YSBmcm9tIGhvc3QgYmluZGluZ3MuXG4gICAgICAgIC8vIFRlbXBsYXRlIGV4ZWN1dGVzIGJlZm9yZSBob3N0IGJpbmRpbmdzIGFuZCBzbyBpZiB3ZSB3b3VsZCB1cGRhdGUgdGhlIGluZGV4LFxuICAgICAgICAvLyBob3N0IGJpbmRpbmdzIHdvdWxkIG5vdCBnZXQgdGhlaXIgc3RhdGljcy5cbiAgICAgICAgdE5vZGUuZGlyZWN0aXZlU3R5bGluZ0xhc3QgPSBkaXJlY3RpdmVTdHlsaW5nTGFzdDtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxpbmdLZXk7XG59XG4vKipcbiAqIENvbnZlcnQgYFRBdHRyc2AgaW50byBgVFN0eWxpbmdTdGF0aWNgLlxuICpcbiAqIEBwYXJhbSBzdHlsaW5nS2V5IGV4aXN0aW5nIGBUU3R5bGluZ0tleWAgdG8gdXBkYXRlIG9yIHdyYXAuXG4gKiBAcGFyYW0gYXR0cnMgYFRBdHRyaWJ1dGVzYCB0byBwcm9jZXNzLlxuICogQHBhcmFtIGlzQ2xhc3NCYXNlZCBgdHJ1ZWAgaWYgYGNsYXNzYCAoYGZhbHNlYCBpZiBgc3R5bGVgKVxuICovXG5mdW5jdGlvbiBjb2xsZWN0U3R5bGluZ0Zyb21UQXR0cnMoc3R5bGluZ0tleSwgYXR0cnMsIGlzQ2xhc3NCYXNlZCkge1xuICAgIGNvbnN0IGRlc2lyZWRNYXJrZXIgPSBpc0NsYXNzQmFzZWQgPyAxIC8qIENsYXNzZXMgKi8gOiAyIC8qIFN0eWxlcyAqLztcbiAgICBsZXQgY3VycmVudE1hcmtlciA9IC0xIC8qIEltcGxpY2l0QXR0cmlidXRlcyAqLztcbiAgICBpZiAoYXR0cnMgIT09IG51bGwpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGF0dHJzW2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRNYXJrZXIgPSBpdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNYXJrZXIgPT09IGRlc2lyZWRNYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN0eWxpbmdLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsaW5nS2V5ID0gc3R5bGluZ0tleSA9PT0gdW5kZWZpbmVkID8gW10gOiBbJycsIHN0eWxpbmdLZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGtleVZhbHVlQXJyYXlTZXQoc3R5bGluZ0tleSwgaXRlbSwgaXNDbGFzc0Jhc2VkID8gdHJ1ZSA6IGF0dHJzWysraV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3R5bGluZ0tleSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHN0eWxpbmdLZXk7XG59XG4vKipcbiAqIENvbnZlcnQgdXNlciBpbnB1dCB0byBgS2V5VmFsdWVBcnJheWAuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyB1c2VyIGlucHV0IHdoaWNoIGNvdWxkIGJlIGBzdHJpbmdgLCBPYmplY3QgbGl0ZXJhbCwgb3IgaXRlcmFibGUgYW5kIGNvbnZlcnRzXG4gKiBpdCBpbnRvIGEgY29uc2lzdGVudCByZXByZXNlbnRhdGlvbi4gVGhlIG91dHB1dCBvZiB0aGlzIGlzIGBLZXlWYWx1ZUFycmF5YCAod2hpY2ggaXMgYW4gYXJyYXlcbiAqIHdoZXJlXG4gKiBldmVuIGluZGV4ZXMgY29udGFpbiBrZXlzIGFuZCBvZGQgaW5kZXhlcyBjb250YWluIHZhbHVlcyBmb3IgdGhvc2Uga2V5cykuXG4gKlxuICogVGhlIGFkdmFudGFnZSBvZiBjb252ZXJ0aW5nIHRvIGBLZXlWYWx1ZUFycmF5YCBpcyB0aGF0IHdlIGNhbiBwZXJmb3JtIGRpZmYgaW4gYW4gaW5wdXRcbiAqIGluZGVwZW5kZW50XG4gKiB3YXkuXG4gKiAoaWUgd2UgY2FuIGNvbXBhcmUgYGZvbyBiYXJgIHRvIGBbJ2JhcicsICdiYXonXSBhbmQgZGV0ZXJtaW5lIGEgc2V0IG9mIGNoYW5nZXMgd2hpY2ggbmVlZCB0byBiZVxuICogYXBwbGllZClcbiAqXG4gKiBUaGUgZmFjdCB0aGF0IGBLZXlWYWx1ZUFycmF5YCBpcyBzb3J0ZWQgaXMgdmVyeSBpbXBvcnRhbnQgYmVjYXVzZSBpdCBhbGxvd3MgdXMgdG8gY29tcHV0ZSB0aGVcbiAqIGRpZmZlcmVuY2UgaW4gbGluZWFyIGZhc2hpb24gd2l0aG91dCB0aGUgbmVlZCB0byBhbGxvY2F0ZSBhbnkgYWRkaXRpb25hbCBkYXRhLlxuICpcbiAqIEZvciBleGFtcGxlIGlmIHdlIGtlcHQgdGhpcyBhcyBhIGBNYXBgIHdlIHdvdWxkIGhhdmUgdG8gaXRlcmF0ZSBvdmVyIHByZXZpb3VzIGBNYXBgIHRvIGRldGVybWluZVxuICogd2hpY2ggdmFsdWVzIG5lZWQgdG8gYmUgZGVsZXRlZCwgb3ZlciB0aGUgbmV3IGBNYXBgIHRvIGRldGVybWluZSBhZGRpdGlvbnMsIGFuZCB3ZSB3b3VsZCBoYXZlIHRvXG4gKiBrZWVwIGFkZGl0aW9uYWwgYE1hcGAgdG8ga2VlcCB0cmFjayBvZiBkdXBsaWNhdGVzIG9yIGl0ZW1zIHdoaWNoIGhhdmUgbm90IHlldCBiZWVuIHZpc2l0ZWQuXG4gKlxuICogQHBhcmFtIGtleVZhbHVlQXJyYXlTZXQgKFNlZSBga2V5VmFsdWVBcnJheVNldGAgaW4gXCJ1dGlsL2FycmF5X3V0aWxzXCIpIEdldHMgcGFzc2VkIGluIGFzIGFcbiAqICAgICAgICBmdW5jdGlvbiBzbyB0aGF0IGBzdHlsZWAgY2FuIGJlIHByb2Nlc3NlZC4gVGhpcyBpcyBkb25lXG4gKiAgICAgICAgZm9yIHRyZWUgc2hha2luZyBwdXJwb3Nlcy5cbiAqIEBwYXJhbSBzdHJpbmdQYXJzZXIgVGhlIHBhcnNlciBpcyBwYXNzZWQgaW4gc28gdGhhdCBpdCB3aWxsIGJlIHRyZWUgc2hha2FibGUuIFNlZVxuICogICAgICAgIGBzdHlsZVN0cmluZ1BhcnNlcmAgYW5kIGBjbGFzc1N0cmluZ1BhcnNlcmBcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gcGFyc2UvY29udmVydCB0byBgS2V5VmFsdWVBcnJheWBcbiAqL1xuZnVuY3Rpb24gdG9TdHlsaW5nS2V5VmFsdWVBcnJheShrZXlWYWx1ZUFycmF5U2V0LCBzdHJpbmdQYXJzZXIsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwgLyp8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkICovIHx8IHZhbHVlID09PSAnJylcbiAgICAgICAgcmV0dXJuIEVNUFRZX0FSUkFZO1xuICAgIGNvbnN0IHN0eWxlS2V5VmFsdWVBcnJheSA9IFtdO1xuICAgIGNvbnN0IHVud3JhcHBlZFZhbHVlID0gdW53cmFwU2FmZVZhbHVlKHZhbHVlKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh1bndyYXBwZWRWYWx1ZSkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1bndyYXBwZWRWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAga2V5VmFsdWVBcnJheVNldChzdHlsZUtleVZhbHVlQXJyYXksIHVud3JhcHBlZFZhbHVlW2ldLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdW53cmFwcGVkVmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHVud3JhcHBlZFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodW53cmFwcGVkVmFsdWUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIGtleVZhbHVlQXJyYXlTZXQoc3R5bGVLZXlWYWx1ZUFycmF5LCBrZXksIHVud3JhcHBlZFZhbHVlW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiB1bndyYXBwZWRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgc3RyaW5nUGFyc2VyKHN0eWxlS2V5VmFsdWVBcnJheSwgdW53cmFwcGVkVmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICB0aHJvd0Vycm9yKCdVbnN1cHBvcnRlZCBzdHlsaW5nIHR5cGUgJyArIHR5cGVvZiB1bndyYXBwZWRWYWx1ZSArICc6ICcgKyB1bndyYXBwZWRWYWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBzdHlsZUtleVZhbHVlQXJyYXk7XG59XG4vKipcbiAqIFNldCBhIGB2YWx1ZWAgZm9yIGEgYGtleWAuXG4gKlxuICogU2VlOiBga2V5VmFsdWVBcnJheVNldGAgZm9yIGRldGFpbHNcbiAqXG4gKiBAcGFyYW0ga2V5VmFsdWVBcnJheSBLZXlWYWx1ZUFycmF5IHRvIGFkZCB0by5cbiAqIEBwYXJhbSBrZXkgU3R5bGUga2V5IHRvIGFkZC5cbiAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICovXG5mdW5jdGlvbiBzdHlsZUtleVZhbHVlQXJyYXlTZXQoa2V5VmFsdWVBcnJheSwga2V5LCB2YWx1ZSkge1xuICAgIGtleVZhbHVlQXJyYXlTZXQoa2V5VmFsdWVBcnJheSwga2V5LCB1bndyYXBTYWZlVmFsdWUodmFsdWUpKTtcbn1cbi8qKlxuICogVXBkYXRlIG1hcCBiYXNlZCBzdHlsaW5nLlxuICpcbiAqIE1hcCBiYXNlZCBzdHlsaW5nIGNvdWxkIGJlIGFueXRoaW5nIHdoaWNoIGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgYmluZGluZy4gRm9yIGV4YW1wbGUgYHN0cmluZ2AsXG4gKiBvciBvYmplY3QgbGl0ZXJhbC4gRGVhbGluZyB3aXRoIGFsbCBvZiB0aGVzZSB0eXBlcyB3b3VsZCBjb21wbGljYXRlIHRoZSBsb2dpYyBzb1xuICogaW5zdGVhZCB0aGlzIGZ1bmN0aW9uIGV4cGVjdHMgdGhhdCB0aGUgY29tcGxleCBpbnB1dCBpcyBmaXJzdCBjb252ZXJ0ZWQgaW50byBub3JtYWxpemVkXG4gKiBgS2V5VmFsdWVBcnJheWAuIFRoZSBhZHZhbnRhZ2Ugb2Ygbm9ybWFsaXphdGlvbiBpcyB0aGF0IHdlIGdldCB0aGUgdmFsdWVzIHNvcnRlZCwgd2hpY2ggbWFrZXMgaXRcbiAqIHZlcnkgY2hlYXAgdG8gY29tcHV0ZSBkZWx0YXMgYmV0d2VlbiB0aGUgcHJldmlvdXMgYW5kIGN1cnJlbnQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHRWaWV3IEFzc29jaWF0ZWQgYFRWaWV3LmRhdGFgIGNvbnRhaW5zIHRoZSBsaW5rZWQgbGlzdCBvZiBiaW5kaW5nIHByaW9yaXRpZXMuXG4gKiBAcGFyYW0gdE5vZGUgYFROb2RlYCB3aGVyZSB0aGUgYmluZGluZyBpcyBsb2NhdGVkLlxuICogQHBhcmFtIGxWaWV3IGBMVmlld2AgY29udGFpbnMgdGhlIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggb3RoZXIgc3R5bGluZyBiaW5kaW5nIGF0IHRoaXMgYFROb2RlYC5cbiAqIEBwYXJhbSByZW5kZXJlciBSZW5kZXJlciB0byB1c2UgaWYgYW55IHVwZGF0ZXMuXG4gKiBAcGFyYW0gb2xkS2V5VmFsdWVBcnJheSBQcmV2aW91cyB2YWx1ZSByZXByZXNlbnRlZCBhcyBgS2V5VmFsdWVBcnJheWBcbiAqIEBwYXJhbSBuZXdLZXlWYWx1ZUFycmF5IEN1cnJlbnQgdmFsdWUgcmVwcmVzZW50ZWQgYXMgYEtleVZhbHVlQXJyYXlgXG4gKiBAcGFyYW0gaXNDbGFzc0Jhc2VkIGB0cnVlYCBpZiBgY2xhc3NgIChgZmFsc2VgIGlmIGBzdHlsZWApXG4gKiBAcGFyYW0gYmluZGluZ0luZGV4IEJpbmRpbmcgaW5kZXggb2YgdGhlIGJpbmRpbmcuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZVN0eWxpbmdNYXAodFZpZXcsIHROb2RlLCBsVmlldywgcmVuZGVyZXIsIG9sZEtleVZhbHVlQXJyYXksIG5ld0tleVZhbHVlQXJyYXksIGlzQ2xhc3NCYXNlZCwgYmluZGluZ0luZGV4KSB7XG4gICAgaWYgKG9sZEtleVZhbHVlQXJyYXkgPT09IE5PX0NIQU5HRSkge1xuICAgICAgICAvLyBPbiBmaXJzdCBleGVjdXRpb24gdGhlIG9sZEtleVZhbHVlQXJyYXkgaXMgTk9fQ0hBTkdFID0+IHRyZWF0IGl0IGFzIGVtcHR5IEtleVZhbHVlQXJyYXkuXG4gICAgICAgIG9sZEtleVZhbHVlQXJyYXkgPSBFTVBUWV9BUlJBWTtcbiAgICB9XG4gICAgbGV0IG9sZEluZGV4ID0gMDtcbiAgICBsZXQgbmV3SW5kZXggPSAwO1xuICAgIGxldCBvbGRLZXkgPSAwIDwgb2xkS2V5VmFsdWVBcnJheS5sZW5ndGggPyBvbGRLZXlWYWx1ZUFycmF5WzBdIDogbnVsbDtcbiAgICBsZXQgbmV3S2V5ID0gMCA8IG5ld0tleVZhbHVlQXJyYXkubGVuZ3RoID8gbmV3S2V5VmFsdWVBcnJheVswXSA6IG51bGw7XG4gICAgd2hpbGUgKG9sZEtleSAhPT0gbnVsbCB8fCBuZXdLZXkgIT09IG51bGwpIHtcbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydExlc3NUaGFuKG9sZEluZGV4LCA5OTksICdBcmUgd2Ugc3R1Y2sgaW4gaW5maW5pdGUgbG9vcD8nKTtcbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydExlc3NUaGFuKG5ld0luZGV4LCA5OTksICdBcmUgd2Ugc3R1Y2sgaW4gaW5maW5pdGUgbG9vcD8nKTtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBvbGRJbmRleCA8IG9sZEtleVZhbHVlQXJyYXkubGVuZ3RoID8gb2xkS2V5VmFsdWVBcnJheVtvbGRJbmRleCArIDFdIDogdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IG5ld0luZGV4IDwgbmV3S2V5VmFsdWVBcnJheS5sZW5ndGggPyBuZXdLZXlWYWx1ZUFycmF5W25ld0luZGV4ICsgMV0gOiB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBzZXRLZXkgPSBudWxsO1xuICAgICAgICBsZXQgc2V0VmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChvbGRLZXkgPT09IG5ld0tleSkge1xuICAgICAgICAgICAgLy8gVVBEQVRFOiBLZXlzIGFyZSBlcXVhbCA9PiBuZXcgdmFsdWUgaXMgb3ZlcndyaXRpbmcgb2xkIHZhbHVlLlxuICAgICAgICAgICAgb2xkSW5kZXggKz0gMjtcbiAgICAgICAgICAgIG5ld0luZGV4ICs9IDI7XG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgc2V0S2V5ID0gbmV3S2V5O1xuICAgICAgICAgICAgICAgIHNldFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobmV3S2V5ID09PSBudWxsIHx8IG9sZEtleSAhPT0gbnVsbCAmJiBvbGRLZXkgPCBuZXdLZXkpIHtcbiAgICAgICAgICAgIC8vIERFTEVURTogb2xkS2V5IGtleSBpcyBtaXNzaW5nIG9yIHdlIGRpZCBub3QgZmluZCB0aGUgb2xkS2V5IGluIHRoZSBuZXdWYWx1ZVxuICAgICAgICAgICAgLy8gKGJlY2F1c2UgdGhlIGtleVZhbHVlQXJyYXkgaXMgc29ydGVkIGFuZCBgbmV3S2V5YCBpcyBmb3VuZCBsYXRlciBhbHBoYWJldGljYWxseSkuXG4gICAgICAgICAgICAvLyBgXCJiYWNrZ3JvdW5kXCIgPCBcImNvbG9yXCJgIHNvIHdlIG5lZWQgdG8gZGVsZXRlIGBcImJhY2tncm91bmRcImAgYmVjYXVzZSBpdCBpcyBub3QgZm91bmQgaW4gdGhlXG4gICAgICAgICAgICAvLyBuZXcgYXJyYXkuXG4gICAgICAgICAgICBvbGRJbmRleCArPSAyO1xuICAgICAgICAgICAgc2V0S2V5ID0gb2xkS2V5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gQ1JFQVRFOiBuZXdLZXkncyBpcyBlYXJsaWVyIGFscGhhYmV0aWNhbGx5IHRoYW4gb2xkS2V5J3MgKG9yIG5vIG9sZEtleSkgPT4gd2UgaGF2ZSBuZXcga2V5LlxuICAgICAgICAgICAgLy8gYFwiY29sb3JcIiA+IFwiYmFja2dyb3VuZFwiYCBzbyB3ZSBuZWVkIHRvIGFkZCBgY29sb3JgIGJlY2F1c2UgaXQgaXMgaW4gbmV3IGFycmF5IGJ1dCBub3QgaW5cbiAgICAgICAgICAgIC8vIG9sZCBhcnJheS5cbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKG5ld0tleSwgJ0V4cGVjdGluZyB0byBoYXZlIGEgdmFsaWQga2V5Jyk7XG4gICAgICAgICAgICBuZXdJbmRleCArPSAyO1xuICAgICAgICAgICAgc2V0S2V5ID0gbmV3S2V5O1xuICAgICAgICAgICAgc2V0VmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2V0S2V5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB1cGRhdGVTdHlsaW5nKHRWaWV3LCB0Tm9kZSwgbFZpZXcsIHJlbmRlcmVyLCBzZXRLZXksIHNldFZhbHVlLCBpc0NsYXNzQmFzZWQsIGJpbmRpbmdJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgb2xkS2V5ID0gb2xkSW5kZXggPCBvbGRLZXlWYWx1ZUFycmF5Lmxlbmd0aCA/IG9sZEtleVZhbHVlQXJyYXlbb2xkSW5kZXhdIDogbnVsbDtcbiAgICAgICAgbmV3S2V5ID0gbmV3SW5kZXggPCBuZXdLZXlWYWx1ZUFycmF5Lmxlbmd0aCA/IG5ld0tleVZhbHVlQXJyYXlbbmV3SW5kZXhdIDogbnVsbDtcbiAgICB9XG59XG4vKipcbiAqIFVwZGF0ZSBhIHNpbXBsZSAocHJvcGVydHkgbmFtZSkgc3R5bGluZy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHRha2VzIGBwcm9wYCBhbmQgdXBkYXRlcyB0aGUgRE9NIHRvIHRoYXQgdmFsdWUuIFRoZSBmdW5jdGlvbiB0YWtlcyB0aGUgYmluZGluZ1xuICogdmFsdWUgYXMgd2VsbCBhcyBiaW5kaW5nIHByaW9yaXR5IGludG8gY29uc2lkZXJhdGlvbiB0byBkZXRlcm1pbmUgd2hpY2ggdmFsdWUgc2hvdWxkIGJlIHdyaXR0ZW5cbiAqIHRvIERPTS4gKEZvciBleGFtcGxlIGl0IG1heSBiZSBkZXRlcm1pbmVkIHRoYXQgdGhlcmUgaXMgYSBoaWdoZXIgcHJpb3JpdHkgb3ZlcndyaXRlIHdoaWNoIGJsb2Nrc1xuICogdGhlIERPTSB3cml0ZSwgb3IgaWYgdGhlIHZhbHVlIGdvZXMgdG8gYHVuZGVmaW5lZGAgYSBsb3dlciBwcmlvcml0eSBvdmVyd3JpdGUgbWF5IGJlIGNvbnN1bHRlZC4pXG4gKlxuICogQHBhcmFtIHRWaWV3IEFzc29jaWF0ZWQgYFRWaWV3LmRhdGFgIGNvbnRhaW5zIHRoZSBsaW5rZWQgbGlzdCBvZiBiaW5kaW5nIHByaW9yaXRpZXMuXG4gKiBAcGFyYW0gdE5vZGUgYFROb2RlYCB3aGVyZSB0aGUgYmluZGluZyBpcyBsb2NhdGVkLlxuICogQHBhcmFtIGxWaWV3IGBMVmlld2AgY29udGFpbnMgdGhlIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggb3RoZXIgc3R5bGluZyBiaW5kaW5nIGF0IHRoaXMgYFROb2RlYC5cbiAqIEBwYXJhbSByZW5kZXJlciBSZW5kZXJlciB0byB1c2UgaWYgYW55IHVwZGF0ZXMuXG4gKiBAcGFyYW0gcHJvcCBFaXRoZXIgc3R5bGUgcHJvcGVydHkgbmFtZSBvciBhIGNsYXNzIG5hbWUuXG4gKiBAcGFyYW0gdmFsdWUgRWl0aGVyIHN0eWxlIHZhbHVlIGZvciBgcHJvcGAgb3IgYHRydWVgL2BmYWxzZWAgaWYgYHByb3BgIGlzIGNsYXNzLlxuICogQHBhcmFtIGlzQ2xhc3NCYXNlZCBgdHJ1ZWAgaWYgYGNsYXNzYCAoYGZhbHNlYCBpZiBgc3R5bGVgKVxuICogQHBhcmFtIGJpbmRpbmdJbmRleCBCaW5kaW5nIGluZGV4IG9mIHRoZSBiaW5kaW5nLlxuICovXG5mdW5jdGlvbiB1cGRhdGVTdHlsaW5nKHRWaWV3LCB0Tm9kZSwgbFZpZXcsIHJlbmRlcmVyLCBwcm9wLCB2YWx1ZSwgaXNDbGFzc0Jhc2VkLCBiaW5kaW5nSW5kZXgpIHtcbiAgICBpZiAoISh0Tm9kZS50eXBlICYgMyAvKiBBbnlSTm9kZSAqLykpIHtcbiAgICAgICAgLy8gSXQgaXMgcG9zc2libGUgdG8gaGF2ZSBzdHlsaW5nIG9uIG5vbi1lbGVtZW50cyAoc3VjaCBhcyBuZy1jb250YWluZXIpLlxuICAgICAgICAvLyBUaGlzIGlzIHJhcmUsIGJ1dCBpdCBkb2VzIGhhcHBlbi4gSW4gc3VjaCBhIGNhc2UsIGp1c3QgaWdub3JlIHRoZSBiaW5kaW5nLlxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHREYXRhID0gdFZpZXcuZGF0YTtcbiAgICBjb25zdCB0UmFuZ2UgPSB0RGF0YVtiaW5kaW5nSW5kZXggKyAxXTtcbiAgICBjb25zdCBoaWdoZXJQcmlvcml0eVZhbHVlID0gZ2V0VFN0eWxpbmdSYW5nZU5leHREdXBsaWNhdGUodFJhbmdlKSA/XG4gICAgICAgIGZpbmRTdHlsaW5nVmFsdWUodERhdGEsIHROb2RlLCBsVmlldywgcHJvcCwgZ2V0VFN0eWxpbmdSYW5nZU5leHQodFJhbmdlKSwgaXNDbGFzc0Jhc2VkKSA6XG4gICAgICAgIHVuZGVmaW5lZDtcbiAgICBpZiAoIWlzU3R5bGluZ1ZhbHVlUHJlc2VudChoaWdoZXJQcmlvcml0eVZhbHVlKSkge1xuICAgICAgICAvLyBXZSBkb24ndCBoYXZlIGEgbmV4dCBkdXBsaWNhdGUsIG9yIHdlIGRpZCBub3QgZmluZCBhIGR1cGxpY2F0ZSB2YWx1ZS5cbiAgICAgICAgaWYgKCFpc1N0eWxpbmdWYWx1ZVByZXNlbnQodmFsdWUpKSB7XG4gICAgICAgICAgICAvLyBXZSBzaG91bGQgZGVsZXRlIGN1cnJlbnQgdmFsdWUgb3IgcmVzdG9yZSB0byBsb3dlciBwcmlvcml0eSB2YWx1ZS5cbiAgICAgICAgICAgIGlmIChnZXRUU3R5bGluZ1JhbmdlUHJldkR1cGxpY2F0ZSh0UmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIHBvc3NpYmxlIHByZXYgZHVwbGljYXRlLCBsZXQncyByZXRyaWV2ZSBpdC5cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZpbmRTdHlsaW5nVmFsdWUodERhdGEsIG51bGwsIGxWaWV3LCBwcm9wLCBiaW5kaW5nSW5kZXgsIGlzQ2xhc3NCYXNlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgck5vZGUgPSBnZXROYXRpdmVCeUluZGV4KGdldFNlbGVjdGVkSW5kZXgoKSwgbFZpZXcpO1xuICAgICAgICBhcHBseVN0eWxpbmcocmVuZGVyZXIsIGlzQ2xhc3NCYXNlZCwgck5vZGUsIHByb3AsIHZhbHVlKTtcbiAgICB9XG59XG4vKipcbiAqIFNlYXJjaCBmb3Igc3R5bGluZyB2YWx1ZSB3aXRoIGhpZ2hlciBwcmlvcml0eSB3aGljaCBpcyBvdmVyd3JpdGluZyBjdXJyZW50IHZhbHVlLCBvciBhXG4gKiB2YWx1ZSBvZiBsb3dlciBwcmlvcml0eSB0byB3aGljaCB3ZSBzaG91bGQgZmFsbCBiYWNrIGlmIHRoZSB2YWx1ZSBpcyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBXaGVuIHZhbHVlIGlzIGJlaW5nIGFwcGxpZWQgYXQgYSBsb2NhdGlvbiwgcmVsYXRlZCB2YWx1ZXMgbmVlZCB0byBiZSBjb25zdWx0ZWQuXG4gKiAtIElmIHRoZXJlIGlzIGEgaGlnaGVyIHByaW9yaXR5IGJpbmRpbmcsIHdlIHNob3VsZCBiZSB1c2luZyB0aGF0IG9uZSBpbnN0ZWFkLlxuICogICBGb3IgZXhhbXBsZSBgPGRpdiAgW3N0eWxlXT1cIntjb2xvcjpleHAxfVwiIFtzdHlsZS5jb2xvcl09XCJleHAyXCI+YCBjaGFuZ2UgdG8gYGV4cDFgXG4gKiAgIHJlcXVpcmVzIHRoYXQgd2UgY2hlY2sgYGV4cDJgIHRvIHNlZSBpZiBpdCBpcyBzZXQgdG8gdmFsdWUgb3RoZXIgdGhhbiBgdW5kZWZpbmVkYC5cbiAqIC0gSWYgdGhlcmUgaXMgYSBsb3dlciBwcmlvcml0eSBiaW5kaW5nIGFuZCB3ZSBhcmUgY2hhbmdpbmcgdG8gYHVuZGVmaW5lZGBcbiAqICAgRm9yIGV4YW1wbGUgYDxkaXYgIFtzdHlsZV09XCJ7Y29sb3I6ZXhwMX1cIiBbc3R5bGUuY29sb3JdPVwiZXhwMlwiPmAgY2hhbmdlIHRvIGBleHAyYCB0b1xuICogICBgdW5kZWZpbmVkYCByZXF1aXJlcyB0aGF0IHdlIGNoZWNrIGBleHAxYCAoYW5kIHN0YXRpYyB2YWx1ZXMpIGFuZCB1c2UgdGhhdCBhcyBuZXcgdmFsdWUuXG4gKlxuICogTk9URTogVGhlIHN0eWxpbmcgc3RvcmVzIHR3byB2YWx1ZXMuXG4gKiAxLiBUaGUgcmF3IHZhbHVlIHdoaWNoIGNhbWUgZnJvbSB0aGUgYXBwbGljYXRpb24gaXMgc3RvcmVkIGF0IGBpbmRleCArIDBgIGxvY2F0aW9uLiAoVGhpcyB2YWx1ZVxuICogICAgaXMgdXNlZCBmb3IgZGlydHkgY2hlY2tpbmcpLlxuICogMi4gVGhlIG5vcm1hbGl6ZWQgdmFsdWUgaXMgc3RvcmVkIGF0IGBpbmRleCArIDFgLlxuICpcbiAqIEBwYXJhbSB0RGF0YSBgVERhdGFgIHVzZWQgZm9yIHRyYXZlcnNpbmcgdGhlIHByaW9yaXR5LlxuICogQHBhcmFtIHROb2RlIGBUTm9kZWAgdG8gdXNlIGZvciByZXNvbHZpbmcgc3RhdGljIHN0eWxpbmcuIEFsc28gY29udHJvbHMgc2VhcmNoIGRpcmVjdGlvbi5cbiAqICAgLSBgVE5vZGVgIHNlYXJjaCBuZXh0IGFuZCBxdWl0IGFzIHNvb24gYXMgYGlzU3R5bGluZ1ZhbHVlUHJlc2VudCh2YWx1ZSlgIGlzIHRydWUuXG4gKiAgICAgIElmIG5vIHZhbHVlIGZvdW5kIGNvbnN1bHQgYHROb2RlLnJlc2lkdWFsU3R5bGVgL2B0Tm9kZS5yZXNpZHVhbENsYXNzYCBmb3IgZGVmYXVsdCB2YWx1ZS5cbiAqICAgLSBgbnVsbGAgc2VhcmNoIHByZXYgYW5kIGdvIGFsbCB0aGUgd2F5IHRvIGVuZC4gUmV0dXJuIGxhc3QgdmFsdWUgd2hlcmVcbiAqICAgICBgaXNTdHlsaW5nVmFsdWVQcmVzZW50KHZhbHVlKWAgaXMgdHJ1ZS5cbiAqIEBwYXJhbSBsVmlldyBgTFZpZXdgIHVzZWQgZm9yIHJldHJpZXZpbmcgdGhlIGFjdHVhbCB2YWx1ZXMuXG4gKiBAcGFyYW0gcHJvcCBQcm9wZXJ0eSB3aGljaCB3ZSBhcmUgaW50ZXJlc3RlZCBpbi5cbiAqIEBwYXJhbSBpbmRleCBTdGFydGluZyBpbmRleCBpbiB0aGUgbGlua2VkIGxpc3Qgb2Ygc3R5bGluZyBiaW5kaW5ncyB3aGVyZSB0aGUgc2VhcmNoIHNob3VsZCBzdGFydC5cbiAqIEBwYXJhbSBpc0NsYXNzQmFzZWQgYHRydWVgIGlmIGBjbGFzc2AgKGBmYWxzZWAgaWYgYHN0eWxlYClcbiAqL1xuZnVuY3Rpb24gZmluZFN0eWxpbmdWYWx1ZSh0RGF0YSwgdE5vZGUsIGxWaWV3LCBwcm9wLCBpbmRleCwgaXNDbGFzc0Jhc2VkKSB7XG4gICAgLy8gYFROb2RlYCB0byB1c2UgZm9yIHJlc29sdmluZyBzdGF0aWMgc3R5bGluZy4gQWxzbyBjb250cm9scyBzZWFyY2ggZGlyZWN0aW9uLlxuICAgIC8vICAgLSBgVE5vZGVgIHNlYXJjaCBuZXh0IGFuZCBxdWl0IGFzIHNvb24gYXMgYGlzU3R5bGluZ1ZhbHVlUHJlc2VudCh2YWx1ZSlgIGlzIHRydWUuXG4gICAgLy8gICAgICBJZiBubyB2YWx1ZSBmb3VuZCBjb25zdWx0IGB0Tm9kZS5yZXNpZHVhbFN0eWxlYC9gdE5vZGUucmVzaWR1YWxDbGFzc2AgZm9yIGRlZmF1bHQgdmFsdWUuXG4gICAgLy8gICAtIGBudWxsYCBzZWFyY2ggcHJldiBhbmQgZ28gYWxsIHRoZSB3YXkgdG8gZW5kLiBSZXR1cm4gbGFzdCB2YWx1ZSB3aGVyZVxuICAgIC8vICAgICBgaXNTdHlsaW5nVmFsdWVQcmVzZW50KHZhbHVlKWAgaXMgdHJ1ZS5cbiAgICBjb25zdCBpc1ByZXZEaXJlY3Rpb24gPSB0Tm9kZSA9PT0gbnVsbDtcbiAgICBsZXQgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgd2hpbGUgKGluZGV4ID4gMCkge1xuICAgICAgICBjb25zdCByYXdLZXkgPSB0RGF0YVtpbmRleF07XG4gICAgICAgIGNvbnN0IGNvbnRhaW5zU3RhdGljcyA9IEFycmF5LmlzQXJyYXkocmF3S2V5KTtcbiAgICAgICAgLy8gVW53cmFwIHRoZSBrZXkgaWYgd2UgY29udGFpbiBzdGF0aWMgdmFsdWVzLlxuICAgICAgICBjb25zdCBrZXkgPSBjb250YWluc1N0YXRpY3MgPyByYXdLZXlbMV0gOiByYXdLZXk7XG4gICAgICAgIGNvbnN0IGlzU3R5bGluZ01hcCA9IGtleSA9PT0gbnVsbDtcbiAgICAgICAgbGV0IHZhbHVlQXRMVmlld0luZGV4ID0gbFZpZXdbaW5kZXggKyAxXTtcbiAgICAgICAgaWYgKHZhbHVlQXRMVmlld0luZGV4ID09PSBOT19DSEFOR0UpIHtcbiAgICAgICAgICAgIC8vIEluIGZpcnN0VXBkYXRlUGFzcyB0aGUgc3R5bGluZyBpbnN0cnVjdGlvbnMgY3JlYXRlIGEgbGlua2VkIGxpc3Qgb2Ygc3R5bGluZy5cbiAgICAgICAgICAgIC8vIE9uIHN1YnNlcXVlbnQgcGFzc2VzIGl0IGlzIHBvc3NpYmxlIGZvciBhIHN0eWxpbmcgaW5zdHJ1Y3Rpb24gdG8gdHJ5IHRvIHJlYWQgYSBiaW5kaW5nXG4gICAgICAgICAgICAvLyB3aGljaFxuICAgICAgICAgICAgLy8gaGFzIG5vdCB5ZXQgZXhlY3V0ZWQuIEluIHRoYXQgY2FzZSB3ZSB3aWxsIGZpbmQgYE5PX0NIQU5HRWAgYW5kIHdlIHNob3VsZCBhc3N1bWUgdGhhdFxuICAgICAgICAgICAgLy8gd2UgaGF2ZSBgdW5kZWZpbmVkYCAob3IgZW1wdHkgYXJyYXkgaW4gY2FzZSBvZiBzdHlsaW5nLW1hcCBpbnN0cnVjdGlvbikgaW5zdGVhZC4gVGhpc1xuICAgICAgICAgICAgLy8gYWxsb3dzIHRoZSByZXNvbHV0aW9uIHRvIGFwcGx5IHRoZSB2YWx1ZSAod2hpY2ggbWF5IGxhdGVyIGJlIG92ZXJ3cml0dGVuIHdoZW4gdGhlXG4gICAgICAgICAgICAvLyBiaW5kaW5nIGFjdHVhbGx5IGV4ZWN1dGVzLilcbiAgICAgICAgICAgIHZhbHVlQXRMVmlld0luZGV4ID0gaXNTdHlsaW5nTWFwID8gRU1QVFlfQVJSQVkgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9IGlzU3R5bGluZ01hcCA/IGtleVZhbHVlQXJyYXlHZXQodmFsdWVBdExWaWV3SW5kZXgsIHByb3ApIDpcbiAgICAgICAgICAgIGtleSA9PT0gcHJvcCA/IHZhbHVlQXRMVmlld0luZGV4IDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoY29udGFpbnNTdGF0aWNzICYmICFpc1N0eWxpbmdWYWx1ZVByZXNlbnQoY3VycmVudFZhbHVlKSkge1xuICAgICAgICAgICAgY3VycmVudFZhbHVlID0ga2V5VmFsdWVBcnJheUdldChyYXdLZXksIHByb3ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1N0eWxpbmdWYWx1ZVByZXNlbnQoY3VycmVudFZhbHVlKSkge1xuICAgICAgICAgICAgdmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgICAgICBpZiAoaXNQcmV2RGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRSYW5nZSA9IHREYXRhW2luZGV4ICsgMV07XG4gICAgICAgIGluZGV4ID0gaXNQcmV2RGlyZWN0aW9uID8gZ2V0VFN0eWxpbmdSYW5nZVByZXYodFJhbmdlKSA6IGdldFRTdHlsaW5nUmFuZ2VOZXh0KHRSYW5nZSk7XG4gICAgfVxuICAgIGlmICh0Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAvLyBpbiBjYXNlIHdoZXJlIHdlIGFyZSBnb2luZyBpbiBuZXh0IGRpcmVjdGlvbiBBTkQgd2UgZGlkIG5vdCBmaW5kIGFueXRoaW5nLCB3ZSBuZWVkIHRvXG4gICAgICAgIC8vIGNvbnN1bHQgcmVzaWR1YWwgc3R5bGluZ1xuICAgICAgICBsZXQgcmVzaWR1YWwgPSBpc0NsYXNzQmFzZWQgPyB0Tm9kZS5yZXNpZHVhbENsYXNzZXMgOiB0Tm9kZS5yZXNpZHVhbFN0eWxlcztcbiAgICAgICAgaWYgKHJlc2lkdWFsICE9IG51bGwgLyoqIE9SIHJlc2lkdWFsICE9PT0gdW5kZWZpbmVkICovKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGtleVZhbHVlQXJyYXlHZXQocmVzaWR1YWwsIHByb3ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgYmluZGluZyB2YWx1ZSBzaG91bGQgYmUgdXNlZCAob3IgaWYgdGhlIHZhbHVlIGlzICd1bmRlZmluZWQnIGFuZCBoZW5jZSBwcmlvcml0eVxuICogcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZC4pXG4gKlxuICogQHBhcmFtIHZhbHVlIEJpbmRpbmcgc3R5bGUgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGlzU3R5bGluZ1ZhbHVlUHJlc2VudCh2YWx1ZSkge1xuICAgIC8vIEN1cnJlbnRseSBvbmx5IGB1bmRlZmluZWRgIHZhbHVlIGlzIGNvbnNpZGVyZWQgbm9uLWJpbmRpbmcuIFRoYXQgaXMgYHVuZGVmaW5lZGAgc2F5cyBJIGRvbid0XG4gICAgLy8gaGF2ZSBhbiBvcGluaW9uIGFzIHRvIHdoYXQgdGhpcyBiaW5kaW5nIHNob3VsZCBiZSBhbmQgeW91IHNob3VsZCBjb25zdWx0IG90aGVyIGJpbmRpbmdzIGJ5XG4gICAgLy8gcHJpb3JpdHkgdG8gZGV0ZXJtaW5lIHRoZSB2YWxpZCB2YWx1ZS5cbiAgICAvLyBUaGlzIGlzIGV4dHJhY3RlZCBpbnRvIGEgc2luZ2xlIGZ1bmN0aW9uIHNvIHRoYXQgd2UgaGF2ZSBhIHNpbmdsZSBwbGFjZSB0byBjb250cm9sIHRoaXMuXG4gICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIE5vcm1hbGl6ZXMgYW5kL29yIGFkZHMgYSBzdWZmaXggdG8gdGhlIHZhbHVlLlxuICpcbiAqIElmIHZhbHVlIGlzIGBudWxsYC9gdW5kZWZpbmVkYCBubyBzdWZmaXggaXMgYWRkZWRcbiAqIEBwYXJhbSB2YWx1ZVxuICogQHBhcmFtIHN1ZmZpeFxuICovXG5mdW5jdGlvbiBub3JtYWxpemVTdWZmaXgodmFsdWUsIHN1ZmZpeCkge1xuICAgIGlmICh2YWx1ZSA9PSBudWxsIC8qKiB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkICovKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHN1ZmZpeCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSArIHN1ZmZpeDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICB2YWx1ZSA9IHN0cmluZ2lmeSh1bndyYXBTYWZlVmFsdWUodmFsdWUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLyoqXG4gKiBUZXN0cyBpZiB0aGUgYFROb2RlYCBoYXMgaW5wdXQgc2hhZG93LlxuICpcbiAqIEFuIGlucHV0IHNoYWRvdyBpcyB3aGVuIGEgZGlyZWN0aXZlIHN0ZWFscyAoc2hhZG93cykgdGhlIGlucHV0IGJ5IHVzaW5nIGBASW5wdXQoJ3N0eWxlJylgIG9yXG4gKiBgQElucHV0KCdjbGFzcycpYCBhcyBpbnB1dC5cbiAqXG4gKiBAcGFyYW0gdE5vZGUgYFROb2RlYCB3aGljaCB3ZSB3b3VsZCBsaWtlIHRvIHNlZSBpZiBpdCBoYXMgc2hhZG93LlxuICogQHBhcmFtIGlzQ2xhc3NCYXNlZCBgdHJ1ZWAgaWYgYGNsYXNzYCAoYGZhbHNlYCBpZiBgc3R5bGVgKVxuICovXG5mdW5jdGlvbiBoYXNTdHlsaW5nSW5wdXRTaGFkb3codE5vZGUsIGlzQ2xhc3NCYXNlZCkge1xuICAgIHJldHVybiAodE5vZGUuZmxhZ3MgJiAoaXNDbGFzc0Jhc2VkID8gMTYgLyogaGFzQ2xhc3NJbnB1dCAqLyA6IDMyIC8qIGhhc1N0eWxlSW5wdXQgKi8pKSAhPT0gMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIENyZWF0ZSBzdGF0aWMgdGV4dCBub2RlXG4gKlxuICogQHBhcmFtIGluZGV4IEluZGV4IG9mIHRoZSBub2RlIGluIHRoZSBkYXRhIGFycmF5XG4gKiBAcGFyYW0gdmFsdWUgU3RhdGljIHN0cmluZyB2YWx1ZSB0byB3cml0ZS5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1dGV4dChpbmRleCwgdmFsdWUgPSAnJykge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgY29uc3QgYWRqdXN0ZWRJbmRleCA9IGluZGV4ICsgSEVBREVSX09GRlNFVDtcbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0RXF1YWwoZ2V0QmluZGluZ0luZGV4KCksIHRWaWV3LmJpbmRpbmdTdGFydEluZGV4LCAndGV4dCBub2RlcyBzaG91bGQgYmUgY3JlYXRlZCBiZWZvcmUgYW55IGJpbmRpbmdzJyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShsVmlldywgYWRqdXN0ZWRJbmRleCk7XG4gICAgY29uc3QgdE5vZGUgPSB0Vmlldy5maXJzdENyZWF0ZVBhc3MgP1xuICAgICAgICBnZXRPckNyZWF0ZVROb2RlKHRWaWV3LCBhZGp1c3RlZEluZGV4LCAxIC8qIFRleHQgKi8sIHZhbHVlLCBudWxsKSA6XG4gICAgICAgIHRWaWV3LmRhdGFbYWRqdXN0ZWRJbmRleF07XG4gICAgY29uc3QgdGV4dE5hdGl2ZSA9IGxWaWV3W2FkanVzdGVkSW5kZXhdID0gY3JlYXRlVGV4dE5vZGUobFZpZXdbUkVOREVSRVJdLCB2YWx1ZSk7XG4gICAgYXBwZW5kQ2hpbGQodFZpZXcsIGxWaWV3LCB0ZXh0TmF0aXZlLCB0Tm9kZSk7XG4gICAgLy8gVGV4dCBub2RlcyBhcmUgc2VsZiBjbG9zaW5nLlxuICAgIHNldEN1cnJlbnRUTm9kZSh0Tm9kZSwgZmFsc2UpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICpcbiAqIFVwZGF0ZSB0ZXh0IGNvbnRlbnQgd2l0aCBhIGxvbmUgYm91bmQgdmFsdWVcbiAqXG4gKiBVc2VkIHdoZW4gYSB0ZXh0IG5vZGUgaGFzIDEgaW50ZXJwb2xhdGVkIHZhbHVlIGluIGl0LCBhbiBubyBhZGRpdGlvbmFsIHRleHRcbiAqIHN1cnJvdW5kcyB0aGF0IGludGVycG9sYXRlZCB2YWx1ZTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2Pnt7djB9fTwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1dGV4dEludGVycG9sYXRlKHYwKTtcbiAqIGBgYFxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQHNlZSB0ZXh0SW50ZXJwb2xhdGVWXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1dGV4dEludGVycG9sYXRlKHYwKSB7XG4gICAgybXJtXRleHRJbnRlcnBvbGF0ZTEoJycsIHYwLCAnJyk7XG4gICAgcmV0dXJuIMm1ybV0ZXh0SW50ZXJwb2xhdGU7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgdGV4dCBjb250ZW50IHdpdGggc2luZ2xlIGJvdW5kIHZhbHVlIHN1cnJvdW5kZWQgYnkgb3RoZXIgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gYSB0ZXh0IG5vZGUgaGFzIDEgaW50ZXJwb2xhdGVkIHZhbHVlIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXY+cHJlZml4e3t2MH19c3VmZml4PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6XG4gKlxuICogYGBgdHNcbiAqIMm1ybV0ZXh0SW50ZXJwb2xhdGUxKCdwcmVmaXgnLCB2MCwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAc2VlIHRleHRJbnRlcnBvbGF0ZVZcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybV0ZXh0SW50ZXJwb2xhdGUxKHByZWZpeCwgdjAsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWQgPSBpbnRlcnBvbGF0aW9uMShsVmlldywgcHJlZml4LCB2MCwgc3VmZml4KTtcbiAgICBpZiAoaW50ZXJwb2xhdGVkICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgdGV4dEJpbmRpbmdJbnRlcm5hbChsVmlldywgZ2V0U2VsZWN0ZWRJbmRleCgpLCBpbnRlcnBvbGF0ZWQpO1xuICAgIH1cbiAgICByZXR1cm4gybXJtXRleHRJbnRlcnBvbGF0ZTE7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgdGV4dCBjb250ZW50IHdpdGggMiBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSBvdGhlciB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiBhIHRleHQgbm9kZSBoYXMgMiBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXY+cHJlZml4e3t2MH19LXt7djF9fXN1ZmZpeDwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1dGV4dEludGVycG9sYXRlMigncHJlZml4JywgdjAsICctJywgdjEsICdzdWZmaXgnKTtcbiAqIGBgYFxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQHNlZSB0ZXh0SW50ZXJwb2xhdGVWXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1dGV4dEludGVycG9sYXRlMihwcmVmaXgsIHYwLCBpMCwgdjEsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWQgPSBpbnRlcnBvbGF0aW9uMihsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBzdWZmaXgpO1xuICAgIGlmIChpbnRlcnBvbGF0ZWQgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICB0ZXh0QmluZGluZ0ludGVybmFsKGxWaWV3LCBnZXRTZWxlY3RlZEluZGV4KCksIGludGVycG9sYXRlZCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1dGV4dEludGVycG9sYXRlMjtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSB0ZXh0IGNvbnRlbnQgd2l0aCAzIGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IG90aGVyIHRleHQuXG4gKlxuICogVXNlZCB3aGVuIGEgdGV4dCBub2RlIGhhcyAzIGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdj5wcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fXN1ZmZpeDwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1dGV4dEludGVycG9sYXRlMyhcbiAqICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAc2VlIHRleHRJbnRlcnBvbGF0ZVZcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybV0ZXh0SW50ZXJwb2xhdGUzKHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBzdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkID0gaW50ZXJwb2xhdGlvbjMobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBzdWZmaXgpO1xuICAgIGlmIChpbnRlcnBvbGF0ZWQgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICB0ZXh0QmluZGluZ0ludGVybmFsKGxWaWV3LCBnZXRTZWxlY3RlZEluZGV4KCksIGludGVycG9sYXRlZCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1dGV4dEludGVycG9sYXRlMztcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSB0ZXh0IGNvbnRlbnQgd2l0aCA0IGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IG90aGVyIHRleHQuXG4gKlxuICogVXNlZCB3aGVuIGEgdGV4dCBub2RlIGhhcyA0IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdj5wcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX1zdWZmaXg8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXRleHRJbnRlcnBvbGF0ZTQoXG4gKiAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICdzdWZmaXgnKTtcbiAqIGBgYFxuICogQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQHNlZSDJtcm1dGV4dEludGVycG9sYXRlVlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXRleHRJbnRlcnBvbGF0ZTQocHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2Mywgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZCA9IGludGVycG9sYXRpb240KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBzdWZmaXgpO1xuICAgIGlmIChpbnRlcnBvbGF0ZWQgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICB0ZXh0QmluZGluZ0ludGVybmFsKGxWaWV3LCBnZXRTZWxlY3RlZEluZGV4KCksIGludGVycG9sYXRlZCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1dGV4dEludGVycG9sYXRlNDtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSB0ZXh0IGNvbnRlbnQgd2l0aCA1IGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IG90aGVyIHRleHQuXG4gKlxuICogVXNlZCB3aGVuIGEgdGV4dCBub2RlIGhhcyA1IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdj5wcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19c3VmZml4PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6XG4gKlxuICogYGBgdHNcbiAqIMm1ybV0ZXh0SW50ZXJwb2xhdGU1KFxuICogJ3ByZWZpeCcsIHYwLCAnLScsIHYxLCAnLScsIHYyLCAnLScsIHYzLCAnLScsIHY0LCAnc3VmZml4Jyk7XG4gKiBgYGBcbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBzZWUgdGV4dEludGVycG9sYXRlVlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXRleHRJbnRlcnBvbGF0ZTUocHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBzdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkID0gaW50ZXJwb2xhdGlvbjUobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgc3VmZml4KTtcbiAgICBpZiAoaW50ZXJwb2xhdGVkICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgdGV4dEJpbmRpbmdJbnRlcm5hbChsVmlldywgZ2V0U2VsZWN0ZWRJbmRleCgpLCBpbnRlcnBvbGF0ZWQpO1xuICAgIH1cbiAgICByZXR1cm4gybXJtXRleHRJbnRlcnBvbGF0ZTU7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgdGV4dCBjb250ZW50IHdpdGggNiBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSBvdGhlciB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiBhIHRleHQgbm9kZSBoYXMgNiBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXY+cHJlZml4e3t2MH19LXt7djF9fS17e3YyfX0te3t2M319LXt7djR9fS17e3Y1fX1zdWZmaXg8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXRleHRJbnRlcnBvbGF0ZTYoXG4gKiAgICAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICctJywgdjQsICctJywgdjUsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBpNCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY1IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS4gQHJldHVybnMgaXRzZWxmLCBzbyB0aGF0IGl0IG1heSBiZSBjaGFpbmVkLlxuICogQHNlZSB0ZXh0SW50ZXJwb2xhdGVWXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1dGV4dEludGVycG9sYXRlNihwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZCA9IGludGVycG9sYXRpb242KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgc3VmZml4KTtcbiAgICBpZiAoaW50ZXJwb2xhdGVkICE9PSBOT19DSEFOR0UpIHtcbiAgICAgICAgdGV4dEJpbmRpbmdJbnRlcm5hbChsVmlldywgZ2V0U2VsZWN0ZWRJbmRleCgpLCBpbnRlcnBvbGF0ZWQpO1xuICAgIH1cbiAgICByZXR1cm4gybXJtXRleHRJbnRlcnBvbGF0ZTY7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgdGV4dCBjb250ZW50IHdpdGggNyBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSBvdGhlciB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiBhIHRleHQgbm9kZSBoYXMgNyBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXY+cHJlZml4e3t2MH19LXt7djF9fS17e3YyfX0te3t2M319LXt7djR9fS17e3Y1fX0te3t2Nn19c3VmZml4PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6XG4gKlxuICogYGBgdHNcbiAqIMm1ybV0ZXh0SW50ZXJwb2xhdGU3KFxuICogICAgJ3ByZWZpeCcsIHYwLCAnLScsIHYxLCAnLScsIHYyLCAnLScsIHYzLCAnLScsIHY0LCAnLScsIHY1LCAnLScsIHY2LCAnc3VmZml4Jyk7XG4gKiBgYGBcbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBzZWUgdGV4dEludGVycG9sYXRlVlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXRleHRJbnRlcnBvbGF0ZTcocHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBpNCwgdjUsIGk1LCB2Niwgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZCA9IGludGVycG9sYXRpb243KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBzdWZmaXgpO1xuICAgIGlmIChpbnRlcnBvbGF0ZWQgIT09IE5PX0NIQU5HRSkge1xuICAgICAgICB0ZXh0QmluZGluZ0ludGVybmFsKGxWaWV3LCBnZXRTZWxlY3RlZEluZGV4KCksIGludGVycG9sYXRlZCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1dGV4dEludGVycG9sYXRlNztcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSB0ZXh0IGNvbnRlbnQgd2l0aCA4IGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IG90aGVyIHRleHQuXG4gKlxuICogVXNlZCB3aGVuIGEgdGV4dCBub2RlIGhhcyA4IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdj5wcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19LXt7djV9fS17e3Y2fX0te3t2N319c3VmZml4PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6XG4gKlxuICogYGBgdHNcbiAqIMm1ybV0ZXh0SW50ZXJwb2xhdGU4KFxuICogICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJy0nLCB2NiwgJy0nLCB2NywgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAc2VlIHRleHRJbnRlcnBvbGF0ZVZcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybV0ZXh0SW50ZXJwb2xhdGU4KHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgaTQsIHY1LCBpNSwgdjYsIGk2LCB2Nywgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZCA9IGludGVycG9sYXRpb244KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBpNiwgdjcsIHN1ZmZpeCk7XG4gICAgaWYgKGludGVycG9sYXRlZCAhPT0gTk9fQ0hBTkdFKSB7XG4gICAgICAgIHRleHRCaW5kaW5nSW50ZXJuYWwobFZpZXcsIGdldFNlbGVjdGVkSW5kZXgoKSwgaW50ZXJwb2xhdGVkKTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybV0ZXh0SW50ZXJwb2xhdGU4O1xufVxuLyoqXG4gKiBVcGRhdGUgdGV4dCBjb250ZW50IHdpdGggOSBvciBtb3JlIGJvdW5kIHZhbHVlcyBvdGhlciBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSBudW1iZXIgb2YgaW50ZXJwb2xhdGVkIHZhbHVlcyBleGNlZWRzIDguXG4gKlxuICogYGBgaHRtbFxuICogPGRpdj5wcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19LXt7djV9fS17e3Y2fX0te3t2N319LXt7djh9fS17e3Y5fX1zdWZmaXg8L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXRleHRJbnRlcnBvbGF0ZVYoXG4gKiAgWydwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJy0nLCB2NiwgJy0nLCB2NywgJy0nLCB2OSxcbiAqICAnc3VmZml4J10pO1xuICogYGBgXG4gKi5cbiAqIEBwYXJhbSB2YWx1ZXMgVGhlIGNvbGxlY3Rpb24gb2YgdmFsdWVzIGFuZCB0aGUgc3RyaW5ncyBpbiBiZXR3ZWVuIHRob3NlIHZhbHVlcywgYmVnaW5uaW5nIHdpdGhcbiAqIGEgc3RyaW5nIHByZWZpeCBhbmQgZW5kaW5nIHdpdGggYSBzdHJpbmcgc3VmZml4LlxuICogKGUuZy4gYFsncHJlZml4JywgdmFsdWUwLCAnLScsIHZhbHVlMSwgJy0nLCB2YWx1ZTIsIC4uLiwgdmFsdWU5OSwgJ3N1ZmZpeCddYClcbiAqXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1dGV4dEludGVycG9sYXRlVih2YWx1ZXMpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkID0gaW50ZXJwb2xhdGlvblYobFZpZXcsIHZhbHVlcyk7XG4gICAgaWYgKGludGVycG9sYXRlZCAhPT0gTk9fQ0hBTkdFKSB7XG4gICAgICAgIHRleHRCaW5kaW5nSW50ZXJuYWwobFZpZXcsIGdldFNlbGVjdGVkSW5kZXgoKSwgaW50ZXJwb2xhdGVkKTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybV0ZXh0SW50ZXJwb2xhdGVWO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgY2xhc3Mgb24gYW4gZWxlbWVudCB3aXRoIHNpbmdsZSBib3VuZCB2YWx1ZSBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgMSBpbnRlcnBvbGF0ZWQgdmFsdWUgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBjbGFzcz1cInByZWZpeHt7djB9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTEoJ3ByZWZpeCcsIHYwLCAnc3VmZml4Jyk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gcHJlZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWNsYXNzTWFwSW50ZXJwb2xhdGUxKHByZWZpeCwgdjAsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb24xKGxWaWV3LCBwcmVmaXgsIHYwLCBzdWZmaXgpO1xuICAgIGNoZWNrU3R5bGluZ01hcChrZXlWYWx1ZUFycmF5U2V0LCBjbGFzc1N0cmluZ1BhcnNlciwgaW50ZXJwb2xhdGVkVmFsdWUsIHRydWUpO1xufVxuLyoqXG4gKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBjbGFzcyBvbiBhbiBlbGVtZW50IHdpdGggMiBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDIgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGNsYXNzPVwicHJlZml4e3t2MH19LXt7djF9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTIoJ3ByZWZpeCcsIHYwLCAnLScsIHYxLCAnc3VmZml4Jyk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gcHJlZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkwIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjEgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWNsYXNzTWFwSW50ZXJwb2xhdGUyKHByZWZpeCwgdjAsIGkwLCB2MSwgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjIobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgc3VmZml4KTtcbiAgICBjaGVja1N0eWxpbmdNYXAoa2V5VmFsdWVBcnJheVNldCwgY2xhc3NTdHJpbmdQYXJzZXIsIGludGVycG9sYXRlZFZhbHVlLCB0cnVlKTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgY2xhc3Mgb24gYW4gZWxlbWVudCB3aXRoIDMgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyAzIGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBjbGFzcz1cInByZWZpeHt7djB9fS17e3YxfX0te3t2Mn19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6XG4gKlxuICogYGBgdHNcbiAqIMm1ybVjbGFzc01hcEludGVycG9sYXRlMyhcbiAqICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVjbGFzc01hcEludGVycG9sYXRlMyhwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2Miwgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjMobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBzdWZmaXgpO1xuICAgIGNoZWNrU3R5bGluZ01hcChrZXlWYWx1ZUFycmF5U2V0LCBjbGFzc1N0cmluZ1BhcnNlciwgaW50ZXJwb2xhdGVkVmFsdWUsIHRydWUpO1xufVxuLyoqXG4gKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBjbGFzcyBvbiBhbiBlbGVtZW50IHdpdGggNCBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDQgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGNsYXNzPVwicHJlZml4e3t2MH19LXt7djF9fS17e3YyfX0te3t2M319c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6XG4gKlxuICogYGBgdHNcbiAqIMm1ybVjbGFzc01hcEludGVycG9sYXRlNChcbiAqICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVjbGFzc01hcEludGVycG9sYXRlNChwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBzdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uNChsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2Mywgc3VmZml4KTtcbiAgICBjaGVja1N0eWxpbmdNYXAoa2V5VmFsdWVBcnJheVNldCwgY2xhc3NTdHJpbmdQYXJzZXIsIGludGVycG9sYXRlZFZhbHVlLCB0cnVlKTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgY2xhc3Mgb24gYW4gZWxlbWVudCB3aXRoIDUgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyA1IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBjbGFzcz1cInByZWZpeHt7djB9fS17e3YxfX0te3t2Mn19LXt7djN9fS17e3Y0fX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtWNsYXNzTWFwSW50ZXJwb2xhdGU1KFxuICogJ3ByZWZpeCcsIHYwLCAnLScsIHYxLCAnLScsIHYyLCAnLScsIHYzLCAnLScsIHY0LCAnc3VmZml4Jyk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gcHJlZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjAgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkwIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjEgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkxIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjIgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkyIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjMgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIGkzIFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdjQgVmFsdWUgY2hlY2tlZCBmb3IgY2hhbmdlLlxuICogQHBhcmFtIHN1ZmZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWNsYXNzTWFwSW50ZXJwb2xhdGU1KHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjUobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgc3VmZml4KTtcbiAgICBjaGVja1N0eWxpbmdNYXAoa2V5VmFsdWVBcnJheVNldCwgY2xhc3NTdHJpbmdQYXJzZXIsIGludGVycG9sYXRlZFZhbHVlLCB0cnVlKTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgY2xhc3Mgb24gYW4gZWxlbWVudCB3aXRoIDYgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyA2IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBjbGFzcz1cInByZWZpeHt7djB9fS17e3YxfX0te3t2Mn19LXt7djN9fS17e3Y0fX0te3t2NX19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6XG4gKlxuICogYGBgdHNcbiAqIMm1ybVjbGFzc01hcEludGVycG9sYXRlNihcbiAqICAgICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMyBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY0IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY1IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVjbGFzc01hcEludGVycG9sYXRlNihwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjYobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgaTQsIHY1LCBzdWZmaXgpO1xuICAgIGNoZWNrU3R5bGluZ01hcChrZXlWYWx1ZUFycmF5U2V0LCBjbGFzc1N0cmluZ1BhcnNlciwgaW50ZXJwb2xhdGVkVmFsdWUsIHRydWUpO1xufVxuLyoqXG4gKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBjbGFzcyBvbiBhbiBlbGVtZW50IHdpdGggNyBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDcgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IGNsYXNzPVwicHJlZml4e3t2MH19LXt7djF9fS17e3YyfX0te3t2M319LXt7djR9fS17e3Y1fX0te3t2Nn19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6XG4gKlxuICogYGBgdHNcbiAqIMm1ybVjbGFzc01hcEludGVycG9sYXRlNyhcbiAqICAgICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJy0nLCB2NiwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMyBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY0IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY1IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY2IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVjbGFzc01hcEludGVycG9sYXRlNyhwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBzdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uNyhsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBpNCwgdjUsIGk1LCB2Niwgc3VmZml4KTtcbiAgICBjaGVja1N0eWxpbmdNYXAoa2V5VmFsdWVBcnJheVNldCwgY2xhc3NTdHJpbmdQYXJzZXIsIGludGVycG9sYXRlZFZhbHVlLCB0cnVlKTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgY2xhc3Mgb24gYW4gZWxlbWVudCB3aXRoIDggYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyA4IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBjbGFzcz1cInByZWZpeHt7djB9fS17e3YxfX0te3t2Mn19LXt7djN9fS17e3Y0fX0te3t2NX19LXt7djZ9fS17e3Y3fX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtWNsYXNzTWFwSW50ZXJwb2xhdGU4KFxuICogICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJy0nLCB2NiwgJy0nLCB2NywgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMyBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY0IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY1IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY2IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY3IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVjbGFzc01hcEludGVycG9sYXRlOChwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBpNiwgdjcsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb244KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBpNiwgdjcsIHN1ZmZpeCk7XG4gICAgY2hlY2tTdHlsaW5nTWFwKGtleVZhbHVlQXJyYXlTZXQsIGNsYXNzU3RyaW5nUGFyc2VyLCBpbnRlcnBvbGF0ZWRWYWx1ZSwgdHJ1ZSk7XG59XG4vKipcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgY2xhc3Mgb24gYW4gZWxlbWVudCB3aXRoIDkgb3IgbW9yZSBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgbnVtYmVyIG9mIGludGVycG9sYXRlZCB2YWx1ZXMgZXhjZWVkcyA4LlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXZcbiAqICBjbGFzcz1cInByZWZpeHt7djB9fS17e3YxfX0te3t2Mn19LXt7djN9fS17e3Y0fX0te3t2NX19LXt7djZ9fS17e3Y3fX0te3t2OH19LXt7djl9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZVYoXG4gKiAgWydwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJy0nLCB2NiwgJy0nLCB2NywgJy0nLCB2OSxcbiAqICAnc3VmZml4J10pO1xuICogYGBgXG4gKi5cbiAqIEBwYXJhbSB2YWx1ZXMgVGhlIGNvbGxlY3Rpb24gb2YgdmFsdWVzIGFuZCB0aGUgc3RyaW5ncyBpbi1iZXR3ZWVuIHRob3NlIHZhbHVlcywgYmVnaW5uaW5nIHdpdGhcbiAqIGEgc3RyaW5nIHByZWZpeCBhbmQgZW5kaW5nIHdpdGggYSBzdHJpbmcgc3VmZml4LlxuICogKGUuZy4gYFsncHJlZml4JywgdmFsdWUwLCAnLScsIHZhbHVlMSwgJy0nLCB2YWx1ZTIsIC4uLiwgdmFsdWU5OSwgJ3N1ZmZpeCddYClcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVjbGFzc01hcEludGVycG9sYXRlVih2YWx1ZXMpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uVihsVmlldywgdmFsdWVzKTtcbiAgICBjaGVja1N0eWxpbmdNYXAoa2V5VmFsdWVBcnJheVNldCwgY2xhc3NTdHJpbmdQYXJzZXIsIGludGVycG9sYXRlZFZhbHVlLCB0cnVlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIHN0eWxlIG9uIGFuIGVsZW1lbnQgd2l0aCBzaW5nbGUgYm91bmQgdmFsdWUgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDEgaW50ZXJwb2xhdGVkIHZhbHVlIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgc3R5bGU9XCJrZXk6IHt7djB9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTEoJ2tleTogJywgdjAsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTEocHJlZml4LCB2MCwgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjEobFZpZXcsIHByZWZpeCwgdjAsIHN1ZmZpeCk7XG4gICAgybXJtXN0eWxlTWFwKGludGVycG9sYXRlZFZhbHVlKTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgc3R5bGUgb24gYW4gZWxlbWVudCB3aXRoIDIgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyAyIGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBzdHlsZT1cImtleToge3t2MH19OyBrZXkxOiB7e3YxfX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlTWFwSW50ZXJwb2xhdGUyKCdrZXk6ICcsIHYwLCAnOyBrZXkxOiAnLCB2MSwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzdHlsZU1hcEludGVycG9sYXRlMihwcmVmaXgsIHYwLCBpMCwgdjEsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb24yKGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIHN1ZmZpeCk7XG4gICAgybXJtXN0eWxlTWFwKGludGVycG9sYXRlZFZhbHVlKTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgc3R5bGUgb24gYW4gZWxlbWVudCB3aXRoIDMgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyAzIGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBzdHlsZT1cImtleToge3t2MH19OyBrZXkyOiB7e3YxfX07IGtleTI6IHt7djJ9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTMoXG4gKiAgICAgJ2tleTogJywgdjAsICc7IGtleTE6ICcsIHYxLCAnOyBrZXkyOiAnLCB2MiwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzdHlsZU1hcEludGVycG9sYXRlMyhwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2Miwgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjMobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBzdWZmaXgpO1xuICAgIMm1ybVzdHlsZU1hcChpbnRlcnBvbGF0ZWRWYWx1ZSk7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIHN0eWxlIG9uIGFuIGVsZW1lbnQgd2l0aCA0IGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgNCBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgc3R5bGU9XCJrZXk6IHt7djB9fTsga2V5MToge3t2MX19OyBrZXkyOiB7e3YyfX07IGtleTM6IHt7djN9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTQoXG4gKiAgICAgJ2tleTogJywgdjAsICc7IGtleTE6ICcsIHYxLCAnOyBrZXkyOiAnLCB2MiwgJzsga2V5MzogJywgdjMsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTQocHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2Mywgc3VmZml4KSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvbjQobFZpZXcsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIHN1ZmZpeCk7XG4gICAgybXJtXN0eWxlTWFwKGludGVycG9sYXRlZFZhbHVlKTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgc3R5bGUgb24gYW4gZWxlbWVudCB3aXRoIDUgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyA1IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBzdHlsZT1cImtleToge3t2MH19OyBrZXkxOiB7e3YxfX07IGtleTI6IHt7djJ9fTsga2V5Mzoge3t2M319OyBrZXk0OiB7e3Y0fX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlTWFwSW50ZXJwb2xhdGU1KFxuICogICAgICdrZXk6ICcsIHYwLCAnOyBrZXkxOiAnLCB2MSwgJzsga2V5MjogJywgdjIsICc7IGtleTM6ICcsIHYzLCAnOyBrZXk0OiAnLCB2NCwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMyBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY0IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzdHlsZU1hcEludGVycG9sYXRlNShwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb241KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIHN1ZmZpeCk7XG4gICAgybXJtXN0eWxlTWFwKGludGVycG9sYXRlZFZhbHVlKTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgc3R5bGUgb24gYW4gZWxlbWVudCB3aXRoIDYgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyA2IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBzdHlsZT1cImtleToge3t2MH19OyBrZXkxOiB7e3YxfX07IGtleTI6IHt7djJ9fTsga2V5Mzoge3t2M319OyBrZXk0OiB7e3Y0fX07XG4gKiAgICAgICAgICAgICBrZXk1OiB7e3Y1fX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlTWFwSW50ZXJwb2xhdGU2KFxuICogICAgJ2tleTogJywgdjAsICc7IGtleTE6ICcsIHYxLCAnOyBrZXkyOiAnLCB2MiwgJzsga2V5MzogJywgdjMsICc7IGtleTQ6ICcsIHY0LCAnOyBrZXk1OiAnLCB2NSxcbiAqICAgICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTMgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTQgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTYocHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBpNCwgdjUsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb242KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgc3VmZml4KTtcbiAgICDJtcm1c3R5bGVNYXAoaW50ZXJwb2xhdGVkVmFsdWUpO1xufVxuLyoqXG4gKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBzdHlsZSBvbiBhbiBlbGVtZW50IHdpdGggNyBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDcgaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IHN0eWxlPVwia2V5OiB7e3YwfX07IGtleTE6IHt7djF9fTsga2V5Mjoge3t2Mn19OyBrZXkzOiB7e3YzfX07IGtleTQ6IHt7djR9fTsga2V5NToge3t2NX19O1xuICogICAgICAgICAgICAga2V5Njoge3t2Nn19c3VmZml4XCI+PC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBJdHMgY29tcGlsZWQgcmVwcmVzZW50YXRpb24gaXM6XG4gKlxuICogYGBgdHNcbiAqIMm1ybVzdHlsZU1hcEludGVycG9sYXRlNyhcbiAqICAgICdrZXk6ICcsIHYwLCAnOyBrZXkxOiAnLCB2MSwgJzsga2V5MjogJywgdjIsICc7IGtleTM6ICcsIHYzLCAnOyBrZXk0OiAnLCB2NCwgJzsga2V5NTogJywgdjUsXG4gKiAgICAnOyBrZXk2OiAnLCB2NiwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMyBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY0IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY1IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY2IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzdHlsZU1hcEludGVycG9sYXRlNyhwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBzdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uNyhsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBpNCwgdjUsIGk1LCB2Niwgc3VmZml4KTtcbiAgICDJtcm1c3R5bGVNYXAoaW50ZXJwb2xhdGVkVmFsdWUpO1xufVxuLyoqXG4gKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBzdHlsZSBvbiBhbiBlbGVtZW50IHdpdGggOCBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDggaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IHN0eWxlPVwia2V5OiB7e3YwfX07IGtleTE6IHt7djF9fTsga2V5Mjoge3t2Mn19OyBrZXkzOiB7e3YzfX07IGtleTQ6IHt7djR9fTsga2V5NToge3t2NX19O1xuICogICAgICAgICAgICAga2V5Njoge3t2Nn19OyBrZXk3OiB7e3Y3fX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlTWFwSW50ZXJwb2xhdGU4KFxuICogICAgJ2tleTogJywgdjAsICc7IGtleTE6ICcsIHYxLCAnOyBrZXkyOiAnLCB2MiwgJzsga2V5MzogJywgdjMsICc7IGtleTQ6ICcsIHY0LCAnOyBrZXk1OiAnLCB2NSxcbiAqICAgICc7IGtleTY6ICcsIHY2LCAnOyBrZXk3OiAnLCB2NywgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMyBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY0IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY1IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY2IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY3IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzdHlsZU1hcEludGVycG9sYXRlOChwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBpNiwgdjcsIHN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb244KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBpNiwgdjcsIHN1ZmZpeCk7XG4gICAgybXJtXN0eWxlTWFwKGludGVycG9sYXRlZFZhbHVlKTtcbn1cbi8qKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBzdHlsZSBvbiBhbiBlbGVtZW50IHdpdGggOSBvciBtb3JlIGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSBudW1iZXIgb2YgaW50ZXJwb2xhdGVkIHZhbHVlcyBleGNlZWRzIDguXG4gKlxuICogYGBgaHRtbFxuICogPGRpdlxuICogIGNsYXNzPVwia2V5OiB7e3YwfX07IGtleTE6IHt7djF9fTsga2V5Mjoge3t2Mn19OyBrZXkzOiB7e3YzfX07IGtleTQ6IHt7djR9fTsga2V5NToge3t2NX19O1xuICogICAgICAgICBrZXk2OiB7e3Y2fX07IGtleTc6IHt7djd9fTsga2V5ODoge3t2OH19OyBrZXk5OiB7e3Y5fX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlTWFwSW50ZXJwb2xhdGVWKFxuICogICAgWydrZXk6ICcsIHYwLCAnOyBrZXkxOiAnLCB2MSwgJzsga2V5MjogJywgdjIsICc7IGtleTM6ICcsIHYzLCAnOyBrZXk0OiAnLCB2NCwgJzsga2V5NTogJywgdjUsXG4gKiAgICAgJzsga2V5NjogJywgdjYsICc7IGtleTc6ICcsIHY3LCAnOyBrZXk4OiAnLCB2OCwgJzsga2V5OTogJywgdjksICdzdWZmaXgnXSk7XG4gKiBgYGBcbiAqLlxuICogQHBhcmFtIHZhbHVlcyBUaGUgY29sbGVjdGlvbiBvZiB2YWx1ZXMgYW5kIHRoZSBzdHJpbmdzIGluLWJldHdlZW4gdGhvc2UgdmFsdWVzLCBiZWdpbm5pbmcgd2l0aFxuICogYSBzdHJpbmcgcHJlZml4IGFuZCBlbmRpbmcgd2l0aCBhIHN0cmluZyBzdWZmaXguXG4gKiAoZS5nLiBgWydwcmVmaXgnLCB2YWx1ZTAsICc7IGtleTI6ICcsIHZhbHVlMSwgJzsga2V5MjogJywgdmFsdWUyLCAuLi4sIHZhbHVlOTksICdzdWZmaXgnXWApXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZVYodmFsdWVzKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGludGVycG9sYXRlZFZhbHVlID0gaW50ZXJwb2xhdGlvblYobFZpZXcsIHZhbHVlcyk7XG4gICAgybXJtXN0eWxlTWFwKGludGVycG9sYXRlZFZhbHVlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIHN0eWxlIHByb3BlcnR5IG9uIGFuIGVsZW1lbnQgd2l0aCBzaW5nbGUgYm91bmQgdmFsdWUgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDEgaW50ZXJwb2xhdGVkIHZhbHVlIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgc3R5bGUuY29sb3I9XCJwcmVmaXh7e3YwfX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlUHJvcEludGVycG9sYXRlMSgwLCAncHJlZml4JywgdjAsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBzdHlsZUluZGV4IEluZGV4IG9mIHN0eWxlIHRvIHVwZGF0ZS4gVGhpcyBpbmRleCB2YWx1ZSByZWZlcnMgdG8gdGhlXG4gKiAgICAgICAgaW5kZXggb2YgdGhlIHN0eWxlIGluIHRoZSBzdHlsZSBiaW5kaW5ncyBhcnJheSB0aGF0IHdhcyBwYXNzZWQgaW50b1xuICogICAgICAgIGBzdHlsaW5nYC5cbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdmFsdWVTdWZmaXggT3B0aW9uYWwgc3VmZml4LiBVc2VkIHdpdGggc2NhbGFyIHZhbHVlcyB0byBhZGQgdW5pdCBzdWNoIGFzIGBweGAuXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGUxKHByb3AsIHByZWZpeCwgdjAsIHN1ZmZpeCwgdmFsdWVTdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uMShsVmlldywgcHJlZml4LCB2MCwgc3VmZml4KTtcbiAgICBjaGVja1N0eWxpbmdQcm9wZXJ0eShwcm9wLCBpbnRlcnBvbGF0ZWRWYWx1ZSwgdmFsdWVTdWZmaXgsIGZhbHNlKTtcbiAgICByZXR1cm4gybXJtXN0eWxlUHJvcEludGVycG9sYXRlMTtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgc3R5bGUgcHJvcGVydHkgb24gYW4gZWxlbWVudCB3aXRoIDIgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyAyIGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBzdHlsZS5jb2xvcj1cInByZWZpeHt7djB9fS17e3YxfX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlUHJvcEludGVycG9sYXRlMigwLCAncHJlZml4JywgdjAsICctJywgdjEsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBzdHlsZUluZGV4IEluZGV4IG9mIHN0eWxlIHRvIHVwZGF0ZS4gVGhpcyBpbmRleCB2YWx1ZSByZWZlcnMgdG8gdGhlXG4gKiAgICAgICAgaW5kZXggb2YgdGhlIHN0eWxlIGluIHRoZSBzdHlsZSBiaW5kaW5ncyBhcnJheSB0aGF0IHdhcyBwYXNzZWQgaW50b1xuICogICAgICAgIGBzdHlsaW5nYC5cbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdmFsdWVTdWZmaXggT3B0aW9uYWwgc3VmZml4LiBVc2VkIHdpdGggc2NhbGFyIHZhbHVlcyB0byBhZGQgdW5pdCBzdWNoIGFzIGBweGAuXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGUyKHByb3AsIHByZWZpeCwgdjAsIGkwLCB2MSwgc3VmZml4LCB2YWx1ZVN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb24yKGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIHN1ZmZpeCk7XG4gICAgY2hlY2tTdHlsaW5nUHJvcGVydHkocHJvcCwgaW50ZXJwb2xhdGVkVmFsdWUsIHZhbHVlU3VmZml4LCBmYWxzZSk7XG4gICAgcmV0dXJuIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTI7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIHN0eWxlIHByb3BlcnR5IG9uIGFuIGVsZW1lbnQgd2l0aCAzIGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgMyBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgc3R5bGUuY29sb3I9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGUzKDAsICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHN0eWxlSW5kZXggSW5kZXggb2Ygc3R5bGUgdG8gdXBkYXRlLiBUaGlzIGluZGV4IHZhbHVlIHJlZmVycyB0byB0aGVcbiAqICAgICAgICBpbmRleCBvZiB0aGUgc3R5bGUgaW4gdGhlIHN0eWxlIGJpbmRpbmdzIGFycmF5IHRoYXQgd2FzIHBhc3NlZCBpbnRvXG4gKiAgICAgICAgYHN0eWxpbmdgLlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2YWx1ZVN1ZmZpeCBPcHRpb25hbCBzdWZmaXguIFVzZWQgd2l0aCBzY2FsYXIgdmFsdWVzIHRvIGFkZCB1bml0IHN1Y2ggYXMgYHB4YC5cbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTMocHJvcCwgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIHN1ZmZpeCwgdmFsdWVTdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uMyhsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIHN1ZmZpeCk7XG4gICAgY2hlY2tTdHlsaW5nUHJvcGVydHkocHJvcCwgaW50ZXJwb2xhdGVkVmFsdWUsIHZhbHVlU3VmZml4LCBmYWxzZSk7XG4gICAgcmV0dXJuIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTM7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIHN0eWxlIHByb3BlcnR5IG9uIGFuIGVsZW1lbnQgd2l0aCA0IGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgNCBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgc3R5bGUuY29sb3I9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlUHJvcEludGVycG9sYXRlNCgwLCAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBzdHlsZUluZGV4IEluZGV4IG9mIHN0eWxlIHRvIHVwZGF0ZS4gVGhpcyBpbmRleCB2YWx1ZSByZWZlcnMgdG8gdGhlXG4gKiAgICAgICAgaW5kZXggb2YgdGhlIHN0eWxlIGluIHRoZSBzdHlsZSBiaW5kaW5ncyBhcnJheSB0aGF0IHdhcyBwYXNzZWQgaW50b1xuICogICAgICAgIGBzdHlsaW5nYC5cbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdmFsdWVTdWZmaXggT3B0aW9uYWwgc3VmZml4LiBVc2VkIHdpdGggc2NhbGFyIHZhbHVlcyB0byBhZGQgdW5pdCBzdWNoIGFzIGBweGAuXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGU0KHByb3AsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIHN1ZmZpeCwgdmFsdWVTdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uNChsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2Mywgc3VmZml4KTtcbiAgICBjaGVja1N0eWxpbmdQcm9wZXJ0eShwcm9wLCBpbnRlcnBvbGF0ZWRWYWx1ZSwgdmFsdWVTdWZmaXgsIGZhbHNlKTtcbiAgICByZXR1cm4gybXJtXN0eWxlUHJvcEludGVycG9sYXRlNDtcbn1cbi8qKlxuICpcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgc3R5bGUgcHJvcGVydHkgb24gYW4gZWxlbWVudCB3aXRoIDUgYm91bmQgdmFsdWVzIHN1cnJvdW5kZWQgYnkgdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIHZhbHVlIHBhc3NlZCB0byBhIHByb3BlcnR5IGhhcyA1IGludGVycG9sYXRlZCB2YWx1ZXMgaW4gaXQ6XG4gKlxuICogYGBgaHRtbFxuICogPGRpdiBzdHlsZS5jb2xvcj1cInByZWZpeHt7djB9fS17e3YxfX0te3t2Mn19LXt7djN9fS17e3Y0fX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlUHJvcEludGVycG9sYXRlNSgwLCAncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICctJywgdjQsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBzdHlsZUluZGV4IEluZGV4IG9mIHN0eWxlIHRvIHVwZGF0ZS4gVGhpcyBpbmRleCB2YWx1ZSByZWZlcnMgdG8gdGhlXG4gKiAgICAgICAgaW5kZXggb2YgdGhlIHN0eWxlIGluIHRoZSBzdHlsZSBiaW5kaW5ncyBhcnJheSB0aGF0IHdhcyBwYXNzZWQgaW50b1xuICogICAgICAgIGBzdHlsaW5nYC5cbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTMgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdmFsdWVTdWZmaXggT3B0aW9uYWwgc3VmZml4LiBVc2VkIHdpdGggc2NhbGFyIHZhbHVlcyB0byBhZGQgdW5pdCBzdWNoIGFzIGBweGAuXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGU1KHByb3AsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgc3VmZml4LCB2YWx1ZVN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb241KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIHN1ZmZpeCk7XG4gICAgY2hlY2tTdHlsaW5nUHJvcGVydHkocHJvcCwgaW50ZXJwb2xhdGVkVmFsdWUsIHZhbHVlU3VmZml4LCBmYWxzZSk7XG4gICAgcmV0dXJuIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTU7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIHN0eWxlIHByb3BlcnR5IG9uIGFuIGVsZW1lbnQgd2l0aCA2IGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgNiBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgc3R5bGUuY29sb3I9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19LXt7djV9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGU2KDAsICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHN0eWxlSW5kZXggSW5kZXggb2Ygc3R5bGUgdG8gdXBkYXRlLiBUaGlzIGluZGV4IHZhbHVlIHJlZmVycyB0byB0aGVcbiAqICAgICAgICBpbmRleCBvZiB0aGUgc3R5bGUgaW4gdGhlIHN0eWxlIGJpbmRpbmdzIGFycmF5IHRoYXQgd2FzIHBhc3NlZCBpbnRvXG4gKiAgICAgICAgYHN0eWxpbmdgLlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMyBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY0IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY1IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2YWx1ZVN1ZmZpeCBPcHRpb25hbCBzdWZmaXguIFVzZWQgd2l0aCBzY2FsYXIgdmFsdWVzIHRvIGFkZCB1bml0IHN1Y2ggYXMgYHB4YC5cbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTYocHJvcCwgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBpNCwgdjUsIHN1ZmZpeCwgdmFsdWVTdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uNihsVmlldywgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBpNCwgdjUsIHN1ZmZpeCk7XG4gICAgY2hlY2tTdHlsaW5nUHJvcGVydHkocHJvcCwgaW50ZXJwb2xhdGVkVmFsdWUsIHZhbHVlU3VmZml4LCBmYWxzZSk7XG4gICAgcmV0dXJuIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTY7XG59XG4vKipcbiAqXG4gKiBVcGRhdGUgYW4gaW50ZXJwb2xhdGVkIHN0eWxlIHByb3BlcnR5IG9uIGFuIGVsZW1lbnQgd2l0aCA3IGJvdW5kIHZhbHVlcyBzdXJyb3VuZGVkIGJ5IHRleHQuXG4gKlxuICogVXNlZCB3aGVuIHRoZSB2YWx1ZSBwYXNzZWQgdG8gYSBwcm9wZXJ0eSBoYXMgNyBpbnRlcnBvbGF0ZWQgdmFsdWVzIGluIGl0OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxkaXYgc3R5bGUuY29sb3I9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19LXt7djV9fS17e3Y2fX1zdWZmaXhcIj48L2Rpdj5cbiAqIGBgYFxuICpcbiAqIEl0cyBjb21waWxlZCByZXByZXNlbnRhdGlvbiBpczpcbiAqXG4gKiBgYGB0c1xuICogybXJtXN0eWxlUHJvcEludGVycG9sYXRlNyhcbiAqICAgIDAsICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJy0nLCB2NiwgJ3N1ZmZpeCcpO1xuICogYGBgXG4gKlxuICogQHBhcmFtIHN0eWxlSW5kZXggSW5kZXggb2Ygc3R5bGUgdG8gdXBkYXRlLiBUaGlzIGluZGV4IHZhbHVlIHJlZmVycyB0byB0aGVcbiAqICAgICAgICBpbmRleCBvZiB0aGUgc3R5bGUgaW4gdGhlIHN0eWxlIGJpbmRpbmdzIGFycmF5IHRoYXQgd2FzIHBhc3NlZCBpbnRvXG4gKiAgICAgICAgYHN0eWxpbmdgLlxuICogQHBhcmFtIHByZWZpeCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYwIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYxIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYyIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMiBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHYzIFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpMyBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY0IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNCBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY1IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBpNSBTdGF0aWMgdmFsdWUgdXNlZCBmb3IgY29uY2F0ZW5hdGlvbiBvbmx5LlxuICogQHBhcmFtIHY2IFZhbHVlIGNoZWNrZWQgZm9yIGNoYW5nZS5cbiAqIEBwYXJhbSBzdWZmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2YWx1ZVN1ZmZpeCBPcHRpb25hbCBzdWZmaXguIFVzZWQgd2l0aCBzY2FsYXIgdmFsdWVzIHRvIGFkZCB1bml0IHN1Y2ggYXMgYHB4YC5cbiAqIEByZXR1cm5zIGl0c2VsZiwgc28gdGhhdCBpdCBtYXkgYmUgY2hhaW5lZC5cbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTcocHJvcCwgcHJlZml4LCB2MCwgaTAsIHYxLCBpMSwgdjIsIGkyLCB2MywgaTMsIHY0LCBpNCwgdjUsIGk1LCB2Niwgc3VmZml4LCB2YWx1ZVN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb243KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBzdWZmaXgpO1xuICAgIGNoZWNrU3R5bGluZ1Byb3BlcnR5KHByb3AsIGludGVycG9sYXRlZFZhbHVlLCB2YWx1ZVN1ZmZpeCwgZmFsc2UpO1xuICAgIHJldHVybiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGU3O1xufVxuLyoqXG4gKlxuICogVXBkYXRlIGFuIGludGVycG9sYXRlZCBzdHlsZSBwcm9wZXJ0eSBvbiBhbiBlbGVtZW50IHdpdGggOCBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieSB0ZXh0LlxuICpcbiAqIFVzZWQgd2hlbiB0aGUgdmFsdWUgcGFzc2VkIHRvIGEgcHJvcGVydHkgaGFzIDggaW50ZXJwb2xhdGVkIHZhbHVlcyBpbiBpdDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2IHN0eWxlLmNvbG9yPVwicHJlZml4e3t2MH19LXt7djF9fS17e3YyfX0te3t2M319LXt7djR9fS17e3Y1fX0te3t2Nn19LXt7djd9fXN1ZmZpeFwiPjwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGU4KDAsICdwcmVmaXgnLCB2MCwgJy0nLCB2MSwgJy0nLCB2MiwgJy0nLCB2MywgJy0nLCB2NCwgJy0nLCB2NSwgJy0nLCB2NixcbiAqICctJywgdjcsICdzdWZmaXgnKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBzdHlsZUluZGV4IEluZGV4IG9mIHN0eWxlIHRvIHVwZGF0ZS4gVGhpcyBpbmRleCB2YWx1ZSByZWZlcnMgdG8gdGhlXG4gKiAgICAgICAgaW5kZXggb2YgdGhlIHN0eWxlIGluIHRoZSBzdHlsZSBiaW5kaW5ncyBhcnJheSB0aGF0IHdhcyBwYXNzZWQgaW50b1xuICogICAgICAgIGBzdHlsaW5nYC5cbiAqIEBwYXJhbSBwcmVmaXggU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTAgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTEgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTIgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2MyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTMgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NCBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTQgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NSBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTUgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NiBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gaTYgU3RhdGljIHZhbHVlIHVzZWQgZm9yIGNvbmNhdGVuYXRpb24gb25seS5cbiAqIEBwYXJhbSB2NyBWYWx1ZSBjaGVja2VkIGZvciBjaGFuZ2UuXG4gKiBAcGFyYW0gc3VmZml4IFN0YXRpYyB2YWx1ZSB1c2VkIGZvciBjb25jYXRlbmF0aW9uIG9ubHkuXG4gKiBAcGFyYW0gdmFsdWVTdWZmaXggT3B0aW9uYWwgc3VmZml4LiBVc2VkIHdpdGggc2NhbGFyIHZhbHVlcyB0byBhZGQgdW5pdCBzdWNoIGFzIGBweGAuXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGU4KHByb3AsIHByZWZpeCwgdjAsIGkwLCB2MSwgaTEsIHYyLCBpMiwgdjMsIGkzLCB2NCwgaTQsIHY1LCBpNSwgdjYsIGk2LCB2Nywgc3VmZml4LCB2YWx1ZVN1ZmZpeCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBpbnRlcnBvbGF0ZWRWYWx1ZSA9IGludGVycG9sYXRpb244KGxWaWV3LCBwcmVmaXgsIHYwLCBpMCwgdjEsIGkxLCB2MiwgaTIsIHYzLCBpMywgdjQsIGk0LCB2NSwgaTUsIHY2LCBpNiwgdjcsIHN1ZmZpeCk7XG4gICAgY2hlY2tTdHlsaW5nUHJvcGVydHkocHJvcCwgaW50ZXJwb2xhdGVkVmFsdWUsIHZhbHVlU3VmZml4LCBmYWxzZSk7XG4gICAgcmV0dXJuIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTg7XG59XG4vKipcbiAqIFVwZGF0ZSBhbiBpbnRlcnBvbGF0ZWQgc3R5bGUgcHJvcGVydHkgb24gYW4gZWxlbWVudCB3aXRoIDkgb3IgbW9yZSBib3VuZCB2YWx1ZXMgc3Vycm91bmRlZCBieVxuICogdGV4dC5cbiAqXG4gKiBVc2VkIHdoZW4gdGhlIG51bWJlciBvZiBpbnRlcnBvbGF0ZWQgdmFsdWVzIGV4Y2VlZHMgOC5cbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2XG4gKiAgc3R5bGUuY29sb3I9XCJwcmVmaXh7e3YwfX0te3t2MX19LXt7djJ9fS17e3YzfX0te3t2NH19LXt7djV9fS17e3Y2fX0te3t2N319LXt7djh9fS17e3Y5fX1zdWZmaXhcIj5cbiAqIDwvZGl2PlxuICogYGBgXG4gKlxuICogSXRzIGNvbXBpbGVkIHJlcHJlc2VudGF0aW9uIGlzOlxuICpcbiAqIGBgYHRzXG4gKiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGVWKFxuICogIDAsIFsncHJlZml4JywgdjAsICctJywgdjEsICctJywgdjIsICctJywgdjMsICctJywgdjQsICctJywgdjUsICctJywgdjYsICctJywgdjcsICctJywgdjksXG4gKiAgJ3N1ZmZpeCddKTtcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBzdHlsZUluZGV4IEluZGV4IG9mIHN0eWxlIHRvIHVwZGF0ZS4gVGhpcyBpbmRleCB2YWx1ZSByZWZlcnMgdG8gdGhlXG4gKiAgICAgICAgaW5kZXggb2YgdGhlIHN0eWxlIGluIHRoZSBzdHlsZSBiaW5kaW5ncyBhcnJheSB0aGF0IHdhcyBwYXNzZWQgaW50b1xuICogICAgICAgIGBzdHlsaW5nYC4uXG4gKiBAcGFyYW0gdmFsdWVzIFRoZSBjb2xsZWN0aW9uIG9mIHZhbHVlcyBhbmQgdGhlIHN0cmluZ3MgaW4tYmV0d2VlbiB0aG9zZSB2YWx1ZXMsIGJlZ2lubmluZyB3aXRoXG4gKiBhIHN0cmluZyBwcmVmaXggYW5kIGVuZGluZyB3aXRoIGEgc3RyaW5nIHN1ZmZpeC5cbiAqIChlLmcuIGBbJ3ByZWZpeCcsIHZhbHVlMCwgJy0nLCB2YWx1ZTEsICctJywgdmFsdWUyLCAuLi4sIHZhbHVlOTksICdzdWZmaXgnXWApXG4gKiBAcGFyYW0gdmFsdWVTdWZmaXggT3B0aW9uYWwgc3VmZml4LiBVc2VkIHdpdGggc2NhbGFyIHZhbHVlcyB0byBhZGQgdW5pdCBzdWNoIGFzIGBweGAuXG4gKiBAcmV0dXJucyBpdHNlbGYsIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWQuXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGVWKHByb3AsIHZhbHVlcywgdmFsdWVTdWZmaXgpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgaW50ZXJwb2xhdGVkVmFsdWUgPSBpbnRlcnBvbGF0aW9uVihsVmlldywgdmFsdWVzKTtcbiAgICBjaGVja1N0eWxpbmdQcm9wZXJ0eShwcm9wLCBpbnRlcnBvbGF0ZWRWYWx1ZSwgdmFsdWVTdWZmaXgsIGZhbHNlKTtcbiAgICByZXR1cm4gybXJtXN0eWxlUHJvcEludGVycG9sYXRlVjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFVwZGF0ZSBhIHByb3BlcnR5IG9uIGEgaG9zdCBlbGVtZW50LiBPbmx5IGFwcGxpZXMgdG8gbmF0aXZlIG5vZGUgcHJvcGVydGllcywgbm90IGlucHV0cy5cbiAqXG4gKiBPcGVyYXRlcyBvbiB0aGUgZWxlbWVudCBzZWxlY3RlZCBieSBpbmRleCB2aWEgdGhlIHtAbGluayBzZWxlY3R9IGluc3RydWN0aW9uLlxuICpcbiAqIEBwYXJhbSBwcm9wTmFtZSBOYW1lIG9mIHByb3BlcnR5LiBCZWNhdXNlIGl0IGlzIGdvaW5nIHRvIERPTSwgdGhpcyBpcyBub3Qgc3ViamVjdCB0b1xuICogICAgICAgIHJlbmFtaW5nIGFzIHBhcnQgb2YgbWluaWZpY2F0aW9uLlxuICogQHBhcmFtIHZhbHVlIE5ldyB2YWx1ZSB0byB3cml0ZS5cbiAqIEBwYXJhbSBzYW5pdGl6ZXIgQW4gb3B0aW9uYWwgZnVuY3Rpb24gdXNlZCB0byBzYW5pdGl6ZSB0aGUgdmFsdWUuXG4gKiBAcmV0dXJucyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgaXRzZWxmIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWRcbiAqIChlLmcuIGBwcm9wZXJ0eSgnbmFtZScsIGN0eC5uYW1lKSgndGl0bGUnLCBjdHgudGl0bGUpYClcbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1aG9zdFByb3BlcnR5KHByb3BOYW1lLCB2YWx1ZSwgc2FuaXRpemVyKSB7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IG5leHRCaW5kaW5nSW5kZXgoKTtcbiAgICBpZiAoYmluZGluZ1VwZGF0ZWQobFZpZXcsIGJpbmRpbmdJbmRleCwgdmFsdWUpKSB7XG4gICAgICAgIGNvbnN0IHRWaWV3ID0gZ2V0VFZpZXcoKTtcbiAgICAgICAgY29uc3QgdE5vZGUgPSBnZXRTZWxlY3RlZFROb2RlKCk7XG4gICAgICAgIGVsZW1lbnRQcm9wZXJ0eUludGVybmFsKHRWaWV3LCB0Tm9kZSwgbFZpZXcsIHByb3BOYW1lLCB2YWx1ZSwgbFZpZXdbUkVOREVSRVJdLCBzYW5pdGl6ZXIsIHRydWUpO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgc3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YSh0Vmlldy5kYXRhLCB0Tm9kZSwgcHJvcE5hbWUsIGJpbmRpbmdJbmRleCk7XG4gICAgfVxuICAgIHJldHVybiDJtcm1aG9zdFByb3BlcnR5O1xufVxuLyoqXG4gKiBVcGRhdGVzIGEgc3ludGhldGljIGhvc3QgYmluZGluZyAoZS5nLiBgW0Bmb29dYCkgb24gYSBjb21wb25lbnQgb3IgZGlyZWN0aXZlLlxuICpcbiAqIFRoaXMgaW5zdHJ1Y3Rpb24gaXMgZm9yIGNvbXBhdGliaWxpdHkgcHVycG9zZXMgYW5kIGlzIGRlc2lnbmVkIHRvIGVuc3VyZSB0aGF0IGFcbiAqIHN5bnRoZXRpYyBob3N0IGJpbmRpbmcgKGUuZy4gYEBIb3N0QmluZGluZygnQGZvbycpYCkgcHJvcGVybHkgZ2V0cyByZW5kZXJlZCBpblxuICogdGhlIGNvbXBvbmVudCdzIHJlbmRlcmVyLiBOb3JtYWxseSBhbGwgaG9zdCBiaW5kaW5ncyBhcmUgZXZhbHVhdGVkIHdpdGggdGhlIHBhcmVudFxuICogY29tcG9uZW50J3MgcmVuZGVyZXIsIGJ1dCwgaW4gdGhlIGNhc2Ugb2YgYW5pbWF0aW9uIEB0cmlnZ2VycywgdGhleSBuZWVkIHRvIGJlXG4gKiBldmFsdWF0ZWQgd2l0aCB0aGUgc3ViIGNvbXBvbmVudCdzIHJlbmRlcmVyIChiZWNhdXNlIHRoYXQncyB3aGVyZSB0aGUgYW5pbWF0aW9uXG4gKiB0cmlnZ2VycyBhcmUgZGVmaW5lZCkuXG4gKlxuICogRG8gbm90IHVzZSB0aGlzIGluc3RydWN0aW9uIGFzIGEgcmVwbGFjZW1lbnQgZm9yIGBlbGVtZW50UHJvcGVydHlgLiBUaGlzIGluc3RydWN0aW9uXG4gKiBvbmx5IGV4aXN0cyB0byBlbnN1cmUgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBWaWV3RW5naW5lJ3MgaG9zdCBiaW5kaW5nIGJlaGF2aW9yLlxuICpcbiAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgdG8gdXBkYXRlIGluIHRoZSBkYXRhIGFycmF5XG4gKiBAcGFyYW0gcHJvcE5hbWUgTmFtZSBvZiBwcm9wZXJ0eS4gQmVjYXVzZSBpdCBpcyBnb2luZyB0byBET00sIHRoaXMgaXMgbm90IHN1YmplY3QgdG9cbiAqICAgICAgICByZW5hbWluZyBhcyBwYXJ0IG9mIG1pbmlmaWNhdGlvbi5cbiAqIEBwYXJhbSB2YWx1ZSBOZXcgdmFsdWUgdG8gd3JpdGUuXG4gKiBAcGFyYW0gc2FuaXRpemVyIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHVzZWQgdG8gc2FuaXRpemUgdGhlIHZhbHVlLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVzeW50aGV0aWNIb3N0UHJvcGVydHkocHJvcE5hbWUsIHZhbHVlLCBzYW5pdGl6ZXIpIHtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gbmV4dEJpbmRpbmdJbmRleCgpO1xuICAgIGlmIChiaW5kaW5nVXBkYXRlZChsVmlldywgYmluZGluZ0luZGV4LCB2YWx1ZSkpIHtcbiAgICAgICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldFNlbGVjdGVkVE5vZGUoKTtcbiAgICAgICAgY29uc3QgY3VycmVudERlZiA9IGdldEN1cnJlbnREaXJlY3RpdmVEZWYodFZpZXcuZGF0YSk7XG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gbG9hZENvbXBvbmVudFJlbmRlcmVyKGN1cnJlbnREZWYsIHROb2RlLCBsVmlldyk7XG4gICAgICAgIGVsZW1lbnRQcm9wZXJ0eUludGVybmFsKHRWaWV3LCB0Tm9kZSwgbFZpZXcsIHByb3BOYW1lLCB2YWx1ZSwgcmVuZGVyZXIsIHNhbml0aXplciwgdHJ1ZSk7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBzdG9yZVByb3BlcnR5QmluZGluZ01ldGFkYXRhKHRWaWV3LmRhdGEsIHROb2RlLCBwcm9wTmFtZSwgYmluZGluZ0luZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIMm1ybVzeW50aGV0aWNIb3N0UHJvcGVydHk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBOT1RFOiBjaGFuZ2VzIHRvIHRoZSBgbmdJMThuQ2xvc3VyZU1vZGVgIG5hbWUgbXVzdCBiZSBzeW5jZWQgd2l0aCBgY29tcGlsZXItY2xpL3NyYy90b29saW5nLnRzYC5cbiAqL1xuaWYgKHR5cGVvZiBuZ0kxOG5DbG9zdXJlTW9kZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBUaGVzZSBwcm9wZXJ0eSBhY2Nlc3NlcyBjYW4gYmUgaWdub3JlZCBiZWNhdXNlIG5nSTE4bkNsb3N1cmVNb2RlIHdpbGwgYmUgc2V0IHRvIGZhbHNlXG4gICAgLy8gd2hlbiBvcHRpbWl6aW5nIGNvZGUgYW5kIHRoZSB3aG9sZSBpZiBzdGF0ZW1lbnQgd2lsbCBiZSBkcm9wcGVkLlxuICAgIC8vIE1ha2Ugc3VyZSB0byByZWZlciB0byBuZ0kxOG5DbG9zdXJlTW9kZSBhcyBbJ25nSTE4bkNsb3N1cmVNb2RlJ10gZm9yIGNsb3N1cmUuXG4gICAgLy8gTk9URTogd2UgbmVlZCB0byBoYXZlIGl0IGluIElJRkUgc28gdGhhdCB0aGUgdHJlZS1zaGFrZXIgaXMgaGFwcHkuXG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXRvcGxldmVsLXByb3BlcnR5LWFjY2Vzc1xuICAgICAgICBfZ2xvYmFsWyduZ0kxOG5DbG9zdXJlTW9kZSddID1cbiAgICAgICAgICAgIC8vIFRPRE8oRlctMTI1MCk6IHZhbGlkYXRlIHRoYXQgdGhpcyBhY3R1YWxseSwgeW91IGtub3csIHdvcmtzLlxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXRvcGxldmVsLXByb3BlcnR5LWFjY2Vzc1xuICAgICAgICAgICAgdHlwZW9mIGdvb2cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBnb29nLmdldE1zZyA9PT0gJ2Z1bmN0aW9uJztcbiAgICB9KSgpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8vIFRISVMgQ09ERSBJUyBHRU5FUkFURUQgLSBETyBOT1QgTU9ESUZZLlxuY29uc3QgdSA9IHVuZGVmaW5lZDtcbmZ1bmN0aW9uIHBsdXJhbCh2YWwpIHtcbiAgICBjb25zdCBuID0gdmFsLCBpID0gTWF0aC5mbG9vcihNYXRoLmFicyh2YWwpKSwgdiA9IHZhbC50b1N0cmluZygpLnJlcGxhY2UoL15bXi5dKlxcLj8vLCAnJykubGVuZ3RoO1xuICAgIGlmIChpID09PSAxICYmIHYgPT09IDApXG4gICAgICAgIHJldHVybiAxO1xuICAgIHJldHVybiA1O1xufVxudmFyIGxvY2FsZUVuID0gW1wiZW5cIiwgW1tcImFcIiwgXCJwXCJdLCBbXCJBTVwiLCBcIlBNXCJdLCB1XSwgW1tcIkFNXCIsIFwiUE1cIl0sIHUsIHVdLCBbW1wiU1wiLCBcIk1cIiwgXCJUXCIsIFwiV1wiLCBcIlRcIiwgXCJGXCIsIFwiU1wiXSwgW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLCBbXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXSwgW1wiU3VcIiwgXCJNb1wiLCBcIlR1XCIsIFwiV2VcIiwgXCJUaFwiLCBcIkZyXCIsIFwiU2FcIl1dLCB1LCBbW1wiSlwiLCBcIkZcIiwgXCJNXCIsIFwiQVwiLCBcIk1cIiwgXCJKXCIsIFwiSlwiLCBcIkFcIiwgXCJTXCIsIFwiT1wiLCBcIk5cIiwgXCJEXCJdLCBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl0sIFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLCBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJdXSwgdSwgW1tcIkJcIiwgXCJBXCJdLCBbXCJCQ1wiLCBcIkFEXCJdLCBbXCJCZWZvcmUgQ2hyaXN0XCIsIFwiQW5ubyBEb21pbmlcIl1dLCAwLCBbNiwgMF0sIFtcIk0vZC95eVwiLCBcIk1NTSBkLCB5XCIsIFwiTU1NTSBkLCB5XCIsIFwiRUVFRSwgTU1NTSBkLCB5XCJdLCBbXCJoOm1tIGFcIiwgXCJoOm1tOnNzIGFcIiwgXCJoOm1tOnNzIGEgelwiLCBcImg6bW06c3MgYSB6enp6XCJdLCBbXCJ7MX0sIHswfVwiLCB1LCBcInsxfSAnYXQnIHswfVwiLCB1XSwgW1wiLlwiLCBcIixcIiwgXCI7XCIsIFwiJVwiLCBcIitcIiwgXCItXCIsIFwiRVwiLCBcIsOXXCIsIFwi4oCwXCIsIFwi4oieXCIsIFwiTmFOXCIsIFwiOlwiXSwgW1wiIywjIzAuIyMjXCIsIFwiIywjIzAlXCIsIFwiwqQjLCMjMC4wMFwiLCBcIiNFMFwiXSwgXCJVU0RcIiwgXCIkXCIsIFwiVVMgRG9sbGFyXCIsIHt9LCBcImx0clwiLCBwbHVyYWxdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVGhpcyBjb25zdCBpcyB1c2VkIHRvIHN0b3JlIHRoZSBsb2NhbGUgZGF0YSByZWdpc3RlcmVkIHdpdGggYHJlZ2lzdGVyTG9jYWxlRGF0YWBcbiAqL1xubGV0IExPQ0FMRV9EQVRBID0ge307XG4vKipcbiAqIFJlZ2lzdGVyIGxvY2FsZSBkYXRhIHRvIGJlIHVzZWQgaW50ZXJuYWxseSBieSBBbmd1bGFyLiBTZWUgdGhlXG4gKiBbXCJJMThuIGd1aWRlXCJdKGd1aWRlL2kxOG4tY29tbW9uLWZvcm1hdC1kYXRhLWxvY2FsZSkgdG8ga25vdyBob3cgdG8gaW1wb3J0IGFkZGl0aW9uYWwgbG9jYWxlXG4gKiBkYXRhLlxuICpcbiAqIFRoZSBzaWduYXR1cmUgYHJlZ2lzdGVyTG9jYWxlRGF0YShkYXRhOiBhbnksIGV4dHJhRGF0YT86IGFueSlgIGlzIGRlcHJlY2F0ZWQgc2luY2UgdjUuMVxuICovXG5mdW5jdGlvbiByZWdpc3RlckxvY2FsZURhdGEoZGF0YSwgbG9jYWxlSWQsIGV4dHJhRGF0YSkge1xuICAgIGlmICh0eXBlb2YgbG9jYWxlSWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGV4dHJhRGF0YSA9IGxvY2FsZUlkO1xuICAgICAgICBsb2NhbGVJZCA9IGRhdGFbTG9jYWxlRGF0YUluZGV4LkxvY2FsZUlkXTtcbiAgICB9XG4gICAgbG9jYWxlSWQgPSBsb2NhbGVJZC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywgJy0nKTtcbiAgICBMT0NBTEVfREFUQVtsb2NhbGVJZF0gPSBkYXRhO1xuICAgIGlmIChleHRyYURhdGEpIHtcbiAgICAgICAgTE9DQUxFX0RBVEFbbG9jYWxlSWRdW0xvY2FsZURhdGFJbmRleC5FeHRyYURhdGFdID0gZXh0cmFEYXRhO1xuICAgIH1cbn1cbi8qKlxuICogRmluZHMgdGhlIGxvY2FsZSBkYXRhIGZvciBhIGdpdmVuIGxvY2FsZS5cbiAqXG4gKiBAcGFyYW0gbG9jYWxlIFRoZSBsb2NhbGUgY29kZS5cbiAqIEByZXR1cm5zIFRoZSBsb2NhbGUgZGF0YS5cbiAqIEBzZWUgW0ludGVybmF0aW9uYWxpemF0aW9uIChpMThuKSBHdWlkZV0oaHR0cHM6Ly9hbmd1bGFyLmlvL2d1aWRlL2kxOG4tb3ZlcnZpZXcpXG4gKi9cbmZ1bmN0aW9uIGZpbmRMb2NhbGVEYXRhKGxvY2FsZSkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRMb2NhbGUgPSBub3JtYWxpemVMb2NhbGUobG9jYWxlKTtcbiAgICBsZXQgbWF0Y2ggPSBnZXRMb2NhbGVEYXRhKG5vcm1hbGl6ZWRMb2NhbGUpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuICAgIC8vIGxldCdzIHRyeSB0byBmaW5kIGEgcGFyZW50IGxvY2FsZVxuICAgIGNvbnN0IHBhcmVudExvY2FsZSA9IG5vcm1hbGl6ZWRMb2NhbGUuc3BsaXQoJy0nKVswXTtcbiAgICBtYXRjaCA9IGdldExvY2FsZURhdGEocGFyZW50TG9jYWxlKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH1cbiAgICBpZiAocGFyZW50TG9jYWxlID09PSAnZW4nKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGVFbjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIGxvY2FsZSBkYXRhIGZvciB0aGUgbG9jYWxlIFwiJHtsb2NhbGV9XCIuYCk7XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgZGVmYXVsdCBjdXJyZW5jeSBjb2RlIGZvciB0aGUgZ2l2ZW4gbG9jYWxlLlxuICpcbiAqIFRoZSBkZWZhdWx0IGlzIGRlZmluZWQgYXMgdGhlIGZpcnN0IGN1cnJlbmN5IHdoaWNoIGlzIHN0aWxsIGluIHVzZS5cbiAqXG4gKiBAcGFyYW0gbG9jYWxlIFRoZSBjb2RlIG9mIHRoZSBsb2NhbGUgd2hvc2UgY3VycmVuY3kgY29kZSB3ZSB3YW50LlxuICogQHJldHVybnMgVGhlIGNvZGUgb2YgdGhlIGRlZmF1bHQgY3VycmVuY3kgZm9yIHRoZSBnaXZlbiBsb2NhbGUuXG4gKlxuICovXG5mdW5jdGlvbiBnZXRMb2NhbGVDdXJyZW5jeUNvZGUobG9jYWxlKSB7XG4gICAgY29uc3QgZGF0YSA9IGZpbmRMb2NhbGVEYXRhKGxvY2FsZSk7XG4gICAgcmV0dXJuIGRhdGFbTG9jYWxlRGF0YUluZGV4LkN1cnJlbmN5Q29kZV0gfHwgbnVsbDtcbn1cbi8qKlxuICogUmV0cmlldmVzIHRoZSBwbHVyYWwgZnVuY3Rpb24gdXNlZCBieSBJQ1UgZXhwcmVzc2lvbnMgdG8gZGV0ZXJtaW5lIHRoZSBwbHVyYWwgY2FzZSB0byB1c2VcbiAqIGZvciBhIGdpdmVuIGxvY2FsZS5cbiAqIEBwYXJhbSBsb2NhbGUgQSBsb2NhbGUgY29kZSBmb3IgdGhlIGxvY2FsZSBmb3JtYXQgcnVsZXMgdG8gdXNlLlxuICogQHJldHVybnMgVGhlIHBsdXJhbCBmdW5jdGlvbiBmb3IgdGhlIGxvY2FsZS5cbiAqIEBzZWUgYE5nUGx1cmFsYFxuICogQHNlZSBbSW50ZXJuYXRpb25hbGl6YXRpb24gKGkxOG4pIEd1aWRlXShodHRwczovL2FuZ3VsYXIuaW8vZ3VpZGUvaTE4bi1vdmVydmlldylcbiAqL1xuZnVuY3Rpb24gZ2V0TG9jYWxlUGx1cmFsQ2FzZShsb2NhbGUpIHtcbiAgICBjb25zdCBkYXRhID0gZmluZExvY2FsZURhdGEobG9jYWxlKTtcbiAgICByZXR1cm4gZGF0YVtMb2NhbGVEYXRhSW5kZXguUGx1cmFsQ2FzZV07XG59XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgdGhlIGdpdmVuIGBub3JtYWxpemVkTG9jYWxlYCBmcm9tIGBMT0NBTEVfREFUQWBcbiAqIG9yIGZyb20gdGhlIGdsb2JhbCBgbmcuY29tbW9uLmxvY2FsZWAuXG4gKi9cbmZ1bmN0aW9uIGdldExvY2FsZURhdGEobm9ybWFsaXplZExvY2FsZSkge1xuICAgIGlmICghKG5vcm1hbGl6ZWRMb2NhbGUgaW4gTE9DQUxFX0RBVEEpKSB7XG4gICAgICAgIExPQ0FMRV9EQVRBW25vcm1hbGl6ZWRMb2NhbGVdID0gX2dsb2JhbC5uZyAmJiBfZ2xvYmFsLm5nLmNvbW1vbiAmJiBfZ2xvYmFsLm5nLmNvbW1vbi5sb2NhbGVzICYmXG4gICAgICAgICAgICBfZ2xvYmFsLm5nLmNvbW1vbi5sb2NhbGVzW25vcm1hbGl6ZWRMb2NhbGVdO1xuICAgIH1cbiAgICByZXR1cm4gTE9DQUxFX0RBVEFbbm9ybWFsaXplZExvY2FsZV07XG59XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byByZW1vdmUgYWxsIHRoZSBsb2NhbGUgZGF0YSBmcm9tIGBMT0NBTEVfREFUQWAuXG4gKi9cbmZ1bmN0aW9uIHVucmVnaXN0ZXJBbGxMb2NhbGVEYXRhKCkge1xuICAgIExPQ0FMRV9EQVRBID0ge307XG59XG4vKipcbiAqIEluZGV4IG9mIGVhY2ggdHlwZSBvZiBsb2NhbGUgZGF0YSBmcm9tIHRoZSBsb2NhbGUgZGF0YSBhcnJheVxuICovXG52YXIgTG9jYWxlRGF0YUluZGV4O1xuKGZ1bmN0aW9uIChMb2NhbGVEYXRhSW5kZXgpIHtcbiAgICBMb2NhbGVEYXRhSW5kZXhbTG9jYWxlRGF0YUluZGV4W1wiTG9jYWxlSWRcIl0gPSAwXSA9IFwiTG9jYWxlSWRcIjtcbiAgICBMb2NhbGVEYXRhSW5kZXhbTG9jYWxlRGF0YUluZGV4W1wiRGF5UGVyaW9kc0Zvcm1hdFwiXSA9IDFdID0gXCJEYXlQZXJpb2RzRm9ybWF0XCI7XG4gICAgTG9jYWxlRGF0YUluZGV4W0xvY2FsZURhdGFJbmRleFtcIkRheVBlcmlvZHNTdGFuZGFsb25lXCJdID0gMl0gPSBcIkRheVBlcmlvZHNTdGFuZGFsb25lXCI7XG4gICAgTG9jYWxlRGF0YUluZGV4W0xvY2FsZURhdGFJbmRleFtcIkRheXNGb3JtYXRcIl0gPSAzXSA9IFwiRGF5c0Zvcm1hdFwiO1xuICAgIExvY2FsZURhdGFJbmRleFtMb2NhbGVEYXRhSW5kZXhbXCJEYXlzU3RhbmRhbG9uZVwiXSA9IDRdID0gXCJEYXlzU3RhbmRhbG9uZVwiO1xuICAgIExvY2FsZURhdGFJbmRleFtMb2NhbGVEYXRhSW5kZXhbXCJNb250aHNGb3JtYXRcIl0gPSA1XSA9IFwiTW9udGhzRm9ybWF0XCI7XG4gICAgTG9jYWxlRGF0YUluZGV4W0xvY2FsZURhdGFJbmRleFtcIk1vbnRoc1N0YW5kYWxvbmVcIl0gPSA2XSA9IFwiTW9udGhzU3RhbmRhbG9uZVwiO1xuICAgIExvY2FsZURhdGFJbmRleFtMb2NhbGVEYXRhSW5kZXhbXCJFcmFzXCJdID0gN10gPSBcIkVyYXNcIjtcbiAgICBMb2NhbGVEYXRhSW5kZXhbTG9jYWxlRGF0YUluZGV4W1wiRmlyc3REYXlPZldlZWtcIl0gPSA4XSA9IFwiRmlyc3REYXlPZldlZWtcIjtcbiAgICBMb2NhbGVEYXRhSW5kZXhbTG9jYWxlRGF0YUluZGV4W1wiV2Vla2VuZFJhbmdlXCJdID0gOV0gPSBcIldlZWtlbmRSYW5nZVwiO1xuICAgIExvY2FsZURhdGFJbmRleFtMb2NhbGVEYXRhSW5kZXhbXCJEYXRlRm9ybWF0XCJdID0gMTBdID0gXCJEYXRlRm9ybWF0XCI7XG4gICAgTG9jYWxlRGF0YUluZGV4W0xvY2FsZURhdGFJbmRleFtcIlRpbWVGb3JtYXRcIl0gPSAxMV0gPSBcIlRpbWVGb3JtYXRcIjtcbiAgICBMb2NhbGVEYXRhSW5kZXhbTG9jYWxlRGF0YUluZGV4W1wiRGF0ZVRpbWVGb3JtYXRcIl0gPSAxMl0gPSBcIkRhdGVUaW1lRm9ybWF0XCI7XG4gICAgTG9jYWxlRGF0YUluZGV4W0xvY2FsZURhdGFJbmRleFtcIk51bWJlclN5bWJvbHNcIl0gPSAxM10gPSBcIk51bWJlclN5bWJvbHNcIjtcbiAgICBMb2NhbGVEYXRhSW5kZXhbTG9jYWxlRGF0YUluZGV4W1wiTnVtYmVyRm9ybWF0c1wiXSA9IDE0XSA9IFwiTnVtYmVyRm9ybWF0c1wiO1xuICAgIExvY2FsZURhdGFJbmRleFtMb2NhbGVEYXRhSW5kZXhbXCJDdXJyZW5jeUNvZGVcIl0gPSAxNV0gPSBcIkN1cnJlbmN5Q29kZVwiO1xuICAgIExvY2FsZURhdGFJbmRleFtMb2NhbGVEYXRhSW5kZXhbXCJDdXJyZW5jeVN5bWJvbFwiXSA9IDE2XSA9IFwiQ3VycmVuY3lTeW1ib2xcIjtcbiAgICBMb2NhbGVEYXRhSW5kZXhbTG9jYWxlRGF0YUluZGV4W1wiQ3VycmVuY3lOYW1lXCJdID0gMTddID0gXCJDdXJyZW5jeU5hbWVcIjtcbiAgICBMb2NhbGVEYXRhSW5kZXhbTG9jYWxlRGF0YUluZGV4W1wiQ3VycmVuY2llc1wiXSA9IDE4XSA9IFwiQ3VycmVuY2llc1wiO1xuICAgIExvY2FsZURhdGFJbmRleFtMb2NhbGVEYXRhSW5kZXhbXCJEaXJlY3Rpb25hbGl0eVwiXSA9IDE5XSA9IFwiRGlyZWN0aW9uYWxpdHlcIjtcbiAgICBMb2NhbGVEYXRhSW5kZXhbTG9jYWxlRGF0YUluZGV4W1wiUGx1cmFsQ2FzZVwiXSA9IDIwXSA9IFwiUGx1cmFsQ2FzZVwiO1xuICAgIExvY2FsZURhdGFJbmRleFtMb2NhbGVEYXRhSW5kZXhbXCJFeHRyYURhdGFcIl0gPSAyMV0gPSBcIkV4dHJhRGF0YVwiO1xufSkoTG9jYWxlRGF0YUluZGV4IHx8IChMb2NhbGVEYXRhSW5kZXggPSB7fSkpO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBjYW5vbmljYWwgZm9ybSBvZiBhIGxvY2FsZSBuYW1lIC0gbG93ZXJjYXNlIHdpdGggYF9gIHJlcGxhY2VkIHdpdGggYC1gLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemVMb2NhbGUobG9jYWxlKSB7XG4gICAgcmV0dXJuIGxvY2FsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywgJy0nKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5jb25zdCBwbHVyYWxNYXBwaW5nID0gWyd6ZXJvJywgJ29uZScsICd0d28nLCAnZmV3JywgJ21hbnknXTtcbi8qKlxuICogUmV0dXJucyB0aGUgcGx1cmFsIGNhc2UgYmFzZWQgb24gdGhlIGxvY2FsZVxuICovXG5mdW5jdGlvbiBnZXRQbHVyYWxDYXNlKHZhbHVlLCBsb2NhbGUpIHtcbiAgICBjb25zdCBwbHVyYWwgPSBnZXRMb2NhbGVQbHVyYWxDYXNlKGxvY2FsZSkocGFyc2VJbnQodmFsdWUsIDEwKSk7XG4gICAgY29uc3QgcmVzdWx0ID0gcGx1cmFsTWFwcGluZ1twbHVyYWxdO1xuICAgIHJldHVybiAocmVzdWx0ICE9PSB1bmRlZmluZWQpID8gcmVzdWx0IDogJ290aGVyJztcbn1cbi8qKlxuICogVGhlIGxvY2FsZSBpZCB0aGF0IHRoZSBhcHBsaWNhdGlvbiBpcyB1c2luZyBieSBkZWZhdWx0IChmb3IgdHJhbnNsYXRpb25zIGFuZCBJQ1UgZXhwcmVzc2lvbnMpLlxuICovXG5jb25zdCBERUZBVUxUX0xPQ0FMRV9JRCA9ICdlbi1VUyc7XG4vKipcbiAqIFVTRCBjdXJyZW5jeSBjb2RlIHRoYXQgdGhlIGFwcGxpY2F0aW9uIHVzZXMgYnkgZGVmYXVsdCBmb3IgQ3VycmVuY3lQaXBlIHdoZW4gbm9cbiAqIERFRkFVTFRfQ1VSUkVOQ1lfQ09ERSBpcyBwcm92aWRlZC5cbiAqL1xuY29uc3QgVVNEX0NVUlJFTkNZX0NPREUgPSAnVVNEJztcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIE1hcmtzIHRoYXQgdGhlIG5leHQgc3RyaW5nIGlzIGFuIGVsZW1lbnQgbmFtZS5cbiAqXG4gKiBTZWUgYEkxOG5NdXRhdGVPcENvZGVzYCBkb2N1bWVudGF0aW9uLlxuICovXG5jb25zdCBFTEVNRU5UX01BUktFUiA9IHtcbiAgICBtYXJrZXI6ICdlbGVtZW50J1xufTtcbi8qKlxuICogTWFya3MgdGhhdCB0aGUgbmV4dCBzdHJpbmcgaXMgY29tbWVudCB0ZXh0IG5lZWQgZm9yIElDVS5cbiAqXG4gKiBTZWUgYEkxOG5NdXRhdGVPcENvZGVzYCBkb2N1bWVudGF0aW9uLlxuICovXG5jb25zdCBJQ1VfTUFSS0VSID0ge1xuICAgIG1hcmtlcjogJ0lDVSdcbn07XG4vKipcbiAqIFNlZSBgSTE4bkNyZWF0ZU9wQ29kZXNgXG4gKi9cbnZhciBJMThuQ3JlYXRlT3BDb2RlO1xuKGZ1bmN0aW9uIChJMThuQ3JlYXRlT3BDb2RlKSB7XG4gICAgLyoqXG4gICAgICogTnVtYmVyIG9mIGJpdHMgdG8gc2hpZnQgaW5kZXggc28gdGhhdCBpdCBjYW4gYmUgY29tYmluZWQgd2l0aCB0aGUgYEFQUEVORF9FQUdFUkxZYCBhbmRcbiAgICAgKiBgQ09NTUVOVGAuXG4gICAgICovXG4gICAgSTE4bkNyZWF0ZU9wQ29kZVtJMThuQ3JlYXRlT3BDb2RlW1wiU0hJRlRcIl0gPSAyXSA9IFwiU0hJRlRcIjtcbiAgICAvKipcbiAgICAgKiBTaG91bGQgdGhlIG5vZGUgYmUgYXBwZW5kZWQgdG8gcGFyZW50IGltZWRkaXRhdGx5IGFmdGVyIGNyZWF0aW9uLlxuICAgICAqL1xuICAgIEkxOG5DcmVhdGVPcENvZGVbSTE4bkNyZWF0ZU9wQ29kZVtcIkFQUEVORF9FQUdFUkxZXCJdID0gMV0gPSBcIkFQUEVORF9FQUdFUkxZXCI7XG4gICAgLyoqXG4gICAgICogSWYgc2V0IHRoZSBub2RlIHNob3VsZCBiZSBjb21tZW50IChyYXRoZXIgdGhhbiBhIHRleHQpIG5vZGUuXG4gICAgICovXG4gICAgSTE4bkNyZWF0ZU9wQ29kZVtJMThuQ3JlYXRlT3BDb2RlW1wiQ09NTUVOVFwiXSA9IDJdID0gXCJDT01NRU5UXCI7XG59KShJMThuQ3JlYXRlT3BDb2RlIHx8IChJMThuQ3JlYXRlT3BDb2RlID0ge30pKTtcbi8vIE5vdGU6IFRoaXMgaGFjayBpcyBuZWNlc3Nhcnkgc28gd2UgZG9uJ3QgZXJyb25lb3VzbHkgZ2V0IGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuLy8gZmFpbHVyZSBiYXNlZCBvbiB0eXBlcy5cbmNvbnN0IHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkJDIgPSAxO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogVGhlIGxvY2FsZSBpZCB0aGF0IHRoZSBhcHBsaWNhdGlvbiBpcyBjdXJyZW50bHkgdXNpbmcgKGZvciB0cmFuc2xhdGlvbnMgYW5kIElDVSBleHByZXNzaW9ucykuXG4gKiBUaGlzIGlzIHRoZSBpdnkgdmVyc2lvbiBvZiBgTE9DQUxFX0lEYCB0aGF0IHdhcyBkZWZpbmVkIGFzIGFuIGluamVjdGlvbiB0b2tlbiBmb3IgdGhlIHZpZXcgZW5naW5lXG4gKiBidXQgaXMgbm93IGRlZmluZWQgYXMgYSBnbG9iYWwgdmFsdWUuXG4gKi9cbmxldCBMT0NBTEVfSUQkMSA9IERFRkFVTFRfTE9DQUxFX0lEO1xuLyoqXG4gKiBTZXRzIHRoZSBsb2NhbGUgaWQgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIHRyYW5zbGF0aW9ucyBhbmQgSUNVIGV4cHJlc3Npb25zLlxuICogVGhpcyBpcyB0aGUgaXZ5IHZlcnNpb24gb2YgYExPQ0FMRV9JRGAgdGhhdCB3YXMgZGVmaW5lZCBhcyBhbiBpbmplY3Rpb24gdG9rZW4gZm9yIHRoZSB2aWV3IGVuZ2luZVxuICogYnV0IGlzIG5vdyBkZWZpbmVkIGFzIGEgZ2xvYmFsIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBsb2NhbGVJZFxuICovXG5mdW5jdGlvbiBzZXRMb2NhbGVJZChsb2NhbGVJZCkge1xuICAgIGFzc2VydERlZmluZWQobG9jYWxlSWQsIGBFeHBlY3RlZCBsb2NhbGVJZCB0byBiZSBkZWZpbmVkYCk7XG4gICAgaWYgKHR5cGVvZiBsb2NhbGVJZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgTE9DQUxFX0lEJDEgPSBsb2NhbGVJZC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywgJy0nKTtcbiAgICB9XG59XG4vKipcbiAqIEdldHMgdGhlIGxvY2FsZSBpZCB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgdHJhbnNsYXRpb25zIGFuZCBJQ1UgZXhwcmVzc2lvbnMuXG4gKiBUaGlzIGlzIHRoZSBpdnkgdmVyc2lvbiBvZiBgTE9DQUxFX0lEYCB0aGF0IHdhcyBkZWZpbmVkIGFzIGFuIGluamVjdGlvbiB0b2tlbiBmb3IgdGhlIHZpZXcgZW5naW5lXG4gKiBidXQgaXMgbm93IGRlZmluZWQgYXMgYSBnbG9iYWwgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGdldExvY2FsZUlkKCkge1xuICAgIHJldHVybiBMT0NBTEVfSUQkMTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEZpbmQgYSBub2RlIGluIGZyb250IG9mIHdoaWNoIGBjdXJyZW50VE5vZGVgIHNob3VsZCBiZSBpbnNlcnRlZCAodGFrZXMgaTE4biBpbnRvIGFjY291bnQpLlxuICpcbiAqIFRoaXMgbWV0aG9kIGRldGVybWluZXMgdGhlIGBSTm9kZWAgaW4gZnJvbnQgb2Ygd2hpY2ggd2Ugc2hvdWxkIGluc2VydCB0aGUgYGN1cnJlbnRSTm9kZWAuIFRoaXNcbiAqIHRha2VzIGBUTm9kZS5pbnNlcnRCZWZvcmVJbmRleGAgaW50byBhY2NvdW50LlxuICpcbiAqIEBwYXJhbSBwYXJlbnRUTm9kZSBwYXJlbnQgYFROb2RlYFxuICogQHBhcmFtIGN1cnJlbnRUTm9kZSBjdXJyZW50IGBUTm9kZWAgKFRoZSBub2RlIHdoaWNoIHdlIHdvdWxkIGxpa2UgdG8gaW5zZXJ0IGludG8gdGhlIERPTSlcbiAqIEBwYXJhbSBsVmlldyBjdXJyZW50IGBMVmlld2BcbiAqL1xuZnVuY3Rpb24gZ2V0SW5zZXJ0SW5Gcm9udE9mUk5vZGVXaXRoSTE4bihwYXJlbnRUTm9kZSwgY3VycmVudFROb2RlLCBsVmlldykge1xuICAgIGNvbnN0IHROb2RlSW5zZXJ0QmVmb3JlSW5kZXggPSBjdXJyZW50VE5vZGUuaW5zZXJ0QmVmb3JlSW5kZXg7XG4gICAgY29uc3QgaW5zZXJ0QmVmb3JlSW5kZXggPSBBcnJheS5pc0FycmF5KHROb2RlSW5zZXJ0QmVmb3JlSW5kZXgpID8gdE5vZGVJbnNlcnRCZWZvcmVJbmRleFswXSA6IHROb2RlSW5zZXJ0QmVmb3JlSW5kZXg7XG4gICAgaWYgKGluc2VydEJlZm9yZUluZGV4ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBnZXRJbnNlcnRJbkZyb250T2ZSTm9kZVdpdGhOb0kxOG4ocGFyZW50VE5vZGUsIGN1cnJlbnRUTm9kZSwgbFZpZXcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShsVmlldywgaW5zZXJ0QmVmb3JlSW5kZXgpO1xuICAgICAgICByZXR1cm4gdW53cmFwUk5vZGUobFZpZXdbaW5zZXJ0QmVmb3JlSW5kZXhdKTtcbiAgICB9XG59XG4vKipcbiAqIFByb2Nlc3MgYFROb2RlLmluc2VydEJlZm9yZUluZGV4YCBieSBhZGRpbmcgaTE4biB0ZXh0IG5vZGVzLlxuICpcbiAqIFNlZSBgVE5vZGUuaW5zZXJ0QmVmb3JlSW5kZXhgXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NJMThuSW5zZXJ0QmVmb3JlKHJlbmRlcmVyLCBjaGlsZFROb2RlLCBsVmlldywgY2hpbGRSTm9kZSwgcGFyZW50UkVsZW1lbnQpIHtcbiAgICBjb25zdCB0Tm9kZUluc2VydEJlZm9yZUluZGV4ID0gY2hpbGRUTm9kZS5pbnNlcnRCZWZvcmVJbmRleDtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0Tm9kZUluc2VydEJlZm9yZUluZGV4KSkge1xuICAgICAgICAvLyBBbiBhcnJheSBpbmRpY2F0ZXMgdGhhdCB0aGVyZSBhcmUgaTE4biBub2RlcyB0aGF0IG5lZWQgdG8gYmUgYWRkZWQgYXMgY2hpbGRyZW4gb2YgdGhpc1xuICAgICAgICAvLyBgY2hpbGRSTm9kZWAuIFRoZXNlIGkxOG4gbm9kZXMgd2VyZSBjcmVhdGVkIGJlZm9yZSB0aGlzIGBjaGlsZFJOb2RlYCB3YXMgYXZhaWxhYmxlIGFuZCBzb1xuICAgICAgICAvLyBvbmx5IG5vdyBjYW4gYmUgYWRkZWQuIFRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBhcnJheSBpcyB0aGUgbm9ybWFsIGluZGV4IHdoZXJlIHdlIHNob3VsZFxuICAgICAgICAvLyBpbnNlcnQgdGhlIGBjaGlsZFJOb2RlYC4gQWRkaXRpb25hbCBlbGVtZW50cyBhcmUgdGhlIGV4dHJhIG5vZGVzIHRvIGJlIGFkZGVkIGFzIGNoaWxkcmVuIG9mXG4gICAgICAgIC8vIGBjaGlsZFJOb2RlYC5cbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydERvbU5vZGUoY2hpbGRSTm9kZSk7XG4gICAgICAgIGxldCBpMThuUGFyZW50ID0gY2hpbGRSTm9kZTtcbiAgICAgICAgbGV0IGFuY2hvclJOb2RlID0gbnVsbDtcbiAgICAgICAgaWYgKCEoY2hpbGRUTm9kZS50eXBlICYgMyAvKiBBbnlSTm9kZSAqLykpIHtcbiAgICAgICAgICAgIGFuY2hvclJOb2RlID0gaTE4blBhcmVudDtcbiAgICAgICAgICAgIGkxOG5QYXJlbnQgPSBwYXJlbnRSRWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaTE4blBhcmVudCAhPT0gbnVsbCAmJiAoY2hpbGRUTm9kZS5mbGFncyAmIDIgLyogaXNDb21wb25lbnRIb3N0ICovKSA9PT0gMCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0Tm9kZUluc2VydEJlZm9yZUluZGV4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gbmVlZCB0byBgdW53cmFwUk5vZGVgIGJlY2F1c2UgYWxsIG9mIHRoZSBpbmRleGVzIHBvaW50IHRvIGkxOG4gdGV4dCBub2Rlcy5cbiAgICAgICAgICAgICAgICAvLyBzZWUgYGFzc2VydERvbU5vZGVgIGJlbG93LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkxOG5DaGlsZCA9IGxWaWV3W3ROb2RlSW5zZXJ0QmVmb3JlSW5kZXhbaV1dO1xuICAgICAgICAgICAgICAgIG5hdGl2ZUluc2VydEJlZm9yZShyZW5kZXJlciwgaTE4blBhcmVudCwgaTE4bkNoaWxkLCBhbmNob3JSTm9kZSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQWRkIGB0Tm9kZWAgdG8gYHByZXZpb3VzVE5vZGVzYCBsaXN0IGFuZCB1cGRhdGUgcmVsZXZhbnQgYFROb2RlYHMgaW4gYHByZXZpb3VzVE5vZGVzYCBsaXN0XG4gKiBgdE5vZGUuaW5zZXJ0QmVmb3JlSW5kZXhgLlxuICpcbiAqIFRoaW5ncyB0byBrZWVwIGluIG1pbmQ6XG4gKiAxLiBBbGwgaTE4biB0ZXh0IG5vZGVzIGFyZSBlbmNvZGVkIGFzIGBUTm9kZVR5cGUuRWxlbWVudGAgYW5kIGFyZSBjcmVhdGVkIGVhZ2VybHkgYnkgdGhlXG4gKiAgICBgybXJtWkxOG5TdGFydGAgaW5zdHJ1Y3Rpb24uXG4gKiAyLiBBbGwgYFROb2RlVHlwZS5QbGFjZWhvbGRlcmAgYFROb2Rlc2AgYXJlIGVsZW1lbnRzIHdoaWNoIHdpbGwgYmUgY3JlYXRlZCBsYXRlciBieVxuICogICAgYMm1ybVlbGVtZW50U3RhcnRgIGluc3RydWN0aW9uLlxuICogMy4gYMm1ybVlbGVtZW50U3RhcnRgIGluc3RydWN0aW9uIHdpbGwgY3JlYXRlIGBUTm9kZWBzIGluIHRoZSBhc2NlbmRpbmcgYFROb2RlLmluZGV4YCBvcmRlci4gKFNvIGFcbiAqICAgIHNtYWxsZXIgaW5kZXggYFROb2RlYCBpcyBndWFyYW50ZWVkIHRvIGJlIGNyZWF0ZWQgYmVmb3JlIGEgbGFyZ2VyIG9uZSlcbiAqXG4gKiBXZSB1c2UgdGhlIGFib3ZlIHRocmVlIGludmFyaWFudHMgdG8gZGV0ZXJtaW5lIGBUTm9kZS5pbnNlcnRCZWZvcmVJbmRleGAuXG4gKlxuICogSW4gYW4gaWRlYWwgd29ybGQgYFROb2RlLmluc2VydEJlZm9yZUluZGV4YCB3b3VsZCBhbHdheXMgYmUgYFROb2RlLm5leHQuaW5kZXhgLiBIb3dldmVyLFxuICogdGhpcyB3aWxsIG5vdCB3b3JrIGJlY2F1c2UgYFROb2RlLm5leHQuaW5kZXhgIG1heSBiZSBsYXJnZXIgdGhhbiBgVE5vZGUuaW5kZXhgIHdoaWNoIG1lYW5zIHRoYXRcbiAqIHRoZSBuZXh0IG5vZGUgaXMgbm90IHlldCBjcmVhdGVkIGFuZCB0aGVyZWZvcmUgd2UgY2FuJ3QgaW5zZXJ0IGluIGZyb250IG9mIGl0LlxuICpcbiAqIFJ1bGUxOiBgVE5vZGUuaW5zZXJ0QmVmb3JlSW5kZXggPSBudWxsYCBpZiBgVE5vZGUubmV4dCA9PT0gbnVsbGAgKEluaXRpYWwgY29uZGl0aW9uLCBhcyB3ZSBkb24ndFxuICogICAgICAgIGtub3cgaWYgdGhlcmUgd2lsbCBiZSBmdXJ0aGVyIGBUTm9kZWBzIGluc2VydGVkIGFmdGVyLilcbiAqIFJ1bGUyOiBJZiBgcHJldmlvdXNUTm9kZWAgaXMgY3JlYXRlZCBhZnRlciB0aGUgYHROb2RlYCBiZWluZyBpbnNlcnRlZCwgdGhlblxuICogICAgICAgIGBwcmV2aW91c1ROb2RlLmluc2VydEJlZm9yZU5vZGUgPSB0Tm9kZS5pbmRleGAgKFNvIHdoZW4gYSBuZXcgYHROb2RlYCBpcyBhZGRlZCB3ZSBjaGVja1xuICogICAgICAgIHByZXZpb3VzIHRvIHNlZSBpZiB3ZSBjYW4gdXBkYXRlIGl0cyBgaW5zZXJ0QmVmb3JlVE5vZGVgKVxuICpcbiAqIFNlZSBgVE5vZGUuaW5zZXJ0QmVmb3JlSW5kZXhgIGZvciBtb3JlIGNvbnRleHQuXG4gKlxuICogQHBhcmFtIHByZXZpb3VzVE5vZGVzIEEgbGlzdCBvZiBwcmV2aW91cyBUTm9kZXMgc28gdGhhdCB3ZSBjYW4gZWFzaWx5IHRyYXZlcnNlIGBUTm9kZWBzIGluXG4gKiAgICAgcmV2ZXJzZSBvcmRlci4gKElmIGBUTm9kZWAgd291bGQgaGF2ZSBgcHJldmlvdXNgIHRoaXMgd291bGQgbm90IGJlIG5lY2Vzc2FyeS4pXG4gKiBAcGFyYW0gbmV3VE5vZGUgQSBUTm9kZSB0byBhZGQgdG8gdGhlIGBwcmV2aW91c1ROb2Rlc2AgbGlzdC5cbiAqL1xuZnVuY3Rpb24gYWRkVE5vZGVBbmRVcGRhdGVJbnNlcnRCZWZvcmVJbmRleChwcmV2aW91c1ROb2RlcywgbmV3VE5vZGUpIHtcbiAgICAvLyBTdGFydCB3aXRoIFJ1bGUxXG4gICAgbmdEZXZNb2RlICYmXG4gICAgICAgIGFzc2VydEVxdWFsKG5ld1ROb2RlLmluc2VydEJlZm9yZUluZGV4LCBudWxsLCAnV2UgZXhwZWN0IHRoYXQgaW5zZXJ0QmVmb3JlSW5kZXggaXMgbm90IHNldCcpO1xuICAgIHByZXZpb3VzVE5vZGVzLnB1c2gobmV3VE5vZGUpO1xuICAgIGlmIChwcmV2aW91c1ROb2Rlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBwcmV2aW91c1ROb2Rlcy5sZW5ndGggLSAyOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdUTm9kZSA9IHByZXZpb3VzVE5vZGVzW2ldO1xuICAgICAgICAgICAgLy8gVGV4dCBub2RlcyBhcmUgY3JlYXRlZCBlYWdlcmx5IGFuZCBzbyB0aGV5IGRvbid0IG5lZWQgdGhlaXIgYGluZGV4QmVmb3JlSW5kZXhgIHVwZGF0ZWQuXG4gICAgICAgICAgICAvLyBJdCBpcyBzYWZlIHRvIGlnbm9yZSB0aGVtLlxuICAgICAgICAgICAgaWYgKCFpc0kxOG5UZXh0KGV4aXN0aW5nVE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV3VE5vZGVDcmVhdGVkQmVmb3JlKGV4aXN0aW5nVE5vZGUsIG5ld1ROb2RlKSAmJlxuICAgICAgICAgICAgICAgICAgICBnZXRJbnNlcnRCZWZvcmVJbmRleChleGlzdGluZ1ROb2RlKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCB3YXMgY3JlYXRlZCBiZWZvcmUgdXMgaW4gdGltZSwgKGFuZCBpdCBkb2VzIG5vdCB5ZXQgaGF2ZSBgaW5zZXJ0QmVmb3JlSW5kZXhgKVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIGFkZCB0aGUgYGluc2VydEJlZm9yZUluZGV4YC5cbiAgICAgICAgICAgICAgICAgICAgc2V0SW5zZXJ0QmVmb3JlSW5kZXgoZXhpc3RpbmdUTm9kZSwgbmV3VE5vZGUuaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGlzSTE4blRleHQodE5vZGUpIHtcbiAgICByZXR1cm4gISh0Tm9kZS50eXBlICYgNjQgLyogUGxhY2Vob2xkZXIgKi8pO1xufVxuZnVuY3Rpb24gaXNOZXdUTm9kZUNyZWF0ZWRCZWZvcmUoZXhpc3RpbmdUTm9kZSwgbmV3VE5vZGUpIHtcbiAgICByZXR1cm4gaXNJMThuVGV4dChuZXdUTm9kZSkgfHwgZXhpc3RpbmdUTm9kZS5pbmRleCA+IG5ld1ROb2RlLmluZGV4O1xufVxuZnVuY3Rpb24gZ2V0SW5zZXJ0QmVmb3JlSW5kZXgodE5vZGUpIHtcbiAgICBjb25zdCBpbmRleCA9IHROb2RlLmluc2VydEJlZm9yZUluZGV4O1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGluZGV4KSA/IGluZGV4WzBdIDogaW5kZXg7XG59XG5mdW5jdGlvbiBzZXRJbnNlcnRCZWZvcmVJbmRleCh0Tm9kZSwgdmFsdWUpIHtcbiAgICBjb25zdCBpbmRleCA9IHROb2RlLmluc2VydEJlZm9yZUluZGV4O1xuICAgIGlmIChBcnJheS5pc0FycmF5KGluZGV4KSkge1xuICAgICAgICAvLyBBcnJheSBpcyBzdG9yZWQgaWYgd2UgaGF2ZSB0byBpbnNlcnQgY2hpbGQgbm9kZXMuIFNlZSBgVE5vZGUuaW5zZXJ0QmVmb3JlSW5kZXhgXG4gICAgICAgIGluZGV4WzBdID0gdmFsdWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRJMThuSGFuZGxpbmcoZ2V0SW5zZXJ0SW5Gcm9udE9mUk5vZGVXaXRoSTE4biwgcHJvY2Vzc0kxOG5JbnNlcnRCZWZvcmUpO1xuICAgICAgICB0Tm9kZS5pbnNlcnRCZWZvcmVJbmRleCA9IHZhbHVlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFJldHJpZXZlIGBUSWN1YCBhdCBhIGdpdmVuIGBpbmRleGAuXG4gKlxuICogVGhlIGBUSWN1YCBjYW4gYmUgc3RvcmVkIGVpdGhlciBkaXJlY3RseSAoaWYgaXQgaXMgbmVzdGVkIElDVSkgT1JcbiAqIGl0IGlzIHN0b3JlZCBpbnNpZGUgdGhvIGBUSWN1Q29udGFpbmVyYCBpZiBpdCBpcyB0b3AgbGV2ZWwgSUNVLlxuICpcbiAqIFRoZSByZWFzb24gZm9yIHRoaXMgaXMgdGhhdCB0aGUgdG9wIGxldmVsIElDVSBuZWVkIGEgYFROb2RlYCBzbyB0aGF0IHRoZXkgYXJlIHBhcnQgb2YgdGhlIHJlbmRlclxuICogdHJlZSwgYnV0IG5lc3RlZCBJQ1UncyBoYXZlIG5vIFROb2RlLCBiZWNhdXNlIHdlIGRvbid0IGtub3cgYWhlYWQgb2YgdGltZSBpZiB0aGUgbmVzdGVkIElDVSBpc1xuICogZXhwcmVzc2VkIChwYXJlbnQgSUNVIG1heSBoYXZlIHNlbGVjdGVkIGEgY2FzZSB3aGljaCBkb2VzIG5vdCBjb250YWluIGl0LilcbiAqXG4gKiBAcGFyYW0gdFZpZXcgQ3VycmVudCBgVFZpZXdgLlxuICogQHBhcmFtIGluZGV4IEluZGV4IHdoZXJlIHRoZSB2YWx1ZSBzaG91bGQgYmUgcmVhZCBmcm9tLlxuICovXG5mdW5jdGlvbiBnZXRUSWN1KHRWaWV3LCBpbmRleCkge1xuICAgIGNvbnN0IHZhbHVlID0gdFZpZXcuZGF0YVtpbmRleF07XG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGlmIChuZ0Rldk1vZGUgJiZcbiAgICAgICAgISh2YWx1ZS5oYXNPd25Qcm9wZXJ0eSgndFZpZXdzJykgfHwgdmFsdWUuaGFzT3duUHJvcGVydHkoJ2N1cnJlbnRDYXNlTFZpZXdJbmRleCcpKSkge1xuICAgICAgICB0aHJvd0Vycm9yKCdXZSBleHBlY3QgdG8gZ2V0IFxcJ251bGxcXCd8XFwnVEljdVxcJ3xcXCdUSWN1Q29udGFpbmVyXFwnLCBidXQgZ290OiAnICsgdmFsdWUpO1xuICAgIH1cbiAgICAvLyBIZXJlIHRoZSBgdmFsdWUuaGFzT3duUHJvcGVydHkoJ2N1cnJlbnRDYXNlTFZpZXdJbmRleCcpYCBpcyBhIHBvbHltb3JwaGljIHJlYWQgYXMgaXQgY2FuIGJlXG4gICAgLy8gZWl0aGVyIFRJY3Ugb3IgVEljdUNvbnRhaW5lck5vZGUuIFRoaXMgaXMgbm90IGlkZWFsLCBidXQgd2Ugc3RpbGwgdGhpbmsgaXQgaXMgT0sgYmVjYXVzZSBpdFxuICAgIC8vIHdpbGwgYmUganVzdCB0d28gY2FzZXMgd2hpY2ggZml0cyBpbnRvIHRoZSBicm93c2VyIGlubGluZSBjYWNoZSAoaW5saW5lIGNhY2hlIGNhbiB0YWtlIHVwIHRvXG4gICAgLy8gNClcbiAgICBjb25zdCB0SWN1ID0gdmFsdWUuaGFzT3duUHJvcGVydHkoJ2N1cnJlbnRDYXNlTFZpZXdJbmRleCcpID8gdmFsdWUgOlxuICAgICAgICB2YWx1ZS52YWx1ZTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VEljdSh0SWN1KTtcbiAgICByZXR1cm4gdEljdTtcbn1cbi8qKlxuICogU3RvcmUgYFRJY3VgIGF0IGEgZ2l2ZSBgaW5kZXhgLlxuICpcbiAqIFRoZSBgVEljdWAgY2FuIGJlIHN0b3JlZCBlaXRoZXIgZGlyZWN0bHkgKGlmIGl0IGlzIG5lc3RlZCBJQ1UpIE9SXG4gKiBpdCBpcyBzdG9yZWQgaW5zaWRlIHRobyBgVEljdUNvbnRhaW5lcmAgaWYgaXQgaXMgdG9wIGxldmVsIElDVS5cbiAqXG4gKiBUaGUgcmVhc29uIGZvciB0aGlzIGlzIHRoYXQgdGhlIHRvcCBsZXZlbCBJQ1UgbmVlZCBhIGBUTm9kZWAgc28gdGhhdCB0aGV5IGFyZSBwYXJ0IG9mIHRoZSByZW5kZXJcbiAqIHRyZWUsIGJ1dCBuZXN0ZWQgSUNVJ3MgaGF2ZSBubyBUTm9kZSwgYmVjYXVzZSB3ZSBkb24ndCBrbm93IGFoZWFkIG9mIHRpbWUgaWYgdGhlIG5lc3RlZCBJQ1UgaXNcbiAqIGV4cHJlc3NlZCAocGFyZW50IElDVSBtYXkgaGF2ZSBzZWxlY3RlZCBhIGNhc2Ugd2hpY2ggZG9lcyBub3QgY29udGFpbiBpdC4pXG4gKlxuICogQHBhcmFtIHRWaWV3IEN1cnJlbnQgYFRWaWV3YC5cbiAqIEBwYXJhbSBpbmRleCBJbmRleCB3aGVyZSB0aGUgdmFsdWUgc2hvdWxkIGJlIHN0b3JlZCBhdCBpbiBgVHZpZXcuZGF0YWBcbiAqIEBwYXJhbSB0SWN1IFRoZSBUSWN1IHRvIHN0b3JlLlxuICovXG5mdW5jdGlvbiBzZXRUSWN1KHRWaWV3LCBpbmRleCwgdEljdSkge1xuICAgIGNvbnN0IHROb2RlID0gdFZpZXcuZGF0YVtpbmRleF07XG4gICAgbmdEZXZNb2RlICYmXG4gICAgICAgIGFzc2VydEVxdWFsKHROb2RlID09PSBudWxsIHx8IHROb2RlLmhhc093blByb3BlcnR5KCd0Vmlld3MnKSwgdHJ1ZSwgJ1dlIGV4cGVjdCB0byBnZXQgXFwnbnVsbFxcJ3xcXCdUSWN1Q29udGFpbmVyXFwnJyk7XG4gICAgaWYgKHROb2RlID09PSBudWxsKSB7XG4gICAgICAgIHRWaWV3LmRhdGFbaW5kZXhdID0gdEljdTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUTm9kZVR5cGUodE5vZGUsIDMyIC8qIEljdSAqLyk7XG4gICAgICAgIHROb2RlLnZhbHVlID0gdEljdTtcbiAgICB9XG59XG4vKipcbiAqIFNldCBgVE5vZGUuaW5zZXJ0QmVmb3JlSW5kZXhgIHRha2luZyB0aGUgYEFycmF5YCBpbnRvIGFjY291bnQuXG4gKlxuICogU2VlIGBUTm9kZS5pbnNlcnRCZWZvcmVJbmRleGBcbiAqL1xuZnVuY3Rpb24gc2V0VE5vZGVJbnNlcnRCZWZvcmVJbmRleCh0Tm9kZSwgaW5kZXgpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VE5vZGUodE5vZGUpO1xuICAgIGxldCBpbnNlcnRCZWZvcmVJbmRleCA9IHROb2RlLmluc2VydEJlZm9yZUluZGV4O1xuICAgIGlmIChpbnNlcnRCZWZvcmVJbmRleCA9PT0gbnVsbCkge1xuICAgICAgICBzZXRJMThuSGFuZGxpbmcoZ2V0SW5zZXJ0SW5Gcm9udE9mUk5vZGVXaXRoSTE4biwgcHJvY2Vzc0kxOG5JbnNlcnRCZWZvcmUpO1xuICAgICAgICBpbnNlcnRCZWZvcmVJbmRleCA9IHROb2RlLmluc2VydEJlZm9yZUluZGV4ID1cbiAgICAgICAgICAgIFtudWxsIC8qIG1heSBiZSB1cGRhdGVkIHRvIG51bWJlciBsYXRlciAqLywgaW5kZXhdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0RXF1YWwoQXJyYXkuaXNBcnJheShpbnNlcnRCZWZvcmVJbmRleCksIHRydWUsICdFeHBlY3RpbmcgYXJyYXkgaGVyZScpO1xuICAgICAgICBpbnNlcnRCZWZvcmVJbmRleC5wdXNoKGluZGV4KTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZSBgVE5vZGUudHlwZT1UTm9kZVR5cGUuUGxhY2Vob2xkZXJgIG5vZGUuXG4gKlxuICogU2VlIGBUTm9kZVR5cGUuUGxhY2Vob2xkZXJgIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVUTm9kZVBsYWNlaG9sZGVyKHRWaWV3LCBwcmV2aW91c1ROb2RlcywgaW5kZXgpIHtcbiAgICBjb25zdCB0Tm9kZSA9IGNyZWF0ZVROb2RlQXRJbmRleCh0VmlldywgaW5kZXgsIDY0IC8qIFBsYWNlaG9sZGVyICovLCBudWxsLCBudWxsKTtcbiAgICBhZGRUTm9kZUFuZFVwZGF0ZUluc2VydEJlZm9yZUluZGV4KHByZXZpb3VzVE5vZGVzLCB0Tm9kZSk7XG4gICAgcmV0dXJuIHROb2RlO1xufVxuLyoqXG4gKiBSZXR1cm5zIGN1cnJlbnQgSUNVIGNhc2UuXG4gKlxuICogSUNVIGNhc2VzIGFyZSBzdG9yZWQgYXMgaW5kZXggaW50byB0aGUgYFRJY3UuY2FzZXNgLlxuICogQXQgdGltZXMgaXQgaXMgbmVjZXNzYXJ5IHRvIGNvbW11bmljYXRlIHRoYXQgdGhlIElDVSBjYXNlIGp1c3Qgc3dpdGNoZWQgYW5kIHRoYXQgbmV4dCBJQ1UgdXBkYXRlXG4gKiBzaG91bGQgdXBkYXRlIGFsbCBiaW5kaW5ncyByZWdhcmRsZXNzIG9mIHRoZSBtYXNrLiBJbiBzdWNoIGEgY2FzZSB0aGUgd2Ugc3RvcmUgbmVnYXRpdmUgbnVtYmVyc1xuICogZm9yIGNhc2VzIHdoaWNoIGhhdmUganVzdCBiZWVuIHN3aXRjaGVkLiBUaGlzIGZ1bmN0aW9uIHJlbW92ZXMgdGhlIG5lZ2F0aXZlIGZsYWcuXG4gKi9cbmZ1bmN0aW9uIGdldEN1cnJlbnRJQ1VDYXNlSW5kZXgodEljdSwgbFZpZXcpIHtcbiAgICBjb25zdCBjdXJyZW50Q2FzZSA9IGxWaWV3W3RJY3UuY3VycmVudENhc2VMVmlld0luZGV4XTtcbiAgICByZXR1cm4gY3VycmVudENhc2UgPT09IG51bGwgPyBjdXJyZW50Q2FzZSA6IChjdXJyZW50Q2FzZSA8IDAgPyB+Y3VycmVudENhc2UgOiBjdXJyZW50Q2FzZSk7XG59XG5mdW5jdGlvbiBnZXRQYXJlbnRGcm9tSWN1Q3JlYXRlT3BDb2RlKG1lcmdlZENvZGUpIHtcbiAgICByZXR1cm4gbWVyZ2VkQ29kZSA+Pj4gMTcgLyogU0hJRlRfUEFSRU5UICovO1xufVxuZnVuY3Rpb24gZ2V0UmVmRnJvbUljdUNyZWF0ZU9wQ29kZShtZXJnZWRDb2RlKSB7XG4gICAgcmV0dXJuIChtZXJnZWRDb2RlICYgMTMxMDcwIC8qIE1BU0tfUkVGICovKSA+Pj4gMSAvKiBTSElGVF9SRUYgKi87XG59XG5mdW5jdGlvbiBnZXRJbnN0cnVjdGlvbkZyb21JY3VDcmVhdGVPcENvZGUobWVyZ2VkQ29kZSkge1xuICAgIHJldHVybiBtZXJnZWRDb2RlICYgMSAvKiBNQVNLX0lOU1RSVUNUSU9OICovO1xufVxuZnVuY3Rpb24gaWN1Q3JlYXRlT3BDb2RlKG9wQ29kZSwgcGFyZW50SWR4LCByZWZJZHgpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0R3JlYXRlclRoYW5PckVxdWFsKHBhcmVudElkeCwgMCwgJ01pc3NpbmcgcGFyZW50IGluZGV4Jyk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEdyZWF0ZXJUaGFuKHJlZklkeCwgMCwgJ01pc3NpbmcgcmVmIGluZGV4Jyk7XG4gICAgcmV0dXJuIG9wQ29kZSB8IHBhcmVudElkeCA8PCAxNyAvKiBTSElGVF9QQVJFTlQgKi8gfCByZWZJZHggPDwgMSAvKiBTSElGVF9SRUYgKi87XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBLZWVwIHRyYWNrIG9mIHdoaWNoIGlucHV0IGJpbmRpbmdzIGluIGDJtcm1aTE4bkV4cGAgaGF2ZSBjaGFuZ2VkLlxuICpcbiAqIFRoaXMgaXMgdXNlZCB0byBlZmZpY2llbnRseSB1cGRhdGUgZXhwcmVzc2lvbnMgaW4gaTE4biBvbmx5IHdoZW4gdGhlIGNvcnJlc3BvbmRpbmcgaW5wdXQgaGFzXG4gKiBjaGFuZ2VkLlxuICpcbiAqIDEpIEVhY2ggYml0IHJlcHJlc2VudHMgd2hpY2ggb2YgdGhlIGDJtcm1aTE4bkV4cGAgaGFzIGNoYW5nZWQuXG4gKiAyKSBUaGVyZSBhcmUgMzIgYml0cyBhbGxvd2VkIGluIEpTLlxuICogMykgQml0IDMyIGlzIHNwZWNpYWwgYXMgaXQgaXMgc2hhcmVkIGZvciBhbGwgY2hhbmdlcyBwYXN0IDMyLiAoSW4gb3RoZXIgd29yZHMgaWYgeW91IGhhdmUgbW9yZVxuICogdGhhbiAzMiBgybXJtWkxOG5FeHBgIHRoZW4gYWxsIGNoYW5nZXMgcGFzdCAzMm5kIGDJtcm1aTE4bkV4cGAgd2lsbCBiZSBtYXBwZWQgdG8gc2FtZSBiaXQuIFRoaXMgbWVhbnNcbiAqIHRoYXQgd2UgbWF5IGVuZCB1cCBjaGFuZ2luZyBtb3JlIHRoYW4gd2UgbmVlZCB0by4gQnV0IGkxOG4gZXhwcmVzc2lvbnMgd2l0aCAzMiBiaW5kaW5ncyBpcyByYXJlXG4gKiBzbyBpbiBwcmFjdGljZSBpdCBzaG91bGQgbm90IGJlIGFuIGlzc3VlLilcbiAqL1xubGV0IGNoYW5nZU1hc2sgPSAwYjA7XG4vKipcbiAqIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGJpdCBuZWVkcyB0byBiZSB1cGRhdGVkIGluIGBjaGFuZ2VNYXNrYFxuICpcbiAqIFRoaXMgdmFsdWUgZ2V0cyBpbmNyZW1lbnRlZCBvbiBldmVyeSBjYWxsIHRvIGDJtcm1aTE4bkV4cGBcbiAqL1xubGV0IGNoYW5nZU1hc2tDb3VudGVyID0gMDtcbi8qKlxuICogS2VlcCB0cmFjayBvZiB3aGljaCBpbnB1dCBiaW5kaW5ncyBpbiBgybXJtWkxOG5FeHBgIGhhdmUgY2hhbmdlZC5cbiAqXG4gKiBgc2V0TWFza0JpdGAgZ2V0cyBpbnZva2VkIGJ5IGVhY2ggY2FsbCB0byBgybXJtWkxOG5FeHBgLlxuICpcbiAqIEBwYXJhbSBoYXNDaGFuZ2UgZGlkIGDJtcm1aTE4bkV4cGAgZGV0ZWN0IGEgY2hhbmdlLlxuICovXG5mdW5jdGlvbiBzZXRNYXNrQml0KGhhc0NoYW5nZSkge1xuICAgIGlmIChoYXNDaGFuZ2UpIHtcbiAgICAgICAgY2hhbmdlTWFzayA9IGNoYW5nZU1hc2sgfCAoMSA8PCBNYXRoLm1pbihjaGFuZ2VNYXNrQ291bnRlciwgMzEpKTtcbiAgICB9XG4gICAgY2hhbmdlTWFza0NvdW50ZXIrKztcbn1cbmZ1bmN0aW9uIGFwcGx5STE4bih0VmlldywgbFZpZXcsIGluZGV4KSB7XG4gICAgaWYgKGNoYW5nZU1hc2tDb3VudGVyID4gMCkge1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0VmlldywgYHRWaWV3IHNob3VsZCBiZSBkZWZpbmVkYCk7XG4gICAgICAgIGNvbnN0IHRJMThuID0gdFZpZXcuZGF0YVtpbmRleF07XG4gICAgICAgIC8vIFdoZW4gYGluZGV4YCBwb2ludHMgdG8gYW4gYMm1ybVpMThuQXR0cmlidXRlc2AgdGhlbiB3ZSBoYXZlIGFuIGFycmF5IG90aGVyd2lzZSBgVEkxOG5gXG4gICAgICAgIGNvbnN0IHVwZGF0ZU9wQ29kZXMgPSBBcnJheS5pc0FycmF5KHRJMThuKSA/IHRJMThuIDogdEkxOG4udXBkYXRlO1xuICAgICAgICBjb25zdCBiaW5kaW5nc1N0YXJ0SW5kZXggPSBnZXRCaW5kaW5nSW5kZXgoKSAtIGNoYW5nZU1hc2tDb3VudGVyIC0gMTtcbiAgICAgICAgYXBwbHlVcGRhdGVPcENvZGVzKHRWaWV3LCBsVmlldywgdXBkYXRlT3BDb2RlcywgYmluZGluZ3NTdGFydEluZGV4LCBjaGFuZ2VNYXNrKTtcbiAgICB9XG4gICAgLy8gUmVzZXQgY2hhbmdlTWFzayAmIG1hc2tCaXQgdG8gZGVmYXVsdCBmb3IgdGhlIG5leHQgdXBkYXRlIGN5Y2xlXG4gICAgY2hhbmdlTWFzayA9IDBiMDtcbiAgICBjaGFuZ2VNYXNrQ291bnRlciA9IDA7XG59XG4vKipcbiAqIEFwcGx5IGBJMThuQ3JlYXRlT3BDb2Rlc2Agb3AtY29kZXMgYXMgc3RvcmVkIGluIGBUSTE4bi5jcmVhdGVgLlxuICpcbiAqIENyZWF0ZXMgdGV4dCAoYW5kIGNvbW1lbnQpIG5vZGVzIHdoaWNoIGFyZSBpbnRlcm5hdGlvbmFsaXplZC5cbiAqXG4gKiBAcGFyYW0gbFZpZXcgQ3VycmVudCBsVmlld1xuICogQHBhcmFtIGNyZWF0ZU9wQ29kZXMgU2V0IG9mIG9wLWNvZGVzIHRvIGFwcGx5XG4gKiBAcGFyYW0gcGFyZW50Uk5vZGUgUGFyZW50IG5vZGUgKHNvIHRoYXQgZGlyZWN0IGNoaWxkcmVuIGNhbiBiZSBhZGRlZCBlYWdlcmx5KSBvciBgbnVsbGAgaWYgaXQgaXNcbiAqICAgICBhIHJvb3Qgbm9kZS5cbiAqIEBwYXJhbSBpbnNlcnRJbkZyb250T2YgRE9NIG5vZGUgdGhhdCBzaG91bGQgYmUgdXNlZCBhcyBhbiBhbmNob3IuXG4gKi9cbmZ1bmN0aW9uIGFwcGx5Q3JlYXRlT3BDb2RlcyhsVmlldywgY3JlYXRlT3BDb2RlcywgcGFyZW50Uk5vZGUsIGluc2VydEluRnJvbnRPZikge1xuICAgIGNvbnN0IHJlbmRlcmVyID0gbFZpZXdbUkVOREVSRVJdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3JlYXRlT3BDb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBvcENvZGUgPSBjcmVhdGVPcENvZGVzW2krK107XG4gICAgICAgIGNvbnN0IHRleHQgPSBjcmVhdGVPcENvZGVzW2ldO1xuICAgICAgICBjb25zdCBpc0NvbW1lbnQgPSAob3BDb2RlICYgSTE4bkNyZWF0ZU9wQ29kZS5DT01NRU5UKSA9PT0gSTE4bkNyZWF0ZU9wQ29kZS5DT01NRU5UO1xuICAgICAgICBjb25zdCBhcHBlbmROb3cgPSAob3BDb2RlICYgSTE4bkNyZWF0ZU9wQ29kZS5BUFBFTkRfRUFHRVJMWSkgPT09IEkxOG5DcmVhdGVPcENvZGUuQVBQRU5EX0VBR0VSTFk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gb3BDb2RlID4+PiBJMThuQ3JlYXRlT3BDb2RlLlNISUZUO1xuICAgICAgICBsZXQgck5vZGUgPSBsVmlld1tpbmRleF07XG4gICAgICAgIGlmIChyTm9kZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gV2Ugb25seSBjcmVhdGUgbmV3IERPTSBub2RlcyBpZiB0aGV5IGRvbid0IGFscmVhZHkgZXhpc3Q6IElmIElDVSBzd2l0Y2hlcyBjYXNlIGJhY2sgdG8gYVxuICAgICAgICAgICAgLy8gY2FzZSB3aGljaCB3YXMgYWxyZWFkeSBpbnN0YW50aWF0ZWQsIG5vIG5lZWQgdG8gY3JlYXRlIG5ldyBET00gbm9kZXMuXG4gICAgICAgICAgICByTm9kZSA9IGxWaWV3W2luZGV4XSA9XG4gICAgICAgICAgICAgICAgaXNDb21tZW50ID8gcmVuZGVyZXIuY3JlYXRlQ29tbWVudCh0ZXh0KSA6IGNyZWF0ZVRleHROb2RlKHJlbmRlcmVyLCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwZW5kTm93ICYmIHBhcmVudFJOb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBuYXRpdmVJbnNlcnRCZWZvcmUocmVuZGVyZXIsIHBhcmVudFJOb2RlLCByTm9kZSwgaW5zZXJ0SW5Gcm9udE9mLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEFwcGx5IGBJMThuTXV0YXRlT3BDb2Rlc2AgT3BDb2Rlcy5cbiAqXG4gKiBAcGFyYW0gdFZpZXcgQ3VycmVudCBgVFZpZXdgXG4gKiBAcGFyYW0gbXV0YWJsZU9wQ29kZXMgTXV0YWJsZSBPcENvZGVzIHRvIHByb2Nlc3NcbiAqIEBwYXJhbSBsVmlldyBDdXJyZW50IGBMVmlld2BcbiAqIEBwYXJhbSBhbmNob3JSTm9kZSBwbGFjZSB3aGVyZSB0aGUgaTE4biBub2RlIHNob3VsZCBiZSBpbnNlcnRlZC5cbiAqL1xuZnVuY3Rpb24gYXBwbHlNdXRhYmxlT3BDb2Rlcyh0VmlldywgbXV0YWJsZU9wQ29kZXMsIGxWaWV3LCBhbmNob3JSTm9kZSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREb21Ob2RlKGFuY2hvclJOb2RlKTtcbiAgICBjb25zdCByZW5kZXJlciA9IGxWaWV3W1JFTkRFUkVSXTtcbiAgICAvLyBgcm9vdElkeGAgcmVwcmVzZW50cyB0aGUgbm9kZSBpbnRvIHdoaWNoIGFsbCBpbnNlcnRzIGhhcHBlbi5cbiAgICBsZXQgcm9vdElkeCA9IG51bGw7XG4gICAgLy8gYHJvb3RSTm9kZWAgcmVwcmVzZW50cyB0aGUgcmVhbCBub2RlIGludG8gd2hpY2ggd2UgaW5zZXJ0LiBUaGlzIGNhbiBiZSBkaWZmZXJlbnQgZnJvbVxuICAgIC8vIGBsVmlld1tyb290SWR4XWAgaWYgd2UgaGF2ZSBwcm9qZWN0aW9uLlxuICAgIC8vICAtIG51bGwgd2UgZG9uJ3QgaGF2ZSBhIHBhcmVudCAoYXMgY2FuIGJlIHRoZSBjYXNlIGluIHdoZW4gd2UgYXJlIGluc2VydGluZyBpbnRvIGEgcm9vdCBvZlxuICAgIC8vICAgIExWaWV3IHdoaWNoIGhhcyBubyBwYXJlbnQuKVxuICAgIC8vICAtIGBSRWxlbWVudGAgVGhlIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSByb290IGFmdGVyIHRha2luZyBwcm9qZWN0aW9uIGludG8gYWNjb3VudC5cbiAgICBsZXQgcm9vdFJOb2RlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXV0YWJsZU9wQ29kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgb3BDb2RlID0gbXV0YWJsZU9wQ29kZXNbaV07XG4gICAgICAgIGlmICh0eXBlb2Ygb3BDb2RlID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0Tm9kZUluZGV4ID0gbXV0YWJsZU9wQ29kZXNbKytpXTtcbiAgICAgICAgICAgIGlmIChsVmlld1t0ZXh0Tm9kZUluZGV4XSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJDcmVhdGVUZXh0Tm9kZSsrO1xuICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRJbmRleEluUmFuZ2UobFZpZXcsIHRleHROb2RlSW5kZXgpO1xuICAgICAgICAgICAgICAgIGxWaWV3W3RleHROb2RlSW5kZXhdID0gY3JlYXRlVGV4dE5vZGUocmVuZGVyZXIsIG9wQ29kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9wQ29kZSA9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgc3dpdGNoIChvcENvZGUgJiAxIC8qIE1BU0tfSU5TVFJVQ1RJT04gKi8pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDAgLyogQXBwZW5kQ2hpbGQgKi86XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudElkeCA9IGdldFBhcmVudEZyb21JY3VDcmVhdGVPcENvZGUob3BDb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RJZHggPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBmaXJzdCBvcGVyYXRpb24gc2hvdWxkIHNhdmUgdGhlIGByb290SWR4YCBiZWNhdXNlIHRoZSBmaXJzdCBvcGVyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG11c3QgaW5zZXJ0IGludG8gdGhlIHJvb3QuIChPbmx5IHN1YnNlcXVlbnQgb3BlcmF0aW9ucyBjYW4gaW5zZXJ0IGludG8gYSBkeW5hbWljXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXJlbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICByb290SWR4ID0gcGFyZW50SWR4O1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFJOb2RlID0gbmF0aXZlUGFyZW50Tm9kZShyZW5kZXJlciwgYW5jaG9yUk5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnNlcnRJbkZyb250T2Y7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJlbnRSTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudElkeCA9PT0gcm9vdElkeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0SW5Gcm9udE9mID0gYW5jaG9yUk5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRSTm9kZSA9IHJvb3RSTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydEluRnJvbnRPZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRSTm9kZSA9IHVud3JhcFJOb2RlKGxWaWV3W3BhcmVudElkeF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIEZJWE1FKG1pc2tvKTogUmVmYWN0b3Igd2l0aCBgcHJvY2Vzc0kxOG5UZXh0YFxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50Uk5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgYExWaWV3YCB3ZSBhcmUgYWRkaW5nIHRvIGlzIG5vdCBhdHRhY2hlZCB0byBhIHBhcmVudCBgTFZpZXdgLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gc3VjaCBhIGNhc2UgdGhlcmUgaXMgbm8gXCJyb290XCIgd2UgY2FuIGF0dGFjaCB0by4gVGhpcyBpcyBmaW5lLCBhcyB3ZSBzdGlsbCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIGVsZW1lbnRzLiBXaGVuIHRoZSBgTFZpZXdgIGdldHMgbGF0ZXIgYWRkZWQgdG8gYSBwYXJlbnQgdGhlc2UgXCJyb290XCIgbm9kZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBwaWNrZWQgdXAgYW5kIGFkZGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydERvbU5vZGUocGFyZW50Uk5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVmSWR4ID0gZ2V0UmVmRnJvbUljdUNyZWF0ZU9wQ29kZShvcENvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydEdyZWF0ZXJUaGFuKHJlZklkeCwgSEVBREVSX09GRlNFVCwgJ01pc3NpbmcgcmVmJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBgdW53cmFwUk5vZGVgIGlzIG5vdCBuZWVkZWQgaGVyZSBhcyBhbGwgb2YgdGhlc2UgcG9pbnQgdG8gUk5vZGVzIGFzIHBhcnQgb2YgdGhlIGkxOG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoaWNoIGNhbid0IGhhdmUgY29tcG9uZW50cy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gbFZpZXdbcmVmSWR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREb21Ob2RlKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdGl2ZUluc2VydEJlZm9yZShyZW5kZXJlciwgcGFyZW50Uk5vZGUsIGNoaWxkLCBpbnNlcnRJbkZyb250T2YsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRJY3UgPSBnZXRUSWN1KHRWaWV3LCByZWZJZHgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRJY3UgIT09IG51bGwgJiYgdHlwZW9mIHRJY3UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UganVzdCBhZGRlZCBhIGNvbW1lbnQgbm9kZSB3aGljaCBoYXMgSUNVIHRoZW4gdGhhdCBJQ1UgbWF5IGhhdmUgYWxyZWFkeSBiZWVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVuZGVyZWQgYW5kIHRoZXJlZm9yZSB3ZSBuZWVkIHRvIHJlLWFkZCBpdCBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUSWN1KHRJY3UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhc2VJbmRleCA9IGdldEN1cnJlbnRJQ1VDYXNlSW5kZXgodEljdSwgbFZpZXcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYXNlSW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlNdXRhYmxlT3BDb2Rlcyh0VmlldywgdEljdS5jcmVhdGVbY2FzZUluZGV4XSwgbFZpZXcsIGxWaWV3W3RJY3UuYW5jaG9ySWR4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBBdHRyICovOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50Tm9kZUluZGV4ID0gb3BDb2RlID4+PiAxIC8qIFNISUZUX1JFRiAqLztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0ck5hbWUgPSBtdXRhYmxlT3BDb2Rlc1srK2ldO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyVmFsdWUgPSBtdXRhYmxlT3BDb2Rlc1srK2ldO1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNvZGUgaXMgdXNlZCBmb3IgSUNVIGV4cHJlc3Npb25zIG9ubHksIHNpbmNlIHdlIGRvbid0IHN1cHBvcnRcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlyZWN0aXZlcy9jb21wb25lbnRzIGluIElDVXMsIHdlIGRvbid0IG5lZWQgdG8gd29ycnkgYWJvdXQgaW5wdXRzIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgc2V0RWxlbWVudEF0dHJpYnV0ZShyZW5kZXJlciwgZ2V0TmF0aXZlQnlJbmRleChlbGVtZW50Tm9kZUluZGV4LCBsVmlldyksIG51bGwsIG51bGwsIGF0dHJOYW1lLCBhdHRyVmFsdWUsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDcwMCAvKiBJTlZBTElEX0kxOE5fU1RSVUNUVVJFICovLCBgVW5hYmxlIHRvIGRldGVybWluZSB0aGUgdHlwZSBvZiBtdXRhdGUgb3BlcmF0aW9uIGZvciBcIiR7b3BDb2RlfVwiYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaCAob3BDb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBJQ1VfTUFSS0VSOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50VmFsdWUgPSBtdXRhYmxlT3BDb2Rlc1srK2ldO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50Tm9kZUluZGV4ID0gbXV0YWJsZU9wQ29kZXNbKytpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxWaWV3W2NvbW1lbnROb2RlSW5kZXhdID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbCh0eXBlb2YgY29tbWVudFZhbHVlLCAnc3RyaW5nJywgYEV4cGVjdGVkIFwiJHtjb21tZW50VmFsdWV9XCIgdG8gYmUgYSBjb21tZW50IG5vZGUgdmFsdWVgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBuZ0Rldk1vZGUucmVuZGVyZXJDcmVhdGVDb21tZW50Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0SW5kZXhJbkV4cGFuZG9SYW5nZShsVmlldywgY29tbWVudE5vZGVJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb21tZW50Uk5vZGUgPSBsVmlld1tjb21tZW50Tm9kZUluZGV4XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ29tbWVudE5vZGUocmVuZGVyZXIsIGNvbW1lbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRShtaXNrbyk6IEF0dGFjaGluZyBwYXRjaCBkYXRhIGlzIG9ubHkgbmVlZGVkIGZvciB0aGUgcm9vdCAoQWxzbyBhZGQgdGVzdHMpXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2hQYXRjaERhdGEoY29tbWVudFJOb2RlLCBsVmlldyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBFTEVNRU5UX01BUktFUjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFnTmFtZSA9IG11dGFibGVPcENvZGVzWysraV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnROb2RlSW5kZXggPSBtdXRhYmxlT3BDb2Rlc1srK2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobFZpZXdbZWxlbWVudE5vZGVJbmRleF0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydEVxdWFsKHR5cGVvZiB0YWdOYW1lLCAnc3RyaW5nJywgYEV4cGVjdGVkIFwiJHt0YWdOYW1lfVwiIHRvIGJlIGFuIGVsZW1lbnQgbm9kZSB0YWcgbmFtZWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5yZW5kZXJlckNyZWF0ZUVsZW1lbnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRJbmRleEluRXhwYW5kb1JhbmdlKGxWaWV3LCBlbGVtZW50Tm9kZUluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRSTm9kZSA9IGxWaWV3W2VsZW1lbnROb2RlSW5kZXhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVFbGVtZW50Tm9kZShyZW5kZXJlciwgdGFnTmFtZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRShtaXNrbyk6IEF0dGFjaGluZyBwYXRjaCBkYXRhIGlzIG9ubHkgbmVlZGVkIGZvciB0aGUgcm9vdCAoQWxzbyBhZGQgdGVzdHMpXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRhY2hQYXRjaERhdGEoZWxlbWVudFJOb2RlLCBsVmlldyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvd0Vycm9yKGBVbmFibGUgdG8gZGV0ZXJtaW5lIHRoZSB0eXBlIG9mIG11dGF0ZSBvcGVyYXRpb24gZm9yIFwiJHtvcENvZGV9XCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQXBwbHkgYEkxOG5VcGRhdGVPcENvZGVzYCBPcENvZGVzXG4gKlxuICogQHBhcmFtIHRWaWV3IEN1cnJlbnQgYFRWaWV3YFxuICogQHBhcmFtIGxWaWV3IEN1cnJlbnQgYExWaWV3YFxuICogQHBhcmFtIHVwZGF0ZU9wQ29kZXMgT3BDb2RlcyB0byBwcm9jZXNzXG4gKiBAcGFyYW0gYmluZGluZ3NTdGFydEluZGV4IExvY2F0aW9uIG9mIHRoZSBmaXJzdCBgybXJtWkxOG5BcHBseWBcbiAqIEBwYXJhbSBjaGFuZ2VNYXNrIEVhY2ggYml0IGNvcnJlc3BvbmRzIHRvIGEgYMm1ybVpMThuRXhwYCAoQ291bnRpbmcgYmFja3dhcmRzIGZyb21cbiAqICAgICBgYmluZGluZ3NTdGFydEluZGV4YClcbiAqL1xuZnVuY3Rpb24gYXBwbHlVcGRhdGVPcENvZGVzKHRWaWV3LCBsVmlldywgdXBkYXRlT3BDb2RlcywgYmluZGluZ3NTdGFydEluZGV4LCBjaGFuZ2VNYXNrKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB1cGRhdGVPcENvZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGJpdCBjb2RlIHRvIGNoZWNrIGlmIHdlIHNob3VsZCBhcHBseSB0aGUgbmV4dCB1cGRhdGVcbiAgICAgICAgY29uc3QgY2hlY2tCaXQgPSB1cGRhdGVPcENvZGVzW2ldO1xuICAgICAgICAvLyBOdW1iZXIgb2Ygb3BDb2RlcyB0byBza2lwIHVudGlsIG5leHQgc2V0IG9mIHVwZGF0ZSBjb2Rlc1xuICAgICAgICBjb25zdCBza2lwQ29kZXMgPSB1cGRhdGVPcENvZGVzWysraV07XG4gICAgICAgIGlmIChjaGVja0JpdCAmIGNoYW5nZU1hc2spIHtcbiAgICAgICAgICAgIC8vIFRoZSB2YWx1ZSBoYXMgYmVlbiB1cGRhdGVkIHNpbmNlIGxhc3QgY2hlY2tlZFxuICAgICAgICAgICAgbGV0IHZhbHVlID0gJyc7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPD0gKGkgKyBza2lwQ29kZXMpOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcENvZGUgPSB1cGRhdGVPcENvZGVzW2pdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3BDb2RlID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IG9wQ29kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9wQ29kZSA9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3BDb2RlIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmVnYXRpdmUgb3BDb2RlIHJlcHJlc2VudCBgaTE4bkV4cGAgdmFsdWVzIG9mZnNldC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IHJlbmRlclN0cmluZ2lmeShsVmlld1tiaW5kaW5nc1N0YXJ0SW5kZXggLSBvcENvZGVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVJbmRleCA9IChvcENvZGUgPj4+IDIgLyogU0hJRlRfUkVGICovKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3BDb2RlICYgMyAvKiBNQVNLX09QQ09ERSAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBBdHRyICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wTmFtZSA9IHVwZGF0ZU9wQ29kZXNbKytqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FuaXRpemVGbiA9IHVwZGF0ZU9wQ29kZXNbKytqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdE5vZGVPclRhZ05hbWUgPSB0Vmlldy5kYXRhW25vZGVJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKHROb2RlT3JUYWdOYW1lLCAnRXhwZXJ0aW5nIFROb2RlIG9yIHN0cmluZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHROb2RlT3JUYWdOYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUYgd2UgZG9uJ3QgaGF2ZSBhIGBUTm9kZWAsIHRoZW4gd2UgYXJlIGFuIGVsZW1lbnQgaW4gSUNVIChhcyBJQ1UgY29udGVudCBkb2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub3QgaGF2ZSBUTm9kZSksIGluIHdoaWNoIGNhc2Ugd2Uga25vdyB0aGF0IHRoZXJlIGFyZSBubyBkaXJlY3RpdmVzLCBhbmQgaGVuY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHVzZSBhdHRyaWJ1dGUgc2V0dGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVsZW1lbnRBdHRyaWJ1dGUobFZpZXdbUkVOREVSRVJdLCBsVmlld1tub2RlSW5kZXhdLCBudWxsLCB0Tm9kZU9yVGFnTmFtZSwgcHJvcE5hbWUsIHZhbHVlLCBzYW5pdGl6ZUZuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRQcm9wZXJ0eUludGVybmFsKHRWaWV3LCB0Tm9kZU9yVGFnTmFtZSwgbFZpZXcsIHByb3BOYW1lLCB2YWx1ZSwgbFZpZXdbUkVOREVSRVJdLCBzYW5pdGl6ZUZuLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIFRleHQgKi86XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJUZXh0ID0gbFZpZXdbbm9kZUluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgclRleHQgIT09IG51bGwgJiYgdXBkYXRlVGV4dE5vZGUobFZpZXdbUkVOREVSRVJdLCByVGV4dCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIgLyogSWN1U3dpdGNoICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseUljdVN3aXRjaENhc2UodFZpZXcsIGdldFRJY3UodFZpZXcsIG5vZGVJbmRleCksIGxWaWV3LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBJY3VVcGRhdGUgKi86XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5SWN1VXBkYXRlQ2FzZSh0VmlldywgZ2V0VEljdSh0Vmlldywgbm9kZUluZGV4KSwgYmluZGluZ3NTdGFydEluZGV4LCBsVmlldyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgb3BDb2RlID0gdXBkYXRlT3BDb2Rlc1tpICsgMV07XG4gICAgICAgICAgICBpZiAob3BDb2RlID4gMCAmJiAob3BDb2RlICYgMyAvKiBNQVNLX09QQ09ERSAqLykgPT09IDMgLyogSWN1VXBkYXRlICovKSB7XG4gICAgICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIGZvciB0aGUgYGljdVVwZGF0ZUNhc2VgLiBJdCBjb3VsZCBiZSB0aGF0IHRoZSBtYXNrIGRpZCBub3QgbWF0Y2gsIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHdlIHN0aWxsIG5lZWQgdG8gZXhlY3V0ZSBgaWN1VXBkYXRlQ2FzZWAgYmVjYXVzZSB0aGUgY2FzZSBoYXMgY2hhbmdlZCByZWNlbnRseSBkdWUgdG9cbiAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyBgaWN1U3dpdGNoQ2FzZWAgaW5zdHJ1Y3Rpb24uIChgaWN1U3dpdGNoQ2FzZWAgYW5kIGBpY3VVcGRhdGVDYXNlYCBhbHdheXMgY29tZSBpblxuICAgICAgICAgICAgICAgIC8vIHBhaXJzLilcbiAgICAgICAgICAgICAgICBjb25zdCBub2RlSW5kZXggPSAob3BDb2RlID4+PiAyIC8qIFNISUZUX1JFRiAqLyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdEljdSA9IGdldFRJY3UodFZpZXcsIG5vZGVJbmRleCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gbFZpZXdbdEljdS5jdXJyZW50Q2FzZUxWaWV3SW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcGx5SWN1VXBkYXRlQ2FzZSh0VmlldywgdEljdSwgYmluZGluZ3NTdGFydEluZGV4LCBsVmlldyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGkgKz0gc2tpcENvZGVzO1xuICAgIH1cbn1cbi8qKlxuICogQXBwbHkgT3BDb2RlcyBhc3NvY2lhdGVkIHdpdGggdXBkYXRpbmcgYW4gZXhpc3RpbmcgSUNVLlxuICpcbiAqIEBwYXJhbSB0VmlldyBDdXJyZW50IGBUVmlld2BcbiAqIEBwYXJhbSB0SWN1IEN1cnJlbnQgYFRJY3VgXG4gKiBAcGFyYW0gYmluZGluZ3NTdGFydEluZGV4IExvY2F0aW9uIG9mIHRoZSBmaXJzdCBgybXJtWkxOG5BcHBseWBcbiAqIEBwYXJhbSBsVmlldyBDdXJyZW50IGBMVmlld2BcbiAqL1xuZnVuY3Rpb24gYXBwbHlJY3VVcGRhdGVDYXNlKHRWaWV3LCB0SWN1LCBiaW5kaW5nc1N0YXJ0SW5kZXgsIGxWaWV3KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShsVmlldywgdEljdS5jdXJyZW50Q2FzZUxWaWV3SW5kZXgpO1xuICAgIGxldCBhY3RpdmVDYXNlSW5kZXggPSBsVmlld1t0SWN1LmN1cnJlbnRDYXNlTFZpZXdJbmRleF07XG4gICAgaWYgKGFjdGl2ZUNhc2VJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICBsZXQgbWFzayA9IGNoYW5nZU1hc2s7XG4gICAgICAgIGlmIChhY3RpdmVDYXNlSW5kZXggPCAwKSB7XG4gICAgICAgICAgICAvLyBDbGVhciB0aGUgZmxhZy5cbiAgICAgICAgICAgIC8vIE5lZ2F0aXZlIG51bWJlciBtZWFucyB0aGF0IHRoZSBJQ1Ugd2FzIGZyZXNobHkgY3JlYXRlZCBhbmQgd2UgbmVlZCB0byBmb3JjZSB0aGUgdXBkYXRlLlxuICAgICAgICAgICAgYWN0aXZlQ2FzZUluZGV4ID0gbFZpZXdbdEljdS5jdXJyZW50Q2FzZUxWaWV3SW5kZXhdID0gfmFjdGl2ZUNhc2VJbmRleDtcbiAgICAgICAgICAgIC8vIC0xIGlzIHNhbWUgYXMgYWxsIGJpdHMgb24sIHdoaWNoIHNpbXVsYXRlcyBjcmVhdGlvbiBzaW5jZSBpdCBtYXJrcyBhbGwgYml0cyBkaXJ0eVxuICAgICAgICAgICAgbWFzayA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGFwcGx5VXBkYXRlT3BDb2Rlcyh0VmlldywgbFZpZXcsIHRJY3UudXBkYXRlW2FjdGl2ZUNhc2VJbmRleF0sIGJpbmRpbmdzU3RhcnRJbmRleCwgbWFzayk7XG4gICAgfVxufVxuLyoqXG4gKiBBcHBseSBPcENvZGVzIGFzc29jaWF0ZWQgd2l0aCBzd2l0Y2hpbmcgYSBjYXNlIG9uIElDVS5cbiAqXG4gKiBUaGlzIGludm9sdmVzIHRlYXJpbmcgZG93biBleGlzdGluZyBjYXNlIGFuZCB0aGFuIGJ1aWxkaW5nIHVwIGEgbmV3IGNhc2UuXG4gKlxuICogQHBhcmFtIHRWaWV3IEN1cnJlbnQgYFRWaWV3YFxuICogQHBhcmFtIHRJY3UgQ3VycmVudCBgVEljdWBcbiAqIEBwYXJhbSBsVmlldyBDdXJyZW50IGBMVmlld2BcbiAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSBvZiB0aGUgY2FzZSB0byB1cGRhdGUgdG8uXG4gKi9cbmZ1bmN0aW9uIGFwcGx5SWN1U3dpdGNoQ2FzZSh0VmlldywgdEljdSwgbFZpZXcsIHZhbHVlKSB7XG4gICAgLy8gUmVidWlsZCBhIG5ldyBjYXNlIGZvciB0aGlzIElDVVxuICAgIGNvbnN0IGNhc2VJbmRleCA9IGdldENhc2VJbmRleCh0SWN1LCB2YWx1ZSk7XG4gICAgbGV0IGFjdGl2ZUNhc2VJbmRleCA9IGdldEN1cnJlbnRJQ1VDYXNlSW5kZXgodEljdSwgbFZpZXcpO1xuICAgIGlmIChhY3RpdmVDYXNlSW5kZXggIT09IGNhc2VJbmRleCkge1xuICAgICAgICBhcHBseUljdVN3aXRjaENhc2VSZW1vdmUodFZpZXcsIHRJY3UsIGxWaWV3KTtcbiAgICAgICAgbFZpZXdbdEljdS5jdXJyZW50Q2FzZUxWaWV3SW5kZXhdID0gY2FzZUluZGV4ID09PSBudWxsID8gbnVsbCA6IH5jYXNlSW5kZXg7XG4gICAgICAgIGlmIChjYXNlSW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIEFkZCB0aGUgbm9kZXMgZm9yIHRoZSBuZXcgY2FzZVxuICAgICAgICAgICAgY29uc3QgYW5jaG9yUk5vZGUgPSBsVmlld1t0SWN1LmFuY2hvcklkeF07XG4gICAgICAgICAgICBpZiAoYW5jaG9yUk5vZGUpIHtcbiAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RG9tTm9kZShhbmNob3JSTm9kZSk7XG4gICAgICAgICAgICAgICAgYXBwbHlNdXRhYmxlT3BDb2Rlcyh0VmlldywgdEljdS5jcmVhdGVbY2FzZUluZGV4XSwgbFZpZXcsIGFuY2hvclJOb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQXBwbHkgT3BDb2RlcyBhc3NvY2lhdGVkIHdpdGggdGVhcmluZyBJQ1UgY2FzZS5cbiAqXG4gKiBUaGlzIGludm9sdmVzIHRlYXJpbmcgZG93biBleGlzdGluZyBjYXNlIGFuZCB0aGFuIGJ1aWxkaW5nIHVwIGEgbmV3IGNhc2UuXG4gKlxuICogQHBhcmFtIHRWaWV3IEN1cnJlbnQgYFRWaWV3YFxuICogQHBhcmFtIHRJY3UgQ3VycmVudCBgVEljdWBcbiAqIEBwYXJhbSBsVmlldyBDdXJyZW50IGBMVmlld2BcbiAqL1xuZnVuY3Rpb24gYXBwbHlJY3VTd2l0Y2hDYXNlUmVtb3ZlKHRWaWV3LCB0SWN1LCBsVmlldykge1xuICAgIGxldCBhY3RpdmVDYXNlSW5kZXggPSBnZXRDdXJyZW50SUNVQ2FzZUluZGV4KHRJY3UsIGxWaWV3KTtcbiAgICBpZiAoYWN0aXZlQ2FzZUluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHJlbW92ZUNvZGVzID0gdEljdS5yZW1vdmVbYWN0aXZlQ2FzZUluZGV4XTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW1vdmVDb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgbm9kZU9ySWN1SW5kZXggPSByZW1vdmVDb2Rlc1tpXTtcbiAgICAgICAgICAgIGlmIChub2RlT3JJY3VJbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBQb3NpdGl2ZSBudW1iZXJzIGFyZSBgUk5vZGVgcy5cbiAgICAgICAgICAgICAgICBjb25zdCByTm9kZSA9IGdldE5hdGl2ZUJ5SW5kZXgobm9kZU9ySWN1SW5kZXgsIGxWaWV3KTtcbiAgICAgICAgICAgICAgICByTm9kZSAhPT0gbnVsbCAmJiBuYXRpdmVSZW1vdmVOb2RlKGxWaWV3W1JFTkRFUkVSXSwgck5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTmVnYXRpdmUgbnVtYmVycyBhcmUgSUNVc1xuICAgICAgICAgICAgICAgIGFwcGx5SWN1U3dpdGNoQ2FzZVJlbW92ZSh0VmlldywgZ2V0VEljdSh0Vmlldywgfm5vZGVPckljdUluZGV4KSwgbFZpZXcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBjYXNlIG9mIGFuIElDVSBleHByZXNzaW9uIGRlcGVuZGluZyBvbiB0aGUgbWFpbiBiaW5kaW5nIHZhbHVlXG4gKlxuICogQHBhcmFtIGljdUV4cHJlc3Npb25cbiAqIEBwYXJhbSBiaW5kaW5nVmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBtYWluIGJpbmRpbmcgdXNlZCBieSB0aGlzIElDVSBleHByZXNzaW9uXG4gKi9cbmZ1bmN0aW9uIGdldENhc2VJbmRleChpY3VFeHByZXNzaW9uLCBiaW5kaW5nVmFsdWUpIHtcbiAgICBsZXQgaW5kZXggPSBpY3VFeHByZXNzaW9uLmNhc2VzLmluZGV4T2YoYmluZGluZ1ZhbHVlKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHN3aXRjaCAoaWN1RXhwcmVzc2lvbi50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIDEgLyogcGx1cmFsICovOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRDYXNlID0gZ2V0UGx1cmFsQ2FzZShiaW5kaW5nVmFsdWUsIGdldExvY2FsZUlkKCkpO1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaWN1RXhwcmVzc2lvbi5jYXNlcy5pbmRleE9mKHJlc29sdmVkQ2FzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSAmJiByZXNvbHZlZENhc2UgIT09ICdvdGhlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpY3VFeHByZXNzaW9uLmNhc2VzLmluZGV4T2YoJ290aGVyJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAwIC8qIHNlbGVjdCAqLzoge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaWN1RXhwcmVzc2lvbi5jYXNlcy5pbmRleE9mKCdvdGhlcicpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbmRleCA9PT0gLTEgPyBudWxsIDogaW5kZXg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gbG9hZEljdUNvbnRhaW5lclZpc2l0b3IoKSB7XG4gICAgY29uc3QgX3N0YWNrID0gW107XG4gICAgbGV0IF9pbmRleCA9IC0xO1xuICAgIGxldCBfbFZpZXc7XG4gICAgbGV0IF9yZW1vdmVzO1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhIHNldCBvZiByb290IG5vZGVzIGZyb20gYFRJY3UucmVtb3ZlYC4gVXNlZCBieSBgVE5vZGVUeXBlLklDVUNvbnRhaW5lcmBcbiAgICAgKiB0byBkZXRlcm1pbmUgd2hpY2ggcm9vdCBiZWxvbmcgdG8gdGhlIElDVS5cbiAgICAgKlxuICAgICAqIEV4YW1wbGUgb2YgdXNhZ2UuXG4gICAgICogYGBgXG4gICAgICogY29uc3QgbmV4dFJOb2RlID0gaWN1Q29udGFpbmVySXRlcmF0b3JTdGFydCh0SWN1Q29udGFpbmVyTm9kZSwgbFZpZXcpO1xuICAgICAqIGxldCByTm9kZTogUk5vZGV8bnVsbDtcbiAgICAgKiB3aGlsZShyTm9kZSA9IG5leHRSTm9kZSgpKSB7XG4gICAgICogICBjb25zb2xlLmxvZyhyTm9kZSk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogQHBhcmFtIHRJY3VDb250YWluZXJOb2RlIEN1cnJlbnQgYFRJY3VDb250YWluZXJOb2RlYFxuICAgICAqIEBwYXJhbSBsVmlldyBgTFZpZXdgIHdoZXJlIHRoZSBgUk5vZGVgcyBzaG91bGQgYmUgbG9va2VkIHVwLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGljdUNvbnRhaW5lckl0ZXJhdG9yU3RhcnQodEljdUNvbnRhaW5lck5vZGUsIGxWaWV3KSB7XG4gICAgICAgIF9sVmlldyA9IGxWaWV3O1xuICAgICAgICB3aGlsZSAoX3N0YWNrLmxlbmd0aClcbiAgICAgICAgICAgIF9zdGFjay5wb3AoKTtcbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydFROb2RlRm9yTFZpZXcodEljdUNvbnRhaW5lck5vZGUsIGxWaWV3KTtcbiAgICAgICAgZW50ZXJJY3UodEljdUNvbnRhaW5lck5vZGUudmFsdWUsIGxWaWV3KTtcbiAgICAgICAgcmV0dXJuIGljdUNvbnRhaW5lckl0ZXJhdG9yTmV4dDtcbiAgICB9XG4gICAgZnVuY3Rpb24gZW50ZXJJY3UodEljdSwgbFZpZXcpIHtcbiAgICAgICAgX2luZGV4ID0gMDtcbiAgICAgICAgY29uc3QgY3VycmVudENhc2UgPSBnZXRDdXJyZW50SUNVQ2FzZUluZGV4KHRJY3UsIGxWaWV3KTtcbiAgICAgICAgaWYgKGN1cnJlbnRDYXNlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TnVtYmVySW5SYW5nZShjdXJyZW50Q2FzZSwgMCwgdEljdS5jYXNlcy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIF9yZW1vdmVzID0gdEljdS5yZW1vdmVbY3VycmVudENhc2VdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3JlbW92ZXMgPSBFTVBUWV9BUlJBWTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBpY3VDb250YWluZXJJdGVyYXRvck5leHQoKSB7XG4gICAgICAgIGlmIChfaW5kZXggPCBfcmVtb3Zlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZU9wQ29kZSA9IF9yZW1vdmVzW19pbmRleCsrXTtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROdW1iZXIocmVtb3ZlT3BDb2RlLCAnRXhwZWN0aW5nIE9wQ29kZSBudW1iZXInKTtcbiAgICAgICAgICAgIGlmIChyZW1vdmVPcENvZGUgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgck5vZGUgPSBfbFZpZXdbcmVtb3ZlT3BDb2RlXTtcbiAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RG9tTm9kZShyTm9kZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJOb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3N0YWNrLnB1c2goX2luZGV4LCBfcmVtb3Zlcyk7XG4gICAgICAgICAgICAgICAgLy8gSUNVcyBhcmUgcmVwcmVzZW50ZWQgYnkgbmVnYXRpdmUgaW5kaWNlc1xuICAgICAgICAgICAgICAgIGNvbnN0IHRJY3VJbmRleCA9IH5yZW1vdmVPcENvZGU7XG4gICAgICAgICAgICAgICAgY29uc3QgdEljdSA9IF9sVmlld1tUVklFV10uZGF0YVt0SWN1SW5kZXhdO1xuICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUSWN1KHRJY3UpO1xuICAgICAgICAgICAgICAgIGVudGVySWN1KHRJY3UsIF9sVmlldyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGljdUNvbnRhaW5lckl0ZXJhdG9yTmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKF9zdGFjay5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF9yZW1vdmVzID0gX3N0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgIF9pbmRleCA9IF9zdGFjay5wb3AoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaWN1Q29udGFpbmVySXRlcmF0b3JOZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGljdUNvbnRhaW5lckl0ZXJhdG9yU3RhcnQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBgSTE4bkNyZWF0ZU9wQ29kZXNgIGFycmF5IGludG8gYSBodW1hbiByZWFkYWJsZSBmb3JtYXQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyBhdHRhY2hlZCB0byB0aGUgYEkxOG5DcmVhdGVPcENvZGVzLmRlYnVnYCBwcm9wZXJ0eSBpZiBgbmdEZXZNb2RlYCBpcyBlbmFibGVkLlxuICogVGhpcyBmdW5jdGlvbiBwcm92aWRlcyBhIGh1bWFuIHJlYWRhYmxlIHZpZXcgb2YgdGhlIG9wY29kZXMuIFRoaXMgaXMgdXNlZnVsIHdoZW4gZGVidWdnaW5nIHRoZVxuICogYXBwbGljYXRpb24gYXMgd2VsbCBhcyB3cml0aW5nIG1vcmUgcmVhZGFibGUgdGVzdHMuXG4gKlxuICogQHBhcmFtIHRoaXMgYEkxOG5DcmVhdGVPcENvZGVzYCBpZiBhdHRhY2hlZCBhcyBhIG1ldGhvZC5cbiAqIEBwYXJhbSBvcGNvZGVzIGBJMThuQ3JlYXRlT3BDb2Rlc2AgaWYgaW52b2tlZCBhcyBhIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBpMThuQ3JlYXRlT3BDb2Rlc1RvU3RyaW5nKG9wY29kZXMpIHtcbiAgICBjb25zdCBjcmVhdGVPcENvZGVzID0gb3Bjb2RlcyB8fCAoQXJyYXkuaXNBcnJheSh0aGlzKSA/IHRoaXMgOiBbXSk7XG4gICAgbGV0IGxpbmVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjcmVhdGVPcENvZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG9wQ29kZSA9IGNyZWF0ZU9wQ29kZXNbaSsrXTtcbiAgICAgICAgY29uc3QgdGV4dCA9IGNyZWF0ZU9wQ29kZXNbaV07XG4gICAgICAgIGNvbnN0IGlzQ29tbWVudCA9IChvcENvZGUgJiBJMThuQ3JlYXRlT3BDb2RlLkNPTU1FTlQpID09PSBJMThuQ3JlYXRlT3BDb2RlLkNPTU1FTlQ7XG4gICAgICAgIGNvbnN0IGFwcGVuZE5vdyA9IChvcENvZGUgJiBJMThuQ3JlYXRlT3BDb2RlLkFQUEVORF9FQUdFUkxZKSA9PT0gSTE4bkNyZWF0ZU9wQ29kZS5BUFBFTkRfRUFHRVJMWTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBvcENvZGUgPj4+IEkxOG5DcmVhdGVPcENvZGUuU0hJRlQ7XG4gICAgICAgIGxpbmVzLnB1c2goYGxWaWV3WyR7aW5kZXh9XSA9IGRvY3VtZW50LiR7aXNDb21tZW50ID8gJ2NyZWF0ZUNvbW1lbnQnIDogJ2NyZWF0ZVRleHQnfSgke0pTT04uc3RyaW5naWZ5KHRleHQpfSk7YCk7XG4gICAgICAgIGlmIChhcHBlbmROb3cpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYHBhcmVudC5hcHBlbmRDaGlsZChsVmlld1ske2luZGV4fV0pO2ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsaW5lcztcbn1cbi8qKlxuICogQ29udmVydHMgYEkxOG5VcGRhdGVPcENvZGVzYCBhcnJheSBpbnRvIGEgaHVtYW4gcmVhZGFibGUgZm9ybWF0LlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgYXR0YWNoZWQgdG8gdGhlIGBJMThuVXBkYXRlT3BDb2Rlcy5kZWJ1Z2AgcHJvcGVydHkgaWYgYG5nRGV2TW9kZWAgaXMgZW5hYmxlZC5cbiAqIFRoaXMgZnVuY3Rpb24gcHJvdmlkZXMgYSBodW1hbiByZWFkYWJsZSB2aWV3IG9mIHRoZSBvcGNvZGVzLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIGRlYnVnZ2luZyB0aGVcbiAqIGFwcGxpY2F0aW9uIGFzIHdlbGwgYXMgd3JpdGluZyBtb3JlIHJlYWRhYmxlIHRlc3RzLlxuICpcbiAqIEBwYXJhbSB0aGlzIGBJMThuVXBkYXRlT3BDb2Rlc2AgaWYgYXR0YWNoZWQgYXMgYSBtZXRob2QuXG4gKiBAcGFyYW0gb3Bjb2RlcyBgSTE4blVwZGF0ZU9wQ29kZXNgIGlmIGludm9rZWQgYXMgYSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gaTE4blVwZGF0ZU9wQ29kZXNUb1N0cmluZyhvcGNvZGVzKSB7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IE9wQ29kZVBhcnNlcihvcGNvZGVzIHx8IChBcnJheS5pc0FycmF5KHRoaXMpID8gdGhpcyA6IFtdKSk7XG4gICAgbGV0IGxpbmVzID0gW107XG4gICAgZnVuY3Rpb24gY29uc3VtZU9wQ29kZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCByZWYgPSB2YWx1ZSA+Pj4gMiAvKiBTSElGVF9SRUYgKi87XG4gICAgICAgIGNvbnN0IG9wQ29kZSA9IHZhbHVlICYgMyAvKiBNQVNLX09QQ09ERSAqLztcbiAgICAgICAgc3dpdGNoIChvcENvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgMCAvKiBUZXh0ICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBgKGxWaWV3WyR7cmVmfV0gYXMgVGV4dCkudGV4dENvbnRlbnQgPSAkJCRgO1xuICAgICAgICAgICAgY2FzZSAxIC8qIEF0dHIgKi86XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0ck5hbWUgPSBwYXJzZXIuY29uc3VtZVN0cmluZygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNhbml0aXphdGlvbkZuID0gcGFyc2VyLmNvbnN1bWVGdW5jdGlvbigpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc2FuaXRpemF0aW9uRm4gPyBgKCR7c2FuaXRpemF0aW9uRm59KSgkJCQpYCA6ICckJCQnO1xuICAgICAgICAgICAgICAgIHJldHVybiBgKGxWaWV3WyR7cmVmfV0gYXMgRWxlbWVudCkuc2V0QXR0cmlidXRlKCcke2F0dHJOYW1lfScsICR7dmFsdWV9KWA7XG4gICAgICAgICAgICBjYXNlIDIgLyogSWN1U3dpdGNoICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBgaWN1U3dpdGNoQ2FzZSgke3JlZn0sICQkJClgO1xuICAgICAgICAgICAgY2FzZSAzIC8qIEljdVVwZGF0ZSAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYGljdVVwZGF0ZUNhc2UoJHtyZWZ9KWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkIE9wQ29kZScpO1xuICAgIH1cbiAgICB3aGlsZSAocGFyc2VyLmhhc01vcmUoKSkge1xuICAgICAgICBsZXQgbWFzayA9IHBhcnNlci5jb25zdW1lTnVtYmVyKCk7XG4gICAgICAgIGxldCBzaXplID0gcGFyc2VyLmNvbnN1bWVOdW1iZXIoKTtcbiAgICAgICAgY29uc3QgZW5kID0gcGFyc2VyLmkgKyBzaXplO1xuICAgICAgICBjb25zdCBzdGF0ZW1lbnRzID0gW107XG4gICAgICAgIGxldCBzdGF0ZW1lbnQgPSAnJztcbiAgICAgICAgd2hpbGUgKHBhcnNlci5pIDwgZW5kKSB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBwYXJzZXIuY29uc3VtZU51bWJlck9yU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHN0YXRlbWVudCArPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlIDwgMCkge1xuICAgICAgICAgICAgICAgIC8vIE5lZ2F0aXZlIG51bWJlcnMgYXJlIHJlZiBpbmRleGVzXG4gICAgICAgICAgICAgICAgLy8gSGVyZSBgaWAgcmVmZXJzIHRvIGN1cnJlbnQgYmluZGluZyBpbmRleC4gSXQgaXMgdG8gc2lnbmlmeSB0aGF0IHRoZSB2YWx1ZSBpcyByZWxhdGl2ZSxcbiAgICAgICAgICAgICAgICAvLyByYXRoZXIgdGhhbiBhYnNvbHV0ZS5cbiAgICAgICAgICAgICAgICBzdGF0ZW1lbnQgKz0gJyR7bFZpZXdbaScgKyB2YWx1ZSArICddfSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBQb3NpdGl2ZSBudW1iZXJzIGFyZSBvcGVyYXRpb25zLlxuICAgICAgICAgICAgICAgIGNvbnN0IG9wQ29kZVRleHQgPSBjb25zdW1lT3BDb2RlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBzdGF0ZW1lbnRzLnB1c2gob3BDb2RlVGV4dC5yZXBsYWNlKCckJCQnLCAnYCcgKyBzdGF0ZW1lbnQgKyAnYCcpICsgJzsnKTtcbiAgICAgICAgICAgICAgICBzdGF0ZW1lbnQgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKGBpZiAobWFzayAmIDBiJHttYXNrLnRvU3RyaW5nKDIpfSkgeyAke3N0YXRlbWVudHMuam9pbignICcpfSB9YCk7XG4gICAgfVxuICAgIHJldHVybiBsaW5lcztcbn1cbi8qKlxuICogQ29udmVydHMgYEkxOG5DcmVhdGVPcENvZGVzYCBhcnJheSBpbnRvIGEgaHVtYW4gcmVhZGFibGUgZm9ybWF0LlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgYXR0YWNoZWQgdG8gdGhlIGBJMThuQ3JlYXRlT3BDb2Rlcy5kZWJ1Z2AgaWYgYG5nRGV2TW9kZWAgaXMgZW5hYmxlZC4gVGhpc1xuICogZnVuY3Rpb24gcHJvdmlkZXMgYSBodW1hbiByZWFkYWJsZSB2aWV3IG9mIHRoZSBvcGNvZGVzLiBUaGlzIGlzIHVzZWZ1bCB3aGVuIGRlYnVnZ2luZyB0aGVcbiAqIGFwcGxpY2F0aW9uIGFzIHdlbGwgYXMgd3JpdGluZyBtb3JlIHJlYWRhYmxlIHRlc3RzLlxuICpcbiAqIEBwYXJhbSB0aGlzIGBJMThuQ3JlYXRlT3BDb2Rlc2AgaWYgYXR0YWNoZWQgYXMgYSBtZXRob2QuXG4gKiBAcGFyYW0gb3Bjb2RlcyBgSTE4bkNyZWF0ZU9wQ29kZXNgIGlmIGludm9rZWQgYXMgYSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gaWN1Q3JlYXRlT3BDb2Rlc1RvU3RyaW5nKG9wY29kZXMpIHtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgT3BDb2RlUGFyc2VyKG9wY29kZXMgfHwgKEFycmF5LmlzQXJyYXkodGhpcykgPyB0aGlzIDogW10pKTtcbiAgICBsZXQgbGluZXMgPSBbXTtcbiAgICBmdW5jdGlvbiBjb25zdW1lT3BDb2RlKG9wQ29kZSkge1xuICAgICAgICBjb25zdCBwYXJlbnQgPSBnZXRQYXJlbnRGcm9tSWN1Q3JlYXRlT3BDb2RlKG9wQ29kZSk7XG4gICAgICAgIGNvbnN0IHJlZiA9IGdldFJlZkZyb21JY3VDcmVhdGVPcENvZGUob3BDb2RlKTtcbiAgICAgICAgc3dpdGNoIChnZXRJbnN0cnVjdGlvbkZyb21JY3VDcmVhdGVPcENvZGUob3BDb2RlKSkge1xuICAgICAgICAgICAgY2FzZSAwIC8qIEFwcGVuZENoaWxkICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBgKGxWaWV3WyR7cGFyZW50fV0gYXMgRWxlbWVudCkuYXBwZW5kQ2hpbGQobFZpZXdbJHtsYXN0UmVmfV0pYDtcbiAgICAgICAgICAgIGNhc2UgMSAvKiBBdHRyICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBgKGxWaWV3WyR7cmVmfV0gYXMgRWxlbWVudCkuc2V0QXR0cmlidXRlKFwiJHtwYXJzZXIuY29uc3VtZVN0cmluZygpfVwiLCBcIiR7cGFyc2VyLmNvbnN1bWVTdHJpbmcoKX1cIilgO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBPcENvZGU6ICcgKyBnZXRJbnN0cnVjdGlvbkZyb21JY3VDcmVhdGVPcENvZGUob3BDb2RlKSk7XG4gICAgfVxuICAgIGxldCBsYXN0UmVmID0gLTE7XG4gICAgd2hpbGUgKHBhcnNlci5oYXNNb3JlKCkpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyc2VyLmNvbnN1bWVOdW1iZXJTdHJpbmdPck1hcmtlcigpO1xuICAgICAgICBpZiAodmFsdWUgPT09IElDVV9NQVJLRVIpIHtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBwYXJzZXIuY29uc3VtZVN0cmluZygpO1xuICAgICAgICAgICAgbGFzdFJlZiA9IHBhcnNlci5jb25zdW1lTnVtYmVyKCk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGBsVmlld1ske2xhc3RSZWZ9XSA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCIke3RleHR9XCIpYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IEVMRU1FTlRfTUFSS0VSKSB7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gcGFyc2VyLmNvbnN1bWVTdHJpbmcoKTtcbiAgICAgICAgICAgIGxhc3RSZWYgPSBwYXJzZXIuY29uc3VtZU51bWJlcigpO1xuICAgICAgICAgICAgbGluZXMucHVzaChgbFZpZXdbJHtsYXN0UmVmfV0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiJHt0ZXh0fVwiKWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGxhc3RSZWYgPSBwYXJzZXIuY29uc3VtZU51bWJlcigpO1xuICAgICAgICAgICAgbGluZXMucHVzaChgbFZpZXdbJHtsYXN0UmVmfV0gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIiR7dmFsdWV9XCIpYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IGNvbnN1bWVPcENvZGUodmFsdWUpO1xuICAgICAgICAgICAgbGluZSAmJiBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIHZhbHVlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpbmVzO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBgSTE4blJlbW92ZU9wQ29kZXNgIGFycmF5IGludG8gYSBodW1hbiByZWFkYWJsZSBmb3JtYXQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyBhdHRhY2hlZCB0byB0aGUgYEkxOG5SZW1vdmVPcENvZGVzLmRlYnVnYCBpZiBgbmdEZXZNb2RlYCBpcyBlbmFibGVkLiBUaGlzXG4gKiBmdW5jdGlvbiBwcm92aWRlcyBhIGh1bWFuIHJlYWRhYmxlIHZpZXcgb2YgdGhlIG9wY29kZXMuIFRoaXMgaXMgdXNlZnVsIHdoZW4gZGVidWdnaW5nIHRoZVxuICogYXBwbGljYXRpb24gYXMgd2VsbCBhcyB3cml0aW5nIG1vcmUgcmVhZGFibGUgdGVzdHMuXG4gKlxuICogQHBhcmFtIHRoaXMgYEkxOG5SZW1vdmVPcENvZGVzYCBpZiBhdHRhY2hlZCBhcyBhIG1ldGhvZC5cbiAqIEBwYXJhbSBvcGNvZGVzIGBJMThuUmVtb3ZlT3BDb2Rlc2AgaWYgaW52b2tlZCBhcyBhIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBpMThuUmVtb3ZlT3BDb2Rlc1RvU3RyaW5nKG9wY29kZXMpIHtcbiAgICBjb25zdCByZW1vdmVDb2RlcyA9IG9wY29kZXMgfHwgKEFycmF5LmlzQXJyYXkodGhpcykgPyB0aGlzIDogW10pO1xuICAgIGxldCBsaW5lcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVtb3ZlQ29kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgbm9kZU9ySWN1SW5kZXggPSByZW1vdmVDb2Rlc1tpXTtcbiAgICAgICAgaWYgKG5vZGVPckljdUluZGV4ID4gMCkge1xuICAgICAgICAgICAgLy8gUG9zaXRpdmUgbnVtYmVycyBhcmUgYFJOb2RlYHMuXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGByZW1vdmUobFZpZXdbJHtub2RlT3JJY3VJbmRleH1dKWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTmVnYXRpdmUgbnVtYmVycyBhcmUgSUNVc1xuICAgICAgICAgICAgbGluZXMucHVzaChgcmVtb3ZlTmVzdGVkSUNVKCR7fm5vZGVPckljdUluZGV4fSlgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGluZXM7XG59XG5jbGFzcyBPcENvZGVQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvZGVzKSB7XG4gICAgICAgIHRoaXMuaSA9IDA7XG4gICAgICAgIHRoaXMuY29kZXMgPSBjb2RlcztcbiAgICB9XG4gICAgaGFzTW9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaSA8IHRoaXMuY29kZXMubGVuZ3RoO1xuICAgIH1cbiAgICBjb25zdW1lTnVtYmVyKCkge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmNvZGVzW3RoaXMuaSsrXTtcbiAgICAgICAgYXNzZXJ0TnVtYmVyKHZhbHVlLCAnZXhwZWN0aW5nIG51bWJlciBpbiBPcENvZGUnKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdW1lU3RyaW5nKCkge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmNvZGVzW3RoaXMuaSsrXTtcbiAgICAgICAgYXNzZXJ0U3RyaW5nKHZhbHVlLCAnZXhwZWN0aW5nIHN0cmluZyBpbiBPcENvZGUnKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25zdW1lRnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuY29kZXNbdGhpcy5pKytdO1xuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdleHBlY3RpbmcgZnVuY3Rpb24gaW4gT3BDb2RlJyk7XG4gICAgfVxuICAgIGNvbnN1bWVOdW1iZXJPclN0cmluZygpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5jb2Rlc1t0aGlzLmkrK107XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0TnVtYmVyKHZhbHVlLCAnZXhwZWN0aW5nIG51bWJlciBvciBzdHJpbmcgaW4gT3BDb2RlJyk7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY29uc3VtZU51bWJlclN0cmluZ09yTWFya2VyKCkge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmNvZGVzW3RoaXMuaSsrXTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB2YWx1ZSA9PSBJQ1VfTUFSS0VSIHx8XG4gICAgICAgICAgICB2YWx1ZSA9PSBFTEVNRU5UX01BUktFUikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydE51bWJlcih2YWx1ZSwgJ2V4cGVjdGluZyBudW1iZXIsIHN0cmluZywgSUNVX01BUktFUiBvciBFTEVNRU5UX01BUktFUiBpbiBPcENvZGUnKTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5jb25zdCBCSU5ESU5HX1JFR0VYUCA9IC/vv70oXFxkKyk6P1xcZCrvv70vZ2k7XG5jb25zdCBJQ1VfUkVHRVhQID0gLyh7XFxzKu+/vVxcZCs6P1xcZCrvv71cXHMqLFxccypcXFN7Nn1cXHMqLFtcXHNcXFNdKn0pL2dpO1xuY29uc3QgTkVTVEVEX0lDVSA9IC/vv70oXFxkKynvv70vO1xuY29uc3QgSUNVX0JMT0NLX1JFR0VYUCA9IC9eXFxzKijvv71cXGQrOj9cXGQq77+9KVxccyosXFxzKihzZWxlY3R8cGx1cmFsKVxccyosLztcbmNvbnN0IE1BUktFUiA9IGDvv71gO1xuY29uc3QgU1VCVEVNUExBVEVfUkVHRVhQID0gL++/vVxcLz9cXCooXFxkKzpcXGQrKe+/vS9naTtcbmNvbnN0IFBIX1JFR0VYUCA9IC/vv70oXFwvP1sjKl1cXGQrKTo/XFxkKu+/vS9naTtcbi8qKlxuICogQW5ndWxhciBEYXJ0IGludHJvZHVjZWQgJm5nc3A7IGFzIGEgcGxhY2Vob2xkZXIgZm9yIG5vbi1yZW1vdmFibGUgc3BhY2UsIHNlZTpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJ0LWxhbmcvYW5ndWxhci9ibG9iLzBiYjYxMTM4N2QyOWQ2NWI1YWY3ZjlkMjUxNWFiNTcxZmQzZmJlZTQvX3Rlc3RzL3Rlc3QvY29tcGlsZXIvcHJlc2VydmVfd2hpdGVzcGFjZV90ZXN0LmRhcnQjTDI1LUwzMlxuICogSW4gQW5ndWxhciBEYXJ0ICZuZ3NwOyBpcyBjb252ZXJ0ZWQgdG8gdGhlIDB4RTUwMCBQVUEgKFByaXZhdGUgVXNlIEFyZWFzKSB1bmljb2RlIGNoYXJhY3RlclxuICogYW5kIGxhdGVyIG9uIHJlcGxhY2VkIGJ5IGEgc3BhY2UuIFdlIGFyZSByZS1pbXBsZW1lbnRpbmcgdGhlIHNhbWUgaWRlYSBoZXJlLCBzaW5jZSB0cmFuc2xhdGlvbnNcbiAqIG1pZ2h0IGNvbnRhaW4gdGhpcyBzcGVjaWFsIGNoYXJhY3Rlci5cbiAqL1xuY29uc3QgTkdTUF9VTklDT0RFX1JFR0VYUCA9IC9cXHVFNTAwL2c7XG5mdW5jdGlvbiByZXBsYWNlTmdzcCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKE5HU1BfVU5JQ09ERV9SRUdFWFAsICcgJyk7XG59XG4vKipcbiAqIENyZWF0ZSBkeW5hbWljIG5vZGVzIGZyb20gaTE4biB0cmFuc2xhdGlvbiBibG9jay5cbiAqXG4gKiAtIFRleHQgbm9kZXMgYXJlIGNyZWF0ZWQgc3luY2hyb25vdXNseVxuICogLSBUTm9kZXMgYXJlIGxpbmtlZCBpbnRvIHRyZWUgbGF6aWx5XG4gKlxuICogQHBhcmFtIHRWaWV3IEN1cnJlbnQgYFRWaWV3YFxuICogQHBhcmVudFROb2RlSW5kZXggaW5kZXggdG8gdGhlIHBhcmVudCBUTm9kZSBvZiB0aGlzIGkxOG4gYmxvY2tcbiAqIEBwYXJhbSBsVmlldyBDdXJyZW50IGBMVmlld2BcbiAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiBgybXJtWkxOG5TdGFydGAgaW5zdHJ1Y3Rpb24uXG4gKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIHRvIHRyYW5zbGF0ZS5cbiAqIEBwYXJhbSBzdWJUZW1wbGF0ZUluZGV4IEluZGV4IGludG8gdGhlIHN1YiB0ZW1wbGF0ZSBvZiBtZXNzYWdlIHRyYW5zbGF0aW9uLiAoaWUgaW4gY2FzZSBvZlxuICogICAgIGBuZ0lmYCkgKC0xIG90aGVyd2lzZSlcbiAqL1xuZnVuY3Rpb24gaTE4blN0YXJ0Rmlyc3RDcmVhdGVQYXNzKHRWaWV3LCBwYXJlbnRUTm9kZUluZGV4LCBsVmlldywgaW5kZXgsIG1lc3NhZ2UsIHN1YlRlbXBsYXRlSW5kZXgpIHtcbiAgICBjb25zdCByb290VE5vZGUgPSBnZXRDdXJyZW50UGFyZW50VE5vZGUoKTtcbiAgICBjb25zdCBjcmVhdGVPcENvZGVzID0gW107XG4gICAgY29uc3QgdXBkYXRlT3BDb2RlcyA9IFtdO1xuICAgIGNvbnN0IGV4aXN0aW5nVE5vZGVTdGFjayA9IFtbXV07XG4gICAgaWYgKG5nRGV2TW9kZSkge1xuICAgICAgICBhdHRhY2hEZWJ1Z0dldHRlcihjcmVhdGVPcENvZGVzLCBpMThuQ3JlYXRlT3BDb2Rlc1RvU3RyaW5nKTtcbiAgICAgICAgYXR0YWNoRGVidWdHZXR0ZXIodXBkYXRlT3BDb2RlcywgaTE4blVwZGF0ZU9wQ29kZXNUb1N0cmluZyk7XG4gICAgfVxuICAgIG1lc3NhZ2UgPSBnZXRUcmFuc2xhdGlvbkZvclRlbXBsYXRlKG1lc3NhZ2UsIHN1YlRlbXBsYXRlSW5kZXgpO1xuICAgIGNvbnN0IG1zZ1BhcnRzID0gcmVwbGFjZU5nc3AobWVzc2FnZSkuc3BsaXQoUEhfUkVHRVhQKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1zZ1BhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IG1zZ1BhcnRzW2ldO1xuICAgICAgICBpZiAoKGkgJiAxKSA9PT0gMCkge1xuICAgICAgICAgICAgLy8gRXZlbiBpbmRleGVzIGFyZSB0ZXh0IChpbmNsdWRpbmcgYmluZGluZ3MgJiBJQ1UgZXhwcmVzc2lvbnMpXG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGkxOG5QYXJzZVRleHRJbnRvUGFydHNBbmRJQ1UodmFsdWUpO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGxldCBwYXJ0ID0gcGFydHNbal07XG4gICAgICAgICAgICAgICAgaWYgKChqICYgMSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYGpgIGlzIG9kZCB0aGVyZWZvcmUgYHBhcnRgIGlzIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gcGFydDtcbiAgICAgICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydFN0cmluZyh0ZXh0LCAnUGFyc2VkIElDVSBwYXJ0IHNob3VsZCBiZSBzdHJpbmcnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpMThuU3RhcnRGaXJzdENyZWF0ZVBhc3NQcm9jZXNzVGV4dE5vZGUodFZpZXcsIHJvb3RUTm9kZSwgZXhpc3RpbmdUTm9kZVN0YWNrWzBdLCBjcmVhdGVPcENvZGVzLCB1cGRhdGVPcENvZGVzLCBsVmlldywgdGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGBqYCBpcyBFdmVuIHRoZXJlZm9yIGBwYXJ0YCBpcyBhbiBgSUNVRXhwcmVzc2lvbmBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWN1RXhwcmVzc2lvbiA9IHBhcnQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmeSB0aGF0IElDVSBleHByZXNzaW9uIGhhcyB0aGUgcmlnaHQgc2hhcGUuIFRyYW5zbGF0aW9ucyBtaWdodCBjb250YWluIGludmFsaWRcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc3RydWN0aW9ucyAod2hpbGUgb3JpZ2luYWwgbWVzc2FnZXMgd2VyZSBjb3JyZWN0KSwgc28gSUNVIHBhcnNpbmcgYXQgcnVudGltZSBtYXlcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90IHN1Y2NlZWQgKHRodXMgYGljdUV4cHJlc3Npb25gIHJlbWFpbnMgYSBzdHJpbmcpLlxuICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiB3ZSBpbnRlbnRpb25hbGx5IHJldGFpbiB0aGUgZXJyb3IgaGVyZSBieSBub3QgdXNpbmcgYG5nRGV2TW9kZWAsIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHZhbHVlIGNhbiBjaGFuZ2UgYmFzZWQgb24gdGhlIGxvY2FsZSBhbmQgdXNlcnMgYXJlbid0IGd1YXJhbnRlZWQgdG8gaGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIGFuIGludmFsaWQgc3RyaW5nIHdoaWxlIHRoZXkncmUgZGV2ZWxvcGluZy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpY3VFeHByZXNzaW9uICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gcGFyc2UgSUNVIGV4cHJlc3Npb24gaW4gXCIke21lc3NhZ2V9XCIgbWVzc2FnZS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpY3VDb250YWluZXJUTm9kZSA9IGNyZWF0ZVROb2RlQW5kQWRkT3BDb2RlKHRWaWV3LCByb290VE5vZGUsIGV4aXN0aW5nVE5vZGVTdGFja1swXSwgbFZpZXcsIGNyZWF0ZU9wQ29kZXMsIG5nRGV2TW9kZSA/IGBJQ1UgJHtpbmRleH06JHtpY3VFeHByZXNzaW9uLm1haW5CaW5kaW5nfWAgOiAnJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGljdU5vZGVJbmRleCA9IGljdUNvbnRhaW5lclROb2RlLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2VydEdyZWF0ZXJUaGFuT3JFcXVhbChpY3VOb2RlSW5kZXgsIEhFQURFUl9PRkZTRVQsICdJbmRleCBtdXN0IGJlIGluIGFic29sdXRlIExWaWV3IG9mZnNldCcpO1xuICAgICAgICAgICAgICAgICAgICBpY3VTdGFydCh0VmlldywgbFZpZXcsIHVwZGF0ZU9wQ29kZXMsIHBhcmVudFROb2RlSW5kZXgsIGljdUV4cHJlc3Npb24sIGljdU5vZGVJbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gT2RkIGluZGV4ZXMgYXJlIHBsYWNlaG9sZGVycyAoZWxlbWVudHMgYW5kIHN1Yi10ZW1wbGF0ZXMpXG4gICAgICAgICAgICAvLyBBdCB0aGlzIHBvaW50IHZhbHVlIGlzIHNvbWV0aGluZyBsaWtlOiAnLyMxOjInIChvcmlnaW5hbGx5IGNvbWluZyBmcm9tICfvv70vIzE6Mu+/vScpXG4gICAgICAgICAgICBjb25zdCBpc0Nsb3NpbmcgPSB2YWx1ZS5jaGFyQ29kZUF0KDApID09PSA0NyAvKiBTTEFTSCAqLztcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB2YWx1ZS5jaGFyQ29kZUF0KGlzQ2xvc2luZyA/IDEgOiAwKTtcbiAgICAgICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRPbmVPZih0eXBlLCA0MiAvKiBTVEFSICovLCAzNSAvKiBIQVNIICovKTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gSEVBREVSX09GRlNFVCArIE51bWJlci5wYXJzZUludCh2YWx1ZS5zdWJzdHJpbmcoKGlzQ2xvc2luZyA/IDIgOiAxKSkpO1xuICAgICAgICAgICAgaWYgKGlzQ2xvc2luZykge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nVE5vZGVTdGFjay5zaGlmdCgpO1xuICAgICAgICAgICAgICAgIHNldEN1cnJlbnRUTm9kZShnZXRDdXJyZW50UGFyZW50VE5vZGUoKSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdE5vZGUgPSBjcmVhdGVUTm9kZVBsYWNlaG9sZGVyKHRWaWV3LCBleGlzdGluZ1ROb2RlU3RhY2tbMF0sIGluZGV4KTtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1ROb2RlU3RhY2sudW5zaGlmdChbXSk7XG4gICAgICAgICAgICAgICAgc2V0Q3VycmVudFROb2RlKHROb2RlLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0Vmlldy5kYXRhW2luZGV4XSA9IHtcbiAgICAgICAgY3JlYXRlOiBjcmVhdGVPcENvZGVzLFxuICAgICAgICB1cGRhdGU6IHVwZGF0ZU9wQ29kZXMsXG4gICAgfTtcbn1cbi8qKlxuICogQWxsb2NhdGUgc3BhY2UgaW4gaTE4biBSYW5nZSBhZGQgY3JlYXRlIE9wQ29kZSBpbnN0cnVjdGlvbiB0byBjcmVhdGUgYSB0ZXh0IG9yIGNvbW1lbnQgbm9kZS5cbiAqXG4gKiBAcGFyYW0gdFZpZXcgQ3VycmVudCBgVFZpZXdgIG5lZWRlZCB0byBhbGxvY2F0ZSBzcGFjZSBpbiBpMThuIHJhbmdlLlxuICogQHBhcmFtIHJvb3RUTm9kZSBSb290IGBUTm9kZWAgb2YgdGhlIGkxOG4gYmxvY2suIFRoaXMgbm9kZSBkZXRlcm1pbmVzIGlmIHRoZSBuZXcgVE5vZGUgd2lsbCBiZVxuICogICAgIGFkZGVkIGFzIHBhcnQgb2YgdGhlIGBpMThuU3RhcnRgIGluc3RydWN0aW9uIG9yIGFzIHBhcnQgb2YgdGhlIGBUTm9kZS5pbnNlcnRCZWZvcmVJbmRleGAuXG4gKiBAcGFyYW0gZXhpc3RpbmdUTm9kZXMgaW50ZXJuYWwgc3RhdGUgZm9yIGBhZGRUTm9kZUFuZFVwZGF0ZUluc2VydEJlZm9yZUluZGV4YC5cbiAqIEBwYXJhbSBsVmlldyBDdXJyZW50IGBMVmlld2AgbmVlZGVkIHRvIGFsbG9jYXRlIHNwYWNlIGluIGkxOG4gcmFuZ2UuXG4gKiBAcGFyYW0gY3JlYXRlT3BDb2RlcyBBcnJheSBzdG9yaW5nIGBJMThuQ3JlYXRlT3BDb2Rlc2Agd2hlcmUgbmV3IG9wQ29kZXMgd2lsbCBiZSBhZGRlZC5cbiAqIEBwYXJhbSB0ZXh0IFRleHQgdG8gYmUgYWRkZWQgd2hlbiB0aGUgYFRleHRgIG9yIGBDb21tZW50YCBub2RlIHdpbGwgYmUgY3JlYXRlZC5cbiAqIEBwYXJhbSBpc0lDVSB0cnVlIGlmIGEgYENvbW1lbnRgIG5vZGUgZm9yIElDVSAoaW5zdGVhZCBvZiBgVGV4dGApIG5vZGUgc2hvdWxkIGJlIGNyZWF0ZWQuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVROb2RlQW5kQWRkT3BDb2RlKHRWaWV3LCByb290VE5vZGUsIGV4aXN0aW5nVE5vZGVzLCBsVmlldywgY3JlYXRlT3BDb2RlcywgdGV4dCwgaXNJQ1UpIHtcbiAgICBjb25zdCBpMThuTm9kZUlkeCA9IGFsbG9jRXhwYW5kbyh0VmlldywgbFZpZXcsIDEsIG51bGwpO1xuICAgIGxldCBvcENvZGUgPSBpMThuTm9kZUlkeCA8PCBJMThuQ3JlYXRlT3BDb2RlLlNISUZUO1xuICAgIGxldCBwYXJlbnRUTm9kZSA9IGdldEN1cnJlbnRQYXJlbnRUTm9kZSgpO1xuICAgIGlmIChyb290VE5vZGUgPT09IHBhcmVudFROb2RlKSB7XG4gICAgICAgIC8vIEZJWE1FKG1pc2tvKTogQSBudWxsIGBwYXJlbnRUTm9kZWAgc2hvdWxkIHJlcHJlc2VudCB3aGVuIHdlIGZhbGwgb2YgdGhlIGBMVmlld2AgYm91bmRhcnkuXG4gICAgICAgIC8vICh0aGVyZSBpcyBubyBwYXJlbnQpLCBidXQgaW4gc29tZSBjaXJjdW1zdGFuY2VzIChiZWNhdXNlIHdlIGFyZSBpbmNvbnNpc3RlbnQgYWJvdXQgaG93IHdlIHNldFxuICAgICAgICAvLyBgcHJldmlvdXNPclBhcmVudFROb2RlYCkgaXQgY291bGQgcG9pbnQgdG8gYHJvb3RUTm9kZWAgU28gdGhpcyBpcyBhIHdvcmsgYXJvdW5kLlxuICAgICAgICBwYXJlbnRUTm9kZSA9IG51bGw7XG4gICAgfVxuICAgIGlmIChwYXJlbnRUTm9kZSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBJZiB3ZSBkb24ndCBoYXZlIGEgcGFyZW50IHRoYXQgbWVhbnMgdGhhdCB3ZSBjYW4gZWFnZXJseSBhZGQgbm9kZXMuXG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBwYXJlbnQgdGhhbiB0aGVzZSBub2RlcyBjYW4ndCBiZSBhZGRlZCBub3cgKGFzIHRoZSBwYXJlbnQgaGFzIG5vdCBiZWVuIGNyZWF0ZWRcbiAgICAgICAgLy8geWV0KSBhbmQgaW5zdGVhZCB0aGUgYHBhcmVudFROb2RlYCBpcyByZXNwb25zaWJsZSBmb3IgYWRkaW5nIGl0LiBTZWVcbiAgICAgICAgLy8gYFROb2RlLmluc2VydEJlZm9yZUluZGV4YFxuICAgICAgICBvcENvZGUgfD0gSTE4bkNyZWF0ZU9wQ29kZS5BUFBFTkRfRUFHRVJMWTtcbiAgICB9XG4gICAgaWYgKGlzSUNVKSB7XG4gICAgICAgIG9wQ29kZSB8PSBJMThuQ3JlYXRlT3BDb2RlLkNPTU1FTlQ7XG4gICAgICAgIGVuc3VyZUljdUNvbnRhaW5lclZpc2l0b3JMb2FkZWQobG9hZEljdUNvbnRhaW5lclZpc2l0b3IpO1xuICAgIH1cbiAgICBjcmVhdGVPcENvZGVzLnB1c2gob3BDb2RlLCB0ZXh0ID09PSBudWxsID8gJycgOiB0ZXh0KTtcbiAgICAvLyBXZSBzdG9yZSBge3s/fX1gIHNvIHRoYXQgd2hlbiBsb29raW5nIGF0IGRlYnVnIGBUTm9kZVR5cGUudGVtcGxhdGVgIHdlIGNhbiBzZWUgd2hlcmUgdGhlXG4gICAgLy8gYmluZGluZ3MgYXJlLlxuICAgIGNvbnN0IHROb2RlID0gY3JlYXRlVE5vZGVBdEluZGV4KHRWaWV3LCBpMThuTm9kZUlkeCwgaXNJQ1UgPyAzMiAvKiBJY3UgKi8gOiAxIC8qIFRleHQgKi8sIHRleHQgPT09IG51bGwgPyAobmdEZXZNb2RlID8gJ3t7P319JyA6ICcnKSA6IHRleHQsIG51bGwpO1xuICAgIGFkZFROb2RlQW5kVXBkYXRlSW5zZXJ0QmVmb3JlSW5kZXgoZXhpc3RpbmdUTm9kZXMsIHROb2RlKTtcbiAgICBjb25zdCB0Tm9kZUlkeCA9IHROb2RlLmluZGV4O1xuICAgIHNldEN1cnJlbnRUTm9kZSh0Tm9kZSwgZmFsc2UgLyogVGV4dCBub2RlcyBhcmUgc2VsZiBjbG9zaW5nICovKTtcbiAgICBpZiAocGFyZW50VE5vZGUgIT09IG51bGwgJiYgcm9vdFROb2RlICE9PSBwYXJlbnRUTm9kZSkge1xuICAgICAgICAvLyBXZSBhcmUgYSBjaGlsZCBvZiBkZWVwZXIgbm9kZSAocmF0aGVyIHRoYW4gYSBkaXJlY3QgY2hpbGQgb2YgYGkxOG5TdGFydGAgaW5zdHJ1Y3Rpb24uKVxuICAgICAgICAvLyBXZSBoYXZlIHRvIG1ha2Ugc3VyZSB0byBhZGQgb3Vyc2VsdmVzIHRvIHRoZSBwYXJlbnQuXG4gICAgICAgIHNldFROb2RlSW5zZXJ0QmVmb3JlSW5kZXgocGFyZW50VE5vZGUsIHROb2RlSWR4KTtcbiAgICB9XG4gICAgcmV0dXJuIHROb2RlO1xufVxuLyoqXG4gKiBQcm9jZXNzZXMgdGV4dCBub2RlIGluIGkxOG4gYmxvY2suXG4gKlxuICogVGV4dCBub2RlcyBjYW4gaGF2ZTpcbiAqIC0gQ3JlYXRlIGluc3RydWN0aW9uIGluIGBjcmVhdGVPcENvZGVzYCBmb3IgY3JlYXRpbmcgdGhlIHRleHQgbm9kZS5cbiAqIC0gQWxsb2NhdGUgc3BlYyBmb3IgdGV4dCBub2RlIGluIGkxOG4gcmFuZ2Ugb2YgYExWaWV3YFxuICogLSBJZiBjb250YWlucyBiaW5kaW5nOlxuICogICAgLSBiaW5kaW5ncyA9PiBhbGxvY2F0ZSBzcGFjZSBpbiBpMThuIHJhbmdlIG9mIGBMVmlld2AgdG8gc3RvcmUgdGhlIGJpbmRpbmcgdmFsdWUuXG4gKiAgICAtIHBvcHVsYXRlIGB1cGRhdGVPcENvZGVzYCB3aXRoIHVwZGF0ZSBpbnN0cnVjdGlvbnMuXG4gKlxuICogQHBhcmFtIHRWaWV3IEN1cnJlbnQgYFRWaWV3YFxuICogQHBhcmFtIHJvb3RUTm9kZSBSb290IGBUTm9kZWAgb2YgdGhlIGkxOG4gYmxvY2suIFRoaXMgbm9kZSBkZXRlcm1pbmVzIGlmIHRoZSBuZXcgVE5vZGUgd2lsbFxuICogICAgIGJlIGFkZGVkIGFzIHBhcnQgb2YgdGhlIGBpMThuU3RhcnRgIGluc3RydWN0aW9uIG9yIGFzIHBhcnQgb2YgdGhlXG4gKiAgICAgYFROb2RlLmluc2VydEJlZm9yZUluZGV4YC5cbiAqIEBwYXJhbSBleGlzdGluZ1ROb2RlcyBpbnRlcm5hbCBzdGF0ZSBmb3IgYGFkZFROb2RlQW5kVXBkYXRlSW5zZXJ0QmVmb3JlSW5kZXhgLlxuICogQHBhcmFtIGNyZWF0ZU9wQ29kZXMgTG9jYXRpb24gd2hlcmUgdGhlIGNyZWF0aW9uIE9wQ29kZXMgd2lsbCBiZSBzdG9yZWQuXG4gKiBAcGFyYW0gbFZpZXcgQ3VycmVudCBgTFZpZXdgXG4gKiBAcGFyYW0gdGV4dCBUaGUgdHJhbnNsYXRlZCB0ZXh0ICh3aGljaCBtYXkgY29udGFpbiBiaW5kaW5nKVxuICovXG5mdW5jdGlvbiBpMThuU3RhcnRGaXJzdENyZWF0ZVBhc3NQcm9jZXNzVGV4dE5vZGUodFZpZXcsIHJvb3RUTm9kZSwgZXhpc3RpbmdUTm9kZXMsIGNyZWF0ZU9wQ29kZXMsIHVwZGF0ZU9wQ29kZXMsIGxWaWV3LCB0ZXh0KSB7XG4gICAgY29uc3QgaGFzQmluZGluZyA9IHRleHQubWF0Y2goQklORElOR19SRUdFWFApO1xuICAgIGNvbnN0IHROb2RlID0gY3JlYXRlVE5vZGVBbmRBZGRPcENvZGUodFZpZXcsIHJvb3RUTm9kZSwgZXhpc3RpbmdUTm9kZXMsIGxWaWV3LCBjcmVhdGVPcENvZGVzLCBoYXNCaW5kaW5nID8gbnVsbCA6IHRleHQsIGZhbHNlKTtcbiAgICBpZiAoaGFzQmluZGluZykge1xuICAgICAgICBnZW5lcmF0ZUJpbmRpbmdVcGRhdGVPcENvZGVzKHVwZGF0ZU9wQ29kZXMsIHRleHQsIHROb2RlLmluZGV4LCBudWxsLCAwLCBudWxsKTtcbiAgICB9XG59XG4vKipcbiAqIFNlZSBgaTE4bkF0dHJpYnV0ZXNgIGFib3ZlLlxuICovXG5mdW5jdGlvbiBpMThuQXR0cmlidXRlc0ZpcnN0UGFzcyh0VmlldywgaW5kZXgsIHZhbHVlcykge1xuICAgIGNvbnN0IHByZXZpb3VzRWxlbWVudCA9IGdldEN1cnJlbnRUTm9kZSgpO1xuICAgIGNvbnN0IHByZXZpb3VzRWxlbWVudEluZGV4ID0gcHJldmlvdXNFbGVtZW50LmluZGV4O1xuICAgIGNvbnN0IHVwZGF0ZU9wQ29kZXMgPSBbXTtcbiAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgIGF0dGFjaERlYnVnR2V0dGVyKHVwZGF0ZU9wQ29kZXMsIGkxOG5VcGRhdGVPcENvZGVzVG9TdHJpbmcpO1xuICAgIH1cbiAgICBpZiAodFZpZXcuZmlyc3RDcmVhdGVQYXNzICYmIHRWaWV3LmRhdGFbaW5kZXhdID09PSBudWxsKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyTmFtZSA9IHZhbHVlc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWx1ZXNbaSArIDFdO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYXR0cmlidXRlIHZhbHVlIGNvbnRhaW5zIGFuIElDVSBhbmQgdGhyb3cgYW4gZXJyb3IgaWYgdGhhdCdzIHRoZSBjYXNlLlxuICAgICAgICAgICAgICAgIC8vIElDVXMgaW4gZWxlbWVudCBhdHRyaWJ1dGVzIGFyZSBub3Qgc3VwcG9ydGVkLlxuICAgICAgICAgICAgICAgIC8vIE5vdGU6IHdlIGludGVudGlvbmFsbHkgcmV0YWluIHRoZSBlcnJvciBoZXJlIGJ5IG5vdCB1c2luZyBgbmdEZXZNb2RlYCwgYmVjYXVzZVxuICAgICAgICAgICAgICAgIC8vIHRoZSBgdmFsdWVgIGNhbiBjaGFuZ2UgYmFzZWQgb24gdGhlIGxvY2FsZSBhbmQgdXNlcnMgYXJlbid0IGd1YXJhbnRlZWQgdG8gaGl0XG4gICAgICAgICAgICAgICAgLy8gYW4gaW52YWxpZCBzdHJpbmcgd2hpbGUgdGhleSdyZSBkZXZlbG9waW5nLlxuICAgICAgICAgICAgICAgIGlmIChJQ1VfUkVHRVhQLnRlc3QobWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJQ1UgZXhwcmVzc2lvbnMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gYXR0cmlidXRlcy4gTWVzc2FnZTogXCIke21lc3NhZ2V9XCIuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGkxOG4gYXR0cmlidXRlcyB0aGF0IGhpdCB0aGlzIGNvZGUgcGF0aCBhcmUgZ3VhcmFudGVlZCB0byBoYXZlIGJpbmRpbmdzLCBiZWNhdXNlXG4gICAgICAgICAgICAgICAgLy8gdGhlIGNvbXBpbGVyIHRyZWF0cyBzdGF0aWMgaTE4biBhdHRyaWJ1dGVzIGFzIHJlZ3VsYXIgYXR0cmlidXRlIGJpbmRpbmdzLlxuICAgICAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgbWF5IG5vdCBiZSB0aGUgZmlyc3QgaTE4biBhdHRyaWJ1dGUgb24gdGhpcyBlbGVtZW50IHdlIG5lZWQgdG8gcGFzcyBpbiBob3dcbiAgICAgICAgICAgICAgICAvLyBtYW55IHByZXZpb3VzIGJpbmRpbmdzIHRoZXJlIGhhdmUgYWxyZWFkeSBiZWVuLlxuICAgICAgICAgICAgICAgIGdlbmVyYXRlQmluZGluZ1VwZGF0ZU9wQ29kZXModXBkYXRlT3BDb2RlcywgbWVzc2FnZSwgcHJldmlvdXNFbGVtZW50SW5kZXgsIGF0dHJOYW1lLCBjb3VudEJpbmRpbmdzKHVwZGF0ZU9wQ29kZXMpLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0Vmlldy5kYXRhW2luZGV4XSA9IHVwZGF0ZU9wQ29kZXM7XG4gICAgfVxufVxuLyoqXG4gKiBHZW5lcmF0ZSB0aGUgT3BDb2RlcyB0byB1cGRhdGUgdGhlIGJpbmRpbmdzIG9mIGEgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB1cGRhdGVPcENvZGVzIFBsYWNlIHdoZXJlIHRoZSB1cGRhdGUgb3Bjb2RlcyB3aWxsIGJlIHN0b3JlZC5cbiAqIEBwYXJhbSBzdHIgVGhlIHN0cmluZyBjb250YWluaW5nIHRoZSBiaW5kaW5ncy5cbiAqIEBwYXJhbSBkZXN0aW5hdGlvbk5vZGUgSW5kZXggb2YgdGhlIGRlc3RpbmF0aW9uIG5vZGUgd2hpY2ggd2lsbCByZWNlaXZlIHRoZSBiaW5kaW5nLlxuICogQHBhcmFtIGF0dHJOYW1lIE5hbWUgb2YgdGhlIGF0dHJpYnV0ZSwgaWYgdGhlIHN0cmluZyBiZWxvbmdzIHRvIGFuIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSBzYW5pdGl6ZUZuIFNhbml0aXphdGlvbiBmdW5jdGlvbiB1c2VkIHRvIHNhbml0aXplIHRoZSBzdHJpbmcgYWZ0ZXIgdXBkYXRlLCBpZiBuZWNlc3NhcnkuXG4gKiBAcGFyYW0gYmluZGluZ1N0YXJ0IFRoZSBsVmlldyBpbmRleCBvZiB0aGUgbmV4dCBleHByZXNzaW9uIHRoYXQgY2FuIGJlIGJvdW5kIHZpYSBhbiBvcENvZGUuXG4gKiBAcmV0dXJucyBUaGUgbWFzayB2YWx1ZSBmb3IgdGhlc2UgYmluZGluZ3NcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVCaW5kaW5nVXBkYXRlT3BDb2Rlcyh1cGRhdGVPcENvZGVzLCBzdHIsIGRlc3RpbmF0aW9uTm9kZSwgYXR0ck5hbWUsIGJpbmRpbmdTdGFydCwgc2FuaXRpemVGbikge1xuICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICBhc3NlcnRHcmVhdGVyVGhhbk9yRXF1YWwoZGVzdGluYXRpb25Ob2RlLCBIRUFERVJfT0ZGU0VULCAnSW5kZXggbXVzdCBiZSBpbiBhYnNvbHV0ZSBMVmlldyBvZmZzZXQnKTtcbiAgICBjb25zdCBtYXNrSW5kZXggPSB1cGRhdGVPcENvZGVzLmxlbmd0aDsgLy8gTG9jYXRpb24gb2YgbWFza1xuICAgIGNvbnN0IHNpemVJbmRleCA9IG1hc2tJbmRleCArIDE7IC8vIGxvY2F0aW9uIG9mIHNpemUgZm9yIHNraXBwaW5nXG4gICAgdXBkYXRlT3BDb2Rlcy5wdXNoKG51bGwsIG51bGwpOyAvLyBBbGxvYyBzcGFjZSBmb3IgbWFzayBhbmQgc2l6ZVxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBtYXNrSW5kZXggKyAyOyAvLyBsb2NhdGlvbiBvZiBmaXJzdCBhbGxvY2F0aW9uLlxuICAgIGlmIChuZ0Rldk1vZGUpIHtcbiAgICAgICAgYXR0YWNoRGVidWdHZXR0ZXIodXBkYXRlT3BDb2RlcywgaTE4blVwZGF0ZU9wQ29kZXNUb1N0cmluZyk7XG4gICAgfVxuICAgIGNvbnN0IHRleHRQYXJ0cyA9IHN0ci5zcGxpdChCSU5ESU5HX1JFR0VYUCk7XG4gICAgbGV0IG1hc2sgPSAwO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGV4dFBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IHRleHRWYWx1ZSA9IHRleHRQYXJ0c1tqXTtcbiAgICAgICAgaWYgKGogJiAxKSB7XG4gICAgICAgICAgICAvLyBPZGQgaW5kZXhlcyBhcmUgYmluZGluZ3NcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGJpbmRpbmdTdGFydCArIHBhcnNlSW50KHRleHRWYWx1ZSwgMTApO1xuICAgICAgICAgICAgdXBkYXRlT3BDb2Rlcy5wdXNoKC0xIC0gYmluZGluZ0luZGV4KTtcbiAgICAgICAgICAgIG1hc2sgPSBtYXNrIHwgdG9NYXNrQml0KGJpbmRpbmdJbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGV4dFZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgLy8gRXZlbiBpbmRleGVzIGFyZSB0ZXh0XG4gICAgICAgICAgICB1cGRhdGVPcENvZGVzLnB1c2godGV4dFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVPcENvZGVzLnB1c2goZGVzdGluYXRpb25Ob2RlIDw8IDIgLyogU0hJRlRfUkVGICovIHxcbiAgICAgICAgKGF0dHJOYW1lID8gMSAvKiBBdHRyICovIDogMCAvKiBUZXh0ICovKSk7XG4gICAgaWYgKGF0dHJOYW1lKSB7XG4gICAgICAgIHVwZGF0ZU9wQ29kZXMucHVzaChhdHRyTmFtZSwgc2FuaXRpemVGbik7XG4gICAgfVxuICAgIHVwZGF0ZU9wQ29kZXNbbWFza0luZGV4XSA9IG1hc2s7XG4gICAgdXBkYXRlT3BDb2Rlc1tzaXplSW5kZXhdID0gdXBkYXRlT3BDb2Rlcy5sZW5ndGggLSBzdGFydEluZGV4O1xuICAgIHJldHVybiBtYXNrO1xufVxuLyoqXG4gKiBDb3VudCB0aGUgbnVtYmVyIG9mIGJpbmRpbmdzIGluIHRoZSBnaXZlbiBgb3BDb2Rlc2AuXG4gKlxuICogSXQgY291bGQgYmUgcG9zc2libGUgdG8gc3BlZWQgdGhpcyB1cCwgYnkgcGFzc2luZyB0aGUgbnVtYmVyIG9mIGJpbmRpbmdzIGZvdW5kIGJhY2sgZnJvbVxuICogYGdlbmVyYXRlQmluZGluZ1VwZGF0ZU9wQ29kZXMoKWAgdG8gYGkxOG5BdHRyaWJ1dGVzRmlyc3RQYXNzKClgIGJ1dCB0aGlzIHdvdWxkIHRoZW4gcmVxdWlyZSBtb3JlXG4gKiBjb21wbGV4aXR5IGluIHRoZSBjb2RlIGFuZC9vciB0cmFuc2llbnQgb2JqZWN0cyB0byBiZSBjcmVhdGVkLlxuICpcbiAqIFNpbmNlIHRoaXMgZnVuY3Rpb24gaXMgb25seSBjYWxsZWQgb25jZSB3aGVuIHRoZSB0ZW1wbGF0ZSBpcyBpbnN0YW50aWF0ZWQsIGlzIHRyaXZpYWwgaW4gdGhlXG4gKiBmaXJzdCBpbnN0YW5jZSAoc2luY2UgYG9wQ29kZXNgIHdpbGwgYmUgYW4gZW1wdHkgYXJyYXkpLCBhbmQgaXQgaXMgbm90IGNvbW1vbiBmb3IgZWxlbWVudHMgdG9cbiAqIGNvbnRhaW4gbXVsdGlwbGUgaTE4biBib3VuZCBhdHRyaWJ1dGVzLCBpdCBzZWVtcyBsaWtlIHRoaXMgaXMgYSByZWFzb25hYmxlIGNvbXByb21pc2UuXG4gKi9cbmZ1bmN0aW9uIGNvdW50QmluZGluZ3Mob3BDb2Rlcykge1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcENvZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG9wQ29kZSA9IG9wQ29kZXNbaV07XG4gICAgICAgIC8vIEJpbmRpbmdzIGFyZSBuZWdhdGl2ZSBudW1iZXJzLlxuICAgICAgICBpZiAodHlwZW9mIG9wQ29kZSA9PT0gJ251bWJlcicgJiYgb3BDb2RlIDwgMCkge1xuICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY291bnQ7XG59XG4vKipcbiAqIENvbnZlcnQgYmluZGluZyBpbmRleCB0byBtYXNrIGJpdC5cbiAqXG4gKiBFYWNoIGluZGV4IHJlcHJlc2VudHMgYSBzaW5nbGUgYml0IG9uIHRoZSBiaXQtbWFzay4gQmVjYXVzZSBiaXQtbWFzayBvbmx5IGhhcyAzMiBiaXRzLCB3ZSBtYWtlXG4gKiB0aGUgMzJuZCBiaXQgc2hhcmUgYWxsIG1hc2tzIGZvciBhbGwgYmluZGluZ3MgaGlnaGVyIHRoYW4gMzIuIFNpbmNlIGl0IGlzIGV4dHJlbWVseSByYXJlIHRvXG4gKiBoYXZlIG1vcmUgdGhhbiAzMiBiaW5kaW5ncyB0aGlzIHdpbGwgYmUgaGl0IHZlcnkgcmFyZWx5LiBUaGUgZG93bnNpZGUgb2YgaGl0dGluZyB0aGlzIGNvcm5lclxuICogY2FzZSBpcyB0aGF0IHdlIHdpbGwgZXhlY3V0ZSBiaW5kaW5nIGNvZGUgbW9yZSBvZnRlbiB0aGFuIG5lY2Vzc2FyeS4gKHBlbmFsdHkgb2YgcGVyZm9ybWFuY2UpXG4gKi9cbmZ1bmN0aW9uIHRvTWFza0JpdChiaW5kaW5nSW5kZXgpIHtcbiAgICByZXR1cm4gMSA8PCBNYXRoLm1pbihiaW5kaW5nSW5kZXgsIDMxKTtcbn1cbmZ1bmN0aW9uIGlzUm9vdFRlbXBsYXRlTWVzc2FnZShzdWJUZW1wbGF0ZUluZGV4KSB7XG4gICAgcmV0dXJuIHN1YlRlbXBsYXRlSW5kZXggPT09IC0xO1xufVxuLyoqXG4gKiBSZW1vdmVzIGV2ZXJ5dGhpbmcgaW5zaWRlIHRoZSBzdWItdGVtcGxhdGVzIG9mIGEgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlSW5uZXJUZW1wbGF0ZVRyYW5zbGF0aW9uKG1lc3NhZ2UpIHtcbiAgICBsZXQgbWF0Y2g7XG4gICAgbGV0IHJlcyA9ICcnO1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgbGV0IGluVGVtcGxhdGUgPSBmYWxzZTtcbiAgICBsZXQgdGFnTWF0Y2hlZDtcbiAgICB3aGlsZSAoKG1hdGNoID0gU1VCVEVNUExBVEVfUkVHRVhQLmV4ZWMobWVzc2FnZSkpICE9PSBudWxsKSB7XG4gICAgICAgIGlmICghaW5UZW1wbGF0ZSkge1xuICAgICAgICAgICAgcmVzICs9IG1lc3NhZ2Uuc3Vic3RyaW5nKGluZGV4LCBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICB0YWdNYXRjaGVkID0gbWF0Y2hbMV07XG4gICAgICAgICAgICBpblRlbXBsYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtYXRjaFswXSA9PT0gYCR7TUFSS0VSfS8qJHt0YWdNYXRjaGVkfSR7TUFSS0VSfWApIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuICAgICAgICAgICAgICAgIGluVGVtcGxhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgYXNzZXJ0RXF1YWwoaW5UZW1wbGF0ZSwgZmFsc2UsIGBUYWcgbWlzbWF0Y2g6IHVuYWJsZSB0byBmaW5kIHRoZSBlbmQgb2YgdGhlIHN1Yi10ZW1wbGF0ZSBpbiB0aGUgdHJhbnNsYXRpb24gXCIke21lc3NhZ2V9XCJgKTtcbiAgICByZXMgKz0gbWVzc2FnZS5zdWJzdHIoaW5kZXgpO1xuICAgIHJldHVybiByZXM7XG59XG4vKipcbiAqIEV4dHJhY3RzIGEgcGFydCBvZiBhIG1lc3NhZ2UgYW5kIHJlbW92ZXMgdGhlIHJlc3QuXG4gKlxuICogVGhpcyBtZXRob2QgaXMgdXNlZCBmb3IgZXh0cmFjdGluZyBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgYXNzb2NpYXRlZCB3aXRoIGEgdGVtcGxhdGUuIEFcbiAqIHRyYW5zbGF0ZWQgbWVzc2FnZSBjYW4gc3BhbiBtdWx0aXBsZSB0ZW1wbGF0ZXMuXG4gKlxuICogRXhhbXBsZTpcbiAqIGBgYFxuICogPGRpdiBpMThuPlRyYW5zbGF0ZSA8c3BhbiAqbmdJZj5tZTwvc3Bhbj4hPC9kaXY+XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBjcm9wXG4gKiBAcGFyYW0gc3ViVGVtcGxhdGVJbmRleCBJbmRleCBvZiB0aGUgc3ViLXRlbXBsYXRlIHRvIGV4dHJhY3QuIElmIHVuZGVmaW5lZCBpdCByZXR1cm5zIHRoZVxuICogZXh0ZXJuYWwgdGVtcGxhdGUgYW5kIHJlbW92ZXMgYWxsIHN1Yi10ZW1wbGF0ZXMuXG4gKi9cbmZ1bmN0aW9uIGdldFRyYW5zbGF0aW9uRm9yVGVtcGxhdGUobWVzc2FnZSwgc3ViVGVtcGxhdGVJbmRleCkge1xuICAgIGlmIChpc1Jvb3RUZW1wbGF0ZU1lc3NhZ2Uoc3ViVGVtcGxhdGVJbmRleCkpIHtcbiAgICAgICAgLy8gV2Ugd2FudCB0aGUgcm9vdCB0ZW1wbGF0ZSBtZXNzYWdlLCBpZ25vcmUgYWxsIHN1Yi10ZW1wbGF0ZXNcbiAgICAgICAgcmV0dXJuIHJlbW92ZUlubmVyVGVtcGxhdGVUcmFuc2xhdGlvbihtZXNzYWdlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFdlIHdhbnQgYSBzcGVjaWZpYyBzdWItdGVtcGxhdGVcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBtZXNzYWdlLmluZGV4T2YoYDoke3N1YlRlbXBsYXRlSW5kZXh9JHtNQVJLRVJ9YCkgKyAyICsgc3ViVGVtcGxhdGVJbmRleC50b1N0cmluZygpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgZW5kID0gbWVzc2FnZS5zZWFyY2gobmV3IFJlZ0V4cChgJHtNQVJLRVJ9XFxcXC9cXFxcKlxcXFxkKzoke3N1YlRlbXBsYXRlSW5kZXh9JHtNQVJLRVJ9YCkpO1xuICAgICAgICByZXR1cm4gcmVtb3ZlSW5uZXJUZW1wbGF0ZVRyYW5zbGF0aW9uKG1lc3NhZ2Uuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpKTtcbiAgICB9XG59XG4vKipcbiAqIEdlbmVyYXRlIHRoZSBPcENvZGVzIGZvciBJQ1UgZXhwcmVzc2lvbnMuXG4gKlxuICogQHBhcmFtIGljdUV4cHJlc3Npb25cbiAqIEBwYXJhbSBpbmRleCBJbmRleCB3aGVyZSB0aGUgYW5jaG9yIGlzIHN0b3JlZCBhbmQgYW4gb3B0aW9uYWwgYFRJY3VDb250YWluZXJOb2RlYFxuICogICAtIGBsVmlld1thbmNob3JJZHhdYCBwb2ludHMgdG8gYSBgQ29tbWVudGAgbm9kZSByZXByZXNlbnRpbmcgdGhlIGFuY2hvciBmb3IgdGhlIElDVS5cbiAqICAgLSBgdFZpZXcuZGF0YVthbmNob3JJZHhdYCBwb2ludHMgdG8gdGhlIGBUSWN1Q29udGFpbmVyTm9kZWAgaWYgSUNVIGlzIHJvb3QgKGBudWxsYCBvdGhlcndpc2UpXG4gKi9cbmZ1bmN0aW9uIGljdVN0YXJ0KHRWaWV3LCBsVmlldywgdXBkYXRlT3BDb2RlcywgcGFyZW50SWR4LCBpY3VFeHByZXNzaW9uLCBhbmNob3JJZHgpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChpY3VFeHByZXNzaW9uLCAnSUNVIGV4cHJlc3Npb24gbXVzdCBiZSBkZWZpbmVkJyk7XG4gICAgbGV0IGJpbmRpbmdNYXNrID0gMDtcbiAgICBjb25zdCB0SWN1ID0ge1xuICAgICAgICB0eXBlOiBpY3VFeHByZXNzaW9uLnR5cGUsXG4gICAgICAgIGN1cnJlbnRDYXNlTFZpZXdJbmRleDogYWxsb2NFeHBhbmRvKHRWaWV3LCBsVmlldywgMSwgbnVsbCksXG4gICAgICAgIGFuY2hvcklkeCxcbiAgICAgICAgY2FzZXM6IFtdLFxuICAgICAgICBjcmVhdGU6IFtdLFxuICAgICAgICByZW1vdmU6IFtdLFxuICAgICAgICB1cGRhdGU6IFtdXG4gICAgfTtcbiAgICBhZGRVcGRhdGVJY3VTd2l0Y2godXBkYXRlT3BDb2RlcywgaWN1RXhwcmVzc2lvbiwgYW5jaG9ySWR4KTtcbiAgICBzZXRUSWN1KHRWaWV3LCBhbmNob3JJZHgsIHRJY3UpO1xuICAgIGNvbnN0IHZhbHVlcyA9IGljdUV4cHJlc3Npb24udmFsdWVzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIEVhY2ggdmFsdWUgaXMgYW4gYXJyYXkgb2Ygc3RyaW5ncyAmIG90aGVyIElDVSBleHByZXNzaW9uc1xuICAgICAgICBjb25zdCB2YWx1ZUFyciA9IHZhbHVlc1tpXTtcbiAgICAgICAgY29uc3QgbmVzdGVkSWN1cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHZhbHVlQXJyLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlQXJyW2pdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAvLyBJdCBpcyBhbiBuZXN0ZWQgSUNVIGV4cHJlc3Npb25cbiAgICAgICAgICAgICAgICBjb25zdCBpY3VJbmRleCA9IG5lc3RlZEljdXMucHVzaCh2YWx1ZSkgLSAxO1xuICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgbmVzdGVkIElDVSBleHByZXNzaW9uIGJ5IGEgY29tbWVudCBub2RlXG4gICAgICAgICAgICAgICAgdmFsdWVBcnJbal0gPSBgPCEtLe+/vSR7aWN1SW5kZXh977+9LS0+YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBiaW5kaW5nTWFzayA9IHBhcnNlSWN1Q2FzZSh0VmlldywgdEljdSwgbFZpZXcsIHVwZGF0ZU9wQ29kZXMsIHBhcmVudElkeCwgaWN1RXhwcmVzc2lvbi5jYXNlc1tpXSwgdmFsdWVBcnIuam9pbignJyksIG5lc3RlZEljdXMpIHxcbiAgICAgICAgICAgIGJpbmRpbmdNYXNrO1xuICAgIH1cbiAgICBpZiAoYmluZGluZ01hc2spIHtcbiAgICAgICAgYWRkVXBkYXRlSWN1VXBkYXRlKHVwZGF0ZU9wQ29kZXMsIGJpbmRpbmdNYXNrLCBhbmNob3JJZHgpO1xuICAgIH1cbn1cbi8qKlxuICogUGFyc2VzIHRleHQgY29udGFpbmluZyBhbiBJQ1UgZXhwcmVzc2lvbiBhbmQgcHJvZHVjZXMgYSBKU09OIG9iamVjdCBmb3IgaXQuXG4gKiBPcmlnaW5hbCBjb2RlIGZyb20gY2xvc3VyZSBsaWJyYXJ5LCBtb2RpZmllZCBmb3IgQW5ndWxhci5cbiAqXG4gKiBAcGFyYW0gcGF0dGVybiBUZXh0IGNvbnRhaW5pbmcgYW4gSUNVIGV4cHJlc3Npb24gdGhhdCBuZWVkcyB0byBiZSBwYXJzZWQuXG4gKlxuICovXG5mdW5jdGlvbiBwYXJzZUlDVUJsb2NrKHBhdHRlcm4pIHtcbiAgICBjb25zdCBjYXNlcyA9IFtdO1xuICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgIGxldCBpY3VUeXBlID0gMSAvKiBwbHVyYWwgKi87XG4gICAgbGV0IG1haW5CaW5kaW5nID0gMDtcbiAgICBwYXR0ZXJuID0gcGF0dGVybi5yZXBsYWNlKElDVV9CTE9DS19SRUdFWFAsIGZ1bmN0aW9uIChzdHIsIGJpbmRpbmcsIHR5cGUpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdzZWxlY3QnKSB7XG4gICAgICAgICAgICBpY3VUeXBlID0gMCAvKiBzZWxlY3QgKi87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpY3VUeXBlID0gMSAvKiBwbHVyYWwgKi87XG4gICAgICAgIH1cbiAgICAgICAgbWFpbkJpbmRpbmcgPSBwYXJzZUludChiaW5kaW5nLnN1YnN0cigxKSwgMTApO1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfSk7XG4gICAgY29uc3QgcGFydHMgPSBpMThuUGFyc2VUZXh0SW50b1BhcnRzQW5kSUNVKHBhdHRlcm4pO1xuICAgIC8vIExvb2tpbmcgZm9yIChrZXkgYmxvY2spKyBzZXF1ZW5jZS4gT25lIG9mIHRoZSBrZXlzIGhhcyB0byBiZSBcIm90aGVyXCIuXG4gICAgZm9yIChsZXQgcG9zID0gMDsgcG9zIDwgcGFydHMubGVuZ3RoOykge1xuICAgICAgICBsZXQga2V5ID0gcGFydHNbcG9zKytdLnRyaW0oKTtcbiAgICAgICAgaWYgKGljdVR5cGUgPT09IDEgLyogcGx1cmFsICovKSB7XG4gICAgICAgICAgICAvLyBLZXkgY2FuIGJlIFwiPXhcIiwgd2UganVzdCB3YW50IFwieFwiXG4gICAgICAgICAgICBrZXkgPSBrZXkucmVwbGFjZSgvXFxzKig/Oj0pPyhcXHcrKVxccyovLCAnJDEnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5Lmxlbmd0aCkge1xuICAgICAgICAgICAgY2FzZXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJsb2NrcyA9IGkxOG5QYXJzZVRleHRJbnRvUGFydHNBbmRJQ1UocGFydHNbcG9zKytdKTtcbiAgICAgICAgaWYgKGNhc2VzLmxlbmd0aCA+IHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGJsb2Nrcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVE9ETyhvY29tYmUpOiBzdXBwb3J0IElDVSBleHByZXNzaW9ucyBpbiBhdHRyaWJ1dGVzLCBzZWUgIzIxNjE1XG4gICAgcmV0dXJuIHsgdHlwZTogaWN1VHlwZSwgbWFpbkJpbmRpbmc6IG1haW5CaW5kaW5nLCBjYXNlcywgdmFsdWVzIH07XG59XG4vKipcbiAqIEJyZWFrcyBwYXR0ZXJuIGludG8gc3RyaW5ncyBhbmQgdG9wIGxldmVsIHsuLi59IGJsb2Nrcy5cbiAqIENhbiBiZSB1c2VkIHRvIGJyZWFrIGEgbWVzc2FnZSBpbnRvIHRleHQgYW5kIElDVSBleHByZXNzaW9ucywgb3IgdG8gYnJlYWsgYW4gSUNVIGV4cHJlc3Npb25cbiAqIGludG8ga2V5cyBhbmQgY2FzZXMuIE9yaWdpbmFsIGNvZGUgZnJvbSBjbG9zdXJlIGxpYnJhcnksIG1vZGlmaWVkIGZvciBBbmd1bGFyLlxuICpcbiAqIEBwYXJhbSBwYXR0ZXJuIChzdWIpUGF0dGVybiB0byBiZSBicm9rZW4uXG4gKiBAcmV0dXJucyBBbiBgQXJyYXk8c3RyaW5nfEljdUV4cHJlc3Npb24+YCB3aGVyZTpcbiAqICAgLSBvZGQgcG9zaXRpb25zOiBgc3RyaW5nYCA9PiB0ZXh0IGJldHdlZW4gSUNVIGV4cHJlc3Npb25zXG4gKiAgIC0gZXZlbiBwb3NpdGlvbnM6IGBJQ1VFeHByZXNzaW9uYCA9PiBJQ1UgZXhwcmVzc2lvbiBwYXJzZWQgaW50byBgSUNVRXhwcmVzc2lvbmAgcmVjb3JkLlxuICovXG5mdW5jdGlvbiBpMThuUGFyc2VUZXh0SW50b1BhcnRzQW5kSUNVKHBhdHRlcm4pIHtcbiAgICBpZiAoIXBhdHRlcm4pIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBsZXQgcHJldlBvcyA9IDA7XG4gICAgY29uc3QgYnJhY2VTdGFjayA9IFtdO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBjb25zdCBicmFjZXMgPSAvW3t9XS9nO1xuICAgIC8vIGxhc3RJbmRleCBkb2Vzbid0IGdldCBzZXQgdG8gMCBzbyB3ZSBoYXZlIHRvLlxuICAgIGJyYWNlcy5sYXN0SW5kZXggPSAwO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAobWF0Y2ggPSBicmFjZXMuZXhlYyhwYXR0ZXJuKSkge1xuICAgICAgICBjb25zdCBwb3MgPSBtYXRjaC5pbmRleDtcbiAgICAgICAgaWYgKG1hdGNoWzBdID09ICd9Jykge1xuICAgICAgICAgICAgYnJhY2VTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmIChicmFjZVN0YWNrLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gRW5kIG9mIHRoZSBibG9jay5cbiAgICAgICAgICAgICAgICBjb25zdCBibG9jayA9IHBhdHRlcm4uc3Vic3RyaW5nKHByZXZQb3MsIHBvcyk7XG4gICAgICAgICAgICAgICAgaWYgKElDVV9CTE9DS19SRUdFWFAudGVzdChibG9jaykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHBhcnNlSUNVQmxvY2soYmxvY2spKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChibG9jayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXZQb3MgPSBwb3MgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGJyYWNlU3RhY2subGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJzdHJpbmcgPSBwYXR0ZXJuLnN1YnN0cmluZyhwcmV2UG9zLCBwb3MpO1xuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChzdWJzdHJpbmcpO1xuICAgICAgICAgICAgICAgIHByZXZQb3MgPSBwb3MgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJhY2VTdGFjay5wdXNoKCd7Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc3Vic3RyaW5nID0gcGF0dGVybi5zdWJzdHJpbmcocHJldlBvcyk7XG4gICAgcmVzdWx0cy5wdXNoKHN1YnN0cmluZyk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vKipcbiAqIFBhcnNlcyBhIG5vZGUsIGl0cyBjaGlsZHJlbiBhbmQgaXRzIHNpYmxpbmdzLCBhbmQgZ2VuZXJhdGVzIHRoZSBtdXRhdGUgJiB1cGRhdGUgT3BDb2Rlcy5cbiAqXG4gKi9cbmZ1bmN0aW9uIHBhcnNlSWN1Q2FzZSh0VmlldywgdEljdSwgbFZpZXcsIHVwZGF0ZU9wQ29kZXMsIHBhcmVudElkeCwgY2FzZU5hbWUsIHVuc2FmZUNhc2VIdG1sLCBuZXN0ZWRJY3VzKSB7XG4gICAgY29uc3QgY3JlYXRlID0gW107XG4gICAgY29uc3QgcmVtb3ZlID0gW107XG4gICAgY29uc3QgdXBkYXRlID0gW107XG4gICAgaWYgKG5nRGV2TW9kZSkge1xuICAgICAgICBhdHRhY2hEZWJ1Z0dldHRlcihjcmVhdGUsIGljdUNyZWF0ZU9wQ29kZXNUb1N0cmluZyk7XG4gICAgICAgIGF0dGFjaERlYnVnR2V0dGVyKHJlbW92ZSwgaTE4blJlbW92ZU9wQ29kZXNUb1N0cmluZyk7XG4gICAgICAgIGF0dGFjaERlYnVnR2V0dGVyKHVwZGF0ZSwgaTE4blVwZGF0ZU9wQ29kZXNUb1N0cmluZyk7XG4gICAgfVxuICAgIHRJY3UuY2FzZXMucHVzaChjYXNlTmFtZSk7XG4gICAgdEljdS5jcmVhdGUucHVzaChjcmVhdGUpO1xuICAgIHRJY3UucmVtb3ZlLnB1c2gocmVtb3ZlKTtcbiAgICB0SWN1LnVwZGF0ZS5wdXNoKHVwZGF0ZSk7XG4gICAgY29uc3QgaW5lcnRCb2R5SGVscGVyID0gZ2V0SW5lcnRCb2R5SGVscGVyKGdldERvY3VtZW50KCkpO1xuICAgIGNvbnN0IGluZXJ0Qm9keUVsZW1lbnQgPSBpbmVydEJvZHlIZWxwZXIuZ2V0SW5lcnRCb2R5RWxlbWVudCh1bnNhZmVDYXNlSHRtbCk7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQoaW5lcnRCb2R5RWxlbWVudCwgJ1VuYWJsZSB0byBnZW5lcmF0ZSBpbmVydCBib2R5IGVsZW1lbnQnKTtcbiAgICBjb25zdCBpbmVydFJvb3ROb2RlID0gZ2V0VGVtcGxhdGVDb250ZW50KGluZXJ0Qm9keUVsZW1lbnQpIHx8IGluZXJ0Qm9keUVsZW1lbnQ7XG4gICAgaWYgKGluZXJ0Um9vdE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHdhbGtJY3VUcmVlKHRWaWV3LCB0SWN1LCBsVmlldywgdXBkYXRlT3BDb2RlcywgY3JlYXRlLCByZW1vdmUsIHVwZGF0ZSwgaW5lcnRSb290Tm9kZSwgcGFyZW50SWR4LCBuZXN0ZWRJY3VzLCAwKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdhbGtJY3VUcmVlKHRWaWV3LCB0SWN1LCBsVmlldywgc2hhcmVkVXBkYXRlT3BDb2RlcywgY3JlYXRlLCByZW1vdmUsIHVwZGF0ZSwgcGFyZW50Tm9kZSwgcGFyZW50SWR4LCBuZXN0ZWRJY3VzLCBkZXB0aCkge1xuICAgIGxldCBiaW5kaW5nTWFzayA9IDA7XG4gICAgbGV0IGN1cnJlbnROb2RlID0gcGFyZW50Tm9kZS5maXJzdENoaWxkO1xuICAgIHdoaWxlIChjdXJyZW50Tm9kZSkge1xuICAgICAgICBjb25zdCBuZXdJbmRleCA9IGFsbG9jRXhwYW5kbyh0VmlldywgbFZpZXcsIDEsIG51bGwpO1xuICAgICAgICBzd2l0Y2ggKGN1cnJlbnROb2RlLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIE5vZGUuRUxFTUVOVF9OT0RFOlxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBjdXJyZW50Tm9kZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKFZBTElEX0VMRU1FTlRTLmhhc093blByb3BlcnR5KHRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZENyZWF0ZU5vZGVBbmRBcHBlbmQoY3JlYXRlLCBFTEVNRU5UX01BUktFUiwgdGFnTmFtZSwgcGFyZW50SWR4LCBuZXdJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHRWaWV3LmRhdGFbbmV3SW5kZXhdID0gdGFnTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxBdHRycyA9IGVsZW1lbnQuYXR0cmlidXRlcztcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbEF0dHJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyID0gZWxBdHRycy5pdGVtKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbG93ZXJBdHRyTmFtZSA9IGF0dHIubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzQmluZGluZyA9ICEhYXR0ci52YWx1ZS5tYXRjaChCSU5ESU5HX1JFR0VYUCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBhc3N1bWUgdGhlIGlucHV0IHN0cmluZyBpcyBzYWZlLCB1bmxlc3MgaXQncyB1c2luZyBhIGJpbmRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNCaW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFZBTElEX0FUVFJTLmhhc093blByb3BlcnR5KGxvd2VyQXR0ck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChVUklfQVRUUlNbbG93ZXJBdHRyTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlQmluZGluZ1VwZGF0ZU9wQ29kZXModXBkYXRlLCBhdHRyLnZhbHVlLCBuZXdJbmRleCwgYXR0ci5uYW1lLCAwLCBfc2FuaXRpemVVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKFNSQ1NFVF9BVFRSU1tsb3dlckF0dHJOYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVCaW5kaW5nVXBkYXRlT3BDb2Rlcyh1cGRhdGUsIGF0dHIudmFsdWUsIG5ld0luZGV4LCBhdHRyLm5hbWUsIDAsIHNhbml0aXplU3Jjc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlbmVyYXRlQmluZGluZ1VwZGF0ZU9wQ29kZXModXBkYXRlLCBhdHRyLnZhbHVlLCBuZXdJbmRleCwgYXR0ci5uYW1lLCAwLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFdBUk5JTkc6IGlnbm9yaW5nIHVuc2FmZSBhdHRyaWJ1dGUgdmFsdWUgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7bG93ZXJBdHRyTmFtZX0gb24gZWxlbWVudCAke3RhZ05hbWV9IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAoc2VlIGh0dHBzOi8vZy5jby9uZy9zZWN1cml0eSN4c3MpYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ3JlYXRlQXR0cmlidXRlKGNyZWF0ZSwgbmV3SW5kZXgsIGF0dHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBjaGlsZHJlbiBvZiB0aGlzIG5vZGUgKGlmIGFueSlcbiAgICAgICAgICAgICAgICAgICAgYmluZGluZ01hc2sgPSB3YWxrSWN1VHJlZSh0VmlldywgdEljdSwgbFZpZXcsIHNoYXJlZFVwZGF0ZU9wQ29kZXMsIGNyZWF0ZSwgcmVtb3ZlLCB1cGRhdGUsIGN1cnJlbnROb2RlLCBuZXdJbmRleCwgbmVzdGVkSWN1cywgZGVwdGggKyAxKSB8XG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kaW5nTWFzaztcbiAgICAgICAgICAgICAgICAgICAgYWRkUmVtb3ZlTm9kZShyZW1vdmUsIG5ld0luZGV4LCBkZXB0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBOb2RlLlRFWFRfTk9ERTpcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN1cnJlbnROb2RlLnRleHRDb250ZW50IHx8ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc0JpbmRpbmcgPSB2YWx1ZS5tYXRjaChCSU5ESU5HX1JFR0VYUCk7XG4gICAgICAgICAgICAgICAgYWRkQ3JlYXRlTm9kZUFuZEFwcGVuZChjcmVhdGUsIG51bGwsIGhhc0JpbmRpbmcgPyAnJyA6IHZhbHVlLCBwYXJlbnRJZHgsIG5ld0luZGV4KTtcbiAgICAgICAgICAgICAgICBhZGRSZW1vdmVOb2RlKHJlbW92ZSwgbmV3SW5kZXgsIGRlcHRoKTtcbiAgICAgICAgICAgICAgICBpZiAoaGFzQmluZGluZykge1xuICAgICAgICAgICAgICAgICAgICBiaW5kaW5nTWFzayA9XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0ZUJpbmRpbmdVcGRhdGVPcENvZGVzKHVwZGF0ZSwgdmFsdWUsIG5ld0luZGV4LCBudWxsLCAwLCBudWxsKSB8IGJpbmRpbmdNYXNrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgTm9kZS5DT01NRU5UX05PREU6XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNvbW1lbnQgbm9kZSBpcyBhIHBsYWNlaG9sZGVyIGZvciBhIG5lc3RlZCBJQ1VcbiAgICAgICAgICAgICAgICBjb25zdCBpc05lc3RlZEljdSA9IE5FU1RFRF9JQ1UuZXhlYyhjdXJyZW50Tm9kZS50ZXh0Q29udGVudCB8fCAnJyk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmVzdGVkSWN1KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5lc3RlZEljdUluZGV4ID0gcGFyc2VJbnQoaXNOZXN0ZWRJY3VbMV0sIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWN1RXhwcmVzc2lvbiA9IG5lc3RlZEljdXNbbmVzdGVkSWN1SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbW1lbnQgbm9kZSB0aGF0IHdpbGwgYW5jaG9yIHRoZSBJQ1UgZXhwcmVzc2lvblxuICAgICAgICAgICAgICAgICAgICBhZGRDcmVhdGVOb2RlQW5kQXBwZW5kKGNyZWF0ZSwgSUNVX01BUktFUiwgbmdEZXZNb2RlID8gYG5lc3RlZCBJQ1UgJHtuZXN0ZWRJY3VJbmRleH1gIDogJycsIHBhcmVudElkeCwgbmV3SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBpY3VTdGFydCh0VmlldywgbFZpZXcsIHNoYXJlZFVwZGF0ZU9wQ29kZXMsIHBhcmVudElkeCwgaWN1RXhwcmVzc2lvbiwgbmV3SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRSZW1vdmVOZXN0ZWRJY3UocmVtb3ZlLCBuZXdJbmRleCwgZGVwdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50Tm9kZSA9IGN1cnJlbnROb2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICByZXR1cm4gYmluZGluZ01hc2s7XG59XG5mdW5jdGlvbiBhZGRSZW1vdmVOb2RlKHJlbW92ZSwgaW5kZXgsIGRlcHRoKSB7XG4gICAgaWYgKGRlcHRoID09PSAwKSB7XG4gICAgICAgIHJlbW92ZS5wdXNoKGluZGV4KTtcbiAgICB9XG59XG5mdW5jdGlvbiBhZGRSZW1vdmVOZXN0ZWRJY3UocmVtb3ZlLCBpbmRleCwgZGVwdGgpIHtcbiAgICBpZiAoZGVwdGggPT09IDApIHtcbiAgICAgICAgcmVtb3ZlLnB1c2gofmluZGV4KTsgLy8gcmVtb3ZlIElDVSBhdCBgaW5kZXhgXG4gICAgICAgIHJlbW92ZS5wdXNoKGluZGV4KTsgLy8gcmVtb3ZlIElDVSBjb21tZW50IGF0IGBpbmRleGBcbiAgICB9XG59XG5mdW5jdGlvbiBhZGRVcGRhdGVJY3VTd2l0Y2godXBkYXRlLCBpY3VFeHByZXNzaW9uLCBpbmRleCkge1xuICAgIHVwZGF0ZS5wdXNoKHRvTWFza0JpdChpY3VFeHByZXNzaW9uLm1haW5CaW5kaW5nKSwgMiwgLTEgLSBpY3VFeHByZXNzaW9uLm1haW5CaW5kaW5nLCBpbmRleCA8PCAyIC8qIFNISUZUX1JFRiAqLyB8IDIgLyogSWN1U3dpdGNoICovKTtcbn1cbmZ1bmN0aW9uIGFkZFVwZGF0ZUljdVVwZGF0ZSh1cGRhdGUsIGJpbmRpbmdNYXNrLCBpbmRleCkge1xuICAgIHVwZGF0ZS5wdXNoKGJpbmRpbmdNYXNrLCAxLCBpbmRleCA8PCAyIC8qIFNISUZUX1JFRiAqLyB8IDMgLyogSWN1VXBkYXRlICovKTtcbn1cbmZ1bmN0aW9uIGFkZENyZWF0ZU5vZGVBbmRBcHBlbmQoY3JlYXRlLCBtYXJrZXIsIHRleHQsIGFwcGVuZFRvUGFyZW50SWR4LCBjcmVhdGVBdElkeCkge1xuICAgIGlmIChtYXJrZXIgIT09IG51bGwpIHtcbiAgICAgICAgY3JlYXRlLnB1c2gobWFya2VyKTtcbiAgICB9XG4gICAgY3JlYXRlLnB1c2godGV4dCwgY3JlYXRlQXRJZHgsIGljdUNyZWF0ZU9wQ29kZSgwIC8qIEFwcGVuZENoaWxkICovLCBhcHBlbmRUb1BhcmVudElkeCwgY3JlYXRlQXRJZHgpKTtcbn1cbmZ1bmN0aW9uIGFkZENyZWF0ZUF0dHJpYnV0ZShjcmVhdGUsIG5ld0luZGV4LCBhdHRyKSB7XG4gICAgY3JlYXRlLnB1c2gobmV3SW5kZXggPDwgMSAvKiBTSElGVF9SRUYgKi8gfCAxIC8qIEF0dHIgKi8sIGF0dHIubmFtZSwgYXR0ci52YWx1ZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLy8gaTE4blBvc3Rwcm9jZXNzIGNvbnN0c1xuY29uc3QgUk9PVF9URU1QTEFURV9JRCA9IDA7XG5jb25zdCBQUF9NVUxUSV9WQUxVRV9QTEFDRUhPTERFUlNfUkVHRVhQID0gL1xcWyjvv70uKz/vv70/KVxcXS87XG5jb25zdCBQUF9QTEFDRUhPTERFUlNfUkVHRVhQID0gL1xcWyjvv70uKz/vv70/KVxcXXwo77+9XFwvP1xcKlxcZCs6XFxkK++/vSkvZztcbmNvbnN0IFBQX0lDVV9WQVJTX1JFR0VYUCA9IC8oe1xccyopKFZBUl8oUExVUkFMfFNFTEVDVCkoX1xcZCspPykoXFxzKiwpL2c7XG5jb25zdCBQUF9JQ1VfUExBQ0VIT0xERVJTX1JFR0VYUCA9IC97KFtBLVowLTlfXSspfS9nO1xuY29uc3QgUFBfSUNVU19SRUdFWFAgPSAv77+9STE4Tl9FWFBfKElDVShfXFxkKyk/Ke+/vS9nO1xuY29uc3QgUFBfQ0xPU0VfVEVNUExBVEVfUkVHRVhQID0gL1xcL1xcKi87XG5jb25zdCBQUF9URU1QTEFURV9JRF9SRUdFWFAgPSAvXFxkK1xcOihcXGQrKS87XG4vKipcbiAqIEhhbmRsZXMgbWVzc2FnZSBzdHJpbmcgcG9zdC1wcm9jZXNzaW5nIGZvciBpbnRlcm5hdGlvbmFsaXphdGlvbi5cbiAqXG4gKiBIYW5kbGVzIG1lc3NhZ2Ugc3RyaW5nIHBvc3QtcHJvY2Vzc2luZyBieSB0cmFuc2Zvcm1pbmcgaXQgZnJvbSBpbnRlcm1lZGlhdGVcbiAqIGZvcm1hdCAodGhhdCBtaWdodCBjb250YWluIHNvbWUgbWFya2VycyB0aGF0IHdlIG5lZWQgdG8gcmVwbGFjZSkgdG8gdGhlIGZpbmFsXG4gKiBmb3JtLCBjb25zdW1hYmxlIGJ5IGkxOG5TdGFydCBpbnN0cnVjdGlvbi4gUG9zdCBwcm9jZXNzaW5nIHN0ZXBzIGluY2x1ZGU6XG4gKlxuICogMS4gUmVzb2x2ZSBhbGwgbXVsdGktdmFsdWUgY2FzZXMgKGxpa2UgW++/vSoxOjHvv73vv70jMjox77+9fO+/vSM0OjHvv71877+9Ne+/vV0pXG4gKiAyLiBSZXBsYWNlIGFsbCBJQ1UgdmFycyAobGlrZSBcIlZBUl9QTFVSQUxcIilcbiAqIDMuIFJlcGxhY2UgYWxsIHBsYWNlaG9sZGVycyB1c2VkIGluc2lkZSBJQ1VzIGluIGEgZm9ybSBvZiB7UExBQ0VIT0xERVJ9XG4gKiA0LiBSZXBsYWNlIGFsbCBJQ1UgcmVmZXJlbmNlcyB3aXRoIGNvcnJlc3BvbmRpbmcgdmFsdWVzIChsaWtlIO+/vUlDVV9FWFBfSUNVXzHvv70pXG4gKiAgICBpbiBjYXNlIG11bHRpcGxlIElDVXMgaGF2ZSB0aGUgc2FtZSBwbGFjZWhvbGRlciBuYW1lXG4gKlxuICogQHBhcmFtIG1lc3NhZ2UgUmF3IHRyYW5zbGF0aW9uIHN0cmluZyBmb3IgcG9zdCBwcm9jZXNzaW5nXG4gKiBAcGFyYW0gcmVwbGFjZW1lbnRzIFNldCBvZiByZXBsYWNlbWVudHMgdGhhdCBzaG91bGQgYmUgYXBwbGllZFxuICpcbiAqIEByZXR1cm5zIFRyYW5zZm9ybWVkIHN0cmluZyB0aGF0IGNhbiBiZSBjb25zdW1lZCBieSBpMThuU3RhcnQgaW5zdHJ1Y3Rpb25cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiBpMThuUG9zdHByb2Nlc3MobWVzc2FnZSwgcmVwbGFjZW1lbnRzID0ge30pIHtcbiAgICAvKipcbiAgICAgKiBTdGVwIDE6IHJlc29sdmUgYWxsIG11bHRpLXZhbHVlIHBsYWNlaG9sZGVycyBsaWtlIFvvv70jNe+/vXzvv70qMTox77+977+9IzI6Me+/vXzvv70jNDox77+9XVxuICAgICAqXG4gICAgICogTm90ZTogZHVlIHRvIHRoZSB3YXkgd2UgcHJvY2VzcyBuZXN0ZWQgdGVtcGxhdGVzIChCRlMpLCBtdWx0aS12YWx1ZSBwbGFjZWhvbGRlcnMgYXJlIHR5cGljYWxseVxuICAgICAqIGdyb3VwZWQgYnkgdGVtcGxhdGVzLCBmb3IgZXhhbXBsZTogW++/vSM177+9fO+/vSM277+9fO+/vSMxOjHvv71877+9IzM6Mu+/vV0gd2hlcmUg77+9IzXvv70gYW5kIO+/vSM277+9IGJlbG9uZyB0byByb290XG4gICAgICogdGVtcGxhdGUsIO+/vSMxOjHvv70gYmVsb25nIHRvIG5lc3RlZCB0ZW1wbGF0ZSB3aXRoIGluZGV4IDEgYW5kIO+/vSMxOjLvv70gLSBuZXN0ZWQgdGVtcGxhdGUgd2l0aCBpbmRleFxuICAgICAqIDMuIEhvd2V2ZXIgaW4gcmVhbCB0ZW1wbGF0ZXMgdGhlIG9yZGVyIG1pZ2h0IGJlIGRpZmZlcmVudDogaS5lLiDvv70jMTox77+9IGFuZC9vciDvv70jMzoy77+9IG1heSBnbyBpblxuICAgICAqIGZyb250IG9mIO+/vSM277+9LiBUaGUgcG9zdCBwcm9jZXNzaW5nIHN0ZXAgcmVzdG9yZXMgdGhlIHJpZ2h0IG9yZGVyIGJ5IGtlZXBpbmcgdHJhY2sgb2YgdGhlXG4gICAgICogdGVtcGxhdGUgaWQgc3RhY2sgYW5kIGxvb2tzIGZvciBwbGFjZWhvbGRlcnMgdGhhdCBiZWxvbmcgdG8gdGhlIGN1cnJlbnRseSBhY3RpdmUgdGVtcGxhdGUuXG4gICAgICovXG4gICAgbGV0IHJlc3VsdCA9IG1lc3NhZ2U7XG4gICAgaWYgKFBQX01VTFRJX1ZBTFVFX1BMQUNFSE9MREVSU19SRUdFWFAudGVzdChtZXNzYWdlKSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0ge307XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlSWRzU3RhY2sgPSBbUk9PVF9URU1QTEFURV9JRF07XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKFBQX1BMQUNFSE9MREVSU19SRUdFWFAsIChtLCBwaHMsIHRtcGwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBwaHMgfHwgdG1wbDtcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IG1hdGNoZXNbY29udGVudF0gfHwgW107XG4gICAgICAgICAgICBpZiAoIXBsYWNlaG9sZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnNwbGl0KCd8JykuZm9yRWFjaCgocGxhY2Vob2xkZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBwbGFjZWhvbGRlci5tYXRjaChQUF9URU1QTEFURV9JRF9SRUdFWFApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUlkID0gbWF0Y2ggPyBwYXJzZUludChtYXRjaFsxXSwgMTApIDogUk9PVF9URU1QTEFURV9JRDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDbG9zZVRlbXBsYXRlVGFnID0gUFBfQ0xPU0VfVEVNUExBVEVfUkVHRVhQLnRlc3QocGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcnMucHVzaChbdGVtcGxhdGVJZCwgaXNDbG9zZVRlbXBsYXRlVGFnLCBwbGFjZWhvbGRlcl0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG1hdGNoZXNbY29udGVudF0gPSBwbGFjZWhvbGRlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXBsYWNlaG9sZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGkxOG4gcG9zdHByb2Nlc3M6IHVubWF0Y2hlZCBwbGFjZWhvbGRlciAtICR7Y29udGVudH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUZW1wbGF0ZUlkID0gdGVtcGxhdGVJZHNTdGFja1t0ZW1wbGF0ZUlkc1N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgbGV0IGlkeCA9IDA7XG4gICAgICAgICAgICAvLyBmaW5kIHBsYWNlaG9sZGVyIGluZGV4IHRoYXQgbWF0Y2hlcyBjdXJyZW50IHRlbXBsYXRlIGlkXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYWNlaG9sZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChwbGFjZWhvbGRlcnNbaV1bMF0gPT09IGN1cnJlbnRUZW1wbGF0ZUlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlkeCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0ZW1wbGF0ZSBpZCBzdGFjayBiYXNlZCBvbiB0aGUgY3VycmVudCB0YWcgZXh0cmFjdGVkXG4gICAgICAgICAgICBjb25zdCBbdGVtcGxhdGVJZCwgaXNDbG9zZVRlbXBsYXRlVGFnLCBwbGFjZWhvbGRlcl0gPSBwbGFjZWhvbGRlcnNbaWR4XTtcbiAgICAgICAgICAgIGlmIChpc0Nsb3NlVGVtcGxhdGVUYWcpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUlkc1N0YWNrLnBvcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY3VycmVudFRlbXBsYXRlSWQgIT09IHRlbXBsYXRlSWQpIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUlkc1N0YWNrLnB1c2godGVtcGxhdGVJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZW1vdmUgcHJvY2Vzc2VkIHRhZyBmcm9tIHRoZSBsaXN0XG4gICAgICAgICAgICBwbGFjZWhvbGRlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICByZXR1cm4gcGxhY2Vob2xkZXI7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyByZXR1cm4gY3VycmVudCByZXN1bHQgaWYgbm8gcmVwbGFjZW1lbnRzIHNwZWNpZmllZFxuICAgIGlmICghT2JqZWN0LmtleXMocmVwbGFjZW1lbnRzKS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RlcCAyOiByZXBsYWNlIGFsbCBJQ1UgdmFycyAobGlrZSBcIlZBUl9QTFVSQUxcIilcbiAgICAgKi9cbiAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZShQUF9JQ1VfVkFSU19SRUdFWFAsIChtYXRjaCwgc3RhcnQsIGtleSwgX3R5cGUsIF9pZHgsIGVuZCkgPT4ge1xuICAgICAgICByZXR1cm4gcmVwbGFjZW1lbnRzLmhhc093blByb3BlcnR5KGtleSkgPyBgJHtzdGFydH0ke3JlcGxhY2VtZW50c1trZXldfSR7ZW5kfWAgOiBtYXRjaDtcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBTdGVwIDM6IHJlcGxhY2UgYWxsIHBsYWNlaG9sZGVycyB1c2VkIGluc2lkZSBJQ1VzIGluIGEgZm9ybSBvZiB7UExBQ0VIT0xERVJ9XG4gICAgICovXG4gICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoUFBfSUNVX1BMQUNFSE9MREVSU19SRUdFWFAsIChtYXRjaCwga2V5KSA9PiB7XG4gICAgICAgIHJldHVybiByZXBsYWNlbWVudHMuaGFzT3duUHJvcGVydHkoa2V5KSA/IHJlcGxhY2VtZW50c1trZXldIDogbWF0Y2g7XG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogU3RlcCA0OiByZXBsYWNlIGFsbCBJQ1UgcmVmZXJlbmNlcyB3aXRoIGNvcnJlc3BvbmRpbmcgdmFsdWVzIChsaWtlIO+/vUlDVV9FWFBfSUNVXzHvv70pIGluIGNhc2VcbiAgICAgKiBtdWx0aXBsZSBJQ1VzIGhhdmUgdGhlIHNhbWUgcGxhY2Vob2xkZXIgbmFtZVxuICAgICAqL1xuICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKFBQX0lDVVNfUkVHRVhQLCAobWF0Y2gsIGtleSkgPT4ge1xuICAgICAgICBpZiAocmVwbGFjZW1lbnRzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSByZXBsYWNlbWVudHNba2V5XTtcbiAgICAgICAgICAgIGlmICghbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGkxOG4gcG9zdHByb2Nlc3M6IHVubWF0Y2hlZCBJQ1UgLSAke21hdGNofSB3aXRoIGtleTogJHtrZXl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbGlzdC5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogTWFya3MgYSBibG9jayBvZiB0ZXh0IGFzIHRyYW5zbGF0YWJsZS5cbiAqXG4gKiBUaGUgaW5zdHJ1Y3Rpb25zIGBpMThuU3RhcnRgIGFuZCBgaTE4bkVuZGAgbWFyayB0aGUgdHJhbnNsYXRpb24gYmxvY2sgaW4gdGhlIHRlbXBsYXRlLlxuICogVGhlIHRyYW5zbGF0aW9uIGBtZXNzYWdlYCBpcyB0aGUgdmFsdWUgd2hpY2ggaXMgbG9jYWxlIHNwZWNpZmljLiBUaGUgdHJhbnNsYXRpb24gc3RyaW5nIG1heVxuICogY29udGFpbiBwbGFjZWhvbGRlcnMgd2hpY2ggYXNzb2NpYXRlIGlubmVyIGVsZW1lbnRzIGFuZCBzdWItdGVtcGxhdGVzIHdpdGhpbiB0aGUgdHJhbnNsYXRpb24uXG4gKlxuICogVGhlIHRyYW5zbGF0aW9uIGBtZXNzYWdlYCBwbGFjZWhvbGRlcnMgYXJlOlxuICogLSBg77+9e2luZGV4fSg6e2Jsb2NrfSnvv71gOiAqQmluZGluZyBQbGFjZWhvbGRlcio6IE1hcmtzIGEgbG9jYXRpb24gd2hlcmUgYW4gZXhwcmVzc2lvbiB3aWxsIGJlXG4gKiAgIGludGVycG9sYXRlZCBpbnRvLiBUaGUgcGxhY2Vob2xkZXIgYGluZGV4YCBwb2ludHMgdG8gdGhlIGV4cHJlc3Npb24gYmluZGluZyBpbmRleC4gQW4gb3B0aW9uYWxcbiAqICAgYGJsb2NrYCB0aGF0IG1hdGNoZXMgdGhlIHN1Yi10ZW1wbGF0ZSBpbiB3aGljaCBpdCB3YXMgZGVjbGFyZWQuXG4gKiAtIGDvv70je2luZGV4fSg6e2Jsb2NrfSnvv71gL2Dvv70vI3tpbmRleH0oOntibG9ja30p77+9YDogKkVsZW1lbnQgUGxhY2Vob2xkZXIqOiAgTWFya3MgdGhlIGJlZ2lubmluZ1xuICogICBhbmQgZW5kIG9mIERPTSBlbGVtZW50IHRoYXQgd2VyZSBlbWJlZGRlZCBpbiB0aGUgb3JpZ2luYWwgdHJhbnNsYXRpb24gYmxvY2suIFRoZSBwbGFjZWhvbGRlclxuICogICBgaW5kZXhgIHBvaW50cyB0byB0aGUgZWxlbWVudCBpbmRleCBpbiB0aGUgdGVtcGxhdGUgaW5zdHJ1Y3Rpb25zIHNldC4gQW4gb3B0aW9uYWwgYGJsb2NrYCB0aGF0XG4gKiAgIG1hdGNoZXMgdGhlIHN1Yi10ZW1wbGF0ZSBpbiB3aGljaCBpdCB3YXMgZGVjbGFyZWQuXG4gKiAtIGDvv70qe2luZGV4fTp7YmxvY2t977+9YC9g77+9Lyp7aW5kZXh9OntibG9ja33vv71gOiAqU3ViLXRlbXBsYXRlIFBsYWNlaG9sZGVyKjogU3ViLXRlbXBsYXRlcyBtdXN0IGJlXG4gKiAgIHNwbGl0IHVwIGFuZCB0cmFuc2xhdGVkIHNlcGFyYXRlbHkgaW4gZWFjaCBhbmd1bGFyIHRlbXBsYXRlIGZ1bmN0aW9uLiBUaGUgYGluZGV4YCBwb2ludHMgdG8gdGhlXG4gKiAgIGB0ZW1wbGF0ZWAgaW5zdHJ1Y3Rpb24gaW5kZXguIEEgYGJsb2NrYCB0aGF0IG1hdGNoZXMgdGhlIHN1Yi10ZW1wbGF0ZSBpbiB3aGljaCBpdCB3YXMgZGVjbGFyZWQuXG4gKlxuICogQHBhcmFtIGluZGV4IEEgdW5pcXVlIGluZGV4IG9mIHRoZSB0cmFuc2xhdGlvbiBpbiB0aGUgc3RhdGljIGJsb2NrLlxuICogQHBhcmFtIG1lc3NhZ2VJbmRleCBBbiBpbmRleCBvZiB0aGUgdHJhbnNsYXRpb24gbWVzc2FnZSBmcm9tIHRoZSBgZGVmLmNvbnN0c2AgYXJyYXkuXG4gKiBAcGFyYW0gc3ViVGVtcGxhdGVJbmRleCBPcHRpb25hbCBzdWItdGVtcGxhdGUgaW5kZXggaW4gdGhlIGBtZXNzYWdlYC5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1aTE4blN0YXJ0KGluZGV4LCBtZXNzYWdlSW5kZXgsIHN1YlRlbXBsYXRlSW5kZXggPSAtMSkge1xuICAgIGNvbnN0IHRWaWV3ID0gZ2V0VFZpZXcoKTtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgYWRqdXN0ZWRJbmRleCA9IEhFQURFUl9PRkZTRVQgKyBpbmRleDtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0VmlldywgYHRWaWV3IHNob3VsZCBiZSBkZWZpbmVkYCk7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdldENvbnN0YW50KHRWaWV3LmNvbnN0cywgbWVzc2FnZUluZGV4KTtcbiAgICBjb25zdCBwYXJlbnRUTm9kZSA9IGdldEN1cnJlbnRQYXJlbnRUTm9kZSgpO1xuICAgIGlmICh0Vmlldy5maXJzdENyZWF0ZVBhc3MpIHtcbiAgICAgICAgaTE4blN0YXJ0Rmlyc3RDcmVhdGVQYXNzKHRWaWV3LCBwYXJlbnRUTm9kZSA9PT0gbnVsbCA/IDAgOiBwYXJlbnRUTm9kZS5pbmRleCwgbFZpZXcsIGFkanVzdGVkSW5kZXgsIG1lc3NhZ2UsIHN1YlRlbXBsYXRlSW5kZXgpO1xuICAgIH1cbiAgICBjb25zdCB0STE4biA9IHRWaWV3LmRhdGFbYWRqdXN0ZWRJbmRleF07XG4gICAgY29uc3Qgc2FtZVZpZXdQYXJlbnRUTm9kZSA9IHBhcmVudFROb2RlID09PSBsVmlld1tUX0hPU1RdID8gbnVsbCA6IHBhcmVudFROb2RlO1xuICAgIGNvbnN0IHBhcmVudFJOb2RlID0gZ2V0Q2xvc2VzdFJFbGVtZW50KHRWaWV3LCBzYW1lVmlld1BhcmVudFROb2RlLCBsVmlldyk7XG4gICAgLy8gSWYgYHBhcmVudFROb2RlYCBpcyBhbiBgRWxlbWVudENvbnRhaW5lcmAgdGhhbiBpdCBoYXMgYDwhLS1uZy1jb250YWluZXItLS0+YC5cbiAgICAvLyBXaGVuIHdlIGRvIGluc2VydHMgd2UgaGF2ZSB0byBtYWtlIHN1cmUgdG8gaW5zZXJ0IGluIGZyb250IG9mIGA8IS0tbmctY29udGFpbmVyLS0tPmAuXG4gICAgY29uc3QgaW5zZXJ0SW5Gcm9udE9mID0gcGFyZW50VE5vZGUgJiYgKHBhcmVudFROb2RlLnR5cGUgJiA4IC8qIEVsZW1lbnRDb250YWluZXIgKi8pID9cbiAgICAgICAgbFZpZXdbcGFyZW50VE5vZGUuaW5kZXhdIDpcbiAgICAgICAgbnVsbDtcbiAgICBhcHBseUNyZWF0ZU9wQ29kZXMobFZpZXcsIHRJMThuLmNyZWF0ZSwgcGFyZW50Uk5vZGUsIGluc2VydEluRnJvbnRPZik7XG4gICAgc2V0SW5JMThuQmxvY2sodHJ1ZSk7XG59XG4vKipcbiAqIFRyYW5zbGF0ZXMgYSB0cmFuc2xhdGlvbiBibG9jayBtYXJrZWQgYnkgYGkxOG5TdGFydGAgYW5kIGBpMThuRW5kYC4gSXQgaW5zZXJ0cyB0aGUgdGV4dC9JQ1Ugbm9kZXNcbiAqIGludG8gdGhlIHJlbmRlciB0cmVlLCBtb3ZlcyB0aGUgcGxhY2Vob2xkZXIgbm9kZXMgYW5kIHJlbW92ZXMgdGhlIGRlbGV0ZWQgbm9kZXMuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWkxOG5FbmQoKSB7XG4gICAgc2V0SW5JMThuQmxvY2soZmFsc2UpO1xufVxuLyoqXG4gKlxuICogVXNlIHRoaXMgaW5zdHJ1Y3Rpb24gdG8gY3JlYXRlIGEgdHJhbnNsYXRpb24gYmxvY2sgdGhhdCBkb2Vzbid0IGNvbnRhaW4gYW55IHBsYWNlaG9sZGVyLlxuICogSXQgY2FsbHMgYm90aCB7QGxpbmsgaTE4blN0YXJ0fSBhbmQge0BsaW5rIGkxOG5FbmR9IGluIG9uZSBpbnN0cnVjdGlvbi5cbiAqXG4gKiBUaGUgdHJhbnNsYXRpb24gYG1lc3NhZ2VgIGlzIHRoZSB2YWx1ZSB3aGljaCBpcyBsb2NhbGUgc3BlY2lmaWMuIFRoZSB0cmFuc2xhdGlvbiBzdHJpbmcgbWF5XG4gKiBjb250YWluIHBsYWNlaG9sZGVycyB3aGljaCBhc3NvY2lhdGUgaW5uZXIgZWxlbWVudHMgYW5kIHN1Yi10ZW1wbGF0ZXMgd2l0aGluIHRoZSB0cmFuc2xhdGlvbi5cbiAqXG4gKiBUaGUgdHJhbnNsYXRpb24gYG1lc3NhZ2VgIHBsYWNlaG9sZGVycyBhcmU6XG4gKiAtIGDvv717aW5kZXh9KDp7YmxvY2t9Ke+/vWA6ICpCaW5kaW5nIFBsYWNlaG9sZGVyKjogTWFya3MgYSBsb2NhdGlvbiB3aGVyZSBhbiBleHByZXNzaW9uIHdpbGwgYmVcbiAqICAgaW50ZXJwb2xhdGVkIGludG8uIFRoZSBwbGFjZWhvbGRlciBgaW5kZXhgIHBvaW50cyB0byB0aGUgZXhwcmVzc2lvbiBiaW5kaW5nIGluZGV4LiBBbiBvcHRpb25hbFxuICogICBgYmxvY2tgIHRoYXQgbWF0Y2hlcyB0aGUgc3ViLXRlbXBsYXRlIGluIHdoaWNoIGl0IHdhcyBkZWNsYXJlZC5cbiAqIC0gYO+/vSN7aW5kZXh9KDp7YmxvY2t9Ke+/vWAvYO+/vS8je2luZGV4fSg6e2Jsb2NrfSnvv71gOiAqRWxlbWVudCBQbGFjZWhvbGRlcio6ICBNYXJrcyB0aGUgYmVnaW5uaW5nXG4gKiAgIGFuZCBlbmQgb2YgRE9NIGVsZW1lbnQgdGhhdCB3ZXJlIGVtYmVkZGVkIGluIHRoZSBvcmlnaW5hbCB0cmFuc2xhdGlvbiBibG9jay4gVGhlIHBsYWNlaG9sZGVyXG4gKiAgIGBpbmRleGAgcG9pbnRzIHRvIHRoZSBlbGVtZW50IGluZGV4IGluIHRoZSB0ZW1wbGF0ZSBpbnN0cnVjdGlvbnMgc2V0LiBBbiBvcHRpb25hbCBgYmxvY2tgIHRoYXRcbiAqICAgbWF0Y2hlcyB0aGUgc3ViLXRlbXBsYXRlIGluIHdoaWNoIGl0IHdhcyBkZWNsYXJlZC5cbiAqIC0gYO+/vSp7aW5kZXh9OntibG9ja33vv71gL2Dvv70vKntpbmRleH06e2Jsb2Nrfe+/vWA6ICpTdWItdGVtcGxhdGUgUGxhY2Vob2xkZXIqOiBTdWItdGVtcGxhdGVzIG11c3QgYmVcbiAqICAgc3BsaXQgdXAgYW5kIHRyYW5zbGF0ZWQgc2VwYXJhdGVseSBpbiBlYWNoIGFuZ3VsYXIgdGVtcGxhdGUgZnVuY3Rpb24uIFRoZSBgaW5kZXhgIHBvaW50cyB0byB0aGVcbiAqICAgYHRlbXBsYXRlYCBpbnN0cnVjdGlvbiBpbmRleC4gQSBgYmxvY2tgIHRoYXQgbWF0Y2hlcyB0aGUgc3ViLXRlbXBsYXRlIGluIHdoaWNoIGl0IHdhcyBkZWNsYXJlZC5cbiAqXG4gKiBAcGFyYW0gaW5kZXggQSB1bmlxdWUgaW5kZXggb2YgdGhlIHRyYW5zbGF0aW9uIGluIHRoZSBzdGF0aWMgYmxvY2suXG4gKiBAcGFyYW0gbWVzc2FnZUluZGV4IEFuIGluZGV4IG9mIHRoZSB0cmFuc2xhdGlvbiBtZXNzYWdlIGZyb20gdGhlIGBkZWYuY29uc3RzYCBhcnJheS5cbiAqIEBwYXJhbSBzdWJUZW1wbGF0ZUluZGV4IE9wdGlvbmFsIHN1Yi10ZW1wbGF0ZSBpbmRleCBpbiB0aGUgYG1lc3NhZ2VgLlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVpMThuKGluZGV4LCBtZXNzYWdlSW5kZXgsIHN1YlRlbXBsYXRlSW5kZXgpIHtcbiAgICDJtcm1aTE4blN0YXJ0KGluZGV4LCBtZXNzYWdlSW5kZXgsIHN1YlRlbXBsYXRlSW5kZXgpO1xuICAgIMm1ybVpMThuRW5kKCk7XG59XG4vKipcbiAqIE1hcmtzIGEgbGlzdCBvZiBhdHRyaWJ1dGVzIGFzIHRyYW5zbGF0YWJsZS5cbiAqXG4gKiBAcGFyYW0gaW5kZXggQSB1bmlxdWUgaW5kZXggaW4gdGhlIHN0YXRpYyBibG9ja1xuICogQHBhcmFtIHZhbHVlc1xuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVpMThuQXR0cmlidXRlcyhpbmRleCwgYXR0cnNJbmRleCkge1xuICAgIGNvbnN0IHRWaWV3ID0gZ2V0VFZpZXcoKTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0VmlldywgYHRWaWV3IHNob3VsZCBiZSBkZWZpbmVkYCk7XG4gICAgY29uc3QgYXR0cnMgPSBnZXRDb25zdGFudCh0Vmlldy5jb25zdHMsIGF0dHJzSW5kZXgpO1xuICAgIGkxOG5BdHRyaWJ1dGVzRmlyc3RQYXNzKHRWaWV3LCBpbmRleCArIEhFQURFUl9PRkZTRVQsIGF0dHJzKTtcbn1cbi8qKlxuICogU3RvcmVzIHRoZSB2YWx1ZXMgb2YgdGhlIGJpbmRpbmdzIGR1cmluZyBlYWNoIHVwZGF0ZSBjeWNsZSBpbiBvcmRlciB0byBkZXRlcm1pbmUgaWYgd2UgbmVlZCB0b1xuICogdXBkYXRlIHRoZSB0cmFuc2xhdGVkIG5vZGVzLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSBUaGUgYmluZGluZydzIHZhbHVlXG4gKiBAcmV0dXJucyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgaXRzZWxmIHNvIHRoYXQgaXQgbWF5IGJlIGNoYWluZWRcbiAqIChlLmcuIGBpMThuRXhwKGN0eC5uYW1lKShjdHgudGl0bGUpYClcbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1aTE4bkV4cCh2YWx1ZSkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBzZXRNYXNrQml0KGJpbmRpbmdVcGRhdGVkKGxWaWV3LCBuZXh0QmluZGluZ0luZGV4KCksIHZhbHVlKSk7XG4gICAgcmV0dXJuIMm1ybVpMThuRXhwO1xufVxuLyoqXG4gKiBVcGRhdGVzIGEgdHJhbnNsYXRpb24gYmxvY2sgb3IgYW4gaTE4biBhdHRyaWJ1dGUgd2hlbiB0aGUgYmluZGluZ3MgaGF2ZSBjaGFuZ2VkLlxuICpcbiAqIEBwYXJhbSBpbmRleCBJbmRleCBvZiBlaXRoZXIge0BsaW5rIGkxOG5TdGFydH0gKHRyYW5zbGF0aW9uIGJsb2NrKSBvciB7QGxpbmsgaTE4bkF0dHJpYnV0ZXN9XG4gKiAoaTE4biBhdHRyaWJ1dGUpIG9uIHdoaWNoIGl0IHNob3VsZCB1cGRhdGUgdGhlIGNvbnRlbnQuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWkxOG5BcHBseShpbmRleCkge1xuICAgIGFwcGx5STE4bihnZXRUVmlldygpLCBnZXRMVmlldygpLCBpbmRleCArIEhFQURFUl9PRkZTRVQpO1xufVxuLyoqXG4gKiBIYW5kbGVzIG1lc3NhZ2Ugc3RyaW5nIHBvc3QtcHJvY2Vzc2luZyBmb3IgaW50ZXJuYXRpb25hbGl6YXRpb24uXG4gKlxuICogSGFuZGxlcyBtZXNzYWdlIHN0cmluZyBwb3N0LXByb2Nlc3NpbmcgYnkgdHJhbnNmb3JtaW5nIGl0IGZyb20gaW50ZXJtZWRpYXRlXG4gKiBmb3JtYXQgKHRoYXQgbWlnaHQgY29udGFpbiBzb21lIG1hcmtlcnMgdGhhdCB3ZSBuZWVkIHRvIHJlcGxhY2UpIHRvIHRoZSBmaW5hbFxuICogZm9ybSwgY29uc3VtYWJsZSBieSBpMThuU3RhcnQgaW5zdHJ1Y3Rpb24uIFBvc3QgcHJvY2Vzc2luZyBzdGVwcyBpbmNsdWRlOlxuICpcbiAqIDEuIFJlc29sdmUgYWxsIG11bHRpLXZhbHVlIGNhc2VzIChsaWtlIFvvv70qMTox77+977+9IzI6Me+/vXzvv70jNDox77+9fO+/vTXvv71dKVxuICogMi4gUmVwbGFjZSBhbGwgSUNVIHZhcnMgKGxpa2UgXCJWQVJfUExVUkFMXCIpXG4gKiAzLiBSZXBsYWNlIGFsbCBwbGFjZWhvbGRlcnMgdXNlZCBpbnNpZGUgSUNVcyBpbiBhIGZvcm0gb2Yge1BMQUNFSE9MREVSfVxuICogNC4gUmVwbGFjZSBhbGwgSUNVIHJlZmVyZW5jZXMgd2l0aCBjb3JyZXNwb25kaW5nIHZhbHVlcyAobGlrZSDvv71JQ1VfRVhQX0lDVV8x77+9KVxuICogICAgaW4gY2FzZSBtdWx0aXBsZSBJQ1VzIGhhdmUgdGhlIHNhbWUgcGxhY2Vob2xkZXIgbmFtZVxuICpcbiAqIEBwYXJhbSBtZXNzYWdlIFJhdyB0cmFuc2xhdGlvbiBzdHJpbmcgZm9yIHBvc3QgcHJvY2Vzc2luZ1xuICogQHBhcmFtIHJlcGxhY2VtZW50cyBTZXQgb2YgcmVwbGFjZW1lbnRzIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWRcbiAqXG4gKiBAcmV0dXJucyBUcmFuc2Zvcm1lZCBzdHJpbmcgdGhhdCBjYW4gYmUgY29uc3VtZWQgYnkgaTE4blN0YXJ0IGluc3RydWN0aW9uXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWkxOG5Qb3N0cHJvY2VzcyhtZXNzYWdlLCByZXBsYWNlbWVudHMgPSB7fSkge1xuICAgIHJldHVybiBpMThuUG9zdHByb2Nlc3MobWVzc2FnZSwgcmVwbGFjZW1lbnRzKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBSZXNvbHZlcyB0aGUgcHJvdmlkZXJzIHdoaWNoIGFyZSBkZWZpbmVkIGluIHRoZSBEaXJlY3RpdmVEZWYuXG4gKlxuICogV2hlbiBpbnNlcnRpbmcgdGhlIHRva2VucyBhbmQgdGhlIGZhY3RvcmllcyBpbiB0aGVpciByZXNwZWN0aXZlIGFycmF5cywgd2UgY2FuIGFzc3VtZSB0aGF0XG4gKiB0aGlzIG1ldGhvZCBpcyBjYWxsZWQgZmlyc3QgZm9yIHRoZSBjb21wb25lbnQgKGlmIGFueSksIGFuZCB0aGVuIGZvciBvdGhlciBkaXJlY3RpdmVzIG9uIHRoZSBzYW1lXG4gKiBub2RlLlxuICogQXMgYSBjb25zZXF1ZW5jZSx0aGUgcHJvdmlkZXJzIGFyZSBhbHdheXMgcHJvY2Vzc2VkIGluIHRoYXQgb3JkZXI6XG4gKiAxKSBUaGUgdmlldyBwcm92aWRlcnMgb2YgdGhlIGNvbXBvbmVudFxuICogMikgVGhlIHByb3ZpZGVycyBvZiB0aGUgY29tcG9uZW50XG4gKiAzKSBUaGUgcHJvdmlkZXJzIG9mIHRoZSBvdGhlciBkaXJlY3RpdmVzXG4gKiBUaGlzIG1hdGNoZXMgdGhlIHN0cnVjdHVyZSBvZiB0aGUgaW5qZWN0YWJsZXMgYXJyYXlzIG9mIGEgdmlldyAoZm9yIGVhY2ggbm9kZSkuXG4gKiBTbyB0aGUgdG9rZW5zIGFuZCB0aGUgZmFjdG9yaWVzIGNhbiBiZSBwdXNoZWQgYXQgdGhlIGVuZCBvZiB0aGUgYXJyYXlzLCBleGNlcHRcbiAqIGluIG9uZSBjYXNlIGZvciBtdWx0aSBwcm92aWRlcnMuXG4gKlxuICogQHBhcmFtIGRlZiB0aGUgZGlyZWN0aXZlIGRlZmluaXRpb25cbiAqIEBwYXJhbSBwcm92aWRlcnM6IEFycmF5IG9mIGBwcm92aWRlcnNgLlxuICogQHBhcmFtIHZpZXdQcm92aWRlcnM6IEFycmF5IG9mIGB2aWV3UHJvdmlkZXJzYC5cbiAqL1xuZnVuY3Rpb24gcHJvdmlkZXJzUmVzb2x2ZXIoZGVmLCBwcm92aWRlcnMsIHZpZXdQcm92aWRlcnMpIHtcbiAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgaWYgKHRWaWV3LmZpcnN0Q3JlYXRlUGFzcykge1xuICAgICAgICBjb25zdCBpc0NvbXBvbmVudCA9IGlzQ29tcG9uZW50RGVmKGRlZik7XG4gICAgICAgIC8vIFRoZSBsaXN0IG9mIHZpZXcgcHJvdmlkZXJzIGlzIHByb2Nlc3NlZCBmaXJzdCwgYW5kIHRoZSBmbGFncyBhcmUgdXBkYXRlZFxuICAgICAgICByZXNvbHZlUHJvdmlkZXIodmlld1Byb3ZpZGVycywgdFZpZXcuZGF0YSwgdFZpZXcuYmx1ZXByaW50LCBpc0NvbXBvbmVudCwgdHJ1ZSk7XG4gICAgICAgIC8vIFRoZW4sIHRoZSBsaXN0IG9mIHByb3ZpZGVycyBpcyBwcm9jZXNzZWQsIGFuZCB0aGUgZmxhZ3MgYXJlIHVwZGF0ZWRcbiAgICAgICAgcmVzb2x2ZVByb3ZpZGVyKHByb3ZpZGVycywgdFZpZXcuZGF0YSwgdFZpZXcuYmx1ZXByaW50LCBpc0NvbXBvbmVudCwgZmFsc2UpO1xuICAgIH1cbn1cbi8qKlxuICogUmVzb2x2ZXMgYSBwcm92aWRlciBhbmQgcHVibGlzaGVzIGl0IHRvIHRoZSBESSBzeXN0ZW0uXG4gKi9cbmZ1bmN0aW9uIHJlc29sdmVQcm92aWRlcihwcm92aWRlciwgdEluamVjdGFibGVzLCBsSW5qZWN0YWJsZXNCbHVlcHJpbnQsIGlzQ29tcG9uZW50LCBpc1ZpZXdQcm92aWRlcikge1xuICAgIHByb3ZpZGVyID0gcmVzb2x2ZUZvcndhcmRSZWYocHJvdmlkZXIpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHByb3ZpZGVyKSkge1xuICAgICAgICAvLyBSZWN1cnNpdmVseSBjYWxsIGByZXNvbHZlUHJvdmlkZXJgXG4gICAgICAgIC8vIFJlY3Vyc2lvbiBpcyBPSyBpbiB0aGlzIGNhc2UgYmVjYXVzZSB0aGlzIGNvZGUgd2lsbCBub3QgYmUgaW4gaG90LXBhdGggb25jZSB3ZSBpbXBsZW1lbnRcbiAgICAgICAgLy8gY2xvbmluZyBvZiB0aGUgaW5pdGlhbCBzdGF0ZS5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm92aWRlci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzb2x2ZVByb3ZpZGVyKHByb3ZpZGVyW2ldLCB0SW5qZWN0YWJsZXMsIGxJbmplY3RhYmxlc0JsdWVwcmludCwgaXNDb21wb25lbnQsIGlzVmlld1Byb3ZpZGVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgICAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgICAgIGxldCB0b2tlbiA9IGlzVHlwZVByb3ZpZGVyKHByb3ZpZGVyKSA/IHByb3ZpZGVyIDogcmVzb2x2ZUZvcndhcmRSZWYocHJvdmlkZXIucHJvdmlkZSk7XG4gICAgICAgIGxldCBwcm92aWRlckZhY3RvcnkgPSBwcm92aWRlclRvRmFjdG9yeShwcm92aWRlcik7XG4gICAgICAgIGNvbnN0IHROb2RlID0gZ2V0Q3VycmVudFROb2RlKCk7XG4gICAgICAgIGNvbnN0IGJlZ2luSW5kZXggPSB0Tm9kZS5wcm92aWRlckluZGV4ZXMgJiAxMDQ4NTc1IC8qIFByb3ZpZGVyc1N0YXJ0SW5kZXhNYXNrICovO1xuICAgICAgICBjb25zdCBlbmRJbmRleCA9IHROb2RlLmRpcmVjdGl2ZVN0YXJ0O1xuICAgICAgICBjb25zdCBjcHRWaWV3UHJvdmlkZXJzQ291bnQgPSB0Tm9kZS5wcm92aWRlckluZGV4ZXMgPj4gMjAgLyogQ3B0Vmlld1Byb3ZpZGVyc0NvdW50U2hpZnQgKi87XG4gICAgICAgIGlmIChpc1R5cGVQcm92aWRlcihwcm92aWRlcikgfHwgIXByb3ZpZGVyLm11bHRpKSB7XG4gICAgICAgICAgICAvLyBTaW5nbGUgcHJvdmlkZXIgY2FzZTogdGhlIGZhY3RvcnkgaXMgY3JlYXRlZCBhbmQgcHVzaGVkIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICBjb25zdCBmYWN0b3J5ID0gbmV3IE5vZGVJbmplY3RvckZhY3RvcnkocHJvdmlkZXJGYWN0b3J5LCBpc1ZpZXdQcm92aWRlciwgybXJtWRpcmVjdGl2ZUluamVjdCk7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0ZhY3RvcnlJbmRleCA9IGluZGV4T2YodG9rZW4sIHRJbmplY3RhYmxlcywgaXNWaWV3UHJvdmlkZXIgPyBiZWdpbkluZGV4IDogYmVnaW5JbmRleCArIGNwdFZpZXdQcm92aWRlcnNDb3VudCwgZW5kSW5kZXgpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRmFjdG9yeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGRpUHVibGljSW5JbmplY3RvcihnZXRPckNyZWF0ZU5vZGVJbmplY3RvckZvck5vZGUodE5vZGUsIGxWaWV3KSwgdFZpZXcsIHRva2VuKTtcbiAgICAgICAgICAgICAgICByZWdpc3RlckRlc3Ryb3lIb29rc0lmU3VwcG9ydGVkKHRWaWV3LCBwcm92aWRlciwgdEluamVjdGFibGVzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgdEluamVjdGFibGVzLnB1c2godG9rZW4pO1xuICAgICAgICAgICAgICAgIHROb2RlLmRpcmVjdGl2ZVN0YXJ0Kys7XG4gICAgICAgICAgICAgICAgdE5vZGUuZGlyZWN0aXZlRW5kKys7XG4gICAgICAgICAgICAgICAgaWYgKGlzVmlld1Byb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHROb2RlLnByb3ZpZGVySW5kZXhlcyArPSAxMDQ4NTc2IC8qIENwdFZpZXdQcm92aWRlcnNDb3VudFNoaWZ0ZXIgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxJbmplY3RhYmxlc0JsdWVwcmludC5wdXNoKGZhY3RvcnkpO1xuICAgICAgICAgICAgICAgIGxWaWV3LnB1c2goZmFjdG9yeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsSW5qZWN0YWJsZXNCbHVlcHJpbnRbZXhpc3RpbmdGYWN0b3J5SW5kZXhdID0gZmFjdG9yeTtcbiAgICAgICAgICAgICAgICBsVmlld1tleGlzdGluZ0ZhY3RvcnlJbmRleF0gPSBmYWN0b3J5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gTXVsdGkgcHJvdmlkZXIgY2FzZTpcbiAgICAgICAgICAgIC8vIFdlIGNyZWF0ZSBhIG11bHRpIGZhY3Rvcnkgd2hpY2ggaXMgZ29pbmcgdG8gYWdncmVnYXRlIGFsbCB0aGUgdmFsdWVzLlxuICAgICAgICAgICAgLy8gU2luY2UgdGhlIG91dHB1dCBvZiBzdWNoIGEgZmFjdG9yeSBkZXBlbmRzIG9uIGNvbnRlbnQgb3IgdmlldyBpbmplY3Rpb24sXG4gICAgICAgICAgICAvLyB3ZSBjcmVhdGUgdHdvIG9mIHRoZW0sIHdoaWNoIGFyZSBsaW5rZWQgdG9nZXRoZXIuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gVGhlIGZpcnN0IG9uZSAoZm9yIHZpZXcgcHJvdmlkZXJzKSBpcyBhbHdheXMgaW4gdGhlIGZpcnN0IGJsb2NrIG9mIHRoZSBpbmplY3RhYmxlcyBhcnJheSxcbiAgICAgICAgICAgIC8vIGFuZCB0aGUgc2Vjb25kIG9uZSAoZm9yIHByb3ZpZGVycykgaXMgYWx3YXlzIGluIHRoZSBzZWNvbmQgYmxvY2suXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGltcG9ydGFudCBiZWNhdXNlIHZpZXcgcHJvdmlkZXJzIGhhdmUgaGlnaGVyIHByaW9yaXR5LiBXaGVuIGEgbXVsdGkgdG9rZW5cbiAgICAgICAgICAgIC8vIGlzIGJlaW5nIGxvb2tlZCB1cCwgdGhlIHZpZXcgcHJvdmlkZXJzIHNob3VsZCBiZSBmb3VuZCBmaXJzdC5cbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBpdCBpcyBub3QgcG9zc2libGUgdG8gaGF2ZSBhIG11bHRpIGZhY3RvcnkgaW4gdGhlIHRoaXJkIGJsb2NrIChkaXJlY3RpdmUgYmxvY2spLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIFRoZSBhbGdvcml0aG0gdG8gcHJvY2VzcyBtdWx0aSBwcm92aWRlcnMgaXMgYXMgZm9sbG93czpcbiAgICAgICAgICAgIC8vIDEpIElmIHRoZSBtdWx0aSBwcm92aWRlciBjb21lcyBmcm9tIHRoZSBgdmlld1Byb3ZpZGVyc2Agb2YgdGhlIGNvbXBvbmVudDpcbiAgICAgICAgICAgIC8vICAgYSkgSWYgdGhlIHNwZWNpYWwgdmlldyBwcm92aWRlcnMgZmFjdG9yeSBkb2Vzbid0IGV4aXN0LCBpdCBpcyBjcmVhdGVkIGFuZCBwdXNoZWQuXG4gICAgICAgICAgICAvLyAgIGIpIEVsc2UsIHRoZSBtdWx0aSBwcm92aWRlciBpcyBhZGRlZCB0byB0aGUgZXhpc3RpbmcgbXVsdGkgZmFjdG9yeS5cbiAgICAgICAgICAgIC8vIDIpIElmIHRoZSBtdWx0aSBwcm92aWRlciBjb21lcyBmcm9tIHRoZSBgcHJvdmlkZXJzYCBvZiB0aGUgY29tcG9uZW50IG9yIG9mIGFub3RoZXJcbiAgICAgICAgICAgIC8vIGRpcmVjdGl2ZTpcbiAgICAgICAgICAgIC8vICAgYSkgSWYgdGhlIG11bHRpIGZhY3RvcnkgZG9lc24ndCBleGlzdCwgaXQgaXMgY3JlYXRlZCBhbmQgcHJvdmlkZXIgcHVzaGVkIGludG8gaXQuXG4gICAgICAgICAgICAvLyAgICAgIEl0IGlzIGFsc28gbGlua2VkIHRvIHRoZSBtdWx0aSBmYWN0b3J5IGZvciB2aWV3IHByb3ZpZGVycywgaWYgaXQgZXhpc3RzLlxuICAgICAgICAgICAgLy8gICBiKSBFbHNlLCB0aGUgbXVsdGkgcHJvdmlkZXIgaXMgYWRkZWQgdG8gdGhlIGV4aXN0aW5nIG11bHRpIGZhY3RvcnkuXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1Byb3ZpZGVyc0ZhY3RvcnlJbmRleCA9IGluZGV4T2YodG9rZW4sIHRJbmplY3RhYmxlcywgYmVnaW5JbmRleCArIGNwdFZpZXdQcm92aWRlcnNDb3VudCwgZW5kSW5kZXgpO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdWaWV3UHJvdmlkZXJzRmFjdG9yeUluZGV4ID0gaW5kZXhPZih0b2tlbiwgdEluamVjdGFibGVzLCBiZWdpbkluZGV4LCBiZWdpbkluZGV4ICsgY3B0Vmlld1Byb3ZpZGVyc0NvdW50KTtcbiAgICAgICAgICAgIGNvbnN0IGRvZXNQcm92aWRlcnNGYWN0b3J5RXhpc3QgPSBleGlzdGluZ1Byb3ZpZGVyc0ZhY3RvcnlJbmRleCA+PSAwICYmXG4gICAgICAgICAgICAgICAgbEluamVjdGFibGVzQmx1ZXByaW50W2V4aXN0aW5nUHJvdmlkZXJzRmFjdG9yeUluZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IGRvZXNWaWV3UHJvdmlkZXJzRmFjdG9yeUV4aXN0ID0gZXhpc3RpbmdWaWV3UHJvdmlkZXJzRmFjdG9yeUluZGV4ID49IDAgJiZcbiAgICAgICAgICAgICAgICBsSW5qZWN0YWJsZXNCbHVlcHJpbnRbZXhpc3RpbmdWaWV3UHJvdmlkZXJzRmFjdG9yeUluZGV4XTtcbiAgICAgICAgICAgIGlmIChpc1ZpZXdQcm92aWRlciAmJiAhZG9lc1ZpZXdQcm92aWRlcnNGYWN0b3J5RXhpc3QgfHxcbiAgICAgICAgICAgICAgICAhaXNWaWV3UHJvdmlkZXIgJiYgIWRvZXNQcm92aWRlcnNGYWN0b3J5RXhpc3QpIHtcbiAgICAgICAgICAgICAgICAvLyBDYXNlcyAxLmEgYW5kIDIuYVxuICAgICAgICAgICAgICAgIGRpUHVibGljSW5JbmplY3RvcihnZXRPckNyZWF0ZU5vZGVJbmplY3RvckZvck5vZGUodE5vZGUsIGxWaWV3KSwgdFZpZXcsIHRva2VuKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmYWN0b3J5ID0gbXVsdGlGYWN0b3J5KGlzVmlld1Byb3ZpZGVyID8gbXVsdGlWaWV3UHJvdmlkZXJzRmFjdG9yeVJlc29sdmVyIDogbXVsdGlQcm92aWRlcnNGYWN0b3J5UmVzb2x2ZXIsIGxJbmplY3RhYmxlc0JsdWVwcmludC5sZW5ndGgsIGlzVmlld1Byb3ZpZGVyLCBpc0NvbXBvbmVudCwgcHJvdmlkZXJGYWN0b3J5KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmlld1Byb3ZpZGVyICYmIGRvZXNWaWV3UHJvdmlkZXJzRmFjdG9yeUV4aXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxJbmplY3RhYmxlc0JsdWVwcmludFtleGlzdGluZ1ZpZXdQcm92aWRlcnNGYWN0b3J5SW5kZXhdLnByb3ZpZGVyRmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyRGVzdHJveUhvb2tzSWZTdXBwb3J0ZWQodFZpZXcsIHByb3ZpZGVyLCB0SW5qZWN0YWJsZXMubGVuZ3RoLCAwKTtcbiAgICAgICAgICAgICAgICB0SW5qZWN0YWJsZXMucHVzaCh0b2tlbik7XG4gICAgICAgICAgICAgICAgdE5vZGUuZGlyZWN0aXZlU3RhcnQrKztcbiAgICAgICAgICAgICAgICB0Tm9kZS5kaXJlY3RpdmVFbmQrKztcbiAgICAgICAgICAgICAgICBpZiAoaXNWaWV3UHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdE5vZGUucHJvdmlkZXJJbmRleGVzICs9IDEwNDg1NzYgLyogQ3B0Vmlld1Byb3ZpZGVyc0NvdW50U2hpZnRlciAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbEluamVjdGFibGVzQmx1ZXByaW50LnB1c2goZmFjdG9yeSk7XG4gICAgICAgICAgICAgICAgbFZpZXcucHVzaChmYWN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIENhc2VzIDEuYiBhbmQgMi5iXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXhJbkZhY3RvcnkgPSBtdWx0aUZhY3RvcnlBZGQobEluamVjdGFibGVzQmx1ZXByaW50W2lzVmlld1Byb3ZpZGVyID8gZXhpc3RpbmdWaWV3UHJvdmlkZXJzRmFjdG9yeUluZGV4IDpcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdQcm92aWRlcnNGYWN0b3J5SW5kZXhdLCBwcm92aWRlckZhY3RvcnksICFpc1ZpZXdQcm92aWRlciAmJiBpc0NvbXBvbmVudCk7XG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJEZXN0cm95SG9va3NJZlN1cHBvcnRlZCh0VmlldywgcHJvdmlkZXIsIGV4aXN0aW5nUHJvdmlkZXJzRmFjdG9yeUluZGV4ID4gLTEgPyBleGlzdGluZ1Byb3ZpZGVyc0ZhY3RvcnlJbmRleCA6XG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nVmlld1Byb3ZpZGVyc0ZhY3RvcnlJbmRleCwgaW5kZXhJbkZhY3RvcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1ZpZXdQcm92aWRlciAmJiBpc0NvbXBvbmVudCAmJiBkb2VzVmlld1Byb3ZpZGVyc0ZhY3RvcnlFeGlzdCkge1xuICAgICAgICAgICAgICAgIGxJbmplY3RhYmxlc0JsdWVwcmludFtleGlzdGluZ1ZpZXdQcm92aWRlcnNGYWN0b3J5SW5kZXhdLmNvbXBvbmVudFByb3ZpZGVycysrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZWdpc3RlcnMgdGhlIGBuZ09uRGVzdHJveWAgaG9vayBvZiBhIHByb3ZpZGVyLCBpZiB0aGUgcHJvdmlkZXIgc3VwcG9ydHMgZGVzdHJveSBob29rcy5cbiAqIEBwYXJhbSB0VmlldyBgVFZpZXdgIGluIHdoaWNoIHRvIHJlZ2lzdGVyIHRoZSBob29rLlxuICogQHBhcmFtIHByb3ZpZGVyIFByb3ZpZGVyIHdob3NlIGhvb2sgc2hvdWxkIGJlIHJlZ2lzdGVyZWQuXG4gKiBAcGFyYW0gY29udGV4dEluZGV4IEluZGV4IHVuZGVyIHdoaWNoIHRvIGZpbmQgdGhlIGNvbnRleHQgZm9yIHRoZSBob29rIHdoZW4gaXQncyBiZWluZyBpbnZva2VkLlxuICogQHBhcmFtIGluZGV4SW5GYWN0b3J5IE9ubHkgcmVxdWlyZWQgZm9yIGBtdWx0aWAgcHJvdmlkZXJzLiBJbmRleCBvZiB0aGUgcHJvdmlkZXIgaW4gdGhlIG11bHRpXG4gKiBwcm92aWRlciBmYWN0b3J5LlxuICovXG5mdW5jdGlvbiByZWdpc3RlckRlc3Ryb3lIb29rc0lmU3VwcG9ydGVkKHRWaWV3LCBwcm92aWRlciwgY29udGV4dEluZGV4LCBpbmRleEluRmFjdG9yeSkge1xuICAgIGNvbnN0IHByb3ZpZGVySXNUeXBlUHJvdmlkZXIgPSBpc1R5cGVQcm92aWRlcihwcm92aWRlcik7XG4gICAgY29uc3QgcHJvdmlkZXJJc0NsYXNzUHJvdmlkZXIgPSBpc0NsYXNzUHJvdmlkZXIocHJvdmlkZXIpO1xuICAgIGlmIChwcm92aWRlcklzVHlwZVByb3ZpZGVyIHx8IHByb3ZpZGVySXNDbGFzc1Byb3ZpZGVyKSB7XG4gICAgICAgIC8vIFJlc29sdmUgZm9yd2FyZCByZWZlcmVuY2VzIGFzIGB1c2VDbGFzc2AgY2FuIGhvbGQgYSBmb3J3YXJkIHJlZmVyZW5jZS5cbiAgICAgICAgY29uc3QgY2xhc3NUb2tlbiA9IHByb3ZpZGVySXNDbGFzc1Byb3ZpZGVyID8gcmVzb2x2ZUZvcndhcmRSZWYocHJvdmlkZXIudXNlQ2xhc3MpIDogcHJvdmlkZXI7XG4gICAgICAgIGNvbnN0IHByb3RvdHlwZSA9IGNsYXNzVG9rZW4ucHJvdG90eXBlO1xuICAgICAgICBjb25zdCBuZ09uRGVzdHJveSA9IHByb3RvdHlwZS5uZ09uRGVzdHJveTtcbiAgICAgICAgaWYgKG5nT25EZXN0cm95KSB7XG4gICAgICAgICAgICBjb25zdCBob29rcyA9IHRWaWV3LmRlc3Ryb3lIb29rcyB8fCAodFZpZXcuZGVzdHJveUhvb2tzID0gW10pO1xuICAgICAgICAgICAgaWYgKCFwcm92aWRlcklzVHlwZVByb3ZpZGVyICYmIHByb3ZpZGVyLm11bHRpKSB7XG4gICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydERlZmluZWQoaW5kZXhJbkZhY3RvcnksICdpbmRleEluRmFjdG9yeSB3aGVuIHJlZ2lzdGVyaW5nIG11bHRpIGZhY3RvcnkgZGVzdHJveSBob29rJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3NJbmRleCA9IGhvb2tzLmluZGV4T2YoY29udGV4dEluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdDYWxsYmFja3NJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaG9va3MucHVzaChjb250ZXh0SW5kZXgsIFtpbmRleEluRmFjdG9yeSwgbmdPbkRlc3Ryb3ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhvb2tzW2V4aXN0aW5nQ2FsbGJhY2tzSW5kZXggKyAxXS5wdXNoKGluZGV4SW5GYWN0b3J5LCBuZ09uRGVzdHJveSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG9va3MucHVzaChjb250ZXh0SW5kZXgsIG5nT25EZXN0cm95KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQWRkIGEgZmFjdG9yeSBpbiBhIG11bHRpIGZhY3RvcnkuXG4gKiBAcmV0dXJucyBJbmRleCBhdCB3aGljaCB0aGUgZmFjdG9yeSB3YXMgaW5zZXJ0ZWQuXG4gKi9cbmZ1bmN0aW9uIG11bHRpRmFjdG9yeUFkZChtdWx0aUZhY3RvcnksIGZhY3RvcnksIGlzQ29tcG9uZW50UHJvdmlkZXIpIHtcbiAgICBpZiAoaXNDb21wb25lbnRQcm92aWRlcikge1xuICAgICAgICBtdWx0aUZhY3RvcnkuY29tcG9uZW50UHJvdmlkZXJzKys7XG4gICAgfVxuICAgIHJldHVybiBtdWx0aUZhY3RvcnkubXVsdGkucHVzaChmYWN0b3J5KSAtIDE7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGluZGV4IG9mIGl0ZW0gaW4gdGhlIGFycmF5LCBidXQgb25seSBpbiB0aGUgYmVnaW4gdG8gZW5kIHJhbmdlLlxuICovXG5mdW5jdGlvbiBpbmRleE9mKGl0ZW0sIGFyciwgYmVnaW4sIGVuZCkge1xuICAgIGZvciAobGV0IGkgPSBiZWdpbjsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgIGlmIChhcnJbaV0gPT09IGl0ZW0pXG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuLyoqXG4gKiBVc2UgdGhpcyB3aXRoIGBtdWx0aWAgYHByb3ZpZGVyc2AuXG4gKi9cbmZ1bmN0aW9uIG11bHRpUHJvdmlkZXJzRmFjdG9yeVJlc29sdmVyKF8sIHREYXRhLCBsRGF0YSwgdE5vZGUpIHtcbiAgICByZXR1cm4gbXVsdGlSZXNvbHZlKHRoaXMubXVsdGksIFtdKTtcbn1cbi8qKlxuICogVXNlIHRoaXMgd2l0aCBgbXVsdGlgIGB2aWV3UHJvdmlkZXJzYC5cbiAqXG4gKiBUaGlzIGZhY3Rvcnkga25vd3MgaG93IHRvIGNvbmNhdGVuYXRlIGl0c2VsZiB3aXRoIHRoZSBleGlzdGluZyBgbXVsdGlgIGBwcm92aWRlcnNgLlxuICovXG5mdW5jdGlvbiBtdWx0aVZpZXdQcm92aWRlcnNGYWN0b3J5UmVzb2x2ZXIoXywgdERhdGEsIGxWaWV3LCB0Tm9kZSkge1xuICAgIGNvbnN0IGZhY3RvcmllcyA9IHRoaXMubXVsdGk7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAodGhpcy5wcm92aWRlckZhY3RvcnkpIHtcbiAgICAgICAgY29uc3QgY29tcG9uZW50Q291bnQgPSB0aGlzLnByb3ZpZGVyRmFjdG9yeS5jb21wb25lbnRQcm92aWRlcnM7XG4gICAgICAgIGNvbnN0IG11bHRpUHJvdmlkZXJzID0gZ2V0Tm9kZUluamVjdGFibGUobFZpZXcsIGxWaWV3W1RWSUVXXSwgdGhpcy5wcm92aWRlckZhY3RvcnkuaW5kZXgsIHROb2RlKTtcbiAgICAgICAgLy8gQ29weSB0aGUgc2VjdGlvbiBvZiB0aGUgYXJyYXkgd2hpY2ggY29udGFpbnMgYG11bHRpYCBgcHJvdmlkZXJzYCBmcm9tIHRoZSBjb21wb25lbnRcbiAgICAgICAgcmVzdWx0ID0gbXVsdGlQcm92aWRlcnMuc2xpY2UoMCwgY29tcG9uZW50Q291bnQpO1xuICAgICAgICAvLyBJbnNlcnQgdGhlIGB2aWV3UHJvdmlkZXJgIGluc3RhbmNlcy5cbiAgICAgICAgbXVsdGlSZXNvbHZlKGZhY3RvcmllcywgcmVzdWx0KTtcbiAgICAgICAgLy8gQ29weSB0aGUgc2VjdGlvbiBvZiB0aGUgYXJyYXkgd2hpY2ggY29udGFpbnMgYG11bHRpYCBgcHJvdmlkZXJzYCBmcm9tIG90aGVyIGRpcmVjdGl2ZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IGNvbXBvbmVudENvdW50OyBpIDwgbXVsdGlQcm92aWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG11bHRpUHJvdmlkZXJzW2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICAgIC8vIEluc2VydCB0aGUgYHZpZXdQcm92aWRlcmAgaW5zdGFuY2VzLlxuICAgICAgICBtdWx0aVJlc29sdmUoZmFjdG9yaWVzLCByZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBNYXBzIGFuIGFycmF5IG9mIGZhY3RvcmllcyBpbnRvIGFuIGFycmF5IG9mIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gbXVsdGlSZXNvbHZlKGZhY3RvcmllcywgcmVzdWx0KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmYWN0b3JpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IGZhY3Rvcmllc1tpXTtcbiAgICAgICAgcmVzdWx0LnB1c2goZmFjdG9yeSgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG11bHRpIGZhY3RvcnkuXG4gKi9cbmZ1bmN0aW9uIG11bHRpRmFjdG9yeShmYWN0b3J5Rm4sIGluZGV4LCBpc1ZpZXdQcm92aWRlciwgaXNDb21wb25lbnQsIGYpIHtcbiAgICBjb25zdCBmYWN0b3J5ID0gbmV3IE5vZGVJbmplY3RvckZhY3RvcnkoZmFjdG9yeUZuLCBpc1ZpZXdQcm92aWRlciwgybXJtWRpcmVjdGl2ZUluamVjdCk7XG4gICAgZmFjdG9yeS5tdWx0aSA9IFtdO1xuICAgIGZhY3RvcnkuaW5kZXggPSBpbmRleDtcbiAgICBmYWN0b3J5LmNvbXBvbmVudFByb3ZpZGVycyA9IDA7XG4gICAgbXVsdGlGYWN0b3J5QWRkKGZhY3RvcnksIGYsIGlzQ29tcG9uZW50ICYmICFpc1ZpZXdQcm92aWRlcik7XG4gICAgcmV0dXJuIGZhY3Rvcnk7XG59XG5cbi8qKlxuICogVGhpcyBmZWF0dXJlIHJlc29sdmVzIHRoZSBwcm92aWRlcnMgb2YgYSBkaXJlY3RpdmUgKG9yIGNvbXBvbmVudCksXG4gKiBhbmQgcHVibGlzaCB0aGVtIGludG8gdGhlIERJIHN5c3RlbSwgbWFraW5nIGl0IHZpc2libGUgdG8gb3RoZXJzIGZvciBpbmplY3Rpb24uXG4gKlxuICogRm9yIGV4YW1wbGU6XG4gKiBgYGB0c1xuICogY2xhc3MgQ29tcG9uZW50V2l0aFByb3ZpZGVycyB7XG4gKiAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZ3JlZXRlcjogR3JlZXRlckRFKSB7fVxuICpcbiAqICAgc3RhdGljIMm1Y21wID0gZGVmaW5lQ29tcG9uZW50KHtcbiAqICAgICB0eXBlOiBDb21wb25lbnRXaXRoUHJvdmlkZXJzLFxuICogICAgIHNlbGVjdG9yczogW1snY29tcG9uZW50LXdpdGgtcHJvdmlkZXJzJ11dLFxuICogICAgZmFjdG9yeTogKCkgPT4gbmV3IENvbXBvbmVudFdpdGhQcm92aWRlcnMoZGlyZWN0aXZlSW5qZWN0KEdyZWV0ZXJERSBhcyBhbnkpKSxcbiAqICAgIGRlY2xzOiAxLFxuICogICAgdmFyczogMSxcbiAqICAgIHRlbXBsYXRlOiBmdW5jdGlvbihmczogUmVuZGVyRmxhZ3MsIGN0eDogQ29tcG9uZW50V2l0aFByb3ZpZGVycykge1xuICogICAgICBpZiAoZnMgJiBSZW5kZXJGbGFncy5DcmVhdGUpIHtcbiAqICAgICAgICDJtcm1dGV4dCgwKTtcbiAqICAgICAgfVxuICogICAgICBpZiAoZnMgJiBSZW5kZXJGbGFncy5VcGRhdGUpIHtcbiAqICAgICAgICDJtcm1dGV4dEludGVycG9sYXRlKGN0eC5ncmVldGVyLmdyZWV0KCkpO1xuICogICAgICB9XG4gKiAgICB9LFxuICogICAgZmVhdHVyZXM6IFvJtcm1UHJvdmlkZXJzRmVhdHVyZShbR3JlZXRlckRFXSldXG4gKiAgfSk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gZGVmaW5pdGlvblxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVQcm92aWRlcnNGZWF0dXJlKHByb3ZpZGVycywgdmlld1Byb3ZpZGVycyA9IFtdKSB7XG4gICAgcmV0dXJuIChkZWZpbml0aW9uKSA9PiB7XG4gICAgICAgIGRlZmluaXRpb24ucHJvdmlkZXJzUmVzb2x2ZXIgPVxuICAgICAgICAgICAgKGRlZiwgcHJvY2Vzc1Byb3ZpZGVyc0ZuKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVyc1Jlc29sdmVyKGRlZiwgLy9cbiAgICAgICAgICAgICAgICBwcm9jZXNzUHJvdmlkZXJzRm4gPyBwcm9jZXNzUHJvdmlkZXJzRm4ocHJvdmlkZXJzKSA6IHByb3ZpZGVycywgLy9cbiAgICAgICAgICAgICAgICB2aWV3UHJvdmlkZXJzKTtcbiAgICAgICAgICAgIH07XG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBjb21wb25lbnQgY3JlYXRlZCBieSBhIGBDb21wb25lbnRGYWN0b3J5YC5cbiAqIFByb3ZpZGVzIGFjY2VzcyB0byB0aGUgY29tcG9uZW50IGluc3RhbmNlIGFuZCByZWxhdGVkIG9iamVjdHMsXG4gKiBhbmQgcHJvdmlkZXMgdGhlIG1lYW5zIG9mIGRlc3Ryb3lpbmcgdGhlIGluc3RhbmNlLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgQ29tcG9uZW50UmVmJDEge1xufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhIGZhY3RvcnkgdGhhdCBjYW4gY3JlYXRlIGEgY29tcG9uZW50IGR5bmFtaWNhbGx5LlxuICogSW5zdGFudGlhdGUgYSBmYWN0b3J5IGZvciBhIGdpdmVuIHR5cGUgb2YgY29tcG9uZW50IHdpdGggYHJlc29sdmVDb21wb25lbnRGYWN0b3J5KClgLlxuICogVXNlIHRoZSByZXN1bHRpbmcgYENvbXBvbmVudEZhY3RvcnkuY3JlYXRlKClgIG1ldGhvZCB0byBjcmVhdGUgYSBjb21wb25lbnQgb2YgdGhhdCB0eXBlLlxuICpcbiAqIEBzZWUgW0R5bmFtaWMgQ29tcG9uZW50c10oZ3VpZGUvZHluYW1pYy1jb21wb25lbnQtbG9hZGVyKVxuICpcbiAqIEBwdWJsaWNBcGlcbiAqXG4gKiBAZGVwcmVjYXRlZCBBbmd1bGFyIG5vIGxvbmdlciByZXF1aXJlcyBDb21wb25lbnQgZmFjdG9yaWVzLiBQbGVhc2UgdXNlIG90aGVyIEFQSXMgd2hlcmVcbiAqICAgICBDb21wb25lbnQgY2xhc3MgY2FuIGJlIHVzZWQgZGlyZWN0bHkuXG4gKi9cbmNsYXNzIENvbXBvbmVudEZhY3RvcnkkMSB7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuZnVuY3Rpb24gbm9Db21wb25lbnRGYWN0b3J5RXJyb3IoY29tcG9uZW50KSB7XG4gICAgY29uc3QgZXJyb3IgPSBFcnJvcihgTm8gY29tcG9uZW50IGZhY3RvcnkgZm91bmQgZm9yICR7c3RyaW5naWZ5KGNvbXBvbmVudCl9LiBEaWQgeW91IGFkZCBpdCB0byBATmdNb2R1bGUuZW50cnlDb21wb25lbnRzP2ApO1xuICAgIGVycm9yW0VSUk9SX0NPTVBPTkVOVF0gPSBjb21wb25lbnQ7XG4gICAgcmV0dXJuIGVycm9yO1xufVxuY29uc3QgRVJST1JfQ09NUE9ORU5UID0gJ25nQ29tcG9uZW50JztcbmZ1bmN0aW9uIGdldENvbXBvbmVudChlcnJvcikge1xuICAgIHJldHVybiBlcnJvcltFUlJPUl9DT01QT05FTlRdO1xufVxuY2xhc3MgX051bGxDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIge1xuICAgIHJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudCkge1xuICAgICAgICB0aHJvdyBub0NvbXBvbmVudEZhY3RvcnlFcnJvcihjb21wb25lbnQpO1xuICAgIH1cbn1cbi8qKlxuICogQSBzaW1wbGUgcmVnaXN0cnkgdGhhdCBtYXBzIGBDb21wb25lbnRzYCB0byBnZW5lcmF0ZWQgYENvbXBvbmVudEZhY3RvcnlgIGNsYXNzZXNcbiAqIHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBjb21wb25lbnRzLlxuICogVXNlIHRvIG9idGFpbiB0aGUgZmFjdG9yeSBmb3IgYSBnaXZlbiBjb21wb25lbnQgdHlwZSxcbiAqIHRoZW4gdXNlIHRoZSBmYWN0b3J5J3MgYGNyZWF0ZSgpYCBtZXRob2QgdG8gY3JlYXRlIGEgY29tcG9uZW50IG9mIHRoYXQgdHlwZS5cbiAqXG4gKiBOb3RlOiBzaW5jZSB2MTMsIGR5bmFtaWMgY29tcG9uZW50IGNyZWF0aW9uIHZpYVxuICogW2BWaWV3Q29udGFpbmVyUmVmLmNyZWF0ZUNvbXBvbmVudGBdKGFwaS9jb3JlL1ZpZXdDb250YWluZXJSZWYjY3JlYXRlQ29tcG9uZW50KVxuICogZG9lcyAqKm5vdCoqIHJlcXVpcmUgcmVzb2x2aW5nIGNvbXBvbmVudCBmYWN0b3J5OiBjb21wb25lbnQgY2xhc3MgY2FuIGJlIHVzZWQgZGlyZWN0bHkuXG4gKlxuICogQHB1YmxpY0FwaVxuICpcbiAqIEBkZXByZWNhdGVkIEFuZ3VsYXIgbm8gbG9uZ2VyIHJlcXVpcmVzIENvbXBvbmVudCBmYWN0b3JpZXMuIFBsZWFzZSB1c2Ugb3RoZXIgQVBJcyB3aGVyZVxuICogICAgIENvbXBvbmVudCBjbGFzcyBjYW4gYmUgdXNlZCBkaXJlY3RseS5cbiAqL1xuY2xhc3MgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyJDEge1xufVxuQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyJDEuTlVMTCA9ICggLyogQF9fUFVSRV9fICovbmV3IF9OdWxsQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyKCkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhbiBFbGVtZW50UmVmIGZyb20gdGhlIG1vc3QgcmVjZW50IG5vZGUuXG4gKlxuICogQHJldHVybnMgVGhlIEVsZW1lbnRSZWYgaW5zdGFuY2UgdG8gdXNlXG4gKi9cbmZ1bmN0aW9uIGluamVjdEVsZW1lbnRSZWYoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRSZWYoZ2V0Q3VycmVudFROb2RlKCksIGdldExWaWV3KCkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGFuIEVsZW1lbnRSZWYgZ2l2ZW4gYSBub2RlLlxuICpcbiAqIEBwYXJhbSB0Tm9kZSBUaGUgbm9kZSBmb3Igd2hpY2ggeW91J2QgbGlrZSBhbiBFbGVtZW50UmVmXG4gKiBAcGFyYW0gbFZpZXcgVGhlIHZpZXcgdG8gd2hpY2ggdGhlIG5vZGUgYmVsb25nc1xuICogQHJldHVybnMgVGhlIEVsZW1lbnRSZWYgaW5zdGFuY2UgdG8gdXNlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRSZWYodE5vZGUsIGxWaWV3KSB7XG4gICAgcmV0dXJuIG5ldyBFbGVtZW50UmVmKGdldE5hdGl2ZUJ5VE5vZGUodE5vZGUsIGxWaWV3KSk7XG59XG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgYSBuYXRpdmUgZWxlbWVudCBpbnNpZGUgb2YgYSBWaWV3LlxuICpcbiAqIEFuIGBFbGVtZW50UmVmYCBpcyBiYWNrZWQgYnkgYSByZW5kZXItc3BlY2lmaWMgZWxlbWVudC4gSW4gdGhlIGJyb3dzZXIsIHRoaXMgaXMgdXN1YWxseSBhIERPTVxuICogZWxlbWVudC5cbiAqXG4gKiBAc2VjdXJpdHkgUGVybWl0dGluZyBkaXJlY3QgYWNjZXNzIHRvIHRoZSBET00gY2FuIG1ha2UgeW91ciBhcHBsaWNhdGlvbiBtb3JlIHZ1bG5lcmFibGUgdG9cbiAqIFhTUyBhdHRhY2tzLiBDYXJlZnVsbHkgcmV2aWV3IGFueSB1c2Ugb2YgYEVsZW1lbnRSZWZgIGluIHlvdXIgY29kZS4gRm9yIG1vcmUgZGV0YWlsLCBzZWUgdGhlXG4gKiBbU2VjdXJpdHkgR3VpZGVdKGh0dHBzOi8vZy5jby9uZy9zZWN1cml0eSkuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG4vLyBOb3RlOiBXZSBkb24ndCBleHBvc2UgdGhpbmdzIGxpa2UgYEluamVjdG9yYCwgYFZpZXdDb250YWluZXJgLCAuLi4gaGVyZSxcbi8vIGkuZS4gdXNlcnMgaGF2ZSB0byBhc2sgZm9yIHdoYXQgdGhleSBuZWVkLiBXaXRoIHRoYXQsIHdlIGNhbiBidWlsZCBiZXR0ZXIgYW5hbHlzaXMgdG9vbHNcbi8vIGFuZCBjb3VsZCBkbyBiZXR0ZXIgY29kZWdlbiBpbiB0aGUgZnV0dXJlLlxuY2xhc3MgRWxlbWVudFJlZiB7XG4gICAgY29uc3RydWN0b3IobmF0aXZlRWxlbWVudCkge1xuICAgICAgICB0aGlzLm5hdGl2ZUVsZW1lbnQgPSBuYXRpdmVFbGVtZW50O1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBAbm9jb2xsYXBzZVxuICovXG5FbGVtZW50UmVmLl9fTkdfRUxFTUVOVF9JRF9fID0gaW5qZWN0RWxlbWVudFJlZjtcbi8qKlxuICogVW53cmFwcyBgRWxlbWVudFJlZmAgYW5kIHJldHVybiB0aGUgYG5hdGl2ZUVsZW1lbnRgLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSB2YWx1ZSB0byB1bndyYXBcbiAqIEByZXR1cm5zIGBuYXRpdmVFbGVtZW50YCBpZiBgRWxlbWVudFJlZmAgb3RoZXJ3aXNlIHJldHVybnMgdmFsdWUgYXMgaXMuXG4gKi9cbmZ1bmN0aW9uIHVud3JhcEVsZW1lbnRSZWYodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBFbGVtZW50UmVmID8gdmFsdWUubmF0aXZlRWxlbWVudCA6IHZhbHVlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IFJlbmRlcmVyMkludGVyY2VwdG9yID0gbmV3IEluamVjdGlvblRva2VuKCdSZW5kZXJlcjJJbnRlcmNlcHRvcicpO1xuLyoqXG4gKiBDcmVhdGVzIGFuZCBpbml0aWFsaXplcyBhIGN1c3RvbSByZW5kZXJlciB0aGF0IGltcGxlbWVudHMgdGhlIGBSZW5kZXJlcjJgIGJhc2UgY2xhc3MuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBSZW5kZXJlckZhY3RvcnkyIHtcbn1cbi8qKlxuICogRXh0ZW5kIHRoaXMgYmFzZSBjbGFzcyB0byBpbXBsZW1lbnQgY3VzdG9tIHJlbmRlcmluZy4gQnkgZGVmYXVsdCwgQW5ndWxhclxuICogcmVuZGVycyBhIHRlbXBsYXRlIGludG8gRE9NLiBZb3UgY2FuIHVzZSBjdXN0b20gcmVuZGVyaW5nIHRvIGludGVyY2VwdFxuICogcmVuZGVyaW5nIGNhbGxzLCBvciB0byByZW5kZXIgdG8gc29tZXRoaW5nIG90aGVyIHRoYW4gRE9NLlxuICpcbiAqIENyZWF0ZSB5b3VyIGN1c3RvbSByZW5kZXJlciB1c2luZyBgUmVuZGVyZXJGYWN0b3J5MmAuXG4gKlxuICogVXNlIGEgY3VzdG9tIHJlbmRlcmVyIHRvIGJ5cGFzcyBBbmd1bGFyJ3MgdGVtcGxhdGluZyBhbmRcbiAqIG1ha2UgY3VzdG9tIFVJIGNoYW5nZXMgdGhhdCBjYW4ndCBiZSBleHByZXNzZWQgZGVjbGFyYXRpdmVseS5cbiAqIEZvciBleGFtcGxlIGlmIHlvdSBuZWVkIHRvIHNldCBhIHByb3BlcnR5IG9yIGFuIGF0dHJpYnV0ZSB3aG9zZSBuYW1lIGlzXG4gKiBub3Qgc3RhdGljYWxseSBrbm93biwgdXNlIHRoZSBgc2V0UHJvcGVydHkoKWAgb3JcbiAqIGBzZXRBdHRyaWJ1dGUoKWAgbWV0aG9kLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgUmVuZGVyZXIyIHtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKiBAbm9jb2xsYXBzZVxuICovXG5SZW5kZXJlcjIuX19OR19FTEVNRU5UX0lEX18gPSAoKSA9PiBpbmplY3RSZW5kZXJlcjIoKTtcbi8qKiBSZXR1cm5zIGEgUmVuZGVyZXIyIChvciB0aHJvd3Mgd2hlbiBhcHBsaWNhdGlvbiB3YXMgYm9vdHN0cmFwcGVkIHdpdGggUmVuZGVyZXIzKSAqL1xuZnVuY3Rpb24gZ2V0T3JDcmVhdGVSZW5kZXJlcjIobFZpZXcpIHtcbiAgICBjb25zdCByZW5kZXJlciA9IGxWaWV3W1JFTkRFUkVSXTtcbiAgICBpZiAobmdEZXZNb2RlICYmICFpc1Byb2NlZHVyYWxSZW5kZXJlcihyZW5kZXJlcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaW5qZWN0IFJlbmRlcmVyMiB3aGVuIHRoZSBhcHBsaWNhdGlvbiB1c2VzIFJlbmRlcmVyMyEnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbmRlcmVyO1xufVxuLyoqIEluamVjdHMgYSBSZW5kZXJlcjIgZm9yIHRoZSBjdXJyZW50IGNvbXBvbmVudC4gKi9cbmZ1bmN0aW9uIGluamVjdFJlbmRlcmVyMigpIHtcbiAgICAvLyBXZSBuZWVkIHRoZSBSZW5kZXJlciB0byBiZSBiYXNlZCBvbiB0aGUgY29tcG9uZW50IHRoYXQgaXQncyBiZWluZyBpbmplY3RlZCBpbnRvLCBob3dldmVyIHNpbmNlXG4gICAgLy8gREkgaGFwcGVucyBiZWZvcmUgd2UndmUgZW50ZXJlZCBpdHMgdmlldywgYGdldExWaWV3YCB3aWxsIHJldHVybiB0aGUgcGFyZW50IHZpZXcgaW5zdGVhZC5cbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgdE5vZGUgPSBnZXRDdXJyZW50VE5vZGUoKTtcbiAgICBjb25zdCBub2RlQXRJbmRleCA9IGdldENvbXBvbmVudExWaWV3QnlJbmRleCh0Tm9kZS5pbmRleCwgbFZpZXcpO1xuICAgIHJldHVybiBnZXRPckNyZWF0ZVJlbmRlcmVyMihpc0xWaWV3KG5vZGVBdEluZGV4KSA/IG5vZGVBdEluZGV4IDogbFZpZXcpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogU2FuaXRpemVyIGlzIHVzZWQgYnkgdGhlIHZpZXdzIHRvIHNhbml0aXplIHBvdGVudGlhbGx5IGRhbmdlcm91cyB2YWx1ZXMuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBTYW5pdGl6ZXIge1xufVxuLyoqIEBub2NvbGxhcHNlICovXG5TYW5pdGl6ZXIuybVwcm92ID0gybXJtWRlZmluZUluamVjdGFibGUoe1xuICAgIHRva2VuOiBTYW5pdGl6ZXIsXG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxuICAgIGZhY3Rvcnk6ICgpID0+IG51bGwsXG59KTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBSZXByZXNlbnRzIHRoZSB2ZXJzaW9uIG9mIEFuZ3VsYXJcbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIFZlcnNpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZ1bGwpIHtcbiAgICAgICAgdGhpcy5mdWxsID0gZnVsbDtcbiAgICAgICAgdGhpcy5tYWpvciA9IGZ1bGwuc3BsaXQoJy4nKVswXTtcbiAgICAgICAgdGhpcy5taW5vciA9IGZ1bGwuc3BsaXQoJy4nKVsxXTtcbiAgICAgICAgdGhpcy5wYXRjaCA9IGZ1bGwuc3BsaXQoJy4nKS5zbGljZSgyKS5qb2luKCcuJyk7XG4gICAgfVxufVxuLyoqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNvbnN0IFZFUlNJT04gPSBuZXcgVmVyc2lvbignMTMuMi42Jyk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLy8gVGhpcyBkZWZhdWx0IHZhbHVlIGlzIHdoZW4gY2hlY2tpbmcgdGhlIGhpZXJhcmNoeSBmb3IgYSB0b2tlbi5cbi8vXG4vLyBJdCBtZWFucyBib3RoOlxuLy8gLSB0aGUgdG9rZW4gaXMgbm90IHByb3ZpZGVkIGJ5IHRoZSBjdXJyZW50IGluamVjdG9yLFxuLy8gLSBvbmx5IHRoZSBlbGVtZW50IGluamVjdG9ycyBzaG91bGQgYmUgY2hlY2tlZCAoaWUgZG8gbm90IGNoZWNrIG1vZHVsZSBpbmplY3RvcnNcbi8vXG4vLyAgICAgICAgICBtb2QxXG4vLyAgICAgICAgIC9cbi8vICAgICAgIGVsMSAgIG1vZDJcbi8vICAgICAgICAgXFwgIC9cbi8vICAgICAgICAgZWwyXG4vL1xuLy8gV2hlbiByZXF1ZXN0aW5nIGVsMi5pbmplY3Rvci5nZXQodG9rZW4pLCB3ZSBzaG91bGQgY2hlY2sgaW4gdGhlIGZvbGxvd2luZyBvcmRlciBhbmQgcmV0dXJuIHRoZVxuLy8gZmlyc3QgZm91bmQgdmFsdWU6XG4vLyAtIGVsMi5pbmplY3Rvci5nZXQodG9rZW4sIGRlZmF1bHQpXG4vLyAtIGVsMS5pbmplY3Rvci5nZXQodG9rZW4sIE5PVF9GT1VORF9DSEVDS19PTkxZX0VMRU1FTlRfSU5KRUNUT1IpIC0+IGRvIG5vdCBjaGVjayB0aGUgbW9kdWxlXG4vLyAtIG1vZDIuaW5qZWN0b3IuZ2V0KHRva2VuLCBkZWZhdWx0KVxuY29uc3QgTk9UX0ZPVU5EX0NIRUNLX09OTFlfRUxFTUVOVF9JTkpFQ1RPUiA9IHt9O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmZ1bmN0aW9uIGNvbGxlY3ROYXRpdmVOb2Rlcyh0VmlldywgbFZpZXcsIHROb2RlLCByZXN1bHQsIGlzUHJvamVjdGlvbiA9IGZhbHNlKSB7XG4gICAgd2hpbGUgKHROb2RlICE9PSBudWxsKSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgYXNzZXJ0VE5vZGVUeXBlKHROb2RlLCAzIC8qIEFueVJOb2RlICovIHwgMTIgLyogQW55Q29udGFpbmVyICovIHwgMTYgLyogUHJvamVjdGlvbiAqLyB8IDMyIC8qIEljdSAqLyk7XG4gICAgICAgIGNvbnN0IGxOb2RlID0gbFZpZXdbdE5vZGUuaW5kZXhdO1xuICAgICAgICBpZiAobE5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHVud3JhcFJOb2RlKGxOb2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQSBnaXZlbiBsTm9kZSBjYW4gcmVwcmVzZW50IGVpdGhlciBhIG5hdGl2ZSBub2RlIG9yIGEgTENvbnRhaW5lciAod2hlbiBpdCBpcyBhIGhvc3Qgb2YgYVxuICAgICAgICAvLyBWaWV3Q29udGFpbmVyUmVmKS4gV2hlbiB3ZSBmaW5kIGEgTENvbnRhaW5lciB3ZSBuZWVkIHRvIGRlc2NlbmQgaW50byBpdCB0byBjb2xsZWN0IHJvb3Qgbm9kZXNcbiAgICAgICAgLy8gZnJvbSB0aGUgdmlld3MgaW4gdGhpcyBjb250YWluZXIuXG4gICAgICAgIGlmIChpc0xDb250YWluZXIobE5vZGUpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gQ09OVEFJTkVSX0hFQURFUl9PRkZTRVQ7IGkgPCBsTm9kZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxWaWV3SW5BQ29udGFpbmVyID0gbE5vZGVbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgbFZpZXdGaXJzdENoaWxkVE5vZGUgPSBsVmlld0luQUNvbnRhaW5lcltUVklFV10uZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICBpZiAobFZpZXdGaXJzdENoaWxkVE5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdE5hdGl2ZU5vZGVzKGxWaWV3SW5BQ29udGFpbmVyW1RWSUVXXSwgbFZpZXdJbkFDb250YWluZXIsIGxWaWV3Rmlyc3RDaGlsZFROb2RlLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0Tm9kZVR5cGUgPSB0Tm9kZS50eXBlO1xuICAgICAgICBpZiAodE5vZGVUeXBlICYgOCAvKiBFbGVtZW50Q29udGFpbmVyICovKSB7XG4gICAgICAgICAgICBjb2xsZWN0TmF0aXZlTm9kZXModFZpZXcsIGxWaWV3LCB0Tm9kZS5jaGlsZCwgcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0Tm9kZVR5cGUgJiAzMiAvKiBJY3UgKi8pIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRSTm9kZSA9IGljdUNvbnRhaW5lckl0ZXJhdGUodE5vZGUsIGxWaWV3KTtcbiAgICAgICAgICAgIGxldCByTm9kZTtcbiAgICAgICAgICAgIHdoaWxlIChyTm9kZSA9IG5leHRSTm9kZSgpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gock5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHROb2RlVHlwZSAmIDE2IC8qIFByb2plY3Rpb24gKi8pIHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGVzSW5TbG90ID0gZ2V0UHJvamVjdGlvbk5vZGVzKGxWaWV3LCB0Tm9kZSk7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub2Rlc0luU2xvdCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCguLi5ub2Rlc0luU2xvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRWaWV3ID0gZ2V0TFZpZXdQYXJlbnQobFZpZXdbREVDTEFSQVRJT05fQ09NUE9ORU5UX1ZJRVddKTtcbiAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0UGFyZW50VmlldyhwYXJlbnRWaWV3KTtcbiAgICAgICAgICAgICAgICBjb2xsZWN0TmF0aXZlTm9kZXMocGFyZW50Vmlld1tUVklFV10sIHBhcmVudFZpZXcsIG5vZGVzSW5TbG90LCByZXN1bHQsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHROb2RlID0gaXNQcm9qZWN0aW9uID8gdE5vZGUucHJvamVjdGlvbk5leHQgOiB0Tm9kZS5uZXh0O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNsYXNzIFZpZXdSZWYkMSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhpcyByZXByZXNlbnRzIGBMVmlld2AgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb21wb25lbnQgd2hlbiBWaWV3UmVmIGlzIGEgQ2hhbmdlRGV0ZWN0b3JSZWYuXG4gICAgICpcbiAgICAgKiBXaGVuIFZpZXdSZWYgaXMgY3JlYXRlZCBmb3IgYSBkeW5hbWljIGNvbXBvbmVudCwgdGhpcyBhbHNvIHJlcHJlc2VudHMgdGhlIGBMVmlld2AgZm9yIHRoZVxuICAgICAqIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEZvciBhIFwicmVndWxhclwiIFZpZXdSZWYgY3JlYXRlZCBmb3IgYW4gZW1iZWRkZWQgdmlldywgdGhpcyBpcyB0aGUgYExWaWV3YCBmb3IgdGhlIGVtYmVkZGVkXG4gICAgICogdmlldy5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9sVmlldywgXG4gICAgLyoqXG4gICAgICogVGhpcyByZXByZXNlbnRzIHRoZSBgTFZpZXdgIGFzc29jaWF0ZWQgd2l0aCB0aGUgcG9pbnQgd2hlcmUgYENoYW5nZURldGVjdG9yUmVmYCB3YXNcbiAgICAgKiByZXF1ZXN0ZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBgX2xWaWV3YCBpZiB0aGUgYF9jZFJlZkluamVjdGluZ1ZpZXdgIGlzIGFuIGVtYmVkZGVkIHZpZXcuXG4gICAgICovXG4gICAgX2NkUmVmSW5qZWN0aW5nVmlldykge1xuICAgICAgICB0aGlzLl9sVmlldyA9IF9sVmlldztcbiAgICAgICAgdGhpcy5fY2RSZWZJbmplY3RpbmdWaWV3ID0gX2NkUmVmSW5qZWN0aW5nVmlldztcbiAgICAgICAgdGhpcy5fYXBwUmVmID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYXR0YWNoZWRUb1ZpZXdDb250YWluZXIgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IHJvb3ROb2RlcygpIHtcbiAgICAgICAgY29uc3QgbFZpZXcgPSB0aGlzLl9sVmlldztcbiAgICAgICAgY29uc3QgdFZpZXcgPSBsVmlld1tUVklFV107XG4gICAgICAgIHJldHVybiBjb2xsZWN0TmF0aXZlTm9kZXModFZpZXcsIGxWaWV3LCB0Vmlldy5maXJzdENoaWxkLCBbXSk7XG4gICAgfVxuICAgIGdldCBjb250ZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbFZpZXdbQ09OVEVYVF07XG4gICAgfVxuICAgIHNldCBjb250ZXh0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2xWaWV3W0NPTlRFWFRdID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBkZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5fbFZpZXdbRkxBR1NdICYgMjU2IC8qIERlc3Ryb3llZCAqLykgPT09IDI1NiAvKiBEZXN0cm95ZWQgKi87XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLl9hcHBSZWYpIHtcbiAgICAgICAgICAgIHRoaXMuX2FwcFJlZi5kZXRhY2hWaWV3KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2F0dGFjaGVkVG9WaWV3Q29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLl9sVmlld1tQQVJFTlRdO1xuICAgICAgICAgICAgaWYgKGlzTENvbnRhaW5lcihwYXJlbnQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld1JlZnMgPSBwYXJlbnRbVklFV19SRUZTXTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHZpZXdSZWZzID8gdmlld1JlZnMuaW5kZXhPZih0aGlzKSA6IC0xO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXJ0RXF1YWwoaW5kZXgsIHBhcmVudC5pbmRleE9mKHRoaXMuX2xWaWV3KSAtIENPTlRBSU5FUl9IRUFERVJfT0ZGU0VULCAnQW4gYXR0YWNoZWQgdmlldyBzaG91bGQgYmUgaW4gdGhlIHNhbWUgcG9zaXRpb24gd2l0aGluIGl0cyBjb250YWluZXIgYXMgaXRzIFZpZXdSZWYgaW4gdGhlIFZJRVdfUkVGUyBhcnJheS4nKTtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWNoVmlldyhwYXJlbnQsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlRnJvbUFycmF5KHZpZXdSZWZzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fYXR0YWNoZWRUb1ZpZXdDb250YWluZXIgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBkZXN0cm95TFZpZXcodGhpcy5fbFZpZXdbVFZJRVddLCB0aGlzLl9sVmlldyk7XG4gICAgfVxuICAgIG9uRGVzdHJveShjYWxsYmFjaykge1xuICAgICAgICBzdG9yZUNsZWFudXBXaXRoQ29udGV4dCh0aGlzLl9sVmlld1tUVklFV10sIHRoaXMuX2xWaWV3LCBudWxsLCBjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgdmlldyBhbmQgYWxsIG9mIGl0cyBhbmNlc3RvcnMgZGlydHkuXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VkIHRvIGVuc3VyZSBhbiB7QGxpbmsgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kjT25QdXNoIE9uUHVzaH0gY29tcG9uZW50IGlzXG4gICAgICogY2hlY2tlZCB3aGVuIGl0IG5lZWRzIHRvIGJlIHJlLXJlbmRlcmVkIGJ1dCB0aGUgdHdvIG5vcm1hbCB0cmlnZ2VycyBoYXZlbid0IG1hcmtlZCBpdFxuICAgICAqIGRpcnR5IChpLmUuIGlucHV0cyBoYXZlbid0IGNoYW5nZWQgYW5kIGV2ZW50cyBoYXZlbid0IGZpcmVkIGluIHRoZSB2aWV3KS5cbiAgICAgKlxuICAgICAqIDwhLS0gVE9ETzogQWRkIGEgbGluayB0byBhIGNoYXB0ZXIgb24gT25QdXNoIGNvbXBvbmVudHMgLS0+XG4gICAgICpcbiAgICAgKiBAdXNhZ2VOb3Rlc1xuICAgICAqICMjIyBFeGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogQENvbXBvbmVudCh7XG4gICAgICogICBzZWxlY3RvcjogJ2FwcC1yb290JyxcbiAgICAgKiAgIHRlbXBsYXRlOiBgTnVtYmVyIG9mIHRpY2tzOiB7e251bWJlck9mVGlja3N9fWBcbiAgICAgKiAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAqIH0pXG4gICAgICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAgICAgKiAgIG51bWJlck9mVGlja3MgPSAwO1xuICAgICAqXG4gICAgICogICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcbiAgICAgKiAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAqICAgICAgIHRoaXMubnVtYmVyT2ZUaWNrcysrO1xuICAgICAqICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgaXMgcmVxdWlyZWQsIG90aGVyd2lzZSB0aGUgdmlldyB3aWxsIG5vdCBiZSB1cGRhdGVkXG4gICAgICogICAgICAgdGhpcy5yZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICogICAgIH0sIDEwMDApO1xuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBtYXJrRm9yQ2hlY2soKSB7XG4gICAgICAgIG1hcmtWaWV3RGlydHkodGhpcy5fY2RSZWZJbmplY3RpbmdWaWV3IHx8IHRoaXMuX2xWaWV3KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0YWNoZXMgdGhlIHZpZXcgZnJvbSB0aGUgY2hhbmdlIGRldGVjdGlvbiB0cmVlLlxuICAgICAqXG4gICAgICogRGV0YWNoZWQgdmlld3Mgd2lsbCBub3QgYmUgY2hlY2tlZCBkdXJpbmcgY2hhbmdlIGRldGVjdGlvbiBydW5zIHVudGlsIHRoZXkgYXJlXG4gICAgICogcmUtYXR0YWNoZWQsIGV2ZW4gaWYgdGhleSBhcmUgZGlydHkuIGBkZXRhY2hgIGNhbiBiZSB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGhcbiAgICAgKiB7QGxpbmsgQ2hhbmdlRGV0ZWN0b3JSZWYjZGV0ZWN0Q2hhbmdlcyBkZXRlY3RDaGFuZ2VzfSB0byBpbXBsZW1lbnQgbG9jYWwgY2hhbmdlXG4gICAgICogZGV0ZWN0aW9uIGNoZWNrcy5cbiAgICAgKlxuICAgICAqIDwhLS0gVE9ETzogQWRkIGEgbGluayB0byBhIGNoYXB0ZXIgb24gZGV0YWNoL3JlYXR0YWNoL2xvY2FsIGRpZ2VzdCAtLT5cbiAgICAgKiA8IS0tIFRPRE86IEFkZCBhIGxpdmUgZGVtbyBvbmNlIHJlZi5kZXRlY3RDaGFuZ2VzIGlzIG1lcmdlZCBpbnRvIG1hc3RlciAtLT5cbiAgICAgKlxuICAgICAqIEB1c2FnZU5vdGVzXG4gICAgICogIyMjIEV4YW1wbGVcbiAgICAgKlxuICAgICAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBkZWZpbmVzIGEgY29tcG9uZW50IHdpdGggYSBsYXJnZSBsaXN0IG9mIHJlYWRvbmx5IGRhdGEuXG4gICAgICogSW1hZ2luZSB0aGUgZGF0YSBjaGFuZ2VzIGNvbnN0YW50bHksIG1hbnkgdGltZXMgcGVyIHNlY29uZC4gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsXG4gICAgICogd2Ugd2FudCB0byBjaGVjayBhbmQgdXBkYXRlIHRoZSBsaXN0IGV2ZXJ5IGZpdmUgc2Vjb25kcy4gV2UgY2FuIGRvIHRoYXQgYnkgZGV0YWNoaW5nXG4gICAgICogdGhlIGNvbXBvbmVudCdzIGNoYW5nZSBkZXRlY3RvciBhbmQgZG9pbmcgYSBsb2NhbCBjaGVjayBldmVyeSBmaXZlIHNlY29uZHMuXG4gICAgICpcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogY2xhc3MgRGF0YVByb3ZpZGVyIHtcbiAgICAgKiAgIC8vIGluIGEgcmVhbCBhcHBsaWNhdGlvbiB0aGUgcmV0dXJuZWQgZGF0YSB3aWxsIGJlIGRpZmZlcmVudCBldmVyeSB0aW1lXG4gICAgICogICBnZXQgZGF0YSgpIHtcbiAgICAgKiAgICAgcmV0dXJuIFsxLDIsMyw0LDVdO1xuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEBDb21wb25lbnQoe1xuICAgICAqICAgc2VsZWN0b3I6ICdnaWFudC1saXN0JyxcbiAgICAgKiAgIHRlbXBsYXRlOiBgXG4gICAgICogICAgIDxsaSAqbmdGb3I9XCJsZXQgZCBvZiBkYXRhUHJvdmlkZXIuZGF0YVwiPkRhdGEge3tkfX08L2xpPlxuICAgICAqICAgYCxcbiAgICAgKiB9KVxuICAgICAqIGNsYXNzIEdpYW50TGlzdCB7XG4gICAgICogICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsIHByaXZhdGUgZGF0YVByb3ZpZGVyOiBEYXRhUHJvdmlkZXIpIHtcbiAgICAgKiAgICAgcmVmLmRldGFjaCgpO1xuICAgICAqICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICogICAgICAgdGhpcy5yZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAqICAgICB9LCA1MDAwKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICpcbiAgICAgKiBAQ29tcG9uZW50KHtcbiAgICAgKiAgIHNlbGVjdG9yOiAnYXBwJyxcbiAgICAgKiAgIHByb3ZpZGVyczogW0RhdGFQcm92aWRlcl0sXG4gICAgICogICB0ZW1wbGF0ZTogYFxuICAgICAqICAgICA8Z2lhbnQtbGlzdD48Z2lhbnQtbGlzdD5cbiAgICAgKiAgIGAsXG4gICAgICogfSlcbiAgICAgKiBjbGFzcyBBcHAge1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBkZXRhY2goKSB7XG4gICAgICAgIHRoaXMuX2xWaWV3W0ZMQUdTXSAmPSB+MTI4IC8qIEF0dGFjaGVkICovO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZS1hdHRhY2hlcyBhIHZpZXcgdG8gdGhlIGNoYW5nZSBkZXRlY3Rpb24gdHJlZS5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gcmUtYXR0YWNoIHZpZXdzIHRoYXQgd2VyZSBwcmV2aW91c2x5IGRldGFjaGVkIGZyb20gdGhlIHRyZWVcbiAgICAgKiB1c2luZyB7QGxpbmsgQ2hhbmdlRGV0ZWN0b3JSZWYjZGV0YWNoIGRldGFjaH0uIFZpZXdzIGFyZSBhdHRhY2hlZCB0byB0aGUgdHJlZSBieSBkZWZhdWx0LlxuICAgICAqXG4gICAgICogPCEtLSBUT0RPOiBBZGQgYSBsaW5rIHRvIGEgY2hhcHRlciBvbiBkZXRhY2gvcmVhdHRhY2gvbG9jYWwgZGlnZXN0IC0tPlxuICAgICAqXG4gICAgICogQHVzYWdlTm90ZXNcbiAgICAgKiAjIyMgRXhhbXBsZVxuICAgICAqXG4gICAgICogVGhlIGZvbGxvd2luZyBleGFtcGxlIGNyZWF0ZXMgYSBjb21wb25lbnQgZGlzcGxheWluZyBgbGl2ZWAgZGF0YS4gVGhlIGNvbXBvbmVudCB3aWxsIGRldGFjaFxuICAgICAqIGl0cyBjaGFuZ2UgZGV0ZWN0b3IgZnJvbSB0aGUgbWFpbiBjaGFuZ2UgZGV0ZWN0b3IgdHJlZSB3aGVuIHRoZSBjb21wb25lbnQncyBsaXZlIHByb3BlcnR5XG4gICAgICogaXMgc2V0IHRvIGZhbHNlLlxuICAgICAqXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIGNsYXNzIERhdGFQcm92aWRlciB7XG4gICAgICogICBkYXRhID0gMTtcbiAgICAgKlxuICAgICAqICAgY29uc3RydWN0b3IoKSB7XG4gICAgICogICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgKiAgICAgICB0aGlzLmRhdGEgPSB0aGlzLmRhdGEgKiAyO1xuICAgICAqICAgICB9LCA1MDApO1xuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKlxuICAgICAqIEBDb21wb25lbnQoe1xuICAgICAqICAgc2VsZWN0b3I6ICdsaXZlLWRhdGEnLFxuICAgICAqICAgaW5wdXRzOiBbJ2xpdmUnXSxcbiAgICAgKiAgIHRlbXBsYXRlOiAnRGF0YToge3tkYXRhUHJvdmlkZXIuZGF0YX19J1xuICAgICAqIH0pXG4gICAgICogY2xhc3MgTGl2ZURhdGEge1xuICAgICAqICAgY29uc3RydWN0b3IocHJpdmF0ZSByZWY6IENoYW5nZURldGVjdG9yUmVmLCBwcml2YXRlIGRhdGFQcm92aWRlcjogRGF0YVByb3ZpZGVyKSB7fVxuICAgICAqXG4gICAgICogICBzZXQgbGl2ZSh2YWx1ZSkge1xuICAgICAqICAgICBpZiAodmFsdWUpIHtcbiAgICAgKiAgICAgICB0aGlzLnJlZi5yZWF0dGFjaCgpO1xuICAgICAqICAgICB9IGVsc2Uge1xuICAgICAqICAgICAgIHRoaXMucmVmLmRldGFjaCgpO1xuICAgICAqICAgICB9XG4gICAgICogICB9XG4gICAgICogfVxuICAgICAqXG4gICAgICogQENvbXBvbmVudCh7XG4gICAgICogICBzZWxlY3RvcjogJ2FwcC1yb290JyxcbiAgICAgKiAgIHByb3ZpZGVyczogW0RhdGFQcm92aWRlcl0sXG4gICAgICogICB0ZW1wbGF0ZTogYFxuICAgICAqICAgICBMaXZlIFVwZGF0ZTogPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIFsobmdNb2RlbCldPVwibGl2ZVwiPlxuICAgICAqICAgICA8bGl2ZS1kYXRhIFtsaXZlXT1cImxpdmVcIj48bGl2ZS1kYXRhPlxuICAgICAqICAgYCxcbiAgICAgKiB9KVxuICAgICAqIGNsYXNzIEFwcENvbXBvbmVudCB7XG4gICAgICogICBsaXZlID0gdHJ1ZTtcbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICovXG4gICAgcmVhdHRhY2goKSB7XG4gICAgICAgIHRoaXMuX2xWaWV3W0ZMQUdTXSB8PSAxMjggLyogQXR0YWNoZWQgKi87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGUgdmlldyBhbmQgaXRzIGNoaWxkcmVuLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYWxzbyBiZSB1c2VkIGluIGNvbWJpbmF0aW9uIHdpdGgge0BsaW5rIENoYW5nZURldGVjdG9yUmVmI2RldGFjaCBkZXRhY2h9IHRvIGltcGxlbWVudFxuICAgICAqIGxvY2FsIGNoYW5nZSBkZXRlY3Rpb24gY2hlY2tzLlxuICAgICAqXG4gICAgICogPCEtLSBUT0RPOiBBZGQgYSBsaW5rIHRvIGEgY2hhcHRlciBvbiBkZXRhY2gvcmVhdHRhY2gvbG9jYWwgZGlnZXN0IC0tPlxuICAgICAqIDwhLS0gVE9ETzogQWRkIGEgbGl2ZSBkZW1vIG9uY2UgcmVmLmRldGVjdENoYW5nZXMgaXMgbWVyZ2VkIGludG8gbWFzdGVyIC0tPlxuICAgICAqXG4gICAgICogQHVzYWdlTm90ZXNcbiAgICAgKiAjIyMgRXhhbXBsZVxuICAgICAqXG4gICAgICogVGhlIGZvbGxvd2luZyBleGFtcGxlIGRlZmluZXMgYSBjb21wb25lbnQgd2l0aCBhIGxhcmdlIGxpc3Qgb2YgcmVhZG9ubHkgZGF0YS5cbiAgICAgKiBJbWFnaW5lLCB0aGUgZGF0YSBjaGFuZ2VzIGNvbnN0YW50bHksIG1hbnkgdGltZXMgcGVyIHNlY29uZC4gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsXG4gICAgICogd2Ugd2FudCB0byBjaGVjayBhbmQgdXBkYXRlIHRoZSBsaXN0IGV2ZXJ5IGZpdmUgc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIFdlIGNhbiBkbyB0aGF0IGJ5IGRldGFjaGluZyB0aGUgY29tcG9uZW50J3MgY2hhbmdlIGRldGVjdG9yIGFuZCBkb2luZyBhIGxvY2FsIGNoYW5nZSBkZXRlY3Rpb25cbiAgICAgKiBjaGVjayBldmVyeSBmaXZlIHNlY29uZHMuXG4gICAgICpcbiAgICAgKiBTZWUge0BsaW5rIENoYW5nZURldGVjdG9yUmVmI2RldGFjaCBkZXRhY2h9IGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIGRldGVjdENoYW5nZXMoKSB7XG4gICAgICAgIGRldGVjdENoYW5nZXNJbnRlcm5hbCh0aGlzLl9sVmlld1tUVklFV10sIHRoaXMuX2xWaWV3LCB0aGlzLmNvbnRleHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdGhlIGNoYW5nZSBkZXRlY3RvciBhbmQgaXRzIGNoaWxkcmVuLCBhbmQgdGhyb3dzIGlmIGFueSBjaGFuZ2VzIGFyZSBkZXRlY3RlZC5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgdXNlZCBpbiBkZXZlbG9wbWVudCBtb2RlIHRvIHZlcmlmeSB0aGF0IHJ1bm5pbmcgY2hhbmdlIGRldGVjdGlvbiBkb2Vzbid0XG4gICAgICogaW50cm9kdWNlIG90aGVyIGNoYW5nZXMuXG4gICAgICovXG4gICAgY2hlY2tOb0NoYW5nZXMoKSB7XG4gICAgICAgIGNoZWNrTm9DaGFuZ2VzSW50ZXJuYWwodGhpcy5fbFZpZXdbVFZJRVddLCB0aGlzLl9sVmlldywgdGhpcy5jb250ZXh0KTtcbiAgICB9XG4gICAgYXR0YWNoVG9WaWV3Q29udGFpbmVyUmVmKCkge1xuICAgICAgICBpZiAodGhpcy5fYXBwUmVmKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBuZ0Rldk1vZGUgPyAnVGhpcyB2aWV3IGlzIGFscmVhZHkgYXR0YWNoZWQgZGlyZWN0bHkgdG8gdGhlIEFwcGxpY2F0aW9uUmVmIScgOiAnJztcbiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoOTAyIC8qIFZJRVdfQUxSRUFEWV9BVFRBQ0hFRCAqLywgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hdHRhY2hlZFRvVmlld0NvbnRhaW5lciA9IHRydWU7XG4gICAgfVxuICAgIGRldGFjaEZyb21BcHBSZWYoKSB7XG4gICAgICAgIHRoaXMuX2FwcFJlZiA9IG51bGw7XG4gICAgICAgIHJlbmRlckRldGFjaFZpZXcodGhpcy5fbFZpZXdbVFZJRVddLCB0aGlzLl9sVmlldyk7XG4gICAgfVxuICAgIGF0dGFjaFRvQXBwUmVmKGFwcFJlZikge1xuICAgICAgICBpZiAodGhpcy5fYXR0YWNoZWRUb1ZpZXdDb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IG5nRGV2TW9kZSA/ICdUaGlzIHZpZXcgaXMgYWxyZWFkeSBhdHRhY2hlZCB0byBhIFZpZXdDb250YWluZXIhJyA6ICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcig5MDIgLyogVklFV19BTFJFQURZX0FUVEFDSEVEICovLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2FwcFJlZiA9IGFwcFJlZjtcbiAgICB9XG59XG4vKiogQGludGVybmFsICovXG5jbGFzcyBSb290Vmlld1JlZiBleHRlbmRzIFZpZXdSZWYkMSB7XG4gICAgY29uc3RydWN0b3IoX3ZpZXcpIHtcbiAgICAgICAgc3VwZXIoX3ZpZXcpO1xuICAgICAgICB0aGlzLl92aWV3ID0gX3ZpZXc7XG4gICAgfVxuICAgIGRldGVjdENoYW5nZXMoKSB7XG4gICAgICAgIGRldGVjdENoYW5nZXNJblJvb3RWaWV3KHRoaXMuX3ZpZXcpO1xuICAgIH1cbiAgICBjaGVja05vQ2hhbmdlcygpIHtcbiAgICAgICAgY2hlY2tOb0NoYW5nZXNJblJvb3RWaWV3KHRoaXMuX3ZpZXcpO1xuICAgIH1cbiAgICBnZXQgY29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNsYXNzIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciBleHRlbmRzIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciQxIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbmdNb2R1bGUgVGhlIE5nTW9kdWxlUmVmIHRvIHdoaWNoIGFsbCByZXNvbHZlZCBmYWN0b3JpZXMgYXJlIGJvdW5kLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5nTW9kdWxlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubmdNb2R1bGUgPSBuZ01vZHVsZTtcbiAgICB9XG4gICAgcmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoY29tcG9uZW50KSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRDb21wb25lbnRUeXBlKGNvbXBvbmVudCk7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudERlZiA9IGdldENvbXBvbmVudERlZihjb21wb25lbnQpO1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvbmVudEZhY3RvcnkoY29tcG9uZW50RGVmLCB0aGlzLm5nTW9kdWxlKTtcbiAgICB9XG59XG5mdW5jdGlvbiB0b1JlZkFycmF5KG1hcCkge1xuICAgIGNvbnN0IGFycmF5ID0gW107XG4gICAgZm9yIChsZXQgbm9uTWluaWZpZWQgaW4gbWFwKSB7XG4gICAgICAgIGlmIChtYXAuaGFzT3duUHJvcGVydHkobm9uTWluaWZpZWQpKSB7XG4gICAgICAgICAgICBjb25zdCBtaW5pZmllZCA9IG1hcFtub25NaW5pZmllZF07XG4gICAgICAgICAgICBhcnJheS5wdXNoKHsgcHJvcE5hbWU6IG1pbmlmaWVkLCB0ZW1wbGF0ZU5hbWU6IG5vbk1pbmlmaWVkIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheTtcbn1cbmZ1bmN0aW9uIGdldE5hbWVzcGFjZShlbGVtZW50TmFtZSkge1xuICAgIGNvbnN0IG5hbWUgPSBlbGVtZW50TmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBuYW1lID09PSAnc3ZnJyA/IFNWR19OQU1FU1BBQ0UgOiAobmFtZSA9PT0gJ21hdGgnID8gTUFUSF9NTF9OQU1FU1BBQ0UgOiBudWxsKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUNoYWluZWRJbmplY3Rvcihyb290Vmlld0luamVjdG9yLCBtb2R1bGVJbmplY3Rvcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldDogKHRva2VuLCBub3RGb3VuZFZhbHVlLCBmbGFncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByb290Vmlld0luamVjdG9yLmdldCh0b2tlbiwgTk9UX0ZPVU5EX0NIRUNLX09OTFlfRUxFTUVOVF9JTkpFQ1RPUiwgZmxhZ3MpO1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBOT1RfRk9VTkRfQ0hFQ0tfT05MWV9FTEVNRU5UX0lOSkVDVE9SIHx8XG4gICAgICAgICAgICAgICAgbm90Rm91bmRWYWx1ZSA9PT0gTk9UX0ZPVU5EX0NIRUNLX09OTFlfRUxFTUVOVF9JTkpFQ1RPUikge1xuICAgICAgICAgICAgICAgIC8vIFJldHVybiB0aGUgdmFsdWUgZnJvbSB0aGUgcm9vdCBlbGVtZW50IGluamVjdG9yIHdoZW5cbiAgICAgICAgICAgICAgICAvLyAtIGl0IHByb3ZpZGVzIGl0XG4gICAgICAgICAgICAgICAgLy8gICAodmFsdWUgIT09IE5PVF9GT1VORF9DSEVDS19PTkxZX0VMRU1FTlRfSU5KRUNUT1IpXG4gICAgICAgICAgICAgICAgLy8gLSB0aGUgbW9kdWxlIGluamVjdG9yIHNob3VsZCBub3QgYmUgY2hlY2tlZFxuICAgICAgICAgICAgICAgIC8vICAgKG5vdEZvdW5kVmFsdWUgPT09IE5PVF9GT1VORF9DSEVDS19PTkxZX0VMRU1FTlRfSU5KRUNUT1IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1vZHVsZUluamVjdG9yLmdldCh0b2tlbiwgbm90Rm91bmRWYWx1ZSwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuICogUmVuZGVyMyBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgdmlld0VuZ2luZV9Db21wb25lbnRGYWN0b3J5fS5cbiAqL1xuY2xhc3MgQ29tcG9uZW50RmFjdG9yeSBleHRlbmRzIENvbXBvbmVudEZhY3RvcnkkMSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGNvbXBvbmVudERlZiBUaGUgY29tcG9uZW50IGRlZmluaXRpb24uXG4gICAgICogQHBhcmFtIG5nTW9kdWxlIFRoZSBOZ01vZHVsZVJlZiB0byB3aGljaCB0aGUgZmFjdG9yeSBpcyBib3VuZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb21wb25lbnREZWYsIG5nTW9kdWxlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuY29tcG9uZW50RGVmID0gY29tcG9uZW50RGVmO1xuICAgICAgICB0aGlzLm5nTW9kdWxlID0gbmdNb2R1bGU7XG4gICAgICAgIHRoaXMuY29tcG9uZW50VHlwZSA9IGNvbXBvbmVudERlZi50eXBlO1xuICAgICAgICB0aGlzLnNlbGVjdG9yID0gc3RyaW5naWZ5Q1NTU2VsZWN0b3JMaXN0KGNvbXBvbmVudERlZi5zZWxlY3RvcnMpO1xuICAgICAgICB0aGlzLm5nQ29udGVudFNlbGVjdG9ycyA9XG4gICAgICAgICAgICBjb21wb25lbnREZWYubmdDb250ZW50U2VsZWN0b3JzID8gY29tcG9uZW50RGVmLm5nQ29udGVudFNlbGVjdG9ycyA6IFtdO1xuICAgICAgICB0aGlzLmlzQm91bmRUb01vZHVsZSA9ICEhbmdNb2R1bGU7XG4gICAgfVxuICAgIGdldCBpbnB1dHMoKSB7XG4gICAgICAgIHJldHVybiB0b1JlZkFycmF5KHRoaXMuY29tcG9uZW50RGVmLmlucHV0cyk7XG4gICAgfVxuICAgIGdldCBvdXRwdXRzKCkge1xuICAgICAgICByZXR1cm4gdG9SZWZBcnJheSh0aGlzLmNvbXBvbmVudERlZi5vdXRwdXRzKTtcbiAgICB9XG4gICAgY3JlYXRlKGluamVjdG9yLCBwcm9qZWN0YWJsZU5vZGVzLCByb290U2VsZWN0b3JPck5vZGUsIG5nTW9kdWxlKSB7XG4gICAgICAgIG5nTW9kdWxlID0gbmdNb2R1bGUgfHwgdGhpcy5uZ01vZHVsZTtcbiAgICAgICAgY29uc3Qgcm9vdFZpZXdJbmplY3RvciA9IG5nTW9kdWxlID8gY3JlYXRlQ2hhaW5lZEluamVjdG9yKGluamVjdG9yLCBuZ01vZHVsZS5pbmplY3RvcikgOiBpbmplY3RvcjtcbiAgICAgICAgY29uc3QgcmVuZGVyZXJGYWN0b3J5ID0gcm9vdFZpZXdJbmplY3Rvci5nZXQoUmVuZGVyZXJGYWN0b3J5MiwgZG9tUmVuZGVyZXJGYWN0b3J5Myk7XG4gICAgICAgIGNvbnN0IHNhbml0aXplciA9IHJvb3RWaWV3SW5qZWN0b3IuZ2V0KFNhbml0aXplciwgbnVsbCk7XG4gICAgICAgIGNvbnN0IGhvc3RSZW5kZXJlciA9IHJlbmRlcmVyRmFjdG9yeS5jcmVhdGVSZW5kZXJlcihudWxsLCB0aGlzLmNvbXBvbmVudERlZik7XG4gICAgICAgIC8vIERldGVybWluZSBhIHRhZyBuYW1lIHVzZWQgZm9yIGNyZWF0aW5nIGhvc3QgZWxlbWVudHMgd2hlbiB0aGlzIGNvbXBvbmVudCBpcyBjcmVhdGVkXG4gICAgICAgIC8vIGR5bmFtaWNhbGx5LiBEZWZhdWx0IHRvICdkaXYnIGlmIHRoaXMgY29tcG9uZW50IGRpZCBub3Qgc3BlY2lmeSBhbnkgdGFnIG5hbWUgaW4gaXRzIHNlbGVjdG9yLlxuICAgICAgICBjb25zdCBlbGVtZW50TmFtZSA9IHRoaXMuY29tcG9uZW50RGVmLnNlbGVjdG9yc1swXVswXSB8fCAnZGl2JztcbiAgICAgICAgY29uc3QgaG9zdFJOb2RlID0gcm9vdFNlbGVjdG9yT3JOb2RlID9cbiAgICAgICAgICAgIGxvY2F0ZUhvc3RFbGVtZW50KGhvc3RSZW5kZXJlciwgcm9vdFNlbGVjdG9yT3JOb2RlLCB0aGlzLmNvbXBvbmVudERlZi5lbmNhcHN1bGF0aW9uKSA6XG4gICAgICAgICAgICBjcmVhdGVFbGVtZW50Tm9kZShyZW5kZXJlckZhY3RvcnkuY3JlYXRlUmVuZGVyZXIobnVsbCwgdGhpcy5jb21wb25lbnREZWYpLCBlbGVtZW50TmFtZSwgZ2V0TmFtZXNwYWNlKGVsZW1lbnROYW1lKSk7XG4gICAgICAgIGNvbnN0IHJvb3RGbGFncyA9IHRoaXMuY29tcG9uZW50RGVmLm9uUHVzaCA/IDY0IC8qIERpcnR5ICovIHwgNTEyIC8qIElzUm9vdCAqLyA6XG4gICAgICAgICAgICAxNiAvKiBDaGVja0Fsd2F5cyAqLyB8IDUxMiAvKiBJc1Jvb3QgKi87XG4gICAgICAgIGNvbnN0IHJvb3RDb250ZXh0ID0gY3JlYXRlUm9vdENvbnRleHQoKTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSByb290IHZpZXcuIFVzZXMgZW1wdHkgVFZpZXcgYW5kIENvbnRlbnRUZW1wbGF0ZS5cbiAgICAgICAgY29uc3Qgcm9vdFRWaWV3ID0gY3JlYXRlVFZpZXcoMCAvKiBSb290ICovLCBudWxsLCBudWxsLCAxLCAwLCBudWxsLCBudWxsLCBudWxsLCBudWxsLCBudWxsKTtcbiAgICAgICAgY29uc3Qgcm9vdExWaWV3ID0gY3JlYXRlTFZpZXcobnVsbCwgcm9vdFRWaWV3LCByb290Q29udGV4dCwgcm9vdEZsYWdzLCBudWxsLCBudWxsLCByZW5kZXJlckZhY3RvcnksIGhvc3RSZW5kZXJlciwgc2FuaXRpemVyLCByb290Vmlld0luamVjdG9yKTtcbiAgICAgICAgLy8gcm9vdFZpZXcgaXMgdGhlIHBhcmVudCB3aGVuIGJvb3RzdHJhcHBpbmdcbiAgICAgICAgLy8gVE9ETyhtaXNrbyk6IGl0IGxvb2tzIGxpa2Ugd2UgYXJlIGVudGVyaW5nIHZpZXcgaGVyZSBidXQgd2UgZG9uJ3QgcmVhbGx5IG5lZWQgdG8gYXNcbiAgICAgICAgLy8gYHJlbmRlclZpZXdgIGRvZXMgdGhhdC4gSG93ZXZlciBhcyB0aGUgY29kZSBpcyB3cml0dGVuIGl0IGlzIG5lZWRlZCBiZWNhdXNlXG4gICAgICAgIC8vIGBjcmVhdGVSb290Q29tcG9uZW50Vmlld2AgYW5kIGBjcmVhdGVSb290Q29tcG9uZW50YCBib3RoIHJlYWQgZ2xvYmFsIHN0YXRlLiBGaXhpbmcgdGhvc2VcbiAgICAgICAgLy8gaXNzdWVzIHdvdWxkIGFsbG93IHVzIHRvIGRyb3AgdGhpcy5cbiAgICAgICAgZW50ZXJWaWV3KHJvb3RMVmlldyk7XG4gICAgICAgIGxldCBjb21wb25lbnQ7XG4gICAgICAgIGxldCB0RWxlbWVudE5vZGU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnRWaWV3ID0gY3JlYXRlUm9vdENvbXBvbmVudFZpZXcoaG9zdFJOb2RlLCB0aGlzLmNvbXBvbmVudERlZiwgcm9vdExWaWV3LCByZW5kZXJlckZhY3RvcnksIGhvc3RSZW5kZXJlcik7XG4gICAgICAgICAgICBpZiAoaG9zdFJOb2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTZWxlY3Rvck9yTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBzZXRVcEF0dHJpYnV0ZXMoaG9zdFJlbmRlcmVyLCBob3N0Uk5vZGUsIFsnbmctdmVyc2lvbicsIFZFUlNJT04uZnVsbF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaG9zdCBlbGVtZW50IGlzIGNyZWF0ZWQgYXMgYSBwYXJ0IG9mIHRoaXMgZnVuY3Rpb24gY2FsbCAoaS5lLiBgcm9vdFNlbGVjdG9yT3JOb2RlYFxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBub3QgZGVmaW5lZCksIGFsc28gYXBwbHkgYXR0cmlidXRlcyBhbmQgY2xhc3NlcyBleHRyYWN0ZWQgZnJvbSBjb21wb25lbnQgc2VsZWN0b3IuXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhY3QgYXR0cmlidXRlcyBhbmQgY2xhc3NlcyBmcm9tIHRoZSBmaXJzdCBzZWxlY3RvciBvbmx5IHRvIG1hdGNoIFZFIGJlaGF2aW9yLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGF0dHJzLCBjbGFzc2VzIH0gPSBleHRyYWN0QXR0cnNBbmRDbGFzc2VzRnJvbVNlbGVjdG9yKHRoaXMuY29tcG9uZW50RGVmLnNlbGVjdG9yc1swXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VXBBdHRyaWJ1dGVzKGhvc3RSZW5kZXJlciwgaG9zdFJOb2RlLCBhdHRycyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNzZXMgJiYgY2xhc3Nlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZURpcmVjdENsYXNzKGhvc3RSZW5kZXJlciwgaG9zdFJOb2RlLCBjbGFzc2VzLmpvaW4oJyAnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0RWxlbWVudE5vZGUgPSBnZXRUTm9kZShyb290VFZpZXcsIEhFQURFUl9PRkZTRVQpO1xuICAgICAgICAgICAgaWYgKHByb2plY3RhYmxlTm9kZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3Rpb24gPSB0RWxlbWVudE5vZGUucHJvamVjdGlvbiA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uZ0NvbnRlbnRTZWxlY3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZXNmb3JTbG90ID0gcHJvamVjdGFibGVOb2Rlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvamVjdGFibGUgbm9kZXMgY2FuIGJlIHBhc3NlZCBhcyBhcnJheSBvZiBhcnJheXMgb3IgYW4gYXJyYXkgb2YgaXRlcmFibGVzIChuZ1VwZ3JhZGVcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSkuIEhlcmUgd2UgZG8gbm9ybWFsaXplIHBhc3NlZCBkYXRhIHN0cnVjdHVyZSB0byBiZSBhbiBhcnJheSBvZiBhcnJheXMgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAgICAgLy8gY29tcGxleCBjaGVja3MgZG93biB0aGUgbGluZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgYWxzbyBub3JtYWxpemUgdGhlIGxlbmd0aCBvZiB0aGUgcGFzc2VkIGluIHByb2plY3RhYmxlIG5vZGVzICh0byBtYXRjaCB0aGUgbnVtYmVyIG9mXG4gICAgICAgICAgICAgICAgICAgIC8vIDxuZy1jb250YWluZXI+IHNsb3RzIGRlZmluZWQgYnkgYSBjb21wb25lbnQpLlxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uLnB1c2gobm9kZXNmb3JTbG90ICE9IG51bGwgPyBBcnJheS5mcm9tKG5vZGVzZm9yU2xvdCkgOiBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiBzaG91bGQgTGlmZWN5Y2xlSG9va3NGZWF0dXJlIGFuZCBvdGhlciBob3N0IGZlYXR1cmVzIGJlIGdlbmVyYXRlZCBieSB0aGUgY29tcGlsZXIgYW5kXG4gICAgICAgICAgICAvLyBleGVjdXRlZCBoZXJlP1xuICAgICAgICAgICAgLy8gQW5ndWxhciA1IHJlZmVyZW5jZTogaHR0cHM6Ly9zdGFja2JsaXR6LmNvbS9lZGl0L2xpZmVjeWNsZS1ob29rcy12Y3JlZlxuICAgICAgICAgICAgY29tcG9uZW50ID0gY3JlYXRlUm9vdENvbXBvbmVudChjb21wb25lbnRWaWV3LCB0aGlzLmNvbXBvbmVudERlZiwgcm9vdExWaWV3LCByb290Q29udGV4dCwgW0xpZmVjeWNsZUhvb2tzRmVhdHVyZV0pO1xuICAgICAgICAgICAgcmVuZGVyVmlldyhyb290VFZpZXcsIHJvb3RMVmlldywgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBsZWF2ZVZpZXcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IENvbXBvbmVudFJlZih0aGlzLmNvbXBvbmVudFR5cGUsIGNvbXBvbmVudCwgY3JlYXRlRWxlbWVudFJlZih0RWxlbWVudE5vZGUsIHJvb3RMVmlldyksIHJvb3RMVmlldywgdEVsZW1lbnROb2RlKTtcbiAgICB9XG59XG5jb25zdCBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgPSBuZXcgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyKCk7XG4vKipcbiAqIENyZWF0ZXMgYSBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgYW5kIHN0b3JlcyBpdCBvbiB0aGUgaW5qZWN0b3IuIE9yLCBpZiB0aGVcbiAqIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlclxuICogYWxyZWFkeSBleGlzdHMsIHJldHJpZXZlcyB0aGUgZXhpc3RpbmcgQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgaW5zdGFuY2UgdG8gdXNlXG4gKi9cbmZ1bmN0aW9uIGluamVjdENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcigpIHtcbiAgICByZXR1cm4gY29tcG9uZW50RmFjdG9yeVJlc29sdmVyO1xufVxuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGluc3RhbmNlIG9mIGEgQ29tcG9uZW50IGNyZWF0ZWQgdmlhIGEge0BsaW5rIENvbXBvbmVudEZhY3Rvcnl9LlxuICpcbiAqIGBDb21wb25lbnRSZWZgIHByb3ZpZGVzIGFjY2VzcyB0byB0aGUgQ29tcG9uZW50IEluc3RhbmNlIGFzIHdlbGwgb3RoZXIgb2JqZWN0cyByZWxhdGVkIHRvIHRoaXNcbiAqIENvbXBvbmVudCBJbnN0YW5jZSBhbmQgYWxsb3dzIHlvdSB0byBkZXN0cm95IHRoZSBDb21wb25lbnQgSW5zdGFuY2UgdmlhIHRoZSB7QGxpbmsgI2Rlc3Ryb3l9XG4gKiBtZXRob2QuXG4gKlxuICovXG5jbGFzcyBDb21wb25lbnRSZWYgZXh0ZW5kcyBDb21wb25lbnRSZWYkMSB7XG4gICAgY29uc3RydWN0b3IoY29tcG9uZW50VHlwZSwgaW5zdGFuY2UsIGxvY2F0aW9uLCBfcm9vdExWaWV3LCBfdE5vZGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICB0aGlzLl9yb290TFZpZXcgPSBfcm9vdExWaWV3O1xuICAgICAgICB0aGlzLl90Tm9kZSA9IF90Tm9kZTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgICAgICB0aGlzLmhvc3RWaWV3ID0gdGhpcy5jaGFuZ2VEZXRlY3RvclJlZiA9IG5ldyBSb290Vmlld1JlZihfcm9vdExWaWV3KTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRUeXBlID0gY29tcG9uZW50VHlwZTtcbiAgICB9XG4gICAgZ2V0IGluamVjdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVJbmplY3Rvcih0aGlzLl90Tm9kZSwgdGhpcy5fcm9vdExWaWV3KTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5ob3N0Vmlldy5kZXN0cm95KCk7XG4gICAgfVxuICAgIG9uRGVzdHJveShjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmhvc3RWaWV3Lm9uRGVzdHJveShjYWxsYmFjayk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQWRkcyBkZWNvcmF0b3IsIGNvbnN0cnVjdG9yLCBhbmQgcHJvcGVydHkgbWV0YWRhdGEgdG8gYSBnaXZlbiB0eXBlIHZpYSBzdGF0aWMgbWV0YWRhdGEgZmllbGRzXG4gKiBvbiB0aGUgdHlwZS5cbiAqXG4gKiBUaGVzZSBtZXRhZGF0YSBmaWVsZHMgY2FuIGxhdGVyIGJlIHJlYWQgd2l0aCBBbmd1bGFyJ3MgYFJlZmxlY3Rpb25DYXBhYmlsaXRpZXNgIEFQSS5cbiAqXG4gKiBDYWxscyB0byBgc2V0Q2xhc3NNZXRhZGF0YWAgY2FuIGJlIGd1YXJkZWQgYnkgbmdEZXZNb2RlLCByZXN1bHRpbmcgaW4gdGhlIG1ldGFkYXRhIGFzc2lnbm1lbnRzXG4gKiBiZWluZyB0cmVlLXNoYWtlbiBhd2F5IGR1cmluZyBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqL1xuZnVuY3Rpb24gc2V0Q2xhc3NNZXRhZGF0YSh0eXBlLCBkZWNvcmF0b3JzLCBjdG9yUGFyYW1ldGVycywgcHJvcERlY29yYXRvcnMpIHtcbiAgICByZXR1cm4gbm9TaWRlRWZmZWN0cygoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsYXp6ID0gdHlwZTtcbiAgICAgICAgaWYgKGRlY29yYXRvcnMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjbGF6ei5oYXNPd25Qcm9wZXJ0eSgnZGVjb3JhdG9ycycpICYmIGNsYXp6LmRlY29yYXRvcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNsYXp6LmRlY29yYXRvcnMucHVzaCguLi5kZWNvcmF0b3JzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsYXp6LmRlY29yYXRvcnMgPSBkZWNvcmF0b3JzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdG9yUGFyYW1ldGVycyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gUmF0aGVyIHRoYW4gbWVyZ2luZywgY2xvYmJlciB0aGUgZXhpc3RpbmcgcGFyYW1ldGVycy4gSWYgb3RoZXIgcHJvamVjdHMgZXhpc3Qgd2hpY2hcbiAgICAgICAgICAgIC8vIHVzZSB0c2lja2xlLXN0eWxlIGFubm90YXRpb25zIGFuZCByZWZsZWN0IG92ZXIgdGhlbSBpbiB0aGUgc2FtZSB3YXksIHRoaXMgY291bGRcbiAgICAgICAgICAgIC8vIGNhdXNlIGlzc3VlcywgYnV0IHRoYXQgaXMgdmFuaXNoaW5nbHkgdW5saWtlbHkuXG4gICAgICAgICAgICBjbGF6ei5jdG9yUGFyYW1ldGVycyA9IGN0b3JQYXJhbWV0ZXJzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wRGVjb3JhdG9ycyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gVGhlIHByb3BlcnR5IGRlY29yYXRvciBvYmplY3RzIGFyZSBtZXJnZWQgYXMgaXQgaXMgcG9zc2libGUgZGlmZmVyZW50IGZpZWxkcyBoYXZlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnQgZGVjb3JhdG9yIHR5cGVzLiBEZWNvcmF0b3JzIG9uIGluZGl2aWR1YWwgZmllbGRzIGFyZSBub3QgbWVyZ2VkLCBhcyBpdCdzXG4gICAgICAgICAgICAvLyBhbHNvIGluY3JlZGlibHkgdW5saWtlbHkgdGhhdCBhIGZpZWxkIHdpbGwgYmUgZGVjb3JhdGVkIGJvdGggd2l0aCBhbiBBbmd1bGFyXG4gICAgICAgICAgICAvLyBkZWNvcmF0b3IgYW5kIGEgbm9uLUFuZ3VsYXIgZGVjb3JhdG9yIHRoYXQncyBhbHNvIGJlZW4gZG93bmxldmVsZWQuXG4gICAgICAgICAgICBpZiAoY2xhenouaGFzT3duUHJvcGVydHkoJ3Byb3BEZWNvcmF0b3JzJykgJiYgY2xhenoucHJvcERlY29yYXRvcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNsYXp6LnByb3BEZWNvcmF0b3JzID0geyAuLi5jbGF6ei5wcm9wRGVjb3JhdG9ycywgLi4ucHJvcERlY29yYXRvcnMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsYXp6LnByb3BEZWNvcmF0b3JzID0gcHJvcERlY29yYXRvcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gaW5zdGFuY2Ugb2YgYW4gYE5nTW9kdWxlYCBjcmVhdGVkIGJ5IGFuIGBOZ01vZHVsZUZhY3RvcnlgLlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIHRoZSBgTmdNb2R1bGVgIGluc3RhbmNlIGFuZCByZWxhdGVkIG9iamVjdHMuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBOZ01vZHVsZVJlZiQxIHtcbn1cbi8qKlxuICogQHB1YmxpY0FwaVxuICpcbiAqIEBkZXByZWNhdGVkXG4gKiBUaGlzIGNsYXNzIHdhcyBtb3N0bHkgdXNlZCBhcyBhIHBhcnQgb2YgVmlld0VuZ2luZS1iYXNlZCBKSVQgQVBJIGFuZCBpcyBubyBsb25nZXIgbmVlZGVkIGluIEl2eVxuICogSklUIG1vZGUuIFNlZSBbSklUIEFQSSBjaGFuZ2VzIGR1ZSB0byBWaWV3RW5naW5lIGRlcHJlY2F0aW9uXShndWlkZS9kZXByZWNhdGlvbnMjaml0LWFwaS1jaGFuZ2VzKVxuICogZm9yIGFkZGl0aW9uYWwgY29udGV4dC4gQW5ndWxhciBwcm92aWRlcyBBUElzIHRoYXQgYWNjZXB0IE5nTW9kdWxlIGNsYXNzZXMgZGlyZWN0bHkgKHN1Y2ggYXNcbiAqIFtQbGF0Zm9ybVJlZi5ib290c3RyYXBNb2R1bGVdKGFwaS9jb3JlL1BsYXRmb3JtUmVmI2Jvb3RzdHJhcE1vZHVsZSkgYW5kXG4gKiBbY3JlYXRlTmdNb2R1bGVSZWZdKGFwaS9jb3JlL2NyZWF0ZU5nTW9kdWxlUmVmKSksIGNvbnNpZGVyIHN3aXRjaGluZyB0byB0aG9zZSBBUElzIGluc3RlYWQgb2ZcbiAqIHVzaW5nIGZhY3RvcnktYmFzZWQgb25lcy5cbiAqL1xuY2xhc3MgTmdNb2R1bGVGYWN0b3J5JDEge1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogTWFwIG9mIG1vZHVsZS1pZCB0byB0aGUgY29ycmVzcG9uZGluZyBOZ01vZHVsZS5cbiAqIC0gSW4gcHJlIEl2eSB3ZSB0cmFjayBOZ01vZHVsZUZhY3RvcnksXG4gKiAtIEluIHBvc3QgSXZ5IHdlIHRyYWNrIHRoZSBOZ01vZHVsZVR5cGVcbiAqL1xuY29uc3QgbW9kdWxlcyA9IG5ldyBNYXAoKTtcbi8qKlxuICogUmVnaXN0ZXJzIGEgbG9hZGVkIG1vZHVsZS4gU2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gZ2VuZXJhdGVkIE5nTW9kdWxlRmFjdG9yeSBjb2RlLlxuICogQHB1YmxpY0FwaVxuICovXG5mdW5jdGlvbiByZWdpc3Rlck1vZHVsZUZhY3RvcnkoaWQsIGZhY3RvcnkpIHtcbiAgICBjb25zdCBleGlzdGluZyA9IG1vZHVsZXMuZ2V0KGlkKTtcbiAgICBhc3NlcnRTYW1lT3JOb3RFeGlzdGluZyhpZCwgZXhpc3RpbmcgJiYgZXhpc3RpbmcubW9kdWxlVHlwZSwgZmFjdG9yeS5tb2R1bGVUeXBlKTtcbiAgICBtb2R1bGVzLnNldChpZCwgZmFjdG9yeSk7XG59XG5mdW5jdGlvbiBhc3NlcnRTYW1lT3JOb3RFeGlzdGluZyhpZCwgdHlwZSwgaW5jb21pbmcpIHtcbiAgICBpZiAodHlwZSAmJiB0eXBlICE9PSBpbmNvbWluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYER1cGxpY2F0ZSBtb2R1bGUgcmVnaXN0ZXJlZCBmb3IgJHtpZH0gLSAke3N0cmluZ2lmeSh0eXBlKX0gdnMgJHtzdHJpbmdpZnkodHlwZS5uYW1lKX1gKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWdpc3Rlck5nTW9kdWxlVHlwZShuZ01vZHVsZVR5cGUpIHtcbiAgICBjb25zdCB2aXNpdGVkID0gbmV3IFNldCgpO1xuICAgIHJlY3Vyc2UobmdNb2R1bGVUeXBlKTtcbiAgICBmdW5jdGlvbiByZWN1cnNlKG5nTW9kdWxlVHlwZSkge1xuICAgICAgICAvLyBUaGUgaW1wb3J0cyBhcnJheSBvZiBhbiBOZ01vZHVsZSBtdXN0IHJlZmVyIHRvIG90aGVyIE5nTW9kdWxlcyxcbiAgICAgICAgLy8gc28gYW4gZXJyb3IgaXMgdGhyb3duIGlmIG5vIG1vZHVsZSBkZWZpbml0aW9uIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgY29uc3QgZGVmID0gZ2V0TmdNb2R1bGVEZWYobmdNb2R1bGVUeXBlLCAvKiB0aHJvd05vdEZvdW5kICovIHRydWUpO1xuICAgICAgICBjb25zdCBpZCA9IGRlZi5pZDtcbiAgICAgICAgaWYgKGlkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IG1vZHVsZXMuZ2V0KGlkKTtcbiAgICAgICAgICAgIGFzc2VydFNhbWVPck5vdEV4aXN0aW5nKGlkLCBleGlzdGluZywgbmdNb2R1bGVUeXBlKTtcbiAgICAgICAgICAgIG1vZHVsZXMuc2V0KGlkLCBuZ01vZHVsZVR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGltcG9ydHMgPSBtYXliZVVud3JhcEZuKGRlZi5pbXBvcnRzKTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIGltcG9ydHMpIHtcbiAgICAgICAgICAgIGlmICghdmlzaXRlZC5oYXMoaSkpIHtcbiAgICAgICAgICAgICAgICB2aXNpdGVkLmFkZChpKTtcbiAgICAgICAgICAgICAgICByZWN1cnNlKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY2xlYXJNb2R1bGVzRm9yVGVzdCgpIHtcbiAgICBtb2R1bGVzLmNsZWFyKCk7XG59XG5mdW5jdGlvbiBnZXRSZWdpc3RlcmVkTmdNb2R1bGVUeXBlKGlkKSB7XG4gICAgcmV0dXJuIChtb2R1bGVzLmdldChpZCkgfHwgYXV0b1JlZ2lzdGVyTW9kdWxlQnlJZFtpZF0pO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIG5ldyBOZ01vZHVsZVJlZiBpbnN0YW5jZSBiYXNlZCBvbiB0aGUgTmdNb2R1bGUgY2xhc3MgYW5kIHBhcmVudCBpbmplY3RvciBwcm92aWRlZC5cbiAqIEBwYXJhbSBuZ01vZHVsZSBOZ01vZHVsZSBjbGFzcy5cbiAqIEBwYXJhbSBwYXJlbnRJbmplY3RvciBPcHRpb25hbCBpbmplY3RvciBpbnN0YW5jZSB0byB1c2UgYXMgYSBwYXJlbnQgZm9yIHRoZSBtb2R1bGUgaW5qZWN0b3IuIElmXG4gKiAgICAgbm90IHByb3ZpZGVkLCBgTnVsbEluamVjdG9yYCB3aWxsIGJlIHVzZWQgaW5zdGVhZC5cbiAqIEBwdWJsaWNBcGlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTmdNb2R1bGVSZWYobmdNb2R1bGUsIHBhcmVudEluamVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBOZ01vZHVsZVJlZihuZ01vZHVsZSwgcGFyZW50SW5qZWN0b3IgPz8gbnVsbCk7XG59XG5jbGFzcyBOZ01vZHVsZVJlZiBleHRlbmRzIE5nTW9kdWxlUmVmJDEge1xuICAgIGNvbnN0cnVjdG9yKG5nTW9kdWxlVHlwZSwgX3BhcmVudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50O1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cmVxdWlyZS1pbnRlcm5hbC13aXRoLXVuZGVyc2NvcmVcbiAgICAgICAgdGhpcy5fYm9vdHN0cmFwQ29tcG9uZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmluamVjdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5kZXN0cm95Q2JzID0gW107XG4gICAgICAgIC8vIFdoZW4gYm9vdHN0cmFwcGluZyBhIG1vZHVsZSB3ZSBoYXZlIGEgZGVwZW5kZW5jeSBncmFwaCB0aGF0IGxvb2tzIGxpa2UgdGhpczpcbiAgICAgICAgLy8gQXBwbGljYXRpb25SZWYgLT4gQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyIC0+IE5nTW9kdWxlUmVmLiBUaGUgcHJvYmxlbSBpcyB0aGF0IGlmIHRoZVxuICAgICAgICAvLyBtb2R1bGUgYmVpbmcgcmVzb2x2ZWQgdHJpZXMgdG8gaW5qZWN0IHRoZSBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIGl0J2xsIGNyZWF0ZSBhXG4gICAgICAgIC8vIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2hpY2ggd2lsbCByZXN1bHQgaW4gYSBydW50aW1lIGVycm9yLCBiZWNhdXNlIHRoZSBpbmplY3RvciBkb2Vzbid0XG4gICAgICAgIC8vIGV4aXN0IHlldC4gV2Ugd29yayBhcm91bmQgdGhlIGlzc3VlIGJ5IGNyZWF0aW5nIHRoZSBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgb3Vyc2VsdmVzXG4gICAgICAgIC8vIGFuZCBwcm92aWRpbmcgaXQsIHJhdGhlciB0aGFuIGxldHRpbmcgdGhlIGluamVjdG9yIHJlc29sdmUgaXQuXG4gICAgICAgIHRoaXMuY29tcG9uZW50RmFjdG9yeVJlc29sdmVyID0gbmV3IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcih0aGlzKTtcbiAgICAgICAgY29uc3QgbmdNb2R1bGVEZWYgPSBnZXROZ01vZHVsZURlZihuZ01vZHVsZVR5cGUpO1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIGFzc2VydERlZmluZWQobmdNb2R1bGVEZWYsIGBOZ01vZHVsZSAnJHtzdHJpbmdpZnkobmdNb2R1bGVUeXBlKX0nIGlzIG5vdCBhIHN1YnR5cGUgb2YgJ05nTW9kdWxlVHlwZScuYCk7XG4gICAgICAgIHRoaXMuX2Jvb3RzdHJhcENvbXBvbmVudHMgPSBtYXliZVVud3JhcEZuKG5nTW9kdWxlRGVmLmJvb3RzdHJhcCk7XG4gICAgICAgIHRoaXMuX3IzSW5qZWN0b3IgPSBjcmVhdGVJbmplY3RvcldpdGhvdXRJbmplY3Rvckluc3RhbmNlcyhuZ01vZHVsZVR5cGUsIF9wYXJlbnQsIFtcbiAgICAgICAgICAgIHsgcHJvdmlkZTogTmdNb2R1bGVSZWYkMSwgdXNlVmFsdWU6IHRoaXMgfSwge1xuICAgICAgICAgICAgICAgIHByb3ZpZGU6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciQxLFxuICAgICAgICAgICAgICAgIHVzZVZhbHVlOiB0aGlzLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlclxuICAgICAgICAgICAgfVxuICAgICAgICBdLCBzdHJpbmdpZnkobmdNb2R1bGVUeXBlKSk7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gcmVzb2x2ZSB0aGUgaW5qZWN0b3IgdHlwZXMgc2VwYXJhdGVseSBmcm9tIHRoZSBpbmplY3RvciBjcmVhdGlvbiwgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgbW9kdWxlIG1pZ2h0IGJlIHRyeWluZyB0byB1c2UgdGhpcyByZWYgaW4gaXRzIGNvbnN0cnVjdG9yIGZvciBESSB3aGljaCB3aWxsIGNhdXNlIGFcbiAgICAgICAgLy8gY2lyY3VsYXIgZXJyb3IgdGhhdCB3aWxsIGV2ZW50dWFsbHkgZXJyb3Igb3V0LCBiZWNhdXNlIHRoZSBpbmplY3RvciBpc24ndCBjcmVhdGVkIHlldC5cbiAgICAgICAgdGhpcy5fcjNJbmplY3Rvci5fcmVzb2x2ZUluamVjdG9yRGVmVHlwZXMoKTtcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IHRoaXMuZ2V0KG5nTW9kdWxlVHlwZSk7XG4gICAgfVxuICAgIGdldCh0b2tlbiwgbm90Rm91bmRWYWx1ZSA9IEluamVjdG9yLlRIUk9XX0lGX05PVF9GT1VORCwgaW5qZWN0RmxhZ3MgPSBJbmplY3RGbGFncy5EZWZhdWx0KSB7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gSW5qZWN0b3IgfHwgdG9rZW4gPT09IE5nTW9kdWxlUmVmJDEgfHwgdG9rZW4gPT09IElOSkVDVE9SKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcjNJbmplY3Rvci5nZXQodG9rZW4sIG5vdEZvdW5kVmFsdWUsIGluamVjdEZsYWdzKTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydERlZmluZWQodGhpcy5kZXN0cm95Q2JzLCAnTmdNb2R1bGUgYWxyZWFkeSBkZXN0cm95ZWQnKTtcbiAgICAgICAgY29uc3QgaW5qZWN0b3IgPSB0aGlzLl9yM0luamVjdG9yO1xuICAgICAgICAhaW5qZWN0b3IuZGVzdHJveWVkICYmIGluamVjdG9yLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5kZXN0cm95Q2JzLmZvckVhY2goZm4gPT4gZm4oKSk7XG4gICAgICAgIHRoaXMuZGVzdHJveUNicyA9IG51bGw7XG4gICAgfVxuICAgIG9uRGVzdHJveShjYWxsYmFjaykge1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0aGlzLmRlc3Ryb3lDYnMsICdOZ01vZHVsZSBhbHJlYWR5IGRlc3Ryb3llZCcpO1xuICAgICAgICB0aGlzLmRlc3Ryb3lDYnMucHVzaChjYWxsYmFjayk7XG4gICAgfVxufVxuY2xhc3MgTmdNb2R1bGVGYWN0b3J5IGV4dGVuZHMgTmdNb2R1bGVGYWN0b3J5JDEge1xuICAgIGNvbnN0cnVjdG9yKG1vZHVsZVR5cGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5tb2R1bGVUeXBlID0gbW9kdWxlVHlwZTtcbiAgICAgICAgY29uc3QgbmdNb2R1bGVEZWYgPSBnZXROZ01vZHVsZURlZihtb2R1bGVUeXBlKTtcbiAgICAgICAgaWYgKG5nTW9kdWxlRGVmICE9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBSZWdpc3RlciB0aGUgTmdNb2R1bGUgd2l0aCBBbmd1bGFyJ3MgbW9kdWxlIHJlZ2lzdHJ5LiBUaGUgbG9jYXRpb24gKGFuZCBoZW5jZSB0aW1pbmcpIG9mXG4gICAgICAgICAgICAvLyB0aGlzIGNhbGwgaXMgY3JpdGljYWwgdG8gZW5zdXJlIHRoaXMgd29ya3MgY29ycmVjdGx5IChtb2R1bGVzIGdldCByZWdpc3RlcmVkIHdoZW4gZXhwZWN0ZWQpXG4gICAgICAgICAgICAvLyB3aXRob3V0IGJsb2F0aW5nIGJ1bmRsZXMgKG1vZHVsZXMgYXJlIHJlZ2lzdGVyZWQgd2hlbiBvdGhlcndpc2Ugbm90IHJlZmVyZW5jZWQpLlxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIEluIFZpZXcgRW5naW5lLCByZWdpc3RyYXRpb24gb2NjdXJzIGluIHRoZSAubmdmYWN0b3J5LmpzIGZpbGUgYXMgYSBzaWRlIGVmZmVjdC4gVGhpcyBoYXNcbiAgICAgICAgICAgIC8vIHNldmVyYWwgcHJhY3RpY2FsIGNvbnNlcXVlbmNlczpcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyAtIElmIGFuIC5uZ2ZhY3RvcnkgZmlsZSBpcyBub3QgaW1wb3J0ZWQgZnJvbSwgdGhlIG1vZHVsZSB3b24ndCBiZSByZWdpc3RlcmVkIChhbmQgY2FuIGJlXG4gICAgICAgICAgICAvLyAgIHRyZWUgc2hha2VuKS5cbiAgICAgICAgICAgIC8vIC0gSWYgYW4gLm5nZmFjdG9yeSBmaWxlIGlzIGltcG9ydGVkIGZyb20sIHRoZSBtb2R1bGUgd2lsbCBiZSByZWdpc3RlcmVkIGV2ZW4gaWYgYW4gaW5zdGFuY2VcbiAgICAgICAgICAgIC8vICAgaXMgbm90IGFjdHVhbGx5IGNyZWF0ZWQgKHZpYSBgY3JlYXRlYCBiZWxvdykuXG4gICAgICAgICAgICAvLyAtIFNpbmNlIGFuIC5uZ2ZhY3RvcnkgZmlsZSBpbiBWaWV3IEVuZ2luZSByZWZlcmVuY2VzIHRoZSAubmdmYWN0b3J5IGZpbGVzIG9mIHRoZSBOZ01vZHVsZSdzXG4gICAgICAgICAgICAvLyAgIGltcG9ydHMsXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gSW4gSXZ5LCB0aGluZ3MgYXJlIGEgYml0IGRpZmZlcmVudC4gLm5nZmFjdG9yeSBmaWxlcyBzdGlsbCBleGlzdCBmb3IgY29tcGF0aWJpbGl0eSwgYnV0IGFyZVxuICAgICAgICAgICAgLy8gbm90IGEgcmVxdWlyZWQgQVBJIHRvIHVzZSAtIHRoZXJlIGFyZSBvdGhlciB3YXlzIHRvIG9idGFpbiBhbiBOZ01vZHVsZUZhY3RvcnkgZm9yIGEgZ2l2ZW5cbiAgICAgICAgICAgIC8vIE5nTW9kdWxlLiBUaHVzLCByZWx5aW5nIG9uIGEgc2lkZSBlZmZlY3QgaW4gdGhlIC5uZ2ZhY3RvcnkgZmlsZSBpcyBub3Qgc3VmZmljaWVudC4gSW5zdGVhZCxcbiAgICAgICAgICAgIC8vIHRoZSBzaWRlIGVmZmVjdCBvZiByZWdpc3RyYXRpb24gaXMgYWRkZWQgaGVyZSwgaW4gdGhlIGNvbnN0cnVjdG9yIG9mIE5nTW9kdWxlRmFjdG9yeSxcbiAgICAgICAgICAgIC8vIGVuc3VyaW5nIG5vIG1hdHRlciBob3cgYSBmYWN0b3J5IGlzIGNyZWF0ZWQsIHRoZSBtb2R1bGUgaXMgcmVnaXN0ZXJlZCBjb3JyZWN0bHkuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gQW4gYWx0ZXJuYXRpdmUgd291bGQgYmUgdG8gaW5jbHVkZSB0aGUgcmVnaXN0cmF0aW9uIHNpZGUgZWZmZWN0IGlubGluZSBmb2xsb3dpbmcgdGhlIGFjdHVhbFxuICAgICAgICAgICAgLy8gTmdNb2R1bGUgZGVmaW5pdGlvbi4gVGhpcyBhbHNvIGhhcyB0aGUgY29ycmVjdCB0aW1pbmcsIGJ1dCBicmVha3MgdHJlZS1zaGFraW5nIC0gbW9kdWxlc1xuICAgICAgICAgICAgLy8gd2lsbCBiZSByZWdpc3RlcmVkIGFuZCByZXRhaW5lZCBldmVuIGlmIHRoZXkncmUgb3RoZXJ3aXNlIG5ldmVyIHJlZmVyZW5jZWQuXG4gICAgICAgICAgICByZWdpc3Rlck5nTW9kdWxlVHlwZShtb2R1bGVUeXBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGUocGFyZW50SW5qZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOZ01vZHVsZVJlZih0aGlzLm1vZHVsZVR5cGUsIHBhcmVudEluamVjdG9yKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBCaW5kaW5ncyBmb3IgcHVyZSBmdW5jdGlvbnMgYXJlIHN0b3JlZCBhZnRlciByZWd1bGFyIGJpbmRpbmdzLlxuICpcbiAqIHwtLS0tLS0tZGVjbHMtLS0tLS18LS0tLS0tLS0tdmFycy0tLS0tLS0tLXwgICAgICAgICAgICAgICAgIHwtLS0tLSBob3N0VmFycyAoZGlyMSkgLS0tLS0tfFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiB8IG5vZGVzL3JlZnMvcGlwZXMgfCBiaW5kaW5ncyB8IGZuIHNsb3RzICB8IGluamVjdG9yIHwgZGlyMSB8IGhvc3QgYmluZGluZ3MgfCBob3N0IHNsb3RzIHxcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogICAgICAgICAgICAgICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgXlxuICogICAgICBUVmlldy5iaW5kaW5nU3RhcnRJbmRleCAgICAgIFRWaWV3LmV4cGFuZG9TdGFydEluZGV4XG4gKlxuICogUHVyZSBmdW5jdGlvbiBpbnN0cnVjdGlvbnMgYXJlIGdpdmVuIGFuIG9mZnNldCBmcm9tIHRoZSBiaW5kaW5nIHJvb3QuIEFkZGluZyB0aGUgb2Zmc2V0IHRvIHRoZVxuICogYmluZGluZyByb290IGdpdmVzIHRoZSBmaXJzdCBpbmRleCB3aGVyZSB0aGUgYmluZGluZ3MgYXJlIHN0b3JlZC4gSW4gY29tcG9uZW50IHZpZXdzLCB0aGUgYmluZGluZ1xuICogcm9vdCBpcyB0aGUgYmluZGluZ1N0YXJ0SW5kZXguIEluIGhvc3QgYmluZGluZ3MsIHRoZSBiaW5kaW5nIHJvb3QgaXMgdGhlIGV4cGFuZG9TdGFydEluZGV4ICtcbiAqIGFueSBkaXJlY3RpdmUgaW5zdGFuY2VzICsgYW55IGhvc3RWYXJzIGluIGRpcmVjdGl2ZXMgZXZhbHVhdGVkIGJlZm9yZSBpdC5cbiAqXG4gKiBTZWUgVklFV19EQVRBLm1kIGZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGhvc3QgYmluZGluZyByZXNvbHV0aW9uLlxuICovXG4vKipcbiAqIElmIHRoZSB2YWx1ZSBoYXNuJ3QgYmVlbiBzYXZlZCwgY2FsbHMgdGhlIHB1cmUgZnVuY3Rpb24gdG8gc3RvcmUgYW5kIHJldHVybiB0aGVcbiAqIHZhbHVlLiBJZiBpdCBoYXMgYmVlbiBzYXZlZCwgcmV0dXJucyB0aGUgc2F2ZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBmcm9tIGJpbmRpbmcgcm9vdCB0byB0aGUgcmVzZXJ2ZWQgc2xvdFxuICogQHBhcmFtIHB1cmVGbiBGdW5jdGlvbiB0aGF0IHJldHVybnMgYSB2YWx1ZVxuICogQHBhcmFtIHRoaXNBcmcgT3B0aW9uYWwgY2FsbGluZyBjb250ZXh0IG9mIHB1cmVGblxuICogQHJldHVybnMgdmFsdWVcbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cHVyZUZ1bmN0aW9uMChzbG90T2Zmc2V0LCBwdXJlRm4sIHRoaXNBcmcpIHtcbiAgICBjb25zdCBiaW5kaW5nSW5kZXggPSBnZXRCaW5kaW5nUm9vdCgpICsgc2xvdE9mZnNldDtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgcmV0dXJuIGxWaWV3W2JpbmRpbmdJbmRleF0gPT09IE5PX0NIQU5HRSA/XG4gICAgICAgIHVwZGF0ZUJpbmRpbmcobFZpZXcsIGJpbmRpbmdJbmRleCwgdGhpc0FyZyA/IHB1cmVGbi5jYWxsKHRoaXNBcmcpIDogcHVyZUZuKCkpIDpcbiAgICAgICAgZ2V0QmluZGluZyhsVmlldywgYmluZGluZ0luZGV4KTtcbn1cbi8qKlxuICogSWYgdGhlIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBleHAgaGFzIGNoYW5nZWQsIGNhbGxzIHRoZSBwdXJlIGZ1bmN0aW9uIHRvIHJldHVyblxuICogYW4gdXBkYXRlZCB2YWx1ZS4gT3IgaWYgdGhlIHZhbHVlIGhhcyBub3QgY2hhbmdlZCwgcmV0dXJucyBjYWNoZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBmcm9tIGJpbmRpbmcgcm9vdCB0byB0aGUgcmVzZXJ2ZWQgc2xvdFxuICogQHBhcmFtIHB1cmVGbiBGdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gdXBkYXRlZCB2YWx1ZVxuICogQHBhcmFtIGV4cCBVcGRhdGVkIGV4cHJlc3Npb24gdmFsdWVcbiAqIEBwYXJhbSB0aGlzQXJnIE9wdGlvbmFsIGNhbGxpbmcgY29udGV4dCBvZiBwdXJlRm5cbiAqIEByZXR1cm5zIFVwZGF0ZWQgb3IgY2FjaGVkIHZhbHVlXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXB1cmVGdW5jdGlvbjEoc2xvdE9mZnNldCwgcHVyZUZuLCBleHAsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gcHVyZUZ1bmN0aW9uMUludGVybmFsKGdldExWaWV3KCksIGdldEJpbmRpbmdSb290KCksIHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwLCB0aGlzQXJnKTtcbn1cbi8qKlxuICogSWYgdGhlIHZhbHVlIG9mIGFueSBwcm92aWRlZCBleHAgaGFzIGNoYW5nZWQsIGNhbGxzIHRoZSBwdXJlIGZ1bmN0aW9uIHRvIHJldHVyblxuICogYW4gdXBkYXRlZCB2YWx1ZS4gT3IgaWYgbm8gdmFsdWVzIGhhdmUgY2hhbmdlZCwgcmV0dXJucyBjYWNoZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBmcm9tIGJpbmRpbmcgcm9vdCB0byB0aGUgcmVzZXJ2ZWQgc2xvdFxuICogQHBhcmFtIHB1cmVGblxuICogQHBhcmFtIGV4cDFcbiAqIEBwYXJhbSBleHAyXG4gKiBAcGFyYW0gdGhpc0FyZyBPcHRpb25hbCBjYWxsaW5nIGNvbnRleHQgb2YgcHVyZUZuXG4gKiBAcmV0dXJucyBVcGRhdGVkIG9yIGNhY2hlZCB2YWx1ZVxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwdXJlRnVuY3Rpb24yKHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwMSwgZXhwMiwgdGhpc0FyZykge1xuICAgIHJldHVybiBwdXJlRnVuY3Rpb24ySW50ZXJuYWwoZ2V0TFZpZXcoKSwgZ2V0QmluZGluZ1Jvb3QoKSwgc2xvdE9mZnNldCwgcHVyZUZuLCBleHAxLCBleHAyLCB0aGlzQXJnKTtcbn1cbi8qKlxuICogSWYgdGhlIHZhbHVlIG9mIGFueSBwcm92aWRlZCBleHAgaGFzIGNoYW5nZWQsIGNhbGxzIHRoZSBwdXJlIGZ1bmN0aW9uIHRvIHJldHVyblxuICogYW4gdXBkYXRlZCB2YWx1ZS4gT3IgaWYgbm8gdmFsdWVzIGhhdmUgY2hhbmdlZCwgcmV0dXJucyBjYWNoZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBmcm9tIGJpbmRpbmcgcm9vdCB0byB0aGUgcmVzZXJ2ZWQgc2xvdFxuICogQHBhcmFtIHB1cmVGblxuICogQHBhcmFtIGV4cDFcbiAqIEBwYXJhbSBleHAyXG4gKiBAcGFyYW0gZXhwM1xuICogQHBhcmFtIHRoaXNBcmcgT3B0aW9uYWwgY2FsbGluZyBjb250ZXh0IG9mIHB1cmVGblxuICogQHJldHVybnMgVXBkYXRlZCBvciBjYWNoZWQgdmFsdWVcbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cHVyZUZ1bmN0aW9uMyhzbG90T2Zmc2V0LCBwdXJlRm4sIGV4cDEsIGV4cDIsIGV4cDMsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gcHVyZUZ1bmN0aW9uM0ludGVybmFsKGdldExWaWV3KCksIGdldEJpbmRpbmdSb290KCksIHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwMSwgZXhwMiwgZXhwMywgdGhpc0FyZyk7XG59XG4vKipcbiAqIElmIHRoZSB2YWx1ZSBvZiBhbnkgcHJvdmlkZWQgZXhwIGhhcyBjaGFuZ2VkLCBjYWxscyB0aGUgcHVyZSBmdW5jdGlvbiB0byByZXR1cm5cbiAqIGFuIHVwZGF0ZWQgdmFsdWUuIE9yIGlmIG5vIHZhbHVlcyBoYXZlIGNoYW5nZWQsIHJldHVybnMgY2FjaGVkIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBzbG90T2Zmc2V0IHRoZSBvZmZzZXQgZnJvbSBiaW5kaW5nIHJvb3QgdG8gdGhlIHJlc2VydmVkIHNsb3RcbiAqIEBwYXJhbSBwdXJlRm5cbiAqIEBwYXJhbSBleHAxXG4gKiBAcGFyYW0gZXhwMlxuICogQHBhcmFtIGV4cDNcbiAqIEBwYXJhbSBleHA0XG4gKiBAcGFyYW0gdGhpc0FyZyBPcHRpb25hbCBjYWxsaW5nIGNvbnRleHQgb2YgcHVyZUZuXG4gKiBAcmV0dXJucyBVcGRhdGVkIG9yIGNhY2hlZCB2YWx1ZVxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwdXJlRnVuY3Rpb240KHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCwgdGhpc0FyZykge1xuICAgIHJldHVybiBwdXJlRnVuY3Rpb240SW50ZXJuYWwoZ2V0TFZpZXcoKSwgZ2V0QmluZGluZ1Jvb3QoKSwgc2xvdE9mZnNldCwgcHVyZUZuLCBleHAxLCBleHAyLCBleHAzLCBleHA0LCB0aGlzQXJnKTtcbn1cbi8qKlxuICogSWYgdGhlIHZhbHVlIG9mIGFueSBwcm92aWRlZCBleHAgaGFzIGNoYW5nZWQsIGNhbGxzIHRoZSBwdXJlIGZ1bmN0aW9uIHRvIHJldHVyblxuICogYW4gdXBkYXRlZCB2YWx1ZS4gT3IgaWYgbm8gdmFsdWVzIGhhdmUgY2hhbmdlZCwgcmV0dXJucyBjYWNoZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBmcm9tIGJpbmRpbmcgcm9vdCB0byB0aGUgcmVzZXJ2ZWQgc2xvdFxuICogQHBhcmFtIHB1cmVGblxuICogQHBhcmFtIGV4cDFcbiAqIEBwYXJhbSBleHAyXG4gKiBAcGFyYW0gZXhwM1xuICogQHBhcmFtIGV4cDRcbiAqIEBwYXJhbSBleHA1XG4gKiBAcGFyYW0gdGhpc0FyZyBPcHRpb25hbCBjYWxsaW5nIGNvbnRleHQgb2YgcHVyZUZuXG4gKiBAcmV0dXJucyBVcGRhdGVkIG9yIGNhY2hlZCB2YWx1ZVxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwdXJlRnVuY3Rpb241KHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCwgZXhwNSwgdGhpc0FyZykge1xuICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGdldEJpbmRpbmdSb290KCkgKyBzbG90T2Zmc2V0O1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBkaWZmZXJlbnQgPSBiaW5kaW5nVXBkYXRlZDQobFZpZXcsIGJpbmRpbmdJbmRleCwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCk7XG4gICAgcmV0dXJuIGJpbmRpbmdVcGRhdGVkKGxWaWV3LCBiaW5kaW5nSW5kZXggKyA0LCBleHA1KSB8fCBkaWZmZXJlbnQgP1xuICAgICAgICB1cGRhdGVCaW5kaW5nKGxWaWV3LCBiaW5kaW5nSW5kZXggKyA1LCB0aGlzQXJnID8gcHVyZUZuLmNhbGwodGhpc0FyZywgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCwgZXhwNSkgOlxuICAgICAgICAgICAgcHVyZUZuKGV4cDEsIGV4cDIsIGV4cDMsIGV4cDQsIGV4cDUpKSA6XG4gICAgICAgIGdldEJpbmRpbmcobFZpZXcsIGJpbmRpbmdJbmRleCArIDUpO1xufVxuLyoqXG4gKiBJZiB0aGUgdmFsdWUgb2YgYW55IHByb3ZpZGVkIGV4cCBoYXMgY2hhbmdlZCwgY2FsbHMgdGhlIHB1cmUgZnVuY3Rpb24gdG8gcmV0dXJuXG4gKiBhbiB1cGRhdGVkIHZhbHVlLiBPciBpZiBubyB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLCByZXR1cm5zIGNhY2hlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gc2xvdE9mZnNldCB0aGUgb2Zmc2V0IGZyb20gYmluZGluZyByb290IHRvIHRoZSByZXNlcnZlZCBzbG90XG4gKiBAcGFyYW0gcHVyZUZuXG4gKiBAcGFyYW0gZXhwMVxuICogQHBhcmFtIGV4cDJcbiAqIEBwYXJhbSBleHAzXG4gKiBAcGFyYW0gZXhwNFxuICogQHBhcmFtIGV4cDVcbiAqIEBwYXJhbSBleHA2XG4gKiBAcGFyYW0gdGhpc0FyZyBPcHRpb25hbCBjYWxsaW5nIGNvbnRleHQgb2YgcHVyZUZuXG4gKiBAcmV0dXJucyBVcGRhdGVkIG9yIGNhY2hlZCB2YWx1ZVxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwdXJlRnVuY3Rpb242KHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCwgZXhwNSwgZXhwNiwgdGhpc0FyZykge1xuICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGdldEJpbmRpbmdSb290KCkgKyBzbG90T2Zmc2V0O1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBkaWZmZXJlbnQgPSBiaW5kaW5nVXBkYXRlZDQobFZpZXcsIGJpbmRpbmdJbmRleCwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCk7XG4gICAgcmV0dXJuIGJpbmRpbmdVcGRhdGVkMihsVmlldywgYmluZGluZ0luZGV4ICsgNCwgZXhwNSwgZXhwNikgfHwgZGlmZmVyZW50ID9cbiAgICAgICAgdXBkYXRlQmluZGluZyhsVmlldywgYmluZGluZ0luZGV4ICsgNiwgdGhpc0FyZyA/IHB1cmVGbi5jYWxsKHRoaXNBcmcsIGV4cDEsIGV4cDIsIGV4cDMsIGV4cDQsIGV4cDUsIGV4cDYpIDpcbiAgICAgICAgICAgIHB1cmVGbihleHAxLCBleHAyLCBleHAzLCBleHA0LCBleHA1LCBleHA2KSkgOlxuICAgICAgICBnZXRCaW5kaW5nKGxWaWV3LCBiaW5kaW5nSW5kZXggKyA2KTtcbn1cbi8qKlxuICogSWYgdGhlIHZhbHVlIG9mIGFueSBwcm92aWRlZCBleHAgaGFzIGNoYW5nZWQsIGNhbGxzIHRoZSBwdXJlIGZ1bmN0aW9uIHRvIHJldHVyblxuICogYW4gdXBkYXRlZCB2YWx1ZS4gT3IgaWYgbm8gdmFsdWVzIGhhdmUgY2hhbmdlZCwgcmV0dXJucyBjYWNoZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBmcm9tIGJpbmRpbmcgcm9vdCB0byB0aGUgcmVzZXJ2ZWQgc2xvdFxuICogQHBhcmFtIHB1cmVGblxuICogQHBhcmFtIGV4cDFcbiAqIEBwYXJhbSBleHAyXG4gKiBAcGFyYW0gZXhwM1xuICogQHBhcmFtIGV4cDRcbiAqIEBwYXJhbSBleHA1XG4gKiBAcGFyYW0gZXhwNlxuICogQHBhcmFtIGV4cDdcbiAqIEBwYXJhbSB0aGlzQXJnIE9wdGlvbmFsIGNhbGxpbmcgY29udGV4dCBvZiBwdXJlRm5cbiAqIEByZXR1cm5zIFVwZGF0ZWQgb3IgY2FjaGVkIHZhbHVlXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXB1cmVGdW5jdGlvbjcoc2xvdE9mZnNldCwgcHVyZUZuLCBleHAxLCBleHAyLCBleHAzLCBleHA0LCBleHA1LCBleHA2LCBleHA3LCB0aGlzQXJnKSB7XG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gZ2V0QmluZGluZ1Jvb3QoKSArIHNsb3RPZmZzZXQ7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGxldCBkaWZmZXJlbnQgPSBiaW5kaW5nVXBkYXRlZDQobFZpZXcsIGJpbmRpbmdJbmRleCwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCk7XG4gICAgcmV0dXJuIGJpbmRpbmdVcGRhdGVkMyhsVmlldywgYmluZGluZ0luZGV4ICsgNCwgZXhwNSwgZXhwNiwgZXhwNykgfHwgZGlmZmVyZW50ID9cbiAgICAgICAgdXBkYXRlQmluZGluZyhsVmlldywgYmluZGluZ0luZGV4ICsgNywgdGhpc0FyZyA/IHB1cmVGbi5jYWxsKHRoaXNBcmcsIGV4cDEsIGV4cDIsIGV4cDMsIGV4cDQsIGV4cDUsIGV4cDYsIGV4cDcpIDpcbiAgICAgICAgICAgIHB1cmVGbihleHAxLCBleHAyLCBleHAzLCBleHA0LCBleHA1LCBleHA2LCBleHA3KSkgOlxuICAgICAgICBnZXRCaW5kaW5nKGxWaWV3LCBiaW5kaW5nSW5kZXggKyA3KTtcbn1cbi8qKlxuICogSWYgdGhlIHZhbHVlIG9mIGFueSBwcm92aWRlZCBleHAgaGFzIGNoYW5nZWQsIGNhbGxzIHRoZSBwdXJlIGZ1bmN0aW9uIHRvIHJldHVyblxuICogYW4gdXBkYXRlZCB2YWx1ZS4gT3IgaWYgbm8gdmFsdWVzIGhhdmUgY2hhbmdlZCwgcmV0dXJucyBjYWNoZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBmcm9tIGJpbmRpbmcgcm9vdCB0byB0aGUgcmVzZXJ2ZWQgc2xvdFxuICogQHBhcmFtIHB1cmVGblxuICogQHBhcmFtIGV4cDFcbiAqIEBwYXJhbSBleHAyXG4gKiBAcGFyYW0gZXhwM1xuICogQHBhcmFtIGV4cDRcbiAqIEBwYXJhbSBleHA1XG4gKiBAcGFyYW0gZXhwNlxuICogQHBhcmFtIGV4cDdcbiAqIEBwYXJhbSBleHA4XG4gKiBAcGFyYW0gdGhpc0FyZyBPcHRpb25hbCBjYWxsaW5nIGNvbnRleHQgb2YgcHVyZUZuXG4gKiBAcmV0dXJucyBVcGRhdGVkIG9yIGNhY2hlZCB2YWx1ZVxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwdXJlRnVuY3Rpb244KHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCwgZXhwNSwgZXhwNiwgZXhwNywgZXhwOCwgdGhpc0FyZykge1xuICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGdldEJpbmRpbmdSb290KCkgKyBzbG90T2Zmc2V0O1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBkaWZmZXJlbnQgPSBiaW5kaW5nVXBkYXRlZDQobFZpZXcsIGJpbmRpbmdJbmRleCwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCk7XG4gICAgcmV0dXJuIGJpbmRpbmdVcGRhdGVkNChsVmlldywgYmluZGluZ0luZGV4ICsgNCwgZXhwNSwgZXhwNiwgZXhwNywgZXhwOCkgfHwgZGlmZmVyZW50ID9cbiAgICAgICAgdXBkYXRlQmluZGluZyhsVmlldywgYmluZGluZ0luZGV4ICsgOCwgdGhpc0FyZyA/IHB1cmVGbi5jYWxsKHRoaXNBcmcsIGV4cDEsIGV4cDIsIGV4cDMsIGV4cDQsIGV4cDUsIGV4cDYsIGV4cDcsIGV4cDgpIDpcbiAgICAgICAgICAgIHB1cmVGbihleHAxLCBleHAyLCBleHAzLCBleHA0LCBleHA1LCBleHA2LCBleHA3LCBleHA4KSkgOlxuICAgICAgICBnZXRCaW5kaW5nKGxWaWV3LCBiaW5kaW5nSW5kZXggKyA4KTtcbn1cbi8qKlxuICogcHVyZUZ1bmN0aW9uIGluc3RydWN0aW9uIHRoYXQgY2FuIHN1cHBvcnQgYW55IG51bWJlciBvZiBiaW5kaW5ncy5cbiAqXG4gKiBJZiB0aGUgdmFsdWUgb2YgYW55IHByb3ZpZGVkIGV4cCBoYXMgY2hhbmdlZCwgY2FsbHMgdGhlIHB1cmUgZnVuY3Rpb24gdG8gcmV0dXJuXG4gKiBhbiB1cGRhdGVkIHZhbHVlLiBPciBpZiBubyB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLCByZXR1cm5zIGNhY2hlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gc2xvdE9mZnNldCB0aGUgb2Zmc2V0IGZyb20gYmluZGluZyByb290IHRvIHRoZSByZXNlcnZlZCBzbG90XG4gKiBAcGFyYW0gcHVyZUZuIEEgcHVyZSBmdW5jdGlvbiB0aGF0IHRha2VzIGJpbmRpbmcgdmFsdWVzIGFuZCBidWlsZHMgYW4gb2JqZWN0IG9yIGFycmF5XG4gKiBjb250YWluaW5nIHRob3NlIHZhbHVlcy5cbiAqIEBwYXJhbSBleHBzIEFuIGFycmF5IG9mIGJpbmRpbmcgdmFsdWVzXG4gKiBAcGFyYW0gdGhpc0FyZyBPcHRpb25hbCBjYWxsaW5nIGNvbnRleHQgb2YgcHVyZUZuXG4gKiBAcmV0dXJucyBVcGRhdGVkIG9yIGNhY2hlZCB2YWx1ZVxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwdXJlRnVuY3Rpb25WKHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwcywgdGhpc0FyZykge1xuICAgIHJldHVybiBwdXJlRnVuY3Rpb25WSW50ZXJuYWwoZ2V0TFZpZXcoKSwgZ2V0QmluZGluZ1Jvb3QoKSwgc2xvdE9mZnNldCwgcHVyZUZuLCBleHBzLCB0aGlzQXJnKTtcbn1cbi8qKlxuICogUmVzdWx0cyBvZiBhIHB1cmUgZnVuY3Rpb24gaW52b2NhdGlvbiBhcmUgc3RvcmVkIGluIExWaWV3IGluIGEgZGVkaWNhdGVkIHNsb3QgdGhhdCBpcyBpbml0aWFsaXplZFxuICogdG8gTk9fQ0hBTkdFLiBJbiByYXJlIHNpdHVhdGlvbnMgYSBwdXJlIHBpcGUgbWlnaHQgdGhyb3cgYW4gZXhjZXB0aW9uIG9uIHRoZSB2ZXJ5IGZpcnN0XG4gKiBpbnZvY2F0aW9uIGFuZCBub3QgcHJvZHVjZSBhbnkgdmFsaWQgcmVzdWx0cy4gSW4gdGhpcyBjYXNlIExWaWV3IHdvdWxkIGtlZXAgaG9sZGluZyB0aGUgTk9fQ0hBTkdFXG4gKiB2YWx1ZS4gVGhlIE5PX0NIQU5HRSBpcyBub3Qgc29tZXRoaW5nIHRoYXQgd2UgY2FuIHVzZSBpbiBleHByZXNzaW9ucyAvIGJpbmRpbmdzIHRodXMgd2UgY29udmVydFxuICogaXQgdG8gYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIGdldFB1cmVGdW5jdGlvblJldHVyblZhbHVlKGxWaWV3LCByZXR1cm5WYWx1ZUluZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydEluZGV4SW5SYW5nZShsVmlldywgcmV0dXJuVmFsdWVJbmRleCk7XG4gICAgY29uc3QgbGFzdFJldHVyblZhbHVlID0gbFZpZXdbcmV0dXJuVmFsdWVJbmRleF07XG4gICAgcmV0dXJuIGxhc3RSZXR1cm5WYWx1ZSA9PT0gTk9fQ0hBTkdFID8gdW5kZWZpbmVkIDogbGFzdFJldHVyblZhbHVlO1xufVxuLyoqXG4gKiBJZiB0aGUgdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGV4cCBoYXMgY2hhbmdlZCwgY2FsbHMgdGhlIHB1cmUgZnVuY3Rpb24gdG8gcmV0dXJuXG4gKiBhbiB1cGRhdGVkIHZhbHVlLiBPciBpZiB0aGUgdmFsdWUgaGFzIG5vdCBjaGFuZ2VkLCByZXR1cm5zIGNhY2hlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gbFZpZXcgTFZpZXcgaW4gd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIGJlaW5nIGV4ZWN1dGVkLlxuICogQHBhcmFtIGJpbmRpbmdSb290IEJpbmRpbmcgcm9vdCBpbmRleC5cbiAqIEBwYXJhbSBzbG90T2Zmc2V0IHRoZSBvZmZzZXQgZnJvbSBiaW5kaW5nIHJvb3QgdG8gdGhlIHJlc2VydmVkIHNsb3RcbiAqIEBwYXJhbSBwdXJlRm4gRnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIHVwZGF0ZWQgdmFsdWVcbiAqIEBwYXJhbSBleHAgVXBkYXRlZCBleHByZXNzaW9uIHZhbHVlXG4gKiBAcGFyYW0gdGhpc0FyZyBPcHRpb25hbCBjYWxsaW5nIGNvbnRleHQgb2YgcHVyZUZuXG4gKiBAcmV0dXJucyBVcGRhdGVkIG9yIGNhY2hlZCB2YWx1ZVxuICovXG5mdW5jdGlvbiBwdXJlRnVuY3Rpb24xSW50ZXJuYWwobFZpZXcsIGJpbmRpbmdSb290LCBzbG90T2Zmc2V0LCBwdXJlRm4sIGV4cCwgdGhpc0FyZykge1xuICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGJpbmRpbmdSb290ICsgc2xvdE9mZnNldDtcbiAgICByZXR1cm4gYmluZGluZ1VwZGF0ZWQobFZpZXcsIGJpbmRpbmdJbmRleCwgZXhwKSA/XG4gICAgICAgIHVwZGF0ZUJpbmRpbmcobFZpZXcsIGJpbmRpbmdJbmRleCArIDEsIHRoaXNBcmcgPyBwdXJlRm4uY2FsbCh0aGlzQXJnLCBleHApIDogcHVyZUZuKGV4cCkpIDpcbiAgICAgICAgZ2V0UHVyZUZ1bmN0aW9uUmV0dXJuVmFsdWUobFZpZXcsIGJpbmRpbmdJbmRleCArIDEpO1xufVxuLyoqXG4gKiBJZiB0aGUgdmFsdWUgb2YgYW55IHByb3ZpZGVkIGV4cCBoYXMgY2hhbmdlZCwgY2FsbHMgdGhlIHB1cmUgZnVuY3Rpb24gdG8gcmV0dXJuXG4gKiBhbiB1cGRhdGVkIHZhbHVlLiBPciBpZiBubyB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLCByZXR1cm5zIGNhY2hlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gbFZpZXcgTFZpZXcgaW4gd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIGJlaW5nIGV4ZWN1dGVkLlxuICogQHBhcmFtIGJpbmRpbmdSb290IEJpbmRpbmcgcm9vdCBpbmRleC5cbiAqIEBwYXJhbSBzbG90T2Zmc2V0IHRoZSBvZmZzZXQgZnJvbSBiaW5kaW5nIHJvb3QgdG8gdGhlIHJlc2VydmVkIHNsb3RcbiAqIEBwYXJhbSBwdXJlRm5cbiAqIEBwYXJhbSBleHAxXG4gKiBAcGFyYW0gZXhwMlxuICogQHBhcmFtIHRoaXNBcmcgT3B0aW9uYWwgY2FsbGluZyBjb250ZXh0IG9mIHB1cmVGblxuICogQHJldHVybnMgVXBkYXRlZCBvciBjYWNoZWQgdmFsdWVcbiAqL1xuZnVuY3Rpb24gcHVyZUZ1bmN0aW9uMkludGVybmFsKGxWaWV3LCBiaW5kaW5nUm9vdCwgc2xvdE9mZnNldCwgcHVyZUZuLCBleHAxLCBleHAyLCB0aGlzQXJnKSB7XG4gICAgY29uc3QgYmluZGluZ0luZGV4ID0gYmluZGluZ1Jvb3QgKyBzbG90T2Zmc2V0O1xuICAgIHJldHVybiBiaW5kaW5nVXBkYXRlZDIobFZpZXcsIGJpbmRpbmdJbmRleCwgZXhwMSwgZXhwMikgP1xuICAgICAgICB1cGRhdGVCaW5kaW5nKGxWaWV3LCBiaW5kaW5nSW5kZXggKyAyLCB0aGlzQXJnID8gcHVyZUZuLmNhbGwodGhpc0FyZywgZXhwMSwgZXhwMikgOiBwdXJlRm4oZXhwMSwgZXhwMikpIDpcbiAgICAgICAgZ2V0UHVyZUZ1bmN0aW9uUmV0dXJuVmFsdWUobFZpZXcsIGJpbmRpbmdJbmRleCArIDIpO1xufVxuLyoqXG4gKiBJZiB0aGUgdmFsdWUgb2YgYW55IHByb3ZpZGVkIGV4cCBoYXMgY2hhbmdlZCwgY2FsbHMgdGhlIHB1cmUgZnVuY3Rpb24gdG8gcmV0dXJuXG4gKiBhbiB1cGRhdGVkIHZhbHVlLiBPciBpZiBubyB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLCByZXR1cm5zIGNhY2hlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gbFZpZXcgTFZpZXcgaW4gd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIGJlaW5nIGV4ZWN1dGVkLlxuICogQHBhcmFtIGJpbmRpbmdSb290IEJpbmRpbmcgcm9vdCBpbmRleC5cbiAqIEBwYXJhbSBzbG90T2Zmc2V0IHRoZSBvZmZzZXQgZnJvbSBiaW5kaW5nIHJvb3QgdG8gdGhlIHJlc2VydmVkIHNsb3RcbiAqIEBwYXJhbSBwdXJlRm5cbiAqIEBwYXJhbSBleHAxXG4gKiBAcGFyYW0gZXhwMlxuICogQHBhcmFtIGV4cDNcbiAqIEBwYXJhbSB0aGlzQXJnIE9wdGlvbmFsIGNhbGxpbmcgY29udGV4dCBvZiBwdXJlRm5cbiAqIEByZXR1cm5zIFVwZGF0ZWQgb3IgY2FjaGVkIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHB1cmVGdW5jdGlvbjNJbnRlcm5hbChsVmlldywgYmluZGluZ1Jvb3QsIHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwMSwgZXhwMiwgZXhwMywgdGhpc0FyZykge1xuICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGJpbmRpbmdSb290ICsgc2xvdE9mZnNldDtcbiAgICByZXR1cm4gYmluZGluZ1VwZGF0ZWQzKGxWaWV3LCBiaW5kaW5nSW5kZXgsIGV4cDEsIGV4cDIsIGV4cDMpID9cbiAgICAgICAgdXBkYXRlQmluZGluZyhsVmlldywgYmluZGluZ0luZGV4ICsgMywgdGhpc0FyZyA/IHB1cmVGbi5jYWxsKHRoaXNBcmcsIGV4cDEsIGV4cDIsIGV4cDMpIDogcHVyZUZuKGV4cDEsIGV4cDIsIGV4cDMpKSA6XG4gICAgICAgIGdldFB1cmVGdW5jdGlvblJldHVyblZhbHVlKGxWaWV3LCBiaW5kaW5nSW5kZXggKyAzKTtcbn1cbi8qKlxuICogSWYgdGhlIHZhbHVlIG9mIGFueSBwcm92aWRlZCBleHAgaGFzIGNoYW5nZWQsIGNhbGxzIHRoZSBwdXJlIGZ1bmN0aW9uIHRvIHJldHVyblxuICogYW4gdXBkYXRlZCB2YWx1ZS4gT3IgaWYgbm8gdmFsdWVzIGhhdmUgY2hhbmdlZCwgcmV0dXJucyBjYWNoZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIGxWaWV3IExWaWV3IGluIHdoaWNoIHRoZSBmdW5jdGlvbiBpcyBiZWluZyBleGVjdXRlZC5cbiAqIEBwYXJhbSBiaW5kaW5nUm9vdCBCaW5kaW5nIHJvb3QgaW5kZXguXG4gKiBAcGFyYW0gc2xvdE9mZnNldCB0aGUgb2Zmc2V0IGZyb20gYmluZGluZyByb290IHRvIHRoZSByZXNlcnZlZCBzbG90XG4gKiBAcGFyYW0gcHVyZUZuXG4gKiBAcGFyYW0gZXhwMVxuICogQHBhcmFtIGV4cDJcbiAqIEBwYXJhbSBleHAzXG4gKiBAcGFyYW0gZXhwNFxuICogQHBhcmFtIHRoaXNBcmcgT3B0aW9uYWwgY2FsbGluZyBjb250ZXh0IG9mIHB1cmVGblxuICogQHJldHVybnMgVXBkYXRlZCBvciBjYWNoZWQgdmFsdWVcbiAqXG4gKi9cbmZ1bmN0aW9uIHB1cmVGdW5jdGlvbjRJbnRlcm5hbChsVmlldywgYmluZGluZ1Jvb3QsIHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwMSwgZXhwMiwgZXhwMywgZXhwNCwgdGhpc0FyZykge1xuICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGJpbmRpbmdSb290ICsgc2xvdE9mZnNldDtcbiAgICByZXR1cm4gYmluZGluZ1VwZGF0ZWQ0KGxWaWV3LCBiaW5kaW5nSW5kZXgsIGV4cDEsIGV4cDIsIGV4cDMsIGV4cDQpID9cbiAgICAgICAgdXBkYXRlQmluZGluZyhsVmlldywgYmluZGluZ0luZGV4ICsgNCwgdGhpc0FyZyA/IHB1cmVGbi5jYWxsKHRoaXNBcmcsIGV4cDEsIGV4cDIsIGV4cDMsIGV4cDQpIDogcHVyZUZuKGV4cDEsIGV4cDIsIGV4cDMsIGV4cDQpKSA6XG4gICAgICAgIGdldFB1cmVGdW5jdGlvblJldHVyblZhbHVlKGxWaWV3LCBiaW5kaW5nSW5kZXggKyA0KTtcbn1cbi8qKlxuICogcHVyZUZ1bmN0aW9uIGluc3RydWN0aW9uIHRoYXQgY2FuIHN1cHBvcnQgYW55IG51bWJlciBvZiBiaW5kaW5ncy5cbiAqXG4gKiBJZiB0aGUgdmFsdWUgb2YgYW55IHByb3ZpZGVkIGV4cCBoYXMgY2hhbmdlZCwgY2FsbHMgdGhlIHB1cmUgZnVuY3Rpb24gdG8gcmV0dXJuXG4gKiBhbiB1cGRhdGVkIHZhbHVlLiBPciBpZiBubyB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLCByZXR1cm5zIGNhY2hlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gbFZpZXcgTFZpZXcgaW4gd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIGJlaW5nIGV4ZWN1dGVkLlxuICogQHBhcmFtIGJpbmRpbmdSb290IEJpbmRpbmcgcm9vdCBpbmRleC5cbiAqIEBwYXJhbSBzbG90T2Zmc2V0IHRoZSBvZmZzZXQgZnJvbSBiaW5kaW5nIHJvb3QgdG8gdGhlIHJlc2VydmVkIHNsb3RcbiAqIEBwYXJhbSBwdXJlRm4gQSBwdXJlIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYmluZGluZyB2YWx1ZXMgYW5kIGJ1aWxkcyBhbiBvYmplY3Qgb3IgYXJyYXlcbiAqIGNvbnRhaW5pbmcgdGhvc2UgdmFsdWVzLlxuICogQHBhcmFtIGV4cHMgQW4gYXJyYXkgb2YgYmluZGluZyB2YWx1ZXNcbiAqIEBwYXJhbSB0aGlzQXJnIE9wdGlvbmFsIGNhbGxpbmcgY29udGV4dCBvZiBwdXJlRm5cbiAqIEByZXR1cm5zIFVwZGF0ZWQgb3IgY2FjaGVkIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHB1cmVGdW5jdGlvblZJbnRlcm5hbChsVmlldywgYmluZGluZ1Jvb3QsIHNsb3RPZmZzZXQsIHB1cmVGbiwgZXhwcywgdGhpc0FyZykge1xuICAgIGxldCBiaW5kaW5nSW5kZXggPSBiaW5kaW5nUm9vdCArIHNsb3RPZmZzZXQ7XG4gICAgbGV0IGRpZmZlcmVudCA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXhwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBiaW5kaW5nVXBkYXRlZChsVmlldywgYmluZGluZ0luZGV4KyssIGV4cHNbaV0pICYmIChkaWZmZXJlbnQgPSB0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGRpZmZlcmVudCA/IHVwZGF0ZUJpbmRpbmcobFZpZXcsIGJpbmRpbmdJbmRleCwgcHVyZUZuLmFwcGx5KHRoaXNBcmcsIGV4cHMpKSA6XG4gICAgICAgIGdldFB1cmVGdW5jdGlvblJldHVyblZhbHVlKGxWaWV3LCBiaW5kaW5nSW5kZXgpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQ3JlYXRlIGEgcGlwZS5cbiAqXG4gKiBAcGFyYW0gaW5kZXggUGlwZSBpbmRleCB3aGVyZSB0aGUgcGlwZSB3aWxsIGJlIHN0b3JlZC5cbiAqIEBwYXJhbSBwaXBlTmFtZSBUaGUgbmFtZSBvZiB0aGUgcGlwZVxuICogQHJldHVybnMgVCB0aGUgaW5zdGFuY2Ugb2YgdGhlIHBpcGUuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXBpcGUoaW5kZXgsIHBpcGVOYW1lKSB7XG4gICAgY29uc3QgdFZpZXcgPSBnZXRUVmlldygpO1xuICAgIGxldCBwaXBlRGVmO1xuICAgIGNvbnN0IGFkanVzdGVkSW5kZXggPSBpbmRleCArIEhFQURFUl9PRkZTRVQ7XG4gICAgaWYgKHRWaWV3LmZpcnN0Q3JlYXRlUGFzcykge1xuICAgICAgICAvLyBUaGUgYGdldFBpcGVEZWZgIHRocm93cyBpZiBhIHBpcGUgd2l0aCBhIGdpdmVuIG5hbWUgaXMgbm90IGZvdW5kXG4gICAgICAgIC8vIChzbyB3ZSB1c2Ugbm9uLW51bGwgYXNzZXJ0aW9uIGJlbG93KS5cbiAgICAgICAgcGlwZURlZiA9IGdldFBpcGVEZWYocGlwZU5hbWUsIHRWaWV3LnBpcGVSZWdpc3RyeSk7XG4gICAgICAgIHRWaWV3LmRhdGFbYWRqdXN0ZWRJbmRleF0gPSBwaXBlRGVmO1xuICAgICAgICBpZiAocGlwZURlZi5vbkRlc3Ryb3kpIHtcbiAgICAgICAgICAgICh0Vmlldy5kZXN0cm95SG9va3MgfHwgKHRWaWV3LmRlc3Ryb3lIb29rcyA9IFtdKSkucHVzaChhZGp1c3RlZEluZGV4LCBwaXBlRGVmLm9uRGVzdHJveSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHBpcGVEZWYgPSB0Vmlldy5kYXRhW2FkanVzdGVkSW5kZXhdO1xuICAgIH1cbiAgICBjb25zdCBwaXBlRmFjdG9yeSA9IHBpcGVEZWYuZmFjdG9yeSB8fCAocGlwZURlZi5mYWN0b3J5ID0gZ2V0RmFjdG9yeURlZihwaXBlRGVmLnR5cGUsIHRydWUpKTtcbiAgICBjb25zdCBwcmV2aW91c0luamVjdEltcGxlbWVudGF0aW9uID0gc2V0SW5qZWN0SW1wbGVtZW50YXRpb24oybXJtWRpcmVjdGl2ZUluamVjdCk7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gREkgZm9yIHBpcGVzIGlzIHN1cHBvc2VkIHRvIGJlaGF2ZSBsaWtlIGRpcmVjdGl2ZXMgd2hlbiBwbGFjZWQgb24gYSBjb21wb25lbnRcbiAgICAgICAgLy8gaG9zdCBub2RlLCB3aGljaCBtZWFucyB0aGF0IHdlIGhhdmUgdG8gZGlzYWJsZSBhY2Nlc3MgdG8gYHZpZXdQcm92aWRlcnNgLlxuICAgICAgICBjb25zdCBwcmV2aW91c0luY2x1ZGVWaWV3UHJvdmlkZXJzID0gc2V0SW5jbHVkZVZpZXdQcm92aWRlcnMoZmFsc2UpO1xuICAgICAgICBjb25zdCBwaXBlSW5zdGFuY2UgPSBwaXBlRmFjdG9yeSgpO1xuICAgICAgICBzZXRJbmNsdWRlVmlld1Byb3ZpZGVycyhwcmV2aW91c0luY2x1ZGVWaWV3UHJvdmlkZXJzKTtcbiAgICAgICAgc3RvcmUodFZpZXcsIGdldExWaWV3KCksIGFkanVzdGVkSW5kZXgsIHBpcGVJbnN0YW5jZSk7XG4gICAgICAgIHJldHVybiBwaXBlSW5zdGFuY2U7XG4gICAgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICAvLyB3ZSBoYXZlIHRvIHJlc3RvcmUgdGhlIGluamVjdG9yIGltcGxlbWVudGF0aW9uIGluIGZpbmFsbHksIGp1c3QgaW4gY2FzZSB0aGUgY3JlYXRpb24gb2YgdGhlXG4gICAgICAgIC8vIHBpcGUgdGhyb3dzIGFuIGVycm9yLlxuICAgICAgICBzZXRJbmplY3RJbXBsZW1lbnRhdGlvbihwcmV2aW91c0luamVjdEltcGxlbWVudGF0aW9uKTtcbiAgICB9XG59XG4vKipcbiAqIFNlYXJjaGVzIHRoZSBwaXBlIHJlZ2lzdHJ5IGZvciBhIHBpcGUgd2l0aCB0aGUgZ2l2ZW4gbmFtZS4gSWYgb25lIGlzIGZvdW5kLFxuICogcmV0dXJucyB0aGUgcGlwZS4gT3RoZXJ3aXNlLCBhbiBlcnJvciBpcyB0aHJvd24gYmVjYXVzZSB0aGUgcGlwZSBjYW5ub3QgYmUgcmVzb2x2ZWQuXG4gKlxuICogQHBhcmFtIG5hbWUgTmFtZSBvZiBwaXBlIHRvIHJlc29sdmVcbiAqIEBwYXJhbSByZWdpc3RyeSBGdWxsIGxpc3Qgb2YgYXZhaWxhYmxlIHBpcGVzXG4gKiBAcmV0dXJucyBNYXRjaGluZyBQaXBlRGVmXG4gKi9cbmZ1bmN0aW9uIGdldFBpcGVEZWYobmFtZSwgcmVnaXN0cnkpIHtcbiAgICBpZiAocmVnaXN0cnkpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHJlZ2lzdHJ5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCBwaXBlRGVmID0gcmVnaXN0cnlbaV07XG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gcGlwZURlZi5uYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBpcGVEZWY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5nRGV2TW9kZSkge1xuICAgICAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgICAgIGNvbnN0IGRlY2xhcmF0aW9uTFZpZXcgPSBsVmlld1tERUNMQVJBVElPTl9DT01QT05FTlRfVklFV107XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBkZWNsYXJhdGlvbkxWaWV3W0NPTlRFWFRdO1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBjb250ZXh0ID8gYCBpbiB0aGUgJyR7Y29udGV4dC5jb25zdHJ1Y3Rvci5uYW1lfScgY29tcG9uZW50YCA6ICcnO1xuICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKC0zMDIgLyogUElQRV9OT1RfRk9VTkQgKi8sIGBUaGUgcGlwZSAnJHtuYW1lfScgY291bGQgbm90IGJlIGZvdW5kJHtjb21wb25lbnR9IWApO1xuICAgIH1cbn1cbi8qKlxuICogSW52b2tlcyBhIHBpcGUgd2l0aCAxIGFyZ3VtZW50cy5cbiAqXG4gKiBUaGlzIGluc3RydWN0aW9uIGFjdHMgYXMgYSBndWFyZCB0byB7QGxpbmsgUGlwZVRyYW5zZm9ybSN0cmFuc2Zvcm19IGludm9raW5nXG4gKiB0aGUgcGlwZSBvbmx5IHdoZW4gYW4gaW5wdXQgdG8gdGhlIHBpcGUgY2hhbmdlcy5cbiAqXG4gKiBAcGFyYW0gaW5kZXggUGlwZSBpbmRleCB3aGVyZSB0aGUgcGlwZSB3YXMgc3RvcmVkIG9uIGNyZWF0aW9uLlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBpbiB0aGUgcmVzZXJ2ZWQgc2xvdCBzcGFjZVxuICogQHBhcmFtIHYxIDFzdCBhcmd1bWVudCB0byB7QGxpbmsgUGlwZVRyYW5zZm9ybSN0cmFuc2Zvcm19LlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwaXBlQmluZDEoaW5kZXgsIHNsb3RPZmZzZXQsIHYxKSB7XG4gICAgY29uc3QgYWRqdXN0ZWRJbmRleCA9IGluZGV4ICsgSEVBREVSX09GRlNFVDtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgcGlwZUluc3RhbmNlID0gbG9hZChsVmlldywgYWRqdXN0ZWRJbmRleCk7XG4gICAgcmV0dXJuIGlzUHVyZShsVmlldywgYWRqdXN0ZWRJbmRleCkgP1xuICAgICAgICBwdXJlRnVuY3Rpb24xSW50ZXJuYWwobFZpZXcsIGdldEJpbmRpbmdSb290KCksIHNsb3RPZmZzZXQsIHBpcGVJbnN0YW5jZS50cmFuc2Zvcm0sIHYxLCBwaXBlSW5zdGFuY2UpIDpcbiAgICAgICAgcGlwZUluc3RhbmNlLnRyYW5zZm9ybSh2MSk7XG59XG4vKipcbiAqIEludm9rZXMgYSBwaXBlIHdpdGggMiBhcmd1bWVudHMuXG4gKlxuICogVGhpcyBpbnN0cnVjdGlvbiBhY3RzIGFzIGEgZ3VhcmQgdG8ge0BsaW5rIFBpcGVUcmFuc2Zvcm0jdHJhbnNmb3JtfSBpbnZva2luZ1xuICogdGhlIHBpcGUgb25seSB3aGVuIGFuIGlucHV0IHRvIHRoZSBwaXBlIGNoYW5nZXMuXG4gKlxuICogQHBhcmFtIGluZGV4IFBpcGUgaW5kZXggd2hlcmUgdGhlIHBpcGUgd2FzIHN0b3JlZCBvbiBjcmVhdGlvbi5cbiAqIEBwYXJhbSBzbG90T2Zmc2V0IHRoZSBvZmZzZXQgaW4gdGhlIHJlc2VydmVkIHNsb3Qgc3BhY2VcbiAqIEBwYXJhbSB2MSAxc3QgYXJndW1lbnQgdG8ge0BsaW5rIFBpcGVUcmFuc2Zvcm0jdHJhbnNmb3JtfS5cbiAqIEBwYXJhbSB2MiAybmQgYXJndW1lbnQgdG8ge0BsaW5rIFBpcGVUcmFuc2Zvcm0jdHJhbnNmb3JtfS5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cGlwZUJpbmQyKGluZGV4LCBzbG90T2Zmc2V0LCB2MSwgdjIpIHtcbiAgICBjb25zdCBhZGp1c3RlZEluZGV4ID0gaW5kZXggKyBIRUFERVJfT0ZGU0VUO1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBwaXBlSW5zdGFuY2UgPSBsb2FkKGxWaWV3LCBhZGp1c3RlZEluZGV4KTtcbiAgICByZXR1cm4gaXNQdXJlKGxWaWV3LCBhZGp1c3RlZEluZGV4KSA/XG4gICAgICAgIHB1cmVGdW5jdGlvbjJJbnRlcm5hbChsVmlldywgZ2V0QmluZGluZ1Jvb3QoKSwgc2xvdE9mZnNldCwgcGlwZUluc3RhbmNlLnRyYW5zZm9ybSwgdjEsIHYyLCBwaXBlSW5zdGFuY2UpIDpcbiAgICAgICAgcGlwZUluc3RhbmNlLnRyYW5zZm9ybSh2MSwgdjIpO1xufVxuLyoqXG4gKiBJbnZva2VzIGEgcGlwZSB3aXRoIDMgYXJndW1lbnRzLlxuICpcbiAqIFRoaXMgaW5zdHJ1Y3Rpb24gYWN0cyBhcyBhIGd1YXJkIHRvIHtAbGluayBQaXBlVHJhbnNmb3JtI3RyYW5zZm9ybX0gaW52b2tpbmdcbiAqIHRoZSBwaXBlIG9ubHkgd2hlbiBhbiBpbnB1dCB0byB0aGUgcGlwZSBjaGFuZ2VzLlxuICpcbiAqIEBwYXJhbSBpbmRleCBQaXBlIGluZGV4IHdoZXJlIHRoZSBwaXBlIHdhcyBzdG9yZWQgb24gY3JlYXRpb24uXG4gKiBAcGFyYW0gc2xvdE9mZnNldCB0aGUgb2Zmc2V0IGluIHRoZSByZXNlcnZlZCBzbG90IHNwYWNlXG4gKiBAcGFyYW0gdjEgMXN0IGFyZ3VtZW50IHRvIHtAbGluayBQaXBlVHJhbnNmb3JtI3RyYW5zZm9ybX0uXG4gKiBAcGFyYW0gdjIgMm5kIGFyZ3VtZW50IHRvIHtAbGluayBQaXBlVHJhbnNmb3JtI3RyYW5zZm9ybX0uXG4gKiBAcGFyYW0gdjMgNHJkIGFyZ3VtZW50IHRvIHtAbGluayBQaXBlVHJhbnNmb3JtI3RyYW5zZm9ybX0uXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXBpcGVCaW5kMyhpbmRleCwgc2xvdE9mZnNldCwgdjEsIHYyLCB2Mykge1xuICAgIGNvbnN0IGFkanVzdGVkSW5kZXggPSBpbmRleCArIEhFQURFUl9PRkZTRVQ7XG4gICAgY29uc3QgbFZpZXcgPSBnZXRMVmlldygpO1xuICAgIGNvbnN0IHBpcGVJbnN0YW5jZSA9IGxvYWQobFZpZXcsIGFkanVzdGVkSW5kZXgpO1xuICAgIHJldHVybiBpc1B1cmUobFZpZXcsIGFkanVzdGVkSW5kZXgpID9cbiAgICAgICAgcHVyZUZ1bmN0aW9uM0ludGVybmFsKGxWaWV3LCBnZXRCaW5kaW5nUm9vdCgpLCBzbG90T2Zmc2V0LCBwaXBlSW5zdGFuY2UudHJhbnNmb3JtLCB2MSwgdjIsIHYzLCBwaXBlSW5zdGFuY2UpIDpcbiAgICAgICAgcGlwZUluc3RhbmNlLnRyYW5zZm9ybSh2MSwgdjIsIHYzKTtcbn1cbi8qKlxuICogSW52b2tlcyBhIHBpcGUgd2l0aCA0IGFyZ3VtZW50cy5cbiAqXG4gKiBUaGlzIGluc3RydWN0aW9uIGFjdHMgYXMgYSBndWFyZCB0byB7QGxpbmsgUGlwZVRyYW5zZm9ybSN0cmFuc2Zvcm19IGludm9raW5nXG4gKiB0aGUgcGlwZSBvbmx5IHdoZW4gYW4gaW5wdXQgdG8gdGhlIHBpcGUgY2hhbmdlcy5cbiAqXG4gKiBAcGFyYW0gaW5kZXggUGlwZSBpbmRleCB3aGVyZSB0aGUgcGlwZSB3YXMgc3RvcmVkIG9uIGNyZWF0aW9uLlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBpbiB0aGUgcmVzZXJ2ZWQgc2xvdCBzcGFjZVxuICogQHBhcmFtIHYxIDFzdCBhcmd1bWVudCB0byB7QGxpbmsgUGlwZVRyYW5zZm9ybSN0cmFuc2Zvcm19LlxuICogQHBhcmFtIHYyIDJuZCBhcmd1bWVudCB0byB7QGxpbmsgUGlwZVRyYW5zZm9ybSN0cmFuc2Zvcm19LlxuICogQHBhcmFtIHYzIDNyZCBhcmd1bWVudCB0byB7QGxpbmsgUGlwZVRyYW5zZm9ybSN0cmFuc2Zvcm19LlxuICogQHBhcmFtIHY0IDR0aCBhcmd1bWVudCB0byB7QGxpbmsgUGlwZVRyYW5zZm9ybSN0cmFuc2Zvcm19LlxuICpcbiAqIEBjb2RlR2VuQXBpXG4gKi9cbmZ1bmN0aW9uIMm1ybVwaXBlQmluZDQoaW5kZXgsIHNsb3RPZmZzZXQsIHYxLCB2MiwgdjMsIHY0KSB7XG4gICAgY29uc3QgYWRqdXN0ZWRJbmRleCA9IGluZGV4ICsgSEVBREVSX09GRlNFVDtcbiAgICBjb25zdCBsVmlldyA9IGdldExWaWV3KCk7XG4gICAgY29uc3QgcGlwZUluc3RhbmNlID0gbG9hZChsVmlldywgYWRqdXN0ZWRJbmRleCk7XG4gICAgcmV0dXJuIGlzUHVyZShsVmlldywgYWRqdXN0ZWRJbmRleCkgPyBwdXJlRnVuY3Rpb240SW50ZXJuYWwobFZpZXcsIGdldEJpbmRpbmdSb290KCksIHNsb3RPZmZzZXQsIHBpcGVJbnN0YW5jZS50cmFuc2Zvcm0sIHYxLCB2MiwgdjMsIHY0LCBwaXBlSW5zdGFuY2UpIDpcbiAgICAgICAgcGlwZUluc3RhbmNlLnRyYW5zZm9ybSh2MSwgdjIsIHYzLCB2NCk7XG59XG4vKipcbiAqIEludm9rZXMgYSBwaXBlIHdpdGggdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50cy5cbiAqXG4gKiBUaGlzIGluc3RydWN0aW9uIGFjdHMgYXMgYSBndWFyZCB0byB7QGxpbmsgUGlwZVRyYW5zZm9ybSN0cmFuc2Zvcm19IGludm9raW5nXG4gKiB0aGUgcGlwZSBvbmx5IHdoZW4gYW4gaW5wdXQgdG8gdGhlIHBpcGUgY2hhbmdlcy5cbiAqXG4gKiBAcGFyYW0gaW5kZXggUGlwZSBpbmRleCB3aGVyZSB0aGUgcGlwZSB3YXMgc3RvcmVkIG9uIGNyZWF0aW9uLlxuICogQHBhcmFtIHNsb3RPZmZzZXQgdGhlIG9mZnNldCBpbiB0aGUgcmVzZXJ2ZWQgc2xvdCBzcGFjZVxuICogQHBhcmFtIHZhbHVlcyBBcnJheSBvZiBhcmd1bWVudHMgdG8gcGFzcyB0byB7QGxpbmsgUGlwZVRyYW5zZm9ybSN0cmFuc2Zvcm19IG1ldGhvZC5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cGlwZUJpbmRWKGluZGV4LCBzbG90T2Zmc2V0LCB2YWx1ZXMpIHtcbiAgICBjb25zdCBhZGp1c3RlZEluZGV4ID0gaW5kZXggKyBIRUFERVJfT0ZGU0VUO1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCBwaXBlSW5zdGFuY2UgPSBsb2FkKGxWaWV3LCBhZGp1c3RlZEluZGV4KTtcbiAgICByZXR1cm4gaXNQdXJlKGxWaWV3LCBhZGp1c3RlZEluZGV4KSA/XG4gICAgICAgIHB1cmVGdW5jdGlvblZJbnRlcm5hbChsVmlldywgZ2V0QmluZGluZ1Jvb3QoKSwgc2xvdE9mZnNldCwgcGlwZUluc3RhbmNlLnRyYW5zZm9ybSwgdmFsdWVzLCBwaXBlSW5zdGFuY2UpIDpcbiAgICAgICAgcGlwZUluc3RhbmNlLnRyYW5zZm9ybS5hcHBseShwaXBlSW5zdGFuY2UsIHZhbHVlcyk7XG59XG5mdW5jdGlvbiBpc1B1cmUobFZpZXcsIGluZGV4KSB7XG4gICAgcmV0dXJuIGxWaWV3W1RWSUVXXS5kYXRhW2luZGV4XS5wdXJlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNsYXNzIEV2ZW50RW1pdHRlcl8gZXh0ZW5kcyBTdWJqZWN0IHtcbiAgICBjb25zdHJ1Y3Rvcihpc0FzeW5jID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fX2lzQXN5bmMgPSBpc0FzeW5jO1xuICAgIH1cbiAgICBlbWl0KHZhbHVlKSB7XG4gICAgICAgIHN1cGVyLm5leHQodmFsdWUpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICBsZXQgbmV4dEZuID0gb2JzZXJ2ZXJPck5leHQ7XG4gICAgICAgIGxldCBlcnJvckZuID0gZXJyb3IgfHwgKCgpID0+IG51bGwpO1xuICAgICAgICBsZXQgY29tcGxldGVGbiA9IGNvbXBsZXRlO1xuICAgICAgICBpZiAob2JzZXJ2ZXJPck5leHQgJiYgdHlwZW9mIG9ic2VydmVyT3JOZXh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBvYnNlcnZlck9yTmV4dDtcbiAgICAgICAgICAgIG5leHRGbiA9IG9ic2VydmVyLm5leHQ/LmJpbmQob2JzZXJ2ZXIpO1xuICAgICAgICAgICAgZXJyb3JGbiA9IG9ic2VydmVyLmVycm9yPy5iaW5kKG9ic2VydmVyKTtcbiAgICAgICAgICAgIGNvbXBsZXRlRm4gPSBvYnNlcnZlci5jb21wbGV0ZT8uYmluZChvYnNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX19pc0FzeW5jKSB7XG4gICAgICAgICAgICBlcnJvckZuID0gX3dyYXBJblRpbWVvdXQoZXJyb3JGbik7XG4gICAgICAgICAgICBpZiAobmV4dEZuKSB7XG4gICAgICAgICAgICAgICAgbmV4dEZuID0gX3dyYXBJblRpbWVvdXQobmV4dEZuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb21wbGV0ZUZuKSB7XG4gICAgICAgICAgICAgICAgY29tcGxldGVGbiA9IF93cmFwSW5UaW1lb3V0KGNvbXBsZXRlRm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpbmsgPSBzdXBlci5zdWJzY3JpYmUoeyBuZXh0OiBuZXh0Rm4sIGVycm9yOiBlcnJvckZuLCBjb21wbGV0ZTogY29tcGxldGVGbiB9KTtcbiAgICAgICAgaWYgKG9ic2VydmVyT3JOZXh0IGluc3RhbmNlb2YgU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBvYnNlcnZlck9yTmV4dC5hZGQoc2luayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbms7XG4gICAgfVxufVxuZnVuY3Rpb24gX3dyYXBJblRpbWVvdXQoZm4pIHtcbiAgICByZXR1cm4gKHZhbHVlKSA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoZm4sIHVuZGVmaW5lZCwgdmFsdWUpO1xuICAgIH07XG59XG4vKipcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyXztcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5mdW5jdGlvbiBzeW1ib2xJdGVyYXRvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVzdWx0c1tnZXRTeW1ib2xJdGVyYXRvcigpXSgpO1xufVxuLyoqXG4gKiBBbiB1bm1vZGlmaWFibGUgbGlzdCBvZiBpdGVtcyB0aGF0IEFuZ3VsYXIga2VlcHMgdXAgdG8gZGF0ZSB3aGVuIHRoZSBzdGF0ZVxuICogb2YgdGhlIGFwcGxpY2F0aW9uIGNoYW5nZXMuXG4gKlxuICogVGhlIHR5cGUgb2Ygb2JqZWN0IHRoYXQge0BsaW5rIFZpZXdDaGlsZHJlbn0sIHtAbGluayBDb250ZW50Q2hpbGRyZW59LCBhbmQge0BsaW5rIFF1ZXJ5TGlzdH1cbiAqIHByb3ZpZGUuXG4gKlxuICogSW1wbGVtZW50cyBhbiBpdGVyYWJsZSBpbnRlcmZhY2UsIHRoZXJlZm9yZSBpdCBjYW4gYmUgdXNlZCBpbiBib3RoIEVTNlxuICogamF2YXNjcmlwdCBgZm9yICh2YXIgaSBvZiBpdGVtcylgIGxvb3BzIGFzIHdlbGwgYXMgaW4gQW5ndWxhciB0ZW1wbGF0ZXMgd2l0aFxuICogYCpuZ0Zvcj1cImxldCBpIG9mIG15TGlzdFwiYC5cbiAqXG4gKiBDaGFuZ2VzIGNhbiBiZSBvYnNlcnZlZCBieSBzdWJzY3JpYmluZyB0byB0aGUgY2hhbmdlcyBgT2JzZXJ2YWJsZWAuXG4gKlxuICogTk9URTogSW4gdGhlIGZ1dHVyZSB0aGlzIGNsYXNzIHdpbGwgaW1wbGVtZW50IGFuIGBPYnNlcnZhYmxlYCBpbnRlcmZhY2UuXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqICMjIyBFeGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBAQ29tcG9uZW50KHsuLi59KVxuICogY2xhc3MgQ29udGFpbmVyIHtcbiAqICAgQFZpZXdDaGlsZHJlbihJdGVtKSBpdGVtczpRdWVyeUxpc3Q8SXRlbT47XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIFF1ZXJ5TGlzdCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGVtaXREaXN0aW5jdENoYW5nZXNPbmx5IFdoZXRoZXIgYFF1ZXJ5TGlzdC5jaGFuZ2VzYCBzaG91bGQgZmlyZSBvbmx5IHdoZW4gYWN0dWFsIGNoYW5nZVxuICAgICAqICAgICBoYXMgb2NjdXJyZWQuIE9yIGlmIGl0IHNob3VsZCBmaXJlIHdoZW4gcXVlcnkgaXMgcmVjb21wdXRlZC4gKHJlY29tcHV0aW5nIGNvdWxkIHJlc29sdmUgaW5cbiAgICAgKiAgICAgdGhlIHNhbWUgcmVzdWx0KVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKF9lbWl0RGlzdGluY3RDaGFuZ2VzT25seSA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuX2VtaXREaXN0aW5jdENoYW5nZXNPbmx5ID0gX2VtaXREaXN0aW5jdENoYW5nZXNPbmx5O1xuICAgICAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl9jaGFuZ2VzRGV0ZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY2hhbmdlcyA9IG51bGw7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5maXJzdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5sYXN0ID0gdW5kZWZpbmVkO1xuICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCBiZSBkZWNsYXJlZCBvbiB0aGUgcHJvdG90eXBlLCBidXQgZG9pbmcgc28gdGhlcmUgd2lsbCBjYXVzZSB0aGUgY2xhc3NcbiAgICAgICAgLy8gZGVjbGFyYXRpb24gdG8gaGF2ZSBzaWRlLWVmZmVjdHMgYW5kIGJlY29tZSBub3QgdHJlZS1zaGFrYWJsZS4gRm9yIHRoaXMgcmVhc29uIHdlIGRvIGl0IGluXG4gICAgICAgIC8vIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAgICAgLy8gW2dldFN5bWJvbEl0ZXJhdG9yKCldKCk6IEl0ZXJhdG9yPFQ+IHsgLi4uIH1cbiAgICAgICAgY29uc3Qgc3ltYm9sID0gZ2V0U3ltYm9sSXRlcmF0b3IoKTtcbiAgICAgICAgY29uc3QgcHJvdG8gPSBRdWVyeUxpc3QucHJvdG90eXBlO1xuICAgICAgICBpZiAoIXByb3RvW3N5bWJvbF0pXG4gICAgICAgICAgICBwcm90b1tzeW1ib2xdID0gc3ltYm9sSXRlcmF0b3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYE9ic2VydmFibGVgIG9mIGBRdWVyeUxpc3RgIG5vdGlmeWluZyB0aGUgc3Vic2NyaWJlciBvZiBjaGFuZ2VzLlxuICAgICAqL1xuICAgIGdldCBjaGFuZ2VzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2hhbmdlcyB8fCAodGhpcy5fY2hhbmdlcyA9IG5ldyBFdmVudEVtaXR0ZXIoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFF1ZXJ5TGlzdCBlbnRyeSBhdCBgaW5kZXhgLlxuICAgICAqL1xuICAgIGdldChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0c1tpbmRleF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlZVxuICAgICAqIFtBcnJheS5tYXBdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L21hcClcbiAgICAgKi9cbiAgICBtYXAoZm4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdHMubWFwKGZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VlXG4gICAgICogW0FycmF5LmZpbHRlcl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvZmlsdGVyKVxuICAgICAqL1xuICAgIGZpbHRlcihmbikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0cy5maWx0ZXIoZm4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWVcbiAgICAgKiBbQXJyYXkuZmluZF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvZmluZClcbiAgICAgKi9cbiAgICBmaW5kKGZuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRzLmZpbmQoZm4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWVcbiAgICAgKiBbQXJyYXkucmVkdWNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9yZWR1Y2UpXG4gICAgICovXG4gICAgcmVkdWNlKGZuLCBpbml0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXN1bHRzLnJlZHVjZShmbiwgaW5pdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlZVxuICAgICAqIFtBcnJheS5mb3JFYWNoXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9BcnJheS9mb3JFYWNoKVxuICAgICAqL1xuICAgIGZvckVhY2goZm4pIHtcbiAgICAgICAgdGhpcy5fcmVzdWx0cy5mb3JFYWNoKGZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VlXG4gICAgICogW0FycmF5LnNvbWVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L3NvbWUpXG4gICAgICovXG4gICAgc29tZShmbikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0cy5zb21lKGZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhlIGludGVybmFsIHJlc3VsdHMgbGlzdCBhcyBhbiBBcnJheS5cbiAgICAgKi9cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzdWx0cy5zbGljZSgpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdHMudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc3RvcmVkIGRhdGEgb2YgdGhlIHF1ZXJ5IGxpc3QsIGFuZCByZXNldHMgdGhlIGBkaXJ0eWAgZmxhZyB0byBgZmFsc2VgLCBzbyB0aGF0XG4gICAgICogb24gY2hhbmdlIGRldGVjdGlvbiwgaXQgd2lsbCBub3Qgbm90aWZ5IG9mIGNoYW5nZXMgdG8gdGhlIHF1ZXJpZXMsIHVubGVzcyBhIG5ldyBjaGFuZ2VcbiAgICAgKiBvY2N1cnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVzdWx0c1RyZWUgVGhlIHF1ZXJ5IHJlc3VsdHMgdG8gc3RvcmVcbiAgICAgKiBAcGFyYW0gaWRlbnRpdHlBY2Nlc3NvciBPcHRpb25hbCBmdW5jdGlvbiBmb3IgZXh0cmFjdGluZyBzdGFibGUgb2JqZWN0IGlkZW50aXR5IGZyb20gYSB2YWx1ZVxuICAgICAqICAgIGluIHRoZSBhcnJheS4gVGhpcyBmdW5jdGlvbiBpcyBleGVjdXRlZCBmb3IgZWFjaCBlbGVtZW50IG9mIHRoZSBxdWVyeSByZXN1bHQgbGlzdCB3aGlsZVxuICAgICAqICAgIGNvbXBhcmluZyBjdXJyZW50IHF1ZXJ5IGxpc3Qgd2l0aCB0aGUgbmV3IG9uZSAocHJvdmlkZWQgYXMgYSBmaXJzdCBhcmd1bWVudCBvZiB0aGUgYHJlc2V0YFxuICAgICAqICAgIGZ1bmN0aW9uKSB0byBkZXRlY3QgaWYgdGhlIGxpc3RzIGFyZSBkaWZmZXJlbnQuIElmIHRoZSBmdW5jdGlvbiBpcyBub3QgcHJvdmlkZWQsIGVsZW1lbnRzXG4gICAgICogICAgYXJlIGNvbXBhcmVkIGFzIGlzICh3aXRob3V0IGFueSBwcmUtcHJvY2Vzc2luZykuXG4gICAgICovXG4gICAgcmVzZXQocmVzdWx0c1RyZWUsIGlkZW50aXR5QWNjZXNzb3IpIHtcbiAgICAgICAgLy8gQ2FzdCB0byBgUXVlcnlMaXN0SW50ZXJuYWxgIHNvIHRoYXQgd2UgY2FuIG11dGF0ZSBmaWVsZHMgd2hpY2ggYXJlIHJlYWRvbmx5IGZvciB0aGUgdXNhZ2Ugb2ZcbiAgICAgICAgLy8gUXVlcnlMaXN0IChidXQgbm90IGZvciBRdWVyeUxpc3QgaXRzZWxmLilcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuZGlydHkgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgbmV3UmVzdWx0RmxhdCA9IGZsYXR0ZW4ocmVzdWx0c1RyZWUpO1xuICAgICAgICBpZiAodGhpcy5fY2hhbmdlc0RldGVjdGVkID0gIWFycmF5RXF1YWxzKHNlbGYuX3Jlc3VsdHMsIG5ld1Jlc3VsdEZsYXQsIGlkZW50aXR5QWNjZXNzb3IpKSB7XG4gICAgICAgICAgICBzZWxmLl9yZXN1bHRzID0gbmV3UmVzdWx0RmxhdDtcbiAgICAgICAgICAgIHNlbGYubGVuZ3RoID0gbmV3UmVzdWx0RmxhdC5sZW5ndGg7XG4gICAgICAgICAgICBzZWxmLmxhc3QgPSBuZXdSZXN1bHRGbGF0W3RoaXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBzZWxmLmZpcnN0ID0gbmV3UmVzdWx0RmxhdFswXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyBhIGNoYW5nZSBldmVudCBieSBlbWl0dGluZyBvbiB0aGUgYGNoYW5nZXNgIHtAbGluayBFdmVudEVtaXR0ZXJ9LlxuICAgICAqL1xuICAgIG5vdGlmeU9uQ2hhbmdlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NoYW5nZXMgJiYgKHRoaXMuX2NoYW5nZXNEZXRlY3RlZCB8fCAhdGhpcy5fZW1pdERpc3RpbmN0Q2hhbmdlc09ubHkpKVxuICAgICAgICAgICAgdGhpcy5fY2hhbmdlcy5lbWl0KHRoaXMpO1xuICAgIH1cbiAgICAvKiogaW50ZXJuYWwgKi9cbiAgICBzZXREaXJ0eSgpIHtcbiAgICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gICAgfVxuICAgIC8qKiBpbnRlcm5hbCAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcy5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmNoYW5nZXMudW5zdWJzY3JpYmUoKTtcbiAgICB9XG59XG5TeW1ib2wuaXRlcmF0b3I7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGFuIGVtYmVkZGVkIHRlbXBsYXRlIHRoYXQgY2FuIGJlIHVzZWQgdG8gaW5zdGFudGlhdGUgZW1iZWRkZWQgdmlld3MuXG4gKiBUbyBpbnN0YW50aWF0ZSBlbWJlZGRlZCB2aWV3cyBiYXNlZCBvbiBhIHRlbXBsYXRlLCB1c2UgdGhlIGBWaWV3Q29udGFpbmVyUmVmYFxuICogbWV0aG9kIGBjcmVhdGVFbWJlZGRlZFZpZXcoKWAuXG4gKlxuICogQWNjZXNzIGEgYFRlbXBsYXRlUmVmYCBpbnN0YW5jZSBieSBwbGFjaW5nIGEgZGlyZWN0aXZlIG9uIGFuIGA8bmctdGVtcGxhdGU+YFxuICogZWxlbWVudCAob3IgZGlyZWN0aXZlIHByZWZpeGVkIHdpdGggYCpgKS4gVGhlIGBUZW1wbGF0ZVJlZmAgZm9yIHRoZSBlbWJlZGRlZCB2aWV3XG4gKiBpcyBpbmplY3RlZCBpbnRvIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgZGlyZWN0aXZlLFxuICogdXNpbmcgdGhlIGBUZW1wbGF0ZVJlZmAgdG9rZW4uXG4gKlxuICogWW91IGNhbiBhbHNvIHVzZSBhIGBRdWVyeWAgdG8gZmluZCBhIGBUZW1wbGF0ZVJlZmAgYXNzb2NpYXRlZCB3aXRoXG4gKiBhIGNvbXBvbmVudCBvciBhIGRpcmVjdGl2ZS5cbiAqXG4gKiBAc2VlIGBWaWV3Q29udGFpbmVyUmVmYFxuICogQHNlZSBbTmF2aWdhdGUgdGhlIENvbXBvbmVudCBUcmVlIHdpdGggREldKGd1aWRlL2RlcGVuZGVuY3ktaW5qZWN0aW9uLW5hdnRyZWUpXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBUZW1wbGF0ZVJlZiB7XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICogQG5vY29sbGFwc2VcbiAqL1xuVGVtcGxhdGVSZWYuX19OR19FTEVNRU5UX0lEX18gPSBpbmplY3RUZW1wbGF0ZVJlZjtcbmNvbnN0IFZpZXdFbmdpbmVUZW1wbGF0ZVJlZiA9IFRlbXBsYXRlUmVmO1xuLy8gVE9ETyhhbHhodWIpOiBjb21iaW5lIGludGVyZmFjZSBhbmQgaW1wbGVtZW50YXRpb24uIEN1cnJlbnRseSB0aGlzIGlzIGNoYWxsZW5naW5nIHNpbmNlIHNvbWV0aGluZ1xuLy8gaW4gZzMgZGVwZW5kcyBvbiB0aGVtIGJlaW5nIHNlcGFyYXRlLlxuY29uc3QgUjNUZW1wbGF0ZVJlZiA9IGNsYXNzIFRlbXBsYXRlUmVmIGV4dGVuZHMgVmlld0VuZ2luZVRlbXBsYXRlUmVmIHtcbiAgICBjb25zdHJ1Y3RvcihfZGVjbGFyYXRpb25MVmlldywgX2RlY2xhcmF0aW9uVENvbnRhaW5lciwgZWxlbWVudFJlZikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9kZWNsYXJhdGlvbkxWaWV3ID0gX2RlY2xhcmF0aW9uTFZpZXc7XG4gICAgICAgIHRoaXMuX2RlY2xhcmF0aW9uVENvbnRhaW5lciA9IF9kZWNsYXJhdGlvblRDb250YWluZXI7XG4gICAgICAgIHRoaXMuZWxlbWVudFJlZiA9IGVsZW1lbnRSZWY7XG4gICAgfVxuICAgIGNyZWF0ZUVtYmVkZGVkVmlldyhjb250ZXh0KSB7XG4gICAgICAgIGNvbnN0IGVtYmVkZGVkVFZpZXcgPSB0aGlzLl9kZWNsYXJhdGlvblRDb250YWluZXIudFZpZXdzO1xuICAgICAgICBjb25zdCBlbWJlZGRlZExWaWV3ID0gY3JlYXRlTFZpZXcodGhpcy5fZGVjbGFyYXRpb25MVmlldywgZW1iZWRkZWRUVmlldywgY29udGV4dCwgMTYgLyogQ2hlY2tBbHdheXMgKi8sIG51bGwsIGVtYmVkZGVkVFZpZXcuZGVjbFROb2RlLCBudWxsLCBudWxsLCBudWxsLCBudWxsKTtcbiAgICAgICAgY29uc3QgZGVjbGFyYXRpb25MQ29udGFpbmVyID0gdGhpcy5fZGVjbGFyYXRpb25MVmlld1t0aGlzLl9kZWNsYXJhdGlvblRDb250YWluZXIuaW5kZXhdO1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0TENvbnRhaW5lcihkZWNsYXJhdGlvbkxDb250YWluZXIpO1xuICAgICAgICBlbWJlZGRlZExWaWV3W0RFQ0xBUkFUSU9OX0xDT05UQUlORVJdID0gZGVjbGFyYXRpb25MQ29udGFpbmVyO1xuICAgICAgICBjb25zdCBkZWNsYXJhdGlvblZpZXdMUXVlcmllcyA9IHRoaXMuX2RlY2xhcmF0aW9uTFZpZXdbUVVFUklFU107XG4gICAgICAgIGlmIChkZWNsYXJhdGlvblZpZXdMUXVlcmllcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZW1iZWRkZWRMVmlld1tRVUVSSUVTXSA9IGRlY2xhcmF0aW9uVmlld0xRdWVyaWVzLmNyZWF0ZUVtYmVkZGVkVmlldyhlbWJlZGRlZFRWaWV3KTtcbiAgICAgICAgfVxuICAgICAgICByZW5kZXJWaWV3KGVtYmVkZGVkVFZpZXcsIGVtYmVkZGVkTFZpZXcsIGNvbnRleHQpO1xuICAgICAgICByZXR1cm4gbmV3IFZpZXdSZWYkMShlbWJlZGRlZExWaWV3KTtcbiAgICB9XG59O1xuLyoqXG4gKiBDcmVhdGVzIGEgVGVtcGxhdGVSZWYgZ2l2ZW4gYSBub2RlLlxuICpcbiAqIEByZXR1cm5zIFRoZSBUZW1wbGF0ZVJlZiBpbnN0YW5jZSB0byB1c2VcbiAqL1xuZnVuY3Rpb24gaW5qZWN0VGVtcGxhdGVSZWYoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZVRlbXBsYXRlUmVmKGdldEN1cnJlbnRUTm9kZSgpLCBnZXRMVmlldygpKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIFRlbXBsYXRlUmVmIGFuZCBzdG9yZXMgaXQgb24gdGhlIGluamVjdG9yLlxuICpcbiAqIEBwYXJhbSBob3N0VE5vZGUgVGhlIG5vZGUgb24gd2hpY2ggYSBUZW1wbGF0ZVJlZiBpcyByZXF1ZXN0ZWRcbiAqIEBwYXJhbSBob3N0TFZpZXcgVGhlIGBMVmlld2AgdG8gd2hpY2ggdGhlIG5vZGUgYmVsb25nc1xuICogQHJldHVybnMgVGhlIFRlbXBsYXRlUmVmIGluc3RhbmNlIG9yIG51bGwgaWYgd2UgY2FuJ3QgY3JlYXRlIGEgVGVtcGxhdGVSZWYgb24gYSBnaXZlbiBub2RlIHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlVGVtcGxhdGVSZWYoaG9zdFROb2RlLCBob3N0TFZpZXcpIHtcbiAgICBpZiAoaG9zdFROb2RlLnR5cGUgJiA0IC8qIENvbnRhaW5lciAqLykge1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChob3N0VE5vZGUudFZpZXdzLCAnVFZpZXcgbXVzdCBiZSBhbGxvY2F0ZWQnKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSM1RlbXBsYXRlUmVmKGhvc3RMVmlldywgaG9zdFROb2RlLCBjcmVhdGVFbGVtZW50UmVmKGhvc3RUTm9kZSwgaG9zdExWaWV3KSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNvbnRhaW5lciB3aGVyZSBvbmUgb3IgbW9yZSB2aWV3cyBjYW4gYmUgYXR0YWNoZWQgdG8gYSBjb21wb25lbnQuXG4gKlxuICogQ2FuIGNvbnRhaW4gKmhvc3Qgdmlld3MqIChjcmVhdGVkIGJ5IGluc3RhbnRpYXRpbmcgYVxuICogY29tcG9uZW50IHdpdGggdGhlIGBjcmVhdGVDb21wb25lbnQoKWAgbWV0aG9kKSwgYW5kICplbWJlZGRlZCB2aWV3cypcbiAqIChjcmVhdGVkIGJ5IGluc3RhbnRpYXRpbmcgYSBgVGVtcGxhdGVSZWZgIHdpdGggdGhlIGBjcmVhdGVFbWJlZGRlZFZpZXcoKWAgbWV0aG9kKS5cbiAqXG4gKiBBIHZpZXcgY29udGFpbmVyIGluc3RhbmNlIGNhbiBjb250YWluIG90aGVyIHZpZXcgY29udGFpbmVycyxcbiAqIGNyZWF0aW5nIGEgW3ZpZXcgaGllcmFyY2h5XShndWlkZS9nbG9zc2FyeSN2aWV3LXRyZWUpLlxuICpcbiAqIEBzZWUgYENvbXBvbmVudFJlZmBcbiAqIEBzZWUgYEVtYmVkZGVkVmlld1JlZmBcbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIFZpZXdDb250YWluZXJSZWYge1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEBub2NvbGxhcHNlXG4gKi9cblZpZXdDb250YWluZXJSZWYuX19OR19FTEVNRU5UX0lEX18gPSBpbmplY3RWaWV3Q29udGFpbmVyUmVmO1xuLyoqXG4gKiBDcmVhdGVzIGEgVmlld0NvbnRhaW5lclJlZiBhbmQgc3RvcmVzIGl0IG9uIHRoZSBpbmplY3Rvci4gT3IsIGlmIHRoZSBWaWV3Q29udGFpbmVyUmVmXG4gKiBhbHJlYWR5IGV4aXN0cywgcmV0cmlldmVzIHRoZSBleGlzdGluZyBWaWV3Q29udGFpbmVyUmVmLlxuICpcbiAqIEByZXR1cm5zIFRoZSBWaWV3Q29udGFpbmVyUmVmIGluc3RhbmNlIHRvIHVzZVxuICovXG5mdW5jdGlvbiBpbmplY3RWaWV3Q29udGFpbmVyUmVmKCkge1xuICAgIGNvbnN0IHByZXZpb3VzVE5vZGUgPSBnZXRDdXJyZW50VE5vZGUoKTtcbiAgICByZXR1cm4gY3JlYXRlQ29udGFpbmVyUmVmKHByZXZpb3VzVE5vZGUsIGdldExWaWV3KCkpO1xufVxuY29uc3QgVkVfVmlld0NvbnRhaW5lclJlZiA9IFZpZXdDb250YWluZXJSZWY7XG4vLyBUT0RPKGFseGh1Yik6IGNsZWFuaW5nIHVwIHRoaXMgaW5kaXJlY3Rpb24gdHJpZ2dlcnMgYSBzdWJ0bGUgYnVnIGluIENsb3N1cmUgaW4gZzMuIE9uY2UgdGhlIGZpeFxuLy8gZm9yIHRoYXQgbGFuZHMsIHRoaXMgY2FuIGJlIGNsZWFuZWQgdXAuXG5jb25zdCBSM1ZpZXdDb250YWluZXJSZWYgPSBjbGFzcyBWaWV3Q29udGFpbmVyUmVmIGV4dGVuZHMgVkVfVmlld0NvbnRhaW5lclJlZiB7XG4gICAgY29uc3RydWN0b3IoX2xDb250YWluZXIsIF9ob3N0VE5vZGUsIF9ob3N0TFZpZXcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fbENvbnRhaW5lciA9IF9sQ29udGFpbmVyO1xuICAgICAgICB0aGlzLl9ob3N0VE5vZGUgPSBfaG9zdFROb2RlO1xuICAgICAgICB0aGlzLl9ob3N0TFZpZXcgPSBfaG9zdExWaWV3O1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRSZWYodGhpcy5faG9zdFROb2RlLCB0aGlzLl9ob3N0TFZpZXcpO1xuICAgIH1cbiAgICBnZXQgaW5qZWN0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZUluamVjdG9yKHRoaXMuX2hvc3RUTm9kZSwgdGhpcy5faG9zdExWaWV3KTtcbiAgICB9XG4gICAgLyoqIEBkZXByZWNhdGVkIE5vIHJlcGxhY2VtZW50ICovXG4gICAgZ2V0IHBhcmVudEluamVjdG9yKCkge1xuICAgICAgICBjb25zdCBwYXJlbnRMb2NhdGlvbiA9IGdldFBhcmVudEluamVjdG9yTG9jYXRpb24odGhpcy5faG9zdFROb2RlLCB0aGlzLl9ob3N0TFZpZXcpO1xuICAgICAgICBpZiAoaGFzUGFyZW50SW5qZWN0b3IocGFyZW50TG9jYXRpb24pKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRWaWV3ID0gZ2V0UGFyZW50SW5qZWN0b3JWaWV3KHBhcmVudExvY2F0aW9uLCB0aGlzLl9ob3N0TFZpZXcpO1xuICAgICAgICAgICAgY29uc3QgaW5qZWN0b3JJbmRleCA9IGdldFBhcmVudEluamVjdG9ySW5kZXgocGFyZW50TG9jYXRpb24pO1xuICAgICAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydE5vZGVJbmplY3RvcihwYXJlbnRWaWV3LCBpbmplY3RvckluZGV4KTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFROb2RlID0gcGFyZW50Vmlld1tUVklFV10uZGF0YVtpbmplY3RvckluZGV4ICsgOCAvKiBUTk9ERSAqL107XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vZGVJbmplY3RvcihwYXJlbnRUTm9kZSwgcGFyZW50Vmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vZGVJbmplY3RvcihudWxsLCB0aGlzLl9ob3N0TFZpZXcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB3aGlsZSAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZSh0aGlzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldChpbmRleCkge1xuICAgICAgICBjb25zdCB2aWV3UmVmcyA9IGdldFZpZXdSZWZzKHRoaXMuX2xDb250YWluZXIpO1xuICAgICAgICByZXR1cm4gdmlld1JlZnMgIT09IG51bGwgJiYgdmlld1JlZnNbaW5kZXhdIHx8IG51bGw7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sQ29udGFpbmVyLmxlbmd0aCAtIENPTlRBSU5FUl9IRUFERVJfT0ZGU0VUO1xuICAgIH1cbiAgICBjcmVhdGVFbWJlZGRlZFZpZXcodGVtcGxhdGVSZWYsIGNvbnRleHQsIGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHZpZXdSZWYgPSB0ZW1wbGF0ZVJlZi5jcmVhdGVFbWJlZGRlZFZpZXcoY29udGV4dCB8fCB7fSk7XG4gICAgICAgIHRoaXMuaW5zZXJ0KHZpZXdSZWYsIGluZGV4KTtcbiAgICAgICAgcmV0dXJuIHZpZXdSZWY7XG4gICAgfVxuICAgIGNyZWF0ZUNvbXBvbmVudChjb21wb25lbnRGYWN0b3J5T3JUeXBlLCBpbmRleE9yT3B0aW9ucywgaW5qZWN0b3IsIHByb2plY3RhYmxlTm9kZXMsIG5nTW9kdWxlUmVmKSB7XG4gICAgICAgIGNvbnN0IGlzQ29tcG9uZW50RmFjdG9yeSA9IGNvbXBvbmVudEZhY3RvcnlPclR5cGUgJiYgIWlzVHlwZShjb21wb25lbnRGYWN0b3J5T3JUeXBlKTtcbiAgICAgICAgbGV0IGluZGV4O1xuICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHN1cHBvcnRzIDIgc2lnbmF0dXJlcyBhbmQgd2UgbmVlZCB0byBoYW5kbGUgb3B0aW9ucyBjb3JyZWN0bHkgZm9yIGJvdGg6XG4gICAgICAgIC8vICAgMS4gV2hlbiBmaXJzdCBhcmd1bWVudCBpcyBhIENvbXBvbmVudCB0eXBlLiBUaGlzIHNpZ25hdHVyZSBhbHNvIHJlcXVpcmVzIGV4dHJhXG4gICAgICAgIC8vICAgICAgb3B0aW9ucyB0byBiZSBwcm92aWRlZCBhcyBhcyBvYmplY3QgKG1vcmUgZXJnb25vbWljIG9wdGlvbikuXG4gICAgICAgIC8vICAgMi4gRmlyc3QgYXJndW1lbnQgaXMgYSBDb21wb25lbnQgZmFjdG9yeS4gSW4gdGhpcyBjYXNlIGV4dHJhIG9wdGlvbnMgYXJlIHJlcHJlc2VudGVkIGFzXG4gICAgICAgIC8vICAgICAgcG9zaXRpb25hbCBhcmd1bWVudHMuIFRoaXMgc2lnbmF0dXJlIGlzIGxlc3MgZXJnb25vbWljIGFuZCB3aWxsIGJlIGRlcHJlY2F0ZWQuXG4gICAgICAgIGlmIChpc0NvbXBvbmVudEZhY3RvcnkpIHtcbiAgICAgICAgICAgIGlmIChuZ0Rldk1vZGUpIHtcbiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbCh0eXBlb2YgaW5kZXhPck9wdGlvbnMgIT09ICdvYmplY3QnLCB0cnVlLCAnSXQgbG9va3MgbGlrZSBDb21wb25lbnQgZmFjdG9yeSB3YXMgcHJvdmlkZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50ICcgK1xuICAgICAgICAgICAgICAgICAgICAnYW5kIGFuIG9wdGlvbnMgb2JqZWN0IGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuIFRoaXMgY29tYmluYXRpb24gb2YgYXJndW1lbnRzICcgK1xuICAgICAgICAgICAgICAgICAgICAnaXMgaW5jb21wYXRpYmxlLiBZb3UgY2FuIGVpdGhlciBjaGFuZ2UgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHByb3ZpZGUgQ29tcG9uZW50ICcgK1xuICAgICAgICAgICAgICAgICAgICAndHlwZSBvciBjaGFuZ2UgdGhlIHNlY29uZCBhcmd1bWVudCB0byBiZSBhIG51bWJlciAocmVwcmVzZW50aW5nIGFuIGluZGV4IGF0ICcgK1xuICAgICAgICAgICAgICAgICAgICAnd2hpY2ggdG8gaW5zZXJ0IHRoZSBuZXcgY29tcG9uZW50XFwncyBob3N0IHZpZXcgaW50byB0aGlzIGNvbnRhaW5lciknKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGV4ID0gaW5kZXhPck9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0RGVmaW5lZChnZXRDb21wb25lbnREZWYoY29tcG9uZW50RmFjdG9yeU9yVHlwZSksIGBQcm92aWRlZCBDb21wb25lbnQgY2xhc3MgZG9lc24ndCBjb250YWluIENvbXBvbmVudCBkZWZpbml0aW9uLiBgICtcbiAgICAgICAgICAgICAgICAgICAgYFBsZWFzZSBjaGVjayB3aGV0aGVyIHByb3ZpZGVkIGNsYXNzIGhhcyBAQ29tcG9uZW50IGRlY29yYXRvci5gKTtcbiAgICAgICAgICAgICAgICBhc3NlcnRFcXVhbCh0eXBlb2YgaW5kZXhPck9wdGlvbnMgIT09ICdudW1iZXInLCB0cnVlLCAnSXQgbG9va3MgbGlrZSBDb21wb25lbnQgdHlwZSB3YXMgcHJvdmlkZWQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50ICcgK1xuICAgICAgICAgICAgICAgICAgICAnYW5kIGEgbnVtYmVyIChyZXByZXNlbnRpbmcgYW4gaW5kZXggYXQgd2hpY2ggdG8gaW5zZXJ0IHRoZSBuZXcgY29tcG9uZW50XFwncyAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2hvc3QgdmlldyBpbnRvIHRoaXMgY29udGFpbmVyIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQuIFRoaXMgY29tYmluYXRpb24gb2YgYXJndW1lbnRzICcgK1xuICAgICAgICAgICAgICAgICAgICAnaXMgaW5jb21wYXRpYmxlLiBQbGVhc2UgdXNlIGFuIG9iamVjdCBhcyB0aGUgc2Vjb25kIGFyZ3VtZW50IGluc3RlYWQuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gKGluZGV4T3JPcHRpb25zIHx8IHt9KTtcbiAgICAgICAgICAgIGluZGV4ID0gb3B0aW9ucy5pbmRleDtcbiAgICAgICAgICAgIGluamVjdG9yID0gb3B0aW9ucy5pbmplY3RvcjtcbiAgICAgICAgICAgIHByb2plY3RhYmxlTm9kZXMgPSBvcHRpb25zLnByb2plY3RhYmxlTm9kZXM7XG4gICAgICAgICAgICBuZ01vZHVsZVJlZiA9IG9wdGlvbnMubmdNb2R1bGVSZWY7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcG9uZW50RmFjdG9yeSA9IGlzQ29tcG9uZW50RmFjdG9yeSA/XG4gICAgICAgICAgICBjb21wb25lbnRGYWN0b3J5T3JUeXBlIDpcbiAgICAgICAgICAgIG5ldyBDb21wb25lbnRGYWN0b3J5KGdldENvbXBvbmVudERlZihjb21wb25lbnRGYWN0b3J5T3JUeXBlKSk7XG4gICAgICAgIGNvbnN0IGNvbnRleHRJbmplY3RvciA9IGluamVjdG9yIHx8IHRoaXMucGFyZW50SW5qZWN0b3I7XG4gICAgICAgIC8vIElmIGFuIGBOZ01vZHVsZVJlZmAgaXMgbm90IHByb3ZpZGVkIGV4cGxpY2l0bHksIHRyeSByZXRyaWV2aW5nIGl0IGZyb20gdGhlIERJIHRyZWUuXG4gICAgICAgIGlmICghbmdNb2R1bGVSZWYgJiYgY29tcG9uZW50RmFjdG9yeS5uZ01vZHVsZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIGBDb21wb25lbnRGYWN0b3J5YCBjYXNlLCBlbnRlcmluZyB0aGlzIGxvZ2ljIGlzIHZlcnkgdW5saWtlbHksIHNpbmNlIHdlIGV4cGVjdCB0aGF0XG4gICAgICAgICAgICAvLyBhbiBpbnN0YW5jZSBvZiBhIGBDb21wb25lbnRGYWN0b3J5YCwgcmVzb2x2ZWQgdmlhIGBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXJgIHdvdWxkIGhhdmUgYW5cbiAgICAgICAgICAgIC8vIGBuZ01vZHVsZWAgZmllbGQuIFRoaXMgaXMgcG9zc2libGUgaW4gc29tZSB0ZXN0IHNjZW5hcmlvcyBhbmQgcG90ZW50aWFsbHkgaW4gc29tZSBKSVQtYmFzZWRcbiAgICAgICAgICAgIC8vIHVzZS1jYXNlcy4gRm9yIHRoZSBgQ29tcG9uZW50RmFjdG9yeWAgY2FzZSB3ZSBwcmVzZXJ2ZSBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBhbmQgdHJ5XG4gICAgICAgICAgICAvLyB1c2luZyBhIHByb3ZpZGVkIGluamVjdG9yIGZpcnN0LCB0aGVuIGZhbGwgYmFjayB0byB0aGUgcGFyZW50IGluamVjdG9yIG9mIHRoaXNcbiAgICAgICAgICAgIC8vIGBWaWV3Q29udGFpbmVyUmVmYCBpbnN0YW5jZS5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBGb3IgdGhlIGZhY3RvcnktbGVzcyBjYXNlLCBpdCdzIGNyaXRpY2FsIHRvIGVzdGFibGlzaCBhIGNvbm5lY3Rpb24gd2l0aCB0aGUgbW9kdWxlXG4gICAgICAgICAgICAvLyBpbmplY3RvciB0cmVlIChieSByZXRyaWV2aW5nIGFuIGluc3RhbmNlIG9mIGFuIGBOZ01vZHVsZVJlZmAgYW5kIGFjY2Vzc2luZyBpdHMgaW5qZWN0b3IpLFxuICAgICAgICAgICAgLy8gc28gdGhhdCBhIGNvbXBvbmVudCBjYW4gdXNlIERJIHRva2VucyBwcm92aWRlZCBpbiBNZ01vZHVsZXMuIEZvciB0aGlzIHJlYXNvbiwgd2UgY2FuIG5vdFxuICAgICAgICAgICAgLy8gcmVseSBvbiB0aGUgcHJvdmlkZWQgaW5qZWN0b3IsIHNpbmNlIGl0IG1pZ2h0IGJlIGRldGFjaGVkIGZyb20gdGhlIERJIHRyZWUgKGZvciBleGFtcGxlLCBpZlxuICAgICAgICAgICAgLy8gaXQgd2FzIGNyZWF0ZWQgdmlhIGBJbmplY3Rvci5jcmVhdGVgIHdpdGhvdXQgc3BlY2lmeWluZyBhIHBhcmVudCBpbmplY3Rvciwgb3IgaWYgYW5cbiAgICAgICAgICAgIC8vIGluamVjdG9yIGlzIHJldHJpZXZlZCBmcm9tIGFuIGBOZ01vZHVsZVJlZmAgY3JlYXRlZCB2aWEgYGNyZWF0ZU5nTW9kdWxlUmVmYCB1c2luZyBhblxuICAgICAgICAgICAgLy8gTmdNb2R1bGUgb3V0c2lkZSBvZiBhIG1vZHVsZSB0cmVlKS4gSW5zdGVhZCwgd2UgYWx3YXlzIHVzZSBgVmlld0NvbnRhaW5lclJlZmAncyBwYXJlbnRcbiAgICAgICAgICAgIC8vIGluamVjdG9yLCB3aGljaCBpcyBub3JtYWxseSBjb25uZWN0ZWQgdG8gdGhlIERJIHRyZWUsIHdoaWNoIGluY2x1ZGVzIG1vZHVsZSBpbmplY3RvclxuICAgICAgICAgICAgLy8gc3VidHJlZS5cbiAgICAgICAgICAgIGNvbnN0IF9pbmplY3RvciA9IGlzQ29tcG9uZW50RmFjdG9yeSA/IGNvbnRleHRJbmplY3RvciA6IHRoaXMucGFyZW50SW5qZWN0b3I7XG4gICAgICAgICAgICAvLyBETyBOT1QgUkVGQUNUT1IuIFRoZSBjb2RlIGhlcmUgdXNlZCB0byBoYXZlIGEgYGluamVjdG9yLmdldChOZ01vZHVsZVJlZiwgbnVsbCkgfHxcbiAgICAgICAgICAgIC8vIHVuZGVmaW5lZGAgZXhwcmVzc2lvbiB3aGljaCBzZWVtcyB0byBjYXVzZSBpbnRlcm5hbCBnb29nbGUgYXBwcyB0byBmYWlsLiBUaGlzIGlzIGRvY3VtZW50ZWRcbiAgICAgICAgICAgIC8vIGluIHRoZSBmb2xsb3dpbmcgaW50ZXJuYWwgYnVnIGlzc3VlOiBnby9iLzE0Mjk2NzgwMlxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gX2luamVjdG9yLmdldChOZ01vZHVsZVJlZiQxLCBudWxsKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBuZ01vZHVsZVJlZiA9IHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb21wb25lbnRSZWYgPSBjb21wb25lbnRGYWN0b3J5LmNyZWF0ZShjb250ZXh0SW5qZWN0b3IsIHByb2plY3RhYmxlTm9kZXMsIHVuZGVmaW5lZCwgbmdNb2R1bGVSZWYpO1xuICAgICAgICB0aGlzLmluc2VydChjb21wb25lbnRSZWYuaG9zdFZpZXcsIGluZGV4KTtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudFJlZjtcbiAgICB9XG4gICAgaW5zZXJ0KHZpZXdSZWYsIGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGxWaWV3ID0gdmlld1JlZi5fbFZpZXc7XG4gICAgICAgIGNvbnN0IHRWaWV3ID0gbFZpZXdbVFZJRVddO1xuICAgICAgICBpZiAobmdEZXZNb2RlICYmIHZpZXdSZWYuZGVzdHJveWVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBpbnNlcnQgYSBkZXN0cm95ZWQgVmlldyBpbiBhIFZpZXdDb250YWluZXIhJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZpZXdBdHRhY2hlZFRvQ29udGFpbmVyKGxWaWV3KSkge1xuICAgICAgICAgICAgLy8gSWYgdmlldyBpcyBhbHJlYWR5IGF0dGFjaGVkLCBkZXRhY2ggaXQgZmlyc3Qgc28gd2UgY2xlYW4gdXAgcmVmZXJlbmNlcyBhcHByb3ByaWF0ZWx5LlxuICAgICAgICAgICAgY29uc3QgcHJldklkeCA9IHRoaXMuaW5kZXhPZih2aWV3UmVmKTtcbiAgICAgICAgICAgIC8vIEEgdmlldyBtaWdodCBiZSBhdHRhY2hlZCBlaXRoZXIgdG8gdGhpcyBvciBhIGRpZmZlcmVudCBjb250YWluZXIuIFRoZSBgcHJldklkeGAgZm9yXG4gICAgICAgICAgICAvLyB0aG9zZSBjYXNlcyB3aWxsIGJlOlxuICAgICAgICAgICAgLy8gZXF1YWwgdG8gLTEgZm9yIHZpZXdzIGF0dGFjaGVkIHRvIHRoaXMgVmlld0NvbnRhaW5lclJlZlxuICAgICAgICAgICAgLy8gPj0gMCBmb3Igdmlld3MgYXR0YWNoZWQgdG8gYSBkaWZmZXJlbnQgVmlld0NvbnRhaW5lclJlZlxuICAgICAgICAgICAgaWYgKHByZXZJZHggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhY2gocHJldklkeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2TENvbnRhaW5lciA9IGxWaWV3W1BBUkVOVF07XG4gICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydEVxdWFsKGlzTENvbnRhaW5lcihwcmV2TENvbnRhaW5lciksIHRydWUsICdBbiBhdHRhY2hlZCB2aWV3IHNob3VsZCBoYXZlIGl0cyBQQVJFTlQgcG9pbnQgdG8gYSBjb250YWluZXIuJyk7XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byByZS1jcmVhdGUgYSBSM1ZpZXdDb250YWluZXJSZWYgaW5zdGFuY2Ugc2luY2UgdGhvc2UgYXJlIG5vdCBzdG9yZWQgb25cbiAgICAgICAgICAgICAgICAvLyBMVmlldyAobm9yIGFueXdoZXJlIGVsc2UpLlxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZWQ1JlZiA9IG5ldyBSM1ZpZXdDb250YWluZXJSZWYocHJldkxDb250YWluZXIsIHByZXZMQ29udGFpbmVyW1RfSE9TVF0sIHByZXZMQ29udGFpbmVyW1BBUkVOVF0pO1xuICAgICAgICAgICAgICAgIHByZXZWQ1JlZi5kZXRhY2gocHJldlZDUmVmLmluZGV4T2Yodmlld1JlZikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIExvZ2ljYWwgb3BlcmF0aW9uIG9mIGFkZGluZyBgTFZpZXdgIHRvIGBMQ29udGFpbmVyYFxuICAgICAgICBjb25zdCBhZGp1c3RlZElkeCA9IHRoaXMuX2FkanVzdEluZGV4KGluZGV4KTtcbiAgICAgICAgY29uc3QgbENvbnRhaW5lciA9IHRoaXMuX2xDb250YWluZXI7XG4gICAgICAgIGluc2VydFZpZXcodFZpZXcsIGxWaWV3LCBsQ29udGFpbmVyLCBhZGp1c3RlZElkeCk7XG4gICAgICAgIC8vIFBoeXNpY2FsIG9wZXJhdGlvbiBvZiBhZGRpbmcgdGhlIERPTSBub2Rlcy5cbiAgICAgICAgY29uc3QgYmVmb3JlTm9kZSA9IGdldEJlZm9yZU5vZGVGb3JWaWV3KGFkanVzdGVkSWR4LCBsQ29udGFpbmVyKTtcbiAgICAgICAgY29uc3QgcmVuZGVyZXIgPSBsVmlld1tSRU5ERVJFUl07XG4gICAgICAgIGNvbnN0IHBhcmVudFJOb2RlID0gbmF0aXZlUGFyZW50Tm9kZShyZW5kZXJlciwgbENvbnRhaW5lcltOQVRJVkVdKTtcbiAgICAgICAgaWYgKHBhcmVudFJOb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBhZGRWaWV3VG9Db250YWluZXIodFZpZXcsIGxDb250YWluZXJbVF9IT1NUXSwgcmVuZGVyZXIsIGxWaWV3LCBwYXJlbnRSTm9kZSwgYmVmb3JlTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmlld1JlZi5hdHRhY2hUb1ZpZXdDb250YWluZXJSZWYoKTtcbiAgICAgICAgYWRkVG9BcnJheShnZXRPckNyZWF0ZVZpZXdSZWZzKGxDb250YWluZXIpLCBhZGp1c3RlZElkeCwgdmlld1JlZik7XG4gICAgICAgIHJldHVybiB2aWV3UmVmO1xuICAgIH1cbiAgICBtb3ZlKHZpZXdSZWYsIG5ld0luZGV4KSB7XG4gICAgICAgIGlmIChuZ0Rldk1vZGUgJiYgdmlld1JlZi5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IG1vdmUgYSBkZXN0cm95ZWQgVmlldyBpbiBhIFZpZXdDb250YWluZXIhJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0KHZpZXdSZWYsIG5ld0luZGV4KTtcbiAgICB9XG4gICAgaW5kZXhPZih2aWV3UmVmKSB7XG4gICAgICAgIGNvbnN0IHZpZXdSZWZzQXJyID0gZ2V0Vmlld1JlZnModGhpcy5fbENvbnRhaW5lcik7XG4gICAgICAgIHJldHVybiB2aWV3UmVmc0FyciAhPT0gbnVsbCA/IHZpZXdSZWZzQXJyLmluZGV4T2Yodmlld1JlZikgOiAtMTtcbiAgICB9XG4gICAgcmVtb3ZlKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGFkanVzdGVkSWR4ID0gdGhpcy5fYWRqdXN0SW5kZXgoaW5kZXgsIC0xKTtcbiAgICAgICAgY29uc3QgZGV0YWNoZWRWaWV3ID0gZGV0YWNoVmlldyh0aGlzLl9sQ29udGFpbmVyLCBhZGp1c3RlZElkeCk7XG4gICAgICAgIGlmIChkZXRhY2hlZFZpZXcpIHtcbiAgICAgICAgICAgIC8vIEJlZm9yZSBkZXN0cm95aW5nIHRoZSB2aWV3LCByZW1vdmUgaXQgZnJvbSB0aGUgY29udGFpbmVyJ3MgYXJyYXkgb2YgYFZpZXdSZWZgcy5cbiAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgdmlldyBjb250YWluZXIgbGVuZ3RoIGlzIHVwZGF0ZWQgYmVmb3JlIGNhbGxpbmdcbiAgICAgICAgICAgIC8vIGBkZXN0cm95TFZpZXdgLCB3aGljaCBjb3VsZCByZWN1cnNpdmVseSBjYWxsIHZpZXcgY29udGFpbmVyIG1ldGhvZHMgdGhhdFxuICAgICAgICAgICAgLy8gcmVseSBvbiBhbiBhY2N1cmF0ZSBjb250YWluZXIgbGVuZ3RoLlxuICAgICAgICAgICAgLy8gKGUuZy4gYSBtZXRob2Qgb24gdGhpcyB2aWV3IGNvbnRhaW5lciBiZWluZyBjYWxsZWQgYnkgYSBjaGlsZCBkaXJlY3RpdmUncyBPbkRlc3Ryb3lcbiAgICAgICAgICAgIC8vIGxpZmVjeWNsZSBob29rKVxuICAgICAgICAgICAgcmVtb3ZlRnJvbUFycmF5KGdldE9yQ3JlYXRlVmlld1JlZnModGhpcy5fbENvbnRhaW5lciksIGFkanVzdGVkSWR4KTtcbiAgICAgICAgICAgIGRlc3Ryb3lMVmlldyhkZXRhY2hlZFZpZXdbVFZJRVddLCBkZXRhY2hlZFZpZXcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRldGFjaChpbmRleCkge1xuICAgICAgICBjb25zdCBhZGp1c3RlZElkeCA9IHRoaXMuX2FkanVzdEluZGV4KGluZGV4LCAtMSk7XG4gICAgICAgIGNvbnN0IHZpZXcgPSBkZXRhY2hWaWV3KHRoaXMuX2xDb250YWluZXIsIGFkanVzdGVkSWR4KTtcbiAgICAgICAgY29uc3Qgd2FzRGV0YWNoZWQgPSB2aWV3ICYmIHJlbW92ZUZyb21BcnJheShnZXRPckNyZWF0ZVZpZXdSZWZzKHRoaXMuX2xDb250YWluZXIpLCBhZGp1c3RlZElkeCkgIT0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHdhc0RldGFjaGVkID8gbmV3IFZpZXdSZWYkMSh2aWV3KSA6IG51bGw7XG4gICAgfVxuICAgIF9hZGp1c3RJbmRleChpbmRleCwgc2hpZnQgPSAwKSB7XG4gICAgICAgIGlmIChpbmRleCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGggKyBzaGlmdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmdEZXZNb2RlKSB7XG4gICAgICAgICAgICBhc3NlcnRHcmVhdGVyVGhhbihpbmRleCwgLTEsIGBWaWV3UmVmIGluZGV4IG11c3QgYmUgcG9zaXRpdmUsIGdvdCAke2luZGV4fWApO1xuICAgICAgICAgICAgLy8gKzEgYmVjYXVzZSBpdCdzIGxlZ2FsIHRvIGluc2VydCBhdCB0aGUgZW5kLlxuICAgICAgICAgICAgYXNzZXJ0TGVzc1RoYW4oaW5kZXgsIHRoaXMubGVuZ3RoICsgMSArIHNoaWZ0LCAnaW5kZXgnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGdldFZpZXdSZWZzKGxDb250YWluZXIpIHtcbiAgICByZXR1cm4gbENvbnRhaW5lcltWSUVXX1JFRlNdO1xufVxuZnVuY3Rpb24gZ2V0T3JDcmVhdGVWaWV3UmVmcyhsQ29udGFpbmVyKSB7XG4gICAgcmV0dXJuIChsQ29udGFpbmVyW1ZJRVdfUkVGU10gfHwgKGxDb250YWluZXJbVklFV19SRUZTXSA9IFtdKSk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBWaWV3Q29udGFpbmVyUmVmIGFuZCBzdG9yZXMgaXQgb24gdGhlIGluamVjdG9yLlxuICpcbiAqIEBwYXJhbSBWaWV3Q29udGFpbmVyUmVmVG9rZW4gVGhlIFZpZXdDb250YWluZXJSZWYgdHlwZVxuICogQHBhcmFtIEVsZW1lbnRSZWZUb2tlbiBUaGUgRWxlbWVudFJlZiB0eXBlXG4gKiBAcGFyYW0gaG9zdFROb2RlIFRoZSBub2RlIHRoYXQgaXMgcmVxdWVzdGluZyBhIFZpZXdDb250YWluZXJSZWZcbiAqIEBwYXJhbSBob3N0TFZpZXcgVGhlIHZpZXcgdG8gd2hpY2ggdGhlIG5vZGUgYmVsb25nc1xuICogQHJldHVybnMgVGhlIFZpZXdDb250YWluZXJSZWYgaW5zdGFuY2UgdG8gdXNlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNvbnRhaW5lclJlZihob3N0VE5vZGUsIGhvc3RMVmlldykge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUTm9kZVR5cGUoaG9zdFROb2RlLCAxMiAvKiBBbnlDb250YWluZXIgKi8gfCAzIC8qIEFueVJOb2RlICovKTtcbiAgICBsZXQgbENvbnRhaW5lcjtcbiAgICBjb25zdCBzbG90VmFsdWUgPSBob3N0TFZpZXdbaG9zdFROb2RlLmluZGV4XTtcbiAgICBpZiAoaXNMQ29udGFpbmVyKHNsb3RWYWx1ZSkpIHtcbiAgICAgICAgLy8gSWYgdGhlIGhvc3QgaXMgYSBjb250YWluZXIsIHdlIGRvbid0IG5lZWQgdG8gY3JlYXRlIGEgbmV3IExDb250YWluZXJcbiAgICAgICAgbENvbnRhaW5lciA9IHNsb3RWYWx1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCBjb21tZW50Tm9kZTtcbiAgICAgICAgLy8gSWYgdGhlIGhvc3QgaXMgYW4gZWxlbWVudCBjb250YWluZXIsIHRoZSBuYXRpdmUgaG9zdCBlbGVtZW50IGlzIGd1YXJhbnRlZWQgdG8gYmUgYVxuICAgICAgICAvLyBjb21tZW50IGFuZCB3ZSBjYW4gcmV1c2UgdGhhdCBjb21tZW50IGFzIGFuY2hvciBlbGVtZW50IGZvciB0aGUgbmV3IExDb250YWluZXIuXG4gICAgICAgIC8vIFRoZSBjb21tZW50IG5vZGUgaW4gcXVlc3Rpb24gaXMgYWxyZWFkeSBwYXJ0IG9mIHRoZSBET00gc3RydWN0dXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gYXBwZW5kXG4gICAgICAgIC8vIGl0IGFnYWluLlxuICAgICAgICBpZiAoaG9zdFROb2RlLnR5cGUgJiA4IC8qIEVsZW1lbnRDb250YWluZXIgKi8pIHtcbiAgICAgICAgICAgIGNvbW1lbnROb2RlID0gdW53cmFwUk5vZGUoc2xvdFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBob3N0IGlzIGEgcmVndWxhciBlbGVtZW50LCB3ZSBoYXZlIHRvIGluc2VydCBhIGNvbW1lbnQgbm9kZSBtYW51YWxseSB3aGljaCB3aWxsXG4gICAgICAgICAgICAvLyBiZSB1c2VkIGFzIGFuIGFuY2hvciB3aGVuIGluc2VydGluZyBlbGVtZW50cy4gSW4gdGhpcyBzcGVjaWZpYyBjYXNlIHdlIHVzZSBsb3ctbGV2ZWwgRE9NXG4gICAgICAgICAgICAvLyBtYW5pcHVsYXRpb24gdG8gaW5zZXJ0IGl0LlxuICAgICAgICAgICAgY29uc3QgcmVuZGVyZXIgPSBob3N0TFZpZXdbUkVOREVSRVJdO1xuICAgICAgICAgICAgbmdEZXZNb2RlICYmIG5nRGV2TW9kZS5yZW5kZXJlckNyZWF0ZUNvbW1lbnQrKztcbiAgICAgICAgICAgIGNvbW1lbnROb2RlID0gcmVuZGVyZXIuY3JlYXRlQ29tbWVudChuZ0Rldk1vZGUgPyAnY29udGFpbmVyJyA6ICcnKTtcbiAgICAgICAgICAgIGNvbnN0IGhvc3ROYXRpdmUgPSBnZXROYXRpdmVCeVROb2RlKGhvc3RUTm9kZSwgaG9zdExWaWV3KTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudE9mSG9zdE5hdGl2ZSA9IG5hdGl2ZVBhcmVudE5vZGUocmVuZGVyZXIsIGhvc3ROYXRpdmUpO1xuICAgICAgICAgICAgbmF0aXZlSW5zZXJ0QmVmb3JlKHJlbmRlcmVyLCBwYXJlbnRPZkhvc3ROYXRpdmUsIGNvbW1lbnROb2RlLCBuYXRpdmVOZXh0U2libGluZyhyZW5kZXJlciwgaG9zdE5hdGl2ZSksIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBob3N0TFZpZXdbaG9zdFROb2RlLmluZGV4XSA9IGxDb250YWluZXIgPVxuICAgICAgICAgICAgY3JlYXRlTENvbnRhaW5lcihzbG90VmFsdWUsIGhvc3RMVmlldywgY29tbWVudE5vZGUsIGhvc3RUTm9kZSk7XG4gICAgICAgIGFkZFRvVmlld1RyZWUoaG9zdExWaWV3LCBsQ29udGFpbmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSM1ZpZXdDb250YWluZXJSZWYobENvbnRhaW5lciwgaG9zdFROb2RlLCBob3N0TFZpZXcpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8vIE5vdGU6IFRoaXMgaGFjayBpcyBuZWNlc3Nhcnkgc28gd2UgZG9uJ3QgZXJyb25lb3VzbHkgZ2V0IGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuLy8gZmFpbHVyZSBiYXNlZCBvbiB0eXBlcy5cbmNvbnN0IHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkJDEgPSAxO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8vIE5vdGU6IFRoaXMgaGFjayBpcyBuZWNlc3Nhcnkgc28gd2UgZG9uJ3QgZXJyb25lb3VzbHkgZ2V0IGEgY2lyY3VsYXIgZGVwZW5kZW5jeVxuLy8gZmFpbHVyZSBiYXNlZCBvbiB0eXBlcy5cbmNvbnN0IHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkID0gMTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5jb25zdCB1bnVzZWRWYWx1ZVRvUGxhY2F0ZUFqZCA9IHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkJDEgKyB1bnVzZWRWYWx1ZUV4cG9ydFRvUGxhY2F0ZUFqZCQ1ICsgdW51c2VkVmFsdWVFeHBvcnRUb1BsYWNhdGVBamQkNCArIHVudXNlZFZhbHVlRXhwb3J0VG9QbGFjYXRlQWpkO1xuY2xhc3MgTFF1ZXJ5XyB7XG4gICAgY29uc3RydWN0b3IocXVlcnlMaXN0KSB7XG4gICAgICAgIHRoaXMucXVlcnlMaXN0ID0gcXVlcnlMaXN0O1xuICAgICAgICB0aGlzLm1hdGNoZXMgPSBudWxsO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMUXVlcnlfKHRoaXMucXVlcnlMaXN0KTtcbiAgICB9XG4gICAgc2V0RGlydHkoKSB7XG4gICAgICAgIHRoaXMucXVlcnlMaXN0LnNldERpcnR5KCk7XG4gICAgfVxufVxuY2xhc3MgTFF1ZXJpZXNfIHtcbiAgICBjb25zdHJ1Y3RvcihxdWVyaWVzID0gW10pIHtcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gcXVlcmllcztcbiAgICB9XG4gICAgY3JlYXRlRW1iZWRkZWRWaWV3KHRWaWV3KSB7XG4gICAgICAgIGNvbnN0IHRRdWVyaWVzID0gdFZpZXcucXVlcmllcztcbiAgICAgICAgaWYgKHRRdWVyaWVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBub09mSW5oZXJpdGVkUXVlcmllcyA9IHRWaWV3LmNvbnRlbnRRdWVyaWVzICE9PSBudWxsID8gdFZpZXcuY29udGVudFF1ZXJpZXNbMF0gOiB0UXVlcmllcy5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCB2aWV3TFF1ZXJpZXMgPSBbXTtcbiAgICAgICAgICAgIC8vIEFuIGVtYmVkZGVkIHZpZXcgaGFzIHF1ZXJpZXMgcHJvcGFnYXRlZCBmcm9tIGEgZGVjbGFyYXRpb24gdmlldyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZVxuICAgICAgICAgICAgLy8gVFF1ZXJpZXMgY29sbGVjdGlvbiBhbmQgdXAgdW50aWwgYSBmaXJzdCBjb250ZW50IHF1ZXJ5IGRlY2xhcmVkIGluIHRoZSBlbWJlZGRlZCB2aWV3LiBPbmx5XG4gICAgICAgICAgICAvLyBwcm9wYWdhdGVkIExRdWVyaWVzIGFyZSBjcmVhdGVkIGF0IHRoaXMgcG9pbnQgKExRdWVyeSBjb3JyZXNwb25kaW5nIHRvIGRlY2xhcmVkIGNvbnRlbnRcbiAgICAgICAgICAgIC8vIHF1ZXJpZXMgd2lsbCBiZSBpbnN0YW50aWF0ZWQgZnJvbSB0aGUgY29udGVudCBxdWVyeSBpbnN0cnVjdGlvbnMgZm9yIGVhY2ggZGlyZWN0aXZlKS5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9PZkluaGVyaXRlZFF1ZXJpZXM7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRRdWVyeSA9IHRRdWVyaWVzLmdldEJ5SW5kZXgoaSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50TFF1ZXJ5ID0gdGhpcy5xdWVyaWVzW3RRdWVyeS5pbmRleEluRGVjbGFyYXRpb25WaWV3XTtcbiAgICAgICAgICAgICAgICB2aWV3TFF1ZXJpZXMucHVzaChwYXJlbnRMUXVlcnkuY2xvbmUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IExRdWVyaWVzXyh2aWV3TFF1ZXJpZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpbnNlcnRWaWV3KHRWaWV3KSB7XG4gICAgICAgIHRoaXMuZGlydHlRdWVyaWVzV2l0aE1hdGNoZXModFZpZXcpO1xuICAgIH1cbiAgICBkZXRhY2hWaWV3KHRWaWV3KSB7XG4gICAgICAgIHRoaXMuZGlydHlRdWVyaWVzV2l0aE1hdGNoZXModFZpZXcpO1xuICAgIH1cbiAgICBkaXJ0eVF1ZXJpZXNXaXRoTWF0Y2hlcyh0Vmlldykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucXVlcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGdldFRRdWVyeSh0VmlldywgaSkubWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMucXVlcmllc1tpXS5zZXREaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuY2xhc3MgVFF1ZXJ5TWV0YWRhdGFfIHtcbiAgICBjb25zdHJ1Y3RvcihwcmVkaWNhdGUsIGZsYWdzLCByZWFkID0gbnVsbCkge1xuICAgICAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgICAgICB0aGlzLnJlYWQgPSByZWFkO1xuICAgIH1cbn1cbmNsYXNzIFRRdWVyaWVzXyB7XG4gICAgY29uc3RydWN0b3IocXVlcmllcyA9IFtdKSB7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IHF1ZXJpZXM7XG4gICAgfVxuICAgIGVsZW1lbnRTdGFydCh0VmlldywgdE5vZGUpIHtcbiAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICBhc3NlcnRGaXJzdENyZWF0ZVBhc3ModFZpZXcsICdRdWVyaWVzIHNob3VsZCBjb2xsZWN0IHJlc3VsdHMgb24gdGhlIGZpcnN0IHRlbXBsYXRlIHBhc3Mgb25seScpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucXVlcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5xdWVyaWVzW2ldLmVsZW1lbnRTdGFydCh0VmlldywgdE5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRFbmQodE5vZGUpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnF1ZXJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMucXVlcmllc1tpXS5lbGVtZW50RW5kKHROb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWJlZGRlZFRWaWV3KHROb2RlKSB7XG4gICAgICAgIGxldCBxdWVyaWVzRm9yVGVtcGxhdGVSZWYgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkUXVlcnlJbmRleCA9IHF1ZXJpZXNGb3JUZW1wbGF0ZVJlZiAhPT0gbnVsbCA/IHF1ZXJpZXNGb3JUZW1wbGF0ZVJlZi5sZW5ndGggOiAwO1xuICAgICAgICAgICAgY29uc3QgdHF1ZXJ5Q2xvbmUgPSB0aGlzLmdldEJ5SW5kZXgoaSkuZW1iZWRkZWRUVmlldyh0Tm9kZSwgY2hpbGRRdWVyeUluZGV4KTtcbiAgICAgICAgICAgIGlmICh0cXVlcnlDbG9uZSkge1xuICAgICAgICAgICAgICAgIHRxdWVyeUNsb25lLmluZGV4SW5EZWNsYXJhdGlvblZpZXcgPSBpO1xuICAgICAgICAgICAgICAgIGlmIChxdWVyaWVzRm9yVGVtcGxhdGVSZWYgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcmllc0ZvclRlbXBsYXRlUmVmLnB1c2godHF1ZXJ5Q2xvbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcmllc0ZvclRlbXBsYXRlUmVmID0gW3RxdWVyeUNsb25lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHF1ZXJpZXNGb3JUZW1wbGF0ZVJlZiAhPT0gbnVsbCA/IG5ldyBUUXVlcmllc18ocXVlcmllc0ZvclRlbXBsYXRlUmVmKSA6IG51bGw7XG4gICAgfVxuICAgIHRlbXBsYXRlKHRWaWV3LCB0Tm9kZSkge1xuICAgICAgICBuZ0Rldk1vZGUgJiZcbiAgICAgICAgICAgIGFzc2VydEZpcnN0Q3JlYXRlUGFzcyh0VmlldywgJ1F1ZXJpZXMgc2hvdWxkIGNvbGxlY3QgcmVzdWx0cyBvbiB0aGUgZmlyc3QgdGVtcGxhdGUgcGFzcyBvbmx5Jyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5xdWVyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXNbaV0udGVtcGxhdGUodFZpZXcsIHROb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRCeUluZGV4KGluZGV4KSB7XG4gICAgICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRJbmRleEluUmFuZ2UodGhpcy5xdWVyaWVzLCBpbmRleCk7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJpZXNbaW5kZXhdO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWVyaWVzLmxlbmd0aDtcbiAgICB9XG4gICAgdHJhY2sodHF1ZXJ5KSB7XG4gICAgICAgIHRoaXMucXVlcmllcy5wdXNoKHRxdWVyeSk7XG4gICAgfVxufVxuY2xhc3MgVFF1ZXJ5XyB7XG4gICAgY29uc3RydWN0b3IobWV0YWRhdGEsIG5vZGVJbmRleCA9IC0xKSB7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgdGhpcy5tYXRjaGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbmRleEluRGVjbGFyYXRpb25WaWV3ID0gLTE7XG4gICAgICAgIHRoaXMuY3Jvc3Nlc05nVGVtcGxhdGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyBpbmRpY2F0aW5nIGlmIGEgZ2l2ZW4gcXVlcnkgc3RpbGwgYXBwbGllcyB0byBub2RlcyBpdCBpcyBjcm9zc2luZy4gV2UgdXNlIHRoaXMgZmxhZ1xuICAgICAgICAgKiAoYWxvbmdzaWRlIHdpdGggX2RlY2xhcmF0aW9uTm9kZUluZGV4KSB0byBrbm93IHdoZW4gdG8gc3RvcCBhcHBseWluZyBjb250ZW50IHF1ZXJpZXMgdG9cbiAgICAgICAgICogZWxlbWVudHMgaW4gYSB0ZW1wbGF0ZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2FwcGxpZXNUb05leHROb2RlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fZGVjbGFyYXRpb25Ob2RlSW5kZXggPSBub2RlSW5kZXg7XG4gICAgfVxuICAgIGVsZW1lbnRTdGFydCh0VmlldywgdE5vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBcHBseWluZ1RvTm9kZSh0Tm9kZSkpIHtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hUTm9kZSh0VmlldywgdE5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRFbmQodE5vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlY2xhcmF0aW9uTm9kZUluZGV4ID09PSB0Tm9kZS5pbmRleCkge1xuICAgICAgICAgICAgdGhpcy5fYXBwbGllc1RvTmV4dE5vZGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0ZW1wbGF0ZSh0VmlldywgdE5vZGUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50U3RhcnQodFZpZXcsIHROb2RlKTtcbiAgICB9XG4gICAgZW1iZWRkZWRUVmlldyh0Tm9kZSwgY2hpbGRRdWVyeUluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLmlzQXBwbHlpbmdUb05vZGUodE5vZGUpKSB7XG4gICAgICAgICAgICB0aGlzLmNyb3NzZXNOZ1RlbXBsYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIEEgbWFya2VyIGluZGljYXRpbmcgYSBgPG5nLXRlbXBsYXRlPmAgZWxlbWVudCAoYSBwbGFjZWhvbGRlciBmb3IgcXVlcnkgcmVzdWx0cyBmcm9tXG4gICAgICAgICAgICAvLyBlbWJlZGRlZCB2aWV3cyBjcmVhdGVkIGJhc2VkIG9uIHRoaXMgYDxuZy10ZW1wbGF0ZT5gKS5cbiAgICAgICAgICAgIHRoaXMuYWRkTWF0Y2goLXROb2RlLmluZGV4LCBjaGlsZFF1ZXJ5SW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBUUXVlcnlfKHRoaXMubWV0YWRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpc0FwcGx5aW5nVG9Ob2RlKHROb2RlKSB7XG4gICAgICAgIGlmICh0aGlzLl9hcHBsaWVzVG9OZXh0Tm9kZSAmJlxuICAgICAgICAgICAgKHRoaXMubWV0YWRhdGEuZmxhZ3MgJiAxIC8qIGRlc2NlbmRhbnRzICovKSAhPT0gMSAvKiBkZXNjZW5kYW50cyAqLykge1xuICAgICAgICAgICAgY29uc3QgZGVjbGFyYXRpb25Ob2RlSWR4ID0gdGhpcy5fZGVjbGFyYXRpb25Ob2RlSW5kZXg7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gdE5vZGUucGFyZW50O1xuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIGEgZ2l2ZW4gVE5vZGUgaXMgYSBcImRpcmVjdFwiIGNoaWxkIG9mIGEgbm9kZSBvbiB3aGljaCBhIGNvbnRlbnQgcXVlcnkgd2FzXG4gICAgICAgICAgICAvLyBkZWNsYXJlZCAob25seSBkaXJlY3QgY2hpbGRyZW4gb2YgcXVlcnkncyBob3N0IG5vZGUgY2FuIG1hdGNoIHdpdGggdGhlIGRlc2NlbmRhbnRzOiBmYWxzZVxuICAgICAgICAgICAgLy8gb3B0aW9uKS4gVGhlcmUgYXJlIDMgbWFpbiB1c2UtY2FzZSAvIGNvbmRpdGlvbnMgdG8gY29uc2lkZXIgaGVyZTpcbiAgICAgICAgICAgIC8vIC0gPG5lZWRzLXRhcmdldD48aSAjdGFyZ2V0PjwvaT48L25lZWRzLXRhcmdldD46IGhlcmUgPGkgI3RhcmdldD4gcGFyZW50IG5vZGUgaXMgYSBxdWVyeVxuICAgICAgICAgICAgLy8gaG9zdCBub2RlO1xuICAgICAgICAgICAgLy8gLSA8bmVlZHMtdGFyZ2V0PjxuZy10ZW1wbGF0ZSBbbmdJZl09XCJ0cnVlXCI+PGkgI3RhcmdldD48L2k+PC9uZy10ZW1wbGF0ZT48L25lZWRzLXRhcmdldD46XG4gICAgICAgICAgICAvLyBoZXJlIDxpICN0YXJnZXQ+IHBhcmVudCBub2RlIGlzIG51bGw7XG4gICAgICAgICAgICAvLyAtIDxuZWVkcy10YXJnZXQ+PG5nLWNvbnRhaW5lcj48aSAjdGFyZ2V0PjwvaT48L25nLWNvbnRhaW5lcj48L25lZWRzLXRhcmdldD46IGhlcmUgd2UgbmVlZFxuICAgICAgICAgICAgLy8gdG8gZ28gcGFzdCBgPG5nLWNvbnRhaW5lcj5gIHRvIGRldGVybWluZSA8aSAjdGFyZ2V0PiBwYXJlbnQgbm9kZSAoYnV0IHdlIHNob3VsZG4ndCB0cmF2ZXJzZVxuICAgICAgICAgICAgLy8gdXAgcGFzdCB0aGUgcXVlcnkncyBob3N0IG5vZGUhKS5cbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQgIT09IG51bGwgJiYgKHBhcmVudC50eXBlICYgOCAvKiBFbGVtZW50Q29udGFpbmVyICovKSAmJlxuICAgICAgICAgICAgICAgIHBhcmVudC5pbmRleCAhPT0gZGVjbGFyYXRpb25Ob2RlSWR4KSB7XG4gICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkZWNsYXJhdGlvbk5vZGVJZHggPT09IChwYXJlbnQgIT09IG51bGwgPyBwYXJlbnQuaW5kZXggOiAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGxpZXNUb05leHROb2RlO1xuICAgIH1cbiAgICBtYXRjaFROb2RlKHRWaWV3LCB0Tm9kZSkge1xuICAgICAgICBjb25zdCBwcmVkaWNhdGUgPSB0aGlzLm1ldGFkYXRhLnByZWRpY2F0ZTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHJlZGljYXRlKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmVkaWNhdGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gcHJlZGljYXRlW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hUTm9kZVdpdGhSZWFkT3B0aW9uKHRWaWV3LCB0Tm9kZSwgZ2V0SWR4T2ZNYXRjaGluZ1NlbGVjdG9yKHROb2RlLCBuYW1lKSk7XG4gICAgICAgICAgICAgICAgLy8gQWxzbyB0cnkgbWF0Y2hpbmcgdGhlIG5hbWUgdG8gYSBwcm92aWRlciBzaW5jZSBzdHJpbmdzIGNhbiBiZSB1c2VkIGFzIERJIHRva2VucyB0b28uXG4gICAgICAgICAgICAgICAgdGhpcy5tYXRjaFROb2RlV2l0aFJlYWRPcHRpb24odFZpZXcsIHROb2RlLCBsb2NhdGVEaXJlY3RpdmVPclByb3ZpZGVyKHROb2RlLCB0VmlldywgbmFtZSwgZmFsc2UsIGZhbHNlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAocHJlZGljYXRlID09PSBUZW1wbGF0ZVJlZikge1xuICAgICAgICAgICAgICAgIGlmICh0Tm9kZS50eXBlICYgNCAvKiBDb250YWluZXIgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaFROb2RlV2l0aFJlYWRPcHRpb24odFZpZXcsIHROb2RlLCAtMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXRjaFROb2RlV2l0aFJlYWRPcHRpb24odFZpZXcsIHROb2RlLCBsb2NhdGVEaXJlY3RpdmVPclByb3ZpZGVyKHROb2RlLCB0VmlldywgcHJlZGljYXRlLCBmYWxzZSwgZmFsc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBtYXRjaFROb2RlV2l0aFJlYWRPcHRpb24odFZpZXcsIHROb2RlLCBub2RlTWF0Y2hJZHgpIHtcbiAgICAgICAgaWYgKG5vZGVNYXRjaElkeCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgcmVhZCA9IHRoaXMubWV0YWRhdGEucmVhZDtcbiAgICAgICAgICAgIGlmIChyZWFkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlYWQgPT09IEVsZW1lbnRSZWYgfHwgcmVhZCA9PT0gVmlld0NvbnRhaW5lclJlZiB8fFxuICAgICAgICAgICAgICAgICAgICByZWFkID09PSBUZW1wbGF0ZVJlZiAmJiAodE5vZGUudHlwZSAmIDQgLyogQ29udGFpbmVyICovKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE1hdGNoKHROb2RlLmluZGV4LCAtMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXJlY3RpdmVPclByb3ZpZGVySWR4ID0gbG9jYXRlRGlyZWN0aXZlT3JQcm92aWRlcih0Tm9kZSwgdFZpZXcsIHJlYWQsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3RpdmVPclByb3ZpZGVySWR4ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE1hdGNoKHROb2RlLmluZGV4LCBkaXJlY3RpdmVPclByb3ZpZGVySWR4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkTWF0Y2godE5vZGUuaW5kZXgsIG5vZGVNYXRjaElkeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkTWF0Y2godE5vZGVJZHgsIG1hdGNoSWR4KSB7XG4gICAgICAgIGlmICh0aGlzLm1hdGNoZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hlcyA9IFt0Tm9kZUlkeCwgbWF0Y2hJZHhdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tYXRjaGVzLnB1c2godE5vZGVJZHgsIG1hdGNoSWR4KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogSXRlcmF0ZXMgb3ZlciBsb2NhbCBuYW1lcyBmb3IgYSBnaXZlbiBub2RlIGFuZCByZXR1cm5zIGRpcmVjdGl2ZSBpbmRleFxuICogKG9yIC0xIGlmIGEgbG9jYWwgbmFtZSBwb2ludHMgdG8gYW4gZWxlbWVudCkuXG4gKlxuICogQHBhcmFtIHROb2RlIHN0YXRpYyBkYXRhIG9mIGEgbm9kZSB0byBjaGVja1xuICogQHBhcmFtIHNlbGVjdG9yIHNlbGVjdG9yIHRvIG1hdGNoXG4gKiBAcmV0dXJucyBkaXJlY3RpdmUgaW5kZXgsIC0xIG9yIG51bGwgaWYgYSBzZWxlY3RvciBkaWRuJ3QgbWF0Y2ggYW55IG9mIHRoZSBsb2NhbCBuYW1lc1xuICovXG5mdW5jdGlvbiBnZXRJZHhPZk1hdGNoaW5nU2VsZWN0b3IodE5vZGUsIHNlbGVjdG9yKSB7XG4gICAgY29uc3QgbG9jYWxOYW1lcyA9IHROb2RlLmxvY2FsTmFtZXM7XG4gICAgaWYgKGxvY2FsTmFtZXMgIT09IG51bGwpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhbE5hbWVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxOYW1lc1tpXSA9PT0gc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxOYW1lc1tpICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBjcmVhdGVSZXN1bHRCeVROb2RlVHlwZSh0Tm9kZSwgY3VycmVudFZpZXcpIHtcbiAgICBpZiAodE5vZGUudHlwZSAmICgzIC8qIEFueVJOb2RlICovIHwgOCAvKiBFbGVtZW50Q29udGFpbmVyICovKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudFJlZih0Tm9kZSwgY3VycmVudFZpZXcpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0Tm9kZS50eXBlICYgNCAvKiBDb250YWluZXIgKi8pIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVRlbXBsYXRlUmVmKHROb2RlLCBjdXJyZW50Vmlldyk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gY3JlYXRlUmVzdWx0Rm9yTm9kZShsVmlldywgdE5vZGUsIG1hdGNoaW5nSWR4LCByZWFkKSB7XG4gICAgaWYgKG1hdGNoaW5nSWR4ID09PSAtMSkge1xuICAgICAgICAvLyBpZiByZWFkIHRva2VuIGFuZCAvIG9yIHN0cmF0ZWd5IGlzIG5vdCBzcGVjaWZpZWQsIGRldGVjdCBpdCB1c2luZyBhcHByb3ByaWF0ZSB0Tm9kZSB0eXBlXG4gICAgICAgIHJldHVybiBjcmVhdGVSZXN1bHRCeVROb2RlVHlwZSh0Tm9kZSwgbFZpZXcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtYXRjaGluZ0lkeCA9PT0gLTIpIHtcbiAgICAgICAgLy8gcmVhZCBhIHNwZWNpYWwgdG9rZW4gZnJvbSBhIG5vZGUgaW5qZWN0b3JcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVNwZWNpYWxUb2tlbihsVmlldywgdE5vZGUsIHJlYWQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gcmVhZCBhIHRva2VuXG4gICAgICAgIHJldHVybiBnZXROb2RlSW5qZWN0YWJsZShsVmlldywgbFZpZXdbVFZJRVddLCBtYXRjaGluZ0lkeCwgdE5vZGUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVNwZWNpYWxUb2tlbihsVmlldywgdE5vZGUsIHJlYWQpIHtcbiAgICBpZiAocmVhZCA9PT0gRWxlbWVudFJlZikge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudFJlZih0Tm9kZSwgbFZpZXcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWFkID09PSBUZW1wbGF0ZVJlZikge1xuICAgICAgICByZXR1cm4gY3JlYXRlVGVtcGxhdGVSZWYodE5vZGUsIGxWaWV3KTtcbiAgICB9XG4gICAgZWxzZSBpZiAocmVhZCA9PT0gVmlld0NvbnRhaW5lclJlZikge1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0VE5vZGVUeXBlKHROb2RlLCAzIC8qIEFueVJOb2RlICovIHwgMTIgLyogQW55Q29udGFpbmVyICovKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbnRhaW5lclJlZih0Tm9kZSwgbFZpZXcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICB0aHJvd0Vycm9yKGBTcGVjaWFsIHRva2VuIHRvIHJlYWQgc2hvdWxkIGJlIG9uZSBvZiBFbGVtZW50UmVmLCBUZW1wbGF0ZVJlZiBvciBWaWV3Q29udGFpbmVyUmVmIGJ1dCBnb3QgJHtzdHJpbmdpZnkocmVhZCl9LmApO1xuICAgIH1cbn1cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gdGhhdCBjcmVhdGVzIHF1ZXJ5IHJlc3VsdHMgZm9yIGEgZ2l2ZW4gdmlldy4gVGhpcyBmdW5jdGlvbiBpcyBtZWFudCB0byBkbyB0aGVcbiAqIHByb2Nlc3Npbmcgb25jZSBhbmQgb25seSBvbmNlIGZvciBhIGdpdmVuIHZpZXcgaW5zdGFuY2UgKGEgc2V0IG9mIHJlc3VsdHMgZm9yIGEgZ2l2ZW4gdmlld1xuICogZG9lc24ndCBjaGFuZ2UpLlxuICovXG5mdW5jdGlvbiBtYXRlcmlhbGl6ZVZpZXdSZXN1bHRzKHRWaWV3LCBsVmlldywgdFF1ZXJ5LCBxdWVyeUluZGV4KSB7XG4gICAgY29uc3QgbFF1ZXJ5ID0gbFZpZXdbUVVFUklFU10ucXVlcmllc1txdWVyeUluZGV4XTtcbiAgICBpZiAobFF1ZXJ5Lm1hdGNoZXMgPT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgdFZpZXdEYXRhID0gdFZpZXcuZGF0YTtcbiAgICAgICAgY29uc3QgdFF1ZXJ5TWF0Y2hlcyA9IHRRdWVyeS5tYXRjaGVzO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0UXVlcnlNYXRjaGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkTm9kZUlkeCA9IHRRdWVyeU1hdGNoZXNbaV07XG4gICAgICAgICAgICBpZiAobWF0Y2hlZE5vZGVJZHggPCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gd2UgYXQgdGhlIDxuZy10ZW1wbGF0ZT4gbWFya2VyIHdoaWNoIG1pZ2h0IGhhdmUgcmVzdWx0cyBpbiB2aWV3cyBjcmVhdGVkIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgICAgICAgICAvLyA8bmctdGVtcGxhdGU+IC0gdGhvc2UgcmVzdWx0cyB3aWxsIGJlIGluIHNlcGFyYXRlIHZpZXdzIHRob3VnaCwgc28gaGVyZSB3ZSBqdXN0IGxlYXZlXG4gICAgICAgICAgICAgICAgLy8gbnVsbCBhcyBhIHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0SW5kZXhJblJhbmdlKHRWaWV3RGF0YSwgbWF0Y2hlZE5vZGVJZHgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHROb2RlID0gdFZpZXdEYXRhW21hdGNoZWROb2RlSWR4XTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjcmVhdGVSZXN1bHRGb3JOb2RlKGxWaWV3LCB0Tm9kZSwgdFF1ZXJ5TWF0Y2hlc1tpICsgMV0sIHRRdWVyeS5tZXRhZGF0YS5yZWFkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbFF1ZXJ5Lm1hdGNoZXMgPSByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBsUXVlcnkubWF0Y2hlcztcbn1cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gdGhhdCBjb2xsZWN0cyAoYWxyZWFkeSBtYXRlcmlhbGl6ZWQpIHF1ZXJ5IHJlc3VsdHMgZnJvbSBhIHRyZWUgb2Ygdmlld3MsXG4gKiBzdGFydGluZyB3aXRoIGEgcHJvdmlkZWQgTFZpZXcuXG4gKi9cbmZ1bmN0aW9uIGNvbGxlY3RRdWVyeVJlc3VsdHModFZpZXcsIGxWaWV3LCBxdWVyeUluZGV4LCByZXN1bHQpIHtcbiAgICBjb25zdCB0UXVlcnkgPSB0Vmlldy5xdWVyaWVzLmdldEJ5SW5kZXgocXVlcnlJbmRleCk7XG4gICAgY29uc3QgdFF1ZXJ5TWF0Y2hlcyA9IHRRdWVyeS5tYXRjaGVzO1xuICAgIGlmICh0UXVlcnlNYXRjaGVzICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGxWaWV3UmVzdWx0cyA9IG1hdGVyaWFsaXplVmlld1Jlc3VsdHModFZpZXcsIGxWaWV3LCB0UXVlcnksIHF1ZXJ5SW5kZXgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRRdWVyeU1hdGNoZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IHROb2RlSWR4ID0gdFF1ZXJ5TWF0Y2hlc1tpXTtcbiAgICAgICAgICAgIGlmICh0Tm9kZUlkeCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChsVmlld1Jlc3VsdHNbaSAvIDJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkUXVlcnlJbmRleCA9IHRRdWVyeU1hdGNoZXNbaSArIDFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlY2xhcmF0aW9uTENvbnRhaW5lciA9IGxWaWV3Wy10Tm9kZUlkeF07XG4gICAgICAgICAgICAgICAgbmdEZXZNb2RlICYmIGFzc2VydExDb250YWluZXIoZGVjbGFyYXRpb25MQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IG1hdGNoZXMgZm9yIHZpZXdzIGluc2VydGVkIGluIHRoaXMgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IENPTlRBSU5FUl9IRUFERVJfT0ZGU0VUOyBpIDwgZGVjbGFyYXRpb25MQ29udGFpbmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVtYmVkZGVkTFZpZXcgPSBkZWNsYXJhdGlvbkxDb250YWluZXJbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbWJlZGRlZExWaWV3W0RFQ0xBUkFUSU9OX0xDT05UQUlORVJdID09PSBlbWJlZGRlZExWaWV3W1BBUkVOVF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3RRdWVyeVJlc3VsdHMoZW1iZWRkZWRMVmlld1tUVklFV10sIGVtYmVkZGVkTFZpZXcsIGNoaWxkUXVlcnlJbmRleCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjb2xsZWN0IG1hdGNoZXMgZm9yIHZpZXdzIGNyZWF0ZWQgZnJvbSB0aGlzIGRlY2xhcmF0aW9uIGNvbnRhaW5lciBhbmQgaW5zZXJ0ZWQgaW50b1xuICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVudCBjb250YWluZXJzXG4gICAgICAgICAgICAgICAgaWYgKGRlY2xhcmF0aW9uTENvbnRhaW5lcltNT1ZFRF9WSUVXU10gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1iZWRkZWRMVmlld3MgPSBkZWNsYXJhdGlvbkxDb250YWluZXJbTU9WRURfVklFV1NdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVtYmVkZGVkTFZpZXdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbWJlZGRlZExWaWV3ID0gZW1iZWRkZWRMVmlld3NbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0UXVlcnlSZXN1bHRzKGVtYmVkZGVkTFZpZXdbVFZJRVddLCBlbWJlZGRlZExWaWV3LCBjaGlsZFF1ZXJ5SW5kZXgsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogUmVmcmVzaGVzIGEgcXVlcnkgYnkgY29tYmluaW5nIG1hdGNoZXMgZnJvbSBhbGwgYWN0aXZlIHZpZXdzIGFuZCByZW1vdmluZyBtYXRjaGVzIGZyb20gZGVsZXRlZFxuICogdmlld3MuXG4gKlxuICogQHJldHVybnMgYHRydWVgIGlmIGEgcXVlcnkgZ290IGRpcnR5IGR1cmluZyBjaGFuZ2UgZGV0ZWN0aW9uIG9yIGlmIHRoaXMgaXMgYSBzdGF0aWMgcXVlcnlcbiAqIHJlc29sdmluZyBpbiBjcmVhdGlvbiBtb2RlLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1cXVlcnlSZWZyZXNoKHF1ZXJ5TGlzdCkge1xuICAgIGNvbnN0IGxWaWV3ID0gZ2V0TFZpZXcoKTtcbiAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgY29uc3QgcXVlcnlJbmRleCA9IGdldEN1cnJlbnRRdWVyeUluZGV4KCk7XG4gICAgc2V0Q3VycmVudFF1ZXJ5SW5kZXgocXVlcnlJbmRleCArIDEpO1xuICAgIGNvbnN0IHRRdWVyeSA9IGdldFRRdWVyeSh0VmlldywgcXVlcnlJbmRleCk7XG4gICAgaWYgKHF1ZXJ5TGlzdC5kaXJ0eSAmJlxuICAgICAgICAoaXNDcmVhdGlvbk1vZGUobFZpZXcpID09PVxuICAgICAgICAgICAgKCh0UXVlcnkubWV0YWRhdGEuZmxhZ3MgJiAyIC8qIGlzU3RhdGljICovKSA9PT0gMiAvKiBpc1N0YXRpYyAqLykpKSB7XG4gICAgICAgIGlmICh0UXVlcnkubWF0Y2hlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcXVlcnlMaXN0LnJlc2V0KFtdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRRdWVyeS5jcm9zc2VzTmdUZW1wbGF0ZSA/XG4gICAgICAgICAgICAgICAgY29sbGVjdFF1ZXJ5UmVzdWx0cyh0VmlldywgbFZpZXcsIHF1ZXJ5SW5kZXgsIFtdKSA6XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxpemVWaWV3UmVzdWx0cyh0VmlldywgbFZpZXcsIHRRdWVyeSwgcXVlcnlJbmRleCk7XG4gICAgICAgICAgICBxdWVyeUxpc3QucmVzZXQocmVzdWx0LCB1bndyYXBFbGVtZW50UmVmKTtcbiAgICAgICAgICAgIHF1ZXJ5TGlzdC5ub3RpZnlPbkNoYW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBDcmVhdGVzIG5ldyBRdWVyeUxpc3QsIHN0b3JlcyB0aGUgcmVmZXJlbmNlIGluIExWaWV3IGFuZCByZXR1cm5zIFF1ZXJ5TGlzdC5cbiAqXG4gKiBAcGFyYW0gcHJlZGljYXRlIFRoZSB0eXBlIGZvciB3aGljaCB0aGUgcXVlcnkgd2lsbCBzZWFyY2hcbiAqIEBwYXJhbSBmbGFncyBGbGFncyBhc3NvY2lhdGVkIHdpdGggdGhlIHF1ZXJ5XG4gKiBAcGFyYW0gcmVhZCBXaGF0IHRvIHNhdmUgaW4gdGhlIHF1ZXJ5XG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtXZpZXdRdWVyeShwcmVkaWNhdGUsIGZsYWdzLCByZWFkKSB7XG4gICAgbmdEZXZNb2RlICYmIGFzc2VydE51bWJlcihmbGFncywgJ0V4cGVjdGluZyBmbGFncycpO1xuICAgIGNvbnN0IHRWaWV3ID0gZ2V0VFZpZXcoKTtcbiAgICBpZiAodFZpZXcuZmlyc3RDcmVhdGVQYXNzKSB7XG4gICAgICAgIGNyZWF0ZVRRdWVyeSh0VmlldywgbmV3IFRRdWVyeU1ldGFkYXRhXyhwcmVkaWNhdGUsIGZsYWdzLCByZWFkKSwgLTEpO1xuICAgICAgICBpZiAoKGZsYWdzICYgMiAvKiBpc1N0YXRpYyAqLykgPT09IDIgLyogaXNTdGF0aWMgKi8pIHtcbiAgICAgICAgICAgIHRWaWV3LnN0YXRpY1ZpZXdRdWVyaWVzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjcmVhdGVMUXVlcnkodFZpZXcsIGdldExWaWV3KCksIGZsYWdzKTtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIGEgUXVlcnlMaXN0LCBhc3NvY2lhdGVkIHdpdGggYSBjb250ZW50IHF1ZXJ5LCBmb3IgbGF0ZXIgcmVmcmVzaCAocGFydCBvZiBhIHZpZXdcbiAqIHJlZnJlc2gpLlxuICpcbiAqIEBwYXJhbSBkaXJlY3RpdmVJbmRleCBDdXJyZW50IGRpcmVjdGl2ZSBpbmRleFxuICogQHBhcmFtIHByZWRpY2F0ZSBUaGUgdHlwZSBmb3Igd2hpY2ggdGhlIHF1ZXJ5IHdpbGwgc2VhcmNoXG4gKiBAcGFyYW0gZmxhZ3MgRmxhZ3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBxdWVyeVxuICogQHBhcmFtIHJlYWQgV2hhdCB0byBzYXZlIGluIHRoZSBxdWVyeVxuICogQHJldHVybnMgUXVlcnlMaXN0PFQ+XG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtWNvbnRlbnRRdWVyeShkaXJlY3RpdmVJbmRleCwgcHJlZGljYXRlLCBmbGFncywgcmVhZCkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROdW1iZXIoZmxhZ3MsICdFeHBlY3RpbmcgZmxhZ3MnKTtcbiAgICBjb25zdCB0VmlldyA9IGdldFRWaWV3KCk7XG4gICAgaWYgKHRWaWV3LmZpcnN0Q3JlYXRlUGFzcykge1xuICAgICAgICBjb25zdCB0Tm9kZSA9IGdldEN1cnJlbnRUTm9kZSgpO1xuICAgICAgICBjcmVhdGVUUXVlcnkodFZpZXcsIG5ldyBUUXVlcnlNZXRhZGF0YV8ocHJlZGljYXRlLCBmbGFncywgcmVhZCksIHROb2RlLmluZGV4KTtcbiAgICAgICAgc2F2ZUNvbnRlbnRRdWVyeUFuZERpcmVjdGl2ZUluZGV4KHRWaWV3LCBkaXJlY3RpdmVJbmRleCk7XG4gICAgICAgIGlmICgoZmxhZ3MgJiAyIC8qIGlzU3RhdGljICovKSA9PT0gMiAvKiBpc1N0YXRpYyAqLykge1xuICAgICAgICAgICAgdFZpZXcuc3RhdGljQ29udGVudFF1ZXJpZXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZUxRdWVyeSh0VmlldywgZ2V0TFZpZXcoKSwgZmxhZ3MpO1xufVxuLyoqXG4gKiBMb2FkcyBhIFF1ZXJ5TGlzdCBjb3JyZXNwb25kaW5nIHRvIHRoZSBjdXJyZW50IHZpZXcgb3IgY29udGVudCBxdWVyeS5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1bG9hZFF1ZXJ5KCkge1xuICAgIHJldHVybiBsb2FkUXVlcnlJbnRlcm5hbChnZXRMVmlldygpLCBnZXRDdXJyZW50UXVlcnlJbmRleCgpKTtcbn1cbmZ1bmN0aW9uIGxvYWRRdWVyeUludGVybmFsKGxWaWV3LCBxdWVyeUluZGV4KSB7XG4gICAgbmdEZXZNb2RlICYmXG4gICAgICAgIGFzc2VydERlZmluZWQobFZpZXdbUVVFUklFU10sICdMUXVlcmllcyBzaG91bGQgYmUgZGVmaW5lZCB3aGVuIHRyeWluZyB0byBsb2FkIGEgcXVlcnknKTtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0SW5kZXhJblJhbmdlKGxWaWV3W1FVRVJJRVNdLnF1ZXJpZXMsIHF1ZXJ5SW5kZXgpO1xuICAgIHJldHVybiBsVmlld1tRVUVSSUVTXS5xdWVyaWVzW3F1ZXJ5SW5kZXhdLnF1ZXJ5TGlzdDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUxRdWVyeSh0VmlldywgbFZpZXcsIGZsYWdzKSB7XG4gICAgY29uc3QgcXVlcnlMaXN0ID0gbmV3IFF1ZXJ5TGlzdCgoZmxhZ3MgJiA0IC8qIGVtaXREaXN0aW5jdENoYW5nZXNPbmx5ICovKSA9PT0gNCAvKiBlbWl0RGlzdGluY3RDaGFuZ2VzT25seSAqLyk7XG4gICAgc3RvcmVDbGVhbnVwV2l0aENvbnRleHQodFZpZXcsIGxWaWV3LCBxdWVyeUxpc3QsIHF1ZXJ5TGlzdC5kZXN0cm95KTtcbiAgICBpZiAobFZpZXdbUVVFUklFU10gPT09IG51bGwpXG4gICAgICAgIGxWaWV3W1FVRVJJRVNdID0gbmV3IExRdWVyaWVzXygpO1xuICAgIGxWaWV3W1FVRVJJRVNdLnF1ZXJpZXMucHVzaChuZXcgTFF1ZXJ5XyhxdWVyeUxpc3QpKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVRRdWVyeSh0VmlldywgbWV0YWRhdGEsIG5vZGVJbmRleCkge1xuICAgIGlmICh0Vmlldy5xdWVyaWVzID09PSBudWxsKVxuICAgICAgICB0Vmlldy5xdWVyaWVzID0gbmV3IFRRdWVyaWVzXygpO1xuICAgIHRWaWV3LnF1ZXJpZXMudHJhY2sobmV3IFRRdWVyeV8obWV0YWRhdGEsIG5vZGVJbmRleCkpO1xufVxuZnVuY3Rpb24gc2F2ZUNvbnRlbnRRdWVyeUFuZERpcmVjdGl2ZUluZGV4KHRWaWV3LCBkaXJlY3RpdmVJbmRleCkge1xuICAgIGNvbnN0IHRWaWV3Q29udGVudFF1ZXJpZXMgPSB0Vmlldy5jb250ZW50UXVlcmllcyB8fCAodFZpZXcuY29udGVudFF1ZXJpZXMgPSBbXSk7XG4gICAgY29uc3QgbGFzdFNhdmVkRGlyZWN0aXZlSW5kZXggPSB0Vmlld0NvbnRlbnRRdWVyaWVzLmxlbmd0aCA/IHRWaWV3Q29udGVudFF1ZXJpZXNbdFZpZXdDb250ZW50UXVlcmllcy5sZW5ndGggLSAxXSA6IC0xO1xuICAgIGlmIChkaXJlY3RpdmVJbmRleCAhPT0gbGFzdFNhdmVkRGlyZWN0aXZlSW5kZXgpIHtcbiAgICAgICAgdFZpZXdDb250ZW50UXVlcmllcy5wdXNoKHRWaWV3LnF1ZXJpZXMubGVuZ3RoIC0gMSwgZGlyZWN0aXZlSW5kZXgpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFRRdWVyeSh0VmlldywgaW5kZXgpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZCh0Vmlldy5xdWVyaWVzLCAnVFF1ZXJpZXMgbXVzdCBiZSBkZWZpbmVkIHRvIHJldHJpZXZlIGEgVFF1ZXJ5Jyk7XG4gICAgcmV0dXJuIHRWaWV3LnF1ZXJpZXMuZ2V0QnlJbmRleChpbmRleCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBSZXRyaWV2ZXMgYFRlbXBsYXRlUmVmYCBpbnN0YW5jZSBmcm9tIGBJbmplY3RvcmAgd2hlbiBhIGxvY2FsIHJlZmVyZW5jZSBpcyBwbGFjZWQgb24gdGhlXG4gKiBgPG5nLXRlbXBsYXRlPmAgZWxlbWVudC5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1dGVtcGxhdGVSZWZFeHRyYWN0b3IodE5vZGUsIGxWaWV3KSB7XG4gICAgcmV0dXJuIGNyZWF0ZVRlbXBsYXRlUmVmKHROb2RlLCBsVmlldyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQSBtYXBwaW5nIG9mIHRoZSBAYW5ndWxhci9jb3JlIEFQSSBzdXJmYWNlIHVzZWQgaW4gZ2VuZXJhdGVkIGV4cHJlc3Npb25zIHRvIHRoZSBhY3R1YWwgc3ltYm9scy5cbiAqXG4gKiBUaGlzIHNob3VsZCBiZSBrZXB0IHVwIHRvIGRhdGUgd2l0aCB0aGUgcHVibGljIGV4cG9ydHMgb2YgQGFuZ3VsYXIvY29yZS5cbiAqL1xuY29uc3QgYW5ndWxhckNvcmVFbnYgPSAoKCkgPT4gKHtcbiAgICAnybXJtWF0dHJpYnV0ZSc6IMm1ybVhdHRyaWJ1dGUsXG4gICAgJ8m1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTEnOiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGUxLFxuICAgICfJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGUyJzogybXJtWF0dHJpYnV0ZUludGVycG9sYXRlMixcbiAgICAnybXJtWF0dHJpYnV0ZUludGVycG9sYXRlMyc6IMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTMsXG4gICAgJ8m1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTQnOiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU0LFxuICAgICfJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU1JzogybXJtWF0dHJpYnV0ZUludGVycG9sYXRlNSxcbiAgICAnybXJtWF0dHJpYnV0ZUludGVycG9sYXRlNic6IMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTYsXG4gICAgJ8m1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZTcnOiDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU3LFxuICAgICfJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU4JzogybXJtWF0dHJpYnV0ZUludGVycG9sYXRlOCxcbiAgICAnybXJtWF0dHJpYnV0ZUludGVycG9sYXRlVic6IMm1ybVhdHRyaWJ1dGVJbnRlcnBvbGF0ZVYsXG4gICAgJ8m1ybVkZWZpbmVDb21wb25lbnQnOiDJtcm1ZGVmaW5lQ29tcG9uZW50LFxuICAgICfJtcm1ZGVmaW5lRGlyZWN0aXZlJzogybXJtWRlZmluZURpcmVjdGl2ZSxcbiAgICAnybXJtWRlZmluZUluamVjdGFibGUnOiDJtcm1ZGVmaW5lSW5qZWN0YWJsZSxcbiAgICAnybXJtWRlZmluZUluamVjdG9yJzogybXJtWRlZmluZUluamVjdG9yLFxuICAgICfJtcm1ZGVmaW5lTmdNb2R1bGUnOiDJtcm1ZGVmaW5lTmdNb2R1bGUsXG4gICAgJ8m1ybVkZWZpbmVQaXBlJzogybXJtWRlZmluZVBpcGUsXG4gICAgJ8m1ybVkaXJlY3RpdmVJbmplY3QnOiDJtcm1ZGlyZWN0aXZlSW5qZWN0LFxuICAgICfJtcm1Z2V0SW5oZXJpdGVkRmFjdG9yeSc6IMm1ybVnZXRJbmhlcml0ZWRGYWN0b3J5LFxuICAgICfJtcm1aW5qZWN0JzogybXJtWluamVjdCxcbiAgICAnybXJtWluamVjdEF0dHJpYnV0ZSc6IMm1ybVpbmplY3RBdHRyaWJ1dGUsXG4gICAgJ8m1ybVpbnZhbGlkRmFjdG9yeSc6IMm1ybVpbnZhbGlkRmFjdG9yeSxcbiAgICAnybXJtWludmFsaWRGYWN0b3J5RGVwJzogybXJtWludmFsaWRGYWN0b3J5RGVwLFxuICAgICfJtcm1dGVtcGxhdGVSZWZFeHRyYWN0b3InOiDJtcm1dGVtcGxhdGVSZWZFeHRyYWN0b3IsXG4gICAgJ8m1ybVOZ09uQ2hhbmdlc0ZlYXR1cmUnOiDJtcm1TmdPbkNoYW5nZXNGZWF0dXJlLFxuICAgICfJtcm1UHJvdmlkZXJzRmVhdHVyZSc6IMm1ybVQcm92aWRlcnNGZWF0dXJlLFxuICAgICfJtcm1Q29weURlZmluaXRpb25GZWF0dXJlJzogybXJtUNvcHlEZWZpbml0aW9uRmVhdHVyZSxcbiAgICAnybXJtUluaGVyaXREZWZpbml0aW9uRmVhdHVyZSc6IMm1ybVJbmhlcml0RGVmaW5pdGlvbkZlYXR1cmUsXG4gICAgJ8m1ybVuZXh0Q29udGV4dCc6IMm1ybVuZXh0Q29udGV4dCxcbiAgICAnybXJtW5hbWVzcGFjZUhUTUwnOiDJtcm1bmFtZXNwYWNlSFRNTCxcbiAgICAnybXJtW5hbWVzcGFjZU1hdGhNTCc6IMm1ybVuYW1lc3BhY2VNYXRoTUwsXG4gICAgJ8m1ybVuYW1lc3BhY2VTVkcnOiDJtcm1bmFtZXNwYWNlU1ZHLFxuICAgICfJtcm1ZW5hYmxlQmluZGluZ3MnOiDJtcm1ZW5hYmxlQmluZGluZ3MsXG4gICAgJ8m1ybVkaXNhYmxlQmluZGluZ3MnOiDJtcm1ZGlzYWJsZUJpbmRpbmdzLFxuICAgICfJtcm1ZWxlbWVudFN0YXJ0JzogybXJtWVsZW1lbnRTdGFydCxcbiAgICAnybXJtWVsZW1lbnRFbmQnOiDJtcm1ZWxlbWVudEVuZCxcbiAgICAnybXJtWVsZW1lbnQnOiDJtcm1ZWxlbWVudCxcbiAgICAnybXJtWVsZW1lbnRDb250YWluZXJTdGFydCc6IMm1ybVlbGVtZW50Q29udGFpbmVyU3RhcnQsXG4gICAgJ8m1ybVlbGVtZW50Q29udGFpbmVyRW5kJzogybXJtWVsZW1lbnRDb250YWluZXJFbmQsXG4gICAgJ8m1ybVlbGVtZW50Q29udGFpbmVyJzogybXJtWVsZW1lbnRDb250YWluZXIsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb24wJzogybXJtXB1cmVGdW5jdGlvbjAsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb24xJzogybXJtXB1cmVGdW5jdGlvbjEsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb24yJzogybXJtXB1cmVGdW5jdGlvbjIsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb24zJzogybXJtXB1cmVGdW5jdGlvbjMsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb240JzogybXJtXB1cmVGdW5jdGlvbjQsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb241JzogybXJtXB1cmVGdW5jdGlvbjUsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb242JzogybXJtXB1cmVGdW5jdGlvbjYsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb243JzogybXJtXB1cmVGdW5jdGlvbjcsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb244JzogybXJtXB1cmVGdW5jdGlvbjgsXG4gICAgJ8m1ybVwdXJlRnVuY3Rpb25WJzogybXJtXB1cmVGdW5jdGlvblYsXG4gICAgJ8m1ybVnZXRDdXJyZW50Vmlldyc6IMm1ybVnZXRDdXJyZW50VmlldyxcbiAgICAnybXJtXJlc3RvcmVWaWV3JzogybXJtXJlc3RvcmVWaWV3LFxuICAgICfJtcm1bGlzdGVuZXInOiDJtcm1bGlzdGVuZXIsXG4gICAgJ8m1ybVwcm9qZWN0aW9uJzogybXJtXByb2plY3Rpb24sXG4gICAgJ8m1ybVzeW50aGV0aWNIb3N0UHJvcGVydHknOiDJtcm1c3ludGhldGljSG9zdFByb3BlcnR5LFxuICAgICfJtcm1c3ludGhldGljSG9zdExpc3RlbmVyJzogybXJtXN5bnRoZXRpY0hvc3RMaXN0ZW5lcixcbiAgICAnybXJtXBpcGVCaW5kMSc6IMm1ybVwaXBlQmluZDEsXG4gICAgJ8m1ybVwaXBlQmluZDInOiDJtcm1cGlwZUJpbmQyLFxuICAgICfJtcm1cGlwZUJpbmQzJzogybXJtXBpcGVCaW5kMyxcbiAgICAnybXJtXBpcGVCaW5kNCc6IMm1ybVwaXBlQmluZDQsXG4gICAgJ8m1ybVwaXBlQmluZFYnOiDJtcm1cGlwZUJpbmRWLFxuICAgICfJtcm1cHJvamVjdGlvbkRlZic6IMm1ybVwcm9qZWN0aW9uRGVmLFxuICAgICfJtcm1aG9zdFByb3BlcnR5JzogybXJtWhvc3RQcm9wZXJ0eSxcbiAgICAnybXJtXByb3BlcnR5JzogybXJtXByb3BlcnR5LFxuICAgICfJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZSc6IMm1ybVwcm9wZXJ0eUludGVycG9sYXRlLFxuICAgICfJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTEnOiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTEsXG4gICAgJ8m1ybVwcm9wZXJ0eUludGVycG9sYXRlMic6IMm1ybVwcm9wZXJ0eUludGVycG9sYXRlMixcbiAgICAnybXJtXByb3BlcnR5SW50ZXJwb2xhdGUzJzogybXJtXByb3BlcnR5SW50ZXJwb2xhdGUzLFxuICAgICfJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTQnOiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTQsXG4gICAgJ8m1ybVwcm9wZXJ0eUludGVycG9sYXRlNSc6IMm1ybVwcm9wZXJ0eUludGVycG9sYXRlNSxcbiAgICAnybXJtXByb3BlcnR5SW50ZXJwb2xhdGU2JzogybXJtXByb3BlcnR5SW50ZXJwb2xhdGU2LFxuICAgICfJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTcnOiDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTcsXG4gICAgJ8m1ybVwcm9wZXJ0eUludGVycG9sYXRlOCc6IMm1ybVwcm9wZXJ0eUludGVycG9sYXRlOCxcbiAgICAnybXJtXByb3BlcnR5SW50ZXJwb2xhdGVWJzogybXJtXByb3BlcnR5SW50ZXJwb2xhdGVWLFxuICAgICfJtcm1cGlwZSc6IMm1ybVwaXBlLFxuICAgICfJtcm1cXVlcnlSZWZyZXNoJzogybXJtXF1ZXJ5UmVmcmVzaCxcbiAgICAnybXJtXZpZXdRdWVyeSc6IMm1ybV2aWV3UXVlcnksXG4gICAgJ8m1ybVsb2FkUXVlcnknOiDJtcm1bG9hZFF1ZXJ5LFxuICAgICfJtcm1Y29udGVudFF1ZXJ5JzogybXJtWNvbnRlbnRRdWVyeSxcbiAgICAnybXJtXJlZmVyZW5jZSc6IMm1ybVyZWZlcmVuY2UsXG4gICAgJ8m1ybVjbGFzc01hcCc6IMm1ybVjbGFzc01hcCxcbiAgICAnybXJtWNsYXNzTWFwSW50ZXJwb2xhdGUxJzogybXJtWNsYXNzTWFwSW50ZXJwb2xhdGUxLFxuICAgICfJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTInOiDJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTIsXG4gICAgJ8m1ybVjbGFzc01hcEludGVycG9sYXRlMyc6IMm1ybVjbGFzc01hcEludGVycG9sYXRlMyxcbiAgICAnybXJtWNsYXNzTWFwSW50ZXJwb2xhdGU0JzogybXJtWNsYXNzTWFwSW50ZXJwb2xhdGU0LFxuICAgICfJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTUnOiDJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTUsXG4gICAgJ8m1ybVjbGFzc01hcEludGVycG9sYXRlNic6IMm1ybVjbGFzc01hcEludGVycG9sYXRlNixcbiAgICAnybXJtWNsYXNzTWFwSW50ZXJwb2xhdGU3JzogybXJtWNsYXNzTWFwSW50ZXJwb2xhdGU3LFxuICAgICfJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTgnOiDJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTgsXG4gICAgJ8m1ybVjbGFzc01hcEludGVycG9sYXRlVic6IMm1ybVjbGFzc01hcEludGVycG9sYXRlVixcbiAgICAnybXJtXN0eWxlTWFwJzogybXJtXN0eWxlTWFwLFxuICAgICfJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTEnOiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTEsXG4gICAgJ8m1ybVzdHlsZU1hcEludGVycG9sYXRlMic6IMm1ybVzdHlsZU1hcEludGVycG9sYXRlMixcbiAgICAnybXJtXN0eWxlTWFwSW50ZXJwb2xhdGUzJzogybXJtXN0eWxlTWFwSW50ZXJwb2xhdGUzLFxuICAgICfJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTQnOiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTQsXG4gICAgJ8m1ybVzdHlsZU1hcEludGVycG9sYXRlNSc6IMm1ybVzdHlsZU1hcEludGVycG9sYXRlNSxcbiAgICAnybXJtXN0eWxlTWFwSW50ZXJwb2xhdGU2JzogybXJtXN0eWxlTWFwSW50ZXJwb2xhdGU2LFxuICAgICfJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTcnOiDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTcsXG4gICAgJ8m1ybVzdHlsZU1hcEludGVycG9sYXRlOCc6IMm1ybVzdHlsZU1hcEludGVycG9sYXRlOCxcbiAgICAnybXJtXN0eWxlTWFwSW50ZXJwb2xhdGVWJzogybXJtXN0eWxlTWFwSW50ZXJwb2xhdGVWLFxuICAgICfJtcm1c3R5bGVQcm9wJzogybXJtXN0eWxlUHJvcCxcbiAgICAnybXJtXN0eWxlUHJvcEludGVycG9sYXRlMSc6IMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTEsXG4gICAgJ8m1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTInOiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGUyLFxuICAgICfJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGUzJzogybXJtXN0eWxlUHJvcEludGVycG9sYXRlMyxcbiAgICAnybXJtXN0eWxlUHJvcEludGVycG9sYXRlNCc6IMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTQsXG4gICAgJ8m1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTUnOiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGU1LFxuICAgICfJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGU2JzogybXJtXN0eWxlUHJvcEludGVycG9sYXRlNixcbiAgICAnybXJtXN0eWxlUHJvcEludGVycG9sYXRlNyc6IMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTcsXG4gICAgJ8m1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTgnOiDJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGU4LFxuICAgICfJtcm1c3R5bGVQcm9wSW50ZXJwb2xhdGVWJzogybXJtXN0eWxlUHJvcEludGVycG9sYXRlVixcbiAgICAnybXJtWNsYXNzUHJvcCc6IMm1ybVjbGFzc1Byb3AsXG4gICAgJ8m1ybVhZHZhbmNlJzogybXJtWFkdmFuY2UsXG4gICAgJ8m1ybV0ZW1wbGF0ZSc6IMm1ybV0ZW1wbGF0ZSxcbiAgICAnybXJtXRleHQnOiDJtcm1dGV4dCxcbiAgICAnybXJtXRleHRJbnRlcnBvbGF0ZSc6IMm1ybV0ZXh0SW50ZXJwb2xhdGUsXG4gICAgJ8m1ybV0ZXh0SW50ZXJwb2xhdGUxJzogybXJtXRleHRJbnRlcnBvbGF0ZTEsXG4gICAgJ8m1ybV0ZXh0SW50ZXJwb2xhdGUyJzogybXJtXRleHRJbnRlcnBvbGF0ZTIsXG4gICAgJ8m1ybV0ZXh0SW50ZXJwb2xhdGUzJzogybXJtXRleHRJbnRlcnBvbGF0ZTMsXG4gICAgJ8m1ybV0ZXh0SW50ZXJwb2xhdGU0JzogybXJtXRleHRJbnRlcnBvbGF0ZTQsXG4gICAgJ8m1ybV0ZXh0SW50ZXJwb2xhdGU1JzogybXJtXRleHRJbnRlcnBvbGF0ZTUsXG4gICAgJ8m1ybV0ZXh0SW50ZXJwb2xhdGU2JzogybXJtXRleHRJbnRlcnBvbGF0ZTYsXG4gICAgJ8m1ybV0ZXh0SW50ZXJwb2xhdGU3JzogybXJtXRleHRJbnRlcnBvbGF0ZTcsXG4gICAgJ8m1ybV0ZXh0SW50ZXJwb2xhdGU4JzogybXJtXRleHRJbnRlcnBvbGF0ZTgsXG4gICAgJ8m1ybV0ZXh0SW50ZXJwb2xhdGVWJzogybXJtXRleHRJbnRlcnBvbGF0ZVYsXG4gICAgJ8m1ybVpMThuJzogybXJtWkxOG4sXG4gICAgJ8m1ybVpMThuQXR0cmlidXRlcyc6IMm1ybVpMThuQXR0cmlidXRlcyxcbiAgICAnybXJtWkxOG5FeHAnOiDJtcm1aTE4bkV4cCxcbiAgICAnybXJtWkxOG5TdGFydCc6IMm1ybVpMThuU3RhcnQsXG4gICAgJ8m1ybVpMThuRW5kJzogybXJtWkxOG5FbmQsXG4gICAgJ8m1ybVpMThuQXBwbHknOiDJtcm1aTE4bkFwcGx5LFxuICAgICfJtcm1aTE4blBvc3Rwcm9jZXNzJzogybXJtWkxOG5Qb3N0cHJvY2VzcyxcbiAgICAnybXJtXJlc29sdmVXaW5kb3cnOiDJtcm1cmVzb2x2ZVdpbmRvdyxcbiAgICAnybXJtXJlc29sdmVEb2N1bWVudCc6IMm1ybVyZXNvbHZlRG9jdW1lbnQsXG4gICAgJ8m1ybVyZXNvbHZlQm9keSc6IMm1ybVyZXNvbHZlQm9keSxcbiAgICAnybXJtXNldENvbXBvbmVudFNjb3BlJzogybXJtXNldENvbXBvbmVudFNjb3BlLFxuICAgICfJtcm1c2V0TmdNb2R1bGVTY29wZSc6IMm1ybVzZXROZ01vZHVsZVNjb3BlLFxuICAgICfJtcm1c2FuaXRpemVIdG1sJzogybXJtXNhbml0aXplSHRtbCxcbiAgICAnybXJtXNhbml0aXplU3R5bGUnOiDJtcm1c2FuaXRpemVTdHlsZSxcbiAgICAnybXJtXNhbml0aXplUmVzb3VyY2VVcmwnOiDJtcm1c2FuaXRpemVSZXNvdXJjZVVybCxcbiAgICAnybXJtXNhbml0aXplU2NyaXB0JzogybXJtXNhbml0aXplU2NyaXB0LFxuICAgICfJtcm1c2FuaXRpemVVcmwnOiDJtcm1c2FuaXRpemVVcmwsXG4gICAgJ8m1ybVzYW5pdGl6ZVVybE9yUmVzb3VyY2VVcmwnOiDJtcm1c2FuaXRpemVVcmxPclJlc291cmNlVXJsLFxuICAgICfJtcm1dHJ1c3RDb25zdGFudEh0bWwnOiDJtcm1dHJ1c3RDb25zdGFudEh0bWwsXG4gICAgJ8m1ybV0cnVzdENvbnN0YW50UmVzb3VyY2VVcmwnOiDJtcm1dHJ1c3RDb25zdGFudFJlc291cmNlVXJsLFxuICAgICdmb3J3YXJkUmVmJzogZm9yd2FyZFJlZixcbiAgICAncmVzb2x2ZUZvcndhcmRSZWYnOiByZXNvbHZlRm9yd2FyZFJlZixcbn0pKSgpO1xuXG5sZXQgaml0T3B0aW9ucyA9IG51bGw7XG5mdW5jdGlvbiBzZXRKaXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICBpZiAoaml0T3B0aW9ucyAhPT0gbnVsbCkge1xuICAgICAgICBpZiAob3B0aW9ucy5kZWZhdWx0RW5jYXBzdWxhdGlvbiAhPT0gaml0T3B0aW9ucy5kZWZhdWx0RW5jYXBzdWxhdGlvbikge1xuICAgICAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignUHJvdmlkZWQgdmFsdWUgZm9yIGBkZWZhdWx0RW5jYXBzdWxhdGlvbmAgY2FuIG5vdCBiZSBjaGFuZ2VkIG9uY2UgaXQgaGFzIGJlZW4gc2V0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnByZXNlcnZlV2hpdGVzcGFjZXMgIT09IGppdE9wdGlvbnMucHJlc2VydmVXaGl0ZXNwYWNlcykge1xuICAgICAgICAgICAgbmdEZXZNb2RlICYmXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignUHJvdmlkZWQgdmFsdWUgZm9yIGBwcmVzZXJ2ZVdoaXRlc3BhY2VzYCBjYW4gbm90IGJlIGNoYW5nZWQgb25jZSBpdCBoYXMgYmVlbiBzZXQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgaml0T3B0aW9ucyA9IG9wdGlvbnM7XG59XG5mdW5jdGlvbiBnZXRKaXRPcHRpb25zKCkge1xuICAgIHJldHVybiBqaXRPcHRpb25zO1xufVxuZnVuY3Rpb24gcmVzZXRKaXRPcHRpb25zKCkge1xuICAgIGppdE9wdGlvbnMgPSBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IG1vZHVsZVF1ZXVlID0gW107XG4vKipcbiAqIEVucXVldWVzIG1vZHVsZURlZiB0byBiZSBjaGVja2VkIGxhdGVyIHRvIHNlZSBpZiBzY29wZSBjYW4gYmUgc2V0IG9uIGl0c1xuICogY29tcG9uZW50IGRlY2xhcmF0aW9ucy5cbiAqL1xuZnVuY3Rpb24gZW5xdWV1ZU1vZHVsZUZvckRlbGF5ZWRTY29waW5nKG1vZHVsZVR5cGUsIG5nTW9kdWxlKSB7XG4gICAgbW9kdWxlUXVldWUucHVzaCh7IG1vZHVsZVR5cGUsIG5nTW9kdWxlIH0pO1xufVxubGV0IGZsdXNoaW5nTW9kdWxlUXVldWUgPSBmYWxzZTtcbi8qKlxuICogTG9vcHMgb3ZlciBxdWV1ZWQgbW9kdWxlIGRlZmluaXRpb25zLCBpZiBhIGdpdmVuIG1vZHVsZSBkZWZpbml0aW9uIGhhcyBhbGwgb2YgaXRzXG4gKiBkZWNsYXJhdGlvbnMgcmVzb2x2ZWQsIGl0IGRlcXVldWVzIHRoYXQgbW9kdWxlIGRlZmluaXRpb24gYW5kIHNldHMgdGhlIHNjb3BlIG9uXG4gKiBpdHMgZGVjbGFyYXRpb25zLlxuICovXG5mdW5jdGlvbiBmbHVzaE1vZHVsZVNjb3BpbmdRdWV1ZUFzTXVjaEFzUG9zc2libGUoKSB7XG4gICAgaWYgKCFmbHVzaGluZ01vZHVsZVF1ZXVlKSB7XG4gICAgICAgIGZsdXNoaW5nTW9kdWxlUXVldWUgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IG1vZHVsZVF1ZXVlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBtb2R1bGVUeXBlLCBuZ01vZHVsZSB9ID0gbW9kdWxlUXVldWVbaV07XG4gICAgICAgICAgICAgICAgaWYgKG5nTW9kdWxlLmRlY2xhcmF0aW9ucyAmJiBuZ01vZHVsZS5kZWNsYXJhdGlvbnMuZXZlcnkoaXNSZXNvbHZlZERlY2xhcmF0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkZXF1ZXVlXG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZVF1ZXVlLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2NvcGVPbkRlY2xhcmVkQ29tcG9uZW50cyhtb2R1bGVUeXBlLCBuZ01vZHVsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgZmx1c2hpbmdNb2R1bGVRdWV1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIHRydXRoeSBpZiBhIGRlY2xhcmF0aW9uIGhhcyByZXNvbHZlZC4gSWYgdGhlIGRlY2xhcmF0aW9uIGhhcHBlbnMgdG8gYmVcbiAqIGFuIGFycmF5IG9mIGRlY2xhcmF0aW9ucywgaXQgd2lsbCByZWN1cnNlIHRvIGNoZWNrIGVhY2ggZGVjbGFyYXRpb24gaW4gdGhhdCBhcnJheVxuICogKHdoaWNoIG1heSBhbHNvIGJlIGFycmF5cykuXG4gKi9cbmZ1bmN0aW9uIGlzUmVzb2x2ZWREZWNsYXJhdGlvbihkZWNsYXJhdGlvbikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGRlY2xhcmF0aW9uKSkge1xuICAgICAgICByZXR1cm4gZGVjbGFyYXRpb24uZXZlcnkoaXNSZXNvbHZlZERlY2xhcmF0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuICEhcmVzb2x2ZUZvcndhcmRSZWYoZGVjbGFyYXRpb24pO1xufVxuLyoqXG4gKiBDb21waWxlcyBhIG1vZHVsZSBpbiBKSVQgbW9kZS5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGF1dG9tYXRpY2FsbHkgZ2V0cyBjYWxsZWQgd2hlbiBhIGNsYXNzIGhhcyBhIGBATmdNb2R1bGVgIGRlY29yYXRvci5cbiAqL1xuZnVuY3Rpb24gY29tcGlsZU5nTW9kdWxlKG1vZHVsZVR5cGUsIG5nTW9kdWxlID0ge30pIHtcbiAgICBjb21waWxlTmdNb2R1bGVEZWZzKG1vZHVsZVR5cGUsIG5nTW9kdWxlKTtcbiAgICAvLyBCZWNhdXNlIHdlIGRvbid0IGtub3cgaWYgYWxsIGRlY2xhcmF0aW9ucyBoYXZlIHJlc29sdmVkIHlldCBhdCB0aGUgbW9tZW50IHRoZVxuICAgIC8vIE5nTW9kdWxlIGRlY29yYXRvciBpcyBleGVjdXRpbmcsIHdlJ3JlIGVucXVldWVpbmcgdGhlIHNldHRpbmcgb2YgbW9kdWxlIHNjb3BlXG4gICAgLy8gb24gaXRzIGRlY2xhcmF0aW9ucyB0byBiZSBydW4gYXQgYSBsYXRlciB0aW1lIHdoZW4gYWxsIGRlY2xhcmF0aW9ucyBmb3IgdGhlIG1vZHVsZSxcbiAgICAvLyBpbmNsdWRpbmcgZm9yd2FyZCByZWZzLCBoYXZlIHJlc29sdmVkLlxuICAgIGVucXVldWVNb2R1bGVGb3JEZWxheWVkU2NvcGluZyhtb2R1bGVUeXBlLCBuZ01vZHVsZSk7XG59XG4vKipcbiAqIENvbXBpbGVzIGFuZCBhZGRzIHRoZSBgybVtb2RgLCBgybVmYWNgIGFuZCBgybVpbmpgIHByb3BlcnRpZXMgdG8gdGhlIG1vZHVsZSBjbGFzcy5cbiAqXG4gKiBJdCdzIHBvc3NpYmxlIHRvIGNvbXBpbGUgYSBtb2R1bGUgdmlhIHRoaXMgQVBJIHdoaWNoIHdpbGwgYWxsb3cgZHVwbGljYXRlIGRlY2xhcmF0aW9ucyBpbiBpdHNcbiAqIHJvb3QuXG4gKi9cbmZ1bmN0aW9uIGNvbXBpbGVOZ01vZHVsZURlZnMobW9kdWxlVHlwZSwgbmdNb2R1bGUsIGFsbG93RHVwbGljYXRlRGVjbGFyYXRpb25zSW5Sb290ID0gZmFsc2UpIHtcbiAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RGVmaW5lZChtb2R1bGVUeXBlLCAnUmVxdWlyZWQgdmFsdWUgbW9kdWxlVHlwZScpO1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnREZWZpbmVkKG5nTW9kdWxlLCAnUmVxdWlyZWQgdmFsdWUgbmdNb2R1bGUnKTtcbiAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBmbGF0dGVuKG5nTW9kdWxlLmRlY2xhcmF0aW9ucyB8fCBFTVBUWV9BUlJBWSk7XG4gICAgbGV0IG5nTW9kdWxlRGVmID0gbnVsbDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlVHlwZSwgTkdfTU9EX0RFRiwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG5nTW9kdWxlRGVmID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5nRGV2TW9kZSAmJiBuZ01vZHVsZS5pbXBvcnRzICYmIG5nTW9kdWxlLmltcG9ydHMuaW5kZXhPZihtb2R1bGVUeXBlKSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gYXNzZXJ0IHRoaXMgaW1tZWRpYXRlbHksIGJlY2F1c2UgYWxsb3dpbmcgaXQgdG8gY29udGludWUgd2lsbCBjYXVzZSBpdCB0b1xuICAgICAgICAgICAgICAgICAgICAvLyBnbyBpbnRvIGFuIGluZmluaXRlIGxvb3AgYmVmb3JlIHdlJ3ZlIHJlYWNoZWQgdGhlIHBvaW50IHdoZXJlIHdlIHRocm93IGFsbCB0aGUgZXJyb3JzLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCcke3N0cmluZ2lmeUZvckVycm9yKG1vZHVsZVR5cGUpfScgbW9kdWxlIGNhbid0IGltcG9ydCBpdHNlbGZgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7IHVzYWdlOiAwIC8qIERlY29yYXRvciAqLywga2luZDogJ05nTW9kdWxlJywgdHlwZTogbW9kdWxlVHlwZSB9KTtcbiAgICAgICAgICAgICAgICBuZ01vZHVsZURlZiA9IGNvbXBpbGVyLmNvbXBpbGVOZ01vZHVsZShhbmd1bGFyQ29yZUVudiwgYG5nOi8vLyR7bW9kdWxlVHlwZS5uYW1lfS/JtW1vZC5qc2AsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogbW9kdWxlVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgYm9vdHN0cmFwOiBmbGF0dGVuKG5nTW9kdWxlLmJvb3RzdHJhcCB8fCBFTVBUWV9BUlJBWSkubWFwKHJlc29sdmVGb3J3YXJkUmVmKSxcbiAgICAgICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBkZWNsYXJhdGlvbnMubWFwKHJlc29sdmVGb3J3YXJkUmVmKSxcbiAgICAgICAgICAgICAgICAgICAgaW1wb3J0czogZmxhdHRlbihuZ01vZHVsZS5pbXBvcnRzIHx8IEVNUFRZX0FSUkFZKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChyZXNvbHZlRm9yd2FyZFJlZilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZXhwYW5kTW9kdWxlV2l0aFByb3ZpZGVycyksXG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHM6IGZsYXR0ZW4obmdNb2R1bGUuZXhwb3J0cyB8fCBFTVBUWV9BUlJBWSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAocmVzb2x2ZUZvcndhcmRSZWYpXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGV4cGFuZE1vZHVsZVdpdGhQcm92aWRlcnMpLFxuICAgICAgICAgICAgICAgICAgICBzY2hlbWFzOiBuZ01vZHVsZS5zY2hlbWFzID8gZmxhdHRlbihuZ01vZHVsZS5zY2hlbWFzKSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGlkOiBuZ01vZHVsZS5pZCB8fCBudWxsLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIFNldCBgc2NoZW1hc2Agb24gbmdNb2R1bGVEZWYgdG8gYW4gZW1wdHkgYXJyYXkgaW4gSklUIG1vZGUgdG8gaW5kaWNhdGUgdGhhdCBydW50aW1lXG4gICAgICAgICAgICAgICAgLy8gc2hvdWxkIHZlcmlmeSB0aGF0IHRoZXJlIGFyZSBubyB1bmtub3duIGVsZW1lbnRzIGluIGEgdGVtcGxhdGUuIEluIEFPVCBtb2RlLCB0aGF0IGNoZWNrXG4gICAgICAgICAgICAgICAgLy8gaGFwcGVucyBhdCBjb21waWxlIHRpbWUgYW5kIGBzY2hlbWFzYCBpbmZvcm1hdGlvbiBpcyBub3QgcHJlc2VudCBvbiBDb21wb25lbnQgYW5kIE1vZHVsZVxuICAgICAgICAgICAgICAgIC8vIGRlZnMgYWZ0ZXIgY29tcGlsYXRpb24gKHNvIHRoZSBjaGVjayBkb2Vzbid0IGhhcHBlbiB0aGUgc2Vjb25kIHRpbWUgYXQgcnVudGltZSkuXG4gICAgICAgICAgICAgICAgaWYgKCFuZ01vZHVsZURlZi5zY2hlbWFzKSB7XG4gICAgICAgICAgICAgICAgICAgIG5nTW9kdWxlRGVmLnNjaGVtYXMgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmdNb2R1bGVEZWY7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgbmdGYWN0b3J5RGVmID0gbnVsbDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlVHlwZSwgTkdfRkFDVE9SWV9ERUYsIHtcbiAgICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobmdGYWN0b3J5RGVmID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7IHVzYWdlOiAwIC8qIERlY29yYXRvciAqLywga2luZDogJ05nTW9kdWxlJywgdHlwZTogbW9kdWxlVHlwZSB9KTtcbiAgICAgICAgICAgICAgICBuZ0ZhY3RvcnlEZWYgPSBjb21waWxlci5jb21waWxlRmFjdG9yeShhbmd1bGFyQ29yZUVudiwgYG5nOi8vLyR7bW9kdWxlVHlwZS5uYW1lfS/JtWZhYy5qc2AsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbW9kdWxlVHlwZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBtb2R1bGVUeXBlLFxuICAgICAgICAgICAgICAgICAgICBkZXBzOiByZWZsZWN0RGVwZW5kZW5jaWVzKG1vZHVsZVR5cGUpLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGNvbXBpbGVyLkZhY3RvcnlUYXJnZXQuTmdNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGVBcmd1bWVudENvdW50OiAwLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5nRmFjdG9yeURlZjtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gTWFrZSB0aGUgcHJvcGVydHkgY29uZmlndXJhYmxlIGluIGRldiBtb2RlIHRvIGFsbG93IG92ZXJyaWRpbmcgaW4gdGVzdHNcbiAgICAgICAgY29uZmlndXJhYmxlOiAhIW5nRGV2TW9kZSxcbiAgICB9KTtcbiAgICBsZXQgbmdJbmplY3RvckRlZiA9IG51bGw7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZVR5cGUsIE5HX0lOSl9ERUYsIHtcbiAgICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobmdJbmplY3RvckRlZiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5nRGV2TW9kZSAmJlxuICAgICAgICAgICAgICAgICAgICB2ZXJpZnlTZW1hbnRpY3NPZk5nTW9kdWxlRGVmKG1vZHVsZVR5cGUsIGFsbG93RHVwbGljYXRlRGVjbGFyYXRpb25zSW5Sb290KTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBtb2R1bGVUeXBlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IG1vZHVsZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyczogbmdNb2R1bGUucHJvdmlkZXJzIHx8IEVNUFRZX0FSUkFZLFxuICAgICAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAobmdNb2R1bGUuaW1wb3J0cyB8fCBFTVBUWV9BUlJBWSkubWFwKHJlc29sdmVGb3J3YXJkUmVmKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChuZ01vZHVsZS5leHBvcnRzIHx8IEVNUFRZX0FSUkFZKS5tYXAocmVzb2x2ZUZvcndhcmRSZWYpLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7IHVzYWdlOiAwIC8qIERlY29yYXRvciAqLywga2luZDogJ05nTW9kdWxlJywgdHlwZTogbW9kdWxlVHlwZSB9KTtcbiAgICAgICAgICAgICAgICBuZ0luamVjdG9yRGVmID1cbiAgICAgICAgICAgICAgICAgICAgY29tcGlsZXIuY29tcGlsZUluamVjdG9yKGFuZ3VsYXJDb3JlRW52LCBgbmc6Ly8vJHttb2R1bGVUeXBlLm5hbWV9L8m1aW5qLmpzYCwgbWV0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmdJbmplY3RvckRlZjtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gTWFrZSB0aGUgcHJvcGVydHkgY29uZmlndXJhYmxlIGluIGRldiBtb2RlIHRvIGFsbG93IG92ZXJyaWRpbmcgaW4gdGVzdHNcbiAgICAgICAgY29uZmlndXJhYmxlOiAhIW5nRGV2TW9kZSxcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIHZlcmlmeVNlbWFudGljc09mTmdNb2R1bGVEZWYobW9kdWxlVHlwZSwgYWxsb3dEdXBsaWNhdGVEZWNsYXJhdGlvbnNJblJvb3QsIGltcG9ydGluZ01vZHVsZSkge1xuICAgIGlmICh2ZXJpZmllZE5nTW9kdWxlLmdldChtb2R1bGVUeXBlKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHZlcmlmaWVkTmdNb2R1bGUuc2V0KG1vZHVsZVR5cGUsIHRydWUpO1xuICAgIG1vZHVsZVR5cGUgPSByZXNvbHZlRm9yd2FyZFJlZihtb2R1bGVUeXBlKTtcbiAgICBsZXQgbmdNb2R1bGVEZWY7XG4gICAgaWYgKGltcG9ydGluZ01vZHVsZSkge1xuICAgICAgICBuZ01vZHVsZURlZiA9IGdldE5nTW9kdWxlRGVmKG1vZHVsZVR5cGUpO1xuICAgICAgICBpZiAoIW5nTW9kdWxlRGVmKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuZXhwZWN0ZWQgdmFsdWUgJyR7bW9kdWxlVHlwZS5uYW1lfScgaW1wb3J0ZWQgYnkgdGhlIG1vZHVsZSAnJHtpbXBvcnRpbmdNb2R1bGUubmFtZX0nLiBQbGVhc2UgYWRkIGFuIEBOZ01vZHVsZSBhbm5vdGF0aW9uLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBuZ01vZHVsZURlZiA9IGdldE5nTW9kdWxlRGVmKG1vZHVsZVR5cGUsIHRydWUpO1xuICAgIH1cbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICBjb25zdCBkZWNsYXJhdGlvbnMgPSBtYXliZVVud3JhcEZuKG5nTW9kdWxlRGVmLmRlY2xhcmF0aW9ucyk7XG4gICAgY29uc3QgaW1wb3J0cyA9IG1heWJlVW53cmFwRm4obmdNb2R1bGVEZWYuaW1wb3J0cyk7XG4gICAgZmxhdHRlbihpbXBvcnRzKS5tYXAodW53cmFwTW9kdWxlV2l0aFByb3ZpZGVyc0ltcG9ydHMpLmZvckVhY2gobW9kID0+IHtcbiAgICAgICAgdmVyaWZ5U2VtYW50aWNzT2ZOZ01vZHVsZUltcG9ydChtb2QsIG1vZHVsZVR5cGUpO1xuICAgICAgICB2ZXJpZnlTZW1hbnRpY3NPZk5nTW9kdWxlRGVmKG1vZCwgZmFsc2UsIG1vZHVsZVR5cGUpO1xuICAgIH0pO1xuICAgIGNvbnN0IGV4cG9ydHMgPSBtYXliZVVud3JhcEZuKG5nTW9kdWxlRGVmLmV4cG9ydHMpO1xuICAgIGRlY2xhcmF0aW9ucy5mb3JFYWNoKHZlcmlmeURlY2xhcmF0aW9uc0hhdmVEZWZpbml0aW9ucyk7XG4gICAgZGVjbGFyYXRpb25zLmZvckVhY2godmVyaWZ5RGlyZWN0aXZlc0hhdmVTZWxlY3Rvcik7XG4gICAgY29uc3QgY29tYmluZWREZWNsYXJhdGlvbnMgPSBbXG4gICAgICAgIC4uLmRlY2xhcmF0aW9ucy5tYXAocmVzb2x2ZUZvcndhcmRSZWYpLFxuICAgICAgICAuLi5mbGF0dGVuKGltcG9ydHMubWFwKGNvbXB1dGVDb21iaW5lZEV4cG9ydHMpKS5tYXAocmVzb2x2ZUZvcndhcmRSZWYpLFxuICAgIF07XG4gICAgZXhwb3J0cy5mb3JFYWNoKHZlcmlmeUV4cG9ydHNBcmVEZWNsYXJlZE9yUmVFeHBvcnRlZCk7XG4gICAgZGVjbGFyYXRpb25zLmZvckVhY2goZGVjbCA9PiB2ZXJpZnlEZWNsYXJhdGlvbklzVW5pcXVlKGRlY2wsIGFsbG93RHVwbGljYXRlRGVjbGFyYXRpb25zSW5Sb290KSk7XG4gICAgZGVjbGFyYXRpb25zLmZvckVhY2godmVyaWZ5Q29tcG9uZW50RW50cnlDb21wb25lbnRzSXNQYXJ0T2ZOZ01vZHVsZSk7XG4gICAgY29uc3QgbmdNb2R1bGUgPSBnZXRBbm5vdGF0aW9uKG1vZHVsZVR5cGUsICdOZ01vZHVsZScpO1xuICAgIGlmIChuZ01vZHVsZSkge1xuICAgICAgICBuZ01vZHVsZS5pbXBvcnRzICYmXG4gICAgICAgICAgICBmbGF0dGVuKG5nTW9kdWxlLmltcG9ydHMpLm1hcCh1bndyYXBNb2R1bGVXaXRoUHJvdmlkZXJzSW1wb3J0cykuZm9yRWFjaChtb2QgPT4ge1xuICAgICAgICAgICAgICAgIHZlcmlmeVNlbWFudGljc09mTmdNb2R1bGVJbXBvcnQobW9kLCBtb2R1bGVUeXBlKTtcbiAgICAgICAgICAgICAgICB2ZXJpZnlTZW1hbnRpY3NPZk5nTW9kdWxlRGVmKG1vZCwgZmFsc2UsIG1vZHVsZVR5cGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIG5nTW9kdWxlLmJvb3RzdHJhcCAmJiBkZWVwRm9yRWFjaChuZ01vZHVsZS5ib290c3RyYXAsIHZlcmlmeUNvcnJlY3RCb290c3RyYXBUeXBlKTtcbiAgICAgICAgbmdNb2R1bGUuYm9vdHN0cmFwICYmIGRlZXBGb3JFYWNoKG5nTW9kdWxlLmJvb3RzdHJhcCwgdmVyaWZ5Q29tcG9uZW50SXNQYXJ0T2ZOZ01vZHVsZSk7XG4gICAgICAgIG5nTW9kdWxlLmVudHJ5Q29tcG9uZW50cyAmJlxuICAgICAgICAgICAgZGVlcEZvckVhY2gobmdNb2R1bGUuZW50cnlDb21wb25lbnRzLCB2ZXJpZnlDb21wb25lbnRJc1BhcnRPZk5nTW9kdWxlKTtcbiAgICB9XG4gICAgLy8gVGhyb3cgRXJyb3IgaWYgYW55IGVycm9ycyB3ZXJlIGRldGVjdGVkLlxuICAgIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcnMuam9pbignXFxuJykpO1xuICAgIH1cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBmdW5jdGlvbiB2ZXJpZnlEZWNsYXJhdGlvbnNIYXZlRGVmaW5pdGlvbnModHlwZSkge1xuICAgICAgICB0eXBlID0gcmVzb2x2ZUZvcndhcmRSZWYodHlwZSk7XG4gICAgICAgIGNvbnN0IGRlZiA9IGdldENvbXBvbmVudERlZih0eXBlKSB8fCBnZXREaXJlY3RpdmVEZWYodHlwZSkgfHwgZ2V0UGlwZURlZiQxKHR5cGUpO1xuICAgICAgICBpZiAoIWRlZikge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goYFVuZXhwZWN0ZWQgdmFsdWUgJyR7c3RyaW5naWZ5Rm9yRXJyb3IodHlwZSl9JyBkZWNsYXJlZCBieSB0aGUgbW9kdWxlICcke3N0cmluZ2lmeUZvckVycm9yKG1vZHVsZVR5cGUpfScuIFBsZWFzZSBhZGQgYSBAUGlwZS9ARGlyZWN0aXZlL0BDb21wb25lbnQgYW5ub3RhdGlvbi5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB2ZXJpZnlEaXJlY3RpdmVzSGF2ZVNlbGVjdG9yKHR5cGUpIHtcbiAgICAgICAgdHlwZSA9IHJlc29sdmVGb3J3YXJkUmVmKHR5cGUpO1xuICAgICAgICBjb25zdCBkZWYgPSBnZXREaXJlY3RpdmVEZWYodHlwZSk7XG4gICAgICAgIGlmICghZ2V0Q29tcG9uZW50RGVmKHR5cGUpICYmIGRlZiAmJiBkZWYuc2VsZWN0b3JzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaChgRGlyZWN0aXZlICR7c3RyaW5naWZ5Rm9yRXJyb3IodHlwZSl9IGhhcyBubyBzZWxlY3RvciwgcGxlYXNlIGFkZCBpdCFgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB2ZXJpZnlFeHBvcnRzQXJlRGVjbGFyZWRPclJlRXhwb3J0ZWQodHlwZSkge1xuICAgICAgICB0eXBlID0gcmVzb2x2ZUZvcndhcmRSZWYodHlwZSk7XG4gICAgICAgIGNvbnN0IGtpbmQgPSBnZXRDb21wb25lbnREZWYodHlwZSkgJiYgJ2NvbXBvbmVudCcgfHwgZ2V0RGlyZWN0aXZlRGVmKHR5cGUpICYmICdkaXJlY3RpdmUnIHx8XG4gICAgICAgICAgICBnZXRQaXBlRGVmJDEodHlwZSkgJiYgJ3BpcGUnO1xuICAgICAgICBpZiAoa2luZCkge1xuICAgICAgICAgICAgLy8gb25seSBjaGVja2VkIGlmIHdlIGFyZSBkZWNsYXJlZCBhcyBDb21wb25lbnQsIERpcmVjdGl2ZSwgb3IgUGlwZVxuICAgICAgICAgICAgLy8gTW9kdWxlcyBkb24ndCBuZWVkIHRvIGJlIGRlY2xhcmVkIG9yIGltcG9ydGVkLlxuICAgICAgICAgICAgaWYgKGNvbWJpbmVkRGVjbGFyYXRpb25zLmxhc3RJbmRleE9mKHR5cGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBleHBvcnRpbmcgc29tZXRoaW5nIHdoaWNoIHdlIGRvbid0IGV4cGxpY2l0bHkgZGVjbGFyZSBvciBpbXBvcnQuXG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goYENhbid0IGV4cG9ydCAke2tpbmR9ICR7c3RyaW5naWZ5Rm9yRXJyb3IodHlwZSl9IGZyb20gJHtzdHJpbmdpZnlGb3JFcnJvcihtb2R1bGVUeXBlKX0gYXMgaXQgd2FzIG5laXRoZXIgZGVjbGFyZWQgbm9yIGltcG9ydGVkIWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHZlcmlmeURlY2xhcmF0aW9uSXNVbmlxdWUodHlwZSwgc3VwcHJlc3NFcnJvcnMpIHtcbiAgICAgICAgdHlwZSA9IHJlc29sdmVGb3J3YXJkUmVmKHR5cGUpO1xuICAgICAgICBjb25zdCBleGlzdGluZ01vZHVsZSA9IG93bmVyTmdNb2R1bGUuZ2V0KHR5cGUpO1xuICAgICAgICBpZiAoZXhpc3RpbmdNb2R1bGUgJiYgZXhpc3RpbmdNb2R1bGUgIT09IG1vZHVsZVR5cGUpIHtcbiAgICAgICAgICAgIGlmICghc3VwcHJlc3NFcnJvcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bGVzID0gW2V4aXN0aW5nTW9kdWxlLCBtb2R1bGVUeXBlXS5tYXAoc3RyaW5naWZ5Rm9yRXJyb3IpLnNvcnQoKTtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChgVHlwZSAke3N0cmluZ2lmeUZvckVycm9yKHR5cGUpfSBpcyBwYXJ0IG9mIHRoZSBkZWNsYXJhdGlvbnMgb2YgMiBtb2R1bGVzOiAke21vZHVsZXNbMF19IGFuZCAke21vZHVsZXNbMV19ISBgICtcbiAgICAgICAgICAgICAgICAgICAgYFBsZWFzZSBjb25zaWRlciBtb3ZpbmcgJHtzdHJpbmdpZnlGb3JFcnJvcih0eXBlKX0gdG8gYSBoaWdoZXIgbW9kdWxlIHRoYXQgaW1wb3J0cyAke21vZHVsZXNbMF19IGFuZCAke21vZHVsZXNbMV19LiBgICtcbiAgICAgICAgICAgICAgICAgICAgYFlvdSBjYW4gYWxzbyBjcmVhdGUgYSBuZXcgTmdNb2R1bGUgdGhhdCBleHBvcnRzIGFuZCBpbmNsdWRlcyAke3N0cmluZ2lmeUZvckVycm9yKHR5cGUpfSB0aGVuIGltcG9ydCB0aGF0IE5nTW9kdWxlIGluICR7bW9kdWxlc1swXX0gYW5kICR7bW9kdWxlc1sxXX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBNYXJrIHR5cGUgYXMgaGF2aW5nIG93bmVyLlxuICAgICAgICAgICAgb3duZXJOZ01vZHVsZS5zZXQodHlwZSwgbW9kdWxlVHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdmVyaWZ5Q29tcG9uZW50SXNQYXJ0T2ZOZ01vZHVsZSh0eXBlKSB7XG4gICAgICAgIHR5cGUgPSByZXNvbHZlRm9yd2FyZFJlZih0eXBlKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdNb2R1bGUgPSBvd25lck5nTW9kdWxlLmdldCh0eXBlKTtcbiAgICAgICAgaWYgKCFleGlzdGluZ01vZHVsZSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goYENvbXBvbmVudCAke3N0cmluZ2lmeUZvckVycm9yKHR5cGUpfSBpcyBub3QgcGFydCBvZiBhbnkgTmdNb2R1bGUgb3IgdGhlIG1vZHVsZSBoYXMgbm90IGJlZW4gaW1wb3J0ZWQgaW50byB5b3VyIG1vZHVsZS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiB2ZXJpZnlDb3JyZWN0Qm9vdHN0cmFwVHlwZSh0eXBlKSB7XG4gICAgICAgIHR5cGUgPSByZXNvbHZlRm9yd2FyZFJlZih0eXBlKTtcbiAgICAgICAgaWYgKCFnZXRDb21wb25lbnREZWYodHlwZSkpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKGAke3N0cmluZ2lmeUZvckVycm9yKHR5cGUpfSBjYW5ub3QgYmUgdXNlZCBhcyBhbiBlbnRyeSBjb21wb25lbnQuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gdmVyaWZ5Q29tcG9uZW50RW50cnlDb21wb25lbnRzSXNQYXJ0T2ZOZ01vZHVsZSh0eXBlKSB7XG4gICAgICAgIHR5cGUgPSByZXNvbHZlRm9yd2FyZFJlZih0eXBlKTtcbiAgICAgICAgaWYgKGdldENvbXBvbmVudERlZih0eXBlKSkge1xuICAgICAgICAgICAgLy8gV2Uga25vdyB3ZSBhcmUgY29tcG9uZW50XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBnZXRBbm5vdGF0aW9uKHR5cGUsICdDb21wb25lbnQnKTtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnQgJiYgY29tcG9uZW50LmVudHJ5Q29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgIGRlZXBGb3JFYWNoKGNvbXBvbmVudC5lbnRyeUNvbXBvbmVudHMsIHZlcmlmeUNvbXBvbmVudElzUGFydE9mTmdNb2R1bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHZlcmlmeVNlbWFudGljc09mTmdNb2R1bGVJbXBvcnQodHlwZSwgaW1wb3J0aW5nTW9kdWxlKSB7XG4gICAgICAgIHR5cGUgPSByZXNvbHZlRm9yd2FyZFJlZih0eXBlKTtcbiAgICAgICAgaWYgKGdldENvbXBvbmVudERlZih0eXBlKSB8fCBnZXREaXJlY3RpdmVEZWYodHlwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBkaXJlY3RpdmUgJyR7dHlwZS5uYW1lfScgaW1wb3J0ZWQgYnkgdGhlIG1vZHVsZSAnJHtpbXBvcnRpbmdNb2R1bGUubmFtZX0nLiBQbGVhc2UgYWRkIGFuIEBOZ01vZHVsZSBhbm5vdGF0aW9uLmApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZXRQaXBlRGVmJDEodHlwZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5leHBlY3RlZCBwaXBlICcke3R5cGUubmFtZX0nIGltcG9ydGVkIGJ5IHRoZSBtb2R1bGUgJyR7aW1wb3J0aW5nTW9kdWxlLm5hbWV9Jy4gUGxlYXNlIGFkZCBhbiBATmdNb2R1bGUgYW5ub3RhdGlvbi5gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHVud3JhcE1vZHVsZVdpdGhQcm92aWRlcnNJbXBvcnRzKHR5cGVPcldpdGhQcm92aWRlcnMpIHtcbiAgICB0eXBlT3JXaXRoUHJvdmlkZXJzID0gcmVzb2x2ZUZvcndhcmRSZWYodHlwZU9yV2l0aFByb3ZpZGVycyk7XG4gICAgcmV0dXJuIHR5cGVPcldpdGhQcm92aWRlcnMubmdNb2R1bGUgfHwgdHlwZU9yV2l0aFByb3ZpZGVycztcbn1cbmZ1bmN0aW9uIGdldEFubm90YXRpb24odHlwZSwgbmFtZSkge1xuICAgIGxldCBhbm5vdGF0aW9uID0gbnVsbDtcbiAgICBjb2xsZWN0KHR5cGUuX19hbm5vdGF0aW9uc19fKTtcbiAgICBjb2xsZWN0KHR5cGUuZGVjb3JhdG9ycyk7XG4gICAgcmV0dXJuIGFubm90YXRpb247XG4gICAgZnVuY3Rpb24gY29sbGVjdChhbm5vdGF0aW9ucykge1xuICAgICAgICBpZiAoYW5ub3RhdGlvbnMpIHtcbiAgICAgICAgICAgIGFubm90YXRpb25zLmZvckVhY2gocmVhZEFubm90YXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJlYWRBbm5vdGF0aW9uKGRlY29yYXRvcikge1xuICAgICAgICBpZiAoIWFubm90YXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGRlY29yYXRvcik7XG4gICAgICAgICAgICBpZiAocHJvdG8ubmdNZXRhZGF0YU5hbWUgPT0gbmFtZSkge1xuICAgICAgICAgICAgICAgIGFubm90YXRpb24gPSBkZWNvcmF0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkZWNvcmF0b3IudHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGRlY29yYXRvci50eXBlKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvdG8ubmdNZXRhZGF0YU5hbWUgPT0gbmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uID0gZGVjb3JhdG9yLmFyZ3NbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBLZWVwIHRyYWNrIG9mIGNvbXBpbGVkIGNvbXBvbmVudHMuIFRoaXMgaXMgbmVlZGVkIGJlY2F1c2UgaW4gdGVzdHMgd2Ugb2Z0ZW4gd2FudCB0byBjb21waWxlIHRoZVxuICogc2FtZSBjb21wb25lbnQgd2l0aCBtb3JlIHRoYW4gb25lIE5nTW9kdWxlLiBUaGlzIHdvdWxkIGNhdXNlIGFuIGVycm9yIHVubGVzcyB3ZSByZXNldCB3aGljaFxuICogTmdNb2R1bGUgdGhlIGNvbXBvbmVudCBiZWxvbmdzIHRvLiBXZSBrZWVwIHRoZSBsaXN0IG9mIGNvbXBpbGVkIGNvbXBvbmVudHMgaGVyZSBzbyB0aGF0IHRoZVxuICogVGVzdEJlZCBjYW4gcmVzZXQgaXQgbGF0ZXIuXG4gKi9cbmxldCBvd25lck5nTW9kdWxlID0gbmV3IFdlYWtNYXAoKTtcbmxldCB2ZXJpZmllZE5nTW9kdWxlID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uIHJlc2V0Q29tcGlsZWRDb21wb25lbnRzKCkge1xuICAgIG93bmVyTmdNb2R1bGUgPSBuZXcgV2Vha01hcCgpO1xuICAgIHZlcmlmaWVkTmdNb2R1bGUgPSBuZXcgV2Vha01hcCgpO1xuICAgIG1vZHVsZVF1ZXVlLmxlbmd0aCA9IDA7XG59XG4vKipcbiAqIENvbXB1dGVzIHRoZSBjb21iaW5lZCBkZWNsYXJhdGlvbnMgb2YgZXhwbGljaXQgZGVjbGFyYXRpb25zLCBhcyB3ZWxsIGFzIGRlY2xhcmF0aW9ucyBpbmhlcml0ZWQgYnlcbiAqIHRyYXZlcnNpbmcgdGhlIGV4cG9ydHMgb2YgaW1wb3J0ZWQgbW9kdWxlcy5cbiAqIEBwYXJhbSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNvbXB1dGVDb21iaW5lZEV4cG9ydHModHlwZSkge1xuICAgIHR5cGUgPSByZXNvbHZlRm9yd2FyZFJlZih0eXBlKTtcbiAgICBjb25zdCBuZ01vZHVsZURlZiA9IGdldE5nTW9kdWxlRGVmKHR5cGUsIHRydWUpO1xuICAgIHJldHVybiBbLi4uZmxhdHRlbihtYXliZVVud3JhcEZuKG5nTW9kdWxlRGVmLmV4cG9ydHMpLm1hcCgodHlwZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmdNb2R1bGVEZWYgPSBnZXROZ01vZHVsZURlZih0eXBlKTtcbiAgICAgICAgICAgIGlmIChuZ01vZHVsZURlZikge1xuICAgICAgICAgICAgICAgIHZlcmlmeVNlbWFudGljc09mTmdNb2R1bGVEZWYodHlwZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb21wdXRlQ29tYmluZWRFeHBvcnRzKHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKV07XG59XG4vKipcbiAqIFNvbWUgZGVjbGFyZWQgY29tcG9uZW50cyBtYXkgYmUgY29tcGlsZWQgYXN5bmNocm9ub3VzbHksIGFuZCB0aHVzIG1heSBub3QgaGF2ZSB0aGVpclxuICogybVjbXAgc2V0IHlldC4gSWYgdGhpcyBpcyB0aGUgY2FzZSwgdGhlbiBhIHJlZmVyZW5jZSB0byB0aGUgbW9kdWxlIGlzIHdyaXR0ZW4gaW50b1xuICogdGhlIGBuZ1NlbGVjdG9yU2NvcGVgIHByb3BlcnR5IG9mIHRoZSBkZWNsYXJlZCB0eXBlLlxuICovXG5mdW5jdGlvbiBzZXRTY29wZU9uRGVjbGFyZWRDb21wb25lbnRzKG1vZHVsZVR5cGUsIG5nTW9kdWxlKSB7XG4gICAgY29uc3QgZGVjbGFyYXRpb25zID0gZmxhdHRlbihuZ01vZHVsZS5kZWNsYXJhdGlvbnMgfHwgRU1QVFlfQVJSQVkpO1xuICAgIGNvbnN0IHRyYW5zaXRpdmVTY29wZXMgPSB0cmFuc2l0aXZlU2NvcGVzRm9yKG1vZHVsZVR5cGUpO1xuICAgIGRlY2xhcmF0aW9ucy5mb3JFYWNoKGRlY2xhcmF0aW9uID0+IHtcbiAgICAgICAgaWYgKGRlY2xhcmF0aW9uLmhhc093blByb3BlcnR5KE5HX0NPTVBfREVGKSkge1xuICAgICAgICAgICAgLy8gQSBgybVjbXBgIGZpZWxkIGV4aXN0cyAtIGdvIGFoZWFkIGFuZCBwYXRjaCB0aGUgY29tcG9uZW50IGRpcmVjdGx5LlxuICAgICAgICAgICAgY29uc3QgY29tcG9uZW50ID0gZGVjbGFyYXRpb247XG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnREZWYgPSBnZXRDb21wb25lbnREZWYoY29tcG9uZW50KTtcbiAgICAgICAgICAgIHBhdGNoQ29tcG9uZW50RGVmV2l0aFNjb3BlKGNvbXBvbmVudERlZiwgdHJhbnNpdGl2ZVNjb3Blcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWRlY2xhcmF0aW9uLmhhc093blByb3BlcnR5KE5HX0RJUl9ERUYpICYmICFkZWNsYXJhdGlvbi5oYXNPd25Qcm9wZXJ0eShOR19QSVBFX0RFRikpIHtcbiAgICAgICAgICAgIC8vIFNldCBgbmdTZWxlY3RvclNjb3BlYCBmb3IgZnV0dXJlIHJlZmVyZW5jZSB3aGVuIHRoZSBjb21wb25lbnQgY29tcGlsYXRpb24gZmluaXNoZXMuXG4gICAgICAgICAgICBkZWNsYXJhdGlvbi5uZ1NlbGVjdG9yU2NvcGUgPSBtb2R1bGVUeXBlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIFBhdGNoIHRoZSBkZWZpbml0aW9uIG9mIGEgY29tcG9uZW50IHdpdGggZGlyZWN0aXZlcyBhbmQgcGlwZXMgZnJvbSB0aGUgY29tcGlsYXRpb24gc2NvcGUgb2ZcbiAqIGEgZ2l2ZW4gbW9kdWxlLlxuICovXG5mdW5jdGlvbiBwYXRjaENvbXBvbmVudERlZldpdGhTY29wZShjb21wb25lbnREZWYsIHRyYW5zaXRpdmVTY29wZXMpIHtcbiAgICBjb21wb25lbnREZWYuZGlyZWN0aXZlRGVmcyA9ICgpID0+IEFycmF5LmZyb20odHJhbnNpdGl2ZVNjb3Blcy5jb21waWxhdGlvbi5kaXJlY3RpdmVzKVxuICAgICAgICAubWFwKGRpciA9PiBkaXIuaGFzT3duUHJvcGVydHkoTkdfQ09NUF9ERUYpID8gZ2V0Q29tcG9uZW50RGVmKGRpcikgOiBnZXREaXJlY3RpdmVEZWYoZGlyKSlcbiAgICAgICAgLmZpbHRlcihkZWYgPT4gISFkZWYpO1xuICAgIGNvbXBvbmVudERlZi5waXBlRGVmcyA9ICgpID0+IEFycmF5LmZyb20odHJhbnNpdGl2ZVNjb3Blcy5jb21waWxhdGlvbi5waXBlcykubWFwKHBpcGUgPT4gZ2V0UGlwZURlZiQxKHBpcGUpKTtcbiAgICBjb21wb25lbnREZWYuc2NoZW1hcyA9IHRyYW5zaXRpdmVTY29wZXMuc2NoZW1hcztcbiAgICAvLyBTaW5jZSB3ZSBhdm9pZCBDb21wb25lbnRzL0RpcmVjdGl2ZXMvUGlwZXMgcmVjb21waWxpbmcgaW4gY2FzZSB0aGVyZSBhcmUgbm8gb3ZlcnJpZGVzLCB3ZVxuICAgIC8vIG1heSBmYWNlIGEgcHJvYmxlbSB3aGVyZSBwcmV2aW91c2x5IGNvbXBpbGVkIGRlZnMgYXZhaWxhYmxlIHRvIGEgZ2l2ZW4gQ29tcG9uZW50L0RpcmVjdGl2ZVxuICAgIC8vIGFyZSBjYWNoZWQgaW4gVFZpZXcgYW5kIG1heSBiZWNvbWUgc3RhbGUgKGluIGNhc2UgYW55IG9mIHRoZXNlIGRlZnMgZ2V0cyByZWNvbXBpbGVkKS4gSW5cbiAgICAvLyBvcmRlciB0byBhdm9pZCB0aGlzIHByb2JsZW0sIHdlIGZvcmNlIGZyZXNoIFRWaWV3IHRvIGJlIGNyZWF0ZWQuXG4gICAgY29tcG9uZW50RGVmLnRWaWV3ID0gbnVsbDtcbn1cbi8qKlxuICogQ29tcHV0ZSB0aGUgcGFpciBvZiB0cmFuc2l0aXZlIHNjb3BlcyAoY29tcGlsYXRpb24gc2NvcGUgYW5kIGV4cG9ydGVkIHNjb3BlKSBmb3IgYSBnaXZlbiBtb2R1bGUuXG4gKlxuICogVGhpcyBvcGVyYXRpb24gaXMgbWVtb2l6ZWQgYW5kIHRoZSByZXN1bHQgaXMgY2FjaGVkIG9uIHRoZSBtb2R1bGUncyBkZWZpbml0aW9uLiBUaGlzIGZ1bmN0aW9uIGNhblxuICogYmUgY2FsbGVkIG9uIG1vZHVsZXMgd2l0aCBjb21wb25lbnRzIHRoYXQgaGF2ZSBub3QgZnVsbHkgY29tcGlsZWQgeWV0LCBidXQgdGhlIHJlc3VsdCBzaG91bGQgbm90XG4gKiBiZSB1c2VkIHVudGlsIHRoZXkgaGF2ZS5cbiAqXG4gKiBAcGFyYW0gbW9kdWxlVHlwZSBtb2R1bGUgdGhhdCB0cmFuc2l0aXZlIHNjb3BlIHNob3VsZCBiZSBjYWxjdWxhdGVkIGZvci5cbiAqL1xuZnVuY3Rpb24gdHJhbnNpdGl2ZVNjb3Blc0Zvcihtb2R1bGVUeXBlKSB7XG4gICAgaWYgKCFpc05nTW9kdWxlKG1vZHVsZVR5cGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHttb2R1bGVUeXBlLm5hbWV9IGRvZXMgbm90IGhhdmUgYSBtb2R1bGUgZGVmICjJtW1vZCBwcm9wZXJ0eSlgKTtcbiAgICB9XG4gICAgY29uc3QgZGVmID0gZ2V0TmdNb2R1bGVEZWYobW9kdWxlVHlwZSk7XG4gICAgaWYgKGRlZi50cmFuc2l0aXZlQ29tcGlsZVNjb3BlcyAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZGVmLnRyYW5zaXRpdmVDb21waWxlU2NvcGVzO1xuICAgIH1cbiAgICBjb25zdCBzY29wZXMgPSB7XG4gICAgICAgIHNjaGVtYXM6IGRlZi5zY2hlbWFzIHx8IG51bGwsXG4gICAgICAgIGNvbXBpbGF0aW9uOiB7XG4gICAgICAgICAgICBkaXJlY3RpdmVzOiBuZXcgU2V0KCksXG4gICAgICAgICAgICBwaXBlczogbmV3IFNldCgpLFxuICAgICAgICB9LFxuICAgICAgICBleHBvcnRlZDoge1xuICAgICAgICAgICAgZGlyZWN0aXZlczogbmV3IFNldCgpLFxuICAgICAgICAgICAgcGlwZXM6IG5ldyBTZXQoKSxcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIG1heWJlVW53cmFwRm4oZGVmLmltcG9ydHMpLmZvckVhY2goKGltcG9ydGVkKSA9PiB7XG4gICAgICAgIGNvbnN0IGltcG9ydGVkVHlwZSA9IGltcG9ydGVkO1xuICAgICAgICBpZiAoIWlzTmdNb2R1bGUoaW1wb3J0ZWRUeXBlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbXBvcnRpbmcgJHtpbXBvcnRlZFR5cGUubmFtZX0gd2hpY2ggZG9lcyBub3QgaGF2ZSBhIMm1bW9kIHByb3BlcnR5YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiB0aGlzIG1vZHVsZSBpbXBvcnRzIGFub3RoZXIsIHRoZSBpbXBvcnRlZCBtb2R1bGUncyBleHBvcnRlZCBkaXJlY3RpdmVzIGFuZCBwaXBlcyBhcmVcbiAgICAgICAgLy8gYWRkZWQgdG8gdGhlIGNvbXBpbGF0aW9uIHNjb3BlIG9mIHRoaXMgbW9kdWxlLlxuICAgICAgICBjb25zdCBpbXBvcnRlZFNjb3BlID0gdHJhbnNpdGl2ZVNjb3Blc0ZvcihpbXBvcnRlZFR5cGUpO1xuICAgICAgICBpbXBvcnRlZFNjb3BlLmV4cG9ydGVkLmRpcmVjdGl2ZXMuZm9yRWFjaChlbnRyeSA9PiBzY29wZXMuY29tcGlsYXRpb24uZGlyZWN0aXZlcy5hZGQoZW50cnkpKTtcbiAgICAgICAgaW1wb3J0ZWRTY29wZS5leHBvcnRlZC5waXBlcy5mb3JFYWNoKGVudHJ5ID0+IHNjb3Blcy5jb21waWxhdGlvbi5waXBlcy5hZGQoZW50cnkpKTtcbiAgICB9KTtcbiAgICBtYXliZVVud3JhcEZuKGRlZi5kZWNsYXJhdGlvbnMpLmZvckVhY2goZGVjbGFyZWQgPT4ge1xuICAgICAgICBjb25zdCBkZWNsYXJlZFdpdGhEZWZzID0gZGVjbGFyZWQ7XG4gICAgICAgIGlmIChnZXRQaXBlRGVmJDEoZGVjbGFyZWRXaXRoRGVmcykpIHtcbiAgICAgICAgICAgIHNjb3Blcy5jb21waWxhdGlvbi5waXBlcy5hZGQoZGVjbGFyZWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRWl0aGVyIGRlY2xhcmVkIGhhcyBhIMm1Y21wIG9yIMm1ZGlyLCBvciBpdCdzIGEgY29tcG9uZW50IHdoaWNoIGhhc24ndFxuICAgICAgICAgICAgLy8gaGFkIGl0cyB0ZW1wbGF0ZSBjb21waWxlZCB5ZXQuIEluIGVpdGhlciBjYXNlLCBpdCBnZXRzIGFkZGVkIHRvIHRoZSBjb21waWxhdGlvbidzXG4gICAgICAgICAgICAvLyBkaXJlY3RpdmVzLlxuICAgICAgICAgICAgc2NvcGVzLmNvbXBpbGF0aW9uLmRpcmVjdGl2ZXMuYWRkKGRlY2xhcmVkKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIG1heWJlVW53cmFwRm4oZGVmLmV4cG9ydHMpLmZvckVhY2goKGV4cG9ydGVkKSA9PiB7XG4gICAgICAgIGNvbnN0IGV4cG9ydGVkVHlwZSA9IGV4cG9ydGVkO1xuICAgICAgICAvLyBFaXRoZXIgdGhlIHR5cGUgaXMgYSBtb2R1bGUsIGEgcGlwZSwgb3IgYSBjb21wb25lbnQvZGlyZWN0aXZlICh3aGljaCBtYXkgbm90IGhhdmUgYVxuICAgICAgICAvLyDJtWNtcCBhcyBpdCBtaWdodCBiZSBjb21waWxlZCBhc3luY2hyb25vdXNseSkuXG4gICAgICAgIGlmIChpc05nTW9kdWxlKGV4cG9ydGVkVHlwZSkpIHtcbiAgICAgICAgICAgIC8vIFdoZW4gdGhpcyBtb2R1bGUgZXhwb3J0cyBhbm90aGVyLCB0aGUgZXhwb3J0ZWQgbW9kdWxlJ3MgZXhwb3J0ZWQgZGlyZWN0aXZlcyBhbmQgcGlwZXMgYXJlXG4gICAgICAgICAgICAvLyBhZGRlZCB0byBib3RoIHRoZSBjb21waWxhdGlvbiBhbmQgZXhwb3J0ZWQgc2NvcGVzIG9mIHRoaXMgbW9kdWxlLlxuICAgICAgICAgICAgY29uc3QgZXhwb3J0ZWRTY29wZSA9IHRyYW5zaXRpdmVTY29wZXNGb3IoZXhwb3J0ZWRUeXBlKTtcbiAgICAgICAgICAgIGV4cG9ydGVkU2NvcGUuZXhwb3J0ZWQuZGlyZWN0aXZlcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgICAgICAgICAgICBzY29wZXMuY29tcGlsYXRpb24uZGlyZWN0aXZlcy5hZGQoZW50cnkpO1xuICAgICAgICAgICAgICAgIHNjb3Blcy5leHBvcnRlZC5kaXJlY3RpdmVzLmFkZChlbnRyeSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGV4cG9ydGVkU2NvcGUuZXhwb3J0ZWQucGlwZXMuZm9yRWFjaChlbnRyeSA9PiB7XG4gICAgICAgICAgICAgICAgc2NvcGVzLmNvbXBpbGF0aW9uLnBpcGVzLmFkZChlbnRyeSk7XG4gICAgICAgICAgICAgICAgc2NvcGVzLmV4cG9ydGVkLnBpcGVzLmFkZChlbnRyeSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChnZXRQaXBlRGVmJDEoZXhwb3J0ZWRUeXBlKSkge1xuICAgICAgICAgICAgc2NvcGVzLmV4cG9ydGVkLnBpcGVzLmFkZChleHBvcnRlZFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2NvcGVzLmV4cG9ydGVkLmRpcmVjdGl2ZXMuYWRkKGV4cG9ydGVkVHlwZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBkZWYudHJhbnNpdGl2ZUNvbXBpbGVTY29wZXMgPSBzY29wZXM7XG4gICAgcmV0dXJuIHNjb3Blcztcbn1cbmZ1bmN0aW9uIGV4cGFuZE1vZHVsZVdpdGhQcm92aWRlcnModmFsdWUpIHtcbiAgICBpZiAoaXNNb2R1bGVXaXRoUHJvdmlkZXJzKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUubmdNb2R1bGU7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGlzTW9kdWxlV2l0aFByb3ZpZGVycyh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5uZ01vZHVsZSAhPT0gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gaXNOZ01vZHVsZSh2YWx1ZSkge1xuICAgIHJldHVybiAhIWdldE5nTW9kdWxlRGVmKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEtlZXAgdHJhY2sgb2YgdGhlIGNvbXBpbGF0aW9uIGRlcHRoIHRvIGF2b2lkIHJlZW50cmFuY3kgaXNzdWVzIGR1cmluZyBKSVQgY29tcGlsYXRpb24uIFRoaXNcbiAqIG1hdHRlcnMgaW4gdGhlIGZvbGxvd2luZyBzY2VuYXJpbzpcbiAqXG4gKiBDb25zaWRlciBhIGNvbXBvbmVudCAnQScgdGhhdCBleHRlbmRzIGNvbXBvbmVudCAnQicsIGJvdGggZGVjbGFyZWQgaW4gbW9kdWxlICdNJy4gRHVyaW5nXG4gKiB0aGUgY29tcGlsYXRpb24gb2YgJ0EnIHRoZSBkZWZpbml0aW9uIG9mICdCJyBpcyByZXF1ZXN0ZWQgdG8gY2FwdHVyZSB0aGUgaW5oZXJpdGFuY2UgY2hhaW4sXG4gKiBwb3RlbnRpYWxseSB0cmlnZ2VyaW5nIGNvbXBpbGF0aW9uIG9mICdCJy4gSWYgdGhpcyBuZXN0ZWQgY29tcGlsYXRpb24gd2VyZSB0byB0cmlnZ2VyXG4gKiBgZmx1c2hNb2R1bGVTY29waW5nUXVldWVBc011Y2hBc1Bvc3NpYmxlYCBpdCBtYXkgaGFwcGVuIHRoYXQgbW9kdWxlICdNJyBpcyBzdGlsbCBwZW5kaW5nIGluIHRoZVxuICogcXVldWUsIHJlc3VsdGluZyBpbiAnQScgYW5kICdCJyB0byBiZSBwYXRjaGVkIHdpdGggdGhlIE5nTW9kdWxlIHNjb3BlLiBBcyB0aGUgY29tcGlsYXRpb24gb2ZcbiAqICdBJyBpcyBzdGlsbCBpbiBwcm9ncmVzcywgdGhpcyB3b3VsZCBpbnRyb2R1Y2UgYSBjaXJjdWxhciBkZXBlbmRlbmN5IG9uIGl0cyBjb21waWxhdGlvbi4gVG8gYXZvaWRcbiAqIHRoaXMgaXNzdWUsIHRoZSBtb2R1bGUgc2NvcGUgcXVldWUgaXMgb25seSBmbHVzaGVkIGZvciBjb21waWxhdGlvbnMgYXQgdGhlIGRlcHRoIDAsIHRvIGVuc3VyZVxuICogYWxsIGNvbXBpbGF0aW9ucyBoYXZlIGZpbmlzaGVkLlxuICovXG5sZXQgY29tcGlsYXRpb25EZXB0aCA9IDA7XG4vKipcbiAqIENvbXBpbGUgYW4gQW5ndWxhciBjb21wb25lbnQgYWNjb3JkaW5nIHRvIGl0cyBkZWNvcmF0b3IgbWV0YWRhdGEsIGFuZCBwYXRjaCB0aGUgcmVzdWx0aW5nXG4gKiBjb21wb25lbnQgZGVmICjJtWNtcCkgb250byB0aGUgY29tcG9uZW50IHR5cGUuXG4gKlxuICogQ29tcGlsYXRpb24gbWF5IGJlIGFzeW5jaHJvbm91cyAoZHVlIHRvIHRoZSBuZWVkIHRvIHJlc29sdmUgVVJMcyBmb3IgdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSBvclxuICogb3RoZXIgcmVzb3VyY2VzLCBmb3IgZXhhbXBsZSkuIEluIHRoZSBldmVudCB0aGF0IGNvbXBpbGF0aW9uIGlzIG5vdCBpbW1lZGlhdGUsIGBjb21waWxlQ29tcG9uZW50YFxuICogd2lsbCBlbnF1ZXVlIHJlc291cmNlIHJlc29sdXRpb24gaW50byBhIGdsb2JhbCBxdWV1ZSBhbmQgd2lsbCBmYWlsIHRvIHJldHVybiB0aGUgYMm1Y21wYFxuICogdW50aWwgdGhlIGdsb2JhbCBxdWV1ZSBoYXMgYmVlbiByZXNvbHZlZCB3aXRoIGEgY2FsbCB0byBgcmVzb2x2ZUNvbXBvbmVudFJlc291cmNlc2AuXG4gKi9cbmZ1bmN0aW9uIGNvbXBpbGVDb21wb25lbnQodHlwZSwgbWV0YWRhdGEpIHtcbiAgICAvLyBJbml0aWFsaXplIG5nRGV2TW9kZS4gVGhpcyBtdXN0IGJlIHRoZSBmaXJzdCBzdGF0ZW1lbnQgaW4gY29tcGlsZUNvbXBvbmVudC5cbiAgICAvLyBTZWUgdGhlIGBpbml0TmdEZXZNb2RlYCBkb2NzdHJpbmcgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAgKHR5cGVvZiBuZ0Rldk1vZGUgPT09ICd1bmRlZmluZWQnIHx8IG5nRGV2TW9kZSkgJiYgaW5pdE5nRGV2TW9kZSgpO1xuICAgIGxldCBuZ0NvbXBvbmVudERlZiA9IG51bGw7XG4gICAgLy8gTWV0YWRhdGEgbWF5IGhhdmUgcmVzb3VyY2VzIHdoaWNoIG5lZWQgdG8gYmUgcmVzb2x2ZWQuXG4gICAgbWF5YmVRdWV1ZVJlc29sdXRpb25PZkNvbXBvbmVudFJlc291cmNlcyh0eXBlLCBtZXRhZGF0YSk7XG4gICAgLy8gTm90ZSB0aGF0IHdlJ3JlIHVzaW5nIHRoZSBzYW1lIGZ1bmN0aW9uIGFzIGBEaXJlY3RpdmVgLCBiZWNhdXNlIHRoYXQncyBvbmx5IHN1YnNldCBvZiBtZXRhZGF0YVxuICAgIC8vIHRoYXQgd2UgbmVlZCB0byBjcmVhdGUgdGhlIG5nRmFjdG9yeURlZi4gV2UncmUgYXZvaWRpbmcgdXNpbmcgdGhlIGNvbXBvbmVudCBtZXRhZGF0YVxuICAgIC8vIGJlY2F1c2Ugd2UnZCBoYXZlIHRvIHJlc29sdmUgdGhlIGFzeW5jaHJvbm91cyB0ZW1wbGF0ZXMuXG4gICAgYWRkRGlyZWN0aXZlRmFjdG9yeURlZih0eXBlLCBtZXRhZGF0YSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHR5cGUsIE5HX0NPTVBfREVGLCB7XG4gICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG5nQ29tcG9uZW50RGVmID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7IHVzYWdlOiAwIC8qIERlY29yYXRvciAqLywga2luZDogJ2NvbXBvbmVudCcsIHR5cGU6IHR5cGUgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudE5lZWRzUmVzb2x1dGlvbihtZXRhZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBbYENvbXBvbmVudCAnJHt0eXBlLm5hbWV9JyBpcyBub3QgcmVzb2x2ZWQ6YF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS50ZW1wbGF0ZVVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IucHVzaChgIC0gdGVtcGxhdGVVcmw6ICR7bWV0YWRhdGEudGVtcGxhdGVVcmx9YCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhLnN0eWxlVXJscyAmJiBtZXRhZGF0YS5zdHlsZVVybHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5wdXNoKGAgLSBzdHlsZVVybHM6ICR7SlNPTi5zdHJpbmdpZnkobWV0YWRhdGEuc3R5bGVVcmxzKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlcnJvci5wdXNoKGBEaWQgeW91IHJ1biBhbmQgd2FpdCBmb3IgJ3Jlc29sdmVDb21wb25lbnRSZXNvdXJjZXMoKSc/YCk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5qb2luKCdcXG4nKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29uc3Qgd2FzIGNhbGxlZCBgaml0T3B0aW9uc2AgcHJldmlvdXNseSBidXQgaGFkIHRvIGJlIHJlbmFtZWQgdG8gYG9wdGlvbnNgIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAvLyBvZiBhIGJ1ZyB3aXRoIFRlcnNlciB0aGF0IGNhdXNlZCBvcHRpbWl6ZWQgSklUIGJ1aWxkcyB0byB0aHJvdyBhIGBSZWZlcmVuY2VFcnJvcmAuXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBidWcgd2FzIGludmVzdGlnYXRlZCBpbiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLWNsaS9pc3N1ZXMvMTcyNjQuXG4gICAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIG5vdCByZW5hbWUgaXQgYmFjayB1bnRpbCBodHRwczovL2dpdGh1Yi5jb20vdGVyc2VyL3RlcnNlci9pc3N1ZXMvNjE1IGlzIGZpeGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBnZXRKaXRPcHRpb25zKCk7XG4gICAgICAgICAgICAgICAgbGV0IHByZXNlcnZlV2hpdGVzcGFjZXMgPSBtZXRhZGF0YS5wcmVzZXJ2ZVdoaXRlc3BhY2VzO1xuICAgICAgICAgICAgICAgIGlmIChwcmVzZXJ2ZVdoaXRlc3BhY2VzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucy5wcmVzZXJ2ZVdoaXRlc3BhY2VzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXNlcnZlV2hpdGVzcGFjZXMgPSBvcHRpb25zLnByZXNlcnZlV2hpdGVzcGFjZXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVzZXJ2ZVdoaXRlc3BhY2VzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGVuY2Fwc3VsYXRpb24gPSBtZXRhZGF0YS5lbmNhcHN1bGF0aW9uO1xuICAgICAgICAgICAgICAgIGlmIChlbmNhcHN1bGF0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucy5kZWZhdWx0RW5jYXBzdWxhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmNhcHN1bGF0aW9uID0gb3B0aW9ucy5kZWZhdWx0RW5jYXBzdWxhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuY2Fwc3VsYXRpb24gPSBWaWV3RW5jYXBzdWxhdGlvbiQxLkVtdWxhdGVkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlVXJsID0gbWV0YWRhdGEudGVtcGxhdGVVcmwgfHwgYG5nOi8vLyR7dHlwZS5uYW1lfS90ZW1wbGF0ZS5odG1sYDtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5kaXJlY3RpdmVNZXRhZGF0YSh0eXBlLCBtZXRhZGF0YSksXG4gICAgICAgICAgICAgICAgICAgIHR5cGVTb3VyY2VTcGFuOiBjb21waWxlci5jcmVhdGVQYXJzZVNvdXJjZVNwYW4oJ0NvbXBvbmVudCcsIHR5cGUubmFtZSwgdGVtcGxhdGVVcmwpLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogbWV0YWRhdGEudGVtcGxhdGUgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIHByZXNlcnZlV2hpdGVzcGFjZXMsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlczogbWV0YWRhdGEuc3R5bGVzIHx8IEVNUFRZX0FSUkFZLFxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25zOiBtZXRhZGF0YS5hbmltYXRpb25zLFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3RpdmVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBtZXRhZGF0YS5jaGFuZ2VEZXRlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHBpcGVzOiBuZXcgTWFwKCksXG4gICAgICAgICAgICAgICAgICAgIGVuY2Fwc3VsYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGludGVycG9sYXRpb246IG1ldGFkYXRhLmludGVycG9sYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHZpZXdQcm92aWRlcnM6IG1ldGFkYXRhLnZpZXdQcm92aWRlcnMgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbXBpbGF0aW9uRGVwdGgrKztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YS51c2VzSW5oZXJpdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZERpcmVjdGl2ZURlZlRvVW5kZWNvcmF0ZWRQYXJlbnRzKHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5nQ29tcG9uZW50RGVmID0gY29tcGlsZXIuY29tcGlsZUNvbXBvbmVudChhbmd1bGFyQ29yZUVudiwgdGVtcGxhdGVVcmwsIG1ldGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoYXQgdGhlIGNvbXBpbGF0aW9uIGRlcHRoIGlzIGRlY3JlbWVudGVkIGV2ZW4gd2hlbiB0aGUgY29tcGlsYXRpb24gZmFpbGVkLlxuICAgICAgICAgICAgICAgICAgICBjb21waWxhdGlvbkRlcHRoLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChjb21waWxhdGlvbkRlcHRoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gTmdNb2R1bGUgZGVjb3JhdG9yIGV4ZWN1dGVkLCB3ZSBlbnF1ZXVlZCB0aGUgbW9kdWxlIGRlZmluaXRpb24gc3VjaCB0aGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGl0IHdvdWxkIG9ubHkgZGVxdWV1ZSBhbmQgYWRkIGl0c2VsZiBhcyBtb2R1bGUgc2NvcGUgdG8gYWxsIG9mIGl0cyBkZWNsYXJhdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBvbmx5IGlmICBpZiBhbGwgb2YgaXRzIGRlY2xhcmF0aW9ucyBoYWQgcmVzb2x2ZWQuIFRoaXMgY2FsbCBydW5zIHRoZSBjaGVja1xuICAgICAgICAgICAgICAgICAgICAvLyB0byBzZWUgaWYgYW55IG1vZHVsZXMgdGhhdCBhcmUgaW4gdGhlIHF1ZXVlIGNhbiBiZSBkZXF1ZXVlZCBhbmQgYWRkIHNjb3BlIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZWlyIGRlY2xhcmF0aW9ucy5cbiAgICAgICAgICAgICAgICAgICAgZmx1c2hNb2R1bGVTY29waW5nUXVldWVBc011Y2hBc1Bvc3NpYmxlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIGNvbXBvbmVudCBjb21waWxhdGlvbiBpcyBhc3luYywgdGhlbiB0aGUgQE5nTW9kdWxlIGFubm90YXRpb24gd2hpY2ggZGVjbGFyZXMgdGhlXG4gICAgICAgICAgICAgICAgLy8gY29tcG9uZW50IG1heSBleGVjdXRlIGFuZCBzZXQgYW4gbmdTZWxlY3RvclNjb3BlIHByb3BlcnR5IG9uIHRoZSBjb21wb25lbnQgdHlwZS4gVGhpc1xuICAgICAgICAgICAgICAgIC8vIGFsbG93cyB0aGUgY29tcG9uZW50IHRvIHBhdGNoIGl0c2VsZiB3aXRoIGRpcmVjdGl2ZURlZnMgZnJvbSB0aGUgbW9kdWxlIGFmdGVyIGl0XG4gICAgICAgICAgICAgICAgLy8gZmluaXNoZXMgY29tcGlsaW5nLlxuICAgICAgICAgICAgICAgIGlmIChoYXNTZWxlY3RvclNjb3BlKHR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjb3BlcyA9IHRyYW5zaXRpdmVTY29wZXNGb3IodHlwZS5uZ1NlbGVjdG9yU2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICBwYXRjaENvbXBvbmVudERlZldpdGhTY29wZShuZ0NvbXBvbmVudERlZiwgc2NvcGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmdDb21wb25lbnREZWY7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIE1ha2UgdGhlIHByb3BlcnR5IGNvbmZpZ3VyYWJsZSBpbiBkZXYgbW9kZSB0byBhbGxvdyBvdmVycmlkaW5nIGluIHRlc3RzXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogISFuZ0Rldk1vZGUsXG4gICAgfSk7XG59XG5mdW5jdGlvbiBoYXNTZWxlY3RvclNjb3BlKGNvbXBvbmVudCkge1xuICAgIHJldHVybiBjb21wb25lbnQubmdTZWxlY3RvclNjb3BlICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENvbXBpbGUgYW4gQW5ndWxhciBkaXJlY3RpdmUgYWNjb3JkaW5nIHRvIGl0cyBkZWNvcmF0b3IgbWV0YWRhdGEsIGFuZCBwYXRjaCB0aGUgcmVzdWx0aW5nXG4gKiBkaXJlY3RpdmUgZGVmIG9udG8gdGhlIGNvbXBvbmVudCB0eXBlLlxuICpcbiAqIEluIHRoZSBldmVudCB0aGF0IGNvbXBpbGF0aW9uIGlzIG5vdCBpbW1lZGlhdGUsIGBjb21waWxlRGlyZWN0aXZlYCB3aWxsIHJldHVybiBhIGBQcm9taXNlYCB3aGljaFxuICogd2lsbCByZXNvbHZlIHdoZW4gY29tcGlsYXRpb24gY29tcGxldGVzIGFuZCB0aGUgZGlyZWN0aXZlIGJlY29tZXMgdXNhYmxlLlxuICovXG5mdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlKHR5cGUsIGRpcmVjdGl2ZSkge1xuICAgIGxldCBuZ0RpcmVjdGl2ZURlZiA9IG51bGw7XG4gICAgYWRkRGlyZWN0aXZlRmFjdG9yeURlZih0eXBlLCBkaXJlY3RpdmUgfHwge30pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBOR19ESVJfREVGLCB7XG4gICAgICAgIGdldDogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG5nRGlyZWN0aXZlRGVmID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gYGRpcmVjdGl2ZWAgY2FuIGJlIG51bGwgaW4gdGhlIGNhc2Ugb2YgYWJzdHJhY3QgZGlyZWN0aXZlcyBhcyBhIGJhc2UgY2xhc3NcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHVzZSBgQERpcmVjdGl2ZSgpYCB3aXRoIG5vIHNlbGVjdG9yLiBJbiB0aGF0IGNhc2UsIHBhc3MgZW1wdHkgb2JqZWN0IHRvIHRoZVxuICAgICAgICAgICAgICAgIC8vIGBkaXJlY3RpdmVNZXRhZGF0YWAgZnVuY3Rpb24gaW5zdGVhZCBvZiBudWxsLlxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBnZXREaXJlY3RpdmVNZXRhZGF0YSh0eXBlLCBkaXJlY3RpdmUgfHwge30pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBpbGVyID0gZ2V0Q29tcGlsZXJGYWNhZGUoeyB1c2FnZTogMCAvKiBEZWNvcmF0b3IgKi8sIGtpbmQ6ICdkaXJlY3RpdmUnLCB0eXBlIH0pO1xuICAgICAgICAgICAgICAgIG5nRGlyZWN0aXZlRGVmID1cbiAgICAgICAgICAgICAgICAgICAgY29tcGlsZXIuY29tcGlsZURpcmVjdGl2ZShhbmd1bGFyQ29yZUVudiwgbWV0YS5zb3VyY2VNYXBVcmwsIG1ldGEubWV0YWRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5nRGlyZWN0aXZlRGVmO1xuICAgICAgICB9LFxuICAgICAgICAvLyBNYWtlIHRoZSBwcm9wZXJ0eSBjb25maWd1cmFibGUgaW4gZGV2IG1vZGUgdG8gYWxsb3cgb3ZlcnJpZGluZyBpbiB0ZXN0c1xuICAgICAgICBjb25maWd1cmFibGU6ICEhbmdEZXZNb2RlLFxuICAgIH0pO1xufVxuZnVuY3Rpb24gZ2V0RGlyZWN0aXZlTWV0YWRhdGEodHlwZSwgbWV0YWRhdGEpIHtcbiAgICBjb25zdCBuYW1lID0gdHlwZSAmJiB0eXBlLm5hbWU7XG4gICAgY29uc3Qgc291cmNlTWFwVXJsID0gYG5nOi8vLyR7bmFtZX0vybVkaXIuanNgO1xuICAgIGNvbnN0IGNvbXBpbGVyID0gZ2V0Q29tcGlsZXJGYWNhZGUoeyB1c2FnZTogMCAvKiBEZWNvcmF0b3IgKi8sIGtpbmQ6ICdkaXJlY3RpdmUnLCB0eXBlIH0pO1xuICAgIGNvbnN0IGZhY2FkZSA9IGRpcmVjdGl2ZU1ldGFkYXRhKHR5cGUsIG1ldGFkYXRhKTtcbiAgICBmYWNhZGUudHlwZVNvdXJjZVNwYW4gPSBjb21waWxlci5jcmVhdGVQYXJzZVNvdXJjZVNwYW4oJ0RpcmVjdGl2ZScsIG5hbWUsIHNvdXJjZU1hcFVybCk7XG4gICAgaWYgKGZhY2FkZS51c2VzSW5oZXJpdGFuY2UpIHtcbiAgICAgICAgYWRkRGlyZWN0aXZlRGVmVG9VbmRlY29yYXRlZFBhcmVudHModHlwZSk7XG4gICAgfVxuICAgIHJldHVybiB7IG1ldGFkYXRhOiBmYWNhZGUsIHNvdXJjZU1hcFVybCB9O1xufVxuZnVuY3Rpb24gYWRkRGlyZWN0aXZlRmFjdG9yeURlZih0eXBlLCBtZXRhZGF0YSkge1xuICAgIGxldCBuZ0ZhY3RvcnlEZWYgPSBudWxsO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBOR19GQUNUT1JZX0RFRiwge1xuICAgICAgICBnZXQ6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChuZ0ZhY3RvcnlEZWYgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gZ2V0RGlyZWN0aXZlTWV0YWRhdGEodHlwZSwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBpbGVyID0gZ2V0Q29tcGlsZXJGYWNhZGUoeyB1c2FnZTogMCAvKiBEZWNvcmF0b3IgKi8sIGtpbmQ6ICdkaXJlY3RpdmUnLCB0eXBlIH0pO1xuICAgICAgICAgICAgICAgIG5nRmFjdG9yeURlZiA9IGNvbXBpbGVyLmNvbXBpbGVGYWN0b3J5KGFuZ3VsYXJDb3JlRW52LCBgbmc6Ly8vJHt0eXBlLm5hbWV9L8m1ZmFjLmpzYCwge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBtZXRhLm1ldGFkYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IG1ldGEubWV0YWRhdGEudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZUFyZ3VtZW50Q291bnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGRlcHM6IHJlZmxlY3REZXBlbmRlbmNpZXModHlwZSksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogY29tcGlsZXIuRmFjdG9yeVRhcmdldC5EaXJlY3RpdmVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZ0ZhY3RvcnlEZWY7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIE1ha2UgdGhlIHByb3BlcnR5IGNvbmZpZ3VyYWJsZSBpbiBkZXYgbW9kZSB0byBhbGxvdyBvdmVycmlkaW5nIGluIHRlc3RzXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogISFuZ0Rldk1vZGUsXG4gICAgfSk7XG59XG5mdW5jdGlvbiBleHRlbmRzRGlyZWN0bHlGcm9tT2JqZWN0KHR5cGUpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHR5cGUucHJvdG90eXBlKSA9PT0gT2JqZWN0LnByb3RvdHlwZTtcbn1cbi8qKlxuICogRXh0cmFjdCB0aGUgYFIzRGlyZWN0aXZlTWV0YWRhdGFgIGZvciBhIHBhcnRpY3VsYXIgZGlyZWN0aXZlIChlaXRoZXIgYSBgRGlyZWN0aXZlYCBvciBhXG4gKiBgQ29tcG9uZW50YCkuXG4gKi9cbmZ1bmN0aW9uIGRpcmVjdGl2ZU1ldGFkYXRhKHR5cGUsIG1ldGFkYXRhKSB7XG4gICAgLy8gUmVmbGVjdCBpbnB1dHMgYW5kIG91dHB1dHMuXG4gICAgY29uc3QgcmVmbGVjdCA9IGdldFJlZmxlY3QoKTtcbiAgICBjb25zdCBwcm9wTWV0YWRhdGEgPSByZWZsZWN0Lm93blByb3BNZXRhZGF0YSh0eXBlKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiB0eXBlLm5hbWUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIHNlbGVjdG9yOiBtZXRhZGF0YS5zZWxlY3RvciAhPT0gdW5kZWZpbmVkID8gbWV0YWRhdGEuc2VsZWN0b3IgOiBudWxsLFxuICAgICAgICBob3N0OiBtZXRhZGF0YS5ob3N0IHx8IEVNUFRZX09CSixcbiAgICAgICAgcHJvcE1ldGFkYXRhOiBwcm9wTWV0YWRhdGEsXG4gICAgICAgIGlucHV0czogbWV0YWRhdGEuaW5wdXRzIHx8IEVNUFRZX0FSUkFZLFxuICAgICAgICBvdXRwdXRzOiBtZXRhZGF0YS5vdXRwdXRzIHx8IEVNUFRZX0FSUkFZLFxuICAgICAgICBxdWVyaWVzOiBleHRyYWN0UXVlcmllc01ldGFkYXRhKHR5cGUsIHByb3BNZXRhZGF0YSwgaXNDb250ZW50UXVlcnkpLFxuICAgICAgICBsaWZlY3ljbGU6IHsgdXNlc09uQ2hhbmdlczogcmVmbGVjdC5oYXNMaWZlY3ljbGVIb29rKHR5cGUsICduZ09uQ2hhbmdlcycpIH0sXG4gICAgICAgIHR5cGVTb3VyY2VTcGFuOiBudWxsLFxuICAgICAgICB1c2VzSW5oZXJpdGFuY2U6ICFleHRlbmRzRGlyZWN0bHlGcm9tT2JqZWN0KHR5cGUpLFxuICAgICAgICBleHBvcnRBczogZXh0cmFjdEV4cG9ydEFzKG1ldGFkYXRhLmV4cG9ydEFzKSxcbiAgICAgICAgcHJvdmlkZXJzOiBtZXRhZGF0YS5wcm92aWRlcnMgfHwgbnVsbCxcbiAgICAgICAgdmlld1F1ZXJpZXM6IGV4dHJhY3RRdWVyaWVzTWV0YWRhdGEodHlwZSwgcHJvcE1ldGFkYXRhLCBpc1ZpZXdRdWVyeSlcbiAgICB9O1xufVxuLyoqXG4gKiBBZGRzIGEgZGlyZWN0aXZlIGRlZmluaXRpb24gdG8gYWxsIHBhcmVudCBjbGFzc2VzIG9mIGEgdHlwZSB0aGF0IGRvbid0IGhhdmUgYW4gQW5ndWxhciBkZWNvcmF0b3IuXG4gKi9cbmZ1bmN0aW9uIGFkZERpcmVjdGl2ZURlZlRvVW5kZWNvcmF0ZWRQYXJlbnRzKHR5cGUpIHtcbiAgICBjb25zdCBvYmpQcm90b3R5cGUgPSBPYmplY3QucHJvdG90eXBlO1xuICAgIGxldCBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodHlwZS5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO1xuICAgIC8vIEdvIHVwIHRoZSBwcm90b3R5cGUgdW50aWwgd2UgaGl0IGBPYmplY3RgLlxuICAgIHdoaWxlIChwYXJlbnQgJiYgcGFyZW50ICE9PSBvYmpQcm90b3R5cGUpIHtcbiAgICAgICAgLy8gU2luY2UgaW5oZXJpdGFuY2Ugd29ya3MgaWYgdGhlIGNsYXNzIHdhcyBhbm5vdGF0ZWQgYWxyZWFkeSwgd2Ugb25seSBuZWVkIHRvIGFkZFxuICAgICAgICAvLyB0aGUgZGVmIGlmIHRoZXJlIGFyZSBubyBhbm5vdGF0aW9ucyBhbmQgdGhlIGRlZiBoYXNuJ3QgYmVlbiBjcmVhdGVkIGFscmVhZHkuXG4gICAgICAgIGlmICghZ2V0RGlyZWN0aXZlRGVmKHBhcmVudCkgJiYgIWdldENvbXBvbmVudERlZihwYXJlbnQpICYmXG4gICAgICAgICAgICBzaG91bGRBZGRBYnN0cmFjdERpcmVjdGl2ZShwYXJlbnQpKSB7XG4gICAgICAgICAgICBjb21waWxlRGlyZWN0aXZlKHBhcmVudCwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHBhcmVudCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY29udmVydFRvUjNRdWVyeVByZWRpY2F0ZShzZWxlY3Rvcikge1xuICAgIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09ICdzdHJpbmcnID8gc3BsaXRCeUNvbW1hKHNlbGVjdG9yKSA6IHJlc29sdmVGb3J3YXJkUmVmKHNlbGVjdG9yKTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRUb1IzUXVlcnlNZXRhZGF0YShwcm9wZXJ0eU5hbWUsIGFubikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLFxuICAgICAgICBwcmVkaWNhdGU6IGNvbnZlcnRUb1IzUXVlcnlQcmVkaWNhdGUoYW5uLnNlbGVjdG9yKSxcbiAgICAgICAgZGVzY2VuZGFudHM6IGFubi5kZXNjZW5kYW50cyxcbiAgICAgICAgZmlyc3Q6IGFubi5maXJzdCxcbiAgICAgICAgcmVhZDogYW5uLnJlYWQgPyBhbm4ucmVhZCA6IG51bGwsXG4gICAgICAgIHN0YXRpYzogISFhbm4uc3RhdGljLFxuICAgICAgICBlbWl0RGlzdGluY3RDaGFuZ2VzT25seTogISFhbm4uZW1pdERpc3RpbmN0Q2hhbmdlc09ubHksXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGV4dHJhY3RRdWVyaWVzTWV0YWRhdGEodHlwZSwgcHJvcE1ldGFkYXRhLCBpc1F1ZXJ5QW5uKSB7XG4gICAgY29uc3QgcXVlcmllc01ldGEgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGZpZWxkIGluIHByb3BNZXRhZGF0YSkge1xuICAgICAgICBpZiAocHJvcE1ldGFkYXRhLmhhc093blByb3BlcnR5KGZpZWxkKSkge1xuICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvbnMgPSBwcm9wTWV0YWRhdGFbZmllbGRdO1xuICAgICAgICAgICAgYW5ub3RhdGlvbnMuZm9yRWFjaChhbm4gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpc1F1ZXJ5QW5uKGFubikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbm4uc2VsZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgY29uc3RydWN0IGEgcXVlcnkgZm9yIHRoZSBwcm9wZXJ0eSBcIiR7ZmllbGR9XCIgb2YgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYFwiJHtzdHJpbmdpZnlGb3JFcnJvcih0eXBlKX1cIiBzaW5jZSB0aGUgcXVlcnkgc2VsZWN0b3Igd2Fzbid0IGRlZmluZWQuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFubm90YXRpb25zLnNvbWUoaXNJbnB1dEFubm90YXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjb21iaW5lIEBJbnB1dCBkZWNvcmF0b3JzIHdpdGggcXVlcnkgZGVjb3JhdG9yc2ApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJpZXNNZXRhLnB1c2goY29udmVydFRvUjNRdWVyeU1ldGFkYXRhKGZpZWxkLCBhbm4pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcXVlcmllc01ldGE7XG59XG5mdW5jdGlvbiBleHRyYWN0RXhwb3J0QXMoZXhwb3J0QXMpIHtcbiAgICByZXR1cm4gZXhwb3J0QXMgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBzcGxpdEJ5Q29tbWEoZXhwb3J0QXMpO1xufVxuZnVuY3Rpb24gaXNDb250ZW50UXVlcnkodmFsdWUpIHtcbiAgICBjb25zdCBuYW1lID0gdmFsdWUubmdNZXRhZGF0YU5hbWU7XG4gICAgcmV0dXJuIG5hbWUgPT09ICdDb250ZW50Q2hpbGQnIHx8IG5hbWUgPT09ICdDb250ZW50Q2hpbGRyZW4nO1xufVxuZnVuY3Rpb24gaXNWaWV3UXVlcnkodmFsdWUpIHtcbiAgICBjb25zdCBuYW1lID0gdmFsdWUubmdNZXRhZGF0YU5hbWU7XG4gICAgcmV0dXJuIG5hbWUgPT09ICdWaWV3Q2hpbGQnIHx8IG5hbWUgPT09ICdWaWV3Q2hpbGRyZW4nO1xufVxuZnVuY3Rpb24gaXNJbnB1dEFubm90YXRpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUubmdNZXRhZGF0YU5hbWUgPT09ICdJbnB1dCc7XG59XG5mdW5jdGlvbiBzcGxpdEJ5Q29tbWEodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUuc3BsaXQoJywnKS5tYXAocGllY2UgPT4gcGllY2UudHJpbSgpKTtcbn1cbmNvbnN0IExJRkVDWUNMRV9IT09LUyA9IFtcbiAgICAnbmdPbkNoYW5nZXMnLCAnbmdPbkluaXQnLCAnbmdPbkRlc3Ryb3knLCAnbmdEb0NoZWNrJywgJ25nQWZ0ZXJWaWV3SW5pdCcsICduZ0FmdGVyVmlld0NoZWNrZWQnLFxuICAgICduZ0FmdGVyQ29udGVudEluaXQnLCAnbmdBZnRlckNvbnRlbnRDaGVja2VkJ1xuXTtcbmZ1bmN0aW9uIHNob3VsZEFkZEFic3RyYWN0RGlyZWN0aXZlKHR5cGUpIHtcbiAgICBjb25zdCByZWZsZWN0ID0gZ2V0UmVmbGVjdCgpO1xuICAgIGlmIChMSUZFQ1lDTEVfSE9PS1Muc29tZShob29rTmFtZSA9PiByZWZsZWN0Lmhhc0xpZmVjeWNsZUhvb2sodHlwZSwgaG9va05hbWUpKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgcHJvcE1ldGFkYXRhID0gcmVmbGVjdC5wcm9wTWV0YWRhdGEodHlwZSk7XG4gICAgZm9yIChjb25zdCBmaWVsZCBpbiBwcm9wTWV0YWRhdGEpIHtcbiAgICAgICAgY29uc3QgYW5ub3RhdGlvbnMgPSBwcm9wTWV0YWRhdGFbZmllbGRdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFubm90YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYW5ub3RhdGlvbnNbaV07XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YU5hbWUgPSBjdXJyZW50Lm5nTWV0YWRhdGFOYW1lO1xuICAgICAgICAgICAgaWYgKGlzSW5wdXRBbm5vdGF0aW9uKGN1cnJlbnQpIHx8IGlzQ29udGVudFF1ZXJ5KGN1cnJlbnQpIHx8IGlzVmlld1F1ZXJ5KGN1cnJlbnQpIHx8XG4gICAgICAgICAgICAgICAgbWV0YWRhdGFOYW1lID09PSAnT3V0cHV0JyB8fCBtZXRhZGF0YU5hbWUgPT09ICdIb3N0QmluZGluZycgfHxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YU5hbWUgPT09ICdIb3N0TGlzdGVuZXInKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmZ1bmN0aW9uIGNvbXBpbGVQaXBlKHR5cGUsIG1ldGEpIHtcbiAgICBsZXQgbmdQaXBlRGVmID0gbnVsbDtcbiAgICBsZXQgbmdGYWN0b3J5RGVmID0gbnVsbDtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodHlwZSwgTkdfRkFDVE9SWV9ERUYsIHtcbiAgICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobmdGYWN0b3J5RGVmID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBnZXRQaXBlTWV0YWRhdGEodHlwZSwgbWV0YSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7IHVzYWdlOiAwIC8qIERlY29yYXRvciAqLywga2luZDogJ3BpcGUnLCB0eXBlOiBtZXRhZGF0YS50eXBlIH0pO1xuICAgICAgICAgICAgICAgIG5nRmFjdG9yeURlZiA9IGNvbXBpbGVyLmNvbXBpbGVGYWN0b3J5KGFuZ3VsYXJDb3JlRW52LCBgbmc6Ly8vJHttZXRhZGF0YS5uYW1lfS/JtWZhYy5qc2AsIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbWV0YWRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogbWV0YWRhdGEudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZUFyZ3VtZW50Q291bnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIGRlcHM6IHJlZmxlY3REZXBlbmRlbmNpZXModHlwZSksXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogY29tcGlsZXIuRmFjdG9yeVRhcmdldC5QaXBlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmdGYWN0b3J5RGVmO1xuICAgICAgICB9LFxuICAgICAgICAvLyBNYWtlIHRoZSBwcm9wZXJ0eSBjb25maWd1cmFibGUgaW4gZGV2IG1vZGUgdG8gYWxsb3cgb3ZlcnJpZGluZyBpbiB0ZXN0c1xuICAgICAgICBjb25maWd1cmFibGU6ICEhbmdEZXZNb2RlLFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0eXBlLCBOR19QSVBFX0RFRiwge1xuICAgICAgICBnZXQ6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChuZ1BpcGVEZWYgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGdldFBpcGVNZXRhZGF0YSh0eXBlLCBtZXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21waWxlciA9IGdldENvbXBpbGVyRmFjYWRlKHsgdXNhZ2U6IDAgLyogRGVjb3JhdG9yICovLCBraW5kOiAncGlwZScsIHR5cGU6IG1ldGFkYXRhLnR5cGUgfSk7XG4gICAgICAgICAgICAgICAgbmdQaXBlRGVmID1cbiAgICAgICAgICAgICAgICAgICAgY29tcGlsZXIuY29tcGlsZVBpcGUoYW5ndWxhckNvcmVFbnYsIGBuZzovLy8ke21ldGFkYXRhLm5hbWV9L8m1cGlwZS5qc2AsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZ1BpcGVEZWY7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIE1ha2UgdGhlIHByb3BlcnR5IGNvbmZpZ3VyYWJsZSBpbiBkZXYgbW9kZSB0byBhbGxvdyBvdmVycmlkaW5nIGluIHRlc3RzXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogISFuZ0Rldk1vZGUsXG4gICAgfSk7XG59XG5mdW5jdGlvbiBnZXRQaXBlTWV0YWRhdGEodHlwZSwgbWV0YSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIG5hbWU6IHR5cGUubmFtZSxcbiAgICAgICAgcGlwZU5hbWU6IG1ldGEubmFtZSxcbiAgICAgICAgcHVyZTogbWV0YS5wdXJlICE9PSB1bmRlZmluZWQgPyBtZXRhLnB1cmUgOiB0cnVlXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFR5cGUgb2YgdGhlIERpcmVjdGl2ZSBtZXRhZGF0YS5cbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNvbnN0IERpcmVjdGl2ZSA9IG1ha2VEZWNvcmF0b3IoJ0RpcmVjdGl2ZScsIChkaXIgPSB7fSkgPT4gZGlyLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgKHR5cGUsIG1ldGEpID0+IGNvbXBpbGVEaXJlY3RpdmUodHlwZSwgbWV0YSkpO1xuLyoqXG4gKiBDb21wb25lbnQgZGVjb3JhdG9yIGFuZCBtZXRhZGF0YS5cbiAqXG4gKiBAQW5ub3RhdGlvblxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBDb21wb25lbnQgPSBtYWtlRGVjb3JhdG9yKCdDb21wb25lbnQnLCAoYyA9IHt9KSA9PiAoeyBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5LkRlZmF1bHQsIC4uLmMgfSksIERpcmVjdGl2ZSwgdW5kZWZpbmVkLCAodHlwZSwgbWV0YSkgPT4gY29tcGlsZUNvbXBvbmVudCh0eXBlLCBtZXRhKSk7XG4vKipcbiAqIEBBbm5vdGF0aW9uXG4gKiBAcHVibGljQXBpXG4gKi9cbmNvbnN0IFBpcGUgPSBtYWtlRGVjb3JhdG9yKCdQaXBlJywgKHApID0+ICh7IHB1cmU6IHRydWUsIC4uLnAgfSksIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCAodHlwZSwgbWV0YSkgPT4gY29tcGlsZVBpcGUodHlwZSwgbWV0YSkpO1xuLyoqXG4gKiBAQW5ub3RhdGlvblxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBJbnB1dCA9IG1ha2VQcm9wRGVjb3JhdG9yKCdJbnB1dCcsIChiaW5kaW5nUHJvcGVydHlOYW1lKSA9PiAoeyBiaW5kaW5nUHJvcGVydHlOYW1lIH0pKTtcbi8qKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgT3V0cHV0ID0gbWFrZVByb3BEZWNvcmF0b3IoJ091dHB1dCcsIChiaW5kaW5nUHJvcGVydHlOYW1lKSA9PiAoeyBiaW5kaW5nUHJvcGVydHlOYW1lIH0pKTtcbi8qKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgSG9zdEJpbmRpbmcgPSBtYWtlUHJvcERlY29yYXRvcignSG9zdEJpbmRpbmcnLCAoaG9zdFByb3BlcnR5TmFtZSkgPT4gKHsgaG9zdFByb3BlcnR5TmFtZSB9KSk7XG4vKipcbiAqIERlY29yYXRvciB0aGF0IGJpbmRzIGEgRE9NIGV2ZW50IHRvIGEgaG9zdCBsaXN0ZW5lciBhbmQgc3VwcGxpZXMgY29uZmlndXJhdGlvbiBtZXRhZGF0YS5cbiAqIEFuZ3VsYXIgaW52b2tlcyB0aGUgc3VwcGxpZWQgaGFuZGxlciBtZXRob2Qgd2hlbiB0aGUgaG9zdCBlbGVtZW50IGVtaXRzIHRoZSBzcGVjaWZpZWQgZXZlbnQsXG4gKiBhbmQgdXBkYXRlcyB0aGUgYm91bmQgZWxlbWVudCB3aXRoIHRoZSByZXN1bHQuXG4gKlxuICogSWYgdGhlIGhhbmRsZXIgbWV0aG9kIHJldHVybnMgZmFsc2UsIGFwcGxpZXMgYHByZXZlbnREZWZhdWx0YCBvbiB0aGUgYm91bmQgZWxlbWVudC5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBkZWNsYXJlcyBhIGRpcmVjdGl2ZVxuICogdGhhdCBhdHRhY2hlcyBhIGNsaWNrIGxpc3RlbmVyIHRvIGEgYnV0dG9uIGFuZCBjb3VudHMgY2xpY2tzLlxuICpcbiAqIGBgYHRzXG4gKiBARGlyZWN0aXZlKHtzZWxlY3RvcjogJ2J1dHRvbltjb3VudGluZ10nfSlcbiAqIGNsYXNzIENvdW50Q2xpY2tzIHtcbiAqICAgbnVtYmVyT2ZDbGlja3MgPSAwO1xuICpcbiAqICAgQEhvc3RMaXN0ZW5lcignY2xpY2snLCBbJyRldmVudC50YXJnZXQnXSlcbiAqICAgb25DbGljayhidG4pIHtcbiAqICAgICBjb25zb2xlLmxvZygnYnV0dG9uJywgYnRuLCAnbnVtYmVyIG9mIGNsaWNrczonLCB0aGlzLm51bWJlck9mQ2xpY2tzKyspO1xuICogICB9XG4gKiB9XG4gKlxuICogQENvbXBvbmVudCh7XG4gKiAgIHNlbGVjdG9yOiAnYXBwJyxcbiAqICAgdGVtcGxhdGU6ICc8YnV0dG9uIGNvdW50aW5nPkluY3JlbWVudDwvYnV0dG9uPicsXG4gKiB9KVxuICogY2xhc3MgQXBwIHt9XG4gKlxuICogYGBgXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHJlZ2lzdGVycyBhbm90aGVyIERPTSBldmVudCBoYW5kbGVyIHRoYXQgbGlzdGVucyBmb3IgYEVudGVyYCBrZXktcHJlc3NcbiAqIGV2ZW50cyBvbiB0aGUgZ2xvYmFsIGB3aW5kb3dgLlxuICogYGBgIHRzXG4gKiBpbXBvcnQgeyBIb3N0TGlzdGVuZXIsIENvbXBvbmVudCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG4gKlxuICogQENvbXBvbmVudCh7XG4gKiAgIHNlbGVjdG9yOiAnYXBwJyxcbiAqICAgdGVtcGxhdGU6IGA8aDE+SGVsbG8sIHlvdSBoYXZlIHByZXNzZWQgZW50ZXIge3tjb3VudGVyfX0gbnVtYmVyIG9mIHRpbWVzITwvaDE+IFByZXNzIGVudGVyIGtleVxuICogdG8gaW5jcmVtZW50IHRoZSBjb3VudGVyLlxuICogICA8YnV0dG9uIChjbGljayk9XCJyZXNldENvdW50ZXIoKVwiPlJlc2V0IENvdW50ZXI8L2J1dHRvbj5gXG4gKiB9KVxuICogY2xhc3MgQXBwQ29tcG9uZW50IHtcbiAqICAgY291bnRlciA9IDA7XG4gKiAgIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzprZXlkb3duLmVudGVyJywgWyckZXZlbnQnXSlcbiAqICAgaGFuZGxlS2V5RG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICogICAgIHRoaXMuY291bnRlcisrO1xuICogICB9XG4gKiAgIHJlc2V0Q291bnRlcigpIHtcbiAqICAgICB0aGlzLmNvdW50ZXIgPSAwO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqIFRoZSBsaXN0IG9mIHZhbGlkIGtleSBuYW1lcyBmb3IgYGtleWRvd25gIGFuZCBga2V5dXBgIGV2ZW50c1xuICogY2FuIGJlIGZvdW5kIGhlcmU6XG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzLWtleS8jbmFtZWQta2V5LWF0dHJpYnV0ZS12YWx1ZXNcbiAqXG4gKiBOb3RlIHRoYXQga2V5cyBjYW4gYWxzbyBiZSBjb21iaW5lZCwgZS5nLiBgQEhvc3RMaXN0ZW5lcigna2V5ZG93bi5zaGlmdC5hJylgLlxuICpcbiAqIFRoZSBnbG9iYWwgdGFyZ2V0IG5hbWVzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcHJlZml4IGFuIGV2ZW50IG5hbWUgYXJlXG4gKiBgZG9jdW1lbnQ6YCwgYHdpbmRvdzpgIGFuZCBgYm9keTpgLlxuICpcbiAqIEBBbm5vdGF0aW9uXG4gKiBAcHVibGljQXBpXG4gKi9cbmNvbnN0IEhvc3RMaXN0ZW5lciA9IG1ha2VQcm9wRGVjb3JhdG9yKCdIb3N0TGlzdGVuZXInLCAoZXZlbnROYW1lLCBhcmdzKSA9PiAoeyBldmVudE5hbWUsIGFyZ3MgfSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogQEFubm90YXRpb25cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgTmdNb2R1bGUgPSBtYWtlRGVjb3JhdG9yKCdOZ01vZHVsZScsIChuZ01vZHVsZSkgPT4gbmdNb2R1bGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBcbi8qKlxuICogRGVjb3JhdG9yIHRoYXQgbWFya3MgdGhlIGZvbGxvd2luZyBjbGFzcyBhcyBhbiBOZ01vZHVsZSwgYW5kIHN1cHBsaWVzXG4gKiBjb25maWd1cmF0aW9uIG1ldGFkYXRhIGZvciBpdC5cbiAqXG4gKiAqIFRoZSBgZGVjbGFyYXRpb25zYCBhbmQgYGVudHJ5Q29tcG9uZW50c2Agb3B0aW9ucyBjb25maWd1cmUgdGhlIGNvbXBpbGVyXG4gKiB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYmVsb25ncyB0byB0aGUgTmdNb2R1bGUuXG4gKiAqIFRoZSBgcHJvdmlkZXJzYCBvcHRpb25zIGNvbmZpZ3VyZXMgdGhlIE5nTW9kdWxlJ3MgaW5qZWN0b3IgdG8gcHJvdmlkZVxuICogZGVwZW5kZW5jaWVzIHRoZSBOZ01vZHVsZSBtZW1iZXJzLlxuICogKiBUaGUgYGltcG9ydHNgIGFuZCBgZXhwb3J0c2Agb3B0aW9ucyBicmluZyBpbiBtZW1iZXJzIGZyb20gb3RoZXIgbW9kdWxlcywgYW5kIG1ha2VcbiAqIHRoaXMgbW9kdWxlJ3MgbWVtYmVycyBhdmFpbGFibGUgdG8gb3RoZXJzLlxuICovXG4odHlwZSwgbWV0YSkgPT4gY29tcGlsZU5nTW9kdWxlKHR5cGUsIG1ldGEpKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmZ1bmN0aW9uIG5vb3AoLi4uYXJncykge1xuICAgIC8vIERvIG5vdGhpbmcuXG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBUaGUgZXhpc3RlbmNlIG9mIHRoaXMgY29uc3RhbnQgKGluIHRoaXMgcGFydGljdWxhciBmaWxlKSBpbmZvcm1zIHRoZSBBbmd1bGFyIGNvbXBpbGVyIHRoYXQgdGhlXG4gKiBjdXJyZW50IHByb2dyYW0gaXMgYWN0dWFsbHkgQGFuZ3VsYXIvY29yZSwgd2hpY2ggbmVlZHMgdG8gYmUgY29tcGlsZWQgc3BlY2lhbGx5LlxuICovXG5jb25zdCBJVFNfSlVTVF9BTkdVTEFSID0gdHJ1ZTtcblxuLyoqXG4gKiBBIFtESSB0b2tlbl0oZ3VpZGUvZ2xvc3NhcnkjZGktdG9rZW4gXCJESSB0b2tlbiBkZWZpbml0aW9uXCIpIHRoYXQgeW91IGNhbiB1c2UgdG8gcHJvdmlkZVxuICogb25lIG9yIG1vcmUgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb25zLlxuICpcbiAqIFRoZSBwcm92aWRlZCBmdW5jdGlvbnMgYXJlIGluamVjdGVkIGF0IGFwcGxpY2F0aW9uIHN0YXJ0dXAgYW5kIGV4ZWN1dGVkIGR1cmluZ1xuICogYXBwIGluaXRpYWxpemF0aW9uLiBJZiBhbnkgb2YgdGhlc2UgZnVuY3Rpb25zIHJldHVybnMgYSBQcm9taXNlIG9yIGFuIE9ic2VydmFibGUsIGluaXRpYWxpemF0aW9uXG4gKiBkb2VzIG5vdCBjb21wbGV0ZSB1bnRpbCB0aGUgUHJvbWlzZSBpcyByZXNvbHZlZCBvciB0aGUgT2JzZXJ2YWJsZSBpcyBjb21wbGV0ZWQuXG4gKlxuICogWW91IGNhbiwgZm9yIGV4YW1wbGUsIGNyZWF0ZSBhIGZhY3RvcnkgZnVuY3Rpb24gdGhhdCBsb2FkcyBsYW5ndWFnZSBkYXRhXG4gKiBvciBhbiBleHRlcm5hbCBjb25maWd1cmF0aW9uLCBhbmQgcHJvdmlkZSB0aGF0IGZ1bmN0aW9uIHRvIHRoZSBgQVBQX0lOSVRJQUxJWkVSYCB0b2tlbi5cbiAqIFRoZSBmdW5jdGlvbiBpcyBleGVjdXRlZCBkdXJpbmcgdGhlIGFwcGxpY2F0aW9uIGJvb3RzdHJhcCBwcm9jZXNzLFxuICogYW5kIHRoZSBuZWVkZWQgZGF0YSBpcyBhdmFpbGFibGUgb24gc3RhcnR1cC5cbiAqXG4gKiBAc2VlIGBBcHBsaWNhdGlvbkluaXRTdGF0dXNgXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqXG4gKiBUaGUgZm9sbG93aW5nIGV4YW1wbGUgaWxsdXN0cmF0ZXMgaG93IHRvIGNvbmZpZ3VyZSBhIG11bHRpLXByb3ZpZGVyIHVzaW5nIGBBUFBfSU5JVElBTElaRVJgIHRva2VuXG4gKiBhbmQgYSBmdW5jdGlvbiByZXR1cm5pbmcgYSBwcm9taXNlLlxuICpcbiAqIGBgYFxuICogIGZ1bmN0aW9uIGluaXRpYWxpemVBcHAoKTogUHJvbWlzZTxhbnk+IHtcbiAqICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gKiAgICAgIC8vIERvIHNvbWUgYXN5bmNocm9ub3VzIHN0dWZmXG4gKiAgICAgIHJlc29sdmUoKTtcbiAqICAgIH0pO1xuICogIH1cbiAqXG4gKiAgQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW0Jyb3dzZXJNb2R1bGVdLFxuICogICBkZWNsYXJhdGlvbnM6IFtBcHBDb21wb25lbnRdLFxuICogICBib290c3RyYXA6IFtBcHBDb21wb25lbnRdLFxuICogICBwcm92aWRlcnM6IFt7XG4gKiAgICAgcHJvdmlkZTogQVBQX0lOSVRJQUxJWkVSLFxuICogICAgIHVzZUZhY3Rvcnk6ICgpID0+IGluaXRpYWxpemVBcHAsXG4gKiAgICAgbXVsdGk6IHRydWVcbiAqICAgIH1dXG4gKiAgIH0pXG4gKiAgZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7fVxuICogYGBgXG4gKlxuICogSXQncyBhbHNvIHBvc3NpYmxlIHRvIGNvbmZpZ3VyZSBhIG11bHRpLXByb3ZpZGVyIHVzaW5nIGBBUFBfSU5JVElBTElaRVJgIHRva2VuIGFuZCBhIGZ1bmN0aW9uXG4gKiByZXR1cm5pbmcgYW4gb2JzZXJ2YWJsZSwgc2VlIGFuIGV4YW1wbGUgYmVsb3cuIE5vdGU6IHRoZSBgSHR0cENsaWVudGAgaW4gdGhpcyBleGFtcGxlIGlzIHVzZWQgZm9yXG4gKiBkZW1vIHB1cnBvc2VzIHRvIGlsbHVzdHJhdGUgaG93IHRoZSBmYWN0b3J5IGZ1bmN0aW9uIGNhbiB3b3JrIHdpdGggb3RoZXIgcHJvdmlkZXJzIGF2YWlsYWJsZVxuICogdGhyb3VnaCBESS5cbiAqXG4gKiBgYGBcbiAqICBmdW5jdGlvbiBpbml0aWFsaXplQXBwRmFjdG9yeShodHRwQ2xpZW50OiBIdHRwQ2xpZW50KTogKCkgPT4gT2JzZXJ2YWJsZTxhbnk+IHtcbiAqICAgcmV0dXJuICgpID0+IGh0dHBDbGllbnQuZ2V0KFwiaHR0cHM6Ly9zb21lVXJsLmNvbS9hcGkvdXNlclwiKVxuICogICAgIC5waXBlKFxuICogICAgICAgIHRhcCh1c2VyID0+IHsgLi4uIH0pXG4gKiAgICAgKTtcbiAqICB9XG4gKlxuICogIEBOZ01vZHVsZSh7XG4gKiAgICBpbXBvcnRzOiBbQnJvd3Nlck1vZHVsZSwgSHR0cENsaWVudE1vZHVsZV0sXG4gKiAgICBkZWNsYXJhdGlvbnM6IFtBcHBDb21wb25lbnRdLFxuICogICAgYm9vdHN0cmFwOiBbQXBwQ29tcG9uZW50XSxcbiAqICAgIHByb3ZpZGVyczogW3tcbiAqICAgICAgcHJvdmlkZTogQVBQX0lOSVRJQUxJWkVSLFxuICogICAgICB1c2VGYWN0b3J5OiBpbml0aWFsaXplQXBwRmFjdG9yeSxcbiAqICAgICAgZGVwczogW0h0dHBDbGllbnRdLFxuICogICAgICBtdWx0aTogdHJ1ZVxuICogICAgfV1cbiAqICB9KVxuICogIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge31cbiAqIGBgYFxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgQVBQX0lOSVRJQUxJWkVSID0gbmV3IEluamVjdGlvblRva2VuKCdBcHBsaWNhdGlvbiBJbml0aWFsaXplcicpO1xuLyoqXG4gKiBBIGNsYXNzIHRoYXQgcmVmbGVjdHMgdGhlIHN0YXRlIG9mIHJ1bm5pbmcge0BsaW5rIEFQUF9JTklUSUFMSVpFUn0gZnVuY3Rpb25zLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgQXBwbGljYXRpb25Jbml0U3RhdHVzIHtcbiAgICBjb25zdHJ1Y3RvcihhcHBJbml0cykge1xuICAgICAgICB0aGlzLmFwcEluaXRzID0gYXBwSW5pdHM7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IG5vb3A7XG4gICAgICAgIHRoaXMucmVqZWN0ID0gbm9vcDtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kb25lUHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzO1xuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgcnVuSW5pdGlhbGl6ZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFzeW5jSW5pdFByb21pc2VzID0gW107XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5hcHBJbml0cykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFwcEluaXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5pdFJlc3VsdCA9IHRoaXMuYXBwSW5pdHNbaV0oKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNQcm9taXNlKGluaXRSZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jSW5pdFByb21pc2VzLnB1c2goaW5pdFJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzT2JzZXJ2YWJsZShpbml0UmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZhYmxlQXNQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFJlc3VsdC5zdWJzY3JpYmUoeyBjb21wbGV0ZTogcmVzb2x2ZSwgZXJyb3I6IHJlamVjdCB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jSW5pdFByb21pc2VzLnB1c2gob2JzZXJ2YWJsZUFzUHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFByb21pc2UuYWxsKGFzeW5jSW5pdFByb21pc2VzKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFzeW5jSW5pdFByb21pc2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB9XG59XG5BcHBsaWNhdGlvbkluaXRTdGF0dXMuybVmYWMgPSBmdW5jdGlvbiBBcHBsaWNhdGlvbkluaXRTdGF0dXNfRmFjdG9yeSh0KSB7IHJldHVybiBuZXcgKHQgfHwgQXBwbGljYXRpb25Jbml0U3RhdHVzKSjJtcm1aW5qZWN0KEFQUF9JTklUSUFMSVpFUiwgOCkpOyB9O1xuQXBwbGljYXRpb25Jbml0U3RhdHVzLsm1cHJvdiA9IC8qQF9fUFVSRV9fKi8gybXJtWRlZmluZUluamVjdGFibGUoeyB0b2tlbjogQXBwbGljYXRpb25Jbml0U3RhdHVzLCBmYWN0b3J5OiBBcHBsaWNhdGlvbkluaXRTdGF0dXMuybVmYWMsIHByb3ZpZGVkSW46ICdyb290JyB9KTtcbihmdW5jdGlvbiAoKSB7ICh0eXBlb2YgbmdEZXZNb2RlID09PSBcInVuZGVmaW5lZFwiIHx8IG5nRGV2TW9kZSkgJiYgc2V0Q2xhc3NNZXRhZGF0YShBcHBsaWNhdGlvbkluaXRTdGF0dXMsIFt7XG4gICAgICAgIHR5cGU6IEluamVjdGFibGUsXG4gICAgICAgIGFyZ3M6IFt7IHByb3ZpZGVkSW46ICdyb290JyB9XVxuICAgIH1dLCBmdW5jdGlvbiAoKSB7IHJldHVybiBbeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7XG4gICAgICAgICAgICAgICAgdHlwZTogSW5qZWN0LFxuICAgICAgICAgICAgICAgIGFyZ3M6IFtBUFBfSU5JVElBTElaRVJdXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgdHlwZTogT3B0aW9uYWxcbiAgICAgICAgICAgIH1dIH1dOyB9LCBudWxsKTsgfSkoKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIEEgW0RJIHRva2VuXShndWlkZS9nbG9zc2FyeSNkaS10b2tlbiBcIkRJIHRva2VuIGRlZmluaXRpb25cIikgcmVwcmVzZW50aW5nIGEgdW5pcXVlIHN0cmluZyBJRCwgdXNlZFxuICogcHJpbWFyaWx5IGZvciBwcmVmaXhpbmcgYXBwbGljYXRpb24gYXR0cmlidXRlcyBhbmQgQ1NTIHN0eWxlcyB3aGVuXG4gKiB7QGxpbmsgVmlld0VuY2Fwc3VsYXRpb24jRW11bGF0ZWQgVmlld0VuY2Fwc3VsYXRpb24uRW11bGF0ZWR9IGlzIGJlaW5nIHVzZWQuXG4gKlxuICogQlkgZGVmYXVsdCwgdGhlIHZhbHVlIGlzIHJhbmRvbWx5IGdlbmVyYXRlZCBhbmQgYXNzaWduZWQgdG8gdGhlIGFwcGxpY2F0aW9uIGJ5IEFuZ3VsYXIuXG4gKiBUbyBwcm92aWRlIGEgY3VzdG9tIElEIHZhbHVlLCB1c2UgYSBESSBwcm92aWRlciA8IS0tIFRPRE86IHByb3ZpZGVyIC0tPiB0byBjb25maWd1cmVcbiAqIHRoZSByb290IHtAbGluayBJbmplY3Rvcn0gdGhhdCB1c2VzIHRoaXMgdG9rZW4uXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBBUFBfSUQgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ0FwcElkJywge1xuICAgIHByb3ZpZGVkSW46ICdyb290JyxcbiAgICBmYWN0b3J5OiBfYXBwSWRSYW5kb21Qcm92aWRlckZhY3RvcnksXG59KTtcbmZ1bmN0aW9uIF9hcHBJZFJhbmRvbVByb3ZpZGVyRmFjdG9yeSgpIHtcbiAgICByZXR1cm4gYCR7X3JhbmRvbUNoYXIoKX0ke19yYW5kb21DaGFyKCl9JHtfcmFuZG9tQ2hhcigpfWA7XG59XG4vKipcbiAqIFByb3ZpZGVycyB0aGF0IGdlbmVyYXRlIGEgcmFuZG9tIGBBUFBfSURfVE9LRU5gLlxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBBUFBfSURfUkFORE9NX1BST1ZJREVSID0ge1xuICAgIHByb3ZpZGU6IEFQUF9JRCxcbiAgICB1c2VGYWN0b3J5OiBfYXBwSWRSYW5kb21Qcm92aWRlckZhY3RvcnksXG4gICAgZGVwczogW10sXG59O1xuZnVuY3Rpb24gX3JhbmRvbUNoYXIoKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoOTcgKyBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNSkpO1xufVxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgaXMgZXhlY3V0ZWQgd2hlbiBhIHBsYXRmb3JtIGlzIGluaXRpYWxpemVkLlxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBQTEFURk9STV9JTklUSUFMSVpFUiA9IG5ldyBJbmplY3Rpb25Ub2tlbignUGxhdGZvcm0gSW5pdGlhbGl6ZXInKTtcbi8qKlxuICogQSB0b2tlbiB0aGF0IGluZGljYXRlcyBhbiBvcGFxdWUgcGxhdGZvcm0gSUQuXG4gKiBAcHVibGljQXBpXG4gKi9cbmNvbnN0IFBMQVRGT1JNX0lEID0gbmV3IEluamVjdGlvblRva2VuKCdQbGF0Zm9ybSBJRCcpO1xuLyoqXG4gKiBBIFtESSB0b2tlbl0oZ3VpZGUvZ2xvc3NhcnkjZGktdG9rZW4gXCJESSB0b2tlbiBkZWZpbml0aW9uXCIpIHRoYXQgcHJvdmlkZXMgYSBzZXQgb2YgY2FsbGJhY2tzIHRvXG4gKiBiZSBjYWxsZWQgZm9yIGV2ZXJ5IGNvbXBvbmVudCB0aGF0IGlzIGJvb3RzdHJhcHBlZC5cbiAqXG4gKiBFYWNoIGNhbGxiYWNrIG11c3QgdGFrZSBhIGBDb21wb25lbnRSZWZgIGluc3RhbmNlIGFuZCByZXR1cm4gbm90aGluZy5cbiAqXG4gKiBgKGNvbXBvbmVudFJlZjogQ29tcG9uZW50UmVmKSA9PiB2b2lkYFxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgQVBQX0JPT1RTVFJBUF9MSVNURU5FUiA9IG5ldyBJbmplY3Rpb25Ub2tlbignYXBwQm9vdHN0cmFwTGlzdGVuZXInKTtcbi8qKlxuICogQSBbREkgdG9rZW5dKGd1aWRlL2dsb3NzYXJ5I2RpLXRva2VuIFwiREkgdG9rZW4gZGVmaW5pdGlvblwiKSB0aGF0IGluZGljYXRlcyB0aGUgcm9vdCBkaXJlY3Rvcnkgb2ZcbiAqIHRoZSBhcHBsaWNhdGlvblxuICogQHB1YmxpY0FwaVxuICovXG5jb25zdCBQQUNLQUdFX1JPT1RfVVJMID0gbmV3IEluamVjdGlvblRva2VuKCdBcHBsaWNhdGlvbiBQYWNrYWdlcyBSb290IFVSTCcpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNsYXNzIENvbnNvbGUge1xuICAgIGxvZyhtZXNzYWdlKSB7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgIH1cbiAgICAvLyBOb3RlOiBmb3IgcmVwb3J0aW5nIGVycm9ycyB1c2UgYERPTS5sb2dFcnJvcigpYCBhcyBpdCBpcyBwbGF0Zm9ybSBzcGVjaWZpY1xuICAgIHdhcm4obWVzc2FnZSkge1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gICAgfVxufVxuQ29uc29sZS7JtWZhYyA9IGZ1bmN0aW9uIENvbnNvbGVfRmFjdG9yeSh0KSB7IHJldHVybiBuZXcgKHQgfHwgQ29uc29sZSkoKTsgfTtcbkNvbnNvbGUuybVwcm92ID0gLypAX19QVVJFX18qLyDJtcm1ZGVmaW5lSW5qZWN0YWJsZSh7IHRva2VuOiBDb25zb2xlLCBmYWN0b3J5OiBDb25zb2xlLsm1ZmFjIH0pO1xuKGZ1bmN0aW9uICgpIHsgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBzZXRDbGFzc01ldGFkYXRhKENvbnNvbGUsIFt7XG4gICAgICAgIHR5cGU6IEluamVjdGFibGVcbiAgICB9XSwgbnVsbCwgbnVsbCk7IH0pKCk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBXb3JrIG91dCB0aGUgbG9jYWxlIGZyb20gdGhlIHBvdGVudGlhbCBnbG9iYWwgcHJvcGVydGllcy5cbiAqXG4gKiAqIENsb3N1cmUgQ29tcGlsZXI6IHVzZSBgZ29vZy5nZXRMb2NhbGUoKWAuXG4gKiAqIEl2eSBlbmFibGVkOiB1c2UgYCRsb2NhbGl6ZS5sb2NhbGVgXG4gKi9cbmZ1bmN0aW9uIGdldEdsb2JhbExvY2FsZSgpIHtcbiAgICBpZiAodHlwZW9mIG5nSTE4bkNsb3N1cmVNb2RlICE9PSAndW5kZWZpbmVkJyAmJiBuZ0kxOG5DbG9zdXJlTW9kZSAmJlxuICAgICAgICB0eXBlb2YgZ29vZyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ29vZy5nZXRMb2NhbGUoKSAhPT0gJ2VuJykge1xuICAgICAgICAvLyAqIFRoZSBkZWZhdWx0IGBnb29nLmdldExvY2FsZSgpYCB2YWx1ZSBpcyBgZW5gLCB3aGlsZSBBbmd1bGFyIHVzZWQgYGVuLVVTYC5cbiAgICAgICAgLy8gKiBJbiBvcmRlciB0byBwcmVzZXJ2ZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgd2UgdXNlIEFuZ3VsYXIgZGVmYXVsdCB2YWx1ZSBvdmVyXG4gICAgICAgIC8vICAgQ2xvc3VyZSBDb21waWxlcidzIG9uZS5cbiAgICAgICAgcmV0dXJuIGdvb2cuZ2V0TG9jYWxlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBLRUVQIGB0eXBlb2YgJGxvY2FsaXplICE9PSAndW5kZWZpbmVkJyAmJiAkbG9jYWxpemUubG9jYWxlYCBJTiBTWU5DIFdJVEggVEhFIExPQ0FMSVpFXG4gICAgICAgIC8vIENPTVBJTEUtVElNRSBJTkxJTkVSLlxuICAgICAgICAvL1xuICAgICAgICAvLyAqIER1cmluZyBjb21waWxlIHRpbWUgaW5saW5pbmcgb2YgdHJhbnNsYXRpb25zIHRoZSBleHByZXNzaW9uIHdpbGwgYmUgcmVwbGFjZWRcbiAgICAgICAgLy8gICB3aXRoIGEgc3RyaW5nIGxpdGVyYWwgdGhhdCBpcyB0aGUgY3VycmVudCBsb2NhbGUuIE90aGVyIGZvcm1zIG9mIHRoaXMgZXhwcmVzc2lvbiBhcmUgbm90XG4gICAgICAgIC8vICAgZ3VhcmFudGVlZCB0byBiZSByZXBsYWNlZC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gKiBEdXJpbmcgcnVudGltZSB0cmFuc2xhdGlvbiBldmFsdWF0aW9uLCB0aGUgZGV2ZWxvcGVyIGlzIHJlcXVpcmVkIHRvIHNldCBgJGxvY2FsaXplLmxvY2FsZWBcbiAgICAgICAgLy8gICBpZiByZXF1aXJlZCwgb3IganVzdCB0byBwcm92aWRlIHRoZWlyIG93biBgTE9DQUxFX0lEYCBwcm92aWRlci5cbiAgICAgICAgcmV0dXJuICh0eXBlb2YgJGxvY2FsaXplICE9PSAndW5kZWZpbmVkJyAmJiAkbG9jYWxpemUubG9jYWxlKSB8fCBERUZBVUxUX0xPQ0FMRV9JRDtcbiAgICB9XG59XG4vKipcbiAqIFByb3ZpZGUgdGhpcyB0b2tlbiB0byBzZXQgdGhlIGxvY2FsZSBvZiB5b3VyIGFwcGxpY2F0aW9uLlxuICogSXQgaXMgdXNlZCBmb3IgaTE4biBleHRyYWN0aW9uLCBieSBpMThuIHBpcGVzIChEYXRlUGlwZSwgSTE4blBsdXJhbFBpcGUsIEN1cnJlbmN5UGlwZSxcbiAqIERlY2ltYWxQaXBlIGFuZCBQZXJjZW50UGlwZSkgYW5kIGJ5IElDVSBleHByZXNzaW9ucy5cbiAqXG4gKiBTZWUgdGhlIFtpMThuIGd1aWRlXShndWlkZS9pMThuLWNvbW1vbi1sb2NhbGUtaWQpIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKiAjIyMgRXhhbXBsZVxuICpcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IExPQ0FMRV9JRCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICogaW1wb3J0IHsgcGxhdGZvcm1Ccm93c2VyRHluYW1pYyB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXItZHluYW1pYyc7XG4gKiBpbXBvcnQgeyBBcHBNb2R1bGUgfSBmcm9tICcuL2FwcC9hcHAubW9kdWxlJztcbiAqXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSwge1xuICogICBwcm92aWRlcnM6IFt7cHJvdmlkZTogTE9DQUxFX0lELCB1c2VWYWx1ZTogJ2VuLVVTJyB9XVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNvbnN0IExPQ0FMRV9JRCA9IG5ldyBJbmplY3Rpb25Ub2tlbignTG9jYWxlSWQnLCB7XG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxuICAgIGZhY3Rvcnk6ICgpID0+IGluamVjdChMT0NBTEVfSUQsIEluamVjdEZsYWdzLk9wdGlvbmFsIHwgSW5qZWN0RmxhZ3MuU2tpcFNlbGYpIHx8IGdldEdsb2JhbExvY2FsZSgpLFxufSk7XG4vKipcbiAqIFByb3ZpZGUgdGhpcyB0b2tlbiB0byBzZXQgdGhlIGRlZmF1bHQgY3VycmVuY3kgY29kZSB5b3VyIGFwcGxpY2F0aW9uIHVzZXMgZm9yXG4gKiBDdXJyZW5jeVBpcGUgd2hlbiB0aGVyZSBpcyBubyBjdXJyZW5jeSBjb2RlIHBhc3NlZCBpbnRvIGl0LiBUaGlzIGlzIG9ubHkgdXNlZCBieVxuICogQ3VycmVuY3lQaXBlIGFuZCBoYXMgbm8gcmVsYXRpb24gdG8gbG9jYWxlIGN1cnJlbmN5LiBEZWZhdWx0cyB0byBVU0QgaWYgbm90IGNvbmZpZ3VyZWQuXG4gKlxuICogU2VlIHRoZSBbaTE4biBndWlkZV0oZ3VpZGUvaTE4bi1jb21tb24tbG9jYWxlLWlkKSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiA8ZGl2IGNsYXNzPVwiYWxlcnQgaXMtaGVscGZ1bFwiPlxuICpcbiAqICoqRGVwcmVjYXRpb24gbm90aWNlOioqXG4gKlxuICogVGhlIGRlZmF1bHQgY3VycmVuY3kgY29kZSBpcyBjdXJyZW50bHkgYWx3YXlzIGBVU0RgIGJ1dCB0aGlzIGlzIGRlcHJlY2F0ZWQgZnJvbSB2OS5cbiAqXG4gKiAqKkluIHYxMCB0aGUgZGVmYXVsdCBjdXJyZW5jeSBjb2RlIHdpbGwgYmUgdGFrZW4gZnJvbSB0aGUgY3VycmVudCBsb2NhbGUuKipcbiAqXG4gKiBJZiB5b3UgbmVlZCB0aGUgcHJldmlvdXMgYmVoYXZpb3IgdGhlbiBzZXQgaXQgYnkgY3JlYXRpbmcgYSBgREVGQVVMVF9DVVJSRU5DWV9DT0RFYCBwcm92aWRlciBpblxuICogeW91ciBhcHBsaWNhdGlvbiBgTmdNb2R1bGVgOlxuICpcbiAqIGBgYHRzXG4gKiB7cHJvdmlkZTogREVGQVVMVF9DVVJSRU5DWV9DT0RFLCB1c2VWYWx1ZTogJ1VTRCd9XG4gKiBgYGBcbiAqXG4gKiA8L2Rpdj5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci1keW5hbWljJztcbiAqIGltcG9ydCB7IEFwcE1vZHVsZSB9IGZyb20gJy4vYXBwL2FwcC5tb2R1bGUnO1xuICpcbiAqIHBsYXRmb3JtQnJvd3NlckR5bmFtaWMoKS5ib290c3RyYXBNb2R1bGUoQXBwTW9kdWxlLCB7XG4gKiAgIHByb3ZpZGVyczogW3twcm92aWRlOiBERUZBVUxUX0NVUlJFTkNZX0NPREUsIHVzZVZhbHVlOiAnRVVSJyB9XVxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNvbnN0IERFRkFVTFRfQ1VSUkVOQ1lfQ09ERSA9IG5ldyBJbmplY3Rpb25Ub2tlbignRGVmYXVsdEN1cnJlbmN5Q29kZScsIHtcbiAgICBwcm92aWRlZEluOiAncm9vdCcsXG4gICAgZmFjdG9yeTogKCkgPT4gVVNEX0NVUlJFTkNZX0NPREUsXG59KTtcbi8qKlxuICogVXNlIHRoaXMgdG9rZW4gYXQgYm9vdHN0cmFwIHRvIHByb3ZpZGUgdGhlIGNvbnRlbnQgb2YgeW91ciB0cmFuc2xhdGlvbiBmaWxlIChgeHRiYCxcbiAqIGB4bGZgIG9yIGB4bGYyYCkgd2hlbiB5b3Ugd2FudCB0byB0cmFuc2xhdGUgeW91ciBhcHBsaWNhdGlvbiBpbiBhbm90aGVyIGxhbmd1YWdlLlxuICpcbiAqIFNlZSB0aGUgW2kxOG4gZ3VpZGVdKGd1aWRlL2kxOG4tY29tbW9uLW1lcmdlKSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICogIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBUUkFOU0xBVElPTlMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbiAqIGltcG9ydCB7IHBsYXRmb3JtQnJvd3NlckR5bmFtaWMgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyLWR5bmFtaWMnO1xuICogaW1wb3J0IHsgQXBwTW9kdWxlIH0gZnJvbSAnLi9hcHAvYXBwLm1vZHVsZSc7XG4gKlxuICogLy8gY29udGVudCBvZiB5b3VyIHRyYW5zbGF0aW9uIGZpbGVcbiAqIGNvbnN0IHRyYW5zbGF0aW9ucyA9ICcuLi4uJztcbiAqXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSwge1xuICogICBwcm92aWRlcnM6IFt7cHJvdmlkZTogVFJBTlNMQVRJT05TLCB1c2VWYWx1ZTogdHJhbnNsYXRpb25zIH1dXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgVFJBTlNMQVRJT05TID0gbmV3IEluamVjdGlvblRva2VuKCdUcmFuc2xhdGlvbnMnKTtcbi8qKlxuICogUHJvdmlkZSB0aGlzIHRva2VuIGF0IGJvb3RzdHJhcCB0byBzZXQgdGhlIGZvcm1hdCBvZiB5b3VyIHtAbGluayBUUkFOU0xBVElPTlN9OiBgeHRiYCxcbiAqIGB4bGZgIG9yIGB4bGYyYC5cbiAqXG4gKiBTZWUgdGhlIFtpMThuIGd1aWRlXShndWlkZS9pMThuLWNvbW1vbi1tZXJnZSkgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqICMjIyBFeGFtcGxlXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgVFJBTlNMQVRJT05TX0ZPUk1BVCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICogaW1wb3J0IHsgcGxhdGZvcm1Ccm93c2VyRHluYW1pYyB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXItZHluYW1pYyc7XG4gKiBpbXBvcnQgeyBBcHBNb2R1bGUgfSBmcm9tICcuL2FwcC9hcHAubW9kdWxlJztcbiAqXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSwge1xuICogICBwcm92aWRlcnM6IFt7cHJvdmlkZTogVFJBTlNMQVRJT05TX0ZPUk1BVCwgdXNlVmFsdWU6ICd4bGYnIH1dXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgVFJBTlNMQVRJT05TX0ZPUk1BVCA9IG5ldyBJbmplY3Rpb25Ub2tlbignVHJhbnNsYXRpb25zRm9ybWF0Jyk7XG4vKipcbiAqIFVzZSB0aGlzIGVudW0gYXQgYm9vdHN0cmFwIGFzIGFuIG9wdGlvbiBvZiBgYm9vdHN0cmFwTW9kdWxlYCB0byBkZWZpbmUgdGhlIHN0cmF0ZWd5XG4gKiB0aGF0IHRoZSBjb21waWxlciBzaG91bGQgdXNlIGluIGNhc2Ugb2YgbWlzc2luZyB0cmFuc2xhdGlvbnM6XG4gKiAtIEVycm9yOiB0aHJvdyBpZiB5b3UgaGF2ZSBtaXNzaW5nIHRyYW5zbGF0aW9ucy5cbiAqIC0gV2FybmluZyAoZGVmYXVsdCk6IHNob3cgYSB3YXJuaW5nIGluIHRoZSBjb25zb2xlIGFuZC9vciBzaGVsbC5cbiAqIC0gSWdub3JlOiBkbyBub3RoaW5nLlxuICpcbiAqIFNlZSB0aGUgW2kxOG4gZ3VpZGVdKGd1aWRlL2kxOG4tY29tbW9uLW1lcmdlI3JlcG9ydC1taXNzaW5nLXRyYW5zbGF0aW9ucykgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqICMjIyBFeGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBNaXNzaW5nVHJhbnNsYXRpb25TdHJhdGVneSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuICogaW1wb3J0IHsgcGxhdGZvcm1Ccm93c2VyRHluYW1pYyB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXItZHluYW1pYyc7XG4gKiBpbXBvcnQgeyBBcHBNb2R1bGUgfSBmcm9tICcuL2FwcC9hcHAubW9kdWxlJztcbiAqXG4gKiBwbGF0Zm9ybUJyb3dzZXJEeW5hbWljKCkuYm9vdHN0cmFwTW9kdWxlKEFwcE1vZHVsZSwge1xuICogICBtaXNzaW5nVHJhbnNsYXRpb246IE1pc3NpbmdUcmFuc2xhdGlvblN0cmF0ZWd5LkVycm9yXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xudmFyIE1pc3NpbmdUcmFuc2xhdGlvblN0cmF0ZWd5O1xuKGZ1bmN0aW9uIChNaXNzaW5nVHJhbnNsYXRpb25TdHJhdGVneSkge1xuICAgIE1pc3NpbmdUcmFuc2xhdGlvblN0cmF0ZWd5W01pc3NpbmdUcmFuc2xhdGlvblN0cmF0ZWd5W1wiRXJyb3JcIl0gPSAwXSA9IFwiRXJyb3JcIjtcbiAgICBNaXNzaW5nVHJhbnNsYXRpb25TdHJhdGVneVtNaXNzaW5nVHJhbnNsYXRpb25TdHJhdGVneVtcIldhcm5pbmdcIl0gPSAxXSA9IFwiV2FybmluZ1wiO1xuICAgIE1pc3NpbmdUcmFuc2xhdGlvblN0cmF0ZWd5W01pc3NpbmdUcmFuc2xhdGlvblN0cmF0ZWd5W1wiSWdub3JlXCJdID0gMl0gPSBcIklnbm9yZVwiO1xufSkoTWlzc2luZ1RyYW5zbGF0aW9uU3RyYXRlZ3kgfHwgKE1pc3NpbmdUcmFuc2xhdGlvblN0cmF0ZWd5ID0ge30pKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIENvbWJpbmF0aW9uIG9mIE5nTW9kdWxlRmFjdG9yeSBhbmQgQ29tcG9uZW50RmFjdG9yaWVzLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqXG4gKiBAZGVwcmVjYXRlZFxuICogSXZ5IEpJVCBtb2RlIGRvZXNuJ3QgcmVxdWlyZSBhY2Nlc3NpbmcgdGhpcyBzeW1ib2wuXG4gKiBTZWUgW0pJVCBBUEkgY2hhbmdlcyBkdWUgdG8gVmlld0VuZ2luZSBkZXByZWNhdGlvbl0oZ3VpZGUvZGVwcmVjYXRpb25zI2ppdC1hcGktY2hhbmdlcykgZm9yXG4gKiBhZGRpdGlvbmFsIGNvbnRleHQuXG4gKi9cbmNsYXNzIE1vZHVsZVdpdGhDb21wb25lbnRGYWN0b3JpZXMge1xuICAgIGNvbnN0cnVjdG9yKG5nTW9kdWxlRmFjdG9yeSwgY29tcG9uZW50RmFjdG9yaWVzKSB7XG4gICAgICAgIHRoaXMubmdNb2R1bGVGYWN0b3J5ID0gbmdNb2R1bGVGYWN0b3J5O1xuICAgICAgICB0aGlzLmNvbXBvbmVudEZhY3RvcmllcyA9IGNvbXBvbmVudEZhY3RvcmllcztcbiAgICB9XG59XG4vKipcbiAqIExvdy1sZXZlbCBzZXJ2aWNlIGZvciBydW5uaW5nIHRoZSBhbmd1bGFyIGNvbXBpbGVyIGR1cmluZyBydW50aW1lXG4gKiB0byBjcmVhdGUge0BsaW5rIENvbXBvbmVudEZhY3Rvcnl9cywgd2hpY2hcbiAqIGNhbiBsYXRlciBiZSB1c2VkIHRvIGNyZWF0ZSBhbmQgcmVuZGVyIGEgQ29tcG9uZW50IGluc3RhbmNlLlxuICpcbiAqIEVhY2ggYEBOZ01vZHVsZWAgcHJvdmlkZXMgYW4gb3duIGBDb21waWxlcmAgdG8gaXRzIGluamVjdG9yLFxuICogdGhhdCB3aWxsIHVzZSB0aGUgZGlyZWN0aXZlcy9waXBlcyBvZiB0aGUgbmcgbW9kdWxlIGZvciBjb21waWxhdGlvblxuICogb2YgY29tcG9uZW50cy5cbiAqXG4gKiBAcHVibGljQXBpXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqIEl2eSBKSVQgbW9kZSBkb2Vzbid0IHJlcXVpcmUgYWNjZXNzaW5nIHRoaXMgc3ltYm9sLlxuICogU2VlIFtKSVQgQVBJIGNoYW5nZXMgZHVlIHRvIFZpZXdFbmdpbmUgZGVwcmVjYXRpb25dKGd1aWRlL2RlcHJlY2F0aW9ucyNqaXQtYXBpLWNoYW5nZXMpIGZvclxuICogYWRkaXRpb25hbCBjb250ZXh0LlxuICovXG5jbGFzcyBDb21waWxlciB7XG4gICAgLyoqXG4gICAgICogQ29tcGlsZXMgdGhlIGdpdmVuIE5nTW9kdWxlIGFuZCBhbGwgb2YgaXRzIGNvbXBvbmVudHMuIEFsbCB0ZW1wbGF0ZXMgb2YgdGhlIGNvbXBvbmVudHMgbGlzdGVkXG4gICAgICogaW4gYGVudHJ5Q29tcG9uZW50c2AgaGF2ZSB0byBiZSBpbmxpbmVkLlxuICAgICAqL1xuICAgIGNvbXBpbGVNb2R1bGVTeW5jKG1vZHVsZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOZ01vZHVsZUZhY3RvcnkobW9kdWxlVHlwZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXBpbGVzIHRoZSBnaXZlbiBOZ01vZHVsZSBhbmQgYWxsIG9mIGl0cyBjb21wb25lbnRzXG4gICAgICovXG4gICAgY29tcGlsZU1vZHVsZUFzeW5jKG1vZHVsZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmNvbXBpbGVNb2R1bGVTeW5jKG1vZHVsZVR5cGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2FtZSBhcyB7QGxpbmsgI2NvbXBpbGVNb2R1bGVTeW5jfSBidXQgYWxzbyBjcmVhdGVzIENvbXBvbmVudEZhY3RvcmllcyBmb3IgYWxsIGNvbXBvbmVudHMuXG4gICAgICovXG4gICAgY29tcGlsZU1vZHVsZUFuZEFsbENvbXBvbmVudHNTeW5jKG1vZHVsZVR5cGUpIHtcbiAgICAgICAgY29uc3QgbmdNb2R1bGVGYWN0b3J5ID0gdGhpcy5jb21waWxlTW9kdWxlU3luYyhtb2R1bGVUeXBlKTtcbiAgICAgICAgY29uc3QgbW9kdWxlRGVmID0gZ2V0TmdNb2R1bGVEZWYobW9kdWxlVHlwZSk7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEZhY3RvcmllcyA9IG1heWJlVW53cmFwRm4obW9kdWxlRGVmLmRlY2xhcmF0aW9ucylcbiAgICAgICAgICAgIC5yZWR1Y2UoKGZhY3RvcmllcywgZGVjbGFyYXRpb24pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudERlZiA9IGdldENvbXBvbmVudERlZihkZWNsYXJhdGlvbik7XG4gICAgICAgICAgICBjb21wb25lbnREZWYgJiYgZmFjdG9yaWVzLnB1c2gobmV3IENvbXBvbmVudEZhY3RvcnkoY29tcG9uZW50RGVmKSk7XG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yaWVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiBuZXcgTW9kdWxlV2l0aENvbXBvbmVudEZhY3RvcmllcyhuZ01vZHVsZUZhY3RvcnksIGNvbXBvbmVudEZhY3Rvcmllcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNhbWUgYXMge0BsaW5rICNjb21waWxlTW9kdWxlQXN5bmN9IGJ1dCBhbHNvIGNyZWF0ZXMgQ29tcG9uZW50RmFjdG9yaWVzIGZvciBhbGwgY29tcG9uZW50cy5cbiAgICAgKi9cbiAgICBjb21waWxlTW9kdWxlQW5kQWxsQ29tcG9uZW50c0FzeW5jKG1vZHVsZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLmNvbXBpbGVNb2R1bGVBbmRBbGxDb21wb25lbnRzU3luYyhtb2R1bGVUeXBlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgY2FjaGVzLlxuICAgICAqL1xuICAgIGNsZWFyQ2FjaGUoKSB7IH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhY2hlIGZvciB0aGUgZ2l2ZW4gY29tcG9uZW50L25nTW9kdWxlLlxuICAgICAqL1xuICAgIGNsZWFyQ2FjaGVGb3IodHlwZSkgeyB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaWQgZm9yIGEgZ2l2ZW4gTmdNb2R1bGUsIGlmIG9uZSBpcyBkZWZpbmVkIGFuZCBrbm93biB0byB0aGUgY29tcGlsZXIuXG4gICAgICovXG4gICAgZ2V0TW9kdWxlSWQobW9kdWxlVHlwZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbkNvbXBpbGVyLsm1ZmFjID0gZnVuY3Rpb24gQ29tcGlsZXJfRmFjdG9yeSh0KSB7IHJldHVybiBuZXcgKHQgfHwgQ29tcGlsZXIpKCk7IH07XG5Db21waWxlci7JtXByb3YgPSAvKkBfX1BVUkVfXyovIMm1ybVkZWZpbmVJbmplY3RhYmxlKHsgdG9rZW46IENvbXBpbGVyLCBmYWN0b3J5OiBDb21waWxlci7JtWZhYywgcHJvdmlkZWRJbjogJ3Jvb3QnIH0pO1xuKGZ1bmN0aW9uICgpIHsgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBzZXRDbGFzc01ldGFkYXRhKENvbXBpbGVyLCBbe1xuICAgICAgICB0eXBlOiBJbmplY3RhYmxlLFxuICAgICAgICBhcmdzOiBbeyBwcm92aWRlZEluOiAncm9vdCcgfV1cbiAgICB9XSwgbnVsbCwgbnVsbCk7IH0pKCk7XG4vKipcbiAqIFRva2VuIHRvIHByb3ZpZGUgQ29tcGlsZXJPcHRpb25zIGluIHRoZSBwbGF0Zm9ybSBpbmplY3Rvci5cbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNvbnN0IENPTVBJTEVSX09QVElPTlMgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ2NvbXBpbGVyT3B0aW9ucycpO1xuLyoqXG4gKiBBIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgQ29tcGlsZXJcbiAqXG4gKiBAcHVibGljQXBpXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqIEl2eSBKSVQgbW9kZSBkb2Vzbid0IHJlcXVpcmUgYWNjZXNzaW5nIHRoaXMgc3ltYm9sLlxuICogU2VlIFtKSVQgQVBJIGNoYW5nZXMgZHVlIHRvIFZpZXdFbmdpbmUgZGVwcmVjYXRpb25dKGd1aWRlL2RlcHJlY2F0aW9ucyNqaXQtYXBpLWNoYW5nZXMpIGZvclxuICogYWRkaXRpb25hbCBjb250ZXh0LlxuICovXG5jbGFzcyBDb21waWxlckZhY3Rvcnkge1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IHByb21pc2UgPSAoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKDApKSgpO1xuZnVuY3Rpb24gc2NoZWR1bGVNaWNyb1Rhc2soZm4pIHtcbiAgICBpZiAodHlwZW9mIFpvbmUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIHVzZSBwcm9taXNlIHRvIHNjaGVkdWxlIG1pY3JvVGFzayBpbnN0ZWFkIG9mIHVzZSBab25lXG4gICAgICAgIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBmbiAmJiBmbi5hcHBseShudWxsLCBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBab25lLmN1cnJlbnQuc2NoZWR1bGVNaWNyb1Rhc2soJ3NjaGVkdWxlTWljcm90YXNrJywgZm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5mdW5jdGlvbiBnZXROYXRpdmVSZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKSB7XG4gICAgbGV0IG5hdGl2ZVJlcXVlc3RBbmltYXRpb25GcmFtZSA9IF9nbG9iYWxbJ3JlcXVlc3RBbmltYXRpb25GcmFtZSddO1xuICAgIGxldCBuYXRpdmVDYW5jZWxBbmltYXRpb25GcmFtZSA9IF9nbG9iYWxbJ2NhbmNlbEFuaW1hdGlvbkZyYW1lJ107XG4gICAgaWYgKHR5cGVvZiBab25lICE9PSAndW5kZWZpbmVkJyAmJiBuYXRpdmVSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgJiYgbmF0aXZlQ2FuY2VsQW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgICAgLy8gdXNlIHVucGF0Y2hlZCB2ZXJzaW9uIG9mIHJlcXVlc3RBbmltYXRpb25GcmFtZShuYXRpdmUgZGVsZWdhdGUpIGlmIHBvc3NpYmxlXG4gICAgICAgIC8vIHRvIGF2b2lkIGFub3RoZXIgQ2hhbmdlIGRldGVjdGlvblxuICAgICAgICBjb25zdCB1bnBhdGNoZWRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBuYXRpdmVSZXF1ZXN0QW5pbWF0aW9uRnJhbWVbWm9uZS5fX3N5bWJvbF9fKCdPcmlnaW5hbERlbGVnYXRlJyldO1xuICAgICAgICBpZiAodW5wYXRjaGVkUmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgICAgICAgICBuYXRpdmVSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB1bnBhdGNoZWRSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdW5wYXRjaGVkQ2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBuYXRpdmVDYW5jZWxBbmltYXRpb25GcmFtZVtab25lLl9fc3ltYm9sX18oJ09yaWdpbmFsRGVsZWdhdGUnKV07XG4gICAgICAgIGlmICh1bnBhdGNoZWRDYW5jZWxBbmltYXRpb25GcmFtZSkge1xuICAgICAgICAgICAgbmF0aXZlQ2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB1bnBhdGNoZWRDYW5jZWxBbmltYXRpb25GcmFtZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBuYXRpdmVSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsIG5hdGl2ZUNhbmNlbEFuaW1hdGlvbkZyYW1lIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBBbiBpbmplY3RhYmxlIHNlcnZpY2UgZm9yIGV4ZWN1dGluZyB3b3JrIGluc2lkZSBvciBvdXRzaWRlIG9mIHRoZSBBbmd1bGFyIHpvbmUuXG4gKlxuICogVGhlIG1vc3QgY29tbW9uIHVzZSBvZiB0aGlzIHNlcnZpY2UgaXMgdG8gb3B0aW1pemUgcGVyZm9ybWFuY2Ugd2hlbiBzdGFydGluZyBhIHdvcmsgY29uc2lzdGluZyBvZlxuICogb25lIG9yIG1vcmUgYXN5bmNocm9ub3VzIHRhc2tzIHRoYXQgZG9uJ3QgcmVxdWlyZSBVSSB1cGRhdGVzIG9yIGVycm9yIGhhbmRsaW5nIHRvIGJlIGhhbmRsZWQgYnlcbiAqIEFuZ3VsYXIuIFN1Y2ggdGFza3MgY2FuIGJlIGtpY2tlZCBvZmYgdmlhIHtAbGluayAjcnVuT3V0c2lkZUFuZ3VsYXJ9IGFuZCBpZiBuZWVkZWQsIHRoZXNlIHRhc2tzXG4gKiBjYW4gcmVlbnRlciB0aGUgQW5ndWxhciB6b25lIHZpYSB7QGxpbmsgI3J1bn0uXG4gKlxuICogPCEtLSBUT0RPOiBhZGQvZml4IGxpbmtzIHRvOlxuICogICAtIGRvY3MgZXhwbGFpbmluZyB6b25lcyBhbmQgdGhlIHVzZSBvZiB6b25lcyBpbiBBbmd1bGFyIGFuZCBjaGFuZ2UtZGV0ZWN0aW9uXG4gKiAgIC0gbGluayB0byBydW5PdXRzaWRlQW5ndWxhci9ydW4gKHRocm91Z2hvdXQgdGhpcyBmaWxlISlcbiAqICAgLS0+XG4gKlxuICogQHVzYWdlTm90ZXNcbiAqICMjIyBFeGFtcGxlXG4gKlxuICogYGBgXG4gKiBpbXBvcnQge0NvbXBvbmVudCwgTmdab25lfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbiAqIGltcG9ydCB7TmdJZn0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbiAqXG4gKiBAQ29tcG9uZW50KHtcbiAqICAgc2VsZWN0b3I6ICduZy16b25lLWRlbW8nLFxuICogICB0ZW1wbGF0ZTogYFxuICogICAgIDxoMj5EZW1vOiBOZ1pvbmU8L2gyPlxuICpcbiAqICAgICA8cD5Qcm9ncmVzczoge3twcm9ncmVzc319JTwvcD5cbiAqICAgICA8cCAqbmdJZj1cInByb2dyZXNzID49IDEwMFwiPkRvbmUgcHJvY2Vzc2luZyB7e2xhYmVsfX0gb2YgQW5ndWxhciB6b25lITwvcD5cbiAqXG4gKiAgICAgPGJ1dHRvbiAoY2xpY2spPVwicHJvY2Vzc1dpdGhpbkFuZ3VsYXJab25lKClcIj5Qcm9jZXNzIHdpdGhpbiBBbmd1bGFyIHpvbmU8L2J1dHRvbj5cbiAqICAgICA8YnV0dG9uIChjbGljayk9XCJwcm9jZXNzT3V0c2lkZU9mQW5ndWxhclpvbmUoKVwiPlByb2Nlc3Mgb3V0c2lkZSBvZiBBbmd1bGFyIHpvbmU8L2J1dHRvbj5cbiAqICAgYCxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgTmdab25lRGVtbyB7XG4gKiAgIHByb2dyZXNzOiBudW1iZXIgPSAwO1xuICogICBsYWJlbDogc3RyaW5nO1xuICpcbiAqICAgY29uc3RydWN0b3IocHJpdmF0ZSBfbmdab25lOiBOZ1pvbmUpIHt9XG4gKlxuICogICAvLyBMb29wIGluc2lkZSB0aGUgQW5ndWxhciB6b25lXG4gKiAgIC8vIHNvIHRoZSBVSSBET0VTIHJlZnJlc2ggYWZ0ZXIgZWFjaCBzZXRUaW1lb3V0IGN5Y2xlXG4gKiAgIHByb2Nlc3NXaXRoaW5Bbmd1bGFyWm9uZSgpIHtcbiAqICAgICB0aGlzLmxhYmVsID0gJ2luc2lkZSc7XG4gKiAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG4gKiAgICAgdGhpcy5faW5jcmVhc2VQcm9ncmVzcygoKSA9PiBjb25zb2xlLmxvZygnSW5zaWRlIERvbmUhJykpO1xuICogICB9XG4gKlxuICogICAvLyBMb29wIG91dHNpZGUgb2YgdGhlIEFuZ3VsYXIgem9uZVxuICogICAvLyBzbyB0aGUgVUkgRE9FUyBOT1QgcmVmcmVzaCBhZnRlciBlYWNoIHNldFRpbWVvdXQgY3ljbGVcbiAqICAgcHJvY2Vzc091dHNpZGVPZkFuZ3VsYXJab25lKCkge1xuICogICAgIHRoaXMubGFiZWwgPSAnb3V0c2lkZSc7XG4gKiAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG4gKiAgICAgdGhpcy5fbmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAqICAgICAgIHRoaXMuX2luY3JlYXNlUHJvZ3Jlc3MoKCkgPT4ge1xuICogICAgICAgICAvLyByZWVudGVyIHRoZSBBbmd1bGFyIHpvbmUgYW5kIGRpc3BsYXkgZG9uZVxuICogICAgICAgICB0aGlzLl9uZ1pvbmUucnVuKCgpID0+IHsgY29uc29sZS5sb2coJ091dHNpZGUgRG9uZSEnKTsgfSk7XG4gKiAgICAgICB9KTtcbiAqICAgICB9KTtcbiAqICAgfVxuICpcbiAqICAgX2luY3JlYXNlUHJvZ3Jlc3MoZG9uZUNhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG4gKiAgICAgdGhpcy5wcm9ncmVzcyArPSAxO1xuICogICAgIGNvbnNvbGUubG9nKGBDdXJyZW50IHByb2dyZXNzOiAke3RoaXMucHJvZ3Jlc3N9JWApO1xuICpcbiAqICAgICBpZiAodGhpcy5wcm9ncmVzcyA8IDEwMCkge1xuICogICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5faW5jcmVhc2VQcm9ncmVzcyhkb25lQ2FsbGJhY2spLCAxMCk7XG4gKiAgICAgfSBlbHNlIHtcbiAqICAgICAgIGRvbmVDYWxsYmFjaygpO1xuICogICAgIH1cbiAqICAgfVxuICogfVxuICogYGBgXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBOZ1pvbmUge1xuICAgIGNvbnN0cnVjdG9yKHsgZW5hYmxlTG9uZ1N0YWNrVHJhY2UgPSBmYWxzZSwgc2hvdWxkQ29hbGVzY2VFdmVudENoYW5nZURldGVjdGlvbiA9IGZhbHNlLCBzaG91bGRDb2FsZXNjZVJ1bkNoYW5nZURldGVjdGlvbiA9IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nTWFjcm90YXNrcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdNaWNyb3Rhc2tzID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZXJlIGFyZSBubyBvdXRzdGFuZGluZyBtaWNyb3Rhc2tzIG9yIG1hY3JvdGFza3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzU3RhYmxlID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vdGlmaWVzIHdoZW4gY29kZSBlbnRlcnMgQW5ndWxhciBab25lLiBUaGlzIGdldHMgZmlyZWQgZmlyc3Qgb24gVk0gVHVybi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25VbnN0YWJsZSA9IG5ldyBFdmVudEVtaXR0ZXIoZmFsc2UpO1xuICAgICAgICAvKipcbiAgICAgICAgICogTm90aWZpZXMgd2hlbiB0aGVyZSBpcyBubyBtb3JlIG1pY3JvdGFza3MgZW5xdWV1ZWQgaW4gdGhlIGN1cnJlbnQgVk0gVHVybi5cbiAgICAgICAgICogVGhpcyBpcyBhIGhpbnQgZm9yIEFuZ3VsYXIgdG8gZG8gY2hhbmdlIGRldGVjdGlvbiwgd2hpY2ggbWF5IGVucXVldWUgbW9yZSBtaWNyb3Rhc2tzLlxuICAgICAgICAgKiBGb3IgdGhpcyByZWFzb24gdGhpcyBldmVudCBjYW4gZmlyZSBtdWx0aXBsZSB0aW1lcyBwZXIgVk0gVHVybi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25NaWNyb3Rhc2tFbXB0eSA9IG5ldyBFdmVudEVtaXR0ZXIoZmFsc2UpO1xuICAgICAgICAvKipcbiAgICAgICAgICogTm90aWZpZXMgd2hlbiB0aGUgbGFzdCBgb25NaWNyb3Rhc2tFbXB0eWAgaGFzIHJ1biBhbmQgdGhlcmUgYXJlIG5vIG1vcmUgbWljcm90YXNrcywgd2hpY2hcbiAgICAgICAgICogaW1wbGllcyB3ZSBhcmUgYWJvdXQgdG8gcmVsaW5xdWlzaCBWTSB0dXJuLlxuICAgICAgICAgKiBUaGlzIGV2ZW50IGdldHMgY2FsbGVkIGp1c3Qgb25jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25TdGFibGUgPSBuZXcgRXZlbnRFbWl0dGVyKGZhbHNlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE5vdGlmaWVzIHRoYXQgYW4gZXJyb3IgaGFzIGJlZW4gZGVsaXZlcmVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbkVycm9yID0gbmV3IEV2ZW50RW1pdHRlcihmYWxzZSk7XG4gICAgICAgIGlmICh0eXBlb2YgWm9uZSA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbiB0aGlzIGNvbmZpZ3VyYXRpb24gQW5ndWxhciByZXF1aXJlcyBab25lLmpzYCk7XG4gICAgICAgIH1cbiAgICAgICAgWm9uZS5hc3NlcnRab25lUGF0Y2hlZCgpO1xuICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5fbmVzdGluZyA9IDA7XG4gICAgICAgIHNlbGYuX291dGVyID0gc2VsZi5faW5uZXIgPSBab25lLmN1cnJlbnQ7XG4gICAgICAgIGlmIChab25lWydUYXNrVHJhY2tpbmdab25lU3BlYyddKSB7XG4gICAgICAgICAgICBzZWxmLl9pbm5lciA9IHNlbGYuX2lubmVyLmZvcmsobmV3IFpvbmVbJ1Rhc2tUcmFja2luZ1pvbmVTcGVjJ10pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmFibGVMb25nU3RhY2tUcmFjZSAmJiBab25lWydsb25nU3RhY2tUcmFjZVpvbmVTcGVjJ10pIHtcbiAgICAgICAgICAgIHNlbGYuX2lubmVyID0gc2VsZi5faW5uZXIuZm9yayhab25lWydsb25nU3RhY2tUcmFjZVpvbmVTcGVjJ10pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHNob3VsZENvYWxlc2NlUnVuQ2hhbmdlRGV0ZWN0aW9uIGlzIHRydWUsIGFsbCB0YXNrcyBpbmNsdWRpbmcgZXZlbnQgdGFza3Mgd2lsbCBiZVxuICAgICAgICAvLyBjb2FsZXNjZWQsIHNvIHNob3VsZENvYWxlc2NlRXZlbnRDaGFuZ2VEZXRlY3Rpb24gb3B0aW9uIGlzIG5vdCBuZWNlc3NhcnkgYW5kIGNhbiBiZSBza2lwcGVkLlxuICAgICAgICBzZWxmLnNob3VsZENvYWxlc2NlRXZlbnRDaGFuZ2VEZXRlY3Rpb24gPVxuICAgICAgICAgICAgIXNob3VsZENvYWxlc2NlUnVuQ2hhbmdlRGV0ZWN0aW9uICYmIHNob3VsZENvYWxlc2NlRXZlbnRDaGFuZ2VEZXRlY3Rpb247XG4gICAgICAgIHNlbGYuc2hvdWxkQ29hbGVzY2VSdW5DaGFuZ2VEZXRlY3Rpb24gPSBzaG91bGRDb2FsZXNjZVJ1bkNoYW5nZURldGVjdGlvbjtcbiAgICAgICAgc2VsZi5sYXN0UmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQgPSAtMTtcbiAgICAgICAgc2VsZi5uYXRpdmVSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBnZXROYXRpdmVSZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKS5uYXRpdmVSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgICAgIGZvcmtJbm5lclpvbmVXaXRoQW5ndWxhckJlaGF2aW9yKHNlbGYpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNJbkFuZ3VsYXJab25lKCkge1xuICAgICAgICAvLyBab25lIG5lZWRzIHRvIGJlIGNoZWNrZWQsIGJlY2F1c2UgdGhpcyBtZXRob2QgbWlnaHQgYmUgY2FsbGVkIGV2ZW4gd2hlbiBOb29wTmdab25lIGlzIHVzZWQuXG4gICAgICAgIHJldHVybiB0eXBlb2YgWm9uZSAhPT0gJ3VuZGVmaW5lZCcgJiYgWm9uZS5jdXJyZW50LmdldCgnaXNBbmd1bGFyWm9uZScpID09PSB0cnVlO1xuICAgIH1cbiAgICBzdGF0aWMgYXNzZXJ0SW5Bbmd1bGFyWm9uZSgpIHtcbiAgICAgICAgaWYgKCFOZ1pvbmUuaXNJbkFuZ3VsYXJab25lKCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdG8gYmUgaW4gQW5ndWxhciBab25lLCBidXQgaXQgaXMgbm90IScpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnROb3RJbkFuZ3VsYXJab25lKCkge1xuICAgICAgICBpZiAoTmdab25lLmlzSW5Bbmd1bGFyWm9uZSgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRvIG5vdCBiZSBpbiBBbmd1bGFyIFpvbmUsIGJ1dCBpdCBpcyEnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgYGZuYCBmdW5jdGlvbiBzeW5jaHJvbm91c2x5IHdpdGhpbiB0aGUgQW5ndWxhciB6b25lIGFuZCByZXR1cm5zIHZhbHVlIHJldHVybmVkIGJ5XG4gICAgICogdGhlIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogUnVubmluZyBmdW5jdGlvbnMgdmlhIGBydW5gIGFsbG93cyB5b3UgdG8gcmVlbnRlciBBbmd1bGFyIHpvbmUgZnJvbSBhIHRhc2sgdGhhdCB3YXMgZXhlY3V0ZWRcbiAgICAgKiBvdXRzaWRlIG9mIHRoZSBBbmd1bGFyIHpvbmUgKHR5cGljYWxseSBzdGFydGVkIHZpYSB7QGxpbmsgI3J1bk91dHNpZGVBbmd1bGFyfSkuXG4gICAgICpcbiAgICAgKiBBbnkgZnV0dXJlIHRhc2tzIG9yIG1pY3JvdGFza3Mgc2NoZWR1bGVkIGZyb20gd2l0aGluIHRoaXMgZnVuY3Rpb24gd2lsbCBjb250aW51ZSBleGVjdXRpbmcgZnJvbVxuICAgICAqIHdpdGhpbiB0aGUgQW5ndWxhciB6b25lLlxuICAgICAqXG4gICAgICogSWYgYSBzeW5jaHJvbm91cyBlcnJvciBoYXBwZW5zIGl0IHdpbGwgYmUgcmV0aHJvd24gYW5kIG5vdCByZXBvcnRlZCB2aWEgYG9uRXJyb3JgLlxuICAgICAqL1xuICAgIHJ1bihmbiwgYXBwbHlUaGlzLCBhcHBseUFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lubmVyLnJ1bihmbiwgYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgYGZuYCBmdW5jdGlvbiBzeW5jaHJvbm91c2x5IHdpdGhpbiB0aGUgQW5ndWxhciB6b25lIGFzIGEgdGFzayBhbmQgcmV0dXJucyB2YWx1ZVxuICAgICAqIHJldHVybmVkIGJ5IHRoZSBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIFJ1bm5pbmcgZnVuY3Rpb25zIHZpYSBgcnVuYCBhbGxvd3MgeW91IHRvIHJlZW50ZXIgQW5ndWxhciB6b25lIGZyb20gYSB0YXNrIHRoYXQgd2FzIGV4ZWN1dGVkXG4gICAgICogb3V0c2lkZSBvZiB0aGUgQW5ndWxhciB6b25lICh0eXBpY2FsbHkgc3RhcnRlZCB2aWEge0BsaW5rICNydW5PdXRzaWRlQW5ndWxhcn0pLlxuICAgICAqXG4gICAgICogQW55IGZ1dHVyZSB0YXNrcyBvciBtaWNyb3Rhc2tzIHNjaGVkdWxlZCBmcm9tIHdpdGhpbiB0aGlzIGZ1bmN0aW9uIHdpbGwgY29udGludWUgZXhlY3V0aW5nIGZyb21cbiAgICAgKiB3aXRoaW4gdGhlIEFuZ3VsYXIgem9uZS5cbiAgICAgKlxuICAgICAqIElmIGEgc3luY2hyb25vdXMgZXJyb3IgaGFwcGVucyBpdCB3aWxsIGJlIHJldGhyb3duIGFuZCBub3QgcmVwb3J0ZWQgdmlhIGBvbkVycm9yYC5cbiAgICAgKi9cbiAgICBydW5UYXNrKGZuLCBhcHBseVRoaXMsIGFwcGx5QXJncywgbmFtZSkge1xuICAgICAgICBjb25zdCB6b25lID0gdGhpcy5faW5uZXI7XG4gICAgICAgIGNvbnN0IHRhc2sgPSB6b25lLnNjaGVkdWxlRXZlbnRUYXNrKCdOZ1pvbmVFdmVudDogJyArIG5hbWUsIGZuLCBFTVBUWV9QQVlMT0FELCBub29wLCBub29wKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB6b25lLnJ1blRhc2sodGFzaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgem9uZS5jYW5jZWxUYXNrKHRhc2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNhbWUgYXMgYHJ1bmAsIGV4Y2VwdCB0aGF0IHN5bmNocm9ub3VzIGVycm9ycyBhcmUgY2F1Z2h0IGFuZCBmb3J3YXJkZWQgdmlhIGBvbkVycm9yYCBhbmQgbm90XG4gICAgICogcmV0aHJvd24uXG4gICAgICovXG4gICAgcnVuR3VhcmRlZChmbiwgYXBwbHlUaGlzLCBhcHBseUFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lubmVyLnJ1bkd1YXJkZWQoZm4sIGFwcGx5VGhpcywgYXBwbHlBcmdzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgdGhlIGBmbmAgZnVuY3Rpb24gc3luY2hyb25vdXNseSBpbiBBbmd1bGFyJ3MgcGFyZW50IHpvbmUgYW5kIHJldHVybnMgdmFsdWUgcmV0dXJuZWQgYnlcbiAgICAgKiB0aGUgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBSdW5uaW5nIGZ1bmN0aW9ucyB2aWEge0BsaW5rICNydW5PdXRzaWRlQW5ndWxhcn0gYWxsb3dzIHlvdSB0byBlc2NhcGUgQW5ndWxhcidzIHpvbmUgYW5kIGRvXG4gICAgICogd29yayB0aGF0XG4gICAgICogZG9lc24ndCB0cmlnZ2VyIEFuZ3VsYXIgY2hhbmdlLWRldGVjdGlvbiBvciBpcyBzdWJqZWN0IHRvIEFuZ3VsYXIncyBlcnJvciBoYW5kbGluZy5cbiAgICAgKlxuICAgICAqIEFueSBmdXR1cmUgdGFza3Mgb3IgbWljcm90YXNrcyBzY2hlZHVsZWQgZnJvbSB3aXRoaW4gdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnRpbnVlIGV4ZWN1dGluZyBmcm9tXG4gICAgICogb3V0c2lkZSBvZiB0aGUgQW5ndWxhciB6b25lLlxuICAgICAqXG4gICAgICogVXNlIHtAbGluayAjcnVufSB0byByZWVudGVyIHRoZSBBbmd1bGFyIHpvbmUgYW5kIGRvIHdvcmsgdGhhdCB1cGRhdGVzIHRoZSBhcHBsaWNhdGlvbiBtb2RlbC5cbiAgICAgKi9cbiAgICBydW5PdXRzaWRlQW5ndWxhcihmbikge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3V0ZXIucnVuKGZuKTtcbiAgICB9XG59XG5jb25zdCBFTVBUWV9QQVlMT0FEID0ge307XG5mdW5jdGlvbiBjaGVja1N0YWJsZSh6b25lKSB7XG4gICAgLy8gVE9ETzogQEppYUxpUGFzc2lvbiwgc2hvdWxkIGNoZWNrIHpvbmUuaXNDaGVja1N0YWJsZVJ1bm5pbmcgdG8gcHJldmVudFxuICAgIC8vIHJlLWVudHJ5LiBUaGUgY2FzZSBpczpcbiAgICAvL1xuICAgIC8vIEBDb21wb25lbnQoey4uLn0pXG4gICAgLy8gZXhwb3J0IGNsYXNzIEFwcENvbXBvbmVudCB7XG4gICAgLy8gY29uc3RydWN0b3IocHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge1xuICAgIC8vICAgdGhpcy5uZ1pvbmUub25TdGFibGUuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAvLyAgICAgdGhpcy5uZ1pvbmUucnVuKCgpID0+IGNvbnNvbGUubG9nKCdzdGFibGUnKTspO1xuICAgIC8vICAgfSk7XG4gICAgLy8gfVxuICAgIC8vXG4gICAgLy8gVGhlIG9uU3RhYmxlIHN1YnNjcmliZXIgcnVuIGFub3RoZXIgZnVuY3Rpb24gaW5zaWRlIG5nWm9uZVxuICAgIC8vIHdoaWNoIGNhdXNlcyBgY2hlY2tTdGFibGUoKWAgcmUtZW50cnkuXG4gICAgLy8gQnV0IHRoaXMgZml4IGNhdXNlcyBzb21lIGlzc3VlcyBpbiBnMywgc28gdGhpcyBmaXggd2lsbCBiZVxuICAgIC8vIGxhdW5jaGVkIGluIGFub3RoZXIgUFIuXG4gICAgaWYgKHpvbmUuX25lc3RpbmcgPT0gMCAmJiAhem9uZS5oYXNQZW5kaW5nTWljcm90YXNrcyAmJiAhem9uZS5pc1N0YWJsZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgem9uZS5fbmVzdGluZysrO1xuICAgICAgICAgICAgem9uZS5vbk1pY3JvdGFza0VtcHR5LmVtaXQobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB6b25lLl9uZXN0aW5nLS07XG4gICAgICAgICAgICBpZiAoIXpvbmUuaGFzUGVuZGluZ01pY3JvdGFza3MpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHpvbmUub25TdGFibGUuZW1pdChudWxsKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB6b25lLmlzU3RhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBkZWxheUNoYW5nZURldGVjdGlvbkZvckV2ZW50cyh6b25lKSB7XG4gICAgLyoqXG4gICAgICogV2UgYWxzbyBuZWVkIHRvIGNoZWNrIF9uZXN0aW5nIGhlcmVcbiAgICAgKiBDb25zaWRlciB0aGUgZm9sbG93aW5nIGNhc2Ugd2l0aCBzaG91bGRDb2FsZXNjZVJ1bkNoYW5nZURldGVjdGlvbiA9IHRydWVcbiAgICAgKlxuICAgICAqIG5nWm9uZS5ydW4oKCkgPT4ge30pO1xuICAgICAqIG5nWm9uZS5ydW4oKCkgPT4ge30pO1xuICAgICAqXG4gICAgICogV2Ugd2FudCB0aGUgdHdvIGBuZ1pvbmUucnVuKClgIG9ubHkgdHJpZ2dlciBvbmUgY2hhbmdlIGRldGVjdGlvblxuICAgICAqIHdoZW4gc2hvdWxkQ29hbGVzY2VSdW5DaGFuZ2VEZXRlY3Rpb24gaXMgdHJ1ZS5cbiAgICAgKiBBbmQgYmVjYXVzZSBpbiB0aGlzIGNhc2UsIGNoYW5nZSBkZXRlY3Rpb24gcnVuIGluIGFzeW5jIHdheShyZXF1ZXN0QW5pbWF0aW9uRnJhbWUpLFxuICAgICAqIHNvIHdlIGFsc28gbmVlZCB0byBjaGVjayB0aGUgX25lc3RpbmcgaGVyZSB0byBwcmV2ZW50IG11bHRpcGxlXG4gICAgICogY2hhbmdlIGRldGVjdGlvbnMuXG4gICAgICovXG4gICAgaWYgKHpvbmUuaXNDaGVja1N0YWJsZVJ1bm5pbmcgfHwgem9uZS5sYXN0UmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQgIT09IC0xKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgem9uZS5sYXN0UmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQgPSB6b25lLm5hdGl2ZVJlcXVlc3RBbmltYXRpb25GcmFtZS5jYWxsKF9nbG9iYWwsICgpID0+IHtcbiAgICAgICAgLy8gVGhpcyBpcyBhIHdvcmsgYXJvdW5kIGZvciBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyL2lzc3Vlcy8zNjgzOS5cbiAgICAgICAgLy8gVGhlIGNvcmUgaXNzdWUgaXMgdGhhdCB3aGVuIGV2ZW50IGNvYWxlc2NpbmcgaXMgZW5hYmxlZCBpdCBpcyBwb3NzaWJsZSBmb3IgbWljcm90YXNrc1xuICAgICAgICAvLyB0byBnZXQgZmx1c2hlZCB0b28gZWFybHkgKEFzIGlzIHRoZSBjYXNlIHdpdGggYFByb21pc2UudGhlbmApIGJldHdlZW4gdGhlXG4gICAgICAgIC8vIGNvYWxlc2NpbmcgZXZlbnRUYXNrcy5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gVG8gd29ya2Fyb3VuZCB0aGlzIHdlIHNjaGVkdWxlIGEgXCJmYWtlXCIgZXZlbnRUYXNrIGJlZm9yZSB3ZSBwcm9jZXNzIHRoZVxuICAgICAgICAvLyBjb2FsZXNjaW5nIGV2ZW50VGFza3MuIFRoZSBiZW5lZml0IG9mIHRoaXMgaXMgdGhhdCB0aGUgXCJmYWtlXCIgY29udGFpbmVyIGV2ZW50VGFza1xuICAgICAgICAvLyAgd2lsbCBwcmV2ZW50IHRoZSBtaWNyb3Rhc2tzIHF1ZXVlIGZyb20gZ2V0dGluZyBkcmFpbmVkIGluIGJldHdlZW4gdGhlIGNvYWxlc2NpbmdcbiAgICAgICAgLy8gZXZlbnRUYXNrIGV4ZWN1dGlvbi5cbiAgICAgICAgaWYgKCF6b25lLmZha2VUb3BFdmVudFRhc2spIHtcbiAgICAgICAgICAgIHpvbmUuZmFrZVRvcEV2ZW50VGFzayA9IFpvbmUucm9vdC5zY2hlZHVsZUV2ZW50VGFzaygnZmFrZVRvcEV2ZW50VGFzaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB6b25lLmxhc3RSZXF1ZXN0QW5pbWF0aW9uRnJhbWVJZCA9IC0xO1xuICAgICAgICAgICAgICAgIHVwZGF0ZU1pY3JvVGFza1N0YXR1cyh6b25lKTtcbiAgICAgICAgICAgICAgICB6b25lLmlzQ2hlY2tTdGFibGVSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjaGVja1N0YWJsZSh6b25lKTtcbiAgICAgICAgICAgICAgICB6b25lLmlzQ2hlY2tTdGFibGVSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9LCB1bmRlZmluZWQsICgpID0+IHsgfSwgKCkgPT4geyB9KTtcbiAgICAgICAgfVxuICAgICAgICB6b25lLmZha2VUb3BFdmVudFRhc2suaW52b2tlKCk7XG4gICAgfSk7XG4gICAgdXBkYXRlTWljcm9UYXNrU3RhdHVzKHpvbmUpO1xufVxuZnVuY3Rpb24gZm9ya0lubmVyWm9uZVdpdGhBbmd1bGFyQmVoYXZpb3Ioem9uZSkge1xuICAgIGNvbnN0IGRlbGF5Q2hhbmdlRGV0ZWN0aW9uRm9yRXZlbnRzRGVsZWdhdGUgPSAoKSA9PiB7XG4gICAgICAgIGRlbGF5Q2hhbmdlRGV0ZWN0aW9uRm9yRXZlbnRzKHpvbmUpO1xuICAgIH07XG4gICAgem9uZS5faW5uZXIgPSB6b25lLl9pbm5lci5mb3JrKHtcbiAgICAgICAgbmFtZTogJ2FuZ3VsYXInLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7ICdpc0FuZ3VsYXJab25lJzogdHJ1ZSB9LFxuICAgICAgICBvbkludm9rZVRhc2s6IChkZWxlZ2F0ZSwgY3VycmVudCwgdGFyZ2V0LCB0YXNrLCBhcHBseVRoaXMsIGFwcGx5QXJncykgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBvbkVudGVyKHpvbmUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZS5pbnZva2VUYXNrKHRhcmdldCwgdGFzaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKCh6b25lLnNob3VsZENvYWxlc2NlRXZlbnRDaGFuZ2VEZXRlY3Rpb24gJiYgdGFzay50eXBlID09PSAnZXZlbnRUYXNrJykgfHxcbiAgICAgICAgICAgICAgICAgICAgem9uZS5zaG91bGRDb2FsZXNjZVJ1bkNoYW5nZURldGVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBkZWxheUNoYW5nZURldGVjdGlvbkZvckV2ZW50c0RlbGVnYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9uTGVhdmUoem9uZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uSW52b2tlOiAoZGVsZWdhdGUsIGN1cnJlbnQsIHRhcmdldCwgY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgb25FbnRlcih6b25lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVsZWdhdGUuaW52b2tlKHRhcmdldCwgY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKHpvbmUuc2hvdWxkQ29hbGVzY2VSdW5DaGFuZ2VEZXRlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXlDaGFuZ2VEZXRlY3Rpb25Gb3JFdmVudHNEZWxlZ2F0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvbkxlYXZlKHpvbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkhhc1Rhc2s6IChkZWxlZ2F0ZSwgY3VycmVudCwgdGFyZ2V0LCBoYXNUYXNrU3RhdGUpID0+IHtcbiAgICAgICAgICAgIGRlbGVnYXRlLmhhc1Rhc2sodGFyZ2V0LCBoYXNUYXNrU3RhdGUpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBvbmx5IGludGVyZXN0ZWQgaW4gaGFzVGFzayBldmVudHMgd2hpY2ggb3JpZ2luYXRlIGZyb20gb3VyIHpvbmVcbiAgICAgICAgICAgICAgICAvLyAoQSBjaGlsZCBoYXNUYXNrIGV2ZW50IGlzIG5vdCBpbnRlcmVzdGluZyB0byB1cylcbiAgICAgICAgICAgICAgICBpZiAoaGFzVGFza1N0YXRlLmNoYW5nZSA9PSAnbWljcm9UYXNrJykge1xuICAgICAgICAgICAgICAgICAgICB6b25lLl9oYXNQZW5kaW5nTWljcm90YXNrcyA9IGhhc1Rhc2tTdGF0ZS5taWNyb1Rhc2s7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1pY3JvVGFza1N0YXR1cyh6b25lKTtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tTdGFibGUoem9uZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGhhc1Rhc2tTdGF0ZS5jaGFuZ2UgPT0gJ21hY3JvVGFzaycpIHtcbiAgICAgICAgICAgICAgICAgICAgem9uZS5oYXNQZW5kaW5nTWFjcm90YXNrcyA9IGhhc1Rhc2tTdGF0ZS5tYWNyb1Rhc2s7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkhhbmRsZUVycm9yOiAoZGVsZWdhdGUsIGN1cnJlbnQsIHRhcmdldCwgZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGRlbGVnYXRlLmhhbmRsZUVycm9yKHRhcmdldCwgZXJyb3IpO1xuICAgICAgICAgICAgem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB6b25lLm9uRXJyb3IuZW1pdChlcnJvcikpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5mdW5jdGlvbiB1cGRhdGVNaWNyb1Rhc2tTdGF0dXMoem9uZSkge1xuICAgIGlmICh6b25lLl9oYXNQZW5kaW5nTWljcm90YXNrcyB8fFxuICAgICAgICAoKHpvbmUuc2hvdWxkQ29hbGVzY2VFdmVudENoYW5nZURldGVjdGlvbiB8fCB6b25lLnNob3VsZENvYWxlc2NlUnVuQ2hhbmdlRGV0ZWN0aW9uKSAmJlxuICAgICAgICAgICAgem9uZS5sYXN0UmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQgIT09IC0xKSkge1xuICAgICAgICB6b25lLmhhc1BlbmRpbmdNaWNyb3Rhc2tzID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHpvbmUuaGFzUGVuZGluZ01pY3JvdGFza3MgPSBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBvbkVudGVyKHpvbmUpIHtcbiAgICB6b25lLl9uZXN0aW5nKys7XG4gICAgaWYgKHpvbmUuaXNTdGFibGUpIHtcbiAgICAgICAgem9uZS5pc1N0YWJsZSA9IGZhbHNlO1xuICAgICAgICB6b25lLm9uVW5zdGFibGUuZW1pdChudWxsKTtcbiAgICB9XG59XG5mdW5jdGlvbiBvbkxlYXZlKHpvbmUpIHtcbiAgICB6b25lLl9uZXN0aW5nLS07XG4gICAgY2hlY2tTdGFibGUoem9uZSk7XG59XG4vKipcbiAqIFByb3ZpZGVzIGEgbm9vcCBpbXBsZW1lbnRhdGlvbiBvZiBgTmdab25lYCB3aGljaCBkb2VzIG5vdGhpbmcuIFRoaXMgem9uZSByZXF1aXJlcyBleHBsaWNpdCBjYWxsc1xuICogdG8gZnJhbWV3b3JrIHRvIHBlcmZvcm0gcmVuZGVyaW5nLlxuICovXG5jbGFzcyBOb29wTmdab25lIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nTWljcm90YXNrcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdNYWNyb3Rhc2tzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdGFibGUgPSB0cnVlO1xuICAgICAgICB0aGlzLm9uVW5zdGFibGUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub25NaWNyb3Rhc2tFbXB0eSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vblN0YWJsZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vbkVycm9yID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBydW4oZm4sIGFwcGx5VGhpcywgYXBwbHlBcmdzKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShhcHBseVRoaXMsIGFwcGx5QXJncyk7XG4gICAgfVxuICAgIHJ1bkd1YXJkZWQoZm4sIGFwcGx5VGhpcywgYXBwbHlBcmdzKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseShhcHBseVRoaXMsIGFwcGx5QXJncyk7XG4gICAgfVxuICAgIHJ1bk91dHNpZGVBbmd1bGFyKGZuKSB7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbiAgICBydW5UYXNrKGZuLCBhcHBseVRoaXMsIGFwcGx5QXJncywgbmFtZSkge1xuICAgICAgICByZXR1cm4gZm4uYXBwbHkoYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFRoZSBUZXN0YWJpbGl0eSBzZXJ2aWNlIHByb3ZpZGVzIHRlc3RpbmcgaG9va3MgdGhhdCBjYW4gYmUgYWNjZXNzZWQgZnJvbVxuICogdGhlIGJyb3dzZXIuIEVhY2ggYm9vdHN0cmFwcGVkIEFuZ3VsYXIgYXBwbGljYXRpb24gb24gdGhlIHBhZ2Ugd2lsbCBoYXZlXG4gKiBhbiBpbnN0YW5jZSBvZiBUZXN0YWJpbGl0eS5cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgVGVzdGFiaWxpdHkge1xuICAgIGNvbnN0cnVjdG9yKF9uZ1pvbmUpIHtcbiAgICAgICAgdGhpcy5fbmdab25lID0gX25nWm9uZTtcbiAgICAgICAgdGhpcy5fcGVuZGluZ0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5faXNab25lU3RhYmxlID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgYW55IHdvcmsgd2FzIGRvbmUgc2luY2UgdGhlIGxhc3QgJ3doZW5TdGFibGUnIGNhbGxiYWNrLiBUaGlzIGlzXG4gICAgICAgICAqIHVzZWZ1bCB0byBkZXRlY3QgaWYgdGhpcyBjb3VsZCBoYXZlIHBvdGVudGlhbGx5IGRlc3RhYmlsaXplZCBhbm90aGVyXG4gICAgICAgICAqIGNvbXBvbmVudCB3aGlsZSBpdCBpcyBzdGFiaWxpemluZy5cbiAgICAgICAgICogQGludGVybmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9kaWRXb3JrID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IFtdO1xuICAgICAgICB0aGlzLnRhc2tUcmFja2luZ1pvbmUgPSBudWxsO1xuICAgICAgICB0aGlzLl93YXRjaEFuZ3VsYXJFdmVudHMoKTtcbiAgICAgICAgX25nWm9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrVHJhY2tpbmdab25lID1cbiAgICAgICAgICAgICAgICB0eXBlb2YgWm9uZSA9PSAndW5kZWZpbmVkJyA/IG51bGwgOiBab25lLmN1cnJlbnQuZ2V0KCdUYXNrVHJhY2tpbmdab25lJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfd2F0Y2hBbmd1bGFyRXZlbnRzKCkge1xuICAgICAgICB0aGlzLl9uZ1pvbmUub25VbnN0YWJsZS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgbmV4dDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RpZFdvcmsgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX2lzWm9uZVN0YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX25nWm9uZS5vblN0YWJsZS5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgICAgIG5leHQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgTmdab25lLmFzc2VydE5vdEluQW5ndWxhclpvbmUoKTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVNaWNyb1Rhc2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNab25lU3RhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3J1bkNhbGxiYWNrc0lmUmVhZHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZWFzZXMgdGhlIG51bWJlciBvZiBwZW5kaW5nIHJlcXVlc3RcbiAgICAgKiBAZGVwcmVjYXRlZCBwZW5kaW5nIHJlcXVlc3RzIGFyZSBub3cgdHJhY2tlZCB3aXRoIHpvbmVzLlxuICAgICAqL1xuICAgIGluY3JlYXNlUGVuZGluZ1JlcXVlc3RDb3VudCgpIHtcbiAgICAgICAgdGhpcy5fcGVuZGluZ0NvdW50ICs9IDE7XG4gICAgICAgIHRoaXMuX2RpZFdvcmsgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVuZGluZ0NvdW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNyZWFzZXMgdGhlIG51bWJlciBvZiBwZW5kaW5nIHJlcXVlc3RcbiAgICAgKiBAZGVwcmVjYXRlZCBwZW5kaW5nIHJlcXVlc3RzIGFyZSBub3cgdHJhY2tlZCB3aXRoIHpvbmVzXG4gICAgICovXG4gICAgZGVjcmVhc2VQZW5kaW5nUmVxdWVzdENvdW50KCkge1xuICAgICAgICB0aGlzLl9wZW5kaW5nQ291bnQgLT0gMTtcbiAgICAgICAgaWYgKHRoaXMuX3BlbmRpbmdDb3VudCA8IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGVuZGluZyBhc3luYyByZXF1ZXN0cyBiZWxvdyB6ZXJvJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcnVuQ2FsbGJhY2tzSWZSZWFkeSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVuZGluZ0NvdW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIGFuIGFzc29jaWF0ZWQgYXBwbGljYXRpb24gaXMgc3RhYmxlXG4gICAgICovXG4gICAgaXNTdGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc1pvbmVTdGFibGUgJiYgdGhpcy5fcGVuZGluZ0NvdW50ID09PSAwICYmICF0aGlzLl9uZ1pvbmUuaGFzUGVuZGluZ01hY3JvdGFza3M7XG4gICAgfVxuICAgIF9ydW5DYWxsYmFja3NJZlJlYWR5KCkge1xuICAgICAgICBpZiAodGhpcy5pc1N0YWJsZSgpKSB7XG4gICAgICAgICAgICAvLyBTY2hlZHVsZXMgdGhlIGNhbGwgYmFja3MgaW4gYSBuZXcgZnJhbWUgc28gdGhhdCBpdCBpcyBhbHdheXMgYXN5bmMuXG4gICAgICAgICAgICBzY2hlZHVsZU1pY3JvVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuX2NhbGxiYWNrcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNiID0gdGhpcy5fY2FsbGJhY2tzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY2IudGltZW91dElkKTtcbiAgICAgICAgICAgICAgICAgICAgY2IuZG9uZUNiKHRoaXMuX2RpZFdvcmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9kaWRXb3JrID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFN0aWxsIG5vdCBzdGFibGUsIHNlbmQgdXBkYXRlcy5cbiAgICAgICAgICAgIGxldCBwZW5kaW5nID0gdGhpcy5nZXRQZW5kaW5nVGFza3MoKTtcbiAgICAgICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcy5maWx0ZXIoKGNiKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNiLnVwZGF0ZUNiICYmIGNiLnVwZGF0ZUNiKHBlbmRpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChjYi50aW1lb3V0SWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl9kaWRXb3JrID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRQZW5kaW5nVGFza3MoKSB7XG4gICAgICAgIGlmICghdGhpcy50YXNrVHJhY2tpbmdab25lKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29weSB0aGUgdGFza3MgZGF0YSBzbyB0aGF0IHdlIGRvbid0IGxlYWsgdGFza3MuXG4gICAgICAgIHJldHVybiB0aGlzLnRhc2tUcmFja2luZ1pvbmUubWFjcm9UYXNrcy5tYXAoKHQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc291cmNlOiB0LnNvdXJjZSxcbiAgICAgICAgICAgICAgICAvLyBGcm9tIFRhc2tUcmFja2luZ1pvbmU6XG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvem9uZS5qcy9ibG9iL21hc3Rlci9saWIvem9uZS1zcGVjL3Rhc2stdHJhY2tpbmcudHMjTDQwXG4gICAgICAgICAgICAgICAgY3JlYXRpb25Mb2NhdGlvbjogdC5jcmVhdGlvbkxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIGRhdGE6IHQuZGF0YVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFkZENhbGxiYWNrKGNiLCB0aW1lb3V0LCB1cGRhdGVDYikge1xuICAgICAgICBsZXQgdGltZW91dElkID0gLTE7XG4gICAgICAgIGlmICh0aW1lb3V0ICYmIHRpbWVvdXQgPiAwKSB7XG4gICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MuZmlsdGVyKChjYikgPT4gY2IudGltZW91dElkICE9PSB0aW1lb3V0SWQpO1xuICAgICAgICAgICAgICAgIGNiKHRoaXMuX2RpZFdvcmssIHRoaXMuZ2V0UGVuZGluZ1Rhc2tzKCkpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY2FsbGJhY2tzLnB1c2goeyBkb25lQ2I6IGNiLCB0aW1lb3V0SWQ6IHRpbWVvdXRJZCwgdXBkYXRlQ2I6IHVwZGF0ZUNiIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXYWl0IGZvciB0aGUgYXBwbGljYXRpb24gdG8gYmUgc3RhYmxlIHdpdGggYSB0aW1lb3V0LiBJZiB0aGUgdGltZW91dCBpcyByZWFjaGVkIGJlZm9yZSB0aGF0XG4gICAgICogaGFwcGVucywgdGhlIGNhbGxiYWNrIHJlY2VpdmVzIGEgbGlzdCBvZiB0aGUgbWFjcm8gdGFza3MgdGhhdCB3ZXJlIHBlbmRpbmcsIG90aGVyd2lzZSBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvbmVDYiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIHdoZW4gQW5ndWxhciBpcyBzdGFibGUgb3IgdGhlIHRpbWVvdXQgZXhwaXJlc1xuICAgICAqICAgIHdoaWNoZXZlciBjb21lcyBmaXJzdC5cbiAgICAgKiBAcGFyYW0gdGltZW91dCBPcHRpb25hbC4gVGhlIG1heGltdW0gdGltZSB0byB3YWl0IGZvciBBbmd1bGFyIHRvIGJlY29tZSBzdGFibGUuIElmIG5vdFxuICAgICAqICAgIHNwZWNpZmllZCwgd2hlblN0YWJsZSgpIHdpbGwgd2FpdCBmb3JldmVyLlxuICAgICAqIEBwYXJhbSB1cGRhdGVDYiBPcHRpb25hbC4gSWYgc3BlY2lmaWVkLCB0aGlzIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZCB3aGVuZXZlciB0aGUgc2V0IG9mXG4gICAgICogICAgcGVuZGluZyBtYWNyb3Rhc2tzIGNoYW5nZXMuIElmIHRoaXMgY2FsbGJhY2sgcmV0dXJucyB0cnVlIGRvbmVDYiB3aWxsIG5vdCBiZSBpbnZva2VkXG4gICAgICogICAgYW5kIG5vIGZ1cnRoZXIgdXBkYXRlcyB3aWxsIGJlIGlzc3VlZC5cbiAgICAgKi9cbiAgICB3aGVuU3RhYmxlKGRvbmVDYiwgdGltZW91dCwgdXBkYXRlQ2IpIHtcbiAgICAgICAgaWYgKHVwZGF0ZUNiICYmICF0aGlzLnRhc2tUcmFja2luZ1pvbmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGFzayB0cmFja2luZyB6b25lIGlzIHJlcXVpcmVkIHdoZW4gcGFzc2luZyBhbiB1cGRhdGUgY2FsbGJhY2sgdG8gJyArXG4gICAgICAgICAgICAgICAgJ3doZW5TdGFibGUoKS4gSXMgXCJ6b25lLmpzL3BsdWdpbnMvdGFzay10cmFja2luZ1wiIGxvYWRlZD8nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGVzZSBhcmd1bWVudHMgYXJlICdGdW5jdGlvbicgYWJvdmUgdG8ga2VlcCB0aGUgcHVibGljIEFQSSBzaW1wbGUuXG4gICAgICAgIHRoaXMuYWRkQ2FsbGJhY2soZG9uZUNiLCB0aW1lb3V0LCB1cGRhdGVDYik7XG4gICAgICAgIHRoaXMuX3J1bkNhbGxiYWNrc0lmUmVhZHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBudW1iZXIgb2YgcGVuZGluZyByZXF1ZXN0c1xuICAgICAqIEBkZXByZWNhdGVkIHBlbmRpbmcgcmVxdWVzdHMgYXJlIG5vdyB0cmFja2VkIHdpdGggem9uZXNcbiAgICAgKi9cbiAgICBnZXRQZW5kaW5nUmVxdWVzdENvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcGVuZGluZ0NvdW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIHByb3ZpZGVycyBieSBuYW1lXG4gICAgICogQHBhcmFtIHVzaW5nIFRoZSByb290IGVsZW1lbnQgdG8gc2VhcmNoIGZyb21cbiAgICAgKiBAcGFyYW0gcHJvdmlkZXIgVGhlIG5hbWUgb2YgYmluZGluZyB2YXJpYWJsZVxuICAgICAqIEBwYXJhbSBleGFjdE1hdGNoIFdoZXRoZXIgdXNpbmcgZXhhY3RNYXRjaFxuICAgICAqL1xuICAgIGZpbmRQcm92aWRlcnModXNpbmcsIHByb3ZpZGVyLCBleGFjdE1hdGNoKSB7XG4gICAgICAgIC8vIFRPRE8oanVsaWVtcik6IGltcGxlbWVudC5cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn1cblRlc3RhYmlsaXR5Lsm1ZmFjID0gZnVuY3Rpb24gVGVzdGFiaWxpdHlfRmFjdG9yeSh0KSB7IHJldHVybiBuZXcgKHQgfHwgVGVzdGFiaWxpdHkpKMm1ybVpbmplY3QoTmdab25lKSk7IH07XG5UZXN0YWJpbGl0eS7JtXByb3YgPSAvKkBfX1BVUkVfXyovIMm1ybVkZWZpbmVJbmplY3RhYmxlKHsgdG9rZW46IFRlc3RhYmlsaXR5LCBmYWN0b3J5OiBUZXN0YWJpbGl0eS7JtWZhYyB9KTtcbihmdW5jdGlvbiAoKSB7ICh0eXBlb2YgbmdEZXZNb2RlID09PSBcInVuZGVmaW5lZFwiIHx8IG5nRGV2TW9kZSkgJiYgc2V0Q2xhc3NNZXRhZGF0YShUZXN0YWJpbGl0eSwgW3tcbiAgICAgICAgdHlwZTogSW5qZWN0YWJsZVxuICAgIH1dLCBmdW5jdGlvbiAoKSB7IHJldHVybiBbeyB0eXBlOiBOZ1pvbmUgfV07IH0sIG51bGwpOyB9KSgpO1xuLyoqXG4gKiBBIGdsb2JhbCByZWdpc3RyeSBvZiB7QGxpbmsgVGVzdGFiaWxpdHl9IGluc3RhbmNlcyBmb3Igc3BlY2lmaWMgZWxlbWVudHMuXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIFRlc3RhYmlsaXR5UmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX2FwcGxpY2F0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICAgICAgX3Rlc3RhYmlsaXR5R2V0dGVyLmFkZFRvV2luZG93KHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYW4gYXBwbGljYXRpb24gd2l0aCBhIHRlc3RhYmlsaXR5IGhvb2sgc28gdGhhdCBpdCBjYW4gYmUgdHJhY2tlZFxuICAgICAqIEBwYXJhbSB0b2tlbiB0b2tlbiBvZiBhcHBsaWNhdGlvbiwgcm9vdCBlbGVtZW50XG4gICAgICogQHBhcmFtIHRlc3RhYmlsaXR5IFRlc3RhYmlsaXR5IGhvb2tcbiAgICAgKi9cbiAgICByZWdpc3RlckFwcGxpY2F0aW9uKHRva2VuLCB0ZXN0YWJpbGl0eSkge1xuICAgICAgICB0aGlzLl9hcHBsaWNhdGlvbnMuc2V0KHRva2VuLCB0ZXN0YWJpbGl0eSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGFuIGFwcGxpY2F0aW9uLlxuICAgICAqIEBwYXJhbSB0b2tlbiB0b2tlbiBvZiBhcHBsaWNhdGlvbiwgcm9vdCBlbGVtZW50XG4gICAgICovXG4gICAgdW5yZWdpc3RlckFwcGxpY2F0aW9uKHRva2VuKSB7XG4gICAgICAgIHRoaXMuX2FwcGxpY2F0aW9ucy5kZWxldGUodG9rZW4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBhbGwgYXBwbGljYXRpb25zXG4gICAgICovXG4gICAgdW5yZWdpc3RlckFsbEFwcGxpY2F0aW9ucygpIHtcbiAgICAgICAgdGhpcy5fYXBwbGljYXRpb25zLmNsZWFyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIHRlc3RhYmlsaXR5IGhvb2sgYXNzb2NpYXRlZCB3aXRoIHRoZSBhcHBsaWNhdGlvblxuICAgICAqIEBwYXJhbSBlbGVtIHJvb3QgZWxlbWVudFxuICAgICAqL1xuICAgIGdldFRlc3RhYmlsaXR5KGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGxpY2F0aW9ucy5nZXQoZWxlbSkgfHwgbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCByZWdpc3RlcmVkIHRlc3RhYmlsaXRpZXNcbiAgICAgKi9cbiAgICBnZXRBbGxUZXN0YWJpbGl0aWVzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9hcHBsaWNhdGlvbnMudmFsdWVzKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIHJlZ2lzdGVyZWQgYXBwbGljYXRpb25zKHJvb3QgZWxlbWVudHMpXG4gICAgICovXG4gICAgZ2V0QWxsUm9vdEVsZW1lbnRzKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9hcHBsaWNhdGlvbnMua2V5cygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZCB0ZXN0YWJpbGl0eSBvZiBhIG5vZGUgaW4gdGhlIFRyZWVcbiAgICAgKiBAcGFyYW0gZWxlbSBub2RlXG4gICAgICogQHBhcmFtIGZpbmRJbkFuY2VzdG9ycyB3aGV0aGVyIGZpbmRpbmcgdGVzdGFiaWxpdHkgaW4gYW5jZXN0b3JzIGlmIHRlc3RhYmlsaXR5IHdhcyBub3QgZm91bmQgaW5cbiAgICAgKiBjdXJyZW50IG5vZGVcbiAgICAgKi9cbiAgICBmaW5kVGVzdGFiaWxpdHlJblRyZWUoZWxlbSwgZmluZEluQW5jZXN0b3JzID0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gX3Rlc3RhYmlsaXR5R2V0dGVyLmZpbmRUZXN0YWJpbGl0eUluVHJlZSh0aGlzLCBlbGVtLCBmaW5kSW5BbmNlc3RvcnMpO1xuICAgIH1cbn1cblRlc3RhYmlsaXR5UmVnaXN0cnkuybVmYWMgPSBmdW5jdGlvbiBUZXN0YWJpbGl0eVJlZ2lzdHJ5X0ZhY3RvcnkodCkgeyByZXR1cm4gbmV3ICh0IHx8IFRlc3RhYmlsaXR5UmVnaXN0cnkpKCk7IH07XG5UZXN0YWJpbGl0eVJlZ2lzdHJ5Lsm1cHJvdiA9IC8qQF9fUFVSRV9fKi8gybXJtWRlZmluZUluamVjdGFibGUoeyB0b2tlbjogVGVzdGFiaWxpdHlSZWdpc3RyeSwgZmFjdG9yeTogVGVzdGFiaWxpdHlSZWdpc3RyeS7JtWZhYyB9KTtcbihmdW5jdGlvbiAoKSB7ICh0eXBlb2YgbmdEZXZNb2RlID09PSBcInVuZGVmaW5lZFwiIHx8IG5nRGV2TW9kZSkgJiYgc2V0Q2xhc3NNZXRhZGF0YShUZXN0YWJpbGl0eVJlZ2lzdHJ5LCBbe1xuICAgICAgICB0eXBlOiBJbmplY3RhYmxlXG4gICAgfV0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtdOyB9LCBudWxsKTsgfSkoKTtcbmNsYXNzIF9Ob29wR2V0VGVzdGFiaWxpdHkge1xuICAgIGFkZFRvV2luZG93KHJlZ2lzdHJ5KSB7IH1cbiAgICBmaW5kVGVzdGFiaWxpdHlJblRyZWUocmVnaXN0cnksIGVsZW0sIGZpbmRJbkFuY2VzdG9ycykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vKipcbiAqIFNldCB0aGUge0BsaW5rIEdldFRlc3RhYmlsaXR5fSBpbXBsZW1lbnRhdGlvbiB1c2VkIGJ5IHRoZSBBbmd1bGFyIHRlc3RpbmcgZnJhbWV3b3JrLlxuICogQHB1YmxpY0FwaVxuICovXG5mdW5jdGlvbiBzZXRUZXN0YWJpbGl0eUdldHRlcihnZXR0ZXIpIHtcbiAgICBfdGVzdGFiaWxpdHlHZXR0ZXIgPSBnZXR0ZXI7XG59XG5sZXQgX3Rlc3RhYmlsaXR5R2V0dGVyID0gbmV3IF9Ob29wR2V0VGVzdGFiaWxpdHkoKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5sZXQgX3BsYXRmb3JtO1xuZnVuY3Rpb24gY29tcGlsZU5nTW9kdWxlRmFjdG9yeShpbmplY3Rvciwgb3B0aW9ucywgbW9kdWxlVHlwZSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnROZ01vZHVsZVR5cGUobW9kdWxlVHlwZSk7XG4gICAgY29uc3QgbW9kdWxlRmFjdG9yeSA9IG5ldyBOZ01vZHVsZUZhY3RvcnkobW9kdWxlVHlwZSk7XG4gICAgLy8gQWxsIG9mIHRoZSBsb2dpYyBiZWxvdyBpcyBpcnJlbGV2YW50IGZvciBBT1QtY29tcGlsZWQgY29kZS5cbiAgICBpZiAodHlwZW9mIG5nSml0TW9kZSAhPT0gJ3VuZGVmaW5lZCcgJiYgIW5nSml0TW9kZSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1vZHVsZUZhY3RvcnkpO1xuICAgIH1cbiAgICBjb25zdCBjb21waWxlck9wdGlvbnMgPSBpbmplY3Rvci5nZXQoQ09NUElMRVJfT1BUSU9OUywgW10pLmNvbmNhdChvcHRpb25zKTtcbiAgICAvLyBDb25maWd1cmUgdGhlIGNvbXBpbGVyIHRvIHVzZSB0aGUgcHJvdmlkZWQgb3B0aW9ucy4gVGhpcyBjYWxsIG1heSBmYWlsIHdoZW4gbXVsdGlwbGUgbW9kdWxlc1xuICAgIC8vIGFyZSBib290c3RyYXBwZWQgd2l0aCBpbmNvbXBhdGlibGUgb3B0aW9ucywgYXMgYSBjb21wb25lbnQgY2FuIG9ubHkgYmUgY29tcGlsZWQgYWNjb3JkaW5nIHRvXG4gICAgLy8gYSBzaW5nbGUgc2V0IG9mIG9wdGlvbnMuXG4gICAgc2V0Sml0T3B0aW9ucyh7XG4gICAgICAgIGRlZmF1bHRFbmNhcHN1bGF0aW9uOiBfbGFzdERlZmluZWQoY29tcGlsZXJPcHRpb25zLm1hcChvcHRzID0+IG9wdHMuZGVmYXVsdEVuY2Fwc3VsYXRpb24pKSxcbiAgICAgICAgcHJlc2VydmVXaGl0ZXNwYWNlczogX2xhc3REZWZpbmVkKGNvbXBpbGVyT3B0aW9ucy5tYXAob3B0cyA9PiBvcHRzLnByZXNlcnZlV2hpdGVzcGFjZXMpKSxcbiAgICB9KTtcbiAgICBpZiAoaXNDb21wb25lbnRSZXNvdXJjZVJlc29sdXRpb25RdWV1ZUVtcHR5KCkpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShtb2R1bGVGYWN0b3J5KTtcbiAgICB9XG4gICAgY29uc3QgY29tcGlsZXJQcm92aWRlcnMgPSBfbWVyZ2VBcnJheXMoY29tcGlsZXJPcHRpb25zLm1hcChvID0+IG8ucHJvdmlkZXJzKSk7XG4gICAgLy8gSW4gY2FzZSB0aGVyZSBhcmUgbm8gY29tcGlsZXIgcHJvdmlkZXJzLCB3ZSBqdXN0IHJldHVybiB0aGUgbW9kdWxlIGZhY3RvcnkgYXNcbiAgICAvLyB0aGVyZSB3b24ndCBiZSBhbnkgcmVzb3VyY2UgbG9hZGVyLiBUaGlzIGNhbiBoYXBwZW4gd2l0aCBJdnksIGJlY2F1c2UgQU9UIGNvbXBpbGVkXG4gICAgLy8gbW9kdWxlcyBjYW4gYmUgc3RpbGwgcGFzc2VkIHRocm91Z2ggXCJib290c3RyYXBNb2R1bGVcIi4gSW4gdGhhdCBjYXNlIHdlIHNob3VsZG4ndFxuICAgIC8vIHVubmVjZXNzYXJpbHkgcmVxdWlyZSB0aGUgSklUIGNvbXBpbGVyLlxuICAgIGlmIChjb21waWxlclByb3ZpZGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShtb2R1bGVGYWN0b3J5KTtcbiAgICB9XG4gICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7XG4gICAgICAgIHVzYWdlOiAwIC8qIERlY29yYXRvciAqLyxcbiAgICAgICAga2luZDogJ05nTW9kdWxlJyxcbiAgICAgICAgdHlwZTogbW9kdWxlVHlwZSxcbiAgICB9KTtcbiAgICBjb25zdCBjb21waWxlckluamVjdG9yID0gSW5qZWN0b3IuY3JlYXRlKHsgcHJvdmlkZXJzOiBjb21waWxlclByb3ZpZGVycyB9KTtcbiAgICBjb25zdCByZXNvdXJjZUxvYWRlciA9IGNvbXBpbGVySW5qZWN0b3IuZ2V0KGNvbXBpbGVyLlJlc291cmNlTG9hZGVyKTtcbiAgICAvLyBUaGUgcmVzb3VyY2UgbG9hZGVyIGNhbiBhbHNvIHJldHVybiBhIHN0cmluZyB3aGlsZSB0aGUgXCJyZXNvbHZlQ29tcG9uZW50UmVzb3VyY2VzXCJcbiAgICAvLyBhbHdheXMgZXhwZWN0cyBhIHByb21pc2UuIFRoZXJlZm9yZSB3ZSBuZWVkIHRvIHdyYXAgdGhlIHJldHVybmVkIHZhbHVlIGluIGEgcHJvbWlzZS5cbiAgICByZXR1cm4gcmVzb2x2ZUNvbXBvbmVudFJlc291cmNlcyh1cmwgPT4gUHJvbWlzZS5yZXNvbHZlKHJlc291cmNlTG9hZGVyLmdldCh1cmwpKSlcbiAgICAgICAgLnRoZW4oKCkgPT4gbW9kdWxlRmFjdG9yeSk7XG59XG5mdW5jdGlvbiBwdWJsaXNoRGVmYXVsdEdsb2JhbFV0aWxzKCkge1xuICAgIG5nRGV2TW9kZSAmJiBwdWJsaXNoRGVmYXVsdEdsb2JhbFV0aWxzJDEoKTtcbn1cbmZ1bmN0aW9uIGlzQm91bmRUb01vZHVsZShjZikge1xuICAgIHJldHVybiBjZi5pc0JvdW5kVG9Nb2R1bGU7XG59XG5jb25zdCBBTExPV19NVUxUSVBMRV9QTEFURk9STVMgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ0FsbG93TXVsdGlwbGVUb2tlbicpO1xuLyoqXG4gKiBBIHRva2VuIGZvciB0aGlyZC1wYXJ0eSBjb21wb25lbnRzIHRoYXQgY2FuIHJlZ2lzdGVyIHRoZW1zZWx2ZXMgd2l0aCBOZ1Byb2JlLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgTmdQcm9iZVRva2VuIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCB0b2tlbikge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgcGxhdGZvcm0uXG4gKiBQbGF0Zm9ybXMgbXVzdCBiZSBjcmVhdGVkIG9uIGxhdW5jaCB1c2luZyB0aGlzIGZ1bmN0aW9uLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGxhdGZvcm0oaW5qZWN0b3IpIHtcbiAgICBpZiAoX3BsYXRmb3JtICYmICFfcGxhdGZvcm0uZGVzdHJveWVkICYmXG4gICAgICAgICFfcGxhdGZvcm0uaW5qZWN0b3IuZ2V0KEFMTE9XX01VTFRJUExFX1BMQVRGT1JNUywgZmFsc2UpKSB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpID9cbiAgICAgICAgICAgICdUaGVyZSBjYW4gYmUgb25seSBvbmUgcGxhdGZvcm0uIERlc3Ryb3kgdGhlIHByZXZpb3VzIG9uZSB0byBjcmVhdGUgYSBuZXcgb25lLicgOlxuICAgICAgICAgICAgJyc7XG4gICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoNDAwIC8qIE1VTFRJUExFX1BMQVRGT1JNUyAqLywgZXJyb3JNZXNzYWdlKTtcbiAgICB9XG4gICAgcHVibGlzaERlZmF1bHRHbG9iYWxVdGlscygpO1xuICAgIF9wbGF0Zm9ybSA9IGluamVjdG9yLmdldChQbGF0Zm9ybVJlZik7XG4gICAgY29uc3QgaW5pdHMgPSBpbmplY3Rvci5nZXQoUExBVEZPUk1fSU5JVElBTElaRVIsIG51bGwpO1xuICAgIGlmIChpbml0cylcbiAgICAgICAgaW5pdHMuZm9yRWFjaCgoaW5pdCkgPT4gaW5pdCgpKTtcbiAgICByZXR1cm4gX3BsYXRmb3JtO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgZmFjdG9yeSBmb3IgYSBwbGF0Zm9ybS4gQ2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBvciBvdmVycmlkZSBgUHJvdmlkZXJzYCBzcGVjaWZpYyB0b1xuICogeW91ciBhcHBsaWNhdGlvbidzIHJ1bnRpbWUgbmVlZHMsIHN1Y2ggYXMgYFBMQVRGT1JNX0lOSVRJQUxJWkVSYCBhbmQgYFBMQVRGT1JNX0lEYC5cbiAqIEBwYXJhbSBwYXJlbnRQbGF0Zm9ybUZhY3RvcnkgQW5vdGhlciBwbGF0Zm9ybSBmYWN0b3J5IHRvIG1vZGlmeS4gQWxsb3dzIHlvdSB0byBjb21wb3NlIGZhY3Rvcmllc1xuICogdG8gYnVpbGQgdXAgY29uZmlndXJhdGlvbnMgdGhhdCBtaWdodCBiZSByZXF1aXJlZCBieSBkaWZmZXJlbnQgbGlicmFyaWVzIG9yIHBhcnRzIG9mIHRoZVxuICogYXBwbGljYXRpb24uXG4gKiBAcGFyYW0gbmFtZSBJZGVudGlmaWVzIHRoZSBuZXcgcGxhdGZvcm0gZmFjdG9yeS5cbiAqIEBwYXJhbSBwcm92aWRlcnMgQSBzZXQgb2YgZGVwZW5kZW5jeSBwcm92aWRlcnMgZm9yIHBsYXRmb3JtcyBjcmVhdGVkIHdpdGggdGhlIG5ldyBmYWN0b3J5LlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGxhdGZvcm1GYWN0b3J5KHBhcmVudFBsYXRmb3JtRmFjdG9yeSwgbmFtZSwgcHJvdmlkZXJzID0gW10pIHtcbiAgICBjb25zdCBkZXNjID0gYFBsYXRmb3JtOiAke25hbWV9YDtcbiAgICBjb25zdCBtYXJrZXIgPSBuZXcgSW5qZWN0aW9uVG9rZW4oZGVzYyk7XG4gICAgcmV0dXJuIChleHRyYVByb3ZpZGVycyA9IFtdKSA9PiB7XG4gICAgICAgIGxldCBwbGF0Zm9ybSA9IGdldFBsYXRmb3JtKCk7XG4gICAgICAgIGlmICghcGxhdGZvcm0gfHwgcGxhdGZvcm0uaW5qZWN0b3IuZ2V0KEFMTE9XX01VTFRJUExFX1BMQVRGT1JNUywgZmFsc2UpKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50UGxhdGZvcm1GYWN0b3J5KSB7XG4gICAgICAgICAgICAgICAgcGFyZW50UGxhdGZvcm1GYWN0b3J5KHByb3ZpZGVycy5jb25jYXQoZXh0cmFQcm92aWRlcnMpLmNvbmNhdCh7IHByb3ZpZGU6IG1hcmtlciwgdXNlVmFsdWU6IHRydWUgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5qZWN0ZWRQcm92aWRlcnMgPSBwcm92aWRlcnMuY29uY2F0KGV4dHJhUHJvdmlkZXJzKS5jb25jYXQoeyBwcm92aWRlOiBtYXJrZXIsIHVzZVZhbHVlOiB0cnVlIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogSU5KRUNUT1JfU0NPUEUsXG4gICAgICAgICAgICAgICAgICAgIHVzZVZhbHVlOiAncGxhdGZvcm0nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY3JlYXRlUGxhdGZvcm0oSW5qZWN0b3IuY3JlYXRlKHsgcHJvdmlkZXJzOiBpbmplY3RlZFByb3ZpZGVycywgbmFtZTogZGVzYyB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFzc2VydFBsYXRmb3JtKG1hcmtlcik7XG4gICAgfTtcbn1cbi8qKlxuICogQ2hlY2tzIHRoYXQgdGhlcmUgaXMgY3VycmVudGx5IGEgcGxhdGZvcm0gdGhhdCBjb250YWlucyB0aGUgZ2l2ZW4gdG9rZW4gYXMgYSBwcm92aWRlci5cbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmZ1bmN0aW9uIGFzc2VydFBsYXRmb3JtKHJlcXVpcmVkVG9rZW4pIHtcbiAgICBjb25zdCBwbGF0Zm9ybSA9IGdldFBsYXRmb3JtKCk7XG4gICAgaWYgKCFwbGF0Zm9ybSkge1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAodHlwZW9mIG5nRGV2TW9kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmdEZXZNb2RlKSA/ICdObyBwbGF0Zm9ybSBleGlzdHMhJyA6ICcnO1xuICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDQwMSAvKiBQTEFURk9STV9OT1RfRk9VTkQgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgfVxuICAgIGlmICgodHlwZW9mIG5nRGV2TW9kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmdEZXZNb2RlKSAmJlxuICAgICAgICAhcGxhdGZvcm0uaW5qZWN0b3IuZ2V0KHJlcXVpcmVkVG9rZW4sIG51bGwpKSB7XG4gICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoNDAwIC8qIE1VTFRJUExFX1BMQVRGT1JNUyAqLywgJ0EgcGxhdGZvcm0gd2l0aCBhIGRpZmZlcmVudCBjb25maWd1cmF0aW9uIGhhcyBiZWVuIGNyZWF0ZWQuIFBsZWFzZSBkZXN0cm95IGl0IGZpcnN0LicpO1xuICAgIH1cbiAgICByZXR1cm4gcGxhdGZvcm07XG59XG4vKipcbiAqIERlc3Ryb3lzIHRoZSBjdXJyZW50IEFuZ3VsYXIgcGxhdGZvcm0gYW5kIGFsbCBBbmd1bGFyIGFwcGxpY2F0aW9ucyBvbiB0aGUgcGFnZS5cbiAqIERlc3Ryb3lzIGFsbCBtb2R1bGVzIGFuZCBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCB3aXRoIHRoZSBwbGF0Zm9ybS5cbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmZ1bmN0aW9uIGRlc3Ryb3lQbGF0Zm9ybSgpIHtcbiAgICBpZiAoX3BsYXRmb3JtICYmICFfcGxhdGZvcm0uZGVzdHJveWVkKSB7XG4gICAgICAgIF9wbGF0Zm9ybS5kZXN0cm95KCk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IHBsYXRmb3JtLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuZnVuY3Rpb24gZ2V0UGxhdGZvcm0oKSB7XG4gICAgcmV0dXJuIF9wbGF0Zm9ybSAmJiAhX3BsYXRmb3JtLmRlc3Ryb3llZCA/IF9wbGF0Zm9ybSA6IG51bGw7XG59XG4vKipcbiAqIFRoZSBBbmd1bGFyIHBsYXRmb3JtIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgQW5ndWxhciBvbiBhIHdlYiBwYWdlLlxuICogRWFjaCBwYWdlIGhhcyBleGFjdGx5IG9uZSBwbGF0Zm9ybS4gU2VydmljZXMgKHN1Y2ggYXMgcmVmbGVjdGlvbikgd2hpY2ggYXJlIGNvbW1vblxuICogdG8gZXZlcnkgQW5ndWxhciBhcHBsaWNhdGlvbiBydW5uaW5nIG9uIHRoZSBwYWdlIGFyZSBib3VuZCBpbiBpdHMgc2NvcGUuXG4gKiBBIHBhZ2UncyBwbGF0Zm9ybSBpcyBpbml0aWFsaXplZCBpbXBsaWNpdGx5IHdoZW4gYSBwbGF0Zm9ybSBpcyBjcmVhdGVkIHVzaW5nIGEgcGxhdGZvcm1cbiAqIGZhY3Rvcnkgc3VjaCBhcyBgUGxhdGZvcm1Ccm93c2VyYCwgb3IgZXhwbGljaXRseSBieSBjYWxsaW5nIHRoZSBgY3JlYXRlUGxhdGZvcm0oKWAgZnVuY3Rpb24uXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBQbGF0Zm9ybVJlZiB7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGNvbnN0cnVjdG9yKF9pbmplY3Rvcikge1xuICAgICAgICB0aGlzLl9pbmplY3RvciA9IF9pbmplY3RvcjtcbiAgICAgICAgdGhpcy5fbW9kdWxlcyA9IFtdO1xuICAgICAgICB0aGlzLl9kZXN0cm95TGlzdGVuZXJzID0gW107XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGFuIGBATmdNb2R1bGVgIGZvciB0aGUgZ2l2ZW4gcGxhdGZvcm0uXG4gICAgICpcbiAgICAgKiBAZGVwcmVjYXRlZCBQYXNzaW5nIE5nTW9kdWxlIGZhY3RvcmllcyBhcyB0aGUgYFBsYXRmb3JtUmVmLmJvb3RzdHJhcE1vZHVsZUZhY3RvcnlgIGZ1bmN0aW9uXG4gICAgICogICAgIGFyZ3VtZW50IGlzIGRlcHJlY2F0ZWQuIFVzZSB0aGUgYFBsYXRmb3JtUmVmLmJvb3RzdHJhcE1vZHVsZWAgQVBJIGluc3RlYWQuXG4gICAgICovXG4gICAgYm9vdHN0cmFwTW9kdWxlRmFjdG9yeShtb2R1bGVGYWN0b3J5LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIE5vdGU6IFdlIG5lZWQgdG8gY3JlYXRlIHRoZSBOZ1pvbmUgX2JlZm9yZV8gd2UgaW5zdGFudGlhdGUgdGhlIG1vZHVsZSxcbiAgICAgICAgLy8gYXMgaW5zdGFudGlhdGluZyB0aGUgbW9kdWxlIGNyZWF0ZXMgc29tZSBwcm92aWRlcnMgZWFnZXJseS5cbiAgICAgICAgLy8gU28gd2UgY3JlYXRlIGEgbWluaSBwYXJlbnQgaW5qZWN0b3IgdGhhdCBqdXN0IGNvbnRhaW5zIHRoZSBuZXcgTmdab25lIGFuZFxuICAgICAgICAvLyBwYXNzIHRoYXQgYXMgcGFyZW50IHRvIHRoZSBOZ01vZHVsZUZhY3RvcnkuXG4gICAgICAgIGNvbnN0IG5nWm9uZU9wdGlvbiA9IG9wdGlvbnMgPyBvcHRpb25zLm5nWm9uZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgbmdab25lRXZlbnRDb2FsZXNjaW5nID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5uZ1pvbmVFdmVudENvYWxlc2NpbmcpIHx8IGZhbHNlO1xuICAgICAgICBjb25zdCBuZ1pvbmVSdW5Db2FsZXNjaW5nID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5uZ1pvbmVSdW5Db2FsZXNjaW5nKSB8fCBmYWxzZTtcbiAgICAgICAgY29uc3Qgbmdab25lID0gZ2V0Tmdab25lKG5nWm9uZU9wdGlvbiwgeyBuZ1pvbmVFdmVudENvYWxlc2NpbmcsIG5nWm9uZVJ1bkNvYWxlc2NpbmcgfSk7XG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IFt7IHByb3ZpZGU6IE5nWm9uZSwgdXNlVmFsdWU6IG5nWm9uZSB9XTtcbiAgICAgICAgLy8gTm90ZTogQ3JlYXRlIG5nWm9uZUluamVjdG9yIHdpdGhpbiBuZ1pvbmUucnVuIHNvIHRoYXQgYWxsIG9mIHRoZSBpbnN0YW50aWF0ZWQgc2VydmljZXMgYXJlXG4gICAgICAgIC8vIGNyZWF0ZWQgd2l0aGluIHRoZSBBbmd1bGFyIHpvbmVcbiAgICAgICAgLy8gRG8gbm90IHRyeSB0byByZXBsYWNlIG5nWm9uZS5ydW4gd2l0aCBBcHBsaWNhdGlvblJlZiNydW4gYmVjYXVzZSBBcHBsaWNhdGlvblJlZiB3b3VsZCB0aGVuIGJlXG4gICAgICAgIC8vIGNyZWF0ZWQgb3V0c2lkZSBvZiB0aGUgQW5ndWxhciB6b25lLlxuICAgICAgICByZXR1cm4gbmdab25lLnJ1bigoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZ1pvbmVJbmplY3RvciA9IEluamVjdG9yLmNyZWF0ZSh7IHByb3ZpZGVyczogcHJvdmlkZXJzLCBwYXJlbnQ6IHRoaXMuaW5qZWN0b3IsIG5hbWU6IG1vZHVsZUZhY3RvcnkubW9kdWxlVHlwZS5uYW1lIH0pO1xuICAgICAgICAgICAgY29uc3QgbW9kdWxlUmVmID0gbW9kdWxlRmFjdG9yeS5jcmVhdGUobmdab25lSW5qZWN0b3IpO1xuICAgICAgICAgICAgY29uc3QgZXhjZXB0aW9uSGFuZGxlciA9IG1vZHVsZVJlZi5pbmplY3Rvci5nZXQoRXJyb3JIYW5kbGVyLCBudWxsKTtcbiAgICAgICAgICAgIGlmICghZXhjZXB0aW9uSGFuZGxlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpID9cbiAgICAgICAgICAgICAgICAgICAgJ05vIEVycm9ySGFuZGxlci4gSXMgcGxhdGZvcm0gbW9kdWxlIChCcm93c2VyTW9kdWxlKSBpbmNsdWRlZD8nIDpcbiAgICAgICAgICAgICAgICAgICAgJyc7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcig0MDIgLyogRVJST1JfSEFORExFUl9OT1RfRk9VTkQgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IG5nWm9uZS5vbkVycm9yLnN1YnNjcmliZSh7XG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9uSGFuZGxlci5oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBtb2R1bGVSZWYub25EZXN0cm95KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKHRoaXMuX21vZHVsZXMsIG1vZHVsZVJlZik7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gX2NhbGxBbmRSZXBvcnRUb0Vycm9ySGFuZGxlcihleGNlcHRpb25IYW5kbGVyLCBuZ1pvbmUsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbml0U3RhdHVzID0gbW9kdWxlUmVmLmluamVjdG9yLmdldChBcHBsaWNhdGlvbkluaXRTdGF0dXMpO1xuICAgICAgICAgICAgICAgIGluaXRTdGF0dXMucnVuSW5pdGlhbGl6ZXJzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluaXRTdGF0dXMuZG9uZVByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBgTE9DQUxFX0lEYCBwcm92aWRlciBpcyBkZWZpbmVkIGF0IGJvb3RzdHJhcCB0aGVuIHdlIHNldCB0aGUgdmFsdWUgZm9yIGl2eVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2NhbGVJZCA9IG1vZHVsZVJlZi5pbmplY3Rvci5nZXQoTE9DQUxFX0lELCBERUZBVUxUX0xPQ0FMRV9JRCk7XG4gICAgICAgICAgICAgICAgICAgIHNldExvY2FsZUlkKGxvY2FsZUlkIHx8IERFRkFVTFRfTE9DQUxFX0lEKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9kdWxlRG9Cb290c3RyYXAobW9kdWxlUmVmKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVJlZjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBhbiBgQE5nTW9kdWxlYCBmb3IgYSBnaXZlbiBwbGF0Zm9ybS5cbiAgICAgKlxuICAgICAqIEB1c2FnZU5vdGVzXG4gICAgICogIyMjIFNpbXBsZSBFeGFtcGxlXG4gICAgICpcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogQE5nTW9kdWxlKHtcbiAgICAgKiAgIGltcG9ydHM6IFtCcm93c2VyTW9kdWxlXVxuICAgICAqIH0pXG4gICAgICogY2xhc3MgTXlNb2R1bGUge31cbiAgICAgKlxuICAgICAqIGxldCBtb2R1bGVSZWYgPSBwbGF0Zm9ybUJyb3dzZXIoKS5ib290c3RyYXBNb2R1bGUoTXlNb2R1bGUpO1xuICAgICAqIGBgYFxuICAgICAqXG4gICAgICovXG4gICAgYm9vdHN0cmFwTW9kdWxlKG1vZHVsZVR5cGUsIGNvbXBpbGVyT3B0aW9ucyA9IFtdKSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25zUmVkdWNlcih7fSwgY29tcGlsZXJPcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGNvbXBpbGVOZ01vZHVsZUZhY3RvcnkodGhpcy5pbmplY3Rvciwgb3B0aW9ucywgbW9kdWxlVHlwZSlcbiAgICAgICAgICAgIC50aGVuKG1vZHVsZUZhY3RvcnkgPT4gdGhpcy5ib290c3RyYXBNb2R1bGVGYWN0b3J5KG1vZHVsZUZhY3RvcnksIG9wdGlvbnMpKTtcbiAgICB9XG4gICAgX21vZHVsZURvQm9vdHN0cmFwKG1vZHVsZVJlZikge1xuICAgICAgICBjb25zdCBhcHBSZWYgPSBtb2R1bGVSZWYuaW5qZWN0b3IuZ2V0KEFwcGxpY2F0aW9uUmVmKTtcbiAgICAgICAgaWYgKG1vZHVsZVJlZi5fYm9vdHN0cmFwQ29tcG9uZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtb2R1bGVSZWYuX2Jvb3RzdHJhcENvbXBvbmVudHMuZm9yRWFjaChmID0+IGFwcFJlZi5ib290c3RyYXAoZikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1vZHVsZVJlZi5pbnN0YW5jZS5uZ0RvQm9vdHN0cmFwKSB7XG4gICAgICAgICAgICBtb2R1bGVSZWYuaW5zdGFuY2UubmdEb0Jvb3RzdHJhcChhcHBSZWYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gKHR5cGVvZiBuZ0Rldk1vZGUgPT09ICd1bmRlZmluZWQnIHx8IG5nRGV2TW9kZSkgP1xuICAgICAgICAgICAgICAgIGBUaGUgbW9kdWxlICR7c3RyaW5naWZ5KG1vZHVsZVJlZi5pbnN0YW5jZS5jb25zdHJ1Y3Rvcil9IHdhcyBib290c3RyYXBwZWQsIGAgK1xuICAgICAgICAgICAgICAgICAgICBgYnV0IGl0IGRvZXMgbm90IGRlY2xhcmUgXCJATmdNb2R1bGUuYm9vdHN0cmFwXCIgY29tcG9uZW50cyBub3IgYSBcIm5nRG9Cb290c3RyYXBcIiBtZXRob2QuIGAgK1xuICAgICAgICAgICAgICAgICAgICBgUGxlYXNlIGRlZmluZSBvbmUgb2YgdGhlc2UuYCA6XG4gICAgICAgICAgICAgICAgJyc7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDQwMyAvKiBCT09UU1RSQVBfQ09NUE9ORU5UU19OT1RfRk9VTkQgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbW9kdWxlcy5wdXNoKG1vZHVsZVJlZik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRvIGJlIGNhbGxlZCB3aGVuIHRoZSBwbGF0Zm9ybSBpcyBkZXN0cm95ZWQuXG4gICAgICovXG4gICAgb25EZXN0cm95KGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lMaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgcGxhdGZvcm0ge0BsaW5rIEluamVjdG9yfSwgd2hpY2ggaXMgdGhlIHBhcmVudCBpbmplY3RvciBmb3JcbiAgICAgKiBldmVyeSBBbmd1bGFyIGFwcGxpY2F0aW9uIG9uIHRoZSBwYWdlIGFuZCBwcm92aWRlcyBzaW5nbGV0b24gcHJvdmlkZXJzLlxuICAgICAqL1xuICAgIGdldCBpbmplY3RvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luamVjdG9yO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXN0cm95cyB0aGUgY3VycmVudCBBbmd1bGFyIHBsYXRmb3JtIGFuZCBhbGwgQW5ndWxhciBhcHBsaWNhdGlvbnMgb24gdGhlIHBhZ2UuXG4gICAgICogRGVzdHJveXMgYWxsIG1vZHVsZXMgYW5kIGxpc3RlbmVycyByZWdpc3RlcmVkIHdpdGggdGhlIHBsYXRmb3JtLlxuICAgICAqL1xuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLl9kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpID9cbiAgICAgICAgICAgICAgICAnVGhlIHBsYXRmb3JtIGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkIScgOlxuICAgICAgICAgICAgICAgICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcig0MDQgLyogQUxSRUFEWV9ERVNUUk9ZRURfUExBVEZPUk0gKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbW9kdWxlcy5zbGljZSgpLmZvckVhY2gobW9kdWxlID0+IG1vZHVsZS5kZXN0cm95KCkpO1xuICAgICAgICB0aGlzLl9kZXN0cm95TGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoKSk7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZCA9IHRydWU7XG4gICAgfVxuICAgIGdldCBkZXN0cm95ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXN0cm95ZWQ7XG4gICAgfVxufVxuUGxhdGZvcm1SZWYuybVmYWMgPSBmdW5jdGlvbiBQbGF0Zm9ybVJlZl9GYWN0b3J5KHQpIHsgcmV0dXJuIG5ldyAodCB8fCBQbGF0Zm9ybVJlZikoybXJtWluamVjdChJbmplY3RvcikpOyB9O1xuUGxhdGZvcm1SZWYuybVwcm92ID0gLypAX19QVVJFX18qLyDJtcm1ZGVmaW5lSW5qZWN0YWJsZSh7IHRva2VuOiBQbGF0Zm9ybVJlZiwgZmFjdG9yeTogUGxhdGZvcm1SZWYuybVmYWMgfSk7XG4oZnVuY3Rpb24gKCkgeyAodHlwZW9mIG5nRGV2TW9kZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBuZ0Rldk1vZGUpICYmIHNldENsYXNzTWV0YWRhdGEoUGxhdGZvcm1SZWYsIFt7XG4gICAgICAgIHR5cGU6IEluamVjdGFibGVcbiAgICB9XSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gW3sgdHlwZTogSW5qZWN0b3IgfV07IH0sIG51bGwpOyB9KSgpO1xuZnVuY3Rpb24gZ2V0Tmdab25lKG5nWm9uZU9wdGlvbiwgZXh0cmEpIHtcbiAgICBsZXQgbmdab25lO1xuICAgIGlmIChuZ1pvbmVPcHRpb24gPT09ICdub29wJykge1xuICAgICAgICBuZ1pvbmUgPSBuZXcgTm9vcE5nWm9uZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbmdab25lID0gKG5nWm9uZU9wdGlvbiA9PT0gJ3pvbmUuanMnID8gdW5kZWZpbmVkIDogbmdab25lT3B0aW9uKSB8fCBuZXcgTmdab25lKHtcbiAgICAgICAgICAgIGVuYWJsZUxvbmdTdGFja1RyYWNlOiB0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyA/IGZhbHNlIDogISFuZ0Rldk1vZGUsXG4gICAgICAgICAgICBzaG91bGRDb2FsZXNjZUV2ZW50Q2hhbmdlRGV0ZWN0aW9uOiAhIWV4dHJhPy5uZ1pvbmVFdmVudENvYWxlc2NpbmcsXG4gICAgICAgICAgICBzaG91bGRDb2FsZXNjZVJ1bkNoYW5nZURldGVjdGlvbjogISFleHRyYT8ubmdab25lUnVuQ29hbGVzY2luZ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5nWm9uZTtcbn1cbmZ1bmN0aW9uIF9jYWxsQW5kUmVwb3J0VG9FcnJvckhhbmRsZXIoZXJyb3JIYW5kbGVyLCBuZ1pvbmUsIGNhbGxiYWNrKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZShyZXN1bHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgbmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IGVycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlKSk7XG4gICAgICAgICAgICAgICAgLy8gcmV0aHJvdyBhcyB0aGUgZXhjZXB0aW9uIGhhbmRsZXIgbWlnaHQgbm90IGRvIGl0XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIG5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBlcnJvckhhbmRsZXIuaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAvLyByZXRocm93IGFzIHRoZSBleGNlcHRpb24gaGFuZGxlciBtaWdodCBub3QgZG8gaXRcbiAgICAgICAgdGhyb3cgZTtcbiAgICB9XG59XG5mdW5jdGlvbiBvcHRpb25zUmVkdWNlcihkc3QsIG9ianMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmpzKSkge1xuICAgICAgICBkc3QgPSBvYmpzLnJlZHVjZShvcHRpb25zUmVkdWNlciwgZHN0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRzdCA9IHsgLi4uZHN0LCAuLi5vYmpzIH07XG4gICAgfVxuICAgIHJldHVybiBkc3Q7XG59XG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGFuIEFuZ3VsYXIgYXBwbGljYXRpb24gcnVubmluZyBvbiBhIHBhZ2UuXG4gKlxuICogQHVzYWdlTm90ZXNcbiAqXG4gKiB7QGEgaXMtc3RhYmxlLWV4YW1wbGVzfVxuICogIyMjIGlzU3RhYmxlIGV4YW1wbGVzIGFuZCBjYXZlYXRzXG4gKlxuICogTm90ZSB0d28gaW1wb3J0YW50IHBvaW50cyBhYm91dCBgaXNTdGFibGVgLCBkZW1vbnN0cmF0ZWQgaW4gdGhlIGV4YW1wbGVzIGJlbG93OlxuICogLSB0aGUgYXBwbGljYXRpb24gd2lsbCBuZXZlciBiZSBzdGFibGUgaWYgeW91IHN0YXJ0IGFueSBraW5kXG4gKiBvZiByZWN1cnJlbnQgYXN5bmNocm9ub3VzIHRhc2sgd2hlbiB0aGUgYXBwbGljYXRpb24gc3RhcnRzXG4gKiAoZm9yIGV4YW1wbGUgZm9yIGEgcG9sbGluZyBwcm9jZXNzLCBzdGFydGVkIHdpdGggYSBgc2V0SW50ZXJ2YWxgLCBhIGBzZXRUaW1lb3V0YFxuICogb3IgdXNpbmcgUnhKUyBvcGVyYXRvcnMgbGlrZSBgaW50ZXJ2YWxgKTtcbiAqIC0gdGhlIGBpc1N0YWJsZWAgT2JzZXJ2YWJsZSBydW5zIG91dHNpZGUgb2YgdGhlIEFuZ3VsYXIgem9uZS5cbiAqXG4gKiBMZXQncyBpbWFnaW5lIHRoYXQgeW91IHN0YXJ0IGEgcmVjdXJyZW50IHRhc2tcbiAqIChoZXJlIGluY3JlbWVudGluZyBhIGNvdW50ZXIsIHVzaW5nIFJ4SlMgYGludGVydmFsYCksXG4gKiBhbmQgYXQgdGhlIHNhbWUgdGltZSBzdWJzY3JpYmUgdG8gYGlzU3RhYmxlYC5cbiAqXG4gKiBgYGBcbiAqIGNvbnN0cnVjdG9yKGFwcFJlZjogQXBwbGljYXRpb25SZWYpIHtcbiAqICAgYXBwUmVmLmlzU3RhYmxlLnBpcGUoXG4gKiAgICAgIGZpbHRlcihzdGFibGUgPT4gc3RhYmxlKVxuICogICApLnN1YnNjcmliZSgoKSA9PiBjb25zb2xlLmxvZygnQXBwIGlzIHN0YWJsZSBub3cnKTtcbiAqICAgaW50ZXJ2YWwoMTAwMCkuc3Vic2NyaWJlKGNvdW50ZXIgPT4gY29uc29sZS5sb2coY291bnRlcikpO1xuICogfVxuICogYGBgXG4gKiBJbiB0aGlzIGV4YW1wbGUsIGBpc1N0YWJsZWAgd2lsbCBuZXZlciBlbWl0IGB0cnVlYCxcbiAqIGFuZCB0aGUgdHJhY2UgXCJBcHAgaXMgc3RhYmxlIG5vd1wiIHdpbGwgbmV2ZXIgZ2V0IGxvZ2dlZC5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byBleGVjdXRlIHNvbWV0aGluZyB3aGVuIHRoZSBhcHAgaXMgc3RhYmxlLFxuICogeW91IGhhdmUgdG8gd2FpdCBmb3IgdGhlIGFwcGxpY2F0aW9uIHRvIGJlIHN0YWJsZVxuICogYmVmb3JlIHN0YXJ0aW5nIHlvdXIgcG9sbGluZyBwcm9jZXNzLlxuICpcbiAqIGBgYFxuICogY29uc3RydWN0b3IoYXBwUmVmOiBBcHBsaWNhdGlvblJlZikge1xuICogICBhcHBSZWYuaXNTdGFibGUucGlwZShcbiAqICAgICBmaXJzdChzdGFibGUgPT4gc3RhYmxlKSxcbiAqICAgICB0YXAoc3RhYmxlID0+IGNvbnNvbGUubG9nKCdBcHAgaXMgc3RhYmxlIG5vdycpKSxcbiAqICAgICBzd2l0Y2hNYXAoKCkgPT4gaW50ZXJ2YWwoMTAwMCkpXG4gKiAgICkuc3Vic2NyaWJlKGNvdW50ZXIgPT4gY29uc29sZS5sb2coY291bnRlcikpO1xuICogfVxuICogYGBgXG4gKiBJbiB0aGlzIGV4YW1wbGUsIHRoZSB0cmFjZSBcIkFwcCBpcyBzdGFibGUgbm93XCIgd2lsbCBiZSBsb2dnZWRcbiAqIGFuZCB0aGVuIHRoZSBjb3VudGVyIHN0YXJ0cyBpbmNyZW1lbnRpbmcgZXZlcnkgc2Vjb25kLlxuICpcbiAqIE5vdGUgYWxzbyB0aGF0IHRoaXMgT2JzZXJ2YWJsZSBydW5zIG91dHNpZGUgb2YgdGhlIEFuZ3VsYXIgem9uZSxcbiAqIHdoaWNoIG1lYW5zIHRoYXQgdGhlIGNvZGUgaW4gdGhlIHN1YnNjcmlwdGlvblxuICogdG8gdGhpcyBPYnNlcnZhYmxlIHdpbGwgbm90IHRyaWdnZXIgdGhlIGNoYW5nZSBkZXRlY3Rpb24uXG4gKlxuICogTGV0J3MgaW1hZ2luZSB0aGF0IGluc3RlYWQgb2YgbG9nZ2luZyB0aGUgY291bnRlciB2YWx1ZSxcbiAqIHlvdSB1cGRhdGUgYSBmaWVsZCBvZiB5b3VyIGNvbXBvbmVudFxuICogYW5kIGRpc3BsYXkgaXQgaW4gaXRzIHRlbXBsYXRlLlxuICpcbiAqIGBgYFxuICogY29uc3RydWN0b3IoYXBwUmVmOiBBcHBsaWNhdGlvblJlZikge1xuICogICBhcHBSZWYuaXNTdGFibGUucGlwZShcbiAqICAgICBmaXJzdChzdGFibGUgPT4gc3RhYmxlKSxcbiAqICAgICBzd2l0Y2hNYXAoKCkgPT4gaW50ZXJ2YWwoMTAwMCkpXG4gKiAgICkuc3Vic2NyaWJlKGNvdW50ZXIgPT4gdGhpcy52YWx1ZSA9IGNvdW50ZXIpO1xuICogfVxuICogYGBgXG4gKiBBcyB0aGUgYGlzU3RhYmxlYCBPYnNlcnZhYmxlIHJ1bnMgb3V0c2lkZSB0aGUgem9uZSxcbiAqIHRoZSBgdmFsdWVgIGZpZWxkIHdpbGwgYmUgdXBkYXRlZCBwcm9wZXJseSxcbiAqIGJ1dCB0aGUgdGVtcGxhdGUgd2lsbCBub3QgYmUgcmVmcmVzaGVkIVxuICpcbiAqIFlvdSdsbCBoYXZlIHRvIG1hbnVhbGx5IHRyaWdnZXIgdGhlIGNoYW5nZSBkZXRlY3Rpb24gdG8gdXBkYXRlIHRoZSB0ZW1wbGF0ZS5cbiAqXG4gKiBgYGBcbiAqIGNvbnN0cnVjdG9yKGFwcFJlZjogQXBwbGljYXRpb25SZWYsIGNkOiBDaGFuZ2VEZXRlY3RvclJlZikge1xuICogICBhcHBSZWYuaXNTdGFibGUucGlwZShcbiAqICAgICBmaXJzdChzdGFibGUgPT4gc3RhYmxlKSxcbiAqICAgICBzd2l0Y2hNYXAoKCkgPT4gaW50ZXJ2YWwoMTAwMCkpXG4gKiAgICkuc3Vic2NyaWJlKGNvdW50ZXIgPT4ge1xuICogICAgIHRoaXMudmFsdWUgPSBjb3VudGVyO1xuICogICAgIGNkLmRldGVjdENoYW5nZXMoKTtcbiAqICAgfSk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBPciBtYWtlIHRoZSBzdWJzY3JpcHRpb24gY2FsbGJhY2sgcnVuIGluc2lkZSB0aGUgem9uZS5cbiAqXG4gKiBgYGBcbiAqIGNvbnN0cnVjdG9yKGFwcFJlZjogQXBwbGljYXRpb25SZWYsIHpvbmU6IE5nWm9uZSkge1xuICogICBhcHBSZWYuaXNTdGFibGUucGlwZShcbiAqICAgICBmaXJzdChzdGFibGUgPT4gc3RhYmxlKSxcbiAqICAgICBzd2l0Y2hNYXAoKCkgPT4gaW50ZXJ2YWwoMTAwMCkpXG4gKiAgICkuc3Vic2NyaWJlKGNvdW50ZXIgPT4gem9uZS5ydW4oKCkgPT4gdGhpcy52YWx1ZSA9IGNvdW50ZXIpKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgQXBwbGljYXRpb25SZWYge1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjb25zdHJ1Y3Rvcihfem9uZSwgX2luamVjdG9yLCBfZXhjZXB0aW9uSGFuZGxlciwgX2NvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgX2luaXRTdGF0dXMpIHtcbiAgICAgICAgdGhpcy5fem9uZSA9IF96b25lO1xuICAgICAgICB0aGlzLl9pbmplY3RvciA9IF9pbmplY3RvcjtcbiAgICAgICAgdGhpcy5fZXhjZXB0aW9uSGFuZGxlciA9IF9leGNlcHRpb25IYW5kbGVyO1xuICAgICAgICB0aGlzLl9jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgPSBfY29tcG9uZW50RmFjdG9yeVJlc29sdmVyO1xuICAgICAgICB0aGlzLl9pbml0U3RhdHVzID0gX2luaXRTdGF0dXM7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fYm9vdHN0cmFwTGlzdGVuZXJzID0gW107XG4gICAgICAgIHRoaXMuX3ZpZXdzID0gW107XG4gICAgICAgIHRoaXMuX3J1bm5pbmdUaWNrID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3N0YWJsZSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSBsaXN0IG9mIGNvbXBvbmVudCB0eXBlcyByZWdpc3RlcmVkIHRvIHRoaXMgYXBwbGljYXRpb24uXG4gICAgICAgICAqIFRoaXMgbGlzdCBpcyBwb3B1bGF0ZWQgZXZlbiBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBjcmVhdGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb21wb25lbnRUeXBlcyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGEgbGlzdCBvZiBjb21wb25lbnRzIHJlZ2lzdGVyZWQgdG8gdGhpcyBhcHBsaWNhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29tcG9uZW50cyA9IFtdO1xuICAgICAgICB0aGlzLl9vbk1pY3JvdGFza0VtcHR5U3Vic2NyaXB0aW9uID0gdGhpcy5fem9uZS5vbk1pY3JvdGFza0VtcHR5LnN1YnNjcmliZSh7XG4gICAgICAgICAgICBuZXh0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fem9uZS5ydW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpY2soKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGlzQ3VycmVudGx5U3RhYmxlID0gbmV3IE9ic2VydmFibGUoKG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9zdGFibGUgPSB0aGlzLl96b25lLmlzU3RhYmxlICYmICF0aGlzLl96b25lLmhhc1BlbmRpbmdNYWNyb3Rhc2tzICYmXG4gICAgICAgICAgICAgICAgIXRoaXMuX3pvbmUuaGFzUGVuZGluZ01pY3JvdGFza3M7XG4gICAgICAgICAgICB0aGlzLl96b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KHRoaXMuX3N0YWJsZSk7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaXNTdGFibGUgPSBuZXcgT2JzZXJ2YWJsZSgob2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgc3Vic2NyaXB0aW9uIHRvIG9uU3RhYmxlIG91dHNpZGUgdGhlIEFuZ3VsYXIgWm9uZSBzbyB0aGF0XG4gICAgICAgICAgICAvLyB0aGUgY2FsbGJhY2sgaXMgcnVuIG91dHNpZGUgdGhlIEFuZ3VsYXIgWm9uZS5cbiAgICAgICAgICAgIGxldCBzdGFibGVTdWI7XG4gICAgICAgICAgICB0aGlzLl96b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgICAgICAgICAgICBzdGFibGVTdWIgPSB0aGlzLl96b25lLm9uU3RhYmxlLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIE5nWm9uZS5hc3NlcnROb3RJbkFuZ3VsYXJab25lKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhlcmUgYXJlIG5vIHBlbmRpbmcgbWFjcm8vbWljcm8gdGFza3MgaW4gdGhlIG5leHQgdGlja1xuICAgICAgICAgICAgICAgICAgICAvLyB0byBhbGxvdyBmb3IgTmdab25lIHRvIHVwZGF0ZSB0aGUgc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlTWljcm9UYXNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5fc3RhYmxlICYmICF0aGlzLl96b25lLmhhc1BlbmRpbmdNYWNyb3Rhc2tzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuX3pvbmUuaGFzUGVuZGluZ01pY3JvdGFza3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLm5leHQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCB1bnN0YWJsZVN1YiA9IHRoaXMuX3pvbmUub25VbnN0YWJsZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIE5nWm9uZS5hc3NlcnRJbkFuZ3VsYXJab25lKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN0YWJsZVN1Yi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIHVuc3RhYmxlU3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pc1N0YWJsZSA9XG4gICAgICAgICAgICBtZXJnZSQxKGlzQ3VycmVudGx5U3RhYmxlLCBpc1N0YWJsZS5waXBlKHNoYXJlKCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQm9vdHN0cmFwIGEgY29tcG9uZW50IG9udG8gdGhlIGVsZW1lbnQgaWRlbnRpZmllZCBieSBpdHMgc2VsZWN0b3Igb3IsIG9wdGlvbmFsbHksIHRvIGFcbiAgICAgKiBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEB1c2FnZU5vdGVzXG4gICAgICogIyMjIEJvb3RzdHJhcCBwcm9jZXNzXG4gICAgICpcbiAgICAgKiBXaGVuIGJvb3RzdHJhcHBpbmcgYSBjb21wb25lbnQsIEFuZ3VsYXIgbW91bnRzIGl0IG9udG8gYSB0YXJnZXQgRE9NIGVsZW1lbnRcbiAgICAgKiBhbmQga2lja3Mgb2ZmIGF1dG9tYXRpYyBjaGFuZ2UgZGV0ZWN0aW9uLiBUaGUgdGFyZ2V0IERPTSBlbGVtZW50IGNhbiBiZVxuICAgICAqIHByb3ZpZGVkIHVzaW5nIHRoZSBgcm9vdFNlbGVjdG9yT3JOb2RlYCBhcmd1bWVudC5cbiAgICAgKlxuICAgICAqIElmIHRoZSB0YXJnZXQgRE9NIGVsZW1lbnQgaXMgbm90IHByb3ZpZGVkLCBBbmd1bGFyIHRyaWVzIHRvIGZpbmQgb25lIG9uIGEgcGFnZVxuICAgICAqIHVzaW5nIHRoZSBgc2VsZWN0b3JgIG9mIHRoZSBjb21wb25lbnQgdGhhdCBpcyBiZWluZyBib290c3RyYXBwZWRcbiAgICAgKiAoZmlyc3QgbWF0Y2hlZCBlbGVtZW50IGlzIHVzZWQpLlxuICAgICAqXG4gICAgICogIyMjIEV4YW1wbGVcbiAgICAgKlxuICAgICAqIEdlbmVyYWxseSwgd2UgZGVmaW5lIHRoZSBjb21wb25lbnQgdG8gYm9vdHN0cmFwIGluIHRoZSBgYm9vdHN0cmFwYCBhcnJheSBvZiBgTmdNb2R1bGVgLFxuICAgICAqIGJ1dCBpdCByZXF1aXJlcyB1cyB0byBrbm93IHRoZSBjb21wb25lbnQgd2hpbGUgd3JpdGluZyB0aGUgYXBwbGljYXRpb24gY29kZS5cbiAgICAgKlxuICAgICAqIEltYWdpbmUgYSBzaXR1YXRpb24gd2hlcmUgd2UgaGF2ZSB0byB3YWl0IGZvciBhbiBBUEkgY2FsbCB0byBkZWNpZGUgYWJvdXQgdGhlIGNvbXBvbmVudCB0b1xuICAgICAqIGJvb3RzdHJhcC4gV2UgY2FuIHVzZSB0aGUgYG5nRG9Cb290c3RyYXBgIGhvb2sgb2YgdGhlIGBOZ01vZHVsZWAgYW5kIGNhbGwgdGhpcyBtZXRob2QgdG9cbiAgICAgKiBkeW5hbWljYWxseSBib290c3RyYXAgYSBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiB7QGV4YW1wbGUgY29yZS90cy9wbGF0Zm9ybS9wbGF0Zm9ybS50cyByZWdpb249J2NvbXBvbmVudFNlbGVjdG9yJ31cbiAgICAgKlxuICAgICAqIE9wdGlvbmFsbHksIGEgY29tcG9uZW50IGNhbiBiZSBtb3VudGVkIG9udG8gYSBET00gZWxlbWVudCB0aGF0IGRvZXMgbm90IG1hdGNoIHRoZVxuICAgICAqIHNlbGVjdG9yIG9mIHRoZSBib290c3RyYXBwZWQgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogSW4gdGhlIGZvbGxvd2luZyBleGFtcGxlLCB3ZSBhcmUgcHJvdmlkaW5nIGEgQ1NTIHNlbGVjdG9yIHRvIG1hdGNoIHRoZSB0YXJnZXQgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIHtAZXhhbXBsZSBjb3JlL3RzL3BsYXRmb3JtL3BsYXRmb3JtLnRzIHJlZ2lvbj0nY3NzU2VsZWN0b3InfVxuICAgICAqXG4gICAgICogV2hpbGUgaW4gdGhpcyBleGFtcGxlLCB3ZSBhcmUgcHJvdmlkaW5nIHJlZmVyZW5jZSB0byBhIERPTSBub2RlLlxuICAgICAqXG4gICAgICoge0BleGFtcGxlIGNvcmUvdHMvcGxhdGZvcm0vcGxhdGZvcm0udHMgcmVnaW9uPSdkb21Ob2RlJ31cbiAgICAgKi9cbiAgICBib290c3RyYXAoY29tcG9uZW50T3JGYWN0b3J5LCByb290U2VsZWN0b3JPck5vZGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pbml0U3RhdHVzLmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpID9cbiAgICAgICAgICAgICAgICAnQ2Fubm90IGJvb3RzdHJhcCBhcyB0aGVyZSBhcmUgc3RpbGwgYXN5bmNocm9ub3VzIGluaXRpYWxpemVycyBydW5uaW5nLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ0Jvb3RzdHJhcCBjb21wb25lbnRzIGluIHRoZSBgbmdEb0Jvb3RzdHJhcGAgbWV0aG9kIG9mIHRoZSByb290IG1vZHVsZS4nIDpcbiAgICAgICAgICAgICAgICAnJztcbiAgICAgICAgICAgIHRocm93IG5ldyBSdW50aW1lRXJyb3IoNDA1IC8qIEFTWU5DX0lOSVRJQUxJWkVSU19TVElMTF9SVU5OSU5HICovLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjb21wb25lbnRGYWN0b3J5O1xuICAgICAgICBpZiAoY29tcG9uZW50T3JGYWN0b3J5IGluc3RhbmNlb2YgQ29tcG9uZW50RmFjdG9yeSQxKSB7XG4gICAgICAgICAgICBjb21wb25lbnRGYWN0b3J5ID0gY29tcG9uZW50T3JGYWN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29tcG9uZW50RmFjdG9yeSA9XG4gICAgICAgICAgICAgICAgdGhpcy5fY29tcG9uZW50RmFjdG9yeVJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudE9yRmFjdG9yeSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb21wb25lbnRUeXBlcy5wdXNoKGNvbXBvbmVudEZhY3RvcnkuY29tcG9uZW50VHlwZSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIGZhY3RvcnkgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXJyZW50IG1vZHVsZSBpZiBpdCdzIG5vdCBib3VuZCB0byBzb21lIG90aGVyXG4gICAgICAgIGNvbnN0IG5nTW9kdWxlID0gaXNCb3VuZFRvTW9kdWxlKGNvbXBvbmVudEZhY3RvcnkpID8gdW5kZWZpbmVkIDogdGhpcy5faW5qZWN0b3IuZ2V0KE5nTW9kdWxlUmVmJDEpO1xuICAgICAgICBjb25zdCBzZWxlY3Rvck9yTm9kZSA9IHJvb3RTZWxlY3Rvck9yTm9kZSB8fCBjb21wb25lbnRGYWN0b3J5LnNlbGVjdG9yO1xuICAgICAgICBjb25zdCBjb21wUmVmID0gY29tcG9uZW50RmFjdG9yeS5jcmVhdGUoSW5qZWN0b3IuTlVMTCwgW10sIHNlbGVjdG9yT3JOb2RlLCBuZ01vZHVsZSk7XG4gICAgICAgIGNvbnN0IG5hdGl2ZUVsZW1lbnQgPSBjb21wUmVmLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IHRlc3RhYmlsaXR5ID0gY29tcFJlZi5pbmplY3Rvci5nZXQoVGVzdGFiaWxpdHksIG51bGwpO1xuICAgICAgICBjb25zdCB0ZXN0YWJpbGl0eVJlZ2lzdHJ5ID0gdGVzdGFiaWxpdHkgJiYgY29tcFJlZi5pbmplY3Rvci5nZXQoVGVzdGFiaWxpdHlSZWdpc3RyeSk7XG4gICAgICAgIGlmICh0ZXN0YWJpbGl0eSAmJiB0ZXN0YWJpbGl0eVJlZ2lzdHJ5KSB7XG4gICAgICAgICAgICB0ZXN0YWJpbGl0eVJlZ2lzdHJ5LnJlZ2lzdGVyQXBwbGljYXRpb24obmF0aXZlRWxlbWVudCwgdGVzdGFiaWxpdHkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBSZWYub25EZXN0cm95KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoVmlldyhjb21wUmVmLmhvc3RWaWV3KTtcbiAgICAgICAgICAgIHJlbW92ZSh0aGlzLmNvbXBvbmVudHMsIGNvbXBSZWYpO1xuICAgICAgICAgICAgaWYgKHRlc3RhYmlsaXR5UmVnaXN0cnkpIHtcbiAgICAgICAgICAgICAgICB0ZXN0YWJpbGl0eVJlZ2lzdHJ5LnVucmVnaXN0ZXJBcHBsaWNhdGlvbihuYXRpdmVFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2xvYWRDb21wb25lbnQoY29tcFJlZik7XG4gICAgICAgIGlmICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IF9jb25zb2xlID0gdGhpcy5faW5qZWN0b3IuZ2V0KENvbnNvbGUpO1xuICAgICAgICAgICAgX2NvbnNvbGUubG9nKGBBbmd1bGFyIGlzIHJ1bm5pbmcgaW4gZGV2ZWxvcG1lbnQgbW9kZS4gQ2FsbCBlbmFibGVQcm9kTW9kZSgpIHRvIGVuYWJsZSBwcm9kdWN0aW9uIG1vZGUuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBSZWY7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZSB0aGlzIG1ldGhvZCB0byBleHBsaWNpdGx5IHByb2Nlc3MgY2hhbmdlIGRldGVjdGlvbiBhbmQgaXRzIHNpZGUtZWZmZWN0cy5cbiAgICAgKlxuICAgICAqIEluIGRldmVsb3BtZW50IG1vZGUsIGB0aWNrKClgIGFsc28gcGVyZm9ybXMgYSBzZWNvbmQgY2hhbmdlIGRldGVjdGlvbiBjeWNsZSB0byBlbnN1cmUgdGhhdCBub1xuICAgICAqIGZ1cnRoZXIgY2hhbmdlcyBhcmUgZGV0ZWN0ZWQuIElmIGFkZGl0aW9uYWwgY2hhbmdlcyBhcmUgcGlja2VkIHVwIGR1cmluZyB0aGlzIHNlY29uZCBjeWNsZSxcbiAgICAgKiBiaW5kaW5ncyBpbiB0aGUgYXBwIGhhdmUgc2lkZS1lZmZlY3RzIHRoYXQgY2Fubm90IGJlIHJlc29sdmVkIGluIGEgc2luZ2xlIGNoYW5nZSBkZXRlY3Rpb25cbiAgICAgKiBwYXNzLlxuICAgICAqIEluIHRoaXMgY2FzZSwgQW5ndWxhciB0aHJvd3MgYW4gZXJyb3IsIHNpbmNlIGFuIEFuZ3VsYXIgYXBwbGljYXRpb24gY2FuIG9ubHkgaGF2ZSBvbmUgY2hhbmdlXG4gICAgICogZGV0ZWN0aW9uIHBhc3MgZHVyaW5nIHdoaWNoIGFsbCBjaGFuZ2UgZGV0ZWN0aW9uIG11c3QgY29tcGxldGUuXG4gICAgICovXG4gICAgdGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3J1bm5pbmdUaWNrKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAodHlwZW9mIG5nRGV2TW9kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmdEZXZNb2RlKSA/XG4gICAgICAgICAgICAgICAgJ0FwcGxpY2F0aW9uUmVmLnRpY2sgaXMgY2FsbGVkIHJlY3Vyc2l2ZWx5JyA6XG4gICAgICAgICAgICAgICAgJyc7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDEwMSAvKiBSRUNVUlNJVkVfQVBQTElDQVRJT05fUkVGX1RJQ0sgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX3J1bm5pbmdUaWNrID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IHZpZXcgb2YgdGhpcy5fdmlld3MpIHtcbiAgICAgICAgICAgICAgICB2aWV3LmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB2aWV3IG9mIHRoaXMuX3ZpZXdzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2hlY2tOb0NoYW5nZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEF0dGVudGlvbjogRG9uJ3QgcmV0aHJvdyBhcyBpdCBjb3VsZCBjYW5jZWwgc3Vic2NyaXB0aW9ucyB0byBPYnNlcnZhYmxlcyFcbiAgICAgICAgICAgIHRoaXMuX3pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy5fZXhjZXB0aW9uSGFuZGxlci5oYW5kbGVFcnJvcihlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLl9ydW5uaW5nVGljayA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgdmlldyBzbyB0aGF0IGl0IHdpbGwgYmUgZGlydHkgY2hlY2tlZC5cbiAgICAgKiBUaGUgdmlldyB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgZGV0YWNoZWQgd2hlbiBpdCBpcyBkZXN0cm95ZWQuXG4gICAgICogVGhpcyB3aWxsIHRocm93IGlmIHRoZSB2aWV3IGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gYSBWaWV3Q29udGFpbmVyLlxuICAgICAqL1xuICAgIGF0dGFjaFZpZXcodmlld1JlZikge1xuICAgICAgICBjb25zdCB2aWV3ID0gdmlld1JlZjtcbiAgICAgICAgdGhpcy5fdmlld3MucHVzaCh2aWV3KTtcbiAgICAgICAgdmlldy5hdHRhY2hUb0FwcFJlZih0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0YWNoZXMgYSB2aWV3IGZyb20gZGlydHkgY2hlY2tpbmcgYWdhaW4uXG4gICAgICovXG4gICAgZGV0YWNoVmlldyh2aWV3UmVmKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB2aWV3UmVmO1xuICAgICAgICByZW1vdmUodGhpcy5fdmlld3MsIHZpZXcpO1xuICAgICAgICB2aWV3LmRldGFjaEZyb21BcHBSZWYoKTtcbiAgICB9XG4gICAgX2xvYWRDb21wb25lbnQoY29tcG9uZW50UmVmKSB7XG4gICAgICAgIHRoaXMuYXR0YWNoVmlldyhjb21wb25lbnRSZWYuaG9zdFZpZXcpO1xuICAgICAgICB0aGlzLnRpY2soKTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRzLnB1c2goY29tcG9uZW50UmVmKTtcbiAgICAgICAgLy8gR2V0IHRoZSBsaXN0ZW5lcnMgbGF6aWx5IHRvIHByZXZlbnQgREkgY3ljbGVzLlxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9pbmplY3Rvci5nZXQoQVBQX0JPT1RTVFJBUF9MSVNURU5FUiwgW10pLmNvbmNhdCh0aGlzLl9ib290c3RyYXBMaXN0ZW5lcnMpO1xuICAgICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKGNvbXBvbmVudFJlZikpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3ZpZXdzLnNsaWNlKCkuZm9yRWFjaCgodmlldykgPT4gdmlldy5kZXN0cm95KCkpO1xuICAgICAgICB0aGlzLl9vbk1pY3JvdGFza0VtcHR5U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBhdHRhY2hlZCB2aWV3cy5cbiAgICAgKi9cbiAgICBnZXQgdmlld0NvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmlld3MubGVuZ3RoO1xuICAgIH1cbn1cbkFwcGxpY2F0aW9uUmVmLsm1ZmFjID0gZnVuY3Rpb24gQXBwbGljYXRpb25SZWZfRmFjdG9yeSh0KSB7IHJldHVybiBuZXcgKHQgfHwgQXBwbGljYXRpb25SZWYpKMm1ybVpbmplY3QoTmdab25lKSwgybXJtWluamVjdChJbmplY3RvciksIMm1ybVpbmplY3QoRXJyb3JIYW5kbGVyKSwgybXJtWluamVjdChDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIkMSksIMm1ybVpbmplY3QoQXBwbGljYXRpb25Jbml0U3RhdHVzKSk7IH07XG5BcHBsaWNhdGlvblJlZi7JtXByb3YgPSAvKkBfX1BVUkVfXyovIMm1ybVkZWZpbmVJbmplY3RhYmxlKHsgdG9rZW46IEFwcGxpY2F0aW9uUmVmLCBmYWN0b3J5OiBBcHBsaWNhdGlvblJlZi7JtWZhYywgcHJvdmlkZWRJbjogJ3Jvb3QnIH0pO1xuKGZ1bmN0aW9uICgpIHsgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBzZXRDbGFzc01ldGFkYXRhKEFwcGxpY2F0aW9uUmVmLCBbe1xuICAgICAgICB0eXBlOiBJbmplY3RhYmxlLFxuICAgICAgICBhcmdzOiBbeyBwcm92aWRlZEluOiAncm9vdCcgfV1cbiAgICB9XSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gW3sgdHlwZTogTmdab25lIH0sIHsgdHlwZTogSW5qZWN0b3IgfSwgeyB0eXBlOiBFcnJvckhhbmRsZXIgfSwgeyB0eXBlOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIkMSB9LCB7IHR5cGU6IEFwcGxpY2F0aW9uSW5pdFN0YXR1cyB9XTsgfSwgbnVsbCk7IH0pKCk7XG5mdW5jdGlvbiByZW1vdmUobGlzdCwgZWwpIHtcbiAgICBjb25zdCBpbmRleCA9IGxpc3QuaW5kZXhPZihlbCk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgbGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9sYXN0RGVmaW5lZChhcmdzKSB7XG4gICAgZm9yIChsZXQgaSA9IGFyZ3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKGFyZ3NbaV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3NbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9tZXJnZUFycmF5cyhwYXJ0cykge1xuICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgIHBhcnRzLmZvckVhY2goKHBhcnQpID0+IHBhcnQgJiYgcmVzdWx0LnB1c2goLi4ucGFydCkpO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBUaGlzIGZpbGUgaXMgdXNlZCB0byBjb250cm9sIGlmIHRoZSBkZWZhdWx0IHJlbmRlcmluZyBwaXBlbGluZSBzaG91bGQgYmUgYFZpZXdFbmdpbmVgIG9yIGBJdnlgLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGhvdyB0byBydW4gYW5kIGRlYnVnIHRlc3RzIHdpdGggZWl0aGVyIEl2eSBvciBWaWV3IEVuZ2luZSAobGVnYWN5KSxcbiAqIHBsZWFzZSBzZWUgW0JBWkVMLm1kXSguL2RvY3MvQkFaRUwubWQpLlxuICovXG5sZXQgX2Rldk1vZGUgPSB0cnVlO1xubGV0IF9ydW5Nb2RlTG9ja2VkID0gZmFsc2U7XG4vKipcbiAqIFJldHVybnMgd2hldGhlciBBbmd1bGFyIGlzIGluIGRldmVsb3BtZW50IG1vZGUuIEFmdGVyIGNhbGxlZCBvbmNlLFxuICogdGhlIHZhbHVlIGlzIGxvY2tlZCBhbmQgd29uJ3QgY2hhbmdlIGFueSBtb3JlLlxuICpcbiAqIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdHJ1ZSwgdW5sZXNzIGEgdXNlciBjYWxscyBgZW5hYmxlUHJvZE1vZGVgIGJlZm9yZSBjYWxsaW5nIHRoaXMuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5mdW5jdGlvbiBpc0Rldk1vZGUoKSB7XG4gICAgX3J1bk1vZGVMb2NrZWQgPSB0cnVlO1xuICAgIHJldHVybiBfZGV2TW9kZTtcbn1cbi8qKlxuICogRGlzYWJsZSBBbmd1bGFyJ3MgZGV2ZWxvcG1lbnQgbW9kZSwgd2hpY2ggdHVybnMgb2ZmIGFzc2VydGlvbnMgYW5kIG90aGVyXG4gKiBjaGVja3Mgd2l0aGluIHRoZSBmcmFtZXdvcmsuXG4gKlxuICogT25lIGltcG9ydGFudCBhc3NlcnRpb24gdGhpcyBkaXNhYmxlcyB2ZXJpZmllcyB0aGF0IGEgY2hhbmdlIGRldGVjdGlvbiBwYXNzXG4gKiBkb2VzIG5vdCByZXN1bHQgaW4gYWRkaXRpb25hbCBjaGFuZ2VzIHRvIGFueSBiaW5kaW5ncyAoYWxzbyBrbm93biBhc1xuICogdW5pZGlyZWN0aW9uYWwgZGF0YSBmbG93KS5cbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmZ1bmN0aW9uIGVuYWJsZVByb2RNb2RlKCkge1xuICAgIGlmIChfcnVuTW9kZUxvY2tlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBlbmFibGUgcHJvZCBtb2RlIGFmdGVyIHBsYXRmb3JtIHNldHVwLicpO1xuICAgIH1cbiAgICAvLyBUaGUgYmVsb3cgY2hlY2sgaXMgdGhlcmUgc28gd2hlbiBuZ0Rldk1vZGUgaXMgc2V0IHZpYSB0ZXJzZXJcbiAgICAvLyBgZ2xvYmFsWyduZ0Rldk1vZGUnXSA9IGZhbHNlO2AgaXMgYWxzbyBkcm9wcGVkLlxuICAgIGlmICh0eXBlb2YgbmdEZXZNb2RlID09PSB1bmRlZmluZWQgfHwgISFuZ0Rldk1vZGUpIHtcbiAgICAgICAgX2dsb2JhbFsnbmdEZXZNb2RlJ10gPSBmYWxzZTtcbiAgICB9XG4gICAgX2Rldk1vZGUgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgTmdNb2R1bGVGYWN0b3J5IHdpdGggdGhlIGdpdmVuIGlkIChzcGVjaWZpZWQgdXNpbmcgW0BOZ01vZHVsZS5pZFxuICogZmllbGRdKGFwaS9jb3JlL05nTW9kdWxlI2lkKSksIGlmIGl0IGV4aXN0cyBhbmQgaGFzIGJlZW4gbG9hZGVkLiBGYWN0b3JpZXMgZm9yIE5nTW9kdWxlcyB0aGF0IGRvXG4gKiBub3Qgc3BlY2lmeSBhbiBgaWRgIGNhbm5vdCBiZSByZXRyaWV2ZWQuIFRocm93cyBpZiBhbiBOZ01vZHVsZSBjYW5ub3QgYmUgZm91bmQuXG4gKiBAcHVibGljQXBpXG4gKiBAZGVwcmVjYXRlZCBVc2UgYGdldE5nTW9kdWxlQnlJZGAgaW5zdGVhZC5cbiAqL1xuZnVuY3Rpb24gZ2V0TW9kdWxlRmFjdG9yeShpZCkge1xuICAgIGNvbnN0IHR5cGUgPSBnZXRSZWdpc3RlcmVkTmdNb2R1bGVUeXBlKGlkKTtcbiAgICBpZiAoIXR5cGUpXG4gICAgICAgIHRocm93IG5vTW9kdWxlRXJyb3IoaWQpO1xuICAgIHJldHVybiBuZXcgTmdNb2R1bGVGYWN0b3J5KHR5cGUpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBOZ01vZHVsZSBjbGFzcyB3aXRoIHRoZSBnaXZlbiBpZCAoc3BlY2lmaWVkIHVzaW5nIFtATmdNb2R1bGUuaWRcbiAqIGZpZWxkXShhcGkvY29yZS9OZ01vZHVsZSNpZCkpLCBpZiBpdCBleGlzdHMgYW5kIGhhcyBiZWVuIGxvYWRlZC4gQ2xhc3NlcyBmb3IgTmdNb2R1bGVzIHRoYXQgZG9cbiAqIG5vdCBzcGVjaWZ5IGFuIGBpZGAgY2Fubm90IGJlIHJldHJpZXZlZC4gVGhyb3dzIGlmIGFuIE5nTW9kdWxlIGNhbm5vdCBiZSBmb3VuZC5cbiAqIEBwdWJsaWNBcGlcbiAqL1xuZnVuY3Rpb24gZ2V0TmdNb2R1bGVCeUlkKGlkKSB7XG4gICAgY29uc3QgdHlwZSA9IGdldFJlZ2lzdGVyZWROZ01vZHVsZVR5cGUoaWQpO1xuICAgIGlmICghdHlwZSlcbiAgICAgICAgdGhyb3cgbm9Nb2R1bGVFcnJvcihpZCk7XG4gICAgcmV0dXJuIHR5cGU7XG59XG5mdW5jdGlvbiBub01vZHVsZUVycm9yKGlkKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihgTm8gbW9kdWxlIHdpdGggSUQgJHtpZH0gbG9hZGVkYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBCYXNlIGNsYXNzIHRoYXQgcHJvdmlkZXMgY2hhbmdlIGRldGVjdGlvbiBmdW5jdGlvbmFsaXR5LlxuICogQSBjaGFuZ2UtZGV0ZWN0aW9uIHRyZWUgY29sbGVjdHMgYWxsIHZpZXdzIHRoYXQgYXJlIHRvIGJlIGNoZWNrZWQgZm9yIGNoYW5nZXMuXG4gKiBVc2UgdGhlIG1ldGhvZHMgdG8gYWRkIGFuZCByZW1vdmUgdmlld3MgZnJvbSB0aGUgdHJlZSwgaW5pdGlhdGUgY2hhbmdlLWRldGVjdGlvbixcbiAqIGFuZCBleHBsaWNpdGx5IG1hcmsgdmlld3MgYXMgX2RpcnR5XywgbWVhbmluZyB0aGF0IHRoZXkgaGF2ZSBjaGFuZ2VkIGFuZCBuZWVkIHRvIGJlIHJlLXJlbmRlcmVkLlxuICpcbiAqIEBzZWUgW1VzaW5nIGNoYW5nZSBkZXRlY3Rpb24gaG9va3NdKGd1aWRlL2xpZmVjeWNsZS1ob29rcyN1c2luZy1jaGFuZ2UtZGV0ZWN0aW9uLWhvb2tzKVxuICogQHNlZSBbRGVmaW5pbmcgY3VzdG9tIGNoYW5nZSBkZXRlY3Rpb25dKGd1aWRlL2xpZmVjeWNsZS1ob29rcyNkZWZpbmluZy1jdXN0b20tY2hhbmdlLWRldGVjdGlvbilcbiAqXG4gKiBAdXNhZ2VOb3Rlc1xuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZXMgZGVtb25zdHJhdGUgaG93IHRvIG1vZGlmeSBkZWZhdWx0IGNoYW5nZS1kZXRlY3Rpb24gYmVoYXZpb3JcbiAqIHRvIHBlcmZvcm0gZXhwbGljaXQgZGV0ZWN0aW9uIHdoZW4gbmVlZGVkLlxuICpcbiAqICMjIyBVc2UgYG1hcmtGb3JDaGVjaygpYCB3aXRoIGBDaGVja09uY2VgIHN0cmF0ZWd5XG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIHNldHMgdGhlIGBPblB1c2hgIGNoYW5nZS1kZXRlY3Rpb24gc3RyYXRlZ3kgZm9yIGEgY29tcG9uZW50XG4gKiAoYENoZWNrT25jZWAsIHJhdGhlciB0aGFuIHRoZSBkZWZhdWx0IGBDaGVja0Fsd2F5c2ApLCB0aGVuIGZvcmNlcyBhIHNlY29uZCBjaGVja1xuICogYWZ0ZXIgYW4gaW50ZXJ2YWwuIFNlZSBbbGl2ZSBkZW1vXShodHRwczovL3BsbmtyLmNvL2VkaXQvR0M1MTJiP3A9cHJldmlldykuXG4gKlxuICogPGNvZGUtZXhhbXBsZSBwYXRoPVwiY29yZS90cy9jaGFuZ2VfZGV0ZWN0L2NoYW5nZS1kZXRlY3Rpb24udHNcIlxuICogcmVnaW9uPVwibWFyay1mb3ItY2hlY2tcIj48L2NvZGUtZXhhbXBsZT5cbiAqXG4gKiAjIyMgRGV0YWNoIGNoYW5nZSBkZXRlY3RvciB0byBsaW1pdCBob3cgb2Z0ZW4gY2hlY2sgb2NjdXJzXG4gKlxuICogVGhlIGZvbGxvd2luZyBleGFtcGxlIGRlZmluZXMgYSBjb21wb25lbnQgd2l0aCBhIGxhcmdlIGxpc3Qgb2YgcmVhZC1vbmx5IGRhdGFcbiAqIHRoYXQgaXMgZXhwZWN0ZWQgdG8gY2hhbmdlIGNvbnN0YW50bHksIG1hbnkgdGltZXMgcGVyIHNlY29uZC5cbiAqIFRvIGltcHJvdmUgcGVyZm9ybWFuY2UsIHdlIHdhbnQgdG8gY2hlY2sgYW5kIHVwZGF0ZSB0aGUgbGlzdFxuICogbGVzcyBvZnRlbiB0aGFuIHRoZSBjaGFuZ2VzIGFjdHVhbGx5IG9jY3VyLiBUbyBkbyB0aGF0LCB3ZSBkZXRhY2hcbiAqIHRoZSBjb21wb25lbnQncyBjaGFuZ2UgZGV0ZWN0b3IgYW5kIHBlcmZvcm0gYW4gZXhwbGljaXQgbG9jYWwgY2hlY2sgZXZlcnkgZml2ZSBzZWNvbmRzLlxuICpcbiAqIDxjb2RlLWV4YW1wbGUgcGF0aD1cImNvcmUvdHMvY2hhbmdlX2RldGVjdC9jaGFuZ2UtZGV0ZWN0aW9uLnRzXCIgcmVnaW9uPVwiZGV0YWNoXCI+PC9jb2RlLWV4YW1wbGU+XG4gKlxuICpcbiAqICMjIyBSZWF0dGFjaGluZyBhIGRldGFjaGVkIGNvbXBvbmVudFxuICpcbiAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBjcmVhdGVzIGEgY29tcG9uZW50IGRpc3BsYXlpbmcgbGl2ZSBkYXRhLlxuICogVGhlIGNvbXBvbmVudCBkZXRhY2hlcyBpdHMgY2hhbmdlIGRldGVjdG9yIGZyb20gdGhlIG1haW4gY2hhbmdlIGRldGVjdG9yIHRyZWVcbiAqIHdoZW4gdGhlIGBsaXZlYCBwcm9wZXJ0eSBpcyBzZXQgdG8gZmFsc2UsIGFuZCByZWF0dGFjaGVzIGl0IHdoZW4gdGhlIHByb3BlcnR5XG4gKiBiZWNvbWVzIHRydWUuXG4gKlxuICogPGNvZGUtZXhhbXBsZSBwYXRoPVwiY29yZS90cy9jaGFuZ2VfZGV0ZWN0L2NoYW5nZS1kZXRlY3Rpb24udHNcIiByZWdpb249XCJyZWF0dGFjaFwiPjwvY29kZS1leGFtcGxlPlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgQ2hhbmdlRGV0ZWN0b3JSZWYge1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqIEBub2NvbGxhcHNlXG4gKi9cbkNoYW5nZURldGVjdG9yUmVmLl9fTkdfRUxFTUVOVF9JRF9fID0gaW5qZWN0Q2hhbmdlRGV0ZWN0b3JSZWY7XG4vKiogUmV0dXJucyBhIENoYW5nZURldGVjdG9yUmVmIChhLmsuYS4gYSBWaWV3UmVmKSAqL1xuZnVuY3Rpb24gaW5qZWN0Q2hhbmdlRGV0ZWN0b3JSZWYoZmxhZ3MpIHtcbiAgICByZXR1cm4gY3JlYXRlVmlld1JlZihnZXRDdXJyZW50VE5vZGUoKSwgZ2V0TFZpZXcoKSwgKGZsYWdzICYgMTYgLyogRm9yUGlwZSAqLykgPT09IDE2IC8qIEZvclBpcGUgKi8pO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgVmlld1JlZiBhbmQgc3RvcmVzIGl0IG9uIHRoZSBpbmplY3RvciBhcyBDaGFuZ2VEZXRlY3RvclJlZiAocHVibGljIGFsaWFzKS5cbiAqXG4gKiBAcGFyYW0gdE5vZGUgVGhlIG5vZGUgdGhhdCBpcyByZXF1ZXN0aW5nIGEgQ2hhbmdlRGV0ZWN0b3JSZWZcbiAqIEBwYXJhbSBsVmlldyBUaGUgdmlldyB0byB3aGljaCB0aGUgbm9kZSBiZWxvbmdzXG4gKiBAcGFyYW0gaXNQaXBlIFdoZXRoZXIgdGhlIHZpZXcgaXMgYmVpbmcgaW5qZWN0ZWQgaW50byBhIHBpcGUuXG4gKiBAcmV0dXJucyBUaGUgQ2hhbmdlRGV0ZWN0b3JSZWYgdG8gdXNlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVZpZXdSZWYodE5vZGUsIGxWaWV3LCBpc1BpcGUpIHtcbiAgICBpZiAoaXNDb21wb25lbnRIb3N0KHROb2RlKSAmJiAhaXNQaXBlKSB7XG4gICAgICAgIC8vIFRoZSBMVmlldyByZXByZXNlbnRzIHRoZSBsb2NhdGlvbiB3aGVyZSB0aGUgY29tcG9uZW50IGlzIGRlY2xhcmVkLlxuICAgICAgICAvLyBJbnN0ZWFkIHdlIHdhbnQgdGhlIExWaWV3IGZvciB0aGUgY29tcG9uZW50IFZpZXcgYW5kIHNvIHdlIG5lZWQgdG8gbG9vayBpdCB1cC5cbiAgICAgICAgY29uc3QgY29tcG9uZW50VmlldyA9IGdldENvbXBvbmVudExWaWV3QnlJbmRleCh0Tm9kZS5pbmRleCwgbFZpZXcpOyAvLyBsb29rIGRvd25cbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3UmVmJDEoY29tcG9uZW50VmlldywgY29tcG9uZW50Vmlldyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHROb2RlLnR5cGUgJiAoMyAvKiBBbnlSTm9kZSAqLyB8IDEyIC8qIEFueUNvbnRhaW5lciAqLyB8IDMyIC8qIEljdSAqLykpIHtcbiAgICAgICAgLy8gVGhlIExWaWV3IHJlcHJlc2VudHMgdGhlIGxvY2F0aW9uIHdoZXJlIHRoZSBpbmplY3Rpb24gaXMgcmVxdWVzdGVkIGZyb20uXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gbG9jYXRlIHRoZSBjb250YWluaW5nIExWaWV3IChpbiBjYXNlIHdoZXJlIHRoZSBgbFZpZXdgIGlzIGFuIGVtYmVkZGVkIHZpZXcpXG4gICAgICAgIGNvbnN0IGhvc3RDb21wb25lbnRWaWV3ID0gbFZpZXdbREVDTEFSQVRJT05fQ09NUE9ORU5UX1ZJRVddOyAvLyBsb29rIHVwXG4gICAgICAgIHJldHVybiBuZXcgVmlld1JlZiQxKGhvc3RDb21wb25lbnRWaWV3LCBsVmlldyk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBBbmd1bGFyIFt2aWV3XShndWlkZS9nbG9zc2FyeSN2aWV3IFwiRGVmaW5pdGlvblwiKS5cbiAqXG4gKiBAc2VlIHtAbGluayBDaGFuZ2VEZXRlY3RvclJlZiN1c2FnZS1ub3RlcyBDaGFuZ2UgZGV0ZWN0aW9uIHVzYWdlfVxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgVmlld1JlZiBleHRlbmRzIENoYW5nZURldGVjdG9yUmVmIHtcbn1cbi8qKlxuICogUmVwcmVzZW50cyBhbiBBbmd1bGFyIFt2aWV3XShndWlkZS9nbG9zc2FyeSN2aWV3KSBpbiBhIHZpZXcgY29udGFpbmVyLlxuICogQW4gW2VtYmVkZGVkIHZpZXddKGd1aWRlL2dsb3NzYXJ5I3ZpZXctdHJlZSkgY2FuIGJlIHJlZmVyZW5jZWQgZnJvbSBhIGNvbXBvbmVudFxuICogb3RoZXIgdGhhbiB0aGUgaG9zdGluZyBjb21wb25lbnQgd2hvc2UgdGVtcGxhdGUgZGVmaW5lcyBpdCwgb3IgaXQgY2FuIGJlIGRlZmluZWRcbiAqIGluZGVwZW5kZW50bHkgYnkgYSBgVGVtcGxhdGVSZWZgLlxuICpcbiAqIFByb3BlcnRpZXMgb2YgZWxlbWVudHMgaW4gYSB2aWV3IGNhbiBjaGFuZ2UsIGJ1dCB0aGUgc3RydWN0dXJlIChudW1iZXIgYW5kIG9yZGVyKSBvZiBlbGVtZW50cyBpblxuICogYSB2aWV3IGNhbm5vdC4gQ2hhbmdlIHRoZSBzdHJ1Y3R1cmUgb2YgZWxlbWVudHMgYnkgaW5zZXJ0aW5nLCBtb3ZpbmcsIG9yXG4gKiByZW1vdmluZyBuZXN0ZWQgdmlld3MgaW4gYSB2aWV3IGNvbnRhaW5lci5cbiAqXG4gKiBAc2VlIGBWaWV3Q29udGFpbmVyUmVmYFxuICpcbiAqIEB1c2FnZU5vdGVzXG4gKlxuICogVGhlIGZvbGxvd2luZyB0ZW1wbGF0ZSBicmVha3MgZG93biBpbnRvIHR3byBzZXBhcmF0ZSBgVGVtcGxhdGVSZWZgIGluc3RhbmNlcyxcbiAqIGFuIG91dGVyIG9uZSBhbmQgYW4gaW5uZXIgb25lLlxuICpcbiAqIGBgYFxuICogQ291bnQ6IHt7aXRlbXMubGVuZ3RofX1cbiAqIDx1bD5cbiAqICAgPGxpICpuZ0Zvcj1cImxldCAgaXRlbSBvZiBpdGVtc1wiPnt7aXRlbX19PC9saT5cbiAqIDwvdWw+XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGlzIHRoZSBvdXRlciBgVGVtcGxhdGVSZWZgOlxuICpcbiAqIGBgYFxuICogQ291bnQ6IHt7aXRlbXMubGVuZ3RofX1cbiAqIDx1bD5cbiAqICAgPG5nLXRlbXBsYXRlIG5nRm9yIGxldC1pdGVtIFtuZ0Zvck9mXT1cIml0ZW1zXCI+PC9uZy10ZW1wbGF0ZT5cbiAqIDwvdWw+XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGlzIHRoZSBpbm5lciBgVGVtcGxhdGVSZWZgOlxuICpcbiAqIGBgYFxuICogICA8bGk+e3tpdGVtfX08L2xpPlxuICogYGBgXG4gKlxuICogVGhlIG91dGVyIGFuZCBpbm5lciBgVGVtcGxhdGVSZWZgIGluc3RhbmNlcyBhcmUgYXNzZW1ibGVkIGludG8gdmlld3MgYXMgZm9sbG93czpcbiAqXG4gKiBgYGBcbiAqIDwhLS0gVmlld1JlZjogb3V0ZXItMCAtLT5cbiAqIENvdW50OiAyXG4gKiA8dWw+XG4gKiAgIDxuZy10ZW1wbGF0ZSB2aWV3LWNvbnRhaW5lci1yZWY+PC9uZy10ZW1wbGF0ZT5cbiAqICAgPCEtLSBWaWV3UmVmOiBpbm5lci0xIC0tPjxsaT5maXJzdDwvbGk+PCEtLSAvVmlld1JlZjogaW5uZXItMSAtLT5cbiAqICAgPCEtLSBWaWV3UmVmOiBpbm5lci0yIC0tPjxsaT5zZWNvbmQ8L2xpPjwhLS0gL1ZpZXdSZWY6IGlubmVyLTIgLS0+XG4gKiA8L3VsPlxuICogPCEtLSAvVmlld1JlZjogb3V0ZXItMCAtLT5cbiAqIGBgYFxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBFbWJlZGRlZFZpZXdSZWYgZXh0ZW5kcyBWaWV3UmVmIHtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLy8gVGhpcyBmaWxlIGV4aXN0cyBmb3IgZWFzaWx5IHBhdGNoaW5nIE5nTW9kdWxlRmFjdG9yeUxvYWRlciBpbiBnM1xudmFyIG5nX21vZHVsZV9mYWN0b3J5X2xvYWRlcl9pbXBsID0ge307XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIERlYnVnRXZlbnRMaXN0ZW5lciB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIH1cbn1cbi8qKlxuICogQHB1YmxpY0FwaVxuICovXG5mdW5jdGlvbiBhc05hdGl2ZUVsZW1lbnRzKGRlYnVnRWxzKSB7XG4gICAgcmV0dXJuIGRlYnVnRWxzLm1hcCgoZWwpID0+IGVsLm5hdGl2ZUVsZW1lbnQpO1xufVxuLyoqXG4gKiBAcHVibGljQXBpXG4gKi9cbmNsYXNzIERlYnVnTm9kZSB7XG4gICAgY29uc3RydWN0b3IobmF0aXZlTm9kZSkge1xuICAgICAgICB0aGlzLm5hdGl2ZU5vZGUgPSBuYXRpdmVOb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgYERlYnVnRWxlbWVudGAgcGFyZW50LiBXaWxsIGJlIGBudWxsYCBpZiB0aGlzIGlzIHRoZSByb290IGVsZW1lbnQuXG4gICAgICovXG4gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5uYXRpdmVOb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIHJldHVybiBwYXJlbnQgPyBuZXcgRGVidWdFbGVtZW50KHBhcmVudCkgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaG9zdCBkZXBlbmRlbmN5IGluamVjdG9yLiBGb3IgZXhhbXBsZSwgdGhlIHJvb3QgZWxlbWVudCdzIGNvbXBvbmVudCBpbnN0YW5jZSBpbmplY3Rvci5cbiAgICAgKi9cbiAgICBnZXQgaW5qZWN0b3IoKSB7XG4gICAgICAgIHJldHVybiBnZXRJbmplY3Rvcih0aGlzLm5hdGl2ZU5vZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZWxlbWVudCdzIG93biBjb21wb25lbnQgaW5zdGFuY2UsIGlmIGl0IGhhcyBvbmUuXG4gICAgICovXG4gICAgZ2V0IGNvbXBvbmVudEluc3RhbmNlKCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbGVtZW50ID0gdGhpcy5uYXRpdmVOb2RlO1xuICAgICAgICByZXR1cm4gbmF0aXZlRWxlbWVudCAmJlxuICAgICAgICAgICAgKGdldENvbXBvbmVudCQxKG5hdGl2ZUVsZW1lbnQpIHx8IGdldE93bmluZ0NvbXBvbmVudChuYXRpdmVFbGVtZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCB0aGF0IHByb3ZpZGVzIHBhcmVudCBjb250ZXh0IGZvciB0aGlzIGVsZW1lbnQuIE9mdGVuIGFuIGFuY2VzdG9yIGNvbXBvbmVudCBpbnN0YW5jZVxuICAgICAqIHRoYXQgZ292ZXJucyB0aGlzIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBXaGVuIGFuIGVsZW1lbnQgaXMgcmVwZWF0ZWQgd2l0aGluICpuZ0ZvciwgdGhlIGNvbnRleHQgaXMgYW4gYE5nRm9yT2ZgIHdob3NlIGAkaW1wbGljaXRgXG4gICAgICogcHJvcGVydHkgaXMgdGhlIHZhbHVlIG9mIHRoZSByb3cgaW5zdGFuY2UgdmFsdWUuIEZvciBleGFtcGxlLCB0aGUgYGhlcm9gIGluIGAqbmdGb3I9XCJsZXQgaGVyb1xuICAgICAqIG9mIGhlcm9lc1wiYC5cbiAgICAgKi9cbiAgICBnZXQgY29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIGdldENvbXBvbmVudCQxKHRoaXMubmF0aXZlTm9kZSkgfHwgZ2V0Q29udGV4dCh0aGlzLm5hdGl2ZU5vZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY2FsbGJhY2tzIGF0dGFjaGVkIHRvIHRoZSBjb21wb25lbnQncyBAT3V0cHV0IHByb3BlcnRpZXMgYW5kL29yIHRoZSBlbGVtZW50J3MgZXZlbnRcbiAgICAgKiBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIGdldCBsaXN0ZW5lcnMoKSB7XG4gICAgICAgIHJldHVybiBnZXRMaXN0ZW5lcnModGhpcy5uYXRpdmVOb2RlKS5maWx0ZXIobGlzdGVuZXIgPT4gbGlzdGVuZXIudHlwZSA9PT0gJ2RvbScpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaWN0aW9uYXJ5IG9mIG9iamVjdHMgYXNzb2NpYXRlZCB3aXRoIHRlbXBsYXRlIGxvY2FsIHZhcmlhYmxlcyAoZS5nLiAjZm9vKSwga2V5ZWQgYnkgdGhlIGxvY2FsXG4gICAgICogdmFyaWFibGUgbmFtZS5cbiAgICAgKi9cbiAgICBnZXQgcmVmZXJlbmNlcygpIHtcbiAgICAgICAgcmV0dXJuIGdldExvY2FsUmVmcyh0aGlzLm5hdGl2ZU5vZGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGNvbXBvbmVudCdzIGluamVjdG9yIGxvb2t1cCB0b2tlbnMuIEluY2x1ZGVzIHRoZSBjb21wb25lbnQgaXRzZWxmIHBsdXMgdGhlIHRva2VucyB0aGF0IHRoZVxuICAgICAqIGNvbXBvbmVudCBsaXN0cyBpbiBpdHMgcHJvdmlkZXJzIG1ldGFkYXRhLlxuICAgICAqL1xuICAgIGdldCBwcm92aWRlclRva2VucygpIHtcbiAgICAgICAgcmV0dXJuIGdldEluamVjdGlvblRva2Vucyh0aGlzLm5hdGl2ZU5vZGUpO1xuICAgIH1cbn1cbi8qKlxuICogQHB1YmxpY0FwaVxuICpcbiAqIEBzZWUgW0NvbXBvbmVudCB0ZXN0aW5nIHNjZW5hcmlvc10oZ3VpZGUvdGVzdGluZy1jb21wb25lbnRzLXNjZW5hcmlvcylcbiAqIEBzZWUgW0Jhc2ljcyBvZiB0ZXN0aW5nIGNvbXBvbmVudHNdKGd1aWRlL3Rlc3RpbmctY29tcG9uZW50cy1iYXNpY3MpXG4gKiBAc2VlIFtUZXN0aW5nIHV0aWxpdHkgQVBJc10oZ3VpZGUvdGVzdGluZy11dGlsaXR5LWFwaXMpXG4gKi9cbmNsYXNzIERlYnVnRWxlbWVudCBleHRlbmRzIERlYnVnTm9kZSB7XG4gICAgY29uc3RydWN0b3IobmF0aXZlTm9kZSkge1xuICAgICAgICBuZ0Rldk1vZGUgJiYgYXNzZXJ0RG9tTm9kZShuYXRpdmVOb2RlKTtcbiAgICAgICAgc3VwZXIobmF0aXZlTm9kZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSB1bmRlcmx5aW5nIERPTSBlbGVtZW50IGF0IHRoZSByb290IG9mIHRoZSBjb21wb25lbnQuXG4gICAgICovXG4gICAgZ2V0IG5hdGl2ZUVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hdGl2ZU5vZGUubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUgPyB0aGlzLm5hdGl2ZU5vZGUgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZWxlbWVudCB0YWcgbmFtZSwgaWYgaXQgaXMgYW4gZWxlbWVudC5cbiAgICAgKi9cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGdldExDb250ZXh0KHRoaXMubmF0aXZlTm9kZSk7XG4gICAgICAgIGlmIChjb250ZXh0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBsVmlldyA9IGNvbnRleHQubFZpZXc7XG4gICAgICAgICAgICBjb25zdCB0RGF0YSA9IGxWaWV3W1RWSUVXXS5kYXRhO1xuICAgICAgICAgICAgY29uc3QgdE5vZGUgPSB0RGF0YVtjb250ZXh0Lm5vZGVJbmRleF07XG4gICAgICAgICAgICByZXR1cm4gdE5vZGUudmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uYXRpdmVOb2RlLm5vZGVOYW1lO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqICBHZXRzIGEgbWFwIG9mIHByb3BlcnR5IG5hbWVzIHRvIHByb3BlcnR5IHZhbHVlcyBmb3IgYW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqICBUaGlzIG1hcCBpbmNsdWRlczpcbiAgICAgKiAgLSBSZWd1bGFyIHByb3BlcnR5IGJpbmRpbmdzIChlLmcuIGBbaWRdPVwiaWRcImApXG4gICAgICogIC0gSG9zdCBwcm9wZXJ0eSBiaW5kaW5ncyAoZS5nLiBgaG9zdDogeyAnW2lkXSc6IFwiaWRcIiB9YClcbiAgICAgKiAgLSBJbnRlcnBvbGF0ZWQgcHJvcGVydHkgYmluZGluZ3MgKGUuZy4gYGlkPVwie3sgdmFsdWUgfX1cIilcbiAgICAgKlxuICAgICAqICBJdCBkb2VzIG5vdCBpbmNsdWRlOlxuICAgICAqICAtIGlucHV0IHByb3BlcnR5IGJpbmRpbmdzIChlLmcuIGBbbXlDdXN0b21JbnB1dF09XCJ2YWx1ZVwiYClcbiAgICAgKiAgLSBhdHRyaWJ1dGUgYmluZGluZ3MgKGUuZy4gYFthdHRyLnJvbGVdPVwibWVudVwiYClcbiAgICAgKi9cbiAgICBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGdldExDb250ZXh0KHRoaXMubmF0aXZlTm9kZSk7XG4gICAgICAgIGlmIChjb250ZXh0ID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbFZpZXcgPSBjb250ZXh0LmxWaWV3O1xuICAgICAgICBjb25zdCB0RGF0YSA9IGxWaWV3W1RWSUVXXS5kYXRhO1xuICAgICAgICBjb25zdCB0Tm9kZSA9IHREYXRhW2NvbnRleHQubm9kZUluZGV4XTtcbiAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHt9O1xuICAgICAgICAvLyBDb2xsZWN0IHByb3BlcnRpZXMgZnJvbSB0aGUgRE9NLlxuICAgICAgICBjb3B5RG9tUHJvcGVydGllcyh0aGlzLm5hdGl2ZUVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICAgICAgICAvLyBDb2xsZWN0IHByb3BlcnRpZXMgZnJvbSB0aGUgYmluZGluZ3MuIFRoaXMgaXMgbmVlZGVkIGZvciBhbmltYXRpb24gcmVuZGVyZXIgd2hpY2ggaGFzXG4gICAgICAgIC8vIHN5bnRoZXRpYyBwcm9wZXJ0aWVzIHdoaWNoIGRvbid0IGdldCByZWZsZWN0ZWQgaW50byB0aGUgRE9NLlxuICAgICAgICBjb2xsZWN0UHJvcGVydHlCaW5kaW5ncyhwcm9wZXJ0aWVzLCB0Tm9kZSwgbFZpZXcsIHREYXRhKTtcbiAgICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqICBBIG1hcCBvZiBhdHRyaWJ1dGUgbmFtZXMgdG8gYXR0cmlidXRlIHZhbHVlcyBmb3IgYW4gZWxlbWVudC5cbiAgICAgKi9cbiAgICBnZXQgYXR0cmlidXRlcygpIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5uYXRpdmVFbGVtZW50O1xuICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGVzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBnZXRMQ29udGV4dChlbGVtZW50KTtcbiAgICAgICAgaWYgKGNvbnRleHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsVmlldyA9IGNvbnRleHQubFZpZXc7XG4gICAgICAgIGNvbnN0IHROb2RlQXR0cnMgPSBsVmlld1tUVklFV10uZGF0YVtjb250ZXh0Lm5vZGVJbmRleF0uYXR0cnM7XG4gICAgICAgIGNvbnN0IGxvd2VyY2FzZVROb2RlQXR0cnMgPSBbXTtcbiAgICAgICAgLy8gRm9yIGRlYnVnIG5vZGVzIHdlIHRha2UgdGhlIGVsZW1lbnQncyBhdHRyaWJ1dGUgZGlyZWN0bHkgZnJvbSB0aGUgRE9NIHNpbmNlIGl0IGFsbG93cyB1c1xuICAgICAgICAvLyB0byBhY2NvdW50IGZvciBvbmVzIHRoYXQgd2VyZW4ndCBzZXQgdmlhIGJpbmRpbmdzIChlLmcuIFZpZXdFbmdpbmUga2VlcHMgdHJhY2sgb2YgdGhlIG9uZXNcbiAgICAgICAgLy8gdGhhdCBhcmUgc2V0IHRocm91Z2ggYFJlbmRlcmVyMmApLiBUaGUgcHJvYmxlbSBpcyB0aGF0IHRoZSBicm93c2VyIHdpbGwgbG93ZXJjYXNlIGFsbCBuYW1lcyxcbiAgICAgICAgLy8gaG93ZXZlciBzaW5jZSB3ZSBoYXZlIHRoZSBhdHRyaWJ1dGVzIGFscmVhZHkgb24gdGhlIFROb2RlLCB3ZSBjYW4gcHJlc2VydmUgdGhlIGNhc2UgYnkgZ29pbmdcbiAgICAgICAgLy8gdGhyb3VnaCB0aGVtIG9uY2UsIGFkZGluZyB0aGVtIHRvIHRoZSBgYXR0cmlidXRlc2AgbWFwIGFuZCBwdXR0aW5nIHRoZWlyIGxvd2VyLWNhc2VkIG5hbWVcbiAgICAgICAgLy8gaW50byBhbiBhcnJheS4gQWZ0ZXJ3YXJkcyB3aGVuIHdlJ3JlIGdvaW5nIHRocm91Z2ggdGhlIG5hdGl2ZSBET00gYXR0cmlidXRlcywgd2UgY2FuIGNoZWNrXG4gICAgICAgIC8vIHdoZXRoZXIgd2UgaGF2ZW4ndCBydW4gaW50byBhbiBhdHRyaWJ1dGUgYWxyZWFkeSB0aHJvdWdoIHRoZSBUTm9kZS5cbiAgICAgICAgaWYgKHROb2RlQXR0cnMpIHtcbiAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgdE5vZGVBdHRycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyTmFtZSA9IHROb2RlQXR0cnNbaV07XG4gICAgICAgICAgICAgICAgLy8gU3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhIG1hcmtlci4gV2Ugb25seSBjYXJlIGFib3V0IHRoZSByZWd1bGFyIGF0dHJpYnV0ZXMuIEV2ZXJ5dGhpbmdcbiAgICAgICAgICAgICAgICAvLyBlbHNlIHdpbGwgYmUgaGFuZGxlZCBiZWxvdyB3aGVuIHdlIHJlYWQgdGhlIGZpbmFsIGF0dHJpYnV0ZXMgb2ZmIHRoZSBET00uXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhdHRyTmFtZSAhPT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJWYWx1ZSA9IHROb2RlQXR0cnNbaSArIDFdO1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0clZhbHVlO1xuICAgICAgICAgICAgICAgIGxvd2VyY2FzZVROb2RlQXR0cnMucHVzaChhdHRyTmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZUF0dHJzID0gZWxlbWVudC5hdHRyaWJ1dGVzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVBdHRycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgYXR0ciA9IGVBdHRyc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGxvd2VyY2FzZU5hbWUgPSBhdHRyLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IGFzc2lnbiB0aGUgc2FtZSBhdHRyaWJ1dGUgYm90aCBpbiBpdHNcbiAgICAgICAgICAgIC8vIGNhc2Utc2Vuc2l0aXZlIGZvcm0gYW5kIHRoZSBsb3dlci1jYXNlZCBvbmUgZnJvbSB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgIGlmIChsb3dlcmNhc2VUTm9kZUF0dHJzLmluZGV4T2YobG93ZXJjYXNlTmFtZSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgbG93ZXJjYXNlIG5hbWUgdG8gYWxpZ24gdGhlIGJlaGF2aW9yIGJldHdlZW4gYnJvd3NlcnMuXG4gICAgICAgICAgICAgICAgLy8gSUUgcHJlc2VydmVzIHRoZSBjYXNlLCB3aGlsZSBhbGwgb3RoZXIgYnJvd3NlciBjb252ZXJ0IGl0IHRvIGxvd2VyIGNhc2UuXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlc1tsb3dlcmNhc2VOYW1lXSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpbmxpbmUgc3R5bGVzIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIFdpbGwgYmUgYG51bGxgIGlmIHRoZXJlIGlzIG5vIGBzdHlsZWAgcHJvcGVydHkgb24gdGhlIHVuZGVybHlpbmcgRE9NIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAc2VlIFtFbGVtZW50Q1NTSW5saW5lU3R5bGVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50Q1NTSW5saW5lU3R5bGUvc3R5bGUpXG4gICAgICovXG4gICAgZ2V0IHN0eWxlcygpIHtcbiAgICAgICAgaWYgKHRoaXMubmF0aXZlRWxlbWVudCAmJiB0aGlzLm5hdGl2ZUVsZW1lbnQuc3R5bGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5hdGl2ZUVsZW1lbnQuc3R5bGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIG1hcCBjb250YWluaW5nIHRoZSBjbGFzcyBuYW1lcyBvbiB0aGUgZWxlbWVudCBhcyBrZXlzLlxuICAgICAqXG4gICAgICogVGhpcyBtYXAgaXMgZGVyaXZlZCBmcm9tIHRoZSBgY2xhc3NOYW1lYCBwcm9wZXJ0eSBvZiB0aGUgRE9NIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBOb3RlOiBUaGUgdmFsdWVzIG9mIHRoaXMgb2JqZWN0IHdpbGwgYWx3YXlzIGJlIGB0cnVlYC4gVGhlIGNsYXNzIGtleSB3aWxsIG5vdCBhcHBlYXIgaW4gdGhlIEtWXG4gICAgICogb2JqZWN0IGlmIGl0IGRvZXMgbm90IGV4aXN0IG9uIHRoZSBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHNlZSBbRWxlbWVudC5jbGFzc05hbWVdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L2NsYXNzTmFtZSlcbiAgICAgKi9cbiAgICBnZXQgY2xhc3NlcygpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIC8vIFNWRyBlbGVtZW50cyByZXR1cm4gYW4gYFNWR0FuaW1hdGVkU3RyaW5nYCBpbnN0ZWFkIG9mIGEgcGxhaW4gc3RyaW5nIGZvciB0aGUgYGNsYXNzTmFtZWAuXG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lO1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gdHlwZW9mIGNsYXNzTmFtZSAhPT0gJ3N0cmluZycgPyBjbGFzc05hbWUuYmFzZVZhbC5zcGxpdCgnICcpIDogY2xhc3NOYW1lLnNwbGl0KCcgJyk7XG4gICAgICAgIGNsYXNzZXMuZm9yRWFjaCgodmFsdWUpID0+IHJlc3VsdFt2YWx1ZV0gPSB0cnVlKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGBjaGlsZE5vZGVzYCBvZiB0aGUgRE9NIGVsZW1lbnQgYXMgYSBgRGVidWdOb2RlYCBhcnJheS5cbiAgICAgKlxuICAgICAqIEBzZWUgW05vZGUuY2hpbGROb2Rlc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05vZGUvY2hpbGROb2RlcylcbiAgICAgKi9cbiAgICBnZXQgY2hpbGROb2RlcygpIHtcbiAgICAgICAgY29uc3QgY2hpbGROb2RlcyA9IHRoaXMubmF0aXZlTm9kZS5jaGlsZE5vZGVzO1xuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBjaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChnZXREZWJ1Z05vZGUoZWxlbWVudCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGlsZHJlbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGltbWVkaWF0ZSBgRGVidWdFbGVtZW50YCBjaGlsZHJlbi4gV2FsayB0aGUgdHJlZSBieSBkZXNjZW5kaW5nIHRocm91Z2ggYGNoaWxkcmVuYC5cbiAgICAgKi9cbiAgICBnZXQgY2hpbGRyZW4oKSB7XG4gICAgICAgIGNvbnN0IG5hdGl2ZUVsZW1lbnQgPSB0aGlzLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGlmICghbmF0aXZlRWxlbWVudClcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgY29uc3QgY2hpbGROb2RlcyA9IG5hdGl2ZUVsZW1lbnQuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGNoaWxkTm9kZXNbaV07XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGdldERlYnVnTm9kZShlbGVtZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB0aGUgZmlyc3QgYERlYnVnRWxlbWVudGAgdGhhdCBtYXRjaGVzIHRoZSBwcmVkaWNhdGUgYXQgYW55IGRlcHRoIGluIHRoZSBzdWJ0cmVlLlxuICAgICAqL1xuICAgIHF1ZXJ5KHByZWRpY2F0ZSkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gdGhpcy5xdWVyeUFsbChwcmVkaWNhdGUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0c1swXSB8fCBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBBbGwgYERlYnVnRWxlbWVudGAgbWF0Y2hlcyBmb3IgdGhlIHByZWRpY2F0ZSBhdCBhbnkgZGVwdGggaW4gdGhlIHN1YnRyZWUuXG4gICAgICovXG4gICAgcXVlcnlBbGwocHJlZGljYXRlKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBbXTtcbiAgICAgICAgX3F1ZXJ5QWxsKHRoaXMsIHByZWRpY2F0ZSwgbWF0Y2hlcywgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBBbGwgYERlYnVnTm9kZWAgbWF0Y2hlcyBmb3IgdGhlIHByZWRpY2F0ZSBhdCBhbnkgZGVwdGggaW4gdGhlIHN1YnRyZWUuXG4gICAgICovXG4gICAgcXVlcnlBbGxOb2RlcyhwcmVkaWNhdGUpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IFtdO1xuICAgICAgICBfcXVlcnlBbGwodGhpcywgcHJlZGljYXRlLCBtYXRjaGVzLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyB0aGUgZXZlbnQgYnkgaXRzIG5hbWUgaWYgdGhlcmUgaXMgYSBjb3JyZXNwb25kaW5nIGxpc3RlbmVyIGluIHRoZSBlbGVtZW50J3NcbiAgICAgKiBgbGlzdGVuZXJzYCBjb2xsZWN0aW9uLlxuICAgICAqXG4gICAgICogSWYgdGhlIGV2ZW50IGxhY2tzIGEgbGlzdGVuZXIgb3IgdGhlcmUncyBzb21lIG90aGVyIHByb2JsZW0sIGNvbnNpZGVyXG4gICAgICogY2FsbGluZyBgbmF0aXZlRWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50T2JqZWN0KWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byB0cmlnZ2VyXG4gICAgICogQHBhcmFtIGV2ZW50T2JqIFRoZSBfZXZlbnQgb2JqZWN0XyBleHBlY3RlZCBieSB0aGUgaGFuZGxlclxuICAgICAqXG4gICAgICogQHNlZSBbVGVzdGluZyBjb21wb25lbnRzIHNjZW5hcmlvc10oZ3VpZGUvdGVzdGluZy1jb21wb25lbnRzLXNjZW5hcmlvcyN0cmlnZ2VyLWV2ZW50LWhhbmRsZXIpXG4gICAgICovXG4gICAgdHJpZ2dlckV2ZW50SGFuZGxlcihldmVudE5hbWUsIGV2ZW50T2JqKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm5hdGl2ZU5vZGU7XG4gICAgICAgIGNvbnN0IGludm9rZWRMaXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXIubmFtZSA9PT0gZXZlbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSBsaXN0ZW5lci5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKG5vZGUsIGV2ZW50T2JqKTtcbiAgICAgICAgICAgICAgICBpbnZva2VkTGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gV2UgbmVlZCB0byBjaGVjayB3aGV0aGVyIGBldmVudExpc3RlbmVyc2AgZXhpc3RzLCBiZWNhdXNlIGl0J3Mgc29tZXRoaW5nXG4gICAgICAgIC8vIHRoYXQgWm9uZS5qcyBvbmx5IGFkZHMgdG8gYEV2ZW50VGFyZ2V0YCBpbiBicm93c2VyIGVudmlyb25tZW50cy5cbiAgICAgICAgaWYgKHR5cGVvZiBub2RlLmV2ZW50TGlzdGVuZXJzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgaW4gSXZ5IHdlIHdyYXAgZXZlbnQgbGlzdGVuZXJzIHdpdGggYSBjYWxsIHRvIGBldmVudC5wcmV2ZW50RGVmYXVsdGAgaW4gc29tZVxuICAgICAgICAgICAgLy8gY2FzZXMuIFdlIHVzZSAnX19uZ1Vud3JhcF9fJyBhcyBhIHNwZWNpYWwgdG9rZW4gdGhhdCBnaXZlcyB1cyBhY2Nlc3MgdG8gdGhlIGFjdHVhbCBldmVudFxuICAgICAgICAgICAgLy8gbGlzdGVuZXIuXG4gICAgICAgICAgICBub2RlLmV2ZW50TGlzdGVuZXJzKGV2ZW50TmFtZSkuZm9yRWFjaCgobGlzdGVuZXIpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byBlbnN1cmUgdGhhdCB3ZSBjYW4gZGV0ZWN0IHRoZSBzcGVjaWFsIF9fbmdVbndyYXBfXyB0b2tlbiBkZXNjcmliZWQgYWJvdmUsIHdlXG4gICAgICAgICAgICAgICAgLy8gdXNlIGB0b1N0cmluZ2Agb24gdGhlIGxpc3RlbmVyIGFuZCBzZWUgaWYgaXQgY29udGFpbnMgdGhlIHRva2VuLiBXZSB1c2UgdGhpcyBhcHByb2FjaCB0b1xuICAgICAgICAgICAgICAgIC8vIGVuc3VyZSB0aGF0IGl0IHN0aWxsIHdvcmtlZCB3aXRoIGNvbXBpbGVkIGNvZGUgc2luY2UgaXQgY2Fubm90IHJlbW92ZSBvciByZW5hbWUgc3RyaW5nXG4gICAgICAgICAgICAgICAgLy8gbGl0ZXJhbHMuIFdlIGFsc28gY29uc2lkZXJlZCB1c2luZyBhIHNwZWNpYWwgZnVuY3Rpb24gbmFtZSAoaS5lLiBpZihsaXN0ZW5lci5uYW1lID09PVxuICAgICAgICAgICAgICAgIC8vIHNwZWNpYWwpKSBidXQgdGhhdCB3YXMgbW9yZSBjdW1iZXJzb21lIGFuZCB3ZSB3ZXJlIGFsc28gY29uY2VybmVkIHRoZSBjb21waWxlZCBjb2RlIGNvdWxkXG4gICAgICAgICAgICAgICAgLy8gc3RyaXAgdGhlIG5hbWUsIHR1cm5pbmcgdGhlIGNvbmRpdGlvbiBpbiB0byAoXCJcIiA9PT0gXCJcIikgYW5kIGFsd2F5cyByZXR1cm5pbmcgdHJ1ZS5cbiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIudG9TdHJpbmcoKS5pbmRleE9mKCdfX25nVW53cmFwX18nKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdW53cmFwcGVkTGlzdGVuZXIgPSBsaXN0ZW5lcignX19uZ1Vud3JhcF9fJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnZva2VkTGlzdGVuZXJzLmluZGV4T2YodW53cmFwcGVkTGlzdGVuZXIpID09PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdW53cmFwcGVkTGlzdGVuZXIuY2FsbChub2RlLCBldmVudE9iaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjb3B5RG9tUHJvcGVydGllcyhlbGVtZW50LCBwcm9wZXJ0aWVzKSB7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgLy8gU2tpcCBvd24gcHJvcGVydGllcyAoYXMgdGhvc2UgYXJlIHBhdGNoZWQpXG4gICAgICAgIGxldCBvYmogPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZWxlbWVudCk7XG4gICAgICAgIGNvbnN0IE5vZGVQcm90b3R5cGUgPSBOb2RlLnByb3RvdHlwZTtcbiAgICAgICAgd2hpbGUgKG9iaiAhPT0gbnVsbCAmJiBvYmogIT09IE5vZGVQcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0b3JzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMob2JqKTtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBkZXNjcmlwdG9ycykge1xuICAgICAgICAgICAgICAgIGlmICgha2V5LnN0YXJ0c1dpdGgoJ19fJykgJiYgIWtleS5zdGFydHNXaXRoKCdvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGluY2x1ZGUgcHJvcGVydGllcyBzdGFydGluZyB3aXRoIGBfX2AgYW5kIGBvbmAuXG4gICAgICAgICAgICAgICAgICAgIC8vIGBfX2AgYXJlIHBhdGNoZWQgdmFsdWVzIHdoaWNoIHNob3VsZCBub3QgYmUgaW5jbHVkZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vIGBvbmAgYXJlIGxpc3RlbmVycyB3aGljaCBhbHNvIHNob3VsZCBub3QgYmUgaW5jbHVkZWQuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZWxlbWVudFtrZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQcmltaXRpdmVWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc1ByaW1pdGl2ZVZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fFxuICAgICAgICB2YWx1ZSA9PT0gbnVsbDtcbn1cbmZ1bmN0aW9uIF9xdWVyeUFsbChwYXJlbnRFbGVtZW50LCBwcmVkaWNhdGUsIG1hdGNoZXMsIGVsZW1lbnRzT25seSkge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRMQ29udGV4dChwYXJlbnRFbGVtZW50Lm5hdGl2ZU5vZGUpO1xuICAgIGlmIChjb250ZXh0ICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFROb2RlID0gY29udGV4dC5sVmlld1tUVklFV10uZGF0YVtjb250ZXh0Lm5vZGVJbmRleF07XG4gICAgICAgIF9xdWVyeU5vZGVDaGlsZHJlbihwYXJlbnRUTm9kZSwgY29udGV4dC5sVmlldywgcHJlZGljYXRlLCBtYXRjaGVzLCBlbGVtZW50c09ubHksIHBhcmVudEVsZW1lbnQubmF0aXZlTm9kZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBJZiB0aGUgY29udGV4dCBpcyBudWxsLCB0aGVuIGBwYXJlbnRFbGVtZW50YCB3YXMgZWl0aGVyIGNyZWF0ZWQgd2l0aCBSZW5kZXJlcjIgb3IgbmF0aXZlIERPTVxuICAgICAgICAvLyBBUElzLlxuICAgICAgICBfcXVlcnlOYXRpdmVOb2RlRGVzY2VuZGFudHMocGFyZW50RWxlbWVudC5uYXRpdmVOb2RlLCBwcmVkaWNhdGUsIG1hdGNoZXMsIGVsZW1lbnRzT25seSk7XG4gICAgfVxufVxuLyoqXG4gKiBSZWN1cnNpdmVseSBtYXRjaCB0aGUgY3VycmVudCBUTm9kZSBhZ2FpbnN0IHRoZSBwcmVkaWNhdGUsIGFuZCBnb2VzIG9uIHdpdGggdGhlIG5leHQgb25lcy5cbiAqXG4gKiBAcGFyYW0gdE5vZGUgdGhlIGN1cnJlbnQgVE5vZGVcbiAqIEBwYXJhbSBsVmlldyB0aGUgTFZpZXcgb2YgdGhpcyBUTm9kZVxuICogQHBhcmFtIHByZWRpY2F0ZSB0aGUgcHJlZGljYXRlIHRvIG1hdGNoXG4gKiBAcGFyYW0gbWF0Y2hlcyB0aGUgbGlzdCBvZiBwb3NpdGl2ZSBtYXRjaGVzXG4gKiBAcGFyYW0gZWxlbWVudHNPbmx5IHdoZXRoZXIgb25seSBlbGVtZW50cyBzaG91bGQgYmUgc2VhcmNoZWRcbiAqIEBwYXJhbSByb290TmF0aXZlTm9kZSB0aGUgcm9vdCBuYXRpdmUgbm9kZSBvbiB3aGljaCBwcmVkaWNhdGUgc2hvdWxkIG5vdCBiZSBtYXRjaGVkXG4gKi9cbmZ1bmN0aW9uIF9xdWVyeU5vZGVDaGlsZHJlbih0Tm9kZSwgbFZpZXcsIHByZWRpY2F0ZSwgbWF0Y2hlcywgZWxlbWVudHNPbmx5LCByb290TmF0aXZlTm9kZSkge1xuICAgIG5nRGV2TW9kZSAmJiBhc3NlcnRUTm9kZUZvckxWaWV3KHROb2RlLCBsVmlldyk7XG4gICAgY29uc3QgbmF0aXZlTm9kZSA9IGdldE5hdGl2ZUJ5VE5vZGVPck51bGwodE5vZGUsIGxWaWV3KTtcbiAgICAvLyBGb3IgZWFjaCB0eXBlIG9mIFROb2RlLCBzcGVjaWZpYyBsb2dpYyBpcyBleGVjdXRlZC5cbiAgICBpZiAodE5vZGUudHlwZSAmICgzIC8qIEFueVJOb2RlICovIHwgOCAvKiBFbGVtZW50Q29udGFpbmVyICovKSkge1xuICAgICAgICAvLyBDYXNlIDE6IHRoZSBUTm9kZSBpcyBhbiBlbGVtZW50XG4gICAgICAgIC8vIFRoZSBuYXRpdmUgbm9kZSBoYXMgdG8gYmUgY2hlY2tlZC5cbiAgICAgICAgX2FkZFF1ZXJ5TWF0Y2gobmF0aXZlTm9kZSwgcHJlZGljYXRlLCBtYXRjaGVzLCBlbGVtZW50c09ubHksIHJvb3ROYXRpdmVOb2RlKTtcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50SG9zdCh0Tm9kZSkpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGlzIHRoZSBob3N0IG9mIGEgY29tcG9uZW50LCB0aGVuIGFsbCBub2RlcyBpbiBpdHMgdmlldyBoYXZlIHRvIGJlIHByb2Nlc3NlZC5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoZSBjb21wb25lbnQncyBjb250ZW50ICh0Tm9kZS5jaGlsZCkgd2lsbCBiZSBwcm9jZXNzZWQgZnJvbSB0aGUgaW5zZXJ0aW9uIHBvaW50cy5cbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudFZpZXcgPSBnZXRDb21wb25lbnRMVmlld0J5SW5kZXgodE5vZGUuaW5kZXgsIGxWaWV3KTtcbiAgICAgICAgICAgIGlmIChjb21wb25lbnRWaWV3ICYmIGNvbXBvbmVudFZpZXdbVFZJRVddLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBfcXVlcnlOb2RlQ2hpbGRyZW4oY29tcG9uZW50Vmlld1tUVklFV10uZmlyc3RDaGlsZCwgY29tcG9uZW50VmlldywgcHJlZGljYXRlLCBtYXRjaGVzLCBlbGVtZW50c09ubHksIHJvb3ROYXRpdmVOb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0Tm9kZS5jaGlsZCkge1xuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgaXRzIGNoaWxkcmVuIGhhdmUgdG8gYmUgcHJvY2Vzc2VkLlxuICAgICAgICAgICAgICAgIF9xdWVyeU5vZGVDaGlsZHJlbih0Tm9kZS5jaGlsZCwgbFZpZXcsIHByZWRpY2F0ZSwgbWF0Y2hlcywgZWxlbWVudHNPbmx5LCByb290TmF0aXZlTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXZSBhbHNvIGhhdmUgdG8gcXVlcnkgdGhlIERPTSBkaXJlY3RseSBpbiBvcmRlciB0byBjYXRjaCBlbGVtZW50cyBpbnNlcnRlZCB0aHJvdWdoXG4gICAgICAgICAgICAvLyBSZW5kZXJlcjIuIE5vdGUgdGhhdCB0aGlzIGlzIF9fbm90X18gb3B0aW1hbCwgYmVjYXVzZSB3ZSdyZSB3YWxraW5nIHNpbWlsYXIgdHJlZXMgbXVsdGlwbGVcbiAgICAgICAgICAgIC8vIHRpbWVzLiBWaWV3RW5naW5lIGNvdWxkIGRvIGl0IG1vcmUgZWZmaWNpZW50bHksIGJlY2F1c2UgYWxsIHRoZSBpbnNlcnRpb25zIGdvIHRocm91Z2hcbiAgICAgICAgICAgIC8vIFJlbmRlcmVyMiwgaG93ZXZlciB0aGF0J3Mgbm90IHRoZSBjYXNlIGluIEl2eS4gVGhpcyBhcHByb2FjaCBpcyBiZWluZyB1c2VkIGJlY2F1c2U6XG4gICAgICAgICAgICAvLyAxLiBNYXRjaGluZyB0aGUgVmlld0VuZ2luZSBiZWhhdmlvciB3b3VsZCBtZWFuIHBvdGVudGlhbGx5IGludHJvZHVjaW5nIGEgZGVwZWRlbmN5XG4gICAgICAgICAgICAvLyAgICBmcm9tIGBSZW5kZXJlcjJgIHRvIEl2eSB3aGljaCBjb3VsZCBicmluZyBJdnkgY29kZSBpbnRvIFZpZXdFbmdpbmUuXG4gICAgICAgICAgICAvLyAyLiBXZSB3b3VsZCBoYXZlIHRvIG1ha2UgYFJlbmRlcmVyM2AgXCJrbm93XCIgYWJvdXQgZGVidWcgbm9kZXMuXG4gICAgICAgICAgICAvLyAzLiBJdCBhbGxvd3MgdXMgdG8gY2FwdHVyZSBub2RlcyB0aGF0IHdlcmUgaW5zZXJ0ZWQgZGlyZWN0bHkgdmlhIHRoZSBET00uXG4gICAgICAgICAgICBuYXRpdmVOb2RlICYmIF9xdWVyeU5hdGl2ZU5vZGVEZXNjZW5kYW50cyhuYXRpdmVOb2RlLCBwcmVkaWNhdGUsIG1hdGNoZXMsIGVsZW1lbnRzT25seSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW4gYWxsIGNhc2VzLCBpZiBhIGR5bmFtaWMgY29udGFpbmVyIGV4aXN0cyBmb3IgdGhpcyBub2RlLCBlYWNoIHZpZXcgaW5zaWRlIGl0IGhhcyB0byBiZVxuICAgICAgICAvLyBwcm9jZXNzZWQuXG4gICAgICAgIGNvbnN0IG5vZGVPckNvbnRhaW5lciA9IGxWaWV3W3ROb2RlLmluZGV4XTtcbiAgICAgICAgaWYgKGlzTENvbnRhaW5lcihub2RlT3JDb250YWluZXIpKSB7XG4gICAgICAgICAgICBfcXVlcnlOb2RlQ2hpbGRyZW5JbkNvbnRhaW5lcihub2RlT3JDb250YWluZXIsIHByZWRpY2F0ZSwgbWF0Y2hlcywgZWxlbWVudHNPbmx5LCByb290TmF0aXZlTm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodE5vZGUudHlwZSAmIDQgLyogQ29udGFpbmVyICovKSB7XG4gICAgICAgIC8vIENhc2UgMjogdGhlIFROb2RlIGlzIGEgY29udGFpbmVyXG4gICAgICAgIC8vIFRoZSBuYXRpdmUgbm9kZSBoYXMgdG8gYmUgY2hlY2tlZC5cbiAgICAgICAgY29uc3QgbENvbnRhaW5lciA9IGxWaWV3W3ROb2RlLmluZGV4XTtcbiAgICAgICAgX2FkZFF1ZXJ5TWF0Y2gobENvbnRhaW5lcltOQVRJVkVdLCBwcmVkaWNhdGUsIG1hdGNoZXMsIGVsZW1lbnRzT25seSwgcm9vdE5hdGl2ZU5vZGUpO1xuICAgICAgICAvLyBFYWNoIHZpZXcgaW5zaWRlIHRoZSBjb250YWluZXIgaGFzIHRvIGJlIHByb2Nlc3NlZC5cbiAgICAgICAgX3F1ZXJ5Tm9kZUNoaWxkcmVuSW5Db250YWluZXIobENvbnRhaW5lciwgcHJlZGljYXRlLCBtYXRjaGVzLCBlbGVtZW50c09ubHksIHJvb3ROYXRpdmVOb2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodE5vZGUudHlwZSAmIDE2IC8qIFByb2plY3Rpb24gKi8pIHtcbiAgICAgICAgLy8gQ2FzZSAzOiB0aGUgVE5vZGUgaXMgYSBwcm9qZWN0aW9uIGluc2VydGlvbiBwb2ludCAoaS5lLiBhIDxuZy1jb250ZW50PikuXG4gICAgICAgIC8vIFRoZSBub2RlcyBwcm9qZWN0ZWQgYXQgdGhpcyBsb2NhdGlvbiBhbGwgbmVlZCB0byBiZSBwcm9jZXNzZWQuXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFZpZXcgPSBsVmlld1tERUNMQVJBVElPTl9DT01QT05FTlRfVklFV107XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEhvc3QgPSBjb21wb25lbnRWaWV3W1RfSE9TVF07XG4gICAgICAgIGNvbnN0IGhlYWQgPSBjb21wb25lbnRIb3N0LnByb2plY3Rpb25bdE5vZGUucHJvamVjdGlvbl07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGhlYWQpKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBuYXRpdmVOb2RlIG9mIGhlYWQpIHtcbiAgICAgICAgICAgICAgICBfYWRkUXVlcnlNYXRjaChuYXRpdmVOb2RlLCBwcmVkaWNhdGUsIG1hdGNoZXMsIGVsZW1lbnRzT25seSwgcm9vdE5hdGl2ZU5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGhlYWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMVmlldyA9IGNvbXBvbmVudFZpZXdbUEFSRU5UXTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRUTm9kZSA9IG5leHRMVmlld1tUVklFV10uZGF0YVtoZWFkLmluZGV4XTtcbiAgICAgICAgICAgIF9xdWVyeU5vZGVDaGlsZHJlbihuZXh0VE5vZGUsIG5leHRMVmlldywgcHJlZGljYXRlLCBtYXRjaGVzLCBlbGVtZW50c09ubHksIHJvb3ROYXRpdmVOb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0Tm9kZS5jaGlsZCkge1xuICAgICAgICAvLyBDYXNlIDQ6IHRoZSBUTm9kZSBpcyBhIHZpZXcuXG4gICAgICAgIF9xdWVyeU5vZGVDaGlsZHJlbih0Tm9kZS5jaGlsZCwgbFZpZXcsIHByZWRpY2F0ZSwgbWF0Y2hlcywgZWxlbWVudHNPbmx5LCByb290TmF0aXZlTm9kZSk7XG4gICAgfVxuICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gZ28gdG8gdGhlIG5leHQgc2libGluZyBvZiB0aGUgcm9vdCBub2RlLlxuICAgIGlmIChyb290TmF0aXZlTm9kZSAhPT0gbmF0aXZlTm9kZSkge1xuICAgICAgICAvLyBUbyBkZXRlcm1pbmUgdGhlIG5leHQgbm9kZSB0byBiZSBwcm9jZXNzZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBuZXh0IG9yIHRoZSBwcm9qZWN0aW9uTmV4dFxuICAgICAgICAvLyBsaW5rLCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgY3VycmVudCBub2RlIGhhcyBiZWVuIHByb2plY3RlZC5cbiAgICAgICAgY29uc3QgbmV4dFROb2RlID0gKHROb2RlLmZsYWdzICYgNCAvKiBpc1Byb2plY3RlZCAqLykgPyB0Tm9kZS5wcm9qZWN0aW9uTmV4dCA6IHROb2RlLm5leHQ7XG4gICAgICAgIGlmIChuZXh0VE5vZGUpIHtcbiAgICAgICAgICAgIF9xdWVyeU5vZGVDaGlsZHJlbihuZXh0VE5vZGUsIGxWaWV3LCBwcmVkaWNhdGUsIG1hdGNoZXMsIGVsZW1lbnRzT25seSwgcm9vdE5hdGl2ZU5vZGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBQcm9jZXNzIGFsbCBUTm9kZXMgaW4gYSBnaXZlbiBjb250YWluZXIuXG4gKlxuICogQHBhcmFtIGxDb250YWluZXIgdGhlIGNvbnRhaW5lciB0byBiZSBwcm9jZXNzZWRcbiAqIEBwYXJhbSBwcmVkaWNhdGUgdGhlIHByZWRpY2F0ZSB0byBtYXRjaFxuICogQHBhcmFtIG1hdGNoZXMgdGhlIGxpc3Qgb2YgcG9zaXRpdmUgbWF0Y2hlc1xuICogQHBhcmFtIGVsZW1lbnRzT25seSB3aGV0aGVyIG9ubHkgZWxlbWVudHMgc2hvdWxkIGJlIHNlYXJjaGVkXG4gKiBAcGFyYW0gcm9vdE5hdGl2ZU5vZGUgdGhlIHJvb3QgbmF0aXZlIG5vZGUgb24gd2hpY2ggcHJlZGljYXRlIHNob3VsZCBub3QgYmUgbWF0Y2hlZFxuICovXG5mdW5jdGlvbiBfcXVlcnlOb2RlQ2hpbGRyZW5JbkNvbnRhaW5lcihsQ29udGFpbmVyLCBwcmVkaWNhdGUsIG1hdGNoZXMsIGVsZW1lbnRzT25seSwgcm9vdE5hdGl2ZU5vZGUpIHtcbiAgICBmb3IgKGxldCBpID0gQ09OVEFJTkVSX0hFQURFUl9PRkZTRVQ7IGkgPCBsQ29udGFpbmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkVmlldyA9IGxDb250YWluZXJbaV07XG4gICAgICAgIGNvbnN0IGZpcnN0Q2hpbGQgPSBjaGlsZFZpZXdbVFZJRVddLmZpcnN0Q2hpbGQ7XG4gICAgICAgIGlmIChmaXJzdENoaWxkKSB7XG4gICAgICAgICAgICBfcXVlcnlOb2RlQ2hpbGRyZW4oZmlyc3RDaGlsZCwgY2hpbGRWaWV3LCBwcmVkaWNhdGUsIG1hdGNoZXMsIGVsZW1lbnRzT25seSwgcm9vdE5hdGl2ZU5vZGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBNYXRjaCB0aGUgY3VycmVudCBuYXRpdmUgbm9kZSBhZ2FpbnN0IHRoZSBwcmVkaWNhdGUuXG4gKlxuICogQHBhcmFtIG5hdGl2ZU5vZGUgdGhlIGN1cnJlbnQgbmF0aXZlIG5vZGVcbiAqIEBwYXJhbSBwcmVkaWNhdGUgdGhlIHByZWRpY2F0ZSB0byBtYXRjaFxuICogQHBhcmFtIG1hdGNoZXMgdGhlIGxpc3Qgb2YgcG9zaXRpdmUgbWF0Y2hlc1xuICogQHBhcmFtIGVsZW1lbnRzT25seSB3aGV0aGVyIG9ubHkgZWxlbWVudHMgc2hvdWxkIGJlIHNlYXJjaGVkXG4gKiBAcGFyYW0gcm9vdE5hdGl2ZU5vZGUgdGhlIHJvb3QgbmF0aXZlIG5vZGUgb24gd2hpY2ggcHJlZGljYXRlIHNob3VsZCBub3QgYmUgbWF0Y2hlZFxuICovXG5mdW5jdGlvbiBfYWRkUXVlcnlNYXRjaChuYXRpdmVOb2RlLCBwcmVkaWNhdGUsIG1hdGNoZXMsIGVsZW1lbnRzT25seSwgcm9vdE5hdGl2ZU5vZGUpIHtcbiAgICBpZiAocm9vdE5hdGl2ZU5vZGUgIT09IG5hdGl2ZU5vZGUpIHtcbiAgICAgICAgY29uc3QgZGVidWdOb2RlID0gZ2V0RGVidWdOb2RlKG5hdGl2ZU5vZGUpO1xuICAgICAgICBpZiAoIWRlYnVnTm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFR5cGUgb2YgdGhlIFwicHJlZGljYXRlIGFuZCBcIm1hdGNoZXNcIiBhcnJheSBhcmUgc2V0IGJhc2VkIG9uIHRoZSB2YWx1ZSBvZlxuICAgICAgICAvLyB0aGUgXCJlbGVtZW50c09ubHlcIiBwYXJhbWV0ZXIuIFR5cGVTY3JpcHQgaXMgbm90IGFibGUgdG8gcHJvcGVybHkgaW5mZXIgdGhlc2VcbiAgICAgICAgLy8gdHlwZXMgd2l0aCBnZW5lcmljcywgc28gd2UgbWFudWFsbHkgY2FzdCB0aGUgcGFyYW1ldGVycyBhY2NvcmRpbmdseS5cbiAgICAgICAgaWYgKGVsZW1lbnRzT25seSAmJiAoZGVidWdOb2RlIGluc3RhbmNlb2YgRGVidWdFbGVtZW50KSAmJiBwcmVkaWNhdGUoZGVidWdOb2RlKSAmJlxuICAgICAgICAgICAgbWF0Y2hlcy5pbmRleE9mKGRlYnVnTm9kZSkgPT09IC0xKSB7XG4gICAgICAgICAgICBtYXRjaGVzLnB1c2goZGVidWdOb2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghZWxlbWVudHNPbmx5ICYmIHByZWRpY2F0ZShkZWJ1Z05vZGUpICYmXG4gICAgICAgICAgICBtYXRjaGVzLmluZGV4T2YoZGVidWdOb2RlKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIG1hdGNoZXMucHVzaChkZWJ1Z05vZGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBNYXRjaCBhbGwgdGhlIGRlc2NlbmRhbnRzIG9mIGEgRE9NIG5vZGUgYWdhaW5zdCBhIHByZWRpY2F0ZS5cbiAqXG4gKiBAcGFyYW0gbmF0aXZlTm9kZSB0aGUgY3VycmVudCBuYXRpdmUgbm9kZVxuICogQHBhcmFtIHByZWRpY2F0ZSB0aGUgcHJlZGljYXRlIHRvIG1hdGNoXG4gKiBAcGFyYW0gbWF0Y2hlcyB0aGUgbGlzdCB3aGVyZSBtYXRjaGVzIGFyZSBzdG9yZWRcbiAqIEBwYXJhbSBlbGVtZW50c09ubHkgd2hldGhlciBvbmx5IGVsZW1lbnRzIHNob3VsZCBiZSBzZWFyY2hlZFxuICovXG5mdW5jdGlvbiBfcXVlcnlOYXRpdmVOb2RlRGVzY2VuZGFudHMocGFyZW50Tm9kZSwgcHJlZGljYXRlLCBtYXRjaGVzLCBlbGVtZW50c09ubHkpIHtcbiAgICBjb25zdCBub2RlcyA9IHBhcmVudE5vZGUuY2hpbGROb2RlcztcbiAgICBjb25zdCBsZW5ndGggPSBub2Rlcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIGNvbnN0IGRlYnVnTm9kZSA9IGdldERlYnVnTm9kZShub2RlKTtcbiAgICAgICAgaWYgKGRlYnVnTm9kZSkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnRzT25seSAmJiAoZGVidWdOb2RlIGluc3RhbmNlb2YgRGVidWdFbGVtZW50KSAmJiBwcmVkaWNhdGUoZGVidWdOb2RlKSAmJlxuICAgICAgICAgICAgICAgIG1hdGNoZXMuaW5kZXhPZihkZWJ1Z05vZGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChkZWJ1Z05vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIWVsZW1lbnRzT25seSAmJiBwcmVkaWNhdGUoZGVidWdOb2RlKSAmJlxuICAgICAgICAgICAgICAgIG1hdGNoZXMuaW5kZXhPZihkZWJ1Z05vZGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaChkZWJ1Z05vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3F1ZXJ5TmF0aXZlTm9kZURlc2NlbmRhbnRzKG5vZGUsIHByZWRpY2F0ZSwgbWF0Y2hlcywgZWxlbWVudHNPbmx5KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogSXRlcmF0ZXMgdGhyb3VnaCB0aGUgcHJvcGVydHkgYmluZGluZ3MgZm9yIGEgZ2l2ZW4gbm9kZSBhbmQgZ2VuZXJhdGVzXG4gKiBhIG1hcCBvZiBwcm9wZXJ0eSBuYW1lcyB0byB2YWx1ZXMuIFRoaXMgbWFwIG9ubHkgY29udGFpbnMgcHJvcGVydHkgYmluZGluZ3NcbiAqIGRlZmluZWQgaW4gdGVtcGxhdGVzLCBub3QgaW4gaG9zdCBiaW5kaW5ncy5cbiAqL1xuZnVuY3Rpb24gY29sbGVjdFByb3BlcnR5QmluZGluZ3MocHJvcGVydGllcywgdE5vZGUsIGxWaWV3LCB0RGF0YSkge1xuICAgIGxldCBiaW5kaW5nSW5kZXhlcyA9IHROb2RlLnByb3BlcnR5QmluZGluZ3M7XG4gICAgaWYgKGJpbmRpbmdJbmRleGVzICE9PSBudWxsKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluZGluZ0luZGV4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdJbmRleCA9IGJpbmRpbmdJbmRleGVzW2ldO1xuICAgICAgICAgICAgY29uc3QgcHJvcE1ldGFkYXRhID0gdERhdGFbYmluZGluZ0luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhUGFydHMgPSBwcm9wTWV0YWRhdGEuc3BsaXQoSU5URVJQT0xBVElPTl9ERUxJTUlURVIpO1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydHlOYW1lID0gbWV0YWRhdGFQYXJ0c1swXTtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YVBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBtZXRhZGF0YVBhcnRzWzFdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgbWV0YWRhdGFQYXJ0cy5sZW5ndGggLSAxOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgKz0gcmVuZGVyU3RyaW5naWZ5KGxWaWV3W2JpbmRpbmdJbmRleCArIGogLSAxXSkgKyBtZXRhZGF0YVBhcnRzW2ogKyAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvcGVydGllc1twcm9wZXJ0eU5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV0gPSBsVmlld1tiaW5kaW5nSW5kZXhdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8gTmVlZCB0byBrZWVwIHRoZSBub2RlcyBpbiBhIGdsb2JhbCBNYXAgc28gdGhhdCBtdWx0aXBsZSBhbmd1bGFyIGFwcHMgYXJlIHN1cHBvcnRlZC5cbmNvbnN0IF9uYXRpdmVOb2RlVG9EZWJ1Z05vZGUgPSBuZXcgTWFwKCk7XG5jb25zdCBOR19ERUJVR19QUk9QRVJUWSA9ICdfX25nX2RlYnVnX18nO1xuLyoqXG4gKiBAcHVibGljQXBpXG4gKi9cbmZ1bmN0aW9uIGdldERlYnVnTm9kZShuYXRpdmVOb2RlKSB7XG4gICAgaWYgKG5hdGl2ZU5vZGUgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgIGlmICghKG5hdGl2ZU5vZGUuaGFzT3duUHJvcGVydHkoTkdfREVCVUdfUFJPUEVSVFkpKSkge1xuICAgICAgICAgICAgbmF0aXZlTm9kZVtOR19ERUJVR19QUk9QRVJUWV0gPSBuYXRpdmVOb2RlLm5vZGVUeXBlID09IE5vZGUuRUxFTUVOVF9OT0RFID9cbiAgICAgICAgICAgICAgICBuZXcgRGVidWdFbGVtZW50KG5hdGl2ZU5vZGUpIDpcbiAgICAgICAgICAgICAgICBuZXcgRGVidWdOb2RlKG5hdGl2ZU5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuYXRpdmVOb2RlW05HX0RFQlVHX1BST1BFUlRZXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vLyBUT0RPOiBjbGVhbnVwIGFsbCByZWZlcmVuY2VzIHRvIHRoaXMgZnVuY3Rpb24gYW5kIHJlbW92ZSBpdC5cbmZ1bmN0aW9uIGdldERlYnVnTm9kZVIyKF9uYXRpdmVOb2RlKSB7XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBnZXRBbGxEZWJ1Z05vZGVzKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKF9uYXRpdmVOb2RlVG9EZWJ1Z05vZGUudmFsdWVzKCkpO1xufVxuZnVuY3Rpb24gaW5kZXhEZWJ1Z05vZGUobm9kZSkge1xuICAgIF9uYXRpdmVOb2RlVG9EZWJ1Z05vZGUuc2V0KG5vZGUubmF0aXZlTm9kZSwgbm9kZSk7XG59XG5mdW5jdGlvbiByZW1vdmVEZWJ1Z05vZGVGcm9tSW5kZXgobm9kZSkge1xuICAgIF9uYXRpdmVOb2RlVG9EZWJ1Z05vZGUuZGVsZXRlKG5vZGUubmF0aXZlTm9kZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuY2xhc3MgRGVmYXVsdEl0ZXJhYmxlRGlmZmVyRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgICBzdXBwb3J0cyhvYmopIHtcbiAgICAgICAgcmV0dXJuIGlzTGlzdExpa2VJdGVyYWJsZShvYmopO1xuICAgIH1cbiAgICBjcmVhdGUodHJhY2tCeUZuKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGVmYXVsdEl0ZXJhYmxlRGlmZmVyKHRyYWNrQnlGbik7XG4gICAgfVxufVxuY29uc3QgdHJhY2tCeUlkZW50aXR5ID0gKGluZGV4LCBpdGVtKSA9PiBpdGVtO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCB2NC4wLjAgLSBTaG91bGQgbm90IGJlIHBhcnQgb2YgcHVibGljIEFQSS5cbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgRGVmYXVsdEl0ZXJhYmxlRGlmZmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0cmFja0J5Rm4pIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgdXNlZCByZWNvcmRzIGF0IGFueSBwb2ludCBpbiB0aW1lIChkdXJpbmcgJiBhY3Jvc3MgYF9jaGVjaygpYCBjYWxscylcbiAgICAgICAgdGhpcy5fbGlua2VkUmVjb3JkcyA9IG51bGw7XG4gICAgICAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSByZW1vdmVkIHJlY29yZHMgYXQgYW55IHBvaW50IGluIHRpbWUgZHVyaW5nIGBfY2hlY2soKWAgY2FsbHMuXG4gICAgICAgIHRoaXMuX3VubGlua2VkUmVjb3JkcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzSXRIZWFkID0gbnVsbDtcbiAgICAgICAgdGhpcy5faXRIZWFkID0gbnVsbDtcbiAgICAgICAgdGhpcy5faXRUYWlsID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYWRkaXRpb25zSGVhZCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2FkZGl0aW9uc1RhaWwgPSBudWxsO1xuICAgICAgICB0aGlzLl9tb3Zlc0hlYWQgPSBudWxsO1xuICAgICAgICB0aGlzLl9tb3Zlc1RhaWwgPSBudWxsO1xuICAgICAgICB0aGlzLl9yZW1vdmFsc0hlYWQgPSBudWxsO1xuICAgICAgICB0aGlzLl9yZW1vdmFsc1RhaWwgPSBudWxsO1xuICAgICAgICAvLyBLZWVwcyB0cmFjayBvZiByZWNvcmRzIHdoZXJlIGN1c3RvbSB0cmFjayBieSBpcyB0aGUgc2FtZSwgYnV0IGl0ZW0gaWRlbnRpdHkgaGFzIGNoYW5nZWRcbiAgICAgICAgdGhpcy5faWRlbnRpdHlDaGFuZ2VzSGVhZCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2lkZW50aXR5Q2hhbmdlc1RhaWwgPSBudWxsO1xuICAgICAgICB0aGlzLl90cmFja0J5Rm4gPSB0cmFja0J5Rm4gfHwgdHJhY2tCeUlkZW50aXR5O1xuICAgIH1cbiAgICBmb3JFYWNoSXRlbShmbikge1xuICAgICAgICBsZXQgcmVjb3JkO1xuICAgICAgICBmb3IgKHJlY29yZCA9IHRoaXMuX2l0SGVhZDsgcmVjb3JkICE9PSBudWxsOyByZWNvcmQgPSByZWNvcmQuX25leHQpIHtcbiAgICAgICAgICAgIGZuKHJlY29yZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yRWFjaE9wZXJhdGlvbihmbikge1xuICAgICAgICBsZXQgbmV4dEl0ID0gdGhpcy5faXRIZWFkO1xuICAgICAgICBsZXQgbmV4dFJlbW92ZSA9IHRoaXMuX3JlbW92YWxzSGVhZDtcbiAgICAgICAgbGV0IGFkZFJlbW92ZU9mZnNldCA9IDA7XG4gICAgICAgIGxldCBtb3ZlT2Zmc2V0cyA9IG51bGw7XG4gICAgICAgIHdoaWxlIChuZXh0SXQgfHwgbmV4dFJlbW92ZSkge1xuICAgICAgICAgICAgLy8gRmlndXJlIG91dCB3aGljaCBpcyB0aGUgbmV4dCByZWNvcmQgdG8gcHJvY2Vzc1xuICAgICAgICAgICAgLy8gT3JkZXI6IHJlbW92ZSwgYWRkLCBtb3ZlXG4gICAgICAgICAgICBjb25zdCByZWNvcmQgPSAhbmV4dFJlbW92ZSB8fFxuICAgICAgICAgICAgICAgIG5leHRJdCAmJlxuICAgICAgICAgICAgICAgICAgICBuZXh0SXQuY3VycmVudEluZGV4IDxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFByZXZpb3VzSW5kZXgobmV4dFJlbW92ZSwgYWRkUmVtb3ZlT2Zmc2V0LCBtb3ZlT2Zmc2V0cykgP1xuICAgICAgICAgICAgICAgIG5leHRJdCA6XG4gICAgICAgICAgICAgICAgbmV4dFJlbW92ZTtcbiAgICAgICAgICAgIGNvbnN0IGFkalByZXZpb3VzSW5kZXggPSBnZXRQcmV2aW91c0luZGV4KHJlY29yZCwgYWRkUmVtb3ZlT2Zmc2V0LCBtb3ZlT2Zmc2V0cyk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSByZWNvcmQuY3VycmVudEluZGV4O1xuICAgICAgICAgICAgLy8gY29uc3VtZSB0aGUgaXRlbSwgYW5kIGFkanVzdCB0aGUgYWRkUmVtb3ZlT2Zmc2V0IGFuZCB1cGRhdGUgbW92ZURpc3RhbmNlIGlmIG5lY2Vzc2FyeVxuICAgICAgICAgICAgaWYgKHJlY29yZCA9PT0gbmV4dFJlbW92ZSkge1xuICAgICAgICAgICAgICAgIGFkZFJlbW92ZU9mZnNldC0tO1xuICAgICAgICAgICAgICAgIG5leHRSZW1vdmUgPSBuZXh0UmVtb3ZlLl9uZXh0UmVtb3ZlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5leHRJdCA9IG5leHRJdC5fbmV4dDtcbiAgICAgICAgICAgICAgICBpZiAocmVjb3JkLnByZXZpb3VzSW5kZXggPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRSZW1vdmVPZmZzZXQrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElOVkFSSUFOVDogIGN1cnJlbnRJbmRleCA8IHByZXZpb3VzSW5kZXhcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb3ZlT2Zmc2V0cylcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVPZmZzZXRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2FsTW92ZVByZXZpb3VzSW5kZXggPSBhZGpQcmV2aW91c0luZGV4IC0gYWRkUmVtb3ZlT2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2NhbEN1cnJlbnRJbmRleCA9IGN1cnJlbnRJbmRleCAtIGFkZFJlbW92ZU9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsTW92ZVByZXZpb3VzSW5kZXggIT0gbG9jYWxDdXJyZW50SW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxNb3ZlUHJldmlvdXNJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaSA8IG1vdmVPZmZzZXRzLmxlbmd0aCA/IG1vdmVPZmZzZXRzW2ldIDogKG1vdmVPZmZzZXRzW2ldID0gMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBvZmZzZXQgKyBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbEN1cnJlbnRJbmRleCA8PSBpbmRleCAmJiBpbmRleCA8IGxvY2FsTW92ZVByZXZpb3VzSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW92ZU9mZnNldHNbaV0gPSBvZmZzZXQgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzSW5kZXggPSByZWNvcmQucHJldmlvdXNJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVPZmZzZXRzW3ByZXZpb3VzSW5kZXhdID0gbG9jYWxDdXJyZW50SW5kZXggLSBsb2NhbE1vdmVQcmV2aW91c0luZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFkalByZXZpb3VzSW5kZXggIT09IGN1cnJlbnRJbmRleCkge1xuICAgICAgICAgICAgICAgIGZuKHJlY29yZCwgYWRqUHJldmlvdXNJbmRleCwgY3VycmVudEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JFYWNoUHJldmlvdXNJdGVtKGZuKSB7XG4gICAgICAgIGxldCByZWNvcmQ7XG4gICAgICAgIGZvciAocmVjb3JkID0gdGhpcy5fcHJldmlvdXNJdEhlYWQ7IHJlY29yZCAhPT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0UHJldmlvdXMpIHtcbiAgICAgICAgICAgIGZuKHJlY29yZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yRWFjaEFkZGVkSXRlbShmbikge1xuICAgICAgICBsZXQgcmVjb3JkO1xuICAgICAgICBmb3IgKHJlY29yZCA9IHRoaXMuX2FkZGl0aW9uc0hlYWQ7IHJlY29yZCAhPT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0QWRkZWQpIHtcbiAgICAgICAgICAgIGZuKHJlY29yZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yRWFjaE1vdmVkSXRlbShmbikge1xuICAgICAgICBsZXQgcmVjb3JkO1xuICAgICAgICBmb3IgKHJlY29yZCA9IHRoaXMuX21vdmVzSGVhZDsgcmVjb3JkICE9PSBudWxsOyByZWNvcmQgPSByZWNvcmQuX25leHRNb3ZlZCkge1xuICAgICAgICAgICAgZm4ocmVjb3JkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JFYWNoUmVtb3ZlZEl0ZW0oZm4pIHtcbiAgICAgICAgbGV0IHJlY29yZDtcbiAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9yZW1vdmFsc0hlYWQ7IHJlY29yZCAhPT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0UmVtb3ZlZCkge1xuICAgICAgICAgICAgZm4ocmVjb3JkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JFYWNoSWRlbnRpdHlDaGFuZ2UoZm4pIHtcbiAgICAgICAgbGV0IHJlY29yZDtcbiAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9pZGVudGl0eUNoYW5nZXNIZWFkOyByZWNvcmQgIT09IG51bGw7IHJlY29yZCA9IHJlY29yZC5fbmV4dElkZW50aXR5Q2hhbmdlKSB7XG4gICAgICAgICAgICBmbihyZWNvcmQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpZmYoY29sbGVjdGlvbikge1xuICAgICAgICBpZiAoY29sbGVjdGlvbiA9PSBudWxsKVxuICAgICAgICAgICAgY29sbGVjdGlvbiA9IFtdO1xuICAgICAgICBpZiAoIWlzTGlzdExpa2VJdGVyYWJsZShjb2xsZWN0aW9uKSkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gKHR5cGVvZiBuZ0Rldk1vZGUgPT09ICd1bmRlZmluZWQnIHx8IG5nRGV2TW9kZSkgP1xuICAgICAgICAgICAgICAgIGBFcnJvciB0cnlpbmcgdG8gZGlmZiAnJHtzdHJpbmdpZnkoY29sbGVjdGlvbil9Jy4gT25seSBhcnJheXMgYW5kIGl0ZXJhYmxlcyBhcmUgYWxsb3dlZGAgOlxuICAgICAgICAgICAgICAgICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcig5MDAgLyogSU5WQUxJRF9ESUZGRVJfSU5QVVQgKi8sIGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2hlY2soY29sbGVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EZXN0cm95KCkgeyB9XG4gICAgY2hlY2soY29sbGVjdGlvbikge1xuICAgICAgICB0aGlzLl9yZXNldCgpO1xuICAgICAgICBsZXQgcmVjb3JkID0gdGhpcy5faXRIZWFkO1xuICAgICAgICBsZXQgbWF5QmVEaXJ0eSA9IGZhbHNlO1xuICAgICAgICBsZXQgaW5kZXg7XG4gICAgICAgIGxldCBpdGVtO1xuICAgICAgICBsZXQgaXRlbVRyYWNrQnk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbGxlY3Rpb24pKSB7XG4gICAgICAgICAgICB0aGlzLmxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgaXRlbSA9IGNvbGxlY3Rpb25baW5kZXhdO1xuICAgICAgICAgICAgICAgIGl0ZW1UcmFja0J5ID0gdGhpcy5fdHJhY2tCeUZuKGluZGV4LCBpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAocmVjb3JkID09PSBudWxsIHx8ICFPYmplY3QuaXMocmVjb3JkLnRyYWNrQnlJZCwgaXRlbVRyYWNrQnkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY29yZCA9IHRoaXMuX21pc21hdGNoKHJlY29yZCwgaXRlbSwgaXRlbVRyYWNrQnksIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgbWF5QmVEaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF5QmVEaXJ0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhtaXNrbyk6IGNhbiB3ZSBsaW1pdCB0aGlzIHRvIGR1cGxpY2F0ZXMgb25seT9cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZCA9IHRoaXMuX3ZlcmlmeVJlaW5zZXJ0aW9uKHJlY29yZCwgaXRlbSwgaXRlbVRyYWNrQnksIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5pcyhyZWNvcmQuaXRlbSwgaXRlbSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hZGRJZGVudGl0eUNoYW5nZShyZWNvcmQsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWNvcmQgPSByZWNvcmQuX25leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgICBpdGVyYXRlTGlzdExpa2UoY29sbGVjdGlvbiwgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtVHJhY2tCeSA9IHRoaXMuX3RyYWNrQnlGbihpbmRleCwgaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlY29yZCA9PT0gbnVsbCB8fCAhT2JqZWN0LmlzKHJlY29yZC50cmFja0J5SWQsIGl0ZW1UcmFja0J5KSkge1xuICAgICAgICAgICAgICAgICAgICByZWNvcmQgPSB0aGlzLl9taXNtYXRjaChyZWNvcmQsIGl0ZW0sIGl0ZW1UcmFja0J5LCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIG1heUJlRGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heUJlRGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8obWlza28pOiBjYW4gd2UgbGltaXQgdGhpcyB0byBkdXBsaWNhdGVzIG9ubHk/XG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmQgPSB0aGlzLl92ZXJpZnlSZWluc2VydGlvbihyZWNvcmQsIGl0ZW0sIGl0ZW1UcmFja0J5LCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFPYmplY3QuaXMocmVjb3JkLml0ZW0sIGl0ZW0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkSWRlbnRpdHlDaGFuZ2UocmVjb3JkLCBpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVjb3JkID0gcmVjb3JkLl9uZXh0O1xuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdHJ1bmNhdGUocmVjb3JkKTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gY29sbGVjdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNEaXJ0eTtcbiAgICB9XG4gICAgLyogQ29sbGVjdGlvbkNoYW5nZXMgaXMgY29uc2lkZXJlZCBkaXJ0eSBpZiBpdCBoYXMgYW55IGFkZGl0aW9ucywgbW92ZXMsIHJlbW92YWxzLCBvciBpZGVudGl0eVxuICAgICAqIGNoYW5nZXMuXG4gICAgICovXG4gICAgZ2V0IGlzRGlydHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRpdGlvbnNIZWFkICE9PSBudWxsIHx8IHRoaXMuX21vdmVzSGVhZCAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZhbHNIZWFkICE9PSBudWxsIHx8IHRoaXMuX2lkZW50aXR5Q2hhbmdlc0hlYWQgIT09IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBzdGF0ZSBvZiB0aGUgY2hhbmdlIG9iamVjdHMgdG8gc2hvdyBubyBjaGFuZ2VzLiBUaGlzIG1lYW5zIHNldCBwcmV2aW91c0tleSB0b1xuICAgICAqIGN1cnJlbnRLZXksIGFuZCBjbGVhciBhbGwgb2YgdGhlIHF1ZXVlcyAoYWRkaXRpb25zLCBtb3ZlcywgcmVtb3ZhbHMpLlxuICAgICAqIFNldCB0aGUgcHJldmlvdXNJbmRleGVzIG9mIG1vdmVkIGFuZCBhZGRlZCBpdGVtcyB0byB0aGVpciBjdXJyZW50SW5kZXhlc1xuICAgICAqIFJlc2V0IHRoZSBsaXN0IG9mIGFkZGl0aW9ucywgbW92ZXMgYW5kIHJlbW92YWxzXG4gICAgICpcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBfcmVzZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGlydHkpIHtcbiAgICAgICAgICAgIGxldCByZWNvcmQ7XG4gICAgICAgICAgICBmb3IgKHJlY29yZCA9IHRoaXMuX3ByZXZpb3VzSXRIZWFkID0gdGhpcy5faXRIZWFkOyByZWNvcmQgIT09IG51bGw7IHJlY29yZCA9IHJlY29yZC5fbmV4dCkge1xuICAgICAgICAgICAgICAgIHJlY29yZC5fbmV4dFByZXZpb3VzID0gcmVjb3JkLl9uZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9hZGRpdGlvbnNIZWFkOyByZWNvcmQgIT09IG51bGw7IHJlY29yZCA9IHJlY29yZC5fbmV4dEFkZGVkKSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkLnByZXZpb3VzSW5kZXggPSByZWNvcmQuY3VycmVudEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fYWRkaXRpb25zSGVhZCA9IHRoaXMuX2FkZGl0aW9uc1RhaWwgPSBudWxsO1xuICAgICAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9tb3Zlc0hlYWQ7IHJlY29yZCAhPT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0TW92ZWQpIHtcbiAgICAgICAgICAgICAgICByZWNvcmQucHJldmlvdXNJbmRleCA9IHJlY29yZC5jdXJyZW50SW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9tb3Zlc0hlYWQgPSB0aGlzLl9tb3Zlc1RhaWwgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZhbHNIZWFkID0gdGhpcy5fcmVtb3ZhbHNUYWlsID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2lkZW50aXR5Q2hhbmdlc0hlYWQgPSB0aGlzLl9pZGVudGl0eUNoYW5nZXNUYWlsID0gbnVsbDtcbiAgICAgICAgICAgIC8vIFRPRE8odmljYik6IHdoZW4gYXNzZXJ0IGdldHMgc3VwcG9ydGVkXG4gICAgICAgICAgICAvLyBhc3NlcnQoIXRoaXMuaXNEaXJ0eSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBpcyB0aGUgY29yZSBmdW5jdGlvbiB3aGljaCBoYW5kbGVzIGRpZmZlcmVuY2VzIGJldHdlZW4gY29sbGVjdGlvbnMuXG4gICAgICpcbiAgICAgKiAtIGByZWNvcmRgIGlzIHRoZSByZWNvcmQgd2hpY2ggd2Ugc2F3IGF0IHRoaXMgcG9zaXRpb24gbGFzdCB0aW1lLiBJZiBudWxsIHRoZW4gaXQgaXMgYSBuZXdcbiAgICAgKiAgIGl0ZW0uXG4gICAgICogLSBgaXRlbWAgaXMgdGhlIGN1cnJlbnQgaXRlbSBpbiB0aGUgY29sbGVjdGlvblxuICAgICAqIC0gYGluZGV4YCBpcyB0aGUgcG9zaXRpb24gb2YgdGhlIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb25cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF9taXNtYXRjaChyZWNvcmQsIGl0ZW0sIGl0ZW1UcmFja0J5LCBpbmRleCkge1xuICAgICAgICAvLyBUaGUgcHJldmlvdXMgcmVjb3JkIGFmdGVyIHdoaWNoIHdlIHdpbGwgYXBwZW5kIHRoZSBjdXJyZW50IG9uZS5cbiAgICAgICAgbGV0IHByZXZpb3VzUmVjb3JkO1xuICAgICAgICBpZiAocmVjb3JkID09PSBudWxsKSB7XG4gICAgICAgICAgICBwcmV2aW91c1JlY29yZCA9IHRoaXMuX2l0VGFpbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByZXZpb3VzUmVjb3JkID0gcmVjb3JkLl9wcmV2O1xuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSByZWNvcmQgZnJvbSB0aGUgY29sbGVjdGlvbiBzaW5jZSB3ZSBrbm93IGl0IGRvZXMgbm90IG1hdGNoIHRoZSBpdGVtLlxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlKHJlY29yZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2VlIGlmIHdlIGhhdmUgZXZpY3RlZCB0aGUgaXRlbSwgd2hpY2ggdXNlZCB0byBiZSBhdCBzb21lIGFudGVyaW9yIHBvc2l0aW9uIG9mIF9pdEhlYWQgbGlzdC5cbiAgICAgICAgcmVjb3JkID0gdGhpcy5fdW5saW5rZWRSZWNvcmRzID09PSBudWxsID8gbnVsbCA6IHRoaXMuX3VubGlua2VkUmVjb3Jkcy5nZXQoaXRlbVRyYWNrQnksIG51bGwpO1xuICAgICAgICBpZiAocmVjb3JkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBJdCBpcyBhbiBpdGVtIHdoaWNoIHdlIGhhdmUgZXZpY3RlZCBlYXJsaWVyOiByZWluc2VydCBpdCBiYWNrIGludG8gdGhlIGxpc3QuXG4gICAgICAgICAgICAvLyBCdXQgZmlyc3Qgd2UgbmVlZCB0byBjaGVjayBpZiBpZGVudGl0eSBjaGFuZ2VkLCBzbyB3ZSBjYW4gdXBkYXRlIGluIHZpZXcgaWYgbmVjZXNzYXJ5LlxuICAgICAgICAgICAgaWYgKCFPYmplY3QuaXMocmVjb3JkLml0ZW0sIGl0ZW0pKVxuICAgICAgICAgICAgICAgIHRoaXMuX2FkZElkZW50aXR5Q2hhbmdlKHJlY29yZCwgaXRlbSk7XG4gICAgICAgICAgICB0aGlzLl9yZWluc2VydEFmdGVyKHJlY29yZCwgcHJldmlvdXNSZWNvcmQsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gc2VlIGlmIHRoZSBpdGVtIGlzIGF0IHNvbWUgcG9zdGVyaW9yIHBvc2l0aW9uIG9mIF9pdEhlYWQgbGlzdC5cbiAgICAgICAgICAgIHJlY29yZCA9IHRoaXMuX2xpbmtlZFJlY29yZHMgPT09IG51bGwgPyBudWxsIDogdGhpcy5fbGlua2VkUmVjb3Jkcy5nZXQoaXRlbVRyYWNrQnksIGluZGV4KTtcbiAgICAgICAgICAgIGlmIChyZWNvcmQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHRoZSBpdGVtIGluIF9pdEhlYWQgYXQvYWZ0ZXIgYGluZGV4YCBwb3NpdGlvbi4gV2UgbmVlZCB0byBtb3ZlIGl0IGZvcndhcmQgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gY29sbGVjdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBCdXQgZmlyc3Qgd2UgbmVlZCB0byBjaGVjayBpZiBpZGVudGl0eSBjaGFuZ2VkLCBzbyB3ZSBjYW4gdXBkYXRlIGluIHZpZXcgaWYgbmVjZXNzYXJ5LlxuICAgICAgICAgICAgICAgIGlmICghT2JqZWN0LmlzKHJlY29yZC5pdGVtLCBpdGVtKSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWRkSWRlbnRpdHlDaGFuZ2UocmVjb3JkLCBpdGVtKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlQWZ0ZXIocmVjb3JkLCBwcmV2aW91c1JlY29yZCwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSXQgaXMgYSBuZXcgaXRlbTogYWRkIGl0LlxuICAgICAgICAgICAgICAgIHJlY29yZCA9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2FkZEFmdGVyKG5ldyBJdGVyYWJsZUNoYW5nZVJlY29yZF8oaXRlbSwgaXRlbVRyYWNrQnkpLCBwcmV2aW91c1JlY29yZCwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWNvcmQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgY2hlY2sgaXMgb25seSBuZWVkZWQgaWYgYW4gYXJyYXkgY29udGFpbnMgZHVwbGljYXRlcy4gKFNob3J0IGNpcmN1aXQgb2Ygbm90aGluZyBkaXJ0eSlcbiAgICAgKlxuICAgICAqIFVzZSBjYXNlOiBgW2EsIGFdYCA9PiBgW2IsIGEsIGFdYFxuICAgICAqXG4gICAgICogSWYgd2UgZGlkIG5vdCBoYXZlIHRoaXMgY2hlY2sgdGhlbiB0aGUgaW5zZXJ0aW9uIG9mIGBiYCB3b3VsZDpcbiAgICAgKiAgIDEpIGV2aWN0IGZpcnN0IGBhYFxuICAgICAqICAgMikgaW5zZXJ0IGBiYCBhdCBgMGAgaW5kZXguXG4gICAgICogICAzKSBsZWF2ZSBgYWAgYXQgaW5kZXggYDFgIGFzIGlzLiA8LS0gdGhpcyBpcyB3cm9uZyFcbiAgICAgKiAgIDMpIHJlaW5zZXJ0IGBhYCBhdCBpbmRleCAyLiA8LS0gdGhpcyBpcyB3cm9uZyFcbiAgICAgKlxuICAgICAqIFRoZSBjb3JyZWN0IGJlaGF2aW9yIGlzOlxuICAgICAqICAgMSkgZXZpY3QgZmlyc3QgYGFgXG4gICAgICogICAyKSBpbnNlcnQgYGJgIGF0IGAwYCBpbmRleC5cbiAgICAgKiAgIDMpIHJlaW5zZXJ0IGBhYCBhdCBpbmRleCAxLlxuICAgICAqICAgMykgbW92ZSBgYWAgYXQgZnJvbSBgMWAgdG8gYDJgLlxuICAgICAqXG4gICAgICpcbiAgICAgKiBEb3VibGUgY2hlY2sgdGhhdCB3ZSBoYXZlIG5vdCBldmljdGVkIGEgZHVwbGljYXRlIGl0ZW0uIFdlIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGl0ZW0gdHlwZSBtYXlcbiAgICAgKiBoYXZlIGFscmVhZHkgYmVlbiByZW1vdmVkOlxuICAgICAqIFRoZSBpbnNlcnRpb24gb2YgYiB3aWxsIGV2aWN0IHRoZSBmaXJzdCAnYScuIElmIHdlIGRvbid0IHJlaW5zZXJ0IGl0IG5vdyBpdCB3aWxsIGJlIHJlaW5zZXJ0ZWRcbiAgICAgKiBhdCB0aGUgZW5kLiBXaGljaCB3aWxsIHNob3cgdXAgYXMgdGhlIHR3byAnYSdzIHN3aXRjaGluZyBwb3NpdGlvbi4gVGhpcyBpcyBpbmNvcnJlY3QsIHNpbmNlIGFcbiAgICAgKiBiZXR0ZXIgd2F5IHRvIHRoaW5rIG9mIGl0IGlzIGFzIGluc2VydCBvZiAnYicgcmF0aGVyIHRoZW4gc3dpdGNoICdhJyB3aXRoICdiJyBhbmQgdGhlbiBhZGQgJ2EnXG4gICAgICogYXQgdGhlIGVuZC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF92ZXJpZnlSZWluc2VydGlvbihyZWNvcmQsIGl0ZW0sIGl0ZW1UcmFja0J5LCBpbmRleCkge1xuICAgICAgICBsZXQgcmVpbnNlcnRSZWNvcmQgPSB0aGlzLl91bmxpbmtlZFJlY29yZHMgPT09IG51bGwgPyBudWxsIDogdGhpcy5fdW5saW5rZWRSZWNvcmRzLmdldChpdGVtVHJhY2tCeSwgbnVsbCk7XG4gICAgICAgIGlmIChyZWluc2VydFJlY29yZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmVjb3JkID0gdGhpcy5fcmVpbnNlcnRBZnRlcihyZWluc2VydFJlY29yZCwgcmVjb3JkLl9wcmV2LCBpbmRleCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVjb3JkLmN1cnJlbnRJbmRleCAhPSBpbmRleCkge1xuICAgICAgICAgICAgcmVjb3JkLmN1cnJlbnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgdGhpcy5fYWRkVG9Nb3ZlcyhyZWNvcmQsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgcmlkIG9mIGFueSBleGNlc3Mge0BsaW5rIEl0ZXJhYmxlQ2hhbmdlUmVjb3JkX31zIGZyb20gdGhlIHByZXZpb3VzIGNvbGxlY3Rpb25cbiAgICAgKlxuICAgICAqIC0gYHJlY29yZGAgVGhlIGZpcnN0IGV4Y2VzcyB7QGxpbmsgSXRlcmFibGVDaGFuZ2VSZWNvcmRffS5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIF90cnVuY2F0ZShyZWNvcmQpIHtcbiAgICAgICAgLy8gQW55dGhpbmcgYWZ0ZXIgdGhhdCBuZWVkcyB0byBiZSByZW1vdmVkO1xuICAgICAgICB3aGlsZSAocmVjb3JkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0UmVjb3JkID0gcmVjb3JkLl9uZXh0O1xuICAgICAgICAgICAgdGhpcy5fYWRkVG9SZW1vdmFscyh0aGlzLl91bmxpbmsocmVjb3JkKSk7XG4gICAgICAgICAgICByZWNvcmQgPSBuZXh0UmVjb3JkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl91bmxpbmtlZFJlY29yZHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX3VubGlua2VkUmVjb3Jkcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9hZGRpdGlvbnNUYWlsICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9hZGRpdGlvbnNUYWlsLl9uZXh0QWRkZWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9tb3Zlc1RhaWwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX21vdmVzVGFpbC5fbmV4dE1vdmVkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5faXRUYWlsICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9pdFRhaWwuX25leHQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9yZW1vdmFsc1RhaWwgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlbW92YWxzVGFpbC5fbmV4dFJlbW92ZWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9pZGVudGl0eUNoYW5nZXNUYWlsICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9pZGVudGl0eUNoYW5nZXNUYWlsLl9uZXh0SWRlbnRpdHlDaGFuZ2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfcmVpbnNlcnRBZnRlcihyZWNvcmQsIHByZXZSZWNvcmQsIGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLl91bmxpbmtlZFJlY29yZHMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX3VubGlua2VkUmVjb3Jkcy5yZW1vdmUocmVjb3JkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2ID0gcmVjb3JkLl9wcmV2UmVtb3ZlZDtcbiAgICAgICAgY29uc3QgbmV4dCA9IHJlY29yZC5fbmV4dFJlbW92ZWQ7XG4gICAgICAgIGlmIChwcmV2ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmFsc0hlYWQgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJldi5fbmV4dFJlbW92ZWQgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW1vdmFsc1RhaWwgPSBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV4dC5fcHJldlJlbW92ZWQgPSBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2luc2VydEFmdGVyKHJlY29yZCwgcHJldlJlY29yZCwgaW5kZXgpO1xuICAgICAgICB0aGlzLl9hZGRUb01vdmVzKHJlY29yZCwgaW5kZXgpO1xuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX21vdmVBZnRlcihyZWNvcmQsIHByZXZSZWNvcmQsIGluZGV4KSB7XG4gICAgICAgIHRoaXMuX3VubGluayhyZWNvcmQpO1xuICAgICAgICB0aGlzLl9pbnNlcnRBZnRlcihyZWNvcmQsIHByZXZSZWNvcmQsIGluZGV4KTtcbiAgICAgICAgdGhpcy5fYWRkVG9Nb3ZlcyhyZWNvcmQsIGluZGV4KTtcbiAgICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9hZGRBZnRlcihyZWNvcmQsIHByZXZSZWNvcmQsIGluZGV4KSB7XG4gICAgICAgIHRoaXMuX2luc2VydEFmdGVyKHJlY29yZCwgcHJldlJlY29yZCwgaW5kZXgpO1xuICAgICAgICBpZiAodGhpcy5fYWRkaXRpb25zVGFpbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gVE9ETyh2aWNiKTpcbiAgICAgICAgICAgIC8vIGFzc2VydCh0aGlzLl9hZGRpdGlvbnNIZWFkID09PSBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuX2FkZGl0aW9uc1RhaWwgPSB0aGlzLl9hZGRpdGlvbnNIZWFkID0gcmVjb3JkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gVE9ETyh2aWNiKTpcbiAgICAgICAgICAgIC8vIGFzc2VydChfYWRkaXRpb25zVGFpbC5fbmV4dEFkZGVkID09PSBudWxsKTtcbiAgICAgICAgICAgIC8vIGFzc2VydChyZWNvcmQuX25leHRBZGRlZCA9PT0gbnVsbCk7XG4gICAgICAgICAgICB0aGlzLl9hZGRpdGlvbnNUYWlsID0gdGhpcy5fYWRkaXRpb25zVGFpbC5fbmV4dEFkZGVkID0gcmVjb3JkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWNvcmQ7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfaW5zZXJ0QWZ0ZXIocmVjb3JkLCBwcmV2UmVjb3JkLCBpbmRleCkge1xuICAgICAgICAvLyBUT0RPKHZpY2IpOlxuICAgICAgICAvLyBhc3NlcnQocmVjb3JkICE9IHByZXZSZWNvcmQpO1xuICAgICAgICAvLyBhc3NlcnQocmVjb3JkLl9uZXh0ID09PSBudWxsKTtcbiAgICAgICAgLy8gYXNzZXJ0KHJlY29yZC5fcHJldiA9PT0gbnVsbCk7XG4gICAgICAgIGNvbnN0IG5leHQgPSBwcmV2UmVjb3JkID09PSBudWxsID8gdGhpcy5faXRIZWFkIDogcHJldlJlY29yZC5fbmV4dDtcbiAgICAgICAgLy8gVE9ETyh2aWNiKTpcbiAgICAgICAgLy8gYXNzZXJ0KG5leHQgIT0gcmVjb3JkKTtcbiAgICAgICAgLy8gYXNzZXJ0KHByZXZSZWNvcmQgIT0gcmVjb3JkKTtcbiAgICAgICAgcmVjb3JkLl9uZXh0ID0gbmV4dDtcbiAgICAgICAgcmVjb3JkLl9wcmV2ID0gcHJldlJlY29yZDtcbiAgICAgICAgaWYgKG5leHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2l0VGFpbCA9IHJlY29yZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5leHQuX3ByZXYgPSByZWNvcmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZXZSZWNvcmQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2l0SGVhZCA9IHJlY29yZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByZXZSZWNvcmQuX25leHQgPSByZWNvcmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2xpbmtlZFJlY29yZHMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2xpbmtlZFJlY29yZHMgPSBuZXcgX0R1cGxpY2F0ZU1hcCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xpbmtlZFJlY29yZHMucHV0KHJlY29yZCk7XG4gICAgICAgIHJlY29yZC5jdXJyZW50SW5kZXggPSBpbmRleDtcbiAgICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9yZW1vdmUocmVjb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRUb1JlbW92YWxzKHRoaXMuX3VubGluayhyZWNvcmQpKTtcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF91bmxpbmsocmVjb3JkKSB7XG4gICAgICAgIGlmICh0aGlzLl9saW5rZWRSZWNvcmRzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9saW5rZWRSZWNvcmRzLnJlbW92ZShyZWNvcmQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXYgPSByZWNvcmQuX3ByZXY7XG4gICAgICAgIGNvbnN0IG5leHQgPSByZWNvcmQuX25leHQ7XG4gICAgICAgIC8vIFRPRE8odmljYik6XG4gICAgICAgIC8vIGFzc2VydCgocmVjb3JkLl9wcmV2ID0gbnVsbCkgPT09IG51bGwpO1xuICAgICAgICAvLyBhc3NlcnQoKHJlY29yZC5fbmV4dCA9IG51bGwpID09PSBudWxsKTtcbiAgICAgICAgaWYgKHByZXYgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2l0SGVhZCA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwcmV2Ll9uZXh0ID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV4dCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5faXRUYWlsID0gcHJldjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5leHQuX3ByZXYgPSBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWNvcmQ7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfYWRkVG9Nb3ZlcyhyZWNvcmQsIHRvSW5kZXgpIHtcbiAgICAgICAgLy8gVE9ETyh2aWNiKTpcbiAgICAgICAgLy8gYXNzZXJ0KHJlY29yZC5fbmV4dE1vdmVkID09PSBudWxsKTtcbiAgICAgICAgaWYgKHJlY29yZC5wcmV2aW91c0luZGV4ID09PSB0b0luZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9tb3Zlc1RhaWwgPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFRPRE8odmljYik6XG4gICAgICAgICAgICAvLyBhc3NlcnQoX21vdmVzSGVhZCA9PT0gbnVsbCk7XG4gICAgICAgICAgICB0aGlzLl9tb3Zlc1RhaWwgPSB0aGlzLl9tb3Zlc0hlYWQgPSByZWNvcmQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBUT0RPKHZpY2IpOlxuICAgICAgICAgICAgLy8gYXNzZXJ0KF9tb3Zlc1RhaWwuX25leHRNb3ZlZCA9PT0gbnVsbCk7XG4gICAgICAgICAgICB0aGlzLl9tb3Zlc1RhaWwgPSB0aGlzLl9tb3Zlc1RhaWwuX25leHRNb3ZlZCA9IHJlY29yZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH1cbiAgICBfYWRkVG9SZW1vdmFscyhyZWNvcmQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3VubGlua2VkUmVjb3JkcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fdW5saW5rZWRSZWNvcmRzID0gbmV3IF9EdXBsaWNhdGVNYXAoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl91bmxpbmtlZFJlY29yZHMucHV0KHJlY29yZCk7XG4gICAgICAgIHJlY29yZC5jdXJyZW50SW5kZXggPSBudWxsO1xuICAgICAgICByZWNvcmQuX25leHRSZW1vdmVkID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuX3JlbW92YWxzVGFpbCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gVE9ETyh2aWNiKTpcbiAgICAgICAgICAgIC8vIGFzc2VydChfcmVtb3ZhbHNIZWFkID09PSBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuX3JlbW92YWxzVGFpbCA9IHRoaXMuX3JlbW92YWxzSGVhZCA9IHJlY29yZDtcbiAgICAgICAgICAgIHJlY29yZC5fcHJldlJlbW92ZWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gVE9ETyh2aWNiKTpcbiAgICAgICAgICAgIC8vIGFzc2VydChfcmVtb3ZhbHNUYWlsLl9uZXh0UmVtb3ZlZCA9PT0gbnVsbCk7XG4gICAgICAgICAgICAvLyBhc3NlcnQocmVjb3JkLl9uZXh0UmVtb3ZlZCA9PT0gbnVsbCk7XG4gICAgICAgICAgICByZWNvcmQuX3ByZXZSZW1vdmVkID0gdGhpcy5fcmVtb3ZhbHNUYWlsO1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZhbHNUYWlsID0gdGhpcy5fcmVtb3ZhbHNUYWlsLl9uZXh0UmVtb3ZlZCA9IHJlY29yZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgX2FkZElkZW50aXR5Q2hhbmdlKHJlY29yZCwgaXRlbSkge1xuICAgICAgICByZWNvcmQuaXRlbSA9IGl0ZW07XG4gICAgICAgIGlmICh0aGlzLl9pZGVudGl0eUNoYW5nZXNUYWlsID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9pZGVudGl0eUNoYW5nZXNUYWlsID0gdGhpcy5faWRlbnRpdHlDaGFuZ2VzSGVhZCA9IHJlY29yZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2lkZW50aXR5Q2hhbmdlc1RhaWwgPSB0aGlzLl9pZGVudGl0eUNoYW5nZXNUYWlsLl9uZXh0SWRlbnRpdHlDaGFuZ2UgPSByZWNvcmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9XG59XG5jbGFzcyBJdGVyYWJsZUNoYW5nZVJlY29yZF8ge1xuICAgIGNvbnN0cnVjdG9yKGl0ZW0sIHRyYWNrQnlJZCkge1xuICAgICAgICB0aGlzLml0ZW0gPSBpdGVtO1xuICAgICAgICB0aGlzLnRyYWNrQnlJZCA9IHRyYWNrQnlJZDtcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSBudWxsO1xuICAgICAgICB0aGlzLnByZXZpb3VzSW5kZXggPSBudWxsO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX25leHRQcmV2aW91cyA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fcHJldiA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fbmV4dCA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fcHJldkR1cCA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fbmV4dER1cCA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fcHJldlJlbW92ZWQgPSBudWxsO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX25leHRSZW1vdmVkID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9uZXh0QWRkZWQgPSBudWxsO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX25leHRNb3ZlZCA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fbmV4dElkZW50aXR5Q2hhbmdlID0gbnVsbDtcbiAgICB9XG59XG4vLyBBIGxpbmtlZCBsaXN0IG9mIEl0ZXJhYmxlQ2hhbmdlUmVjb3JkcyB3aXRoIHRoZSBzYW1lIEl0ZXJhYmxlQ2hhbmdlUmVjb3JkXy5pdGVtXG5jbGFzcyBfRHVwbGljYXRlSXRlbVJlY29yZExpc3Qge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX2hlYWQgPSBudWxsO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX3RhaWwgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmQgdGhlIHJlY29yZCB0byB0aGUgbGlzdCBvZiBkdXBsaWNhdGVzLlxuICAgICAqXG4gICAgICogTm90ZTogYnkgZGVzaWduIGFsbCByZWNvcmRzIGluIHRoZSBsaXN0IG9mIGR1cGxpY2F0ZXMgaG9sZCB0aGUgc2FtZSB2YWx1ZSBpbiByZWNvcmQuaXRlbS5cbiAgICAgKi9cbiAgICBhZGQocmVjb3JkKSB7XG4gICAgICAgIGlmICh0aGlzLl9oZWFkID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9oZWFkID0gdGhpcy5fdGFpbCA9IHJlY29yZDtcbiAgICAgICAgICAgIHJlY29yZC5fbmV4dER1cCA9IG51bGw7XG4gICAgICAgICAgICByZWNvcmQuX3ByZXZEdXAgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gVE9ETyh2aWNiKTpcbiAgICAgICAgICAgIC8vIGFzc2VydChyZWNvcmQuaXRlbSA9PSAgX2hlYWQuaXRlbSB8fFxuICAgICAgICAgICAgLy8gICAgICAgcmVjb3JkLml0ZW0gaXMgbnVtICYmIHJlY29yZC5pdGVtLmlzTmFOICYmIF9oZWFkLml0ZW0gaXMgbnVtICYmIF9oZWFkLml0ZW0uaXNOYU4pO1xuICAgICAgICAgICAgdGhpcy5fdGFpbC5fbmV4dER1cCA9IHJlY29yZDtcbiAgICAgICAgICAgIHJlY29yZC5fcHJldkR1cCA9IHRoaXMuX3RhaWw7XG4gICAgICAgICAgICByZWNvcmQuX25leHREdXAgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fdGFpbCA9IHJlY29yZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgSXRlcmFibGVDaGFuZ2VSZWNvcmRfIGhhdmluZyBJdGVyYWJsZUNoYW5nZVJlY29yZF8udHJhY2tCeUlkID09IHRyYWNrQnlJZCBhbmRcbiAgICAvLyBJdGVyYWJsZUNoYW5nZVJlY29yZF8uY3VycmVudEluZGV4ID49IGF0T3JBZnRlckluZGV4XG4gICAgZ2V0KHRyYWNrQnlJZCwgYXRPckFmdGVySW5kZXgpIHtcbiAgICAgICAgbGV0IHJlY29yZDtcbiAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9oZWFkOyByZWNvcmQgIT09IG51bGw7IHJlY29yZCA9IHJlY29yZC5fbmV4dER1cCkge1xuICAgICAgICAgICAgaWYgKChhdE9yQWZ0ZXJJbmRleCA9PT0gbnVsbCB8fCBhdE9yQWZ0ZXJJbmRleCA8PSByZWNvcmQuY3VycmVudEluZGV4KSAmJlxuICAgICAgICAgICAgICAgIE9iamVjdC5pcyhyZWNvcmQudHJhY2tCeUlkLCB0cmFja0J5SWQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIG9uZSB7QGxpbmsgSXRlcmFibGVDaGFuZ2VSZWNvcmRffSBmcm9tIHRoZSBsaXN0IG9mIGR1cGxpY2F0ZXMuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGxpc3Qgb2YgZHVwbGljYXRlcyBpcyBlbXB0eS5cbiAgICAgKi9cbiAgICByZW1vdmUocmVjb3JkKSB7XG4gICAgICAgIC8vIFRPRE8odmljYik6XG4gICAgICAgIC8vIGFzc2VydCgoKSB7XG4gICAgICAgIC8vICAvLyB2ZXJpZnkgdGhhdCB0aGUgcmVjb3JkIGJlaW5nIHJlbW92ZWQgaXMgaW4gdGhlIGxpc3QuXG4gICAgICAgIC8vICBmb3IgKEl0ZXJhYmxlQ2hhbmdlUmVjb3JkXyBjdXJzb3IgPSBfaGVhZDsgY3Vyc29yICE9IG51bGw7IGN1cnNvciA9IGN1cnNvci5fbmV4dER1cCkge1xuICAgICAgICAvLyAgICBpZiAoaWRlbnRpY2FsKGN1cnNvciwgcmVjb3JkKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIC8vICB9XG4gICAgICAgIC8vICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vfSk7XG4gICAgICAgIGNvbnN0IHByZXYgPSByZWNvcmQuX3ByZXZEdXA7XG4gICAgICAgIGNvbnN0IG5leHQgPSByZWNvcmQuX25leHREdXA7XG4gICAgICAgIGlmIChwcmV2ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9oZWFkID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByZXYuX25leHREdXAgPSBuZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl90YWlsID0gcHJldjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5leHQuX3ByZXZEdXAgPSBwcmV2O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWFkID09PSBudWxsO1xuICAgIH1cbn1cbmNsYXNzIF9EdXBsaWNhdGVNYXAge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm1hcCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgcHV0KHJlY29yZCkge1xuICAgICAgICBjb25zdCBrZXkgPSByZWNvcmQudHJhY2tCeUlkO1xuICAgICAgICBsZXQgZHVwbGljYXRlcyA9IHRoaXMubWFwLmdldChrZXkpO1xuICAgICAgICBpZiAoIWR1cGxpY2F0ZXMpIHtcbiAgICAgICAgICAgIGR1cGxpY2F0ZXMgPSBuZXcgX0R1cGxpY2F0ZUl0ZW1SZWNvcmRMaXN0KCk7XG4gICAgICAgICAgICB0aGlzLm1hcC5zZXQoa2V5LCBkdXBsaWNhdGVzKTtcbiAgICAgICAgfVxuICAgICAgICBkdXBsaWNhdGVzLmFkZChyZWNvcmQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSB0aGUgYHZhbHVlYCB1c2luZyBrZXkuIEJlY2F1c2UgdGhlIEl0ZXJhYmxlQ2hhbmdlUmVjb3JkXyB2YWx1ZSBtYXkgYmUgb25lIHdoaWNoIHdlXG4gICAgICogaGF2ZSBhbHJlYWR5IGl0ZXJhdGVkIG92ZXIsIHdlIHVzZSB0aGUgYGF0T3JBZnRlckluZGV4YCB0byBwcmV0ZW5kIGl0IGlzIG5vdCB0aGVyZS5cbiAgICAgKlxuICAgICAqIFVzZSBjYXNlOiBgW2EsIGIsIGMsIGEsIGFdYCBpZiB3ZSBhcmUgYXQgaW5kZXggYDNgIHdoaWNoIGlzIHRoZSBzZWNvbmQgYGFgIHRoZW4gYXNraW5nIGlmIHdlXG4gICAgICogaGF2ZSBhbnkgbW9yZSBgYWBzIG5lZWRzIHRvIHJldHVybiB0aGUgc2Vjb25kIGBhYC5cbiAgICAgKi9cbiAgICBnZXQodHJhY2tCeUlkLCBhdE9yQWZ0ZXJJbmRleCkge1xuICAgICAgICBjb25zdCBrZXkgPSB0cmFja0J5SWQ7XG4gICAgICAgIGNvbnN0IHJlY29yZExpc3QgPSB0aGlzLm1hcC5nZXQoa2V5KTtcbiAgICAgICAgcmV0dXJuIHJlY29yZExpc3QgPyByZWNvcmRMaXN0LmdldCh0cmFja0J5SWQsIGF0T3JBZnRlckluZGV4KSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSB7QGxpbmsgSXRlcmFibGVDaGFuZ2VSZWNvcmRffSBmcm9tIHRoZSBsaXN0IG9mIGR1cGxpY2F0ZXMuXG4gICAgICpcbiAgICAgKiBUaGUgbGlzdCBvZiBkdXBsaWNhdGVzIGFsc28gaXMgcmVtb3ZlZCBmcm9tIHRoZSBtYXAgaWYgaXQgZ2V0cyBlbXB0eS5cbiAgICAgKi9cbiAgICByZW1vdmUocmVjb3JkKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHJlY29yZC50cmFja0J5SWQ7XG4gICAgICAgIGNvbnN0IHJlY29yZExpc3QgPSB0aGlzLm1hcC5nZXQoa2V5KTtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBsaXN0IG9mIGR1cGxpY2F0ZXMgd2hlbiBpdCBnZXRzIGVtcHR5XG4gICAgICAgIGlmIChyZWNvcmRMaXN0LnJlbW92ZShyZWNvcmQpKSB7XG4gICAgICAgICAgICB0aGlzLm1hcC5kZWxldGUoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwLnNpemUgPT09IDA7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLm1hcC5jbGVhcigpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFByZXZpb3VzSW5kZXgoaXRlbSwgYWRkUmVtb3ZlT2Zmc2V0LCBtb3ZlT2Zmc2V0cykge1xuICAgIGNvbnN0IHByZXZpb3VzSW5kZXggPSBpdGVtLnByZXZpb3VzSW5kZXg7XG4gICAgaWYgKHByZXZpb3VzSW5kZXggPT09IG51bGwpXG4gICAgICAgIHJldHVybiBwcmV2aW91c0luZGV4O1xuICAgIGxldCBtb3ZlT2Zmc2V0ID0gMDtcbiAgICBpZiAobW92ZU9mZnNldHMgJiYgcHJldmlvdXNJbmRleCA8IG1vdmVPZmZzZXRzLmxlbmd0aCkge1xuICAgICAgICBtb3ZlT2Zmc2V0ID0gbW92ZU9mZnNldHNbcHJldmlvdXNJbmRleF07XG4gICAgfVxuICAgIHJldHVybiBwcmV2aW91c0luZGV4ICsgYWRkUmVtb3ZlT2Zmc2V0ICsgbW92ZU9mZnNldDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5jbGFzcyBEZWZhdWx0S2V5VmFsdWVEaWZmZXJGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHN1cHBvcnRzKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgTWFwIHx8IGlzSnNPYmplY3Qob2JqKTtcbiAgICB9XG4gICAgY3JlYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERlZmF1bHRLZXlWYWx1ZURpZmZlcigpO1xuICAgIH1cbn1cbmNsYXNzIERlZmF1bHRLZXlWYWx1ZURpZmZlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3JlY29yZHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuX21hcEhlYWQgPSBudWxsO1xuICAgICAgICAvLyBfYXBwZW5kQWZ0ZXIgaXMgdXNlZCBpbiB0aGUgY2hlY2sgbG9vcFxuICAgICAgICB0aGlzLl9hcHBlbmRBZnRlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzTWFwSGVhZCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2NoYW5nZXNIZWFkID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2hhbmdlc1RhaWwgPSBudWxsO1xuICAgICAgICB0aGlzLl9hZGRpdGlvbnNIZWFkID0gbnVsbDtcbiAgICAgICAgdGhpcy5fYWRkaXRpb25zVGFpbCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3JlbW92YWxzSGVhZCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3JlbW92YWxzVGFpbCA9IG51bGw7XG4gICAgfVxuICAgIGdldCBpc0RpcnR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkaXRpb25zSGVhZCAhPT0gbnVsbCB8fCB0aGlzLl9jaGFuZ2VzSGVhZCAhPT0gbnVsbCB8fFxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZhbHNIZWFkICE9PSBudWxsO1xuICAgIH1cbiAgICBmb3JFYWNoSXRlbShmbikge1xuICAgICAgICBsZXQgcmVjb3JkO1xuICAgICAgICBmb3IgKHJlY29yZCA9IHRoaXMuX21hcEhlYWQ7IHJlY29yZCAhPT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0KSB7XG4gICAgICAgICAgICBmbihyZWNvcmQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvckVhY2hQcmV2aW91c0l0ZW0oZm4pIHtcbiAgICAgICAgbGV0IHJlY29yZDtcbiAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9wcmV2aW91c01hcEhlYWQ7IHJlY29yZCAhPT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0UHJldmlvdXMpIHtcbiAgICAgICAgICAgIGZuKHJlY29yZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yRWFjaENoYW5nZWRJdGVtKGZuKSB7XG4gICAgICAgIGxldCByZWNvcmQ7XG4gICAgICAgIGZvciAocmVjb3JkID0gdGhpcy5fY2hhbmdlc0hlYWQ7IHJlY29yZCAhPT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0Q2hhbmdlZCkge1xuICAgICAgICAgICAgZm4ocmVjb3JkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JFYWNoQWRkZWRJdGVtKGZuKSB7XG4gICAgICAgIGxldCByZWNvcmQ7XG4gICAgICAgIGZvciAocmVjb3JkID0gdGhpcy5fYWRkaXRpb25zSGVhZDsgcmVjb3JkICE9PSBudWxsOyByZWNvcmQgPSByZWNvcmQuX25leHRBZGRlZCkge1xuICAgICAgICAgICAgZm4ocmVjb3JkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3JFYWNoUmVtb3ZlZEl0ZW0oZm4pIHtcbiAgICAgICAgbGV0IHJlY29yZDtcbiAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9yZW1vdmFsc0hlYWQ7IHJlY29yZCAhPT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0UmVtb3ZlZCkge1xuICAgICAgICAgICAgZm4ocmVjb3JkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaWZmKG1hcCkge1xuICAgICAgICBpZiAoIW1hcCkge1xuICAgICAgICAgICAgbWFwID0gbmV3IE1hcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCEobWFwIGluc3RhbmNlb2YgTWFwIHx8IGlzSnNPYmplY3QobWFwKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9ICh0eXBlb2YgbmdEZXZNb2RlID09PSAndW5kZWZpbmVkJyB8fCBuZ0Rldk1vZGUpID9cbiAgICAgICAgICAgICAgICBgRXJyb3IgdHJ5aW5nIHRvIGRpZmYgJyR7c3RyaW5naWZ5KG1hcCl9Jy4gT25seSBtYXBzIGFuZCBvYmplY3RzIGFyZSBhbGxvd2VkYCA6XG4gICAgICAgICAgICAgICAgJyc7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDkwMCAvKiBJTlZBTElEX0RJRkZFUl9JTlBVVCAqLywgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jaGVjayhtYXApID8gdGhpcyA6IG51bGw7XG4gICAgfVxuICAgIG9uRGVzdHJveSgpIHsgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBtYXAgdnMgdGhlIHByZXZpb3VzLlxuICAgICAqIFRoZSBhbGdvcml0aG0gaXMgb3B0aW1pc2VkIGZvciB3aGVuIHRoZSBrZXlzIGRvIG5vIGNoYW5nZS5cbiAgICAgKi9cbiAgICBjaGVjayhtYXApIHtcbiAgICAgICAgdGhpcy5fcmVzZXQoKTtcbiAgICAgICAgbGV0IGluc2VydEJlZm9yZSA9IHRoaXMuX21hcEhlYWQ7XG4gICAgICAgIHRoaXMuX2FwcGVuZEFmdGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fZm9yRWFjaChtYXAsICh2YWx1ZSwga2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5zZXJ0QmVmb3JlICYmIGluc2VydEJlZm9yZS5rZXkgPT09IGtleSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21heWJlQWRkVG9DaGFuZ2VzKGluc2VydEJlZm9yZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2FwcGVuZEFmdGVyID0gaW5zZXJ0QmVmb3JlO1xuICAgICAgICAgICAgICAgIGluc2VydEJlZm9yZSA9IGluc2VydEJlZm9yZS5fbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY29yZCA9IHRoaXMuX2dldE9yQ3JlYXRlUmVjb3JkRm9yS2V5KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGluc2VydEJlZm9yZSA9IHRoaXMuX2luc2VydEJlZm9yZU9yQXBwZW5kKGluc2VydEJlZm9yZSwgcmVjb3JkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEl0ZW1zIHJlbWFpbmluZyBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0IGhhdmUgYmVlbiBkZWxldGVkXG4gICAgICAgIGlmIChpbnNlcnRCZWZvcmUpIHtcbiAgICAgICAgICAgIGlmIChpbnNlcnRCZWZvcmUuX3ByZXYpIHtcbiAgICAgICAgICAgICAgICBpbnNlcnRCZWZvcmUuX3ByZXYuX25leHQgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fcmVtb3ZhbHNIZWFkID0gaW5zZXJ0QmVmb3JlO1xuICAgICAgICAgICAgZm9yIChsZXQgcmVjb3JkID0gaW5zZXJ0QmVmb3JlOyByZWNvcmQgIT09IG51bGw7IHJlY29yZCA9IHJlY29yZC5fbmV4dFJlbW92ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVjb3JkID09PSB0aGlzLl9tYXBIZWFkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcEhlYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9yZWNvcmRzLmRlbGV0ZShyZWNvcmQua2V5KTtcbiAgICAgICAgICAgICAgICByZWNvcmQuX25leHRSZW1vdmVkID0gcmVjb3JkLl9uZXh0O1xuICAgICAgICAgICAgICAgIHJlY29yZC5wcmV2aW91c1ZhbHVlID0gcmVjb3JkLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgICAgICByZWNvcmQuY3VycmVudFZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZWNvcmQuX3ByZXYgPSBudWxsO1xuICAgICAgICAgICAgICAgIHJlY29yZC5fbmV4dCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRhaWxzIGhhdmUgbm8gbmV4dCByZWNvcmRzIGZyb20gcHJldmlvdXMgcnVuc1xuICAgICAgICBpZiAodGhpcy5fY2hhbmdlc1RhaWwpXG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VzVGFpbC5fbmV4dENoYW5nZWQgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5fYWRkaXRpb25zVGFpbClcbiAgICAgICAgICAgIHRoaXMuX2FkZGl0aW9uc1RhaWwuX25leHRBZGRlZCA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRGlydHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluc2VydHMgYSByZWNvcmQgYmVmb3JlIGBiZWZvcmVgIG9yIGFwcGVuZCBhdCB0aGUgZW5kIG9mIHRoZSBsaXN0IHdoZW4gYGJlZm9yZWAgaXMgbnVsbC5cbiAgICAgKlxuICAgICAqIE5vdGVzOlxuICAgICAqIC0gVGhpcyBtZXRob2QgYXBwZW5kcyBhdCBgdGhpcy5fYXBwZW5kQWZ0ZXJgLFxuICAgICAqIC0gVGhpcyBtZXRob2QgdXBkYXRlcyBgdGhpcy5fYXBwZW5kQWZ0ZXJgLFxuICAgICAqIC0gVGhlIHJldHVybiB2YWx1ZSBpcyB0aGUgbmV3IHZhbHVlIGZvciB0aGUgaW5zZXJ0aW9uIHBvaW50ZXIuXG4gICAgICovXG4gICAgX2luc2VydEJlZm9yZU9yQXBwZW5kKGJlZm9yZSwgcmVjb3JkKSB7XG4gICAgICAgIGlmIChiZWZvcmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHByZXYgPSBiZWZvcmUuX3ByZXY7XG4gICAgICAgICAgICByZWNvcmQuX25leHQgPSBiZWZvcmU7XG4gICAgICAgICAgICByZWNvcmQuX3ByZXYgPSBwcmV2O1xuICAgICAgICAgICAgYmVmb3JlLl9wcmV2ID0gcmVjb3JkO1xuICAgICAgICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgICAgICAgICBwcmV2Ll9uZXh0ID0gcmVjb3JkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJlZm9yZSA9PT0gdGhpcy5fbWFwSGVhZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21hcEhlYWQgPSByZWNvcmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9hcHBlbmRBZnRlciA9IGJlZm9yZTtcbiAgICAgICAgICAgIHJldHVybiBiZWZvcmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2FwcGVuZEFmdGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9hcHBlbmRBZnRlci5fbmV4dCA9IHJlY29yZDtcbiAgICAgICAgICAgIHJlY29yZC5fcHJldiA9IHRoaXMuX2FwcGVuZEFmdGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbWFwSGVhZCA9IHJlY29yZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hcHBlbmRBZnRlciA9IHJlY29yZDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIF9nZXRPckNyZWF0ZVJlY29yZEZvcktleShrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLl9yZWNvcmRzLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICBjb25zdCByZWNvcmQgPSB0aGlzLl9yZWNvcmRzLmdldChrZXkpO1xuICAgICAgICAgICAgdGhpcy5fbWF5YmVBZGRUb0NoYW5nZXMocmVjb3JkLCB2YWx1ZSk7XG4gICAgICAgICAgICBjb25zdCBwcmV2ID0gcmVjb3JkLl9wcmV2O1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHJlY29yZC5fbmV4dDtcbiAgICAgICAgICAgIGlmIChwcmV2KSB7XG4gICAgICAgICAgICAgICAgcHJldi5fbmV4dCA9IG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV4dCkge1xuICAgICAgICAgICAgICAgIG5leHQuX3ByZXYgPSBwcmV2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVjb3JkLl9uZXh0ID0gbnVsbDtcbiAgICAgICAgICAgIHJlY29yZC5fcHJldiA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gcmVjb3JkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlY29yZCA9IG5ldyBLZXlWYWx1ZUNoYW5nZVJlY29yZF8oa2V5KTtcbiAgICAgICAgdGhpcy5fcmVjb3Jkcy5zZXQoa2V5LCByZWNvcmQpO1xuICAgICAgICByZWNvcmQuY3VycmVudFZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX2FkZFRvQWRkaXRpb25zKHJlY29yZCk7XG4gICAgICAgIHJldHVybiByZWNvcmQ7XG4gICAgfVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBfcmVzZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGlydHkpIHtcbiAgICAgICAgICAgIGxldCByZWNvcmQ7XG4gICAgICAgICAgICAvLyBsZXQgYF9wcmV2aW91c01hcEhlYWRgIGNvbnRhaW4gdGhlIHN0YXRlIG9mIHRoZSBtYXAgYmVmb3JlIHRoZSBjaGFuZ2VzXG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c01hcEhlYWQgPSB0aGlzLl9tYXBIZWFkO1xuICAgICAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9wcmV2aW91c01hcEhlYWQ7IHJlY29yZCAhPT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0KSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkLl9uZXh0UHJldmlvdXMgPSByZWNvcmQuX25leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVcGRhdGUgYHJlY29yZC5wcmV2aW91c1ZhbHVlYCB3aXRoIHRoZSB2YWx1ZSBvZiB0aGUgaXRlbSBiZWZvcmUgdGhlIGNoYW5nZXNcbiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gdXBkYXRlIGFsbCBjaGFuZ2VkIGl0ZW1zICh0aGF0J3MgdGhvc2Ugd2hpY2ggaGF2ZSBiZWVuIGFkZGVkIGFuZCBjaGFuZ2VkKVxuICAgICAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9jaGFuZ2VzSGVhZDsgcmVjb3JkICE9PSBudWxsOyByZWNvcmQgPSByZWNvcmQuX25leHRDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkLnByZXZpb3VzVmFsdWUgPSByZWNvcmQuY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChyZWNvcmQgPSB0aGlzLl9hZGRpdGlvbnNIZWFkOyByZWNvcmQgIT0gbnVsbDsgcmVjb3JkID0gcmVjb3JkLl9uZXh0QWRkZWQpIHtcbiAgICAgICAgICAgICAgICByZWNvcmQucHJldmlvdXNWYWx1ZSA9IHJlY29yZC5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VzSGVhZCA9IHRoaXMuX2NoYW5nZXNUYWlsID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2FkZGl0aW9uc0hlYWQgPSB0aGlzLl9hZGRpdGlvbnNUYWlsID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3JlbW92YWxzSGVhZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQWRkIHRoZSByZWNvcmQgb3IgYSBnaXZlbiBrZXkgdG8gdGhlIGxpc3Qgb2YgY2hhbmdlcyBvbmx5IHdoZW4gdGhlIHZhbHVlIGhhcyBhY3R1YWxseSBjaGFuZ2VkXG4gICAgX21heWJlQWRkVG9DaGFuZ2VzKHJlY29yZCwgbmV3VmFsdWUpIHtcbiAgICAgICAgaWYgKCFPYmplY3QuaXMobmV3VmFsdWUsIHJlY29yZC5jdXJyZW50VmFsdWUpKSB7XG4gICAgICAgICAgICByZWNvcmQucHJldmlvdXNWYWx1ZSA9IHJlY29yZC5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICByZWNvcmQuY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9hZGRUb0NoYW5nZXMocmVjb3JkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfYWRkVG9BZGRpdGlvbnMocmVjb3JkKSB7XG4gICAgICAgIGlmICh0aGlzLl9hZGRpdGlvbnNIZWFkID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9hZGRpdGlvbnNIZWFkID0gdGhpcy5fYWRkaXRpb25zVGFpbCA9IHJlY29yZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZGl0aW9uc1RhaWwuX25leHRBZGRlZCA9IHJlY29yZDtcbiAgICAgICAgICAgIHRoaXMuX2FkZGl0aW9uc1RhaWwgPSByZWNvcmQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2FkZFRvQ2hhbmdlcyhyZWNvcmQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NoYW5nZXNIZWFkID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VzSGVhZCA9IHRoaXMuX2NoYW5nZXNUYWlsID0gcmVjb3JkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2hhbmdlc1RhaWwuX25leHRDaGFuZ2VkID0gcmVjb3JkO1xuICAgICAgICAgICAgdGhpcy5fY2hhbmdlc1RhaWwgPSByZWNvcmQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIF9mb3JFYWNoKG9iaiwgZm4pIHtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgb2JqLmZvckVhY2goZm4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGsgPT4gZm4ob2JqW2tdLCBrKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jbGFzcyBLZXlWYWx1ZUNoYW5nZVJlY29yZF8ge1xuICAgIGNvbnN0cnVjdG9yKGtleSkge1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBudWxsO1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMuX25leHRQcmV2aW91cyA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fbmV4dCA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fcHJldiA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fbmV4dEFkZGVkID0gbnVsbDtcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICAgICB0aGlzLl9uZXh0UmVtb3ZlZCA9IG51bGw7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5fbmV4dENoYW5nZWQgPSBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5mdW5jdGlvbiBkZWZhdWx0SXRlcmFibGVEaWZmZXJzRmFjdG9yeSgpIHtcbiAgICByZXR1cm4gbmV3IEl0ZXJhYmxlRGlmZmVycyhbbmV3IERlZmF1bHRJdGVyYWJsZURpZmZlckZhY3RvcnkoKV0pO1xufVxuLyoqXG4gKiBBIHJlcG9zaXRvcnkgb2YgZGlmZmVyZW50IGl0ZXJhYmxlIGRpZmZpbmcgc3RyYXRlZ2llcyB1c2VkIGJ5IE5nRm9yLCBOZ0NsYXNzLCBhbmQgb3RoZXJzLlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgSXRlcmFibGVEaWZmZXJzIHtcbiAgICBjb25zdHJ1Y3RvcihmYWN0b3JpZXMpIHtcbiAgICAgICAgdGhpcy5mYWN0b3JpZXMgPSBmYWN0b3JpZXM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoZmFjdG9yaWVzLCBwYXJlbnQpIHtcbiAgICAgICAgaWYgKHBhcmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjb3BpZWQgPSBwYXJlbnQuZmFjdG9yaWVzLnNsaWNlKCk7XG4gICAgICAgICAgICBmYWN0b3JpZXMgPSBmYWN0b3JpZXMuY29uY2F0KGNvcGllZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBJdGVyYWJsZURpZmZlcnMoZmFjdG9yaWVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGFrZXMgYW4gYXJyYXkgb2Yge0BsaW5rIEl0ZXJhYmxlRGlmZmVyRmFjdG9yeX0gYW5kIHJldHVybnMgYSBwcm92aWRlciB1c2VkIHRvIGV4dGVuZCB0aGVcbiAgICAgKiBpbmhlcml0ZWQge0BsaW5rIEl0ZXJhYmxlRGlmZmVyc30gaW5zdGFuY2Ugd2l0aCB0aGUgcHJvdmlkZWQgZmFjdG9yaWVzIGFuZCByZXR1cm4gYSBuZXdcbiAgICAgKiB7QGxpbmsgSXRlcmFibGVEaWZmZXJzfSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEB1c2FnZU5vdGVzXG4gICAgICogIyMjIEV4YW1wbGVcbiAgICAgKlxuICAgICAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gZXh0ZW5kIGFuIGV4aXN0aW5nIGxpc3Qgb2YgZmFjdG9yaWVzLFxuICAgICAqIHdoaWNoIHdpbGwgb25seSBiZSBhcHBsaWVkIHRvIHRoZSBpbmplY3RvciBmb3IgdGhpcyBjb21wb25lbnQgYW5kIGl0cyBjaGlsZHJlbi5cbiAgICAgKiBUaGlzIHN0ZXAgaXMgYWxsIHRoYXQncyByZXF1aXJlZCB0byBtYWtlIGEgbmV3IHtAbGluayBJdGVyYWJsZURpZmZlcn0gYXZhaWxhYmxlLlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogQENvbXBvbmVudCh7XG4gICAgICogICB2aWV3UHJvdmlkZXJzOiBbXG4gICAgICogICAgIEl0ZXJhYmxlRGlmZmVycy5leHRlbmQoW25ldyBJbW11dGFibGVMaXN0RGlmZmVyKCldKVxuICAgICAqICAgXVxuICAgICAqIH0pXG4gICAgICogYGBgXG4gICAgICovXG4gICAgc3RhdGljIGV4dGVuZChmYWN0b3JpZXMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHByb3ZpZGU6IEl0ZXJhYmxlRGlmZmVycyxcbiAgICAgICAgICAgIHVzZUZhY3Rvcnk6IChwYXJlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBpZiBwYXJlbnQgaXMgbnVsbCwgaXQgbWVhbnMgdGhhdCB3ZSBhcmUgaW4gdGhlIHJvb3QgaW5qZWN0b3IgYW5kIHdlIGhhdmUganVzdCBvdmVycmlkZGVuXG4gICAgICAgICAgICAgICAgLy8gdGhlIGRlZmF1bHQgaW5qZWN0aW9uIG1lY2hhbmlzbSBmb3IgSXRlcmFibGVEaWZmZXJzLCBpbiBzdWNoIGEgY2FzZSBqdXN0IGFzc3VtZVxuICAgICAgICAgICAgICAgIC8vIGBkZWZhdWx0SXRlcmFibGVEaWZmZXJzRmFjdG9yeWAuXG4gICAgICAgICAgICAgICAgcmV0dXJuIEl0ZXJhYmxlRGlmZmVycy5jcmVhdGUoZmFjdG9yaWVzLCBwYXJlbnQgfHwgZGVmYXVsdEl0ZXJhYmxlRGlmZmVyc0ZhY3RvcnkoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLy8gRGVwZW5kZW5jeSB0ZWNobmljYWxseSBpc24ndCBvcHRpb25hbCwgYnV0IHdlIGNhbiBwcm92aWRlIGEgYmV0dGVyIGVycm9yIG1lc3NhZ2UgdGhpcyB3YXkuXG4gICAgICAgICAgICBkZXBzOiBbW0l0ZXJhYmxlRGlmZmVycywgbmV3IFNraXBTZWxmKCksIG5ldyBPcHRpb25hbCgpXV1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgZmluZChpdGVyYWJsZSkge1xuICAgICAgICBjb25zdCBmYWN0b3J5ID0gdGhpcy5mYWN0b3JpZXMuZmluZChmID0+IGYuc3VwcG9ydHMoaXRlcmFibGUpKTtcbiAgICAgICAgaWYgKGZhY3RvcnkgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAodHlwZW9mIG5nRGV2TW9kZSA9PT0gJ3VuZGVmaW5lZCcgfHwgbmdEZXZNb2RlKSA/XG4gICAgICAgICAgICAgICAgYENhbm5vdCBmaW5kIGEgZGlmZmVyIHN1cHBvcnRpbmcgb2JqZWN0ICcke2l0ZXJhYmxlfScgb2YgdHlwZSAnJHtnZXRUeXBlTmFtZUZvckRlYnVnZ2luZyhpdGVyYWJsZSl9J2AgOlxuICAgICAgICAgICAgICAgICcnO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcig5MDEgLyogTk9fU1VQUE9SVElOR19ESUZGRVJfRkFDVE9SWSAqLywgZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKiBAbm9jb2xsYXBzZSAqL1xuSXRlcmFibGVEaWZmZXJzLsm1cHJvdiA9IMm1ybVkZWZpbmVJbmplY3RhYmxlKHsgdG9rZW46IEl0ZXJhYmxlRGlmZmVycywgcHJvdmlkZWRJbjogJ3Jvb3QnLCBmYWN0b3J5OiBkZWZhdWx0SXRlcmFibGVEaWZmZXJzRmFjdG9yeSB9KTtcbmZ1bmN0aW9uIGdldFR5cGVOYW1lRm9yRGVidWdnaW5nKHR5cGUpIHtcbiAgICByZXR1cm4gdHlwZVsnbmFtZSddIHx8IHR5cGVvZiB0eXBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRLZXlWYWx1ZURpZmZlcnNGYWN0b3J5KCkge1xuICAgIHJldHVybiBuZXcgS2V5VmFsdWVEaWZmZXJzKFtuZXcgRGVmYXVsdEtleVZhbHVlRGlmZmVyRmFjdG9yeSgpXSk7XG59XG4vKipcbiAqIEEgcmVwb3NpdG9yeSBvZiBkaWZmZXJlbnQgTWFwIGRpZmZpbmcgc3RyYXRlZ2llcyB1c2VkIGJ5IE5nQ2xhc3MsIE5nU3R5bGUsIGFuZCBvdGhlcnMuXG4gKlxuICogQHB1YmxpY0FwaVxuICovXG5jbGFzcyBLZXlWYWx1ZURpZmZlcnMge1xuICAgIGNvbnN0cnVjdG9yKGZhY3Rvcmllcykge1xuICAgICAgICB0aGlzLmZhY3RvcmllcyA9IGZhY3RvcmllcztcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmYWN0b3JpZXMsIHBhcmVudCkge1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICBjb25zdCBjb3BpZWQgPSBwYXJlbnQuZmFjdG9yaWVzLnNsaWNlKCk7XG4gICAgICAgICAgICBmYWN0b3JpZXMgPSBmYWN0b3JpZXMuY29uY2F0KGNvcGllZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBLZXlWYWx1ZURpZmZlcnMoZmFjdG9yaWVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGFrZXMgYW4gYXJyYXkgb2Yge0BsaW5rIEtleVZhbHVlRGlmZmVyRmFjdG9yeX0gYW5kIHJldHVybnMgYSBwcm92aWRlciB1c2VkIHRvIGV4dGVuZCB0aGVcbiAgICAgKiBpbmhlcml0ZWQge0BsaW5rIEtleVZhbHVlRGlmZmVyc30gaW5zdGFuY2Ugd2l0aCB0aGUgcHJvdmlkZWQgZmFjdG9yaWVzIGFuZCByZXR1cm4gYSBuZXdcbiAgICAgKiB7QGxpbmsgS2V5VmFsdWVEaWZmZXJzfSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEB1c2FnZU5vdGVzXG4gICAgICogIyMjIEV4YW1wbGVcbiAgICAgKlxuICAgICAqIFRoZSBmb2xsb3dpbmcgZXhhbXBsZSBzaG93cyBob3cgdG8gZXh0ZW5kIGFuIGV4aXN0aW5nIGxpc3Qgb2YgZmFjdG9yaWVzLFxuICAgICAqIHdoaWNoIHdpbGwgb25seSBiZSBhcHBsaWVkIHRvIHRoZSBpbmplY3RvciBmb3IgdGhpcyBjb21wb25lbnQgYW5kIGl0cyBjaGlsZHJlbi5cbiAgICAgKiBUaGlzIHN0ZXAgaXMgYWxsIHRoYXQncyByZXF1aXJlZCB0byBtYWtlIGEgbmV3IHtAbGluayBLZXlWYWx1ZURpZmZlcn0gYXZhaWxhYmxlLlxuICAgICAqXG4gICAgICogYGBgXG4gICAgICogQENvbXBvbmVudCh7XG4gICAgICogICB2aWV3UHJvdmlkZXJzOiBbXG4gICAgICogICAgIEtleVZhbHVlRGlmZmVycy5leHRlbmQoW25ldyBJbW11dGFibGVNYXBEaWZmZXIoKV0pXG4gICAgICogICBdXG4gICAgICogfSlcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzdGF0aWMgZXh0ZW5kKGZhY3Rvcmllcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvdmlkZTogS2V5VmFsdWVEaWZmZXJzLFxuICAgICAgICAgICAgdXNlRmFjdG9yeTogKHBhcmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGlmIHBhcmVudCBpcyBudWxsLCBpdCBtZWFucyB0aGF0IHdlIGFyZSBpbiB0aGUgcm9vdCBpbmplY3RvciBhbmQgd2UgaGF2ZSBqdXN0IG92ZXJyaWRkZW5cbiAgICAgICAgICAgICAgICAvLyB0aGUgZGVmYXVsdCBpbmplY3Rpb24gbWVjaGFuaXNtIGZvciBLZXlWYWx1ZURpZmZlcnMsIGluIHN1Y2ggYSBjYXNlIGp1c3QgYXNzdW1lXG4gICAgICAgICAgICAgICAgLy8gYGRlZmF1bHRLZXlWYWx1ZURpZmZlcnNGYWN0b3J5YC5cbiAgICAgICAgICAgICAgICByZXR1cm4gS2V5VmFsdWVEaWZmZXJzLmNyZWF0ZShmYWN0b3JpZXMsIHBhcmVudCB8fCBkZWZhdWx0S2V5VmFsdWVEaWZmZXJzRmFjdG9yeSgpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvLyBEZXBlbmRlbmN5IHRlY2huaWNhbGx5IGlzbid0IG9wdGlvbmFsLCBidXQgd2UgY2FuIHByb3ZpZGUgYSBiZXR0ZXIgZXJyb3IgbWVzc2FnZSB0aGlzIHdheS5cbiAgICAgICAgICAgIGRlcHM6IFtbS2V5VmFsdWVEaWZmZXJzLCBuZXcgU2tpcFNlbGYoKSwgbmV3IE9wdGlvbmFsKCldXVxuICAgICAgICB9O1xuICAgIH1cbiAgICBmaW5kKGt2KSB7XG4gICAgICAgIGNvbnN0IGZhY3RvcnkgPSB0aGlzLmZhY3Rvcmllcy5maW5kKGYgPT4gZi5zdXBwb3J0cyhrdikpO1xuICAgICAgICBpZiAoZmFjdG9yeSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gKHR5cGVvZiBuZ0Rldk1vZGUgPT09ICd1bmRlZmluZWQnIHx8IG5nRGV2TW9kZSkgP1xuICAgICAgICAgICAgYENhbm5vdCBmaW5kIGEgZGlmZmVyIHN1cHBvcnRpbmcgb2JqZWN0ICcke2t2fSdgIDpcbiAgICAgICAgICAgICcnO1xuICAgICAgICB0aHJvdyBuZXcgUnVudGltZUVycm9yKDkwMSAvKiBOT19TVVBQT1JUSU5HX0RJRkZFUl9GQUNUT1JZICovLCBlcnJvck1lc3NhZ2UpO1xuICAgIH1cbn1cbi8qKiBAbm9jb2xsYXBzZSAqL1xuS2V5VmFsdWVEaWZmZXJzLsm1cHJvdiA9IMm1ybVkZWZpbmVJbmplY3RhYmxlKHsgdG9rZW46IEtleVZhbHVlRGlmZmVycywgcHJvdmlkZWRJbjogJ3Jvb3QnLCBmYWN0b3J5OiBkZWZhdWx0S2V5VmFsdWVEaWZmZXJzRmFjdG9yeSB9KTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFN0cnVjdHVyYWwgZGlmZmluZyBmb3IgYE9iamVjdGBzIGFuZCBgTWFwYHMuXG4gKi9cbmNvbnN0IGtleVZhbERpZmYgPSBbbmV3IERlZmF1bHRLZXlWYWx1ZURpZmZlckZhY3RvcnkoKV07XG4vKipcbiAqIFN0cnVjdHVyYWwgZGlmZmluZyBmb3IgYEl0ZXJhYmxlYCB0eXBlcyBzdWNoIGFzIGBBcnJheWBzLlxuICovXG5jb25zdCBpdGVyYWJsZURpZmYgPSBbbmV3IERlZmF1bHRJdGVyYWJsZURpZmZlckZhY3RvcnkoKV07XG5jb25zdCBkZWZhdWx0SXRlcmFibGVEaWZmZXJzID0gbmV3IEl0ZXJhYmxlRGlmZmVycyhpdGVyYWJsZURpZmYpO1xuY29uc3QgZGVmYXVsdEtleVZhbHVlRGlmZmVycyA9IG5ldyBLZXlWYWx1ZURpZmZlcnMoa2V5VmFsRGlmZik7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cbmNvbnN0IF9DT1JFX1BMQVRGT1JNX1BST1ZJREVSUyA9IFtcbiAgICAvLyBTZXQgYSBkZWZhdWx0IHBsYXRmb3JtIG5hbWUgZm9yIHBsYXRmb3JtcyB0aGF0IGRvbid0IHNldCBpdCBleHBsaWNpdGx5LlxuICAgIHsgcHJvdmlkZTogUExBVEZPUk1fSUQsIHVzZVZhbHVlOiAndW5rbm93bicgfSxcbiAgICB7IHByb3ZpZGU6IFBsYXRmb3JtUmVmLCBkZXBzOiBbSW5qZWN0b3JdIH0sXG4gICAgeyBwcm92aWRlOiBUZXN0YWJpbGl0eVJlZ2lzdHJ5LCBkZXBzOiBbXSB9LFxuICAgIHsgcHJvdmlkZTogQ29uc29sZSwgZGVwczogW10gfSxcbl07XG4vKipcbiAqIFRoaXMgcGxhdGZvcm0gaGFzIHRvIGJlIGluY2x1ZGVkIGluIGFueSBvdGhlciBwbGF0Zm9ybVxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY29uc3QgcGxhdGZvcm1Db3JlID0gY3JlYXRlUGxhdGZvcm1GYWN0b3J5KG51bGwsICdjb3JlJywgX0NPUkVfUExBVEZPUk1fUFJPVklERVJTKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vKipcbiAqIFJlLWV4cG9ydGVkIGJ5IGBCcm93c2VyTW9kdWxlYCwgd2hpY2ggaXMgaW5jbHVkZWQgYXV0b21hdGljYWxseSBpbiB0aGUgcm9vdFxuICogYEFwcE1vZHVsZWAgd2hlbiB5b3UgY3JlYXRlIGEgbmV3IGFwcCB3aXRoIHRoZSBDTEkgYG5ld2AgY29tbWFuZC4gRWFnZXJseSBpbmplY3RzXG4gKiBgQXBwbGljYXRpb25SZWZgIHRvIGluc3RhbnRpYXRlIGl0LlxuICpcbiAqIEBwdWJsaWNBcGlcbiAqL1xuY2xhc3MgQXBwbGljYXRpb25Nb2R1bGUge1xuICAgIC8vIEluamVjdCBBcHBsaWNhdGlvblJlZiB0byBtYWtlIGl0IGVhZ2VyLi4uXG4gICAgY29uc3RydWN0b3IoYXBwUmVmKSB7IH1cbn1cbkFwcGxpY2F0aW9uTW9kdWxlLsm1ZmFjID0gZnVuY3Rpb24gQXBwbGljYXRpb25Nb2R1bGVfRmFjdG9yeSh0KSB7IHJldHVybiBuZXcgKHQgfHwgQXBwbGljYXRpb25Nb2R1bGUpKMm1ybVpbmplY3QoQXBwbGljYXRpb25SZWYpKTsgfTtcbkFwcGxpY2F0aW9uTW9kdWxlLsm1bW9kID0gLypAX19QVVJFX18qLyDJtcm1ZGVmaW5lTmdNb2R1bGUoeyB0eXBlOiBBcHBsaWNhdGlvbk1vZHVsZSB9KTtcbkFwcGxpY2F0aW9uTW9kdWxlLsm1aW5qID0gLypAX19QVVJFX18qLyDJtcm1ZGVmaW5lSW5qZWN0b3Ioe30pO1xuKGZ1bmN0aW9uICgpIHsgKHR5cGVvZiBuZ0Rldk1vZGUgPT09IFwidW5kZWZpbmVkXCIgfHwgbmdEZXZNb2RlKSAmJiBzZXRDbGFzc01ldGFkYXRhKEFwcGxpY2F0aW9uTW9kdWxlLCBbe1xuICAgICAgICB0eXBlOiBOZ01vZHVsZVxuICAgIH1dLCBmdW5jdGlvbiAoKSB7IHJldHVybiBbeyB0eXBlOiBBcHBsaWNhdGlvblJlZiB9XTsgfSwgbnVsbCk7IH0pKCk7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLy8gVE9ETyhhbHhodWIpOiBhbGxvd3MgdGVzdHMgdG8gY29tcGlsZSwgY2FuIGJlIHJlbW92ZWQgd2hlbiB0ZXN0cyBoYXZlIGJlZW4gdXBkYXRlZC5cbmNvbnN0IMm1aXZ5RW5hYmxlZCA9IHRydWU7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuLyoqXG4gKiBDb21waWxlcyBhIHBhcnRpYWwgZGlyZWN0aXZlIGRlY2xhcmF0aW9uIG9iamVjdCBpbnRvIGEgZnVsbCBkaXJlY3RpdmUgZGVmaW5pdGlvbiBvYmplY3QuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtW5nRGVjbGFyZURpcmVjdGl2ZShkZWNsKSB7XG4gICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7IHVzYWdlOiAxIC8qIFBhcnRpYWxEZWNsYXJhdGlvbiAqLywga2luZDogJ2RpcmVjdGl2ZScsIHR5cGU6IGRlY2wudHlwZSB9KTtcbiAgICByZXR1cm4gY29tcGlsZXIuY29tcGlsZURpcmVjdGl2ZURlY2xhcmF0aW9uKGFuZ3VsYXJDb3JlRW52LCBgbmc6Ly8vJHtkZWNsLnR5cGUubmFtZX0vybVmYWMuanNgLCBkZWNsKTtcbn1cbi8qKlxuICogRXZhbHVhdGVzIHRoZSBjbGFzcyBtZXRhZGF0YSBkZWNsYXJhdGlvbi5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1bmdEZWNsYXJlQ2xhc3NNZXRhZGF0YShkZWNsKSB7XG4gICAgc2V0Q2xhc3NNZXRhZGF0YShkZWNsLnR5cGUsIGRlY2wuZGVjb3JhdG9ycywgZGVjbC5jdG9yUGFyYW1ldGVycyA/PyBudWxsLCBkZWNsLnByb3BEZWNvcmF0b3JzID8/IG51bGwpO1xufVxuLyoqXG4gKiBDb21waWxlcyBhIHBhcnRpYWwgY29tcG9uZW50IGRlY2xhcmF0aW9uIG9iamVjdCBpbnRvIGEgZnVsbCBjb21wb25lbnQgZGVmaW5pdGlvbiBvYmplY3QuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtW5nRGVjbGFyZUNvbXBvbmVudChkZWNsKSB7XG4gICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7IHVzYWdlOiAxIC8qIFBhcnRpYWxEZWNsYXJhdGlvbiAqLywga2luZDogJ2NvbXBvbmVudCcsIHR5cGU6IGRlY2wudHlwZSB9KTtcbiAgICByZXR1cm4gY29tcGlsZXIuY29tcGlsZUNvbXBvbmVudERlY2xhcmF0aW9uKGFuZ3VsYXJDb3JlRW52LCBgbmc6Ly8vJHtkZWNsLnR5cGUubmFtZX0vybVjbXAuanNgLCBkZWNsKTtcbn1cbi8qKlxuICogQ29tcGlsZXMgYSBwYXJ0aWFsIHBpcGUgZGVjbGFyYXRpb24gb2JqZWN0IGludG8gYSBmdWxsIHBpcGUgZGVmaW5pdGlvbiBvYmplY3QuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtW5nRGVjbGFyZUZhY3RvcnkoZGVjbCkge1xuICAgIGNvbnN0IGNvbXBpbGVyID0gZ2V0Q29tcGlsZXJGYWNhZGUoe1xuICAgICAgICB1c2FnZTogMSAvKiBQYXJ0aWFsRGVjbGFyYXRpb24gKi8sXG4gICAgICAgIGtpbmQ6IGdldEZhY3RvcnlLaW5kKGRlY2wudGFyZ2V0KSxcbiAgICAgICAgdHlwZTogZGVjbC50eXBlXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbXBpbGVyLmNvbXBpbGVGYWN0b3J5RGVjbGFyYXRpb24oYW5ndWxhckNvcmVFbnYsIGBuZzovLy8ke2RlY2wudHlwZS5uYW1lfS/JtWZhYy5qc2AsIGRlY2wpO1xufVxuZnVuY3Rpb24gZ2V0RmFjdG9yeUtpbmQodGFyZ2V0KSB7XG4gICAgc3dpdGNoICh0YXJnZXQpIHtcbiAgICAgICAgY2FzZSBGYWN0b3J5VGFyZ2V0LkRpcmVjdGl2ZTpcbiAgICAgICAgICAgIHJldHVybiAnZGlyZWN0aXZlJztcbiAgICAgICAgY2FzZSBGYWN0b3J5VGFyZ2V0LkNvbXBvbmVudDpcbiAgICAgICAgICAgIHJldHVybiAnY29tcG9uZW50JztcbiAgICAgICAgY2FzZSBGYWN0b3J5VGFyZ2V0LkluamVjdGFibGU6XG4gICAgICAgICAgICByZXR1cm4gJ2luamVjdGFibGUnO1xuICAgICAgICBjYXNlIEZhY3RvcnlUYXJnZXQuUGlwZTpcbiAgICAgICAgICAgIHJldHVybiAncGlwZSc7XG4gICAgICAgIGNhc2UgRmFjdG9yeVRhcmdldC5OZ01vZHVsZTpcbiAgICAgICAgICAgIHJldHVybiAnTmdNb2R1bGUnO1xuICAgIH1cbn1cbi8qKlxuICogQ29tcGlsZXMgYSBwYXJ0aWFsIGluamVjdGFibGUgZGVjbGFyYXRpb24gb2JqZWN0IGludG8gYSBmdWxsIGluamVjdGFibGUgZGVmaW5pdGlvbiBvYmplY3QuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtW5nRGVjbGFyZUluamVjdGFibGUoZGVjbCkge1xuICAgIGNvbnN0IGNvbXBpbGVyID0gZ2V0Q29tcGlsZXJGYWNhZGUoeyB1c2FnZTogMSAvKiBQYXJ0aWFsRGVjbGFyYXRpb24gKi8sIGtpbmQ6ICdpbmplY3RhYmxlJywgdHlwZTogZGVjbC50eXBlIH0pO1xuICAgIHJldHVybiBjb21waWxlci5jb21waWxlSW5qZWN0YWJsZURlY2xhcmF0aW9uKGFuZ3VsYXJDb3JlRW52LCBgbmc6Ly8vJHtkZWNsLnR5cGUubmFtZX0vybVwcm92LmpzYCwgZGVjbCk7XG59XG4vKipcbiAqIENvbXBpbGVzIGEgcGFydGlhbCBpbmplY3RvciBkZWNsYXJhdGlvbiBvYmplY3QgaW50byBhIGZ1bGwgaW5qZWN0b3IgZGVmaW5pdGlvbiBvYmplY3QuXG4gKlxuICogQGNvZGVHZW5BcGlcbiAqL1xuZnVuY3Rpb24gybXJtW5nRGVjbGFyZUluamVjdG9yKGRlY2wpIHtcbiAgICBjb25zdCBjb21waWxlciA9IGdldENvbXBpbGVyRmFjYWRlKHsgdXNhZ2U6IDEgLyogUGFydGlhbERlY2xhcmF0aW9uICovLCBraW5kOiAnTmdNb2R1bGUnLCB0eXBlOiBkZWNsLnR5cGUgfSk7XG4gICAgcmV0dXJuIGNvbXBpbGVyLmNvbXBpbGVJbmplY3RvckRlY2xhcmF0aW9uKGFuZ3VsYXJDb3JlRW52LCBgbmc6Ly8vJHtkZWNsLnR5cGUubmFtZX0vybVpbmouanNgLCBkZWNsKTtcbn1cbi8qKlxuICogQ29tcGlsZXMgYSBwYXJ0aWFsIE5nTW9kdWxlIGRlY2xhcmF0aW9uIG9iamVjdCBpbnRvIGEgZnVsbCBOZ01vZHVsZSBkZWZpbml0aW9uIG9iamVjdC5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1bmdEZWNsYXJlTmdNb2R1bGUoZGVjbCkge1xuICAgIGNvbnN0IGNvbXBpbGVyID0gZ2V0Q29tcGlsZXJGYWNhZGUoeyB1c2FnZTogMSAvKiBQYXJ0aWFsRGVjbGFyYXRpb24gKi8sIGtpbmQ6ICdOZ01vZHVsZScsIHR5cGU6IGRlY2wudHlwZSB9KTtcbiAgICByZXR1cm4gY29tcGlsZXIuY29tcGlsZU5nTW9kdWxlRGVjbGFyYXRpb24oYW5ndWxhckNvcmVFbnYsIGBuZzovLy8ke2RlY2wudHlwZS5uYW1lfS/JtW1vZC5qc2AsIGRlY2wpO1xufVxuLyoqXG4gKiBDb21waWxlcyBhIHBhcnRpYWwgcGlwZSBkZWNsYXJhdGlvbiBvYmplY3QgaW50byBhIGZ1bGwgcGlwZSBkZWZpbml0aW9uIG9iamVjdC5cbiAqXG4gKiBAY29kZUdlbkFwaVxuICovXG5mdW5jdGlvbiDJtcm1bmdEZWNsYXJlUGlwZShkZWNsKSB7XG4gICAgY29uc3QgY29tcGlsZXIgPSBnZXRDb21waWxlckZhY2FkZSh7IHVzYWdlOiAxIC8qIFBhcnRpYWxEZWNsYXJhdGlvbiAqLywga2luZDogJ3BpcGUnLCB0eXBlOiBkZWNsLnR5cGUgfSk7XG4gICAgcmV0dXJuIGNvbXBpbGVyLmNvbXBpbGVQaXBlRGVjbGFyYXRpb24oYW5ndWxhckNvcmVFbnYsIGBuZzovLy8ke2RlY2wudHlwZS5uYW1lfS/JtXBpcGUuanNgLCBkZWNsKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vLyBjbGFuZy1mb3JtYXQgb25cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5pZiAodHlwZW9mIG5nRGV2TW9kZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbmdEZXZNb2RlKSB7XG4gICAgLy8gVGhpcyBoZWxwZXIgaXMgdG8gZ2l2ZSBhIHJlYXNvbmFibGUgZXJyb3IgbWVzc2FnZSB0byBwZW9wbGUgdXBncmFkaW5nIHRvIHY5IHRoYXQgaGF2ZSBub3QgeWV0XG4gICAgLy8gaW5zdGFsbGVkIGBAYW5ndWxhci9sb2NhbGl6ZWAgaW4gdGhlaXIgYXBwLlxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tdG9wbGV2ZWwtcHJvcGVydHktYWNjZXNzXG4gICAgX2dsb2JhbC4kbG9jYWxpemUgPSBfZ2xvYmFsLiRsb2NhbGl6ZSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSXQgbG9va3MgbGlrZSB5b3VyIGFwcGxpY2F0aW9uIG9yIG9uZSBvZiBpdHMgZGVwZW5kZW5jaWVzIGlzIHVzaW5nIGkxOG4uXFxuJyArXG4gICAgICAgICAgICAnQW5ndWxhciA5IGludHJvZHVjZWQgYSBnbG9iYWwgYCRsb2NhbGl6ZSgpYCBmdW5jdGlvbiB0aGF0IG5lZWRzIHRvIGJlIGxvYWRlZC5cXG4nICtcbiAgICAgICAgICAgICdQbGVhc2UgcnVuIGBuZyBhZGQgQGFuZ3VsYXIvbG9jYWxpemVgIGZyb20gdGhlIEFuZ3VsYXIgQ0xJLlxcbicgK1xuICAgICAgICAgICAgJyhGb3Igbm9uLUNMSSBwcm9qZWN0cywgYWRkIGBpbXBvcnQgXFwnQGFuZ3VsYXIvbG9jYWxpemUvaW5pdFxcJztgIHRvIHlvdXIgYHBvbHlmaWxscy50c2AgZmlsZS5cXG4nICtcbiAgICAgICAgICAgICdGb3Igc2VydmVyLXNpZGUgcmVuZGVyaW5nIGFwcGxpY2F0aW9ucyBhZGQgdGhlIGltcG9ydCB0byB5b3VyIGBtYWluLnNlcnZlci50c2AgZmlsZS4pJyk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEdvb2dsZSBMTEMgQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG4vLyBUaGlzIGZpbGUgb25seSByZWV4cG9ydHMgY29udGVudCBvZiB0aGUgYHNyY2AgZm9sZGVyLiBLZWVwIGl0IHRoYXQgd2F5LlxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIExMQyBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIFVzZSBvZiB0aGlzIHNvdXJjZSBjb2RlIGlzIGdvdmVybmVkIGJ5IGFuIE1JVC1zdHlsZSBsaWNlbnNlIHRoYXQgY2FuIGJlXG4gKiBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGF0IGh0dHBzOi8vYW5ndWxhci5pby9saWNlbnNlXG4gKi9cblxuLyoqXG4gKiBHZW5lcmF0ZWQgYnVuZGxlIGluZGV4LiBEbyBub3QgZWRpdC5cbiAqL1xuXG5leHBvcnQgeyBBTkFMWVpFX0ZPUl9FTlRSWV9DT01QT05FTlRTLCBBUFBfQk9PVFNUUkFQX0xJU1RFTkVSLCBBUFBfSUQsIEFQUF9JTklUSUFMSVpFUiwgQXBwbGljYXRpb25Jbml0U3RhdHVzLCBBcHBsaWNhdGlvbk1vZHVsZSwgQXBwbGljYXRpb25SZWYsIEF0dHJpYnV0ZSwgQ09NUElMRVJfT1BUSU9OUywgQ1VTVE9NX0VMRU1FTlRTX1NDSEVNQSwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBDb21waWxlciwgQ29tcGlsZXJGYWN0b3J5LCBDb21wb25lbnQsIENvbXBvbmVudEZhY3RvcnkkMSBhcyBDb21wb25lbnRGYWN0b3J5LCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIkMSBhcyBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIENvbXBvbmVudFJlZiQxIGFzIENvbXBvbmVudFJlZiwgQ29udGVudENoaWxkLCBDb250ZW50Q2hpbGRyZW4sIERFRkFVTFRfQ1VSUkVOQ1lfQ09ERSwgRGVidWdFbGVtZW50LCBEZWJ1Z0V2ZW50TGlzdGVuZXIsIERlYnVnTm9kZSwgRGVmYXVsdEl0ZXJhYmxlRGlmZmVyLCBEaXJlY3RpdmUsIEVsZW1lbnRSZWYsIEVtYmVkZGVkVmlld1JlZiwgRXJyb3JIYW5kbGVyLCBFdmVudEVtaXR0ZXIsIEhvc3QsIEhvc3RCaW5kaW5nLCBIb3N0TGlzdGVuZXIsIElOSkVDVE9SLCBJbmplY3QsIEluamVjdEZsYWdzLCBJbmplY3RhYmxlLCBJbmplY3Rpb25Ub2tlbiwgSW5qZWN0b3IsIElucHV0LCBJdGVyYWJsZURpZmZlcnMsIEtleVZhbHVlRGlmZmVycywgTE9DQUxFX0lELCBNaXNzaW5nVHJhbnNsYXRpb25TdHJhdGVneSwgTW9kdWxlV2l0aENvbXBvbmVudEZhY3RvcmllcywgTk9fRVJST1JTX1NDSEVNQSwgTmdNb2R1bGUsIE5nTW9kdWxlRmFjdG9yeSQxIGFzIE5nTW9kdWxlRmFjdG9yeSwgTmdNb2R1bGVSZWYkMSBhcyBOZ01vZHVsZVJlZiwgTmdQcm9iZVRva2VuLCBOZ1pvbmUsIE9wdGlvbmFsLCBPdXRwdXQsIFBBQ0tBR0VfUk9PVF9VUkwsIFBMQVRGT1JNX0lELCBQTEFURk9STV9JTklUSUFMSVpFUiwgUGlwZSwgUGxhdGZvcm1SZWYsIFF1ZXJ5LCBRdWVyeUxpc3QsIFJlZmxlY3RpdmVJbmplY3RvciwgUmVmbGVjdGl2ZUtleSwgUmVuZGVyZXIyLCBSZW5kZXJlckZhY3RvcnkyLCBSZW5kZXJlclN0eWxlRmxhZ3MyLCBSZXNvbHZlZFJlZmxlY3RpdmVGYWN0b3J5LCBTYW5pdGl6ZXIsIFNlY3VyaXR5Q29udGV4dCwgU2VsZiwgU2ltcGxlQ2hhbmdlLCBTa2lwU2VsZiwgVFJBTlNMQVRJT05TLCBUUkFOU0xBVElPTlNfRk9STUFULCBUZW1wbGF0ZVJlZiwgVGVzdGFiaWxpdHksIFRlc3RhYmlsaXR5UmVnaXN0cnksIFR5cGUsIFZFUlNJT04sIFZlcnNpb24sIFZpZXdDaGlsZCwgVmlld0NoaWxkcmVuLCBWaWV3Q29udGFpbmVyUmVmLCBWaWV3RW5jYXBzdWxhdGlvbiQxIGFzIFZpZXdFbmNhcHN1bGF0aW9uLCBWaWV3UmVmLCBhc05hdGl2ZUVsZW1lbnRzLCBhc3NlcnRQbGF0Zm9ybSwgY3JlYXRlTmdNb2R1bGVSZWYsIGNyZWF0ZVBsYXRmb3JtLCBjcmVhdGVQbGF0Zm9ybUZhY3RvcnksIGRlZmluZUluamVjdGFibGUsIGRlc3Ryb3lQbGF0Zm9ybSwgZW5hYmxlUHJvZE1vZGUsIGZvcndhcmRSZWYsIGdldERlYnVnTm9kZSwgZ2V0TW9kdWxlRmFjdG9yeSwgZ2V0TmdNb2R1bGVCeUlkLCBnZXRQbGF0Zm9ybSwgaW5qZWN0LCBpc0Rldk1vZGUsIHBsYXRmb3JtQ29yZSwgcmVzb2x2ZUZvcndhcmRSZWYsIHNldFRlc3RhYmlsaXR5R2V0dGVyLCBBTExPV19NVUxUSVBMRV9QTEFURk9STVMgYXMgybVBTExPV19NVUxUSVBMRV9QTEFURk9STVMsIEFQUF9JRF9SQU5ET01fUFJPVklERVIgYXMgybVBUFBfSURfUkFORE9NX1BST1ZJREVSLCBDaGFuZ2VEZXRlY3RvclN0YXR1cyBhcyDJtUNoYW5nZURldGVjdG9yU3RhdHVzLCBDb21wb25lbnRGYWN0b3J5JDEgYXMgybVDb21wb25lbnRGYWN0b3J5LCBDb25zb2xlIGFzIMm1Q29uc29sZSwgREVGQVVMVF9MT0NBTEVfSUQgYXMgybVERUZBVUxUX0xPQ0FMRV9JRCwgSU5KRUNUT1JfU0NPUEUgYXMgybVJTkpFQ1RPUl9TQ09QRSwgTGlmZWN5Y2xlSG9va3NGZWF0dXJlIGFzIMm1TGlmZWN5Y2xlSG9va3NGZWF0dXJlLCBMb2NhbGVEYXRhSW5kZXggYXMgybVMb2NhbGVEYXRhSW5kZXgsIE5HX0NPTVBfREVGIGFzIMm1TkdfQ09NUF9ERUYsIE5HX0RJUl9ERUYgYXMgybVOR19ESVJfREVGLCBOR19FTEVNRU5UX0lEIGFzIMm1TkdfRUxFTUVOVF9JRCwgTkdfSU5KX0RFRiBhcyDJtU5HX0lOSl9ERUYsIE5HX01PRF9ERUYgYXMgybVOR19NT0RfREVGLCBOR19QSVBFX0RFRiBhcyDJtU5HX1BJUEVfREVGLCBOR19QUk9WX0RFRiBhcyDJtU5HX1BST1ZfREVGLCBOT1RfRk9VTkRfQ0hFQ0tfT05MWV9FTEVNRU5UX0lOSkVDVE9SIGFzIMm1Tk9UX0ZPVU5EX0NIRUNLX09OTFlfRUxFTUVOVF9JTkpFQ1RPUiwgTk9fQ0hBTkdFIGFzIMm1Tk9fQ0hBTkdFLCBOZ01vZHVsZUZhY3RvcnkgYXMgybVOZ01vZHVsZUZhY3RvcnksIE5vb3BOZ1pvbmUgYXMgybVOb29wTmdab25lLCBSZWZsZWN0aW9uQ2FwYWJpbGl0aWVzIGFzIMm1UmVmbGVjdGlvbkNhcGFiaWxpdGllcywgQ29tcG9uZW50RmFjdG9yeSBhcyDJtVJlbmRlcjNDb21wb25lbnRGYWN0b3J5LCBDb21wb25lbnRSZWYgYXMgybVSZW5kZXIzQ29tcG9uZW50UmVmLCBOZ01vZHVsZVJlZiBhcyDJtVJlbmRlcjNOZ01vZHVsZVJlZiwgUnVudGltZUVycm9yIGFzIMm1UnVudGltZUVycm9yLCBWaWV3UmVmJDEgYXMgybVWaWV3UmVmLCBfc2FuaXRpemVIdG1sIGFzIMm1X3Nhbml0aXplSHRtbCwgX3Nhbml0aXplVXJsIGFzIMm1X3Nhbml0aXplVXJsLCBhbGxvd1Nhbml0aXphdGlvbkJ5cGFzc0FuZFRocm93IGFzIMm1YWxsb3dTYW5pdGl6YXRpb25CeXBhc3NBbmRUaHJvdywgYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RIdG1sIGFzIMm1YnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RIdG1sLCBieXBhc3NTYW5pdGl6YXRpb25UcnVzdFJlc291cmNlVXJsIGFzIMm1YnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RSZXNvdXJjZVVybCwgYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RTY3JpcHQgYXMgybVieXBhc3NTYW5pdGl6YXRpb25UcnVzdFNjcmlwdCwgYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RTdHlsZSBhcyDJtWJ5cGFzc1Nhbml0aXphdGlvblRydXN0U3R5bGUsIGJ5cGFzc1Nhbml0aXphdGlvblRydXN0VXJsIGFzIMm1YnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RVcmwsIGNsZWFyUmVzb2x1dGlvbk9mQ29tcG9uZW50UmVzb3VyY2VzUXVldWUgYXMgybVjbGVhclJlc29sdXRpb25PZkNvbXBvbmVudFJlc291cmNlc1F1ZXVlLCBjb21waWxlQ29tcG9uZW50IGFzIMm1Y29tcGlsZUNvbXBvbmVudCwgY29tcGlsZURpcmVjdGl2ZSBhcyDJtWNvbXBpbGVEaXJlY3RpdmUsIGNvbXBpbGVOZ01vZHVsZSBhcyDJtWNvbXBpbGVOZ01vZHVsZSwgY29tcGlsZU5nTW9kdWxlRGVmcyBhcyDJtWNvbXBpbGVOZ01vZHVsZURlZnMsIGNvbXBpbGVOZ01vZHVsZUZhY3RvcnkgYXMgybVjb21waWxlTmdNb2R1bGVGYWN0b3J5LCBjb21waWxlUGlwZSBhcyDJtWNvbXBpbGVQaXBlLCBjcmVhdGVJbmplY3RvciBhcyDJtWNyZWF0ZUluamVjdG9yLCBkZWZhdWx0SXRlcmFibGVEaWZmZXJzIGFzIMm1ZGVmYXVsdEl0ZXJhYmxlRGlmZmVycywgZGVmYXVsdEtleVZhbHVlRGlmZmVycyBhcyDJtWRlZmF1bHRLZXlWYWx1ZURpZmZlcnMsIGRldGVjdENoYW5nZXMgYXMgybVkZXRlY3RDaGFuZ2VzLCBkZXZNb2RlRXF1YWwgYXMgybVkZXZNb2RlRXF1YWwsIGZpbmRMb2NhbGVEYXRhIGFzIMm1ZmluZExvY2FsZURhdGEsIGZsdXNoTW9kdWxlU2NvcGluZ1F1ZXVlQXNNdWNoQXNQb3NzaWJsZSBhcyDJtWZsdXNoTW9kdWxlU2NvcGluZ1F1ZXVlQXNNdWNoQXNQb3NzaWJsZSwgZ2V0RGVidWdOb2RlIGFzIMm1Z2V0RGVidWdOb2RlLCBnZXREZWJ1Z05vZGVSMiBhcyDJtWdldERlYnVnTm9kZVIyLCBnZXREaXJlY3RpdmVzIGFzIMm1Z2V0RGlyZWN0aXZlcywgZ2V0SG9zdEVsZW1lbnQgYXMgybVnZXRIb3N0RWxlbWVudCwgZ2V0SW5qZWN0YWJsZURlZiBhcyDJtWdldEluamVjdGFibGVEZWYsIGdldExDb250ZXh0IGFzIMm1Z2V0TENvbnRleHQsIGdldExvY2FsZUN1cnJlbmN5Q29kZSBhcyDJtWdldExvY2FsZUN1cnJlbmN5Q29kZSwgZ2V0TG9jYWxlUGx1cmFsQ2FzZSBhcyDJtWdldExvY2FsZVBsdXJhbENhc2UsIGdldFNhbml0aXphdGlvbkJ5cGFzc1R5cGUgYXMgybVnZXRTYW5pdGl6YXRpb25CeXBhc3NUeXBlLCBfZ2xvYmFsIGFzIMm1Z2xvYmFsLCBpbmplY3RDaGFuZ2VEZXRlY3RvclJlZiBhcyDJtWluamVjdENoYW5nZURldGVjdG9yUmVmLCBpc0JvdW5kVG9Nb2R1bGUgYXMgybVpc0JvdW5kVG9Nb2R1bGUsIGlzRGVmYXVsdENoYW5nZURldGVjdGlvblN0cmF0ZWd5IGFzIMm1aXNEZWZhdWx0Q2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIGlzTGlzdExpa2VJdGVyYWJsZSBhcyDJtWlzTGlzdExpa2VJdGVyYWJsZSwgaXNPYnNlcnZhYmxlIGFzIMm1aXNPYnNlcnZhYmxlLCBpc1Byb21pc2UgYXMgybVpc1Byb21pc2UsIGlzU3Vic2NyaWJhYmxlIGFzIMm1aXNTdWJzY3JpYmFibGUsIMm1aXZ5RW5hYmxlZCwgbWFrZURlY29yYXRvciBhcyDJtW1ha2VEZWNvcmF0b3IsIG1hcmtEaXJ0eSBhcyDJtW1hcmtEaXJ0eSwgbm9TaWRlRWZmZWN0cyBhcyDJtW5vU2lkZUVmZmVjdHMsIHBhdGNoQ29tcG9uZW50RGVmV2l0aFNjb3BlIGFzIMm1cGF0Y2hDb21wb25lbnREZWZXaXRoU2NvcGUsIHB1Ymxpc2hEZWZhdWx0R2xvYmFsVXRpbHMkMSBhcyDJtXB1Ymxpc2hEZWZhdWx0R2xvYmFsVXRpbHMsIHB1Ymxpc2hHbG9iYWxVdGlsIGFzIMm1cHVibGlzaEdsb2JhbFV0aWwsIHJlZ2lzdGVyTG9jYWxlRGF0YSBhcyDJtXJlZ2lzdGVyTG9jYWxlRGF0YSwgcmVnaXN0ZXJOZ01vZHVsZVR5cGUgYXMgybVyZWdpc3Rlck5nTW9kdWxlVHlwZSwgcmVuZGVyQ29tcG9uZW50IGFzIMm1cmVuZGVyQ29tcG9uZW50LCByZXNldENvbXBpbGVkQ29tcG9uZW50cyBhcyDJtXJlc2V0Q29tcGlsZWRDb21wb25lbnRzLCByZXNldEppdE9wdGlvbnMgYXMgybVyZXNldEppdE9wdGlvbnMsIHJlc29sdmVDb21wb25lbnRSZXNvdXJjZXMgYXMgybVyZXNvbHZlQ29tcG9uZW50UmVzb3VyY2VzLCBzZXRDbGFzc01ldGFkYXRhIGFzIMm1c2V0Q2xhc3NNZXRhZGF0YSwgc2V0Q3VycmVudEluamVjdG9yIGFzIMm1c2V0Q3VycmVudEluamVjdG9yLCBzZXREb2N1bWVudCBhcyDJtXNldERvY3VtZW50LCBzZXRMb2NhbGVJZCBhcyDJtXNldExvY2FsZUlkLCBzdG9yZSBhcyDJtXN0b3JlLCBzdHJpbmdpZnkgYXMgybVzdHJpbmdpZnksIHRyYW5zaXRpdmVTY29wZXNGb3IgYXMgybV0cmFuc2l0aXZlU2NvcGVzRm9yLCB1bnJlZ2lzdGVyQWxsTG9jYWxlRGF0YSBhcyDJtXVucmVnaXN0ZXJMb2NhbGVEYXRhLCB1bndyYXBTYWZlVmFsdWUgYXMgybV1bndyYXBTYWZlVmFsdWUsIHdoZW5SZW5kZXJlZCBhcyDJtXdoZW5SZW5kZXJlZCwgybXJtUNvcHlEZWZpbml0aW9uRmVhdHVyZSwgRmFjdG9yeVRhcmdldCBhcyDJtcm1RmFjdG9yeVRhcmdldCwgybXJtUluaGVyaXREZWZpbml0aW9uRmVhdHVyZSwgybXJtU5nT25DaGFuZ2VzRmVhdHVyZSwgybXJtVByb3ZpZGVyc0ZlYXR1cmUsIMm1ybVhZHZhbmNlLCDJtcm1YXR0cmlidXRlLCDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGUxLCDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGUyLCDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGUzLCDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU0LCDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU1LCDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU2LCDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU3LCDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGU4LCDJtcm1YXR0cmlidXRlSW50ZXJwb2xhdGVWLCDJtcm1Y2xhc3NNYXAsIMm1ybVjbGFzc01hcEludGVycG9sYXRlMSwgybXJtWNsYXNzTWFwSW50ZXJwb2xhdGUyLCDJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTMsIMm1ybVjbGFzc01hcEludGVycG9sYXRlNCwgybXJtWNsYXNzTWFwSW50ZXJwb2xhdGU1LCDJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZTYsIMm1ybVjbGFzc01hcEludGVycG9sYXRlNywgybXJtWNsYXNzTWFwSW50ZXJwb2xhdGU4LCDJtcm1Y2xhc3NNYXBJbnRlcnBvbGF0ZVYsIMm1ybVjbGFzc1Byb3AsIMm1ybVjb250ZW50UXVlcnksIMm1ybVkZWZpbmVDb21wb25lbnQsIMm1ybVkZWZpbmVEaXJlY3RpdmUsIMm1ybVkZWZpbmVJbmplY3RhYmxlLCDJtcm1ZGVmaW5lSW5qZWN0b3IsIMm1ybVkZWZpbmVOZ01vZHVsZSwgybXJtWRlZmluZVBpcGUsIMm1ybVkaXJlY3RpdmVJbmplY3QsIMm1ybVkaXNhYmxlQmluZGluZ3MsIMm1ybVlbGVtZW50LCDJtcm1ZWxlbWVudENvbnRhaW5lciwgybXJtWVsZW1lbnRDb250YWluZXJFbmQsIMm1ybVlbGVtZW50Q29udGFpbmVyU3RhcnQsIMm1ybVlbGVtZW50RW5kLCDJtcm1ZWxlbWVudFN0YXJ0LCDJtcm1ZW5hYmxlQmluZGluZ3MsIMm1ybVnZXRDdXJyZW50VmlldywgybXJtWdldEluaGVyaXRlZEZhY3RvcnksIMm1ybVob3N0UHJvcGVydHksIMm1ybVpMThuLCDJtcm1aTE4bkFwcGx5LCDJtcm1aTE4bkF0dHJpYnV0ZXMsIMm1ybVpMThuRW5kLCDJtcm1aTE4bkV4cCwgybXJtWkxOG5Qb3N0cHJvY2VzcywgybXJtWkxOG5TdGFydCwgybXJtWluamVjdCwgybXJtWluamVjdEF0dHJpYnV0ZSwgybXJtWludmFsaWRGYWN0b3J5LCDJtcm1aW52YWxpZEZhY3RvcnlEZXAsIMm1ybVsaXN0ZW5lciwgybXJtWxvYWRRdWVyeSwgybXJtW5hbWVzcGFjZUhUTUwsIMm1ybVuYW1lc3BhY2VNYXRoTUwsIMm1ybVuYW1lc3BhY2VTVkcsIMm1ybVuZXh0Q29udGV4dCwgybXJtW5nRGVjbGFyZUNsYXNzTWV0YWRhdGEsIMm1ybVuZ0RlY2xhcmVDb21wb25lbnQsIMm1ybVuZ0RlY2xhcmVEaXJlY3RpdmUsIMm1ybVuZ0RlY2xhcmVGYWN0b3J5LCDJtcm1bmdEZWNsYXJlSW5qZWN0YWJsZSwgybXJtW5nRGVjbGFyZUluamVjdG9yLCDJtcm1bmdEZWNsYXJlTmdNb2R1bGUsIMm1ybVuZ0RlY2xhcmVQaXBlLCDJtcm1cGlwZSwgybXJtXBpcGVCaW5kMSwgybXJtXBpcGVCaW5kMiwgybXJtXBpcGVCaW5kMywgybXJtXBpcGVCaW5kNCwgybXJtXBpcGVCaW5kViwgybXJtXByb2plY3Rpb24sIMm1ybVwcm9qZWN0aW9uRGVmLCDJtcm1cHJvcGVydHksIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlLCDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTEsIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlMiwgybXJtXByb3BlcnR5SW50ZXJwb2xhdGUzLCDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTQsIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlNSwgybXJtXByb3BlcnR5SW50ZXJwb2xhdGU2LCDJtcm1cHJvcGVydHlJbnRlcnBvbGF0ZTcsIMm1ybVwcm9wZXJ0eUludGVycG9sYXRlOCwgybXJtXByb3BlcnR5SW50ZXJwb2xhdGVWLCDJtcm1cHVyZUZ1bmN0aW9uMCwgybXJtXB1cmVGdW5jdGlvbjEsIMm1ybVwdXJlRnVuY3Rpb24yLCDJtcm1cHVyZUZ1bmN0aW9uMywgybXJtXB1cmVGdW5jdGlvbjQsIMm1ybVwdXJlRnVuY3Rpb241LCDJtcm1cHVyZUZ1bmN0aW9uNiwgybXJtXB1cmVGdW5jdGlvbjcsIMm1ybVwdXJlRnVuY3Rpb244LCDJtcm1cHVyZUZ1bmN0aW9uViwgybXJtXF1ZXJ5UmVmcmVzaCwgybXJtXJlZmVyZW5jZSwgybXJtXJlc29sdmVCb2R5LCDJtcm1cmVzb2x2ZURvY3VtZW50LCDJtcm1cmVzb2x2ZVdpbmRvdywgybXJtXJlc3RvcmVWaWV3LCDJtcm1c2FuaXRpemVIdG1sLCDJtcm1c2FuaXRpemVSZXNvdXJjZVVybCwgybXJtXNhbml0aXplU2NyaXB0LCDJtcm1c2FuaXRpemVTdHlsZSwgybXJtXNhbml0aXplVXJsLCDJtcm1c2FuaXRpemVVcmxPclJlc291cmNlVXJsLCDJtcm1c2V0Q29tcG9uZW50U2NvcGUsIMm1ybVzZXROZ01vZHVsZVNjb3BlLCDJtcm1c3R5bGVNYXAsIMm1ybVzdHlsZU1hcEludGVycG9sYXRlMSwgybXJtXN0eWxlTWFwSW50ZXJwb2xhdGUyLCDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTMsIMm1ybVzdHlsZU1hcEludGVycG9sYXRlNCwgybXJtXN0eWxlTWFwSW50ZXJwb2xhdGU1LCDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZTYsIMm1ybVzdHlsZU1hcEludGVycG9sYXRlNywgybXJtXN0eWxlTWFwSW50ZXJwb2xhdGU4LCDJtcm1c3R5bGVNYXBJbnRlcnBvbGF0ZVYsIMm1ybVzdHlsZVByb3AsIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTEsIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTIsIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTMsIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTQsIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTUsIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTYsIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTcsIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZTgsIMm1ybVzdHlsZVByb3BJbnRlcnBvbGF0ZVYsIMm1ybVzeW50aGV0aWNIb3N0TGlzdGVuZXIsIMm1ybVzeW50aGV0aWNIb3N0UHJvcGVydHksIMm1ybV0ZW1wbGF0ZSwgybXJtXRlbXBsYXRlUmVmRXh0cmFjdG9yLCDJtcm1dGV4dCwgybXJtXRleHRJbnRlcnBvbGF0ZSwgybXJtXRleHRJbnRlcnBvbGF0ZTEsIMm1ybV0ZXh0SW50ZXJwb2xhdGUyLCDJtcm1dGV4dEludGVycG9sYXRlMywgybXJtXRleHRJbnRlcnBvbGF0ZTQsIMm1ybV0ZXh0SW50ZXJwb2xhdGU1LCDJtcm1dGV4dEludGVycG9sYXRlNiwgybXJtXRleHRJbnRlcnBvbGF0ZTcsIMm1ybV0ZXh0SW50ZXJwb2xhdGU4LCDJtcm1dGV4dEludGVycG9sYXRlViwgybXJtXRydXN0Q29uc3RhbnRIdG1sLCDJtcm1dHJ1c3RDb25zdGFudFJlc291cmNlVXJsLCDJtcm1dmlld1F1ZXJ5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb3JlLm1qcy5tYXBcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiZXhwb3J0IHsgU2lnbmFsaW5nU2VydmVyIH0gZnJvbSBcIi4vc2lnbmFsaW5nU2VydmVyXCI7XG5leHBvcnQgeyBXZWJSdGNQcm92aWRlciB9IGZyb20gXCIuL3dlYlJ0Yy5wcm92aWRlclwiO1xuZXhwb3J0IHsgUHJvb2ZtZVV0aWxzUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm9vZm1lLXV0aWxzLnByb3ZpZGVyXCI7XG5leHBvcnQgeyBQcm9vZm1lVXRpbHMgfSBmcm9tIFwiLi9wcm9vZm1lLXV0aWxzXCI7XG5leHBvcnQgeyBJUlRDQ29ubmVjdGlvbkNvbmZpZyB9IGZyb20gXCIuL2ludGVyZmFjZXMvcnRjQ29ubmVjdGlvbkNvbmZpZy5pbnRlcmZhY2VcIjtcbmV4cG9ydCB7IElXZWJSVENDb25maWcgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3dlYlJ0Y0NvbmZpZy5pbnRlcmZhY2VcIjtcbmV4cG9ydCB7IElQcm9vZk9iamVjdCB9IGZyb20gXCIuL2ludGVyZmFjZXMvcHJvb2Ytb2JqZWN0LmludGVyZmFjZVwiO1xuZXhwb3J0IHsgSVByb29mIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9wcm9vZi5pbnRlcmZhY2VcIjtcbmV4cG9ydCB7IElDaGVja2VkRGlkIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9jaGVja2VkRGlkLmludGVyZmFjZVwiO1xuZXhwb3J0IHsgSVJlcXVlc3RlZENyZWRlbnRpYWxLZXkgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3JlcXVlc3RlZENyZWRlbnRpYWxLZXkuaW50ZXJmYWNlXCI7XG5leHBvcnQgeyBJVmFsaWRhdGVkQ3JlZGVudGlhbHMgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3ZhbGlkYXRlZENyZWRlbnRpYWxzLmludGVyZmFjZVwiO1xuZXhwb3J0IHsgSUNyZWRlbnRpYWxPYmplY3QgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL2NyZWRlbnRpYWxzT2JqZWN0LmludGVyZmFjZVwiO1xuZXhwb3J0IHsgSUNyZWRlbnRpYWxLZXlPYmplY3QgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL2NyZWRlbnRpYWxLZXlPYmplY3QuaW50ZXJmYWNlXCI7XG5leHBvcnQgeyBJUmVxdWVzdGVkQ3JlZGVudGlhbHMgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3JlcXVlc3RlZENyZWRlbnRpYWxzLmludGVyZmFjZVwiO1xuZXhwb3J0IHsgSVJlcXVlc3RlZENyZWRlbnRpYWxzQ2hlY2tSZXN1bHQgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3JlcXVlc3RlZENyZWRlbnRpYWxzQ2hlY2tSZXN1bHRcIjtcbmV4cG9ydCB7IElQcm9vZm1lRGF0YVB1cnBvc2UgfSBmcm9tIFwiLi9lbnVtcy9wcm9vZm1lRGF0YVB1cnBvc2VcIjtcbmV4cG9ydCB7IElQcm9vZm1lRGF0YVN0b3JhZ2UgfSBmcm9tIFwiLi9lbnVtcy9wcm9vZm1lRGF0YVN0b3JhZ2VcIjtcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiSVByb29mbWVEYXRhUHVycG9zZSIsIklQcm9vZm1lRGF0YVN0b3JhZ2UiLCJQcm9vZm1lVXRpbHNQcm92aWRlciIsInByb29mbWVVdGlscyIsInByb29mbWVfdXRpbHNfMSIsImNyZWRlbnRpYWxPYmplY3QiLCJ3ZWIzVXJsIiwiY2hlY2tVc2VyTm9uY2UiLCJsaXZlbmVzc0NoZWNrUmVxdWlyZWQiLCJ0aGlzIiwidmFsaWRDcmVkZW50aWFsc0Z1bmMiLCJyZXF1ZXN0ZWRDcmVkZW50aWFscyIsInRydXN0ZWREaWRzIiwidmFsaWRDcmVkZW50aWFsc1RydXN0ZWRQYXJ0aWVzRnVuYyIsInNpZ25DcmVkZW50aWFsIiwiY3JlZGVudGlhbCIsInByaXZhdGVLZXkiLCJzaWduQ3JlZGVudGlhbE9iamVjdCIsInNpZ25Qcm9vZk9iamVjdCIsInByb29mT2JqZWN0Iiwid2ViMyIsIndlYjNfMSIsInJlcXVlc3RlZENoZWNrUmVzdWx0IiwicmVxdWVzdGVkQ3JlZGVudGlhbHNDb3JyZWN0Iiwic3VjY2VzcyIsImNyZWRlbnRpYWxzIiwicmVzdWx0IiwidmFsaWQiLCJkaWQiLCJ1dGlscyIsImlzQWRkcmVzcyIsImNvbnNvbGUiLCJlcnJvciIsImZpbHRlciIsIngiLCJsZW5ndGgiLCJjaGVja2VkRGlkIiwidmFsaWRDcmVkZW50aWFsc0Ftb3VudCIsImNyZWRlbnRpYWxzQW1vdW50IiwiaW52YWxpZENyZWRlbnRpYWxzIiwicHJvdmlkZXIiLCJPYmplY3QiLCJlbnRyaWVzIiwiY3VycmVudENyZWRlbnRpYWxLZXkiLCJpc3N1ZXJEaWRDb250cmFjdEFkZHJlc3MiLCJpc3N1ZXIiLCJpZCIsInNwbGl0IiwiZm91bmRWYWxpZCIsImludmFsaWRLZXlQcm92aWRlciIsImludmFsaWRLZXlQcm92aWRlckFsbG93ZWRLZXlzIiwibm9UcnVzdGVkQ2xhaW1Gb3VuZCIsImZvdW5kRW50cnkiLCJmaW5kIiwiY2xhaW0iLCJnZXRDbGFpbXMiLCJwdXNoIiwiRGF0ZSIsImV4cGlyYXRpb25EYXRlIiwiY2xhaW1BbGxvd2VkQ3JlZGVudGlhbEtleXMiLCJrZXlzIiwicHJvdmlkZXJDcmVkZW50aWFsS2V5IiwiaW5jbHVkZXMiLCJjb2RlIiwibWVzc2FnZSIsImpvaW4iLCJKU09OIiwicGFyc2UiLCJyZU9yZGVyQ3JlZGVudGlhbE9iamVjdCIsIndlYjNOb2RlIiwiY3JlZGVudGlhbE9iamVjdFdpdGhvdXRQcm9vZlNpZ25hdHVyZSIsInN0cmluZ2lmeSIsInByb29mIiwic2lnbmF0dXJlIiwidXNlclJlY292ZXJlZEFkZHJlc3MiLCJldGgiLCJhY2NvdW50cyIsInJlY292ZXIiLCJ1c2VyQ3JlZGVudGlhbFNpZ25hdHVyZVdyb25nIiwiaG9sZGVyIiwidmVyc2lvbiIsImNyZWRlbnRpYWxFeHBpcmF0aW9uRGF0ZSIsIm5vdyIsInRoZW4iLCJub25jZSIsImNhbGN1bGF0ZU1pbnV0ZXNEaWZmZXJlbmNlIiwiaXNzdWVyQ3JlZGVudGlhbFNpZ25hdHVyZVdyb25nIiwiaXNzdWVySG9sZGVyS2V5IiwiZGlkQ29udHJhY3RLZXlXcm9uZyIsImNsYWltSG9sZGVyQWJpXzEiLCJ1c2VySG9sZGVyS2V5IiwidXNlckRpZENvbnRyYWN0QWRkcmVzcyIsInVuZGVmaW5lZCIsInZlcmlmaWVkIiwiaG9sZGVyS2V5IiwicmVjb3ZlcmVkQWRkcmVzcyIsImlzc3VlclNpZ25hdHVyZSIsImNyZWRlbnRpYWxJc3N1ZXJLZXkiLCJjcmVkZW50aWFsV2l0aG91dElzc3VlclByb29mIiwiY2xhaW1Ib2xkZXJBYmkiLCJkaWRBZGRyZXNzIiwia25vd25BZGRyZXNzZXMiLCJzaGEzS2V5IiwiZ2V0U2hhM0tleSIsImtleU1hbmFnZXJDb250cmFjdCIsIkNvbnRyYWN0Iiwia25vd25BZGRyZXNzZXNDb250YWlucyIsImtleVB1cnBvc2UiLCJwYXJzZUludCIsImdldEtleVB1cnBvc2UiLCJsaXN0IiwiZGlkQ29udHJhY3RBZGRyZXNzIiwibGlzdEl0ZW0iLCJrZXkiLCJrZWNjYWsyNTYiLCJvcHRpb25zIiwiYWRkcmVzcyIsIlByb21pc2UiLCJyZXNvbHZlIiwibWV0aG9kcyIsImNhbGwiLCJkdDIiLCJkdDEiLCJkaWZmIiwiZ2V0VGltZSIsIk1hdGgiLCJhYnMiLCJyb3VuZCIsImNyZWRlbnRpYWxLZXlzIiwiY3JlZGVudGlhbEtleSIsInNvcnQiLCJyZU9yZGVyZWRDcmVkZW50aWFscyIsInJlT3JkZXJlZENyZWRlbnRpYWwiLCJyZU9yZGVyQ3JlZGVudGlhbCIsInJlT3JkZXJDcmVkZW50aWFsUHJvb2YiLCJzb3J0T2JqZWN0QWxwaGFiZXRpY2FsbHkiLCJvYmplY3QiLCJzb3J0ZWRPYmoiLCJrZXkxIiwia2V5MiIsInRvTG93ZXJDYXNlIiwiaW5kZXgiLCJBcnJheSIsInR5cGUiLCJzaWduIiwiY2xhaW1UeXBlIiwiY29udHJhY3RBZGRyZXNzIiwiY29udHJhY3QiLCJjbGFpbUlkcyIsImdldENsYWltSWRzQnlUeXBlIiwicmF3Q2xhaW1zIiwiZ2V0Q2xhaW0iLCJwYXJzZWRDbGFpbXMiLCJ0b0FzY2lpIiwiZGF0YSIsInJlT3JkZXJQcm9vZk9iamVjdCIsImNoZWNrUmVzdWx0IiwibWlzc2luZ0tleXMiLCJyZXF1ZXN0ZWRDcmVkZW50aWFsIiwiaXNJbnNpZGVNaW5pbXVtUmVxdWlyZWQiLCJtaW5pbXVtUmVxdWlyZWQiLCJyZXF1aXJlZCIsImlzQXJyYXkiLCJmb3VuZCIsInByb3ZpZGVycyIsImZvdW5kQ3JlZGVudGlhbHMiLCJhbW91bnQiLCJtaXNzaW5nTWVzc2FnZSIsIndzU2VydmVyIiwicnRjQ29ubmVjdGlvbkNvbmZpZyIsInNldFJUQ0Nvbm5lY3Rpb25Db25maWciLCJnZXRSVENDb25uZWN0aW9uQ29uZmlnIiwidHVybkVuYWJsZWQiLCJ1c2VybmFtZSIsImZsb29yIiwidHVybkV4cGlyYXRpb24iLCJjcnlwdG8iLCJjcmVhdGVIbWFjIiwidHVyblNlY3JldCIsInVwZGF0ZSIsInRvU3RyaW5nIiwiZGlnZXN0IiwiaWNlQ2FuZGlkYXRlUG9vbFNpemUiLCJpY2VTZXJ2ZXJzIiwidXJscyIsInR1cm5VcmwiLCJzdHVuRW5hYmxlZCIsInN0dW5VcmwiLCJzdGFydFNpZ25hbCIsInNlcnZlciIsIldlYlNvY2tldCIsIlNlcnZlciIsInNlbmRUbyIsImRhdGFjaGFubmVsIiwic2VuZCIsIm9uIiwid3MiLCJ1dWlkIiwiaG9zdCIsImF1dGhlbnRpY2F0ZWQiLCJjb25uZWN0ZWQiLCJlcnIiLCJtc2ciLCJlIiwidG9rZW4iLCJvZmZlciIsImFuc3dlciIsImNhbmRpZGF0ZSIsIndlYlJ0Y0Nvbm5lY3Rpb25Db25maWciLCJob3N0cyIsImNsaWVudHMiLCJjbGllbnQiLCJzaXplIiwiaG9zdHNPZmZlciIsIndzQXJnIiwicmVxdWVzdCIsImNsaWVudEFyZyIsImNvbnN0YW50IiwiaW5wdXRzIiwibmFtZSIsIm91dHB1dHMiLCJwYXlhYmxlIiwic3RhdGVNdXRhYmlsaXR5IiwiYW5vbnltb3VzIiwiaW5kZXhlZCIsIldlYlJ0Y1Byb3ZpZGVyIiwid2ViUnRjQ29uZmlnIiwiaG9zdFV1aWQiLCJwZWVyQ29ubmVjdGlvbiIsImRhdGFDaGFubmVsIiwid3NDbGllbnQiLCJyZWNlaXZlZEFjdGlvbnMkIiwicnhqc18xIiwidXVpZCQiLCJ3ZWJzb2NrZXRNZXNzYWdlJCIsIndlYnNvY2tldENvbm5lY3Rpb25DbG9zZWQkIiwid2Vic29ja2V0Q29ubmVjdGlvbk9wZW4kIiwid2Vic29ja2V0Q29ubmVjdGlvbkVycm9yJCIsImNvbm5lY3Rpb25UaW1lb3V0IiwicG9uZ0NoZWNrSW50ZXJ2YWwiLCJwaW5nVGltZW91dCIsIldFQlNPQ0tFVF9QSU5HX0FOU1dFUl9ERUxBWSIsIldFQlNPQ0tFVF9QSU5HX1BPTkdfQUxMT1dFRF9USU1FIiwiZ2V0Q29uZmlnIiwic2V0SG9zdFV1aWQiLCJzZW5kRGF0YSIsImFjdGlvbiIsInJlYWR5U3RhdGUiLCJzZXRVdWlkIiwibmV4dCIsImRpc2Nvbm5lY3QiLCJjbGVhclRpbWVvdXQiLCJjbG9zZSIsIm9uY2xvc2UiLCJyZW1vdGVEaXNjb25uZWN0Iiwic2V0VGltZW91dCIsImNyZWF0ZU9mZmVyIiwic2V0TG9jYWxEZXNjcmlwdGlvbiIsImNvbm5lY3Rpb25TdWNjZXNzIiwic2lnbmFsaW5nVXJsIiwibG9nIiwiY2hhbm5lbCIsInVybCIsIndlYnNvY2tldF8xIiwib25lcnJvciIsIm9ub3BlbiIsIm9ubWVzc2FnZSIsImFzeW5jIiwic2VuZFBpbmciLCJpc0hvc3QiLCJtYXhUcmllcyIsInRyaWVzIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJzZXR1cFBlZXJjb25uZWN0aW9uIiwic2VuZE9mZmVyIiwic2V0UmVtb3RlRGVzY3JpcHRpb24iLCJ3cnRjXzEiLCJob3N0QW5zd2VyIiwiY3JlYXRlQW5zd2VyIiwiY2xpZW50Q2FuZGlkYXRlIiwiYWRkSWNlQ2FuZGlkYXRlIiwiUlRDUGVlckNvbm5lY3Rpb24iLCJjcmVhdGVEYXRhQ2hhbm5lbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImV2ZW50TWVzc2FnZSIsInAycENvbm5lY3RlZCIsImljZUNvbm5lY3Rpb25TdGF0ZSIsInJlcXVpcmUiLCJpc0FycmF5TGlrZSIsImlzRnVuY3Rpb24iLCJ2YWx1ZSIsImlzUHJvbWlzZSIsImNyZWF0ZUVycm9yQ2xhc3MiLCJjcmVhdGVJbXBsIiwiY3RvckZ1bmMiLCJpbnN0YW5jZSIsIkVycm9yIiwic3RhY2siLCJwcm90b3R5cGUiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIlVuc3Vic2NyaXB0aW9uRXJyb3IiLCJfc3VwZXIiLCJlcnJvcnMiLCJtYXAiLCJpIiwiYXJyUmVtb3ZlIiwiYXJyIiwiaXRlbSIsImluZGV4T2YiLCJzcGxpY2UiLCJTdWJzY3JpcHRpb24iLCJpbml0aWFsVGVhcmRvd24iLCJjbG9zZWQiLCJfcGFyZW50YWdlIiwiX3RlYXJkb3ducyIsInVuc3Vic2NyaWJlIiwiZV8xIiwiX2EiLCJlXzIiLCJfYiIsIl9wYXJlbnRhZ2VfMSIsIl9fdmFsdWVzIiwiX3BhcmVudGFnZV8xXzEiLCJkb25lIiwicmVtb3ZlIiwiZV8xXzEiLCJyZXR1cm4iLCJfdGVhcmRvd25zXzEiLCJfdGVhcmRvd25zXzFfMSIsInRlYXJkb3duXzEiLCJleGVjVGVhcmRvd24iLCJfX3NwcmVhZEFycmF5IiwiX19yZWFkIiwiZV8yXzEiLCJhZGQiLCJ0ZWFyZG93biIsIl9oYXNQYXJlbnQiLCJfYWRkUGFyZW50IiwicGFyZW50IiwiX3JlbW92ZVBhcmVudCIsIkVNUFRZIiwiZW1wdHkiLCJFTVBUWV9TVUJTQ1JJUFRJT04iLCJpc1N1YnNjcmlwdGlvbiIsImNvbmZpZyIsInRpbWVvdXRQcm92aWRlciIsImFyZ3MiLCJfaSIsImFyZ3VtZW50cyIsImRlbGVnYXRlIiwiYXBwbHkiLCJoYW5kbGUiLCJyZXBvcnRVbmhhbmRsZWRFcnJvciIsIm5vb3AiLCJDT01QTEVURV9OT1RJRklDQVRJT04iLCJjcmVhdGVOb3RpZmljYXRpb24iLCJraW5kIiwiY29udGV4dCIsImVycm9yQ29udGV4dCIsImNiIiwiaXNSb290IiwiZXJyb3JUaHJvd24iLCJTdWJzY3JpYmVyIiwiZGVzdGluYXRpb24iLCJfdGhpcyIsImlzU3RvcHBlZCIsIkVNUFRZX09CU0VSVkVSIiwiX19leHRlbmRzIiwiY29tcGxldGUiLCJTYWZlU3Vic2NyaWJlciIsImhhbmRsZVN0b3BwZWROb3RpZmljYXRpb24iLCJuZXh0Tm90aWZpY2F0aW9uIiwiX25leHQiLCJfZXJyb3IiLCJfY29tcGxldGUiLCJfYmluZCIsIkZ1bmN0aW9uIiwiYmluZCIsImZuIiwidGhpc0FyZyIsIkNvbnN1bWVyT2JzZXJ2ZXIiLCJwYXJ0aWFsT2JzZXJ2ZXIiLCJoYW5kbGVVbmhhbmRsZWRFcnJvciIsIm9ic2VydmVyT3JOZXh0IiwiY29udGV4dF8xIiwibm90aWZpY2F0aW9uIiwic3Vic2NyaWJlciIsIm9uU3RvcHBlZE5vdGlmaWNhdGlvbiIsIm9ic2VydmFibGUiLCJTeW1ib2wiLCJpZGVudGl0eSIsInBpcGVGcm9tQXJyYXkiLCJmbnMiLCJpbnB1dCIsInJlZHVjZSIsInByZXYiLCJPYnNlcnZhYmxlIiwic3Vic2NyaWJlIiwiX3N1YnNjcmliZSIsImxpZnQiLCJvcGVyYXRvciIsInNvdXJjZSIsImlzT2JzZXJ2ZXIiLCJfdHJ5U3Vic2NyaWJlIiwic2luayIsImZvckVhY2giLCJwcm9taXNlQ3RvciIsImdldFByb21pc2VDdG9yIiwicmVqZWN0IiwicGlwZSIsIm9wZXJhdGlvbnMiLCJ0b1Byb21pc2UiLCJpc0ludGVyb3BPYnNlcnZhYmxlIiwiaXNBc3luY0l0ZXJhYmxlIiwib2JqIiwiYXN5bmNJdGVyYXRvciIsImNyZWF0ZUludmFsaWRPYnNlcnZhYmxlVHlwZUVycm9yIiwiVHlwZUVycm9yIiwiaXRlcmF0b3IiLCJpc0l0ZXJhYmxlIiwicmVhZGFibGVTdHJlYW1MaWtlVG9Bc3luY0dlbmVyYXRvciIsInJlYWRhYmxlU3RyZWFtIiwiX19hc3luY0dlbmVyYXRvciIsInJlYWRlciIsIl9fZ2VuZXJhdG9yIiwibGFiZWwiLCJnZXRSZWFkZXIiLCJ0cnlzIiwiX19hd2FpdCIsInJlYWQiLCJzZW50IiwicmVsZWFzZUxvY2siLCJpc1JlYWRhYmxlU3RyZWFtTGlrZSIsImlubmVyRnJvbSIsIm9icyIsImFycmF5IiwicHJvbWlzZSIsImZyb21Qcm9taXNlIiwiZnJvbUFzeW5jSXRlcmFibGUiLCJpdGVyYWJsZSIsIml0ZXJhYmxlXzEiLCJpdGVyYWJsZV8xXzEiLCJhc3luY0l0ZXJhYmxlIiwiYXN5bmNJdGVyYWJsZV8xIiwiYXN5bmNJdGVyYWJsZV8xXzEiLCJfX2F3YWl0ZXIiLCJfX2FzeW5jVmFsdWVzIiwicHJvY2VzcyIsImNhdGNoIiwib3BlcmF0ZSIsImluaXQiLCJoYXNMaWZ0IiwibGlmdGVkU291cmNlIiwiY3JlYXRlT3BlcmF0b3JTdWJzY3JpYmVyIiwib25OZXh0Iiwib25Db21wbGV0ZSIsIm9uRXJyb3IiLCJvbkZpbmFsaXplIiwiT3BlcmF0b3JTdWJzY3JpYmVyIiwic2hvdWxkVW5zdWJzY3JpYmUiLCJjbG9zZWRfMSIsInRha2UiLCJjb3VudCIsInNlZW4iLCJPYmplY3RVbnN1YnNjcmliZWRFcnJvciIsIlN1YmplY3QiLCJvYnNlcnZlcnMiLCJoYXNFcnJvciIsInRocm93bkVycm9yIiwic3ViamVjdCIsIkFub255bW91c1N1YmplY3QiLCJfdGhyb3dJZkNsb3NlZCIsImNvcHkiLCJzbGljZSIsImNvcHlfMSIsImNvcHlfMV8xIiwic2hpZnQiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJfY2hlY2tGaW5hbGl6ZWRTdGF0dXNlcyIsIl9pbm5lclN1YnNjcmliZSIsImFzT2JzZXJ2YWJsZSIsInNoYXJlIiwiY29ubmVjdG9yIiwicmVzZXRPbkVycm9yIiwiX2MiLCJyZXNldE9uQ29tcGxldGUiLCJfZCIsInJlc2V0T25SZWZDb3VudFplcm8iLCJ3cmFwcGVyU291cmNlIiwiY29ubmVjdGlvbiIsInJlc2V0Q29ubmVjdGlvbiIsInJlZkNvdW50IiwiaGFzQ29tcGxldGVkIiwiaGFzRXJyb3JlZCIsImNhbmNlbFJlc2V0IiwicmVzZXQiLCJyZXNldEFuZFVuc3Vic2NyaWJlIiwiY29ubiIsImRlc3QiLCJoYW5kbGVSZXNldCIsImdldENsb3N1cmVTYWZlUHJvcGVydHkiLCJvYmpXaXRoUHJvcGVydHlUb0V4dHJhY3QiLCJmaWxsUHJvcGVydGllcyIsInRhcmdldCIsImhhc093blByb3BlcnR5Iiwib3ZlcnJpZGRlbk5hbWUiLCJyZXMiLCJuZXdMaW5lSW5kZXgiLCJzdWJzdHJpbmciLCJjb25jYXRTdHJpbmdzV2l0aFNwYWNlIiwiYmVmb3JlIiwiYWZ0ZXIiLCJfX2ZvcndhcmRfcmVmX18iLCJmb3J3YXJkUmVmIiwiZm9yd2FyZFJlZkZuIiwicmVzb2x2ZUZvcndhcmRSZWYiLCJpc0ZvcndhcmRSZWYiLCJSdW50aW1lRXJyb3IiLCJzdXBlciIsImZvcm1hdFJ1bnRpbWVFcnJvciIsImZ1bGxDb2RlIiwiZXJyb3JNZXNzYWdlIiwibmdEZXZNb2RlIiwicmVuZGVyU3RyaW5naWZ5IiwiU3RyaW5nIiwic3RyaW5naWZ5Rm9yRXJyb3IiLCJ0aHJvd0N5Y2xpY0RlcGVuZGVuY3lFcnJvciIsInBhdGgiLCJkZXBQYXRoIiwidGhyb3dNaXhlZE11bHRpUHJvdmlkZXJFcnJvciIsInRocm93UHJvdmlkZXJOb3RGb3VuZEVycm9yIiwiaW5qZWN0b3JOYW1lIiwiaW5qZWN0b3JEZXRhaWxzIiwiYXNzZXJ0TnVtYmVyIiwiYWN0dWFsIiwidGhyb3dFcnJvciIsImFzc2VydE51bWJlckluUmFuZ2UiLCJtaW5JbmNsdXNpdmUiLCJtYXhJbmNsdXNpdmUiLCJhc3NlcnRMZXNzVGhhbk9yRXF1YWwiLCJhc3NlcnRHcmVhdGVyVGhhbk9yRXF1YWwiLCJhc3NlcnRTdHJpbmciLCJhc3NlcnRFcXVhbCIsImV4cGVjdGVkIiwiYXNzZXJ0Tm90RXF1YWwiLCJhc3NlcnRTYW1lIiwiYXNzZXJ0Tm90U2FtZSIsImFzc2VydExlc3NUaGFuIiwiYXNzZXJ0R3JlYXRlclRoYW4iLCJhc3NlcnREZWZpbmVkIiwiY29tcGFyaXNvbiIsImFzc2VydERvbU5vZGUiLCJub2RlIiwiTm9kZSIsImFzc2VydEluZGV4SW5SYW5nZSIsIm1heExlbiIsImFzc2VydE9uZU9mIiwidmFsaWRWYWx1ZXMiLCJvcHRzIiwicHJvdmlkZWRJbiIsImRlZmluZUluamVjdGFibGUiLCJpbXBvcnRzIiwiZ2V0SW5qZWN0YWJsZURlZiIsImdldE93bkRlZmluaXRpb24iLCJOR19QUk9WX0RFRiIsIk5HX0lOSkVDVEFCTEVfREVGIiwiZmllbGQiLCJnZXRJbmplY3RvckRlZiIsIk5HX0lOSl9ERUYiLCJOR19JTkpFQ1RPUl9ERUYiLCJuZ0luamVjdGFibGVEZWYiLCJuZ0luamVjdG9yRGVmIiwiSW5qZWN0RmxhZ3MiLCJfaW5qZWN0SW1wbGVtZW50YXRpb24iLCJzZXRJbmplY3RJbXBsZW1lbnRhdGlvbiIsImltcGwiLCJwcmV2aW91cyIsImluamVjdFJvb3RMaW1wTW9kZSIsIm5vdEZvdW5kVmFsdWUiLCJmbGFncyIsImluamVjdGFibGVEZWYiLCJPcHRpb25hbCIsIm5vU2lkZUVmZmVjdHMiLCJDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSIsIkNoYW5nZURldGVjdG9yU3RhdHVzIiwiVmlld0VuY2Fwc3VsYXRpb24kMSIsImlzRGVmYXVsdENoYW5nZURldGVjdGlvblN0cmF0ZWd5IiwiY2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kiLCJEZWZhdWx0IiwiVmlld0VuY2Fwc3VsYXRpb24iLCJfX2dsb2JhbFRoaXMiLCJnbG9iYWxUaGlzIiwiX193aW5kb3ciLCJ3aW5kb3ciLCJfX3NlbGYiLCJXb3JrZXJHbG9iYWxTY29wZSIsIl9fZ2xvYmFsIiwiZ2xvYmFsIiwiX2dsb2JhbCIsImluaXROZ0Rldk1vZGUiLCJsb2NhdGlvblN0cmluZyIsImxvY2F0aW9uIiwibmV3Q291bnRlcnMiLCJuYW1lZENvbnN0cnVjdG9ycyIsImZpcnN0Q3JlYXRlUGFzcyIsInROb2RlIiwidFZpZXciLCJyZW5kZXJlckNyZWF0ZVRleHROb2RlIiwicmVuZGVyZXJTZXRUZXh0IiwicmVuZGVyZXJDcmVhdGVFbGVtZW50IiwicmVuZGVyZXJBZGRFdmVudExpc3RlbmVyIiwicmVuZGVyZXJTZXRBdHRyaWJ1dGUiLCJyZW5kZXJlclJlbW92ZUF0dHJpYnV0ZSIsInJlbmRlcmVyU2V0UHJvcGVydHkiLCJyZW5kZXJlclNldENsYXNzTmFtZSIsInJlbmRlcmVyQWRkQ2xhc3MiLCJyZW5kZXJlclJlbW92ZUNsYXNzIiwicmVuZGVyZXJTZXRTdHlsZSIsInJlbmRlcmVyUmVtb3ZlU3R5bGUiLCJyZW5kZXJlckRlc3Ryb3kiLCJyZW5kZXJlckRlc3Ryb3lOb2RlIiwicmVuZGVyZXJNb3ZlTm9kZSIsInJlbmRlcmVyUmVtb3ZlTm9kZSIsInJlbmRlcmVyQXBwZW5kQ2hpbGQiLCJyZW5kZXJlckluc2VydEJlZm9yZSIsInJlbmRlcmVyQ3JlYXRlQ29tbWVudCIsImFsbG93TmdEZXZNb2RlVHJ1ZSIsIm5nRGV2TW9kZVJlc2V0UGVyZkNvdW50ZXJzIiwiRU1QVFlfT0JKIiwiRU1QVFlfQVJSQVkiLCJmcmVlemUiLCJOR19DT01QX0RFRiIsIk5HX0RJUl9ERUYiLCJOR19QSVBFX0RFRiIsIk5HX01PRF9ERUYiLCJOR19GQUNUT1JZX0RFRiIsIk5HX0VMRU1FTlRfSUQiLCJfX05HX0VMRU1FTlRfSURfXyIsIl9yZW5kZXJDb21wQ291bnQiLCJjb21wb25lbnREZWZpbml0aW9uIiwiZGVjbGFyZWRJbnB1dHMiLCJkZWYiLCJwcm92aWRlcnNSZXNvbHZlciIsImRlY2xzIiwidmFycyIsInRlbXBsYXRlIiwiY29uc3RzIiwibmdDb250ZW50U2VsZWN0b3JzIiwiaG9zdEJpbmRpbmdzIiwiaG9zdFZhcnMiLCJob3N0QXR0cnMiLCJjb250ZW50UXVlcmllcyIsImV4cG9ydEFzIiwib25QdXNoIiwiY2hhbmdlRGV0ZWN0aW9uIiwiT25QdXNoIiwiZGlyZWN0aXZlRGVmcyIsInBpcGVEZWZzIiwic2VsZWN0b3JzIiwidmlld1F1ZXJ5IiwiZmVhdHVyZXMiLCJlbmNhcHN1bGF0aW9uIiwiRW11bGF0ZWQiLCJzdHlsZXMiLCJfIiwic2V0SW5wdXQiLCJzY2hlbWFzIiwiZGlyZWN0aXZlVHlwZXMiLCJkaXJlY3RpdmVzIiwiZmVhdHVyZSIsInBpcGVUeXBlcyIsInBpcGVzIiwiaW52ZXJ0T2JqZWN0IiwiZXh0cmFjdERpcmVjdGl2ZURlZiIsImV4dHJhY3RQaXBlRGVmIiwiZ2V0Q29tcG9uZW50RGVmIiwiZ2V0RGlyZWN0aXZlRGVmIiwiZ2V0UGlwZURlZiQxIiwiYXV0b1JlZ2lzdGVyTW9kdWxlQnlJZCIsImJvb3RzdHJhcCIsImRlY2xhcmF0aW9ucyIsInRyYW5zaXRpdmVDb21waWxlU2NvcGVzIiwic2NvcGUiLCJuZ01vZHVsZURlZiIsImdldE5nTW9kdWxlRGVmIiwic2Vjb25kYXJ5IiwibmV3TG9va3VwIiwibWluaWZpZWRLZXkiLCJwdWJsaWNOYW1lIiwiZGVjbGFyZWROYW1lIiwicGlwZURlZiIsInB1cmUiLCJvbkRlc3Ryb3kiLCJuZ09uRGVzdHJveSIsInRocm93Tm90Rm91bmQiLCJIRUFERVJfT0ZGU0VUIiwiVFZpZXdUeXBlQXNTdHJpbmciLCJDT05UQUlORVJfSEVBREVSX09GRlNFVCIsImlzTFZpZXciLCJpc0xDb250YWluZXIiLCJpc0NvbnRlbnRRdWVyeUhvc3QiLCJpc0NvbXBvbmVudEhvc3QiLCJpc0RpcmVjdGl2ZUhvc3QiLCJpc0NvbXBvbmVudERlZiIsImFzc2VydFROb2RlRm9yTFZpZXciLCJsVmlldyIsImFzc2VydFROb2RlRm9yVFZpZXciLCJhc3NlcnRUTm9kZSIsInRWaWV3XyIsImFzc2VydFRJY3UiLCJ0SWN1IiwiY3VycmVudENhc2VMVmlld0luZGV4IiwiYXNzZXJ0Q29tcG9uZW50VHlwZSIsImFzc2VydEhhc1BhcmVudCIsImFzc2VydExDb250YWluZXIiLCJhc3NlcnRMVmlld09yVW5kZWZpbmVkIiwiYXNzZXJ0TFZpZXciLCJhc3NlcnRGaXJzdENyZWF0ZVBhc3MiLCJlcnJNZXNzYWdlIiwiYXNzZXJ0Rmlyc3RVcGRhdGVQYXNzIiwiZmlyc3RVcGRhdGVQYXNzIiwiYXNzZXJ0SW5kZXhJbkV4cGFuZG9SYW5nZSIsImFzc2VydEJldHdlZW4iLCJleHBhbmRvU3RhcnRJbmRleCIsImxvd2VyIiwidXBwZXIiLCJhc3NlcnRQYXJlbnRWaWV3IiwiYXNzZXJ0Tm9kZUluamVjdG9yIiwiaW5qZWN0b3JJbmRleCIsImdldEZhY3RvcnlEZWYiLCJoYXNGYWN0b3J5RGVmIiwiU2ltcGxlQ2hhbmdlIiwicHJldmlvdXNWYWx1ZSIsImN1cnJlbnRWYWx1ZSIsImZpcnN0Q2hhbmdlIiwiaXNGaXJzdENoYW5nZSIsIk5nT25DaGFuZ2VzRmVhdHVyZUltcGwiLCJkZWZpbml0aW9uIiwibmdPbkNoYW5nZXMiLCJuZ09uQ2hhbmdlc1NldElucHV0IiwicmVtZW1iZXJDaGFuZ2VIaXN0b3J5QW5kSW52b2tlT25DaGFuZ2VzSG9vayIsInNpbXBsZUNoYW5nZXNTdG9yZSIsImdldFNpbXBsZUNoYW5nZXNTdG9yZSIsImN1cnJlbnQiLCJwcml2YXRlTmFtZSIsInN0b3JlIiwic2V0U2ltcGxlQ2hhbmdlc1N0b3JlIiwicHJldmlvdXNDaGFuZ2UiLCJuZ0luaGVyaXQiLCJwcm9maWxlckNhbGxiYWNrIiwic2V0UHJvZmlsZXIiLCJwcm9maWxlciIsImhvb2tPckxpc3RlbmVyIiwiU1ZHX05BTUVTUEFDRSIsIk1BVEhfTUxfTkFNRVNQQUNFIiwiRE9DVU1FTlQiLCJzZXREb2N1bWVudCIsImRvY3VtZW50IiwiZ2V0RG9jdW1lbnQiLCJSZW5kZXJlclN0eWxlRmxhZ3MzIiwiaXNQcm9jZWR1cmFsUmVuZGVyZXIiLCJyZW5kZXJlciIsImRvbVJlbmRlcmVyRmFjdG9yeTMiLCJjcmVhdGVSZW5kZXJlciIsImhvc3RFbGVtZW50IiwicmVuZGVyZXJUeXBlIiwidW53cmFwUk5vZGUiLCJnZXROYXRpdmVCeUluZGV4IiwiZ2V0TmF0aXZlQnlUTm9kZSIsIlJFTkRFUkVSIiwiZ2V0VE5vZGUiLCJsb2FkIiwidmlldyIsImdldENvbXBvbmVudExWaWV3QnlJbmRleCIsIm5vZGVJbmRleCIsImhvc3RWaWV3Iiwic2xvdFZhbHVlIiwiaXNDcmVhdGlvbk1vZGUiLCJ2aWV3QXR0YWNoZWRUb0NoYW5nZURldGVjdG9yIiwiZ2V0Q29uc3RhbnQiLCJyZXNldFByZU9yZGVySG9va0ZsYWdzIiwiUFJFT1JERVJfSE9PS19GTEFHUyIsInVwZGF0ZVRyYW5zcGxhbnRlZFZpZXdDb3VudCIsImxDb250YWluZXIiLCJ2aWV3T3JDb250YWluZXIiLCJpbnN0cnVjdGlvblN0YXRlIiwibEZyYW1lIiwiY3JlYXRlTEZyYW1lIiwiYmluZGluZ3NFbmFibGVkIiwiaXNJbkNoZWNrTm9DaGFuZ2VzTW9kZSIsImdldEJpbmRpbmdzRW5hYmxlZCIsImdldExWaWV3IiwiZ2V0VFZpZXciLCJ2aWV3VG9SZXN0b3JlIiwiY29udGV4dExWaWV3IiwiZ2V0Q3VycmVudFROb2RlIiwiY3VycmVudFROb2RlIiwiZ2V0Q3VycmVudFROb2RlUGxhY2Vob2xkZXJPayIsImdldEN1cnJlbnRQYXJlbnRUTm9kZSIsImlzUGFyZW50Iiwic2V0Q3VycmVudFROb2RlIiwiaXNDdXJyZW50VE5vZGVQYXJlbnQiLCJzZXRDdXJyZW50VE5vZGVBc05vdFBhcmVudCIsInNldElzSW5DaGVja05vQ2hhbmdlc01vZGUiLCJtb2RlIiwiZ2V0QmluZGluZ1Jvb3QiLCJiaW5kaW5nUm9vdEluZGV4IiwiYmluZGluZ1N0YXJ0SW5kZXgiLCJnZXRCaW5kaW5nSW5kZXgiLCJiaW5kaW5nSW5kZXgiLCJzZXRCaW5kaW5nSW5kZXgiLCJuZXh0QmluZGluZ0luZGV4IiwiaW5jcmVtZW50QmluZGluZ0luZGV4Iiwic2V0SW5JMThuQmxvY2siLCJpc0luSTE4bkJsb2NrIiwiaW5JMThuIiwic2V0QmluZGluZ1Jvb3RGb3JIb3N0QmluZGluZ3MiLCJjdXJyZW50RGlyZWN0aXZlSW5kZXgiLCJzZXRDdXJyZW50RGlyZWN0aXZlSW5kZXgiLCJnZXRDdXJyZW50RGlyZWN0aXZlRGVmIiwidERhdGEiLCJnZXRDdXJyZW50UXVlcnlJbmRleCIsImN1cnJlbnRRdWVyeUluZGV4Iiwic2V0Q3VycmVudFF1ZXJ5SW5kZXgiLCJnZXREZWNsYXJhdGlvblROb2RlIiwiZGVjbFROb2RlIiwiZW50ZXJESSIsIlNraXBTZWxmIiwicGFyZW50VE5vZGUiLCJwYXJlbnRMVmlldyIsIkhvc3QiLCJERUNMQVJBVElPTl9WSUVXIiwiYWxsb2NMRnJhbWUiLCJlbnRlclZpZXciLCJuZXdWaWV3IiwibmV3TEZyYW1lIiwic2VsZWN0ZWRJbmRleCIsImVsZW1lbnREZXB0aENvdW50IiwiY3VycmVudE5hbWVzcGFjZSIsImZpcnN0Q2hpbGQiLCJjdXJyZW50TEZyYW1lIiwiY2hpbGRMRnJhbWUiLCJjaGlsZCIsImxlYXZlVmlld0xpZ2h0Iiwib2xkTEZyYW1lIiwibGVhdmVESSIsImxlYXZlVmlldyIsImdldFNlbGVjdGVkSW5kZXgiLCJzZXRTZWxlY3RlZEluZGV4IiwiZ2V0U2VsZWN0ZWRUTm9kZSIsInJlZ2lzdGVyUG9zdE9yZGVySG9va3MiLCJkaXJlY3RpdmVTdGFydCIsImVuZCIsImRpcmVjdGl2ZUVuZCIsImRpcmVjdGl2ZURlZiIsImxpZmVjeWNsZUhvb2tzIiwibmdBZnRlckNvbnRlbnRJbml0IiwibmdBZnRlckNvbnRlbnRDaGVja2VkIiwibmdBZnRlclZpZXdJbml0IiwibmdBZnRlclZpZXdDaGVja2VkIiwiY29udGVudEhvb2tzIiwiY29udGVudENoZWNrSG9va3MiLCJ2aWV3SG9va3MiLCJ2aWV3Q2hlY2tIb29rcyIsImRlc3Ryb3lIb29rcyIsImV4ZWN1dGVDaGVja0hvb2tzIiwiaG9va3MiLCJjYWxsSG9va3MiLCJleGVjdXRlSW5pdEFuZENoZWNrSG9va3MiLCJpbml0UGhhc2UiLCJpbmNyZW1lbnRJbml0UGhhc2VGbGFncyIsImN1cnJlbnRWaWV3IiwiY3VycmVudE5vZGVJbmRleCIsInN0YXJ0SW5kZXgiLCJub2RlSW5kZXhMaW1pdCIsIm1heCIsImxhc3ROb2RlSW5kZXhGb3VuZCIsImNhbGxIb29rIiwiaXNJbml0SG9vayIsImhvb2siLCJkaXJlY3RpdmUiLCJOT19QQVJFTlRfSU5KRUNUT1IiLCJOb2RlSW5qZWN0b3JGYWN0b3J5IiwiaXNWaWV3UHJvdmlkZXIiLCJpbmplY3RJbXBsZW1lbnRhdGlvbiIsInJlc29sdmluZyIsImNhblNlZVZpZXdQcm92aWRlcnMiLCJpbmplY3RJbXBsIiwidG9UTm9kZVR5cGVBc1N0cmluZyIsInROb2RlVHlwZSIsInRleHQiLCJhc3NlcnRUTm9kZVR5cGUiLCJleHBlY3RlZFR5cGVzIiwic2V0VXBBdHRyaWJ1dGVzIiwibmF0aXZlIiwiYXR0cnMiLCJpc1Byb2MiLCJuYW1lc3BhY2VVUkkiLCJhdHRyTmFtZSIsImF0dHJWYWwiLCJzZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGVOUyIsImlzQW5pbWF0aW9uUHJvcCIsInNldFByb3BlcnR5IiwiaXNOYW1lT25seUF0dHJpYnV0ZU1hcmtlciIsIm1hcmtlciIsImNoYXJDb2RlQXQiLCJtZXJnZUhvc3RBdHRycyIsImRzdCIsInNyYyIsInNyY01hcmtlciIsIm1lcmdlSG9zdEF0dHJpYnV0ZSIsIm1hcmtlckluc2VydFBvc2l0aW9uIiwiZHN0VmFsdWUiLCJoYXNQYXJlbnRJbmplY3RvciIsInBhcmVudExvY2F0aW9uIiwiZ2V0UGFyZW50SW5qZWN0b3JJbmRleCIsImdldFBhcmVudEluamVjdG9yVmlldyIsInN0YXJ0VmlldyIsInZpZXdPZmZzZXQiLCJwYXJlbnRWaWV3IiwiaW5jbHVkZVZpZXdQcm92aWRlcnMiLCJzZXRJbmNsdWRlVmlld1Byb3ZpZGVycyIsInYiLCJvbGRWYWx1ZSIsIm5leHROZ0VsZW1lbnRJZCIsImdldE9yQ3JlYXRlTm9kZUluamVjdG9yRm9yTm9kZSIsImV4aXN0aW5nSW5qZWN0b3JJbmRleCIsImdldEluamVjdG9ySW5kZXgiLCJpbnNlcnRCbG9vbSIsImJsdWVwcmludCIsInBhcmVudExvYyIsImdldFBhcmVudEluamVjdG9yTG9jYXRpb24iLCJwYXJlbnRJbmRleCIsInBhcmVudERhdGEiLCJmb290ZXIiLCJkZWNsYXJhdGlvblZpZXdPZmZzZXQiLCJsVmlld0N1cnNvciIsInRWaWV3VHlwZSIsImRpUHVibGljSW5JbmplY3RvciIsImJsb29tSGFzaCIsIkJMT09NX1NJWkUiLCJtYXNrIiwiYmxvb21BZGQiLCJub3RGb3VuZFZhbHVlT3JUaHJvdyIsImxvb2t1cFRva2VuVXNpbmdNb2R1bGVJbmplY3RvciIsIlNlbGYiLCJtb2R1bGVJbmplY3RvciIsInByZXZpb3VzSW5qZWN0SW1wbGVtZW50YXRpb24iLCJnZXRPckNyZWF0ZUluamVjdGFibGUiLCJ0b2tlbklkIiwiY3JlYXRlTm9kZUluamVjdG9yIiwiYmxvb21IYXNoQml0T3JGYWN0b3J5IiwicHJldmlvdXNUVmlldyIsImhvc3RURWxlbWVudE5vZGUiLCJERUNMQVJBVElPTl9DT01QT05FTlRfVklFVyIsInNob3VsZFNlYXJjaFBhcmVudCIsImJsb29tSGFzVG9rZW4iLCJzZWFyY2hUb2tlbnNPbkluamVjdG9yIiwiTk9UX0ZPVU5EIiwiTm9kZUluamVjdG9yIiwiY3VycmVudFRWaWV3IiwiaW5qZWN0YWJsZUlkeCIsImxvY2F0ZURpcmVjdGl2ZU9yUHJvdmlkZXIiLCJnZXROb2RlSW5qZWN0YWJsZSIsImNhbkFjY2Vzc1ZpZXdQcm92aWRlcnMiLCJpc0hvc3RTcGVjaWFsQ2FzZSIsIm5vZGVQcm92aWRlckluZGV4ZXMiLCJwcm92aWRlckluZGV4ZXMiLCJ0SW5qZWN0YWJsZXMiLCJpbmplY3RhYmxlc1N0YXJ0IiwiZGlyZWN0aXZlc1N0YXJ0IiwiY3B0Vmlld1Byb3ZpZGVyc0NvdW50IiwiZW5kSW5kZXgiLCJwcm92aWRlclRva2VuT3JEZWYiLCJkaXJEZWYiLCJwcmV2aW91c0luY2x1ZGVWaWV3UHJvdmlkZXJzIiwiZGlyZWN0aXZlSW5kZXgiLCJuZ09uSW5pdCIsIm5nRG9DaGVjayIsIndyYXBwZWRPbkNoYW5nZXMiLCJwcmVPcmRlckhvb2tzIiwicHJlT3JkZXJDaGVja0hvb2tzIiwicmVnaXN0ZXJQcmVPcmRlckhvb2tzIiwiaW5qZWN0b3JWaWV3IiwiaXNGaXJzdEhvc3RUTm9kZSIsIl90Tm9kZSIsIl9sVmlldyIsIm93bkNvbnN0cnVjdG9yIiwib3duRmFjdG9yeSIsImdldEZhY3RvcnlPZiIsIm9iamVjdFByb3RvdHlwZSIsImdldFByb3RvdHlwZU9mIiwidCIsImF0dHJOYW1lVG9JbmplY3QiLCJjbGFzc2VzIiwiYXR0cnNMZW5ndGgiLCJpbmplY3RBdHRyaWJ1dGVJbXBsIiwiQU5OT1RBVElPTlMiLCJQQVJBTUVURVJTIiwiUFJPUF9NRVRBREFUQSIsIm1ha2VEZWNvcmF0b3IiLCJwcm9wcyIsInBhcmVudENsYXNzIiwiYWRkaXRpb25hbFByb2Nlc3NpbmciLCJ0eXBlRm4iLCJtZXRhQ3RvciIsIm1ha2VNZXRhZGF0YUN0b3IiLCJEZWNvcmF0b3JGYWN0b3J5IiwiYW5ub3RhdGlvbkluc3RhbmNlIiwiY2xzIiwibmdNZXRhZGF0YU5hbWUiLCJhbm5vdGF0aW9uQ2xzIiwidmFsdWVzIiwicHJvcE5hbWUiLCJtYWtlUGFyYW1EZWNvcmF0b3IiLCJQYXJhbURlY29yYXRvckZhY3RvcnkiLCJQYXJhbURlY29yYXRvciIsImFubm90YXRpb24iLCJ1bnVzZWRLZXkiLCJwYXJhbWV0ZXJzIiwibWFrZVByb3BEZWNvcmF0b3IiLCJQcm9wRGVjb3JhdG9yRmFjdG9yeSIsImRlY29yYXRvckluc3RhbmNlIiwibWV0YSIsInVuc2hpZnQiLCJBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVOYW1lIiwiSW5qZWN0aW9uVG9rZW4iLCJfZGVzYyIsIkFOQUxZWkVfRk9SX0VOVFJZX0NPTVBPTkVOVFMiLCJRdWVyeSIsIkNvbnRlbnRDaGlsZHJlbiIsInNlbGVjdG9yIiwiZmlyc3QiLCJpc1ZpZXdRdWVyeSIsImRlc2NlbmRhbnRzIiwiZW1pdERpc3RpbmN0Q2hhbmdlc09ubHkiLCJDb250ZW50Q2hpbGQiLCJWaWV3Q2hpbGRyZW4iLCJWaWV3Q2hpbGQiLCJGYWN0b3J5VGFyZ2V0IiwiZ2V0Q29tcGlsZXJGYWNhZGUiLCJnbG9iYWxOZyIsInVzYWdlIiwiVHlwZSIsImlzVHlwZSIsImZsYXR0ZW4iLCJkZWVwRm9yRWFjaCIsImFkZFRvQXJyYXkiLCJyZW1vdmVGcm9tQXJyYXkiLCJwb3AiLCJuZXdBcnJheSIsImtleVZhbHVlQXJyYXlTZXQiLCJrZXlWYWx1ZUFycmF5Iiwia2V5VmFsdWVBcnJheUluZGV4T2YiLCJ2YWx1ZTEiLCJ2YWx1ZTIiLCJwcmV2aW91c0VuZCIsImFycmF5SW5zZXJ0MiIsImtleVZhbHVlQXJyYXlHZXQiLCJzdGFydCIsIm1pZGRsZSIsIl9hcnJheUluZGV4T2ZTb3J0ZWQiLCJFUzVfREVMRUdBVEVfQ1RPUiIsIkVTMjAxNV9JTkhFUklURURfQ0xBU1MiLCJFUzIwMTVfSU5IRVJJVEVEX0NMQVNTX1dJVEhfQ1RPUiIsIkVTMjAxNV9JTkhFUklURURfQ0xBU1NfV0lUSF9ERUxFR0FURV9DVE9SIiwiUmVmbGVjdGlvbkNhcGFiaWxpdGllcyIsInJlZmxlY3QiLCJfcmVmbGVjdCIsImlzUmVmbGVjdGlvbkVuYWJsZWQiLCJfemlwVHlwZXNBbmRBbm5vdGF0aW9ucyIsInBhcmFtVHlwZXMiLCJwYXJhbUFubm90YXRpb25zIiwiY29uY2F0IiwiX293blBhcmFtZXRlcnMiLCJwYXJlbnRDdG9yIiwidHlwZVN0ciIsInRlc3QiLCJ0c2lja2xlQ3RvclBhcmFtcyIsImN0b3JQYXJhbWV0ZXJzIiwiY3RvclBhcmFtIiwiY29udmVydFRzaWNrbGVEZWNvcmF0b3JJbnRvTWV0YWRhdGEiLCJkZWNvcmF0b3JzIiwiZ2V0T3duTWV0YWRhdGEiLCJnZXRQYXJlbnRDdG9yIiwiX293bkFubm90YXRpb25zIiwidHlwZU9yRnVuYyIsImFubm90YXRpb25zIiwib3duQW5ub3RhdGlvbnMiLCJfb3duUHJvcE1ldGFkYXRhIiwicHJvcE1ldGFkYXRhIiwicHJvcERlY29yYXRvcnMiLCJwcm9wIiwicGFyZW50UHJvcE1ldGFkYXRhIiwib3duUHJvcE1ldGFkYXRhIiwiaGFzTGlmZWN5Y2xlSG9vayIsImxjUHJvcGVydHkiLCJndWFyZHMiLCJnZXR0ZXIiLCJzZXR0ZXIiLCJtZXRob2QiLCJpbXBvcnRVcmkiLCJyZXNvdXJjZVVyaSIsInJlc29sdmVJZGVudGlmaWVyIiwibW9kdWxlVXJsIiwibWVtYmVycyIsInJ1bnRpbWUiLCJyZXNvbHZlRW51bSIsImVudW1JZGVudGlmaWVyIiwiZGVjb3JhdG9ySW52b2NhdGlvbnMiLCJkZWNvcmF0b3JJbnZvY2F0aW9uIiwiY3RvciIsInBhcmVudFByb3RvIiwiVEhST1dfSUZfTk9UX0ZPVU5EIiwiTkVXX0xJTkUiLCJTT1VSQ0UiLCJVU0VfVkFMVUUkMSIsInByb3ZpZGUiLCJ1c2VWYWx1ZSIsIl9jdXJyZW50SW5qZWN0b3IiLCJzZXRDdXJyZW50SW5qZWN0b3IiLCJpbmplY3RvciIsImZvcm1lciIsImluamVjdEluamVjdG9yT25seSIsImluamVjdCIsImluamVjdEFyZ3MiLCJ0eXBlcyIsImFyZyIsImoiLCJmbGFnIiwiYXR0YWNoSW5qZWN0RmxhZyIsImRlY29yYXRvciIsIkluamVjdCIsImdldFJlZmxlY3QiLCJyZWZsZWN0RGVwZW5kZW5jaWVzIiwiY29udmVydERlcGVuZGVuY2llcyIsImRlcHMiLCJkZXAiLCJhdHRyaWJ1dGUiLCJvcHRpb25hbCIsInNraXBTZWxmIiwicGFyYW0iLCJwcm90byIsInJlZmxlY3REZXBlbmRlbmN5IiwicmVzb2x2ZUNvbXBvbmVudFJlc291cmNlcyIsInJlc291cmNlUmVzb2x2ZXIiLCJjb21wb25lbnRSZXNvbHZlZCIsInVybE1hcCIsIk1hcCIsImNhY2hlZFJlc291cmNlUmVzb2x2ZSIsInJlc3AiLCJzZXQiLCJ1bndyYXBSZXNwb25zZSIsImNvbXBvbmVudFJlc291cmNlUmVzb2x1dGlvblF1ZXVlIiwiY29tcG9uZW50IiwicHJvbWlzZXMiLCJ0ZW1wbGF0ZVVybCIsInN0eWxlVXJscyIsInN0eWxlT2Zmc2V0Iiwic3R5bGVVcmwiLCJzdHlsZSIsImZ1bGx5UmVzb2x2ZWQiLCJhbGwiLCJjb21wb25lbnREZWZQZW5kaW5nUmVzb2x1dGlvbiIsImRlbGV0ZSIsImNvbXBvbmVudERlZlJlc29sdmVkIiwiY2xlYXJSZXNvbHV0aW9uT2ZDb21wb25lbnRSZXNvdXJjZXNRdWV1ZSIsIlNldCIsImNvbXBvbmVudE5lZWRzUmVzb2x1dGlvbiIsIm9sZCIsInJlc3BvbnNlIiwicG9saWN5JDEiLCJwb2xpY3kiLCJnZXRQb2xpY3kkMSIsInRydXN0ZWRUeXBlcyIsImNyZWF0ZVBvbGljeSIsImNyZWF0ZUhUTUwiLCJzIiwiY3JlYXRlU2NyaXB0IiwiY3JlYXRlU2NyaXB0VVJMIiwidHJ1c3RlZEhUTUxGcm9tU3RyaW5nIiwiaHRtbCIsImdldFBvbGljeSIsInRydXN0ZWRIVE1MRnJvbVN0cmluZ0J5cGFzcyIsInRydXN0ZWRTY3JpcHRGcm9tU3RyaW5nQnlwYXNzIiwic2NyaXB0IiwidHJ1c3RlZFNjcmlwdFVSTEZyb21TdHJpbmdCeXBhc3MiLCJTYWZlVmFsdWVJbXBsIiwiY2hhbmdpbmdUaGlzQnJlYWtzQXBwbGljYXRpb25TZWN1cml0eSIsIlNhZmVIdG1sSW1wbCIsImdldFR5cGVOYW1lIiwiU2FmZVN0eWxlSW1wbCIsIlNhZmVTY3JpcHRJbXBsIiwiU2FmZVVybEltcGwiLCJTYWZlUmVzb3VyY2VVcmxJbXBsIiwidW53cmFwU2FmZVZhbHVlIiwiYWxsb3dTYW5pdGl6YXRpb25CeXBhc3NBbmRUaHJvdyIsImFjdHVhbFR5cGUiLCJnZXRTYW5pdGl6YXRpb25CeXBhc3NUeXBlIiwiYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RIdG1sIiwidHJ1c3RlZEh0bWwiLCJieXBhc3NTYW5pdGl6YXRpb25UcnVzdFN0eWxlIiwidHJ1c3RlZFN0eWxlIiwiYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RTY3JpcHQiLCJ0cnVzdGVkU2NyaXB0IiwiYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RVcmwiLCJ0cnVzdGVkVXJsIiwiYnlwYXNzU2FuaXRpemF0aW9uVHJ1c3RSZXNvdXJjZVVybCIsInRydXN0ZWRSZXNvdXJjZVVybCIsImdldEluZXJ0Qm9keUhlbHBlciIsImRlZmF1bHREb2MiLCJpbmVydERvY3VtZW50SGVscGVyIiwiSW5lcnREb2N1bWVudEhlbHBlciIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImlzRE9NUGFyc2VyQXZhaWxhYmxlIiwiRE9NUGFyc2VySGVscGVyIiwiZ2V0SW5lcnRCb2R5RWxlbWVudCIsImJvZHkiLCJyZW1vdmVDaGlsZCIsImluZXJ0RG9jdW1lbnQiLCJpbXBsZW1lbnRhdGlvbiIsImNyZWF0ZUhUTUxEb2N1bWVudCIsImluZXJ0SHRtbCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImluZXJ0Qm9keUVsZW1lbnQiLCJ0ZW1wbGF0ZUVsIiwiaW5uZXJIVE1MIiwiaW5lcnRCb2R5IiwiZG9jdW1lbnRNb2RlIiwic3RyaXBDdXN0b21Oc0F0dHJzIiwiZWwiLCJlbEF0dHJzIiwiYXR0cmlidXRlcyIsInJlbW92ZUF0dHJpYnV0ZSIsImNoaWxkTm9kZSIsIm5vZGVUeXBlIiwiRUxFTUVOVF9OT0RFIiwibmV4dFNpYmxpbmciLCJTQUZFX1VSTF9QQVRURVJOIiwiREFUQV9VUkxfUEFUVEVSTiIsIl9zYW5pdGl6ZVVybCIsIm1hdGNoIiwid2FybiIsInNhbml0aXplU3Jjc2V0Iiwic3Jjc2V0IiwidHJpbSIsInRhZ1NldCIsInRhZ3MiLCJtZXJnZSIsInNldHMiLCJWT0lEX0VMRU1FTlRTIiwiT1BUSU9OQUxfRU5EX1RBR19CTE9DS19FTEVNRU5UUyIsIk9QVElPTkFMX0VORF9UQUdfSU5MSU5FX0VMRU1FTlRTIiwiT1BUSU9OQUxfRU5EX1RBR19FTEVNRU5UUyIsIkJMT0NLX0VMRU1FTlRTIiwiSU5MSU5FX0VMRU1FTlRTIiwiVkFMSURfRUxFTUVOVFMiLCJVUklfQVRUUlMiLCJTUkNTRVRfQVRUUlMiLCJIVE1MX0FUVFJTIiwiQVJJQV9BVFRSUyIsIlZBTElEX0FUVFJTIiwiU0tJUF9UUkFWRVJTSU5HX0NPTlRFTlRfSUZfSU5WQUxJRF9FTEVNRU5UUyIsIlNhbml0aXppbmdIdG1sU2VyaWFsaXplciIsInNhbml0aXplZFNvbWV0aGluZyIsImJ1ZiIsInNhbml0aXplQ2hpbGRyZW4iLCJ0cmF2ZXJzZUNvbnRlbnQiLCJzdGFydEVsZW1lbnQiLCJURVhUX05PREUiLCJjaGFycyIsIm5vZGVWYWx1ZSIsImVuZEVsZW1lbnQiLCJjaGVja0Nsb2JiZXJlZEVsZW1lbnQiLCJwYXJlbnROb2RlIiwiZWxlbWVudCIsInRhZ05hbWUiLCJub2RlTmFtZSIsImVsQXR0ciIsImVuY29kZUVudGl0aWVzIiwibmV4dE5vZGUiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsIkRPQ1VNRU5UX1BPU0lUSU9OX0NPTlRBSU5FRF9CWSIsIm91dGVySFRNTCIsIlNVUlJPR0FURV9QQUlSX1JFR0VYUCIsIk5PTl9BTFBIQU5VTUVSSUNfUkVHRVhQIiwicmVwbGFjZSIsImluZXJ0Qm9keUhlbHBlciIsIl9zYW5pdGl6ZUh0bWwiLCJ1bnNhZmVIdG1sSW5wdXQiLCJ1bnNhZmVIdG1sIiwibVhTU0F0dGVtcHRzIiwicGFyc2VkSHRtbCIsInNhbml0aXplciIsInNhZmVIdG1sIiwiZ2V0VGVtcGxhdGVDb250ZW50IiwiaXNUZW1wbGF0ZUVsZW1lbnQiLCJjb250ZW50IiwiU2VjdXJpdHlDb250ZXh0IiwiZ2V0U2FuaXRpemVyIiwic2FuaXRpemUiLCJIVE1MIiwidW5zYWZlU3R5bGUiLCJTVFlMRSIsInVuc2FmZVVybCIsIlVSTCIsInVuc2FmZVJlc291cmNlVXJsIiwiUkVTT1VSQ0VfVVJMIiwidW5zYWZlU2NyaXB0IiwiU0NSSVBUIiwicmF3IiwidHJ1c3RlZFNjcmlwdFVSTEZyb21TdHJpbmciLCJ0YWciLCJnZXRVcmxTYW5pdGl6ZXIiLCJnZXRMQ29udGV4dCIsIm1wVmFsdWUiLCJyZWFkUGF0Y2hlZERhdGEiLCJmaW5kVmlhQ29tcG9uZW50IiwiaXNEaXJlY3RpdmVJbnN0YW5jZSIsImRpcmVjdGl2ZUluc3RhbmNlIiwiZGlyZWN0aXZlSW5kZXhTdGFydCIsImRpcmVjdGl2ZUluZGV4RW5kIiwidHJhdmVyc2VOZXh0RWxlbWVudCIsImZpbmRWaWFEaXJlY3RpdmUiLCJnZXREaXJlY3RpdmVzQXROb2RlSW5kZXgiLCJmaW5kVmlhTmF0aXZlRWxlbWVudCIsImV4aXN0aW5nQ3R4IiwiY3JlYXRlTENvbnRleHQiLCJhdHRhY2hQYXRjaERhdGEiLCJyRWxlbWVudCIsInBhcmVudENvbnRleHQiLCJsb2NhbFJlZnMiLCJnZXRDb21wb25lbnRWaWV3QnlJbnN0YW5jZSIsImNvbXBvbmVudEluc3RhbmNlIiwicmVhZFBhdGNoZWRMVmlldyIsImNvbXBvbmVudEluZGljZXMiLCJjb21wb25lbnRzIiwiZWxlbWVudENvbXBvbmVudEluZGV4IiwiaW5jbHVkZUNvbXBvbmVudHMiLCJkaXJlY3RpdmVTdGFydEluZGV4IiwiZGlyZWN0aXZlRW5kSW5kZXgiLCJnZXRPcmlnaW5hbEVycm9yIiwiZGVmYXVsdEVycm9yTG9nZ2VyIiwiRXJyb3JIYW5kbGVyIiwiX2NvbnNvbGUiLCJoYW5kbGVFcnJvciIsIm9yaWdpbmFsRXJyb3IiLCJfZmluZE9yaWdpbmFsRXJyb3IiLCJlcnJvckxvZ2dlciIsImdldEVycm9yTG9nZ2VyIiwiQ1VTVE9NX0VMRU1FTlRTX1NDSEVNQSIsIk5PX0VSUk9SU19TQ0hFTUEiLCJDT01NRU5UX0RJU0FMTE9XRUQiLCJDT01NRU5UX0RFTElNSVRFUiIsImVzY2FwZUNvbW1lbnRUZXh0IiwiQ0FNRUxfQ0FTRV9SRUdFWFAiLCJkZWZhdWx0U2NoZWR1bGVyIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwib3duZXJEb2N1bWVudCIsImRlZmF1bHRWaWV3IiwiSU5URVJQT0xBVElPTl9ERUxJTUlURVIiLCJtYXliZVVud3JhcEZuIiwidGhyb3dNdWx0aXBsZUNvbXBvbmVudEVycm9yIiwiY29uc3RydWN0RGV0YWlsc0ZvckludGVycG9sYXRpb24iLCJyb290SW5kZXgiLCJleHByZXNzaW9uSW5kZXgiLCJjaGFuZ2VkVmFsdWUiLCJwcmVmaXgiLCJjaHVua3MiLCJuZXdWYWx1ZSIsInNsb3RJZHgiLCJSZW5kZXJlclN0eWxlRmxhZ3MyIiwiX2ljdUNvbnRhaW5lckl0ZXJhdGUiLCJpY3VDb250YWluZXJJdGVyYXRlIiwidEljdUNvbnRhaW5lck5vZGUiLCJnZXRMVmlld1BhcmVudCIsImdldFJvb3RDb250ZXh0Iiwidmlld09yQ29tcG9uZW50Iiwicm9vdFZpZXciLCJjb21wb25lbnRPckxWaWV3IiwiZ2V0Um9vdFZpZXciLCJnZXRGaXJzdExDb250YWluZXIiLCJnZXROZWFyZXN0TENvbnRhaW5lciIsIkNISUxEX0hFQUQiLCJnZXROZXh0TENvbnRhaW5lciIsImNvbnRhaW5lciIsImFwcGx5VG9FbGVtZW50T3JDb250YWluZXIiLCJsTm9kZVRvSGFuZGxlIiwiYmVmb3JlTm9kZSIsImlzQ29tcG9uZW50Iiwick5vZGUiLCJuYXRpdmVBcHBlbmRDaGlsZCIsIm5hdGl2ZUluc2VydEJlZm9yZSIsIm5hdGl2ZVJlbW92ZU5vZGUiLCJkZXN0cm95Tm9kZSIsInBhcmVudFJFbGVtZW50IiwiYW5jaG9yIiwiYXBwbHlWaWV3IiwiYXBwbHlDb250YWluZXIiLCJjcmVhdGVUZXh0Tm9kZSIsImNyZWF0ZVRleHQiLCJ1cGRhdGVUZXh0Tm9kZSIsInNldFZhbHVlIiwidGV4dENvbnRlbnQiLCJjcmVhdGVDb21tZW50Tm9kZSIsImNyZWF0ZUNvbW1lbnQiLCJjcmVhdGVFbGVtZW50Tm9kZSIsIm5hbWVzcGFjZSIsIm5hbWVzcGFjZVVyaSIsImdldE5hbWVzcGFjZVVyaSIsImNyZWF0ZUVsZW1lbnROUyIsImRldGFjaE1vdmVkVmlldyIsImRlY2xhcmF0aW9uQ29udGFpbmVyIiwibW92ZWRWaWV3cyIsImRlY2xhcmF0aW9uVmlld0luZGV4IiwiaW5zZXJ0aW9uTENvbnRhaW5lciIsImRldGFjaFZpZXciLCJyZW1vdmVJbmRleCIsImluZGV4SW5Db250YWluZXIiLCJ2aWV3VG9EZXRhY2giLCJkZWNsYXJhdGlvbkxDb250YWluZXIiLCJyZW1vdmVkTFZpZXciLCJsUXVlcmllcyIsIlFVRVJJRVMiLCJkZXN0cm95TFZpZXciLCJsVmlld09yTENvbnRhaW5lciIsImNsZWFuVXBWaWV3IiwiZmlyc3RWaWV3IiwiZGVzdHJveVZpZXdUcmVlIiwidG9DYWxsIiwiY2FsbENvbnRleHQiLCJleGVjdXRlT25EZXN0cm95cyIsInRDbGVhbnVwIiwiY2xlYW51cCIsImxDbGVhbnVwIiwibGFzdExDbGVhbnVwSW5kZXgiLCJpZHhPclRhcmdldEdldHRlciIsImxpc3RlbmVyIiwidXNlQ2FwdHVyZU9yU3ViSWR4IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImluc3RhbmNlQ2xlYW51cEZuIiwicHJvY2Vzc0NsZWFudXBzIiwiZGVzdHJveSIsImdldFBhcmVudFJFbGVtZW50IiwiZ2V0Q2xvc2VzdFJFbGVtZW50IiwiTm9uZSIsImlzTW92ZSIsImluc2VydEJlZm9yZSIsIm5hdGl2ZUFwcGVuZE9ySW5zZXJ0QmVmb3JlIiwibmF0aXZlUGFyZW50Tm9kZSIsImdldEluc2VydEluRnJvbnRPZlJOb2RlIiwiX2dldEluc2VydEluRnJvbnRPZlJOb2RlV2l0aEkxOG4iLCJnZXRJbnNlcnRJbkZyb250T2ZSTm9kZVdpdGhOb0kxOG4iLCJfcHJvY2Vzc0kxOG5JbnNlcnRCZWZvcmUiLCJzZXRJMThuSGFuZGxpbmciLCJnZXRJbnNlcnRJbkZyb250T2ZSTm9kZVdpdGhJMThuIiwicHJvY2Vzc0kxOG5JbnNlcnRCZWZvcmUiLCJjaGlsZFJOb2RlIiwiY2hpbGRUTm9kZSIsInBhcmVudFJOb2RlIiwiYW5jaG9yTm9kZSIsImdldEZpcnN0TmF0aXZlTm9kZSIsImdldEJlZm9yZU5vZGVGb3JWaWV3IiwiZWxJY3VDb250YWluZXJDaGlsZCIsInJOb2RlT3JMQ29udGFpbmVyIiwibmV4dFJOb2RlIiwicHJvamVjdGlvbk5vZGVzIiwiZ2V0UHJvamVjdGlvbk5vZGVzIiwiY29tcG9uZW50SG9zdCIsInByb2plY3Rpb24iLCJhc3NlcnRQcm9qZWN0aW9uU2xvdHMiLCJ2aWV3SW5kZXhJbkNvbnRhaW5lciIsIm5leHRWaWV3SW5kZXgiLCJmaXJzdFROb2RlT2ZWaWV3IiwiaXNIb3N0RWxlbWVudCIsIm5hdGl2ZVBhcmVudCIsIm5hdGl2ZVJlbW92ZUNoaWxkIiwiYXBwbHlOb2RlcyIsImlzUHJvamVjdGlvbiIsInJhd1Nsb3RWYWx1ZSIsImFwcGx5UHJvamVjdGlvblJlY3Vyc2l2ZSIsInByb2plY3Rpb25OZXh0IiwidFByb2plY3Rpb25Ob2RlIiwiY29tcG9uZW50TFZpZXciLCJjb21wb25lbnROb2RlIiwibm9kZVRvUHJvamVjdE9yUk5vZGVzIiwid3JpdGVEaXJlY3RTdHlsZSIsImNzc1RleHQiLCJ3cml0ZURpcmVjdENsYXNzIiwiY2xhc3NOYW1lIiwiY2xhc3NJbmRleE9mIiwiY2xhc3NUb1NlYXJjaCIsInN0YXJ0aW5nSW5kZXgiLCJmb3VuZEluZGV4IiwiTkdfVEVNUExBVEVfU0VMRUNUT1IiLCJpc0Nzc0NsYXNzTWF0Y2hpbmciLCJjc3NDbGFzc1RvTWF0Y2giLCJpc1Byb2plY3Rpb25Nb2RlIiwiaXNJbmxpbmVUZW1wbGF0ZSIsImhhc1RhZ0FuZFR5cGVNYXRjaCIsImN1cnJlbnRTZWxlY3RvciIsImlzTm9kZU1hdGNoaW5nU2VsZWN0b3IiLCJub2RlQXR0cnMiLCJuYW1lT25seU1hcmtlcklkeCIsImdldE5hbWVPbmx5TWFya2VySW5kZXgiLCJza2lwVG9OZXh0U2VsZWN0b3IiLCJpc1Bvc2l0aXZlIiwic2VsZWN0b3JBdHRyVmFsdWUiLCJhdHRySW5kZXhJbk5vZGUiLCJmaW5kQXR0ckluZGV4SW5Ob2RlIiwibm9kZUF0dHJWYWx1ZSIsImNvbXBhcmVBZ2FpbnN0Q2xhc3NOYW1lIiwiYmluZGluZ3NNb2RlIiwibWF5YmVBdHRyTmFtZSIsImF0dHIiLCJtYXRjaFRlbXBsYXRlQXR0cmlidXRlIiwiaXNOb2RlTWF0Y2hpbmdTZWxlY3Rvckxpc3QiLCJpc1NlbGVjdG9ySW5TZWxlY3Rvckxpc3QiLCJzZWxlY3Rvckxpc3RMb29wIiwiY3VycmVudFNlbGVjdG9ySW5MaXN0IiwibWF5YmVXcmFwSW5Ob3RTZWxlY3RvciIsImlzTmVnYXRpdmVNb2RlIiwiY2h1bmsiLCJzdHJpbmdpZnlDU1NTZWxlY3RvciIsImN1cnJlbnRDaHVuayIsInZhbHVlT3JNYXJrZXIiLCJhdHRyVmFsdWUiLCJOT19DSEFOR0UiLCJfX2JyYW5kX18iLCJkZWx0YSIsInNlbGVjdEluZGV4SW50ZXJuYWwiLCJjaGVja05vQ2hhbmdlc01vZGUiLCJhc3NlcnRJbmRleEluRGVjbFJhbmdlIiwiY3JlYXRlTmFtZWRBcnJheVR5cGUiLCJ0b1RTdHlsaW5nUmFuZ2UiLCJnZXRUU3R5bGluZ1JhbmdlUHJldiIsInRTdHlsaW5nUmFuZ2UiLCJnZXRUU3R5bGluZ1JhbmdlUHJldkR1cGxpY2F0ZSIsInNldFRTdHlsaW5nUmFuZ2VQcmV2RHVwbGljYXRlIiwiZ2V0VFN0eWxpbmdSYW5nZU5leHQiLCJzZXRUU3R5bGluZ1JhbmdlTmV4dCIsImdldFRTdHlsaW5nUmFuZ2VOZXh0RHVwbGljYXRlIiwic2V0VFN0eWxpbmdSYW5nZU5leHREdXBsaWNhdGUiLCJhdHRhY2hEZWJ1Z09iamVjdCIsImRlYnVnIiwiYXR0YWNoRGVidWdHZXR0ZXIiLCJkZWJ1Z0dldHRlciIsIkxWSUVXX0NPTVBPTkVOVF9DQUNIRSIsIkxWSUVXX0VNQkVEREVEX0NBQ0hFIiwiTFZJRVdfUk9PVCIsIkxWSUVXX0NPTVBPTkVOVCIsIkxWSUVXX0VNQkVEREVEIiwiTFJvb3RWaWV3IiwiTENvbXBvbmVudFZpZXciLCJMRW1iZWRkZWRWaWV3IiwibmFtZVN1ZmZpeCIsImxhc3RJbmRleE9mIiwic3Vic3RyIiwidG9EZWJ1Z1N0eWxlQmluZGluZyIsImlzQ2xhc3NCYXNlZCIsImJpbmRpbmdzIiwicmFuZ2UiLCJjbGFzc0JpbmRpbmdzIiwic3R5bGVCaW5kaW5ncyIsImlzVGVtcGxhdGUiLCJjdXJzb3IiLCJpdGVtS2V5IiwiaXRlbVJhbmdlIiwicHJldkR1cGxpY2F0ZSIsIm5leHREdXBsaWNhdGUiLCJuZXh0SW5kZXgiLCJwcmV2SW5kZXgiLCJyZXNpZHVhbENsYXNzZXMiLCJyZXNpZHVhbFN0eWxlcyIsInByb2Nlc3NUTm9kZUNoaWxkcmVuIiwidGVtcGxhdGVfIiwiVFZpZXdEYXRhIiwiVFZJRVdEQVRBX0VNUFRZIiwiTFZpZXdCbHVlcHJpbnQiLCJNYXRjaGVzQXJyYXkiLCJUVmlld0NvbXBvbmVudHMiLCJUTm9kZUxvY2FsTmFtZXMiLCJUTm9kZUluaXRpYWxJbnB1dHMiLCJMQ2xlYW51cCIsIlRDbGVhbnVwIiwidG9EZWJ1ZyIsInRvSHRtbCIsImluY2x1ZGVDaGlsZHJlbiIsIkNPTU1FTlRfTk9ERSIsIkxWaWV3RGVidWciLCJfcmF3X2xWaWV3IiwiX19yYXdfX2ZsYWdzX18iLCJpbml0UGhhc2VTdGF0ZSIsImNyZWF0aW9uTW9kZSIsImZpcnN0Vmlld1Bhc3MiLCJjaGVja0Fsd2F5cyIsImRpcnR5IiwiYXR0YWNoZWQiLCJkZXN0cm95ZWQiLCJpbmRleFdpdGhpbkluaXRQaGFzZSIsImhvc3RIVE1MIiwibm9kZXMiLCJtYXBUb0hUTUwiLCJ0b0RlYnVnTm9kZXMiLCJyZW5kZXJlckZhY3RvcnkiLCJSRU5ERVJFUl9GQUNUT1JZIiwiY2hpbGRIZWFkIiwiY2hpbGRUYWlsIiwiZGVjbGFyYXRpb25WaWV3IiwicXVlcmllcyIsInRIb3N0IiwidG9MVmlld1JhbmdlIiwiZXhwYW5kbyIsImNoaWxkVmlld3MiLCJjaGlsZHJlbiIsImwiLCJkZWJ1Z05vZGVzIiwidE5vZGVDdXJzb3IiLCJidWlsZERlYnVnTm9kZSIsImZhY3RvcmllcyIsImluc3RhbmNlcyIsImJ1aWxkTm9kZUluamVjdG9yRGVidWciLCJpbmplY3RvclJlc29sdXRpb25QYXRoIiwiZGVidWdOb2RlSW5qZWN0b3JQYXRoIiwidmlld1Byb3ZpZGVycyIsInByb3ZpZGVySW5kZXhTdGFydF8iLCJwcm92aWRlckluZGV4RW5kXyIsImJsb29tIiwidG9CbG9vbSIsImN1bXVsYXRpdmVCbG9vbSIsInBhcmVudEluamVjdG9ySW5kZXgiLCJiaW5hcnkiLCJpZHgiLCJMQ29udGFpbmVyRGVidWciLCJfcmF3X2xDb250YWluZXIiLCJoYXNUcmFuc3BsYW50ZWRWaWV3cyIsInZpZXdzIiwiX0NMRUFOX1BST01JU0UiLCJyZWZyZXNoQ29udGVudFF1ZXJpZXMiLCJxdWVyeVN0YXJ0SWR4IiwiZGlyZWN0aXZlRGVmSWR4IiwiY3JlYXRlTFZpZXciLCJ0SG9zdE5vZGUiLCJjb21wb25lbnRBcnJheSIsImVtYmVkZGVkQXJyYXkiLCJnZXRMVmlld1RvQ2xvbmUiLCJjbG9uZVRvTFZpZXdGcm9tVFZpZXdCbHVlcHJpbnQiLCJhdHRhY2hMVmlld0RlYnVnIiwiZ2V0T3JDcmVhdGVUTm9kZSIsImFzc2VydFB1cmVUTm9kZVR5cGUiLCJjcmVhdGVUTm9kZUF0SW5kZXgiLCJ0UGFyZW50IiwiaW5zZXJ0QmVmb3JlSW5kZXgiLCJkaXJlY3RpdmVTdHlsaW5nTGFzdCIsInByb3BlcnR5QmluZGluZ3MiLCJtZXJnZWRBdHRycyIsImxvY2FsTmFtZXMiLCJpbml0aWFsSW5wdXRzIiwidFZpZXdzIiwic3R5bGVzV2l0aG91dEhvc3QiLCJjbGFzc2VzV2l0aG91dEhvc3QiLCJ0eXBlXyIsImZsYWdzXyIsInN0eWxlQmluZGluZ3NfIiwiY2xhc3NCaW5kaW5nc18iLCJzZWFsIiwiY3JlYXRlVE5vZGUiLCJhbGxvY0V4cGFuZG8iLCJudW1TbG90c1RvQWxsb2MiLCJpbml0aWFsVmFsdWUiLCJhbGxvY0lkeCIsInJlbmRlclZpZXciLCJleGVjdXRlVmlld1F1ZXJ5Rm4iLCJ0ZW1wbGF0ZUZuIiwiZXhlY3V0ZVRlbXBsYXRlIiwic3RhdGljQ29udGVudFF1ZXJpZXMiLCJzdGF0aWNWaWV3UXVlcmllcyIsImhvc3RMVmlldyIsInJlbmRlckNvbXBvbmVudCQxIiwicmVuZGVyQ2hpbGRDb21wb25lbnRzIiwiaW5jb21wbGV0ZUZpcnN0UGFzcyIsInJlZnJlc2hWaWV3IiwiaXNJbkNoZWNrTm9DaGFuZ2VzUGFzcyIsImhvb2tzSW5pdFBoYXNlQ29tcGxldGVkIiwibW92ZWRMVmlldyIsIm1hcmtUcmFuc3BsYW50ZWRWaWV3c0ZvclJlZnJlc2giLCJlbWJlZGRlZExWaWV3IiwiZW1iZWRkZWRUVmlldyIsInJlZnJlc2hFbWJlZGRlZFZpZXdzIiwiaG9zdEJpbmRpbmdPcENvZGVzIiwib3BDb2RlIiwiZGlyZWN0aXZlSWR4IiwiYmluZGluZ1Jvb3RJbmR4IiwiaG9zdEJpbmRpbmdGbiIsInByb2Nlc3NIb3N0QmluZGluZ09wQ29kZXMiLCJyZWZyZXNoQ29tcG9uZW50IiwicmVmcmVzaENoaWxkQ29tcG9uZW50cyIsInJlbmRlckNvbXBvbmVudE9yVGVtcGxhdGUiLCJub3JtYWxFeGVjdXRpb25QYXRoIiwiY3JlYXRpb25Nb2RlSXNBY3RpdmUiLCJiZWdpbiIsInJmIiwicHJldlNlbGVjdGVkSW5kZXgiLCJpc1VwZGF0ZVBoYXNlIiwiZXhlY3V0ZUNvbnRlbnRRdWVyaWVzIiwiY3JlYXRlRGlyZWN0aXZlc0luc3RhbmNlcyIsImFkZENvbXBvbmVudExvZ2ljIiwic2V0SW5wdXRzRnJvbUF0dHJzIiwiaW5zdGFudGlhdGVBbGxEaXJlY3RpdmVzIiwiZWxlbWVudEluZGV4IiwiZGlySW5kZXgiLCJpbnZva2VIb3N0QmluZGluZ3NJbkNyZWF0aW9uTW9kZSIsImludm9rZURpcmVjdGl2ZXNIb3N0QmluZGluZ3MiLCJzYXZlUmVzb2x2ZWRMb2NhbHNJbkRhdGEiLCJ2aWV3RGF0YSIsImxvY2FsUmVmRXh0cmFjdG9yIiwibG9jYWxJbmRleCIsImdldE9yQ3JlYXRlVENvbXBvbmVudFZpZXciLCJjcmVhdGVUVmlldyIsImNvbnN0c09yRmFjdG9yeSIsImluaXRpYWxWaWV3TGVuZ3RoIiwiY3JlYXRlVmlld0JsdWVwcmludCIsImRpcmVjdGl2ZVJlZ2lzdHJ5IiwicGlwZVJlZ2lzdHJ5IiwiX2RlY2xzIiwiX3ZhcnMiLCJmaWxsIiwibG9jYXRlSG9zdEVsZW1lbnQiLCJlbGVtZW50T3JTZWxlY3RvciIsInByZXNlcnZlQ29udGVudCIsIlNoYWRvd0RvbSIsInNlbGVjdFJvb3RFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImFzc2VydEhvc3ROb2RlRXhpc3RzIiwic3RvcmVDbGVhbnVwV2l0aENvbnRleHQiLCJjbGVhbnVwRm4iLCJnZXRPckNyZWF0ZUxWaWV3Q2xlYW51cCIsImdldE9yQ3JlYXRlVFZpZXdDbGVhbnVwIiwiZ2VuZXJhdGVQcm9wZXJ0eUFsaWFzZXMiLCJpbnB1dEFsaWFzTWFwIiwicHJvcFN0b3JlIiwiaW50ZXJuYWxOYW1lIiwiZWxlbWVudFByb3BlcnR5SW50ZXJuYWwiLCJuYXRpdmVPbmx5IiwiZGF0YVZhbHVlIiwiaW5wdXREYXRhIiwic2V0SW5wdXRzRm9yUHJvcGVydHkiLCJ2aWV3SW5kZXgiLCJjaGlsZENvbXBvbmVudExWaWV3IiwibWFya0RpcnR5SWZPblB1c2giLCJzZXROZ1JlZmxlY3RQcm9wZXJ0eSIsInNldE5nUmVmbGVjdFByb3BlcnRpZXMiLCJzdGFydHNXaXRoIiwidmFsaWRhdGVBZ2FpbnN0RXZlbnRQcm9wZXJ0aWVzIiwibWF0Y2hpbmdTY2hlbWFzIiwidmFsaWRhdGVQcm9wZXJ0eSIsImxvZ1Vua25vd25Qcm9wZXJ0eUVycm9yIiwibSIsImRlYnVnVmFsdWUiLCJub3JtYWxpemVEZWJ1Z0JpbmRpbmdWYWx1ZSIsInNjaGVtYSIsInJlc29sdmVEaXJlY3RpdmVzIiwiaGFzRGlyZWN0aXZlcyIsInJlZ2lzdHJ5IiwibWF0Y2hlcyIsIm1hcmtBc0NvbXBvbmVudEhvc3QiLCJmaW5kRGlyZWN0aXZlRGVmTWF0Y2hlcyIsImV4cG9ydHNNYXAiLCJpbml0VE5vZGVGbGFncyIsInByZU9yZGVySG9va3NGb3VuZCIsInByZU9yZGVyQ2hlY2tIb29rc0ZvdW5kIiwiY29uZmlndXJlVmlld1dpdGhEaXJlY3RpdmUiLCJzYXZlTmFtZVRvRXhwb3J0TWFwIiwibGlmZUN5Y2xlSG9va3MiLCJ0Vmlld0RhdGEiLCJ0Tm9kZUF0dHJzIiwiaW5wdXRzRnJvbUF0dHJzIiwiaW5wdXRzU3RvcmUiLCJvdXRwdXRzU3RvcmUiLCJkaXJlY3RpdmVJbnB1dHMiLCJnZW5lcmF0ZUluaXRpYWxJbnB1dHMiLCJpbml0aWFsaXplSW5wdXRBbmRPdXRwdXRBbGlhc2VzIiwiY2FjaGVNYXRjaGluZ0xvY2FsTmFtZXMiLCJyZWdpc3Rlckhvc3RCaW5kaW5nT3BDb2RlcyIsImRpcmVjdGl2ZVZhcnNJZHgiLCJlbGVtZW50SW5keCIsImxhc3RTZWxlY3RlZEVsZW1lbnRJZHgiLCJob3N0VE5vZGUiLCJudW1iZXJPZkRpcmVjdGl2ZXMiLCJkaXJlY3RpdmVGYWN0b3J5Iiwibm9kZUluamVjdG9yRmFjdG9yeSIsImNvbXBvbmVudFZpZXciLCJhZGRUb1ZpZXdUcmVlIiwiZWxlbWVudEF0dHJpYnV0ZUludGVybmFsIiwidmFsaWRhdGVBZ2FpbnN0RXZlbnRBdHRyaWJ1dGVzIiwic2V0RWxlbWVudEF0dHJpYnV0ZSIsInN0clZhbHVlIiwiaW5pdGlhbElucHV0RGF0YSIsImlucHV0c1RvU3RvcmUiLCJMQ29udGFpbmVyQXJyYXkiLCJjcmVhdGVMQ29udGFpbmVyIiwiaG9zdE5hdGl2ZSIsImF0dGFjaExDb250YWluZXJEZWJ1ZyIsImNvbXBvbmVudEhvc3RJZHgiLCJyZWZyZXNoQ29udGFpbnNEaXJ0eVZpZXciLCJjb21wb25lbnRUVmlldyIsInN5bmNWaWV3V2l0aEJsdWVwcmludCIsIm1hcmtWaWV3RGlydHkiLCJ0aWNrUm9vdENvbnRleHQiLCJyb290Q29udGV4dCIsInJvb3RDb21wb25lbnQiLCJkZXRlY3RDaGFuZ2VzSW50ZXJuYWwiLCJkZXRlY3RDaGFuZ2VzSW5Sb290VmlldyIsInZpZXdRdWVyeUZuIiwic3RvcmVQcm9wZXJ0eUJpbmRpbmdNZXRhZGF0YSIsInByb3BlcnR5TmFtZSIsImludGVycG9sYXRpb25QYXJ0cyIsImJpbmRpbmdNZXRhZGF0YSIsIkNMRUFOX1BST01JU0UiLCJsb2FkQ29tcG9uZW50UmVuZGVyZXIiLCJjdXJyZW50RGVmIiwidW53cmFwTFZpZXciLCJlcnJvckhhbmRsZXIiLCJ0ZXh0QmluZGluZ0ludGVybmFsIiwiY29tcHV0ZVN0YXRpY1N0eWxpbmciLCJ3cml0ZVRvSG9zdCIsImRldGVjdENoYW5nZXMiLCJtYXJrRGlydHkiLCJjbGVhbiIsInIiLCJzY2hlZHVsZXIiLCJwbGF5ZXJIYW5kbGVyIiwiZmx1c2hQbGF5ZXJzIiwic2NoZWR1bGVUaWNrIiwiSU5KRUNUT1IiLCJOdWxsSW5qZWN0b3IiLCJJTkpFQ1RPUl9TQ09QRSIsIk5PVF9ZRVQiLCJDSVJDVUxBUiIsIk5VTExfSU5KRUNUT1IkMSIsImdldE51bGxJbmplY3RvciIsImNyZWF0ZUluamVjdG9yIiwiZGVmVHlwZSIsImFkZGl0aW9uYWxQcm92aWRlcnMiLCJjcmVhdGVJbmplY3RvcldpdGhvdXRJbmplY3Rvckluc3RhbmNlcyIsIl9yZXNvbHZlSW5qZWN0b3JEZWZUeXBlcyIsIlIzSW5qZWN0b3IiLCJyZWNvcmRzIiwiaW5qZWN0b3JEZWZUeXBlcyIsIl9kZXN0cm95ZWQiLCJkZWR1cFN0YWNrIiwicHJvY2Vzc1Byb3ZpZGVyIiwiaW5qZWN0b3JEZWYiLCJwcm9jZXNzSW5qZWN0b3JUeXBlIiwibWFrZVJlY29yZCIsInJlY29yZCIsImFzc2VydE5vdERlc3Ryb3llZCIsInNlcnZpY2UiLCJjbGVhciIsInByZXZpb3VzSW5qZWN0b3IiLCJpbmplY3RhYmxlRGVmSW5TY29wZSIsImluamVjdGFibGVEZWZPckluamVjdG9yRGVmRmFjdG9yeSIsImh5ZHJhdGUiLCJuZXh0SW5qZWN0b3IiLCJpbmplY3RvckVycm9yTmFtZSIsInRva2VuUGF0aCIsImNoYXJBdCIsInBhcnRzIiwiZm9ybWF0RXJyb3IiLCJjYXRjaEluamVjdG9yRXJyb3IiLCJ0b2tlbnMiLCJkZWZPcldyYXBwZWREZWYiLCJwYXJlbnRzIiwibmdNb2R1bGUiLCJpc0R1cGxpY2F0ZSIsImltcG9ydFR5cGVzV2l0aFByb3ZpZGVycyIsImltcG9ydGVkIiwiZGVmUHJvdmlkZXJzIiwiaW5qZWN0b3JUeXBlIiwibmdNb2R1bGVUeXBlIiwiaXNUeXBlUHJvdmlkZXIiLCJpc1ZhbHVlUHJvdmlkZXIiLCJwcm92aWRlclRvRmFjdG9yeSIsInByb3ZpZGVyVG9SZWNvcmQiLCJtdWx0aSIsImV4aXN0aW5nIiwibXVsdGlSZWNvcmQiLCJoYXMiLCJwYXJhbUxlbmd0aCIsImluaGVyaXRlZEluamVjdGFibGVEZWYiLCJ0eXBlTmFtZSIsImdldEluaGVyaXRlZEluamVjdGFibGVEZWYiLCJnZXRVbmRlY29yYXRlZEluamVjdGFibGVGYWN0b3J5IiwidW53cmFwcGVkUHJvdmlkZXIiLCJ1c2VGYWN0b3J5IiwidXNlRXhpc3RpbmciLCJpc0V4aXN0aW5nUHJvdmlkZXIiLCJjbGFzc1JlZiIsInVzZUNsYXNzIiwibmdNb2R1bGVEZXRhaWwiLCJ0aHJvd0ludmFsaWRQcm92aWRlckVycm9yIiwiaGFzRGVwcyIsIkluamVjdG9yIiwic3RhdGljIiwiZ2V0Q29tcG9uZW50JDEiLCJhc3NlcnREb21FbGVtZW50IiwiZ2V0Q29tcG9uZW50QXROb2RlSW5kZXgiLCJnZXRDb250ZXh0IiwiZ2V0T3duaW5nQ29tcG9uZW50IiwiZWxlbWVudE9yRGlyIiwiZ2V0Um9vdENvbXBvbmVudHMiLCJnZXRJbmplY3RvciIsIk5VTEwiLCJnZXREaXJlY3RpdmVzIiwiVGV4dCIsImdldERpcmVjdGl2ZU1ldGFkYXRhJDEiLCJkaXJlY3RpdmVPckNvbXBvbmVudEluc3RhbmNlIiwiY29tcG9uZW50RGVmIiwiZ2V0SG9zdEVsZW1lbnQiLCJjb21wb25lbnRPckRpcmVjdGl2ZSIsImdldExpc3RlbmVycyIsImxDb250ZXh0IiwibGlzdGVuZXJzIiwiZmlyc3RQYXJhbSIsInNlY29uZFBhcmFtIiwibGlzdGVuZXJFbGVtZW50IiwiY2FsbGJhY2siLCJ1c2VDYXB0dXJlT3JJbmR4IiwidXNlQ2FwdHVyZSIsInNvcnRMaXN0ZW5lcnMiLCJhIiwiYiIsIkVsZW1lbnQiLCJhcHBseUNoYW5nZXMiLCJfcHVibGlzaGVkIiwicHVibGlzaERlZmF1bHRHbG9iYWxVdGlscyQxIiwicHVibGlzaEdsb2JhbFV0aWwiLCJDT01QSUxFRCIsInciLCJyZW5kZXJDb21wb25lbnQiLCJjb21wb25lbnRUeXBlIiwiY29tcG9uZW50VGFnIiwiaG9zdFJOb2RlIiwicm9vdEZsYWdzIiwiY3JlYXRlUm9vdENvbnRleHQiLCJyb290VFZpZXciLCJjcmVhdGVSb290Q29tcG9uZW50IiwiY3JlYXRlUm9vdENvbXBvbmVudFZpZXciLCJob3N0RmVhdHVyZXMiLCJob3N0UmVuZGVyZXIiLCJ2aWV3UmVuZGVyZXIiLCJyb290TFZpZXciLCJyb290VE5vZGUiLCJpbnN0YW50aWF0ZVJvb3RDb21wb25lbnQiLCJMaWZlY3ljbGVIb29rc0ZlYXR1cmUiLCJ3aGVuUmVuZGVyZWQiLCJnZXRTdXBlclR5cGUiLCJzdXBlclR5cGUiLCJzaG91bGRJbmhlcml0RmllbGRzIiwiaW5oZXJpdGFuY2VDaGFpbiIsInN1cGVyRGVmIiwid3JpdGVhYmxlRGVmIiwibWF5YmVVbndyYXBFbXB0eSIsInN1cGVySG9zdEJpbmRpbmdzIiwiaW5oZXJpdEhvc3RCaW5kaW5ncyIsInN1cGVyVmlld1F1ZXJ5Iiwic3VwZXJDb250ZW50UXVlcmllcyIsImluaGVyaXRWaWV3UXVlcnkiLCJpbmhlcml0Q29udGVudFF1ZXJpZXMiLCJhbmltYXRpb24iLCJkZWZEYXRhIiwibWVyZ2VIb3N0QXR0cnNBY3Jvc3NJbmhlcml0YW5jZSIsInByZXZWaWV3UXVlcnkiLCJjdHgiLCJwcmV2Q29udGVudFF1ZXJpZXMiLCJwcmV2SG9zdEJpbmRpbmdzIiwiQ09QWV9ESVJFQ1RJVkVfRklFTERTIiwiQ09QWV9DT01QT05FTlRfRklFTERTIiwiZGVmQW55IiwiX3N5bWJvbEl0ZXJhdG9yIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImRldk1vZGVFcXVhbCIsImlzTGlzdExpa2VJdGVyYWJsZUEiLCJpc0xpc3RMaWtlSXRlcmFibGUiLCJpc0xpc3RMaWtlSXRlcmFibGVCIiwiY29tcGFyYXRvciIsIml0ZXJhdG9yMSIsIml0ZXJhdG9yMiIsIml0ZW0xIiwiaXRlbTIiLCJhcmVJdGVyYWJsZXNFcXVhbCIsImlzQU9iamVjdCIsImlzQk9iamVjdCIsImlzIiwiaXNKc09iamVjdCIsIm8iLCJ1cGRhdGVCaW5kaW5nIiwiZ2V0QmluZGluZyIsImJpbmRpbmdVcGRhdGVkIiwib2xkVmFsdWVUb0NvbXBhcmUiLCJkZXRhaWxzIiwibWV0YWRhdGEiLCJSZWdFeHAiLCJnZXRFeHByZXNzaW9uQ2hhbmdlZEVycm9yRGV0YWlscyIsImN1cnJWYWx1ZSIsInRocm93RXJyb3JJZk5vQ2hhbmdlc01vZGUiLCJiaW5kaW5nVXBkYXRlZDIiLCJleHAxIiwiZXhwMiIsImRpZmZlcmVudCIsImJpbmRpbmdVcGRhdGVkMyIsImV4cDMiLCJiaW5kaW5nVXBkYXRlZDQiLCJleHA0IiwiaW50ZXJwb2xhdGlvblYiLCJpc0JpbmRpbmdVcGRhdGVkIiwiaW50ZXJwb2xhdGlvbjEiLCJ2MCIsInN1ZmZpeCIsImludGVycG9sYXRpb24yIiwiaTAiLCJ2MSIsImludGVycG9sYXRpb24zIiwiaTEiLCJ2MiIsImludGVycG9sYXRpb240IiwiaTIiLCJ2MyIsImludGVycG9sYXRpb241IiwiaTMiLCJ2NCIsImludGVycG9sYXRpb242IiwiaTQiLCJ2NSIsImludGVycG9sYXRpb243IiwiaTUiLCJ2NiIsImludGVycG9sYXRpb244IiwiaTYiLCJ2NyIsImludGVycG9sYXRlZFZhbHVlIiwiaW50ZXJwb2xhdGVkIiwiaW50ZXJwb2xhdGlvbkluQmV0d2VlbiIsImF0dHJzSW5kZXgiLCJsb2NhbFJlZnNJbmRleCIsImFkanVzdGVkSW5kZXgiLCJ0Vmlld0NvbnN0cyIsInRlbXBsYXRlRmlyc3RDcmVhdGVQYXNzIiwiY29tbWVudCIsImFuZ3VsYXJDb3JlRGlFbnYiLCJVU0VfVkFMVUUiLCJpc1VzZUNsYXNzUHJvdmlkZXIiLCJpc1VzZUZhY3RvcnlQcm92aWRlciIsIkluamVjdGFibGUiLCJuZ0ZhY3RvcnlEZWYiLCJjb21waWxlciIsImNvbXBpbGVJbmplY3RhYmxlIiwic3JjTWV0YSIsImNvbXBpbGVyTWV0YSIsInR5cGVBcmd1bWVudENvdW50IiwiaXNVc2VWYWx1ZVByb3ZpZGVyIiwiaXNVc2VFeGlzdGluZ1Byb3ZpZGVyIiwiZ2V0SW5qZWN0YWJsZU1ldGFkYXRhIiwiY29tcGlsZUZhY3RvcnkiLCJjb25zdHJ1Y3RSZXNvbHZpbmdQYXRoIiwiZmluZEZpcnN0Q2xvc2VkQ3ljbGUiLCJyZXZlcnNlIiwiayIsImluamVjdGlvbkVycm9yIiwiY29uc3RydWN0UmVzb2x2aW5nTWVzc2FnZSIsImVyck1zZyIsIndyYXBwZWRFcnJvciIsImFkZEtleSIsImluamVjdG9ycyIsIm5vQW5ub3RhdGlvbkVycm9yIiwicGFyYW1zIiwiaWkiLCJwYXJhbWV0ZXIiLCJSZWZsZWN0aXZlS2V5IiwiZGlzcGxheU5hbWUiLCJfZ2xvYmFsS2V5UmVnaXN0cnkiLCJudW1iZXJPZktleXMiLCJfYWxsS2V5cyIsIm5ld0tleSIsInJlZmxlY3RvciIsInJlZmxlY3Rpb25DYXBhYmlsaXRpZXMiLCJ1cGRhdGVDYXBhYmlsaXRpZXMiLCJjYXBzIiwiaWRlbnRpZmllciIsIlJlZmxlY3RpdmVEZXBlbmRlbmN5IiwidmlzaWJpbGl0eSIsIl9FTVBUWV9MSVNUIiwiUmVzb2x2ZWRSZWZsZWN0aXZlUHJvdmlkZXJfIiwicmVzb2x2ZWRGYWN0b3JpZXMiLCJtdWx0aVByb3ZpZGVyIiwicmVzb2x2ZWRGYWN0b3J5IiwiUmVzb2x2ZWRSZWZsZWN0aXZlRmFjdG9yeSIsImRlcGVuZGVuY2llcyIsInJlc29sdmVSZWZsZWN0aXZlRmFjdG9yeSIsImZhY3RvcnlGbiIsInJlc29sdmVkRGVwcyIsIl9kZXBlbmRlbmNpZXNGb3IiLCJhbGlhc0luc3RhbmNlIiwiZnJvbUtleSIsIl9leHRyYWN0VG9rZW4iLCJjb25zdHJ1Y3REZXBlbmRlbmNpZXMiLCJyZXNvbHZlUmVmbGVjdGl2ZVByb3ZpZGVyIiwicmVzb2x2ZVJlZmxlY3RpdmVQcm92aWRlcnMiLCJyZXNvbHZlZFByb3ZpZGVyTWFwIiwibm9ybWFsaXplZFByb3ZpZGVyc01hcCIsInJlc29sdmVkUHJvdmlkZXIiLCJtZXJnZVJlc29sdmVkUmVmbGVjdGl2ZVByb3ZpZGVycyIsIl9ub3JtYWxpemVQcm92aWRlcnMiLCJmcm9tIiwic29tZSIsInAiLCJfY3JlYXRlRGVwZW5kZW5jeSIsInBhcmFtTWV0YWRhdGEiLCJVTkRFRklORUQiLCJSZWZsZWN0aXZlSW5qZWN0b3IiLCJSZXNvbHZlZFJlZmxlY3RpdmVQcm92aWRlcnMiLCJmcm9tUmVzb2x2ZWRQcm92aWRlcnMiLCJSZWZsZWN0aXZlSW5qZWN0b3JfIiwiX3Byb3ZpZGVycyIsIl9wYXJlbnQiLCJfY29uc3RydWN0aW9uQ291bnRlciIsImxlbiIsImtleUlkcyIsIm9ianMiLCJfZ2V0QnlLZXkiLCJyZXNvbHZlQW5kQ3JlYXRlQ2hpbGQiLCJjcmVhdGVDaGlsZEZyb21SZXNvbHZlZCIsImluaiIsInJlc29sdmVBbmRJbnN0YW50aWF0ZSIsImluc3RhbnRpYXRlUmVzb2x2ZWQiLCJfaW5zdGFudGlhdGVQcm92aWRlciIsImdldFByb3ZpZGVyQXRJbmRleCIsIm91dE9mQm91bmRzRXJyb3IiLCJfbmV3IiwiX2dldE1heE51bWJlck9mT2JqZWN0cyIsIl9pbnN0YW50aWF0ZSIsIl9nZXRCeVJlZmxlY3RpdmVEZXBlbmRlbmN5Iiwib3JpZ2luYWxFeGNlcHRpb24iLCJJTkpFQ1RPUl9LRVkiLCJfZ2V0QnlLZXlTZWxmIiwiX2dldEJ5S2V5RGVmYXVsdCIsIl9nZXRPYmpCeUtleUlkIiwia2V5SWQiLCJfdGhyb3dPck51bGwiLCJub1Byb3ZpZGVyRXJyb3IiLCJpbmpfIiwiX21hcFByb3ZpZGVycyIsInNldERpcmVjdGl2ZUlucHV0c1doaWNoU2hhZG93c1N0eWxpbmciLCJwcm9wZXJ0eSIsIkhUTUxVbmtub3duRWxlbWVudCIsImN1c3RvbUVsZW1lbnRzIiwibG9nVW5rbm93bkVsZW1lbnRFcnJvciIsImVsZW1lbnRTdGFydCIsImVsZW1lbnRTdGFydEZpcnN0Q3JlYXRlUGFzcyIsImVsZW1lbnRFbmQiLCJoYXNDbGFzc0lucHV0IiwiaGFzU3R5bGVJbnB1dCIsImVsZW1lbnRDb250YWluZXJTdGFydEZpcnN0Q3JlYXRlUGFzcyIsImlzU3Vic2NyaWJhYmxlIiwiaXNPYnNlcnZhYmxlIiwiZXZlbnROYW1lIiwibGlzdGVuZXJGbiIsImV2ZW50VGFyZ2V0UmVzb2x2ZXIiLCJsaXN0ZW5lckludGVybmFsIiwiaXNUTm9kZURpcmVjdGl2ZUhvc3QiLCJwcm9jZXNzT3V0cHV0cyIsImxDbGVhbnVwSW5kZXgiLCJleGlzdGluZ0xpc3RlbmVyIiwidE5vZGVJZHgiLCJjbGVhbnVwRXZlbnROYW1lIiwibGlzdGVuZXJJZHhJbkxDbGVhbnVwIiwiZmluZEV4aXN0aW5nTGlzdGVuZXIiLCJfX25nTGFzdExpc3RlbmVyRm5fXyIsIl9fbmdOZXh0TGlzdGVuZXJGbl9fIiwid3JhcExpc3RlbmVyIiwibGlzdGVuIiwicHJvcHNMZW5ndGgiLCJtaW5pZmllZE5hbWUiLCJvdXRwdXQiLCJzdWJzY3JpcHRpb24iLCJleGVjdXRlTGlzdGVuZXJXaXRoRXJyb3JIYW5kbGluZyIsIndyYXBXaXRoUHJldmVudERlZmF1bHQiLCJ3cmFwTGlzdGVuZXJJbl9tYXJrRGlydHlBbmRQcmV2ZW50RGVmYXVsdCIsIm5leHRMaXN0ZW5lckZuIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsImxldmVsIiwibmVzdGluZ0xldmVsIiwid2Fsa1VwVmlld3MiLCJuZXh0Q29udGV4dEltcGwiLCJtYXRjaGluZ1Byb2plY3Rpb25TbG90SW5kZXgiLCJwcm9qZWN0aW9uU2xvdHMiLCJ3aWxkY2FyZE5nQ29udGVudEluZGV4IiwibmdQcm9qZWN0QXNBdHRyVmFsIiwibmdQcm9qZWN0QXNBdHRySWR4IiwiZ2V0UHJvamVjdEFzQXR0clZhbHVlIiwibnVtUHJvamVjdGlvblNsb3RzIiwicHJvamVjdGlvbkhlYWRzIiwidGFpbHMiLCJjb21wb25lbnRDaGlsZCIsInNsb3RJbmRleCIsInNlbGVjdG9ySW5kZXgiLCJhcHBseVByb2plY3Rpb24iLCJtYXJrRHVwbGljYXRlcyIsInRTdHlsaW5nS2V5IiwiaXNQcmV2RGlyIiwiaXNDbGFzc0JpbmRpbmciLCJ0U3R5bGluZ0F0SW5kZXgiLCJpc01hcCIsImZvdW5kRHVwbGljYXRlIiwidFN0eWxpbmdWYWx1ZUF0Q3Vyc29yIiwidFN0eWxlUmFuZ2VBdEN1cnNvciIsImlzU3R5bGluZ01hdGNoIiwidFN0eWxpbmdLZXlDdXJzb3IiLCJwYXJzZXJTdGF0ZSIsInRleHRFbmQiLCJrZXlFbmQiLCJ2YWx1ZUVuZCIsImdldExhc3RQYXJzZWRLZXkiLCJnZXRMYXN0UGFyc2VkVmFsdWUiLCJwYXJzZUNsYXNzTmFtZU5leHQiLCJjb25zdW1lQ2xhc3NUb2tlbiIsImNvbnN1bWVXaGl0ZXNwYWNlIiwicGFyc2VTdHlsZU5leHQiLCJjaCIsImNvbnN1bWVTdHlsZUtleSIsImNvbnN1bWVTZXBhcmF0b3IiLCJjaDEiLCJjaDIiLCJjaDMiLCJsYXN0Q2hJbmRleCIsImNvbnN1bWVRdW90ZWRUZXh0IiwiY29uc3VtZVN0eWxlVmFsdWUiLCJyZXNldFBhcnNlclN0YXRlIiwic2VwYXJhdG9yIiwibWFsZm9ybWVkU3R5bGVFcnJvciIsImZyb21DaGFyQ29kZSIsInF1b3RlQ2hhckNvZGUiLCJleHBlY3RpbmciLCJjaGVja1N0eWxpbmdQcm9wZXJ0eSIsImNoZWNrU3R5bGluZ01hcCIsInN0eWxlS2V5VmFsdWVBcnJheVNldCIsInN0eWxlU3RyaW5nUGFyc2VyIiwicGFyc2VTdHlsZSIsImNsYXNzU3RyaW5nUGFyc2VyIiwicGFyc2VDbGFzc05hbWUiLCJzdHlsaW5nRmlyc3RVcGRhdGVQYXNzIiwidXBkYXRlU3R5bGluZyIsIm5vcm1hbGl6ZVN1ZmZpeCIsInN0cmluZ1BhcnNlciIsImhhc1N0eWxpbmdJbnB1dFNoYWRvdyIsImlzSW5Ib3N0QmluZGluZ3MiLCJzdGF0aWNQcmVmaXgiLCJlbmRzV2l0aCIsIm9sZEtleVZhbHVlQXJyYXkiLCJuZXdLZXlWYWx1ZUFycmF5Iiwib2xkSW5kZXgiLCJuZXdJbmRleCIsIm9sZEtleSIsInNldEtleSIsInVwZGF0ZVN0eWxpbmdNYXAiLCJzdHlsZUtleVZhbHVlQXJyYXkiLCJ1bndyYXBwZWRWYWx1ZSIsInRvU3R5bGluZ0tleVZhbHVlQXJyYXkiLCJpc0hvc3RCaW5kaW5ncyIsInN0eWxpbmdLZXkiLCJob3N0RGlyZWN0aXZlRGVmIiwicmVzaWR1YWwiLCJjb2xsZWN0U3R5bGluZ0Zyb21UQXR0cnMiLCJjb2xsZWN0U3R5bGluZ0Zyb21EaXJlY3RpdmVzIiwidGVtcGxhdGVTdHlsaW5nS2V5IiwiZ2V0VGVtcGxhdGVIZWFkVFN0eWxpbmdLZXkiLCJzZXRUZW1wbGF0ZUhlYWRUU3R5bGluZ0tleSIsImNvbGxlY3RSZXNpZHVhbCIsIndyYXBJblN0YXRpY1N0eWxpbmdLZXkiLCJ0U3R5bGluZ0tleVdpdGhTdGF0aWMiLCJpc0hvc3RCaW5kaW5nIiwidEJpbmRpbmdzIiwidG1wbEhlYWQiLCJ0bXBsVGFpbCIsImlzS2V5RHVwbGljYXRlT2ZTdGF0aWMiLCJzdGF0aWNLZXlWYWx1ZUFycmF5IiwicHJldmlvdXNOb2RlIiwibWFya0R1cGxpY2F0ZU9mUmVzaWR1YWxTdHlsaW5nIiwiaW5zZXJ0VFN0eWxpbmdCaW5kaW5nIiwiY3VycmVudERpcmVjdGl2ZSIsImRlc2lyZWRNYXJrZXIiLCJjdXJyZW50TWFya2VyIiwidFJhbmdlIiwiaXNTdHlsaW5nVmFsdWVQcmVzZW50IiwiZmluZFN0eWxpbmdWYWx1ZSIsImlzUHJvY2VkdXJhbCIsImFkZENsYXNzIiwiY2xhc3NMaXN0IiwicmVtb3ZlQ2xhc3MiLCJEYXNoQ2FzZSIsInJlbW92ZVN0eWxlIiwicmVtb3ZlUHJvcGVydHkiLCJpc0ltcG9ydGFudCIsIkltcG9ydGFudCIsInNldFN0eWxlIiwiYXBwbHlTdHlsaW5nIiwiaXNQcmV2RGlyZWN0aW9uIiwicmF3S2V5IiwiY29udGFpbnNTdGF0aWNzIiwiaXNTdHlsaW5nTWFwIiwidmFsdWVBdExWaWV3SW5kZXgiLCJ0ZXh0TmF0aXZlIiwidmFsdWVTdWZmaXgiLCJuZ0kxOG5DbG9zdXJlTW9kZSIsImdvb2ciLCJnZXRNc2ciLCJ1IiwibG9jYWxlRW4iLCJ2YWwiLCJMT0NBTEVfREFUQSIsInJlZ2lzdGVyTG9jYWxlRGF0YSIsImxvY2FsZUlkIiwiZXh0cmFEYXRhIiwiTG9jYWxlRGF0YUluZGV4IiwiTG9jYWxlSWQiLCJFeHRyYURhdGEiLCJmaW5kTG9jYWxlRGF0YSIsImxvY2FsZSIsIm5vcm1hbGl6ZWRMb2NhbGUiLCJub3JtYWxpemVMb2NhbGUiLCJnZXRMb2NhbGVEYXRhIiwicGFyZW50TG9jYWxlIiwiZ2V0TG9jYWxlQ3VycmVuY3lDb2RlIiwiQ3VycmVuY3lDb2RlIiwiZ2V0TG9jYWxlUGx1cmFsQ2FzZSIsIlBsdXJhbENhc2UiLCJuZyIsImNvbW1vbiIsImxvY2FsZXMiLCJ1bnJlZ2lzdGVyQWxsTG9jYWxlRGF0YSIsInBsdXJhbE1hcHBpbmciLCJERUZBVUxUX0xPQ0FMRV9JRCIsIkVMRU1FTlRfTUFSS0VSIiwiSUNVX01BUktFUiIsIkkxOG5DcmVhdGVPcENvZGUiLCJMT0NBTEVfSUQkMSIsInNldExvY2FsZUlkIiwidE5vZGVJbnNlcnRCZWZvcmVJbmRleCIsImkxOG5QYXJlbnQiLCJhbmNob3JSTm9kZSIsImFkZFROb2RlQW5kVXBkYXRlSW5zZXJ0QmVmb3JlSW5kZXgiLCJwcmV2aW91c1ROb2RlcyIsIm5ld1ROb2RlIiwiZXhpc3RpbmdUTm9kZSIsImlzSTE4blRleHQiLCJpc05ld1ROb2RlQ3JlYXRlZEJlZm9yZSIsImdldEluc2VydEJlZm9yZUluZGV4Iiwic2V0SW5zZXJ0QmVmb3JlSW5kZXgiLCJnZXRUSWN1IiwiY3JlYXRlVE5vZGVQbGFjZWhvbGRlciIsImdldEN1cnJlbnRJQ1VDYXNlSW5kZXgiLCJjdXJyZW50Q2FzZSIsImdldFBhcmVudEZyb21JY3VDcmVhdGVPcENvZGUiLCJtZXJnZWRDb2RlIiwiZ2V0UmVmRnJvbUljdUNyZWF0ZU9wQ29kZSIsImdldEluc3RydWN0aW9uRnJvbUljdUNyZWF0ZU9wQ29kZSIsImNoYW5nZU1hc2siLCJjaGFuZ2VNYXNrQ291bnRlciIsImFwcGx5TXV0YWJsZU9wQ29kZXMiLCJtdXRhYmxlT3BDb2RlcyIsInJvb3RSTm9kZSIsInJvb3RJZHgiLCJ0ZXh0Tm9kZUluZGV4IiwicGFyZW50SWR4IiwiaW5zZXJ0SW5Gcm9udE9mIiwicmVmSWR4IiwiY2FzZUluZGV4IiwiYW5jaG9ySWR4IiwiZWxlbWVudE5vZGVJbmRleCIsImNvbW1lbnRWYWx1ZSIsImNvbW1lbnROb2RlSW5kZXgiLCJhcHBseVVwZGF0ZU9wQ29kZXMiLCJ1cGRhdGVPcENvZGVzIiwiYmluZGluZ3NTdGFydEluZGV4IiwiY2hlY2tCaXQiLCJza2lwQ29kZXMiLCJzYW5pdGl6ZUZuIiwidE5vZGVPclRhZ05hbWUiLCJyVGV4dCIsImFwcGx5SWN1U3dpdGNoQ2FzZSIsImFwcGx5SWN1VXBkYXRlQ2FzZSIsImFjdGl2ZUNhc2VJbmRleCIsImljdUV4cHJlc3Npb24iLCJiaW5kaW5nVmFsdWUiLCJjYXNlcyIsInJlc29sdmVkQ2FzZSIsInBsdXJhbCIsImdldFBsdXJhbENhc2UiLCJnZXRDYXNlSW5kZXgiLCJhcHBseUljdVN3aXRjaENhc2VSZW1vdmUiLCJyZW1vdmVDb2RlcyIsIm5vZGVPckljdUluZGV4IiwibG9hZEljdUNvbnRhaW5lclZpc2l0b3IiLCJfc3RhY2siLCJfcmVtb3ZlcyIsIl9pbmRleCIsImVudGVySWN1IiwiaWN1Q29udGFpbmVySXRlcmF0b3JOZXh0IiwicmVtb3ZlT3BDb2RlIiwidEljdUluZGV4IiwiaTE4bkNyZWF0ZU9wQ29kZXNUb1N0cmluZyIsIm9wY29kZXMiLCJjcmVhdGVPcENvZGVzIiwibGluZXMiLCJpc0NvbW1lbnQiLCJDT01NRU5UIiwiYXBwZW5kTm93IiwiQVBQRU5EX0VBR0VSTFkiLCJTSElGVCIsImkxOG5VcGRhdGVPcENvZGVzVG9TdHJpbmciLCJwYXJzZXIiLCJPcENvZGVQYXJzZXIiLCJjb25zdW1lT3BDb2RlIiwicmVmIiwiY29uc3VtZVN0cmluZyIsInNhbml0aXphdGlvbkZuIiwiY29uc3VtZUZ1bmN0aW9uIiwiaGFzTW9yZSIsImNvbnN1bWVOdW1iZXIiLCJzdGF0ZW1lbnRzIiwic3RhdGVtZW50IiwiY29uc3VtZU51bWJlck9yU3RyaW5nIiwib3BDb2RlVGV4dCIsImljdUNyZWF0ZU9wQ29kZXNUb1N0cmluZyIsImxhc3RSZWYiLCJjb25zdW1lTnVtYmVyU3RyaW5nT3JNYXJrZXIiLCJsaW5lIiwiaTE4blJlbW92ZU9wQ29kZXNUb1N0cmluZyIsImNvZGVzIiwiQklORElOR19SRUdFWFAiLCJJQ1VfUkVHRVhQIiwiTkVTVEVEX0lDVSIsIklDVV9CTE9DS19SRUdFWFAiLCJTVUJURU1QTEFURV9SRUdFWFAiLCJQSF9SRUdFWFAiLCJOR1NQX1VOSUNPREVfUkVHRVhQIiwiY3JlYXRlVE5vZGVBbmRBZGRPcENvZGUiLCJleGlzdGluZ1ROb2RlcyIsImlzSUNVIiwiaTE4bk5vZGVJZHgiLCJzZXRUTm9kZUluc2VydEJlZm9yZUluZGV4IiwiaTE4blN0YXJ0Rmlyc3RDcmVhdGVQYXNzUHJvY2Vzc1RleHROb2RlIiwiaGFzQmluZGluZyIsImdlbmVyYXRlQmluZGluZ1VwZGF0ZU9wQ29kZXMiLCJzdHIiLCJkZXN0aW5hdGlvbk5vZGUiLCJiaW5kaW5nU3RhcnQiLCJtYXNrSW5kZXgiLCJzaXplSW5kZXgiLCJ0ZXh0UGFydHMiLCJ0ZXh0VmFsdWUiLCJ0b01hc2tCaXQiLCJjb3VudEJpbmRpbmdzIiwib3BDb2RlcyIsIm1pbiIsInJlbW92ZUlubmVyVGVtcGxhdGVUcmFuc2xhdGlvbiIsInRhZ01hdGNoZWQiLCJpblRlbXBsYXRlIiwiZXhlYyIsImljdVN0YXJ0IiwiYmluZGluZ01hc2siLCJtYWluQmluZGluZyIsImFkZFVwZGF0ZUljdVN3aXRjaCIsInNldFRJY3UiLCJ2YWx1ZUFyciIsIm5lc3RlZEljdXMiLCJpY3VJbmRleCIsInBhcnNlSWN1Q2FzZSIsImFkZFVwZGF0ZUljdVVwZGF0ZSIsInBhcnNlSUNVQmxvY2siLCJwYXR0ZXJuIiwiaWN1VHlwZSIsImkxOG5QYXJzZVRleHRJbnRvUGFydHNBbmRJQ1UiLCJiaW5kaW5nIiwicG9zIiwiYmxvY2tzIiwicHJldlBvcyIsImJyYWNlU3RhY2siLCJyZXN1bHRzIiwiYnJhY2VzIiwibGFzdEluZGV4IiwiYmxvY2siLCJjYXNlTmFtZSIsInVuc2FmZUNhc2VIdG1sIiwiaW5lcnRSb290Tm9kZSIsIndhbGtJY3VUcmVlIiwic2hhcmVkVXBkYXRlT3BDb2RlcyIsImRlcHRoIiwiY3VycmVudE5vZGUiLCJhZGRDcmVhdGVOb2RlQW5kQXBwZW5kIiwibG93ZXJBdHRyTmFtZSIsImFkZENyZWF0ZUF0dHJpYnV0ZSIsImFkZFJlbW92ZU5vZGUiLCJpc05lc3RlZEljdSIsIm5lc3RlZEljdUluZGV4IiwiYWRkUmVtb3ZlTmVzdGVkSWN1IiwiYXBwZW5kVG9QYXJlbnRJZHgiLCJjcmVhdGVBdElkeCIsIlBQX01VTFRJX1ZBTFVFX1BMQUNFSE9MREVSU19SRUdFWFAiLCJQUF9QTEFDRUhPTERFUlNfUkVHRVhQIiwiUFBfSUNVX1ZBUlNfUkVHRVhQIiwiUFBfSUNVX1BMQUNFSE9MREVSU19SRUdFWFAiLCJQUF9JQ1VTX1JFR0VYUCIsIlBQX0NMT1NFX1RFTVBMQVRFX1JFR0VYUCIsIlBQX1RFTVBMQVRFX0lEX1JFR0VYUCIsIm1lc3NhZ2VJbmRleCIsInN1YlRlbXBsYXRlSW5kZXgiLCJwYXJlbnRUTm9kZUluZGV4IiwiZXhpc3RpbmdUTm9kZVN0YWNrIiwiaXNSb290VGVtcGxhdGVNZXNzYWdlIiwic2VhcmNoIiwiZ2V0VHJhbnNsYXRpb25Gb3JUZW1wbGF0ZSIsIm1zZ1BhcnRzIiwicGFydCIsImljdU5vZGVJbmRleCIsImlzQ2xvc2luZyIsIk51bWJlciIsImkxOG5TdGFydEZpcnN0Q3JlYXRlUGFzcyIsInRJMThuIiwiYXBwbHlDcmVhdGVPcENvZGVzIiwicHJldmlvdXNFbGVtZW50SW5kZXgiLCJpMThuQXR0cmlidXRlc0ZpcnN0UGFzcyIsImFwcGx5STE4biIsInJlcGxhY2VtZW50cyIsInRlbXBsYXRlSWRzU3RhY2siLCJwaHMiLCJ0bXBsIiwicGxhY2Vob2xkZXJzIiwicGxhY2Vob2xkZXIiLCJ0ZW1wbGF0ZUlkIiwiaXNDbG9zZVRlbXBsYXRlVGFnIiwiY3VycmVudFRlbXBsYXRlSWQiLCJfdHlwZSIsIl9pZHgiLCJpMThuUG9zdHByb2Nlc3MiLCJyZXNvbHZlUHJvdmlkZXIiLCJsSW5qZWN0YWJsZXNCbHVlcHJpbnQiLCJwcm92aWRlckZhY3RvcnkiLCJiZWdpbkluZGV4IiwiZXhpc3RpbmdGYWN0b3J5SW5kZXgiLCJyZWdpc3RlckRlc3Ryb3lIb29rc0lmU3VwcG9ydGVkIiwiZXhpc3RpbmdQcm92aWRlcnNGYWN0b3J5SW5kZXgiLCJleGlzdGluZ1ZpZXdQcm92aWRlcnNGYWN0b3J5SW5kZXgiLCJkb2VzUHJvdmlkZXJzRmFjdG9yeUV4aXN0IiwiZG9lc1ZpZXdQcm92aWRlcnNGYWN0b3J5RXhpc3QiLCJmIiwiY29tcG9uZW50UHJvdmlkZXJzIiwibXVsdGlGYWN0b3J5QWRkIiwibXVsdGlGYWN0b3J5IiwibXVsdGlWaWV3UHJvdmlkZXJzRmFjdG9yeVJlc29sdmVyIiwibXVsdGlQcm92aWRlcnNGYWN0b3J5UmVzb2x2ZXIiLCJjb250ZXh0SW5kZXgiLCJpbmRleEluRmFjdG9yeSIsInByb3ZpZGVySXNUeXBlUHJvdmlkZXIiLCJwcm92aWRlcklzQ2xhc3NQcm92aWRlciIsImV4aXN0aW5nQ2FsbGJhY2tzSW5kZXgiLCJpc0NvbXBvbmVudFByb3ZpZGVyIiwibERhdGEiLCJtdWx0aVJlc29sdmUiLCJjb21wb25lbnRDb3VudCIsIm11bHRpUHJvdmlkZXJzIiwicHJvY2Vzc1Byb3ZpZGVyc0ZuIiwiQ29tcG9uZW50UmVmJDEiLCJDb21wb25lbnRGYWN0b3J5JDEiLCJfTnVsbENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciIsInJlc29sdmVDb21wb25lbnRGYWN0b3J5Iiwibm9Db21wb25lbnRGYWN0b3J5RXJyb3IiLCJDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIkMSIsImNyZWF0ZUVsZW1lbnRSZWYiLCJFbGVtZW50UmVmIiwibmF0aXZlRWxlbWVudCIsInVud3JhcEVsZW1lbnRSZWYiLCJSZW5kZXJlckZhY3RvcnkyIiwiUmVuZGVyZXIyIiwibm9kZUF0SW5kZXgiLCJnZXRPckNyZWF0ZVJlbmRlcmVyMiIsImluamVjdFJlbmRlcmVyMiIsIlNhbml0aXplciIsIlZlcnNpb24iLCJmdWxsIiwibWFqb3IiLCJtaW5vciIsInBhdGNoIiwiVkVSU0lPTiIsIk5PVF9GT1VORF9DSEVDS19PTkxZX0VMRU1FTlRfSU5KRUNUT1IiLCJjb2xsZWN0TmF0aXZlTm9kZXMiLCJsTm9kZSIsImxWaWV3SW5BQ29udGFpbmVyIiwibFZpZXdGaXJzdENoaWxkVE5vZGUiLCJub2Rlc0luU2xvdCIsIlZpZXdSZWYkMSIsIl9jZFJlZkluamVjdGluZ1ZpZXciLCJfYXBwUmVmIiwiX2F0dGFjaGVkVG9WaWV3Q29udGFpbmVyIiwicm9vdE5vZGVzIiwidmlld1JlZnMiLCJtYXJrRm9yQ2hlY2siLCJkZXRhY2giLCJyZWF0dGFjaCIsImNoZWNrTm9DaGFuZ2VzIiwiY2hlY2tOb0NoYW5nZXNJbnRlcm5hbCIsImF0dGFjaFRvVmlld0NvbnRhaW5lclJlZiIsImRldGFjaEZyb21BcHBSZWYiLCJhdHRhY2hUb0FwcFJlZiIsImFwcFJlZiIsIlJvb3RWaWV3UmVmIiwiX3ZpZXciLCJjaGVja05vQ2hhbmdlc0luUm9vdFZpZXciLCJDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIiLCJDb21wb25lbnRGYWN0b3J5IiwidG9SZWZBcnJheSIsIm5vbk1pbmlmaWVkIiwibWluaWZpZWQiLCJ0ZW1wbGF0ZU5hbWUiLCJpc0JvdW5kVG9Nb2R1bGUiLCJwcm9qZWN0YWJsZU5vZGVzIiwicm9vdFNlbGVjdG9yT3JOb2RlIiwicm9vdFZpZXdJbmplY3RvciIsImNyZWF0ZUNoYWluZWRJbmplY3RvciIsImVsZW1lbnROYW1lIiwiZ2V0TmFtZXNwYWNlIiwidEVsZW1lbnROb2RlIiwiZXh0cmFjdEF0dHJzQW5kQ2xhc3Nlc0Zyb21TZWxlY3RvciIsIm5vZGVzZm9yU2xvdCIsIkNvbXBvbmVudFJlZiIsIl9yb290TFZpZXciLCJjaGFuZ2VEZXRlY3RvclJlZiIsInNldENsYXNzTWV0YWRhdGEiLCJjbGF6eiIsIk5nTW9kdWxlUmVmJDEiLCJOZ01vZHVsZUZhY3RvcnkkMSIsIm1vZHVsZXMiLCJyZWdpc3Rlck5nTW9kdWxlVHlwZSIsInZpc2l0ZWQiLCJyZWN1cnNlIiwiaW5jb21pbmciLCJhc3NlcnRTYW1lT3JOb3RFeGlzdGluZyIsImdldFJlZ2lzdGVyZWROZ01vZHVsZVR5cGUiLCJjcmVhdGVOZ01vZHVsZVJlZiIsInBhcmVudEluamVjdG9yIiwiTmdNb2R1bGVSZWYiLCJfYm9vdHN0cmFwQ29tcG9uZW50cyIsImRlc3Ryb3lDYnMiLCJjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIiLCJfcjNJbmplY3RvciIsImluamVjdEZsYWdzIiwiTmdNb2R1bGVGYWN0b3J5IiwibW9kdWxlVHlwZSIsInNsb3RPZmZzZXQiLCJwdXJlRm4iLCJleHAiLCJwdXJlRnVuY3Rpb24xSW50ZXJuYWwiLCJwdXJlRnVuY3Rpb24ySW50ZXJuYWwiLCJwdXJlRnVuY3Rpb24zSW50ZXJuYWwiLCJwdXJlRnVuY3Rpb240SW50ZXJuYWwiLCJleHA1IiwiZXhwNiIsImV4cDciLCJleHA4IiwiZXhwcyIsInB1cmVGdW5jdGlvblZJbnRlcm5hbCIsImdldFB1cmVGdW5jdGlvblJldHVyblZhbHVlIiwicmV0dXJuVmFsdWVJbmRleCIsImxhc3RSZXR1cm5WYWx1ZSIsImJpbmRpbmdSb290IiwicGlwZU5hbWUiLCJnZXRQaXBlRGVmIiwicGlwZUZhY3RvcnkiLCJwaXBlSW5zdGFuY2UiLCJpc1B1cmUiLCJ0cmFuc2Zvcm0iLCJFdmVudEVtaXR0ZXJfIiwiaXNBc3luYyIsIl9faXNBc3luYyIsImVtaXQiLCJuZXh0Rm4iLCJlcnJvckZuIiwiY29tcGxldGVGbiIsIm9ic2VydmVyIiwiX3dyYXBJblRpbWVvdXQiLCJFdmVudEVtaXR0ZXIiLCJzeW1ib2xJdGVyYXRvciIsIl9yZXN1bHRzIiwiUXVlcnlMaXN0IiwiX2VtaXREaXN0aW5jdENoYW5nZXNPbmx5IiwiX2NoYW5nZXNEZXRlY3RlZCIsIl9jaGFuZ2VzIiwibGFzdCIsInN5bWJvbCIsImNoYW5nZXMiLCJ0b0FycmF5IiwicmVzdWx0c1RyZWUiLCJpZGVudGl0eUFjY2Vzc29yIiwibmV3UmVzdWx0RmxhdCIsInZhbHVlQSIsInZhbHVlQiIsImFycmF5RXF1YWxzIiwibm90aWZ5T25DaGFuZ2VzIiwic2V0RGlydHkiLCJUZW1wbGF0ZVJlZiIsImNyZWF0ZVRlbXBsYXRlUmVmIiwiVmlld0VuZ2luZVRlbXBsYXRlUmVmIiwiUjNUZW1wbGF0ZVJlZiIsIl9kZWNsYXJhdGlvbkxWaWV3IiwiX2RlY2xhcmF0aW9uVENvbnRhaW5lciIsImVsZW1lbnRSZWYiLCJjcmVhdGVFbWJlZGRlZFZpZXciLCJkZWNsYXJhdGlvblZpZXdMUXVlcmllcyIsIlZpZXdDb250YWluZXJSZWYiLCJjcmVhdGVDb250YWluZXJSZWYiLCJWRV9WaWV3Q29udGFpbmVyUmVmIiwiUjNWaWV3Q29udGFpbmVyUmVmIiwiX2xDb250YWluZXIiLCJfaG9zdFROb2RlIiwiX2hvc3RMVmlldyIsImdldFZpZXdSZWZzIiwidGVtcGxhdGVSZWYiLCJ2aWV3UmVmIiwiaW5zZXJ0IiwiY3JlYXRlQ29tcG9uZW50IiwiY29tcG9uZW50RmFjdG9yeU9yVHlwZSIsImluZGV4T3JPcHRpb25zIiwibmdNb2R1bGVSZWYiLCJpc0NvbXBvbmVudEZhY3RvcnkiLCJjb21wb25lbnRGYWN0b3J5IiwiY29udGV4dEluamVjdG9yIiwiY29tcG9uZW50UmVmIiwicHJldklkeCIsInByZXZMQ29udGFpbmVyIiwicHJldlZDUmVmIiwiYWRqdXN0ZWRJZHgiLCJfYWRqdXN0SW5kZXgiLCJjb250YWluZXJMZW5ndGgiLCJpbnNlcnRlZExDb250YWluZXIiLCJpbnNlcnRlZENvbXBvbmVudExWaWV3IiwiZGVjbGFyZWRDb21wb25lbnRMVmlldyIsInRyYWNrTW92ZWRWaWV3IiwiaW5zZXJ0VmlldyIsInBhcmVudE5hdGl2ZU5vZGUiLCJhZGRWaWV3VG9Db250YWluZXIiLCJnZXRPckNyZWF0ZVZpZXdSZWZzIiwibW92ZSIsInZpZXdSZWZzQXJyIiwiZGV0YWNoZWRWaWV3IiwiY29tbWVudE5vZGUiLCJuYXRpdmVOZXh0U2libGluZyIsIkxRdWVyeV8iLCJxdWVyeUxpc3QiLCJjbG9uZSIsIkxRdWVyaWVzXyIsInRRdWVyaWVzIiwibm9PZkluaGVyaXRlZFF1ZXJpZXMiLCJ2aWV3TFF1ZXJpZXMiLCJ0UXVlcnkiLCJnZXRCeUluZGV4IiwicGFyZW50TFF1ZXJ5IiwiaW5kZXhJbkRlY2xhcmF0aW9uVmlldyIsImRpcnR5UXVlcmllc1dpdGhNYXRjaGVzIiwiZ2V0VFF1ZXJ5IiwiVFF1ZXJ5TWV0YWRhdGFfIiwicHJlZGljYXRlIiwiVFF1ZXJpZXNfIiwicXVlcmllc0ZvclRlbXBsYXRlUmVmIiwiY2hpbGRRdWVyeUluZGV4IiwidHF1ZXJ5Q2xvbmUiLCJ0cmFjayIsInRxdWVyeSIsIlRRdWVyeV8iLCJjcm9zc2VzTmdUZW1wbGF0ZSIsIl9hcHBsaWVzVG9OZXh0Tm9kZSIsIl9kZWNsYXJhdGlvbk5vZGVJbmRleCIsImlzQXBwbHlpbmdUb05vZGUiLCJtYXRjaFROb2RlIiwiYWRkTWF0Y2giLCJkZWNsYXJhdGlvbk5vZGVJZHgiLCJtYXRjaFROb2RlV2l0aFJlYWRPcHRpb24iLCJnZXRJZHhPZk1hdGNoaW5nU2VsZWN0b3IiLCJub2RlTWF0Y2hJZHgiLCJkaXJlY3RpdmVPclByb3ZpZGVySWR4IiwibWF0Y2hJZHgiLCJjcmVhdGVSZXN1bHRGb3JOb2RlIiwibWF0Y2hpbmdJZHgiLCJjcmVhdGVSZXN1bHRCeVROb2RlVHlwZSIsImNyZWF0ZVNwZWNpYWxUb2tlbiIsIm1hdGVyaWFsaXplVmlld1Jlc3VsdHMiLCJxdWVyeUluZGV4IiwibFF1ZXJ5IiwidFF1ZXJ5TWF0Y2hlcyIsIm1hdGNoZWROb2RlSWR4IiwiY29sbGVjdFF1ZXJ5UmVzdWx0cyIsImxWaWV3UmVzdWx0cyIsImVtYmVkZGVkTFZpZXdzIiwiY3JlYXRlVFF1ZXJ5IiwiY3JlYXRlTFF1ZXJ5IiwidFZpZXdDb250ZW50UXVlcmllcyIsInNhdmVDb250ZW50UXVlcnlBbmREaXJlY3RpdmVJbmRleCIsImFuZ3VsYXJDb3JlRW52Iiwiaml0T3B0aW9ucyIsInJlc2V0Sml0T3B0aW9ucyIsIm1vZHVsZVF1ZXVlIiwiZmx1c2hpbmdNb2R1bGVRdWV1ZSIsImZsdXNoTW9kdWxlU2NvcGluZ1F1ZXVlQXNNdWNoQXNQb3NzaWJsZSIsImV2ZXJ5IiwiaXNSZXNvbHZlZERlY2xhcmF0aW9uIiwic2V0U2NvcGVPbkRlY2xhcmVkQ29tcG9uZW50cyIsImRlY2xhcmF0aW9uIiwiY29tcGlsZU5nTW9kdWxlIiwiY29tcGlsZU5nTW9kdWxlRGVmcyIsImVucXVldWVNb2R1bGVGb3JEZWxheWVkU2NvcGluZyIsImFsbG93RHVwbGljYXRlRGVjbGFyYXRpb25zSW5Sb290IiwiZXhwYW5kTW9kdWxlV2l0aFByb3ZpZGVycyIsIk5nTW9kdWxlIiwidmVyaWZ5U2VtYW50aWNzT2ZOZ01vZHVsZURlZiIsImNvbXBpbGVJbmplY3RvciIsImltcG9ydGluZ01vZHVsZSIsInZlcmlmaWVkTmdNb2R1bGUiLCJ1bndyYXBNb2R1bGVXaXRoUHJvdmlkZXJzSW1wb3J0cyIsIm1vZCIsInZlcmlmeVNlbWFudGljc09mTmdNb2R1bGVJbXBvcnQiLCJjb21iaW5lZERlY2xhcmF0aW9ucyIsImNvbXB1dGVDb21iaW5lZEV4cG9ydHMiLCJkZWNsIiwic3VwcHJlc3NFcnJvcnMiLCJleGlzdGluZ01vZHVsZSIsIm93bmVyTmdNb2R1bGUiLCJ2ZXJpZnlEZWNsYXJhdGlvbklzVW5pcXVlIiwiZ2V0QW5ub3RhdGlvbiIsImVudHJ5Q29tcG9uZW50cyIsInZlcmlmeUNvbXBvbmVudElzUGFydE9mTmdNb2R1bGUiLCJ0eXBlT3JXaXRoUHJvdmlkZXJzIiwiY29sbGVjdCIsIl9fYW5ub3RhdGlvbnNfXyIsInJlYWRBbm5vdGF0aW9uIiwiV2Vha01hcCIsInJlc2V0Q29tcGlsZWRDb21wb25lbnRzIiwidHJhbnNpdGl2ZVNjb3BlcyIsInRyYW5zaXRpdmVTY29wZXNGb3IiLCJwYXRjaENvbXBvbmVudERlZldpdGhTY29wZSIsIm5nU2VsZWN0b3JTY29wZSIsImNvbXBpbGF0aW9uIiwiZGlyIiwiaXNOZ01vZHVsZSIsInNjb3BlcyIsImV4cG9ydGVkIiwiaW1wb3J0ZWRUeXBlIiwiaW1wb3J0ZWRTY29wZSIsImVudHJ5IiwiZGVjbGFyZWQiLCJleHBvcnRlZFR5cGUiLCJleHBvcnRlZFNjb3BlIiwiaXNNb2R1bGVXaXRoUHJvdmlkZXJzIiwiY29tcGlsYXRpb25EZXB0aCIsImNvbXBpbGVDb21wb25lbnQiLCJuZ0NvbXBvbmVudERlZiIsIm1heWJlUXVldWVSZXNvbHV0aW9uT2ZDb21wb25lbnRSZXNvdXJjZXMiLCJhZGREaXJlY3RpdmVGYWN0b3J5RGVmIiwicHJlc2VydmVXaGl0ZXNwYWNlcyIsImRlZmF1bHRFbmNhcHN1bGF0aW9uIiwiZGlyZWN0aXZlTWV0YWRhdGEiLCJ0eXBlU291cmNlU3BhbiIsImNyZWF0ZVBhcnNlU291cmNlU3BhbiIsImFuaW1hdGlvbnMiLCJpbnRlcnBvbGF0aW9uIiwidXNlc0luaGVyaXRhbmNlIiwiYWRkRGlyZWN0aXZlRGVmVG9VbmRlY29yYXRlZFBhcmVudHMiLCJjb21waWxlRGlyZWN0aXZlIiwibmdEaXJlY3RpdmVEZWYiLCJnZXREaXJlY3RpdmVNZXRhZGF0YSIsInNvdXJjZU1hcFVybCIsImZhY2FkZSIsIkRpcmVjdGl2ZSIsImV4dGVuZHNEaXJlY3RseUZyb21PYmplY3QiLCJleHRyYWN0UXVlcmllc01ldGFkYXRhIiwiaXNDb250ZW50UXVlcnkiLCJsaWZlY3ljbGUiLCJ1c2VzT25DaGFuZ2VzIiwic3BsaXRCeUNvbW1hIiwidmlld1F1ZXJpZXMiLCJvYmpQcm90b3R5cGUiLCJzaG91bGRBZGRBYnN0cmFjdERpcmVjdGl2ZSIsImNvbnZlcnRUb1IzUXVlcnlNZXRhZGF0YSIsImFubiIsImlzUXVlcnlBbm4iLCJxdWVyaWVzTWV0YSIsImlzSW5wdXRBbm5vdGF0aW9uIiwicGllY2UiLCJMSUZFQ1lDTEVfSE9PS1MiLCJob29rTmFtZSIsIm1ldGFkYXRhTmFtZSIsImNvbXBpbGVQaXBlIiwibmdQaXBlRGVmIiwiZ2V0UGlwZU1ldGFkYXRhIiwiUGlwZSIsIkNvbXBvbmVudCIsImMiLCJJbnB1dCIsImJpbmRpbmdQcm9wZXJ0eU5hbWUiLCJPdXRwdXQiLCJIb3N0QmluZGluZyIsImhvc3RQcm9wZXJ0eU5hbWUiLCJIb3N0TGlzdGVuZXIiLCJBUFBfSU5JVElBTElaRVIiLCJBcHBsaWNhdGlvbkluaXRTdGF0dXMiLCJhcHBJbml0cyIsImluaXRpYWxpemVkIiwiZG9uZVByb21pc2UiLCJyZWoiLCJydW5Jbml0aWFsaXplcnMiLCJhc3luY0luaXRQcm9taXNlcyIsImluaXRSZXN1bHQiLCJvYnNlcnZhYmxlQXNQcm9taXNlIiwiQVBQX0lEIiwiX2FwcElkUmFuZG9tUHJvdmlkZXJGYWN0b3J5IiwiX3JhbmRvbUNoYXIiLCJBUFBfSURfUkFORE9NX1BST1ZJREVSIiwicmFuZG9tIiwiUExBVEZPUk1fSU5JVElBTElaRVIiLCJQTEFURk9STV9JRCIsIkFQUF9CT09UU1RSQVBfTElTVEVORVIiLCJQQUNLQUdFX1JPT1RfVVJMIiwiQ29uc29sZSIsIkxPQ0FMRV9JRCIsImdldExvY2FsZSIsIiRsb2NhbGl6ZSIsIkRFRkFVTFRfQ1VSUkVOQ1lfQ09ERSIsIlRSQU5TTEFUSU9OUyIsIlRSQU5TTEFUSU9OU19GT1JNQVQiLCJNaXNzaW5nVHJhbnNsYXRpb25TdHJhdGVneSIsIk1vZHVsZVdpdGhDb21wb25lbnRGYWN0b3JpZXMiLCJuZ01vZHVsZUZhY3RvcnkiLCJjb21wb25lbnRGYWN0b3JpZXMiLCJDb21waWxlciIsImNvbXBpbGVNb2R1bGVTeW5jIiwiY29tcGlsZU1vZHVsZUFzeW5jIiwiY29tcGlsZU1vZHVsZUFuZEFsbENvbXBvbmVudHNTeW5jIiwiY29tcGlsZU1vZHVsZUFuZEFsbENvbXBvbmVudHNBc3luYyIsImNsZWFyQ2FjaGUiLCJjbGVhckNhY2hlRm9yIiwiZ2V0TW9kdWxlSWQiLCJDT01QSUxFUl9PUFRJT05TIiwiQ29tcGlsZXJGYWN0b3J5Iiwic2NoZWR1bGVNaWNyb1Rhc2siLCJab25lIiwiTmdab25lIiwiZW5hYmxlTG9uZ1N0YWNrVHJhY2UiLCJzaG91bGRDb2FsZXNjZUV2ZW50Q2hhbmdlRGV0ZWN0aW9uIiwic2hvdWxkQ29hbGVzY2VSdW5DaGFuZ2VEZXRlY3Rpb24iLCJoYXNQZW5kaW5nTWFjcm90YXNrcyIsImhhc1BlbmRpbmdNaWNyb3Rhc2tzIiwiaXNTdGFibGUiLCJvblVuc3RhYmxlIiwib25NaWNyb3Rhc2tFbXB0eSIsIm9uU3RhYmxlIiwiYXNzZXJ0Wm9uZVBhdGNoZWQiLCJfbmVzdGluZyIsIl9vdXRlciIsIl9pbm5lciIsImZvcmsiLCJsYXN0UmVxdWVzdEFuaW1hdGlvbkZyYW1lSWQiLCJuYXRpdmVSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJuYXRpdmVDYW5jZWxBbmltYXRpb25GcmFtZSIsInVucGF0Y2hlZFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIl9fc3ltYm9sX18iLCJ1bnBhdGNoZWRDYW5jZWxBbmltYXRpb25GcmFtZSIsImdldE5hdGl2ZVJlcXVlc3RBbmltYXRpb25GcmFtZSIsInpvbmUiLCJkZWxheUNoYW5nZURldGVjdGlvbkZvckV2ZW50c0RlbGVnYXRlIiwiaXNDaGVja1N0YWJsZVJ1bm5pbmciLCJmYWtlVG9wRXZlbnRUYXNrIiwic2NoZWR1bGVFdmVudFRhc2siLCJ1cGRhdGVNaWNyb1Rhc2tTdGF0dXMiLCJjaGVja1N0YWJsZSIsImludm9rZSIsImRlbGF5Q2hhbmdlRGV0ZWN0aW9uRm9yRXZlbnRzIiwicHJvcGVydGllcyIsIm9uSW52b2tlVGFzayIsInRhc2siLCJhcHBseVRoaXMiLCJhcHBseUFyZ3MiLCJvbkVudGVyIiwiaW52b2tlVGFzayIsIm9uTGVhdmUiLCJvbkludm9rZSIsIm9uSGFzVGFzayIsImhhc1Rhc2tTdGF0ZSIsImhhc1Rhc2siLCJjaGFuZ2UiLCJfaGFzUGVuZGluZ01pY3JvdGFza3MiLCJtaWNyb1Rhc2siLCJtYWNyb1Rhc2siLCJvbkhhbmRsZUVycm9yIiwicnVuT3V0c2lkZUFuZ3VsYXIiLCJmb3JrSW5uZXJab25lV2l0aEFuZ3VsYXJCZWhhdmlvciIsImlzSW5Bbmd1bGFyWm9uZSIsInJ1biIsInJ1blRhc2siLCJFTVBUWV9QQVlMT0FEIiwiY2FuY2VsVGFzayIsInJ1bkd1YXJkZWQiLCJOb29wTmdab25lIiwiVGVzdGFiaWxpdHkiLCJfbmdab25lIiwiX3BlbmRpbmdDb3VudCIsIl9pc1pvbmVTdGFibGUiLCJfZGlkV29yayIsIl9jYWxsYmFja3MiLCJ0YXNrVHJhY2tpbmdab25lIiwiX3dhdGNoQW5ndWxhckV2ZW50cyIsImFzc2VydE5vdEluQW5ndWxhclpvbmUiLCJfcnVuQ2FsbGJhY2tzSWZSZWFkeSIsImluY3JlYXNlUGVuZGluZ1JlcXVlc3RDb3VudCIsImRlY3JlYXNlUGVuZGluZ1JlcXVlc3RDb3VudCIsInRpbWVvdXRJZCIsImRvbmVDYiIsInBlbmRpbmciLCJnZXRQZW5kaW5nVGFza3MiLCJ1cGRhdGVDYiIsIm1hY3JvVGFza3MiLCJjcmVhdGlvbkxvY2F0aW9uIiwiYWRkQ2FsbGJhY2siLCJ0aW1lb3V0Iiwid2hlblN0YWJsZSIsImdldFBlbmRpbmdSZXF1ZXN0Q291bnQiLCJmaW5kUHJvdmlkZXJzIiwidXNpbmciLCJleGFjdE1hdGNoIiwiVGVzdGFiaWxpdHlSZWdpc3RyeSIsIl9hcHBsaWNhdGlvbnMiLCJfdGVzdGFiaWxpdHlHZXR0ZXIiLCJhZGRUb1dpbmRvdyIsInJlZ2lzdGVyQXBwbGljYXRpb24iLCJ0ZXN0YWJpbGl0eSIsInVucmVnaXN0ZXJBcHBsaWNhdGlvbiIsInVucmVnaXN0ZXJBbGxBcHBsaWNhdGlvbnMiLCJnZXRUZXN0YWJpbGl0eSIsImVsZW0iLCJnZXRBbGxUZXN0YWJpbGl0aWVzIiwiZ2V0QWxsUm9vdEVsZW1lbnRzIiwiZmluZFRlc3RhYmlsaXR5SW5UcmVlIiwiZmluZEluQW5jZXN0b3JzIiwic2V0VGVzdGFiaWxpdHlHZXR0ZXIiLCJfcGxhdGZvcm0iLCJjb21waWxlTmdNb2R1bGVGYWN0b3J5IiwiYXNzZXJ0TmdNb2R1bGVUeXBlIiwibW9kdWxlRmFjdG9yeSIsIm5nSml0TW9kZSIsImNvbXBpbGVyT3B0aW9ucyIsInNldEppdE9wdGlvbnMiLCJfbGFzdERlZmluZWQiLCJjb21waWxlclByb3ZpZGVycyIsIl9tZXJnZUFycmF5cyIsInJlc291cmNlTG9hZGVyIiwiUmVzb3VyY2VMb2FkZXIiLCJjZiIsIkFMTE9XX01VTFRJUExFX1BMQVRGT1JNUyIsIk5nUHJvYmVUb2tlbiIsImNyZWF0ZVBsYXRmb3JtIiwiUGxhdGZvcm1SZWYiLCJpbml0cyIsImNyZWF0ZVBsYXRmb3JtRmFjdG9yeSIsInBhcmVudFBsYXRmb3JtRmFjdG9yeSIsImRlc2MiLCJleHRyYVByb3ZpZGVycyIsInBsYXRmb3JtIiwiZ2V0UGxhdGZvcm0iLCJpbmplY3RlZFByb3ZpZGVycyIsImFzc2VydFBsYXRmb3JtIiwicmVxdWlyZWRUb2tlbiIsImRlc3Ryb3lQbGF0Zm9ybSIsIl9pbmplY3RvciIsIl9tb2R1bGVzIiwiX2Rlc3Ryb3lMaXN0ZW5lcnMiLCJib290c3RyYXBNb2R1bGVGYWN0b3J5Iiwibmdab25lIiwibmdab25lT3B0aW9uIiwiZXh0cmEiLCJuZ1pvbmVFdmVudENvYWxlc2NpbmciLCJuZ1pvbmVSdW5Db2FsZXNjaW5nIiwiZ2V0Tmdab25lIiwibmdab25lSW5qZWN0b3IiLCJtb2R1bGVSZWYiLCJleGNlcHRpb25IYW5kbGVyIiwiX2NhbGxBbmRSZXBvcnRUb0Vycm9ySGFuZGxlciIsImluaXRTdGF0dXMiLCJfbW9kdWxlRG9Cb290c3RyYXAiLCJib290c3RyYXBNb2R1bGUiLCJvcHRpb25zUmVkdWNlciIsIkFwcGxpY2F0aW9uUmVmIiwibmdEb0Jvb3RzdHJhcCIsIl96b25lIiwiX2V4Y2VwdGlvbkhhbmRsZXIiLCJfY29tcG9uZW50RmFjdG9yeVJlc29sdmVyIiwiX2luaXRTdGF0dXMiLCJfYm9vdHN0cmFwTGlzdGVuZXJzIiwiX3ZpZXdzIiwiX3J1bm5pbmdUaWNrIiwiX3N0YWJsZSIsImNvbXBvbmVudFR5cGVzIiwiX29uTWljcm90YXNrRW1wdHlTdWJzY3JpcHRpb24iLCJ0aWNrIiwiaXNDdXJyZW50bHlTdGFibGUiLCJzdGFibGVTdWIiLCJ1bnN0YWJsZVN1YiIsImFzc2VydEluQW5ndWxhclpvbmUiLCJjb21wb25lbnRPckZhY3RvcnkiLCJzZWxlY3Rvck9yTm9kZSIsImNvbXBSZWYiLCJ0ZXN0YWJpbGl0eVJlZ2lzdHJ5IiwiX2xvYWRDb21wb25lbnQiLCJhdHRhY2hWaWV3Iiwidmlld0NvdW50IiwiX2Rldk1vZGUiLCJfcnVuTW9kZUxvY2tlZCIsImlzRGV2TW9kZSIsImVuYWJsZVByb2RNb2RlIiwiZ2V0TW9kdWxlRmFjdG9yeSIsIm5vTW9kdWxlRXJyb3IiLCJnZXROZ01vZHVsZUJ5SWQiLCJDaGFuZ2VEZXRlY3RvclJlZiIsImluamVjdENoYW5nZURldGVjdG9yUmVmIiwiaXNQaXBlIiwiaG9zdENvbXBvbmVudFZpZXciLCJjcmVhdGVWaWV3UmVmIiwiVmlld1JlZiIsIkVtYmVkZGVkVmlld1JlZiIsIkRlYnVnRXZlbnRMaXN0ZW5lciIsImFzTmF0aXZlRWxlbWVudHMiLCJkZWJ1Z0VscyIsIkRlYnVnTm9kZSIsIm5hdGl2ZU5vZGUiLCJEZWJ1Z0VsZW1lbnQiLCJyZWZlcmVuY2VzIiwiZGlzY292ZXJMb2NhbFJlZnMiLCJnZXRMb2NhbFJlZnMiLCJwcm92aWRlclRva2VucyIsImdldEluamVjdGlvblRva2VucyIsIk5vZGVQcm90b3R5cGUiLCJkZXNjcmlwdG9ycyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJpc1ByaW1pdGl2ZVZhbHVlIiwiY29weURvbVByb3BlcnRpZXMiLCJiaW5kaW5nSW5kZXhlcyIsIm1ldGFkYXRhUGFydHMiLCJjb2xsZWN0UHJvcGVydHlCaW5kaW5ncyIsImxvd2VyY2FzZVROb2RlQXR0cnMiLCJlQXR0cnMiLCJsb3dlcmNhc2VOYW1lIiwiYmFzZVZhbCIsImNoaWxkTm9kZXMiLCJnZXREZWJ1Z05vZGUiLCJxdWVyeSIsInF1ZXJ5QWxsIiwiX3F1ZXJ5QWxsIiwicXVlcnlBbGxOb2RlcyIsInRyaWdnZXJFdmVudEhhbmRsZXIiLCJldmVudE9iaiIsImludm9rZWRMaXN0ZW5lcnMiLCJldmVudExpc3RlbmVycyIsInVud3JhcHBlZExpc3RlbmVyIiwicGFyZW50RWxlbWVudCIsImVsZW1lbnRzT25seSIsIl9xdWVyeU5vZGVDaGlsZHJlbiIsIl9xdWVyeU5hdGl2ZU5vZGVEZXNjZW5kYW50cyIsInJvb3ROYXRpdmVOb2RlIiwiZ2V0TmF0aXZlQnlUTm9kZU9yTnVsbCIsIl9hZGRRdWVyeU1hdGNoIiwibm9kZU9yQ29udGFpbmVyIiwiX3F1ZXJ5Tm9kZUNoaWxkcmVuSW5Db250YWluZXIiLCJoZWFkIiwibmV4dExWaWV3IiwibmV4dFROb2RlIiwiY2hpbGRWaWV3IiwiZGVidWdOb2RlIiwiZ2V0RGVidWdOb2RlUjIiLCJfbmF0aXZlTm9kZSIsIkRlZmF1bHRJdGVyYWJsZURpZmZlckZhY3RvcnkiLCJzdXBwb3J0cyIsInRyYWNrQnlGbiIsIkRlZmF1bHRJdGVyYWJsZURpZmZlciIsInRyYWNrQnlJZGVudGl0eSIsIl9saW5rZWRSZWNvcmRzIiwiX3VubGlua2VkUmVjb3JkcyIsIl9wcmV2aW91c0l0SGVhZCIsIl9pdEhlYWQiLCJfaXRUYWlsIiwiX2FkZGl0aW9uc0hlYWQiLCJfYWRkaXRpb25zVGFpbCIsIl9tb3Zlc0hlYWQiLCJfbW92ZXNUYWlsIiwiX3JlbW92YWxzSGVhZCIsIl9yZW1vdmFsc1RhaWwiLCJfaWRlbnRpdHlDaGFuZ2VzSGVhZCIsIl9pZGVudGl0eUNoYW5nZXNUYWlsIiwiX3RyYWNrQnlGbiIsImZvckVhY2hJdGVtIiwiZm9yRWFjaE9wZXJhdGlvbiIsIm5leHRJdCIsIm5leHRSZW1vdmUiLCJhZGRSZW1vdmVPZmZzZXQiLCJtb3ZlT2Zmc2V0cyIsImN1cnJlbnRJbmRleCIsImdldFByZXZpb3VzSW5kZXgiLCJhZGpQcmV2aW91c0luZGV4IiwiX25leHRSZW1vdmVkIiwicHJldmlvdXNJbmRleCIsImxvY2FsTW92ZVByZXZpb3VzSW5kZXgiLCJsb2NhbEN1cnJlbnRJbmRleCIsIm9mZnNldCIsImZvckVhY2hQcmV2aW91c0l0ZW0iLCJfbmV4dFByZXZpb3VzIiwiZm9yRWFjaEFkZGVkSXRlbSIsIl9uZXh0QWRkZWQiLCJmb3JFYWNoTW92ZWRJdGVtIiwiX25leHRNb3ZlZCIsImZvckVhY2hSZW1vdmVkSXRlbSIsImZvckVhY2hJZGVudGl0eUNoYW5nZSIsIl9uZXh0SWRlbnRpdHlDaGFuZ2UiLCJjb2xsZWN0aW9uIiwiY2hlY2siLCJfcmVzZXQiLCJpdGVtVHJhY2tCeSIsIm1heUJlRGlydHkiLCJ0cmFja0J5SWQiLCJfdmVyaWZ5UmVpbnNlcnRpb24iLCJfYWRkSWRlbnRpdHlDaGFuZ2UiLCJfbWlzbWF0Y2giLCJpdGVyYXRlTGlzdExpa2UiLCJfdHJ1bmNhdGUiLCJpc0RpcnR5IiwicHJldmlvdXNSZWNvcmQiLCJfcHJldiIsIl9yZW1vdmUiLCJfcmVpbnNlcnRBZnRlciIsIl9tb3ZlQWZ0ZXIiLCJfYWRkQWZ0ZXIiLCJJdGVyYWJsZUNoYW5nZVJlY29yZF8iLCJyZWluc2VydFJlY29yZCIsIl9hZGRUb01vdmVzIiwibmV4dFJlY29yZCIsIl9hZGRUb1JlbW92YWxzIiwiX3VubGluayIsInByZXZSZWNvcmQiLCJfcHJldlJlbW92ZWQiLCJfaW5zZXJ0QWZ0ZXIiLCJfRHVwbGljYXRlTWFwIiwicHV0IiwidG9JbmRleCIsIl9wcmV2RHVwIiwiX25leHREdXAiLCJfRHVwbGljYXRlSXRlbVJlY29yZExpc3QiLCJfaGVhZCIsIl90YWlsIiwiYXRPckFmdGVySW5kZXgiLCJkdXBsaWNhdGVzIiwicmVjb3JkTGlzdCIsImlzRW1wdHkiLCJtb3ZlT2Zmc2V0IiwiRGVmYXVsdEtleVZhbHVlRGlmZmVyRmFjdG9yeSIsIkRlZmF1bHRLZXlWYWx1ZURpZmZlciIsIl9yZWNvcmRzIiwiX21hcEhlYWQiLCJfYXBwZW5kQWZ0ZXIiLCJfcHJldmlvdXNNYXBIZWFkIiwiX2NoYW5nZXNIZWFkIiwiX2NoYW5nZXNUYWlsIiwiZm9yRWFjaENoYW5nZWRJdGVtIiwiX25leHRDaGFuZ2VkIiwiX2ZvckVhY2giLCJfbWF5YmVBZGRUb0NoYW5nZXMiLCJfZ2V0T3JDcmVhdGVSZWNvcmRGb3JLZXkiLCJfaW5zZXJ0QmVmb3JlT3JBcHBlbmQiLCJLZXlWYWx1ZUNoYW5nZVJlY29yZF8iLCJfYWRkVG9BZGRpdGlvbnMiLCJfYWRkVG9DaGFuZ2VzIiwiZGVmYXVsdEl0ZXJhYmxlRGlmZmVyc0ZhY3RvcnkiLCJJdGVyYWJsZURpZmZlcnMiLCJjb3BpZWQiLCJkZWZhdWx0S2V5VmFsdWVEaWZmZXJzRmFjdG9yeSIsIktleVZhbHVlRGlmZmVycyIsImt2Iiwia2V5VmFsRGlmZiIsIml0ZXJhYmxlRGlmZiIsImRlZmF1bHRJdGVyYWJsZURpZmZlcnMiLCJkZWZhdWx0S2V5VmFsdWVEaWZmZXJzIiwicGxhdGZvcm1Db3JlIiwiQXBwbGljYXRpb25Nb2R1bGUiLCJjb21waWxlRGlyZWN0aXZlRGVjbGFyYXRpb24iLCJjb21waWxlQ29tcG9uZW50RGVjbGFyYXRpb24iLCJnZXRGYWN0b3J5S2luZCIsImNvbXBpbGVGYWN0b3J5RGVjbGFyYXRpb24iLCJjb21waWxlSW5qZWN0YWJsZURlY2xhcmF0aW9uIiwiY29tcGlsZUluamVjdG9yRGVjbGFyYXRpb24iLCJjb21waWxlTmdNb2R1bGVEZWNsYXJhdGlvbiIsImNvbXBpbGVQaXBlRGVjbGFyYXRpb24iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsInRvU3RyaW5nVGFnIiwiU2lnbmFsaW5nU2VydmVyIiwiUHJvb2ZtZVV0aWxzIl0sInNvdXJjZVJvb3QiOiIifQ==